{
  Log log=getLog();
  if (log.isDebugEnabled()) {
    if (isFilterEnabled()) {
      log.debug(_filterClass + " is enabled");
    }
 else {
      log.debug(_filterClass + " is disabled");
    }
  }
  HttpServletRequest request=(HttpServletRequest)servletRequest;
  HttpServletResponse response=(HttpServletResponse)servletResponse;
  StringBuffer requestURL=request.getRequestURL();
  boolean filterEnabled=isFilterEnabled();
  if (filterEnabled && _servlet24Dispatcher && (requestURL == null)) {
    filterEnabled=false;
  }
  if (filterEnabled) {
    String url=requestURL.toString();
    String queryString=request.getQueryString();
    if (Validator.isNotNull(queryString)) {
      url=url.concat(StringPool.QUESTION).concat(queryString);
    }
    Matcher matcher=null;
    Matcher ignoreMatcher=null;
    if (_urlRegexPattern != null) {
      matcher=_urlRegexPattern.matcher(url);
    }
    if (_urlRegexIgnorePattern != null) {
      ignoreMatcher=_urlRegexIgnorePattern.matcher(url);
    }
    if ((matcher != null) && (ignoreMatcher != null)) {
      filterEnabled=matcher.find() && !ignoreMatcher.find();
    }
 else     if (matcher != null) {
      filterEnabled=matcher.find();
    }
 else     if (ignoreMatcher != null) {
      filterEnabled=!ignoreMatcher.find();
    }
  }
  try {
    if (filterEnabled) {
      processFilter(request,response,filterChain);
    }
 else {
      processFilter(_filterClass,request,response,filterChain);
    }
  }
 catch (  IOException ioe) {
    throw ioe;
  }
catch (  ServletException se) {
    throw se;
  }
catch (  Exception e) {
    getLog().error(e,e);
  }
}
