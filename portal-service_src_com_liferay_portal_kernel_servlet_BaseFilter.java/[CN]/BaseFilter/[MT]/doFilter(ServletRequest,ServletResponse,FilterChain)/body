{
  Log log=getLog();
  if (log.isDebugEnabled()) {
    if (isFilterEnabled()) {
      log.debug(_filterClass + " is enabled");
    }
 else {
      log.debug(_filterClass + " is disabled");
    }
  }
  HttpServletRequest request=(HttpServletRequest)servletRequest;
  HttpServletResponse response=(HttpServletResponse)servletResponse;
  StringBuffer requestURL=request.getRequestURL();
  boolean filterEnabled=isFilterEnabled();
  if (filterEnabled && (requestURL == null)) {
    filterEnabled=false;
  }
  if (filterEnabled && ((_urlRegexPattern != null) || (_urlRegexIgnorePattern != null))) {
    String url=requestURL.toString();
    String queryString=request.getQueryString();
    if (Validator.isNotNull(queryString)) {
      url=url.concat(StringPool.QUESTION).concat(queryString);
    }
    if (_urlRegexPattern != null) {
      Matcher matcher=_urlRegexPattern.matcher(url);
      filterEnabled=matcher.find();
    }
    if (filterEnabled && (_urlRegexIgnorePattern != null)) {
      Matcher matcher=_urlRegexIgnorePattern.matcher(url);
      filterEnabled=!matcher.find();
    }
  }
  try {
    if (filterEnabled) {
      processFilter(request,response,filterChain);
    }
 else {
      processFilter(_filterClass,request,response,filterChain);
    }
  }
 catch (  IOException ioe) {
    throw ioe;
  }
catch (  ServletException se) {
    throw se;
  }
catch (  Exception e) {
    getLog().error(e,e);
  }
}
