{
  List<Method> idMethods=new ArrayList<Method>();
  List<Method> proxyMethods=new ArrayList<Method>();
  List<Method> emptyMethods=new ArrayList<Method>();
  for (  Method method : ReflectionUtil.getVisibleMethods(clazz)) {
    Id id=method.getAnnotation(Id.class);
    if (id != null) {
      if (Modifier.isStatic(method.getModifiers()) || (method.getParameterTypes().length > 0) || (method.getReturnType() != String.class)) {
        throw new IllegalArgumentException("Id method violation " + method);
      }
      idMethods.add(method);
      continue;
    }
    Proxy proxy=method.getAnnotation(Proxy.class);
    if (proxy != null) {
      if (Modifier.isStatic(method.getModifiers())) {
        throw new IllegalArgumentException("Proxy method violation " + method + ", can not be static");
      }
      proxyMethods.add(method);
      continue;
    }
    if (Modifier.isAbstract(method.getModifiers())) {
      emptyMethods.add(method);
    }
  }
  return new MethodsBag(idMethods,proxyMethods,emptyMethods);
}
