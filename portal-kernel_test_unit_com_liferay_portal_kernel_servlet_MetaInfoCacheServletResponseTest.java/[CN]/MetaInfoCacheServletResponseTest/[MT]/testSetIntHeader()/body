{
  final List<ObjectValuePair<String,Integer>> objectValuePairs=new ArrayList<>();
  StubHttpServletResponse stubHttpServletResponse=new StubHttpServletResponse(){
    @Override public void setIntHeader(    String name,    int value){
      objectValuePairs.add(new ObjectValuePair<String,Integer>(name,value));
    }
  }
;
  MetaInfoCacheServletResponse metaInfoCacheServletResponse=new MetaInfoCacheServletResponse(stubHttpServletResponse);
  Map<String,Set<Header>> headers=metaInfoCacheServletResponse.getHeaders();
  Assert.assertEquals(0,headers.size());
  metaInfoCacheServletResponse.setIntHeader("name1",1);
  Assert.assertEquals(1,headers.size());
  Assert.assertTrue(metaInfoCacheServletResponse.containsHeader("name1"));
  Set<Header> intHeaders1=headers.get("name1");
  Assert.assertEquals(1,intHeaders1.size());
  Assert.assertTrue(intHeaders1.contains(new Header(1)));
  Assert.assertEquals(1,objectValuePairs.size());
  Assert.assertEquals(new ObjectValuePair<String,Integer>("name1",1),objectValuePairs.get(0));
  metaInfoCacheServletResponse.setIntHeader("name1",2);
  Assert.assertEquals(1,headers.size());
  Assert.assertTrue(metaInfoCacheServletResponse.containsHeader("name1"));
  intHeaders1=headers.get("name1");
  Assert.assertEquals(1,intHeaders1.size());
  Assert.assertTrue(intHeaders1.contains(new Header(2)));
  Assert.assertEquals(2,objectValuePairs.size());
  Assert.assertEquals(new ObjectValuePair<String,Integer>("name1",2),objectValuePairs.get(1));
  metaInfoCacheServletResponse.setIntHeader("name2",1);
  Assert.assertEquals(2,headers.size());
  Assert.assertTrue(metaInfoCacheServletResponse.containsHeader("name2"));
  Set<Header> intHeaders2=headers.get("name2");
  Assert.assertEquals(1,intHeaders2.size());
  Assert.assertTrue(intHeaders2.contains(new Header(1)));
  Assert.assertEquals(3,objectValuePairs.size());
  Assert.assertEquals(new ObjectValuePair<String,Integer>("name2",1),objectValuePairs.get(2));
}
