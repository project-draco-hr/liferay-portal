{
  long companyId=portletDataContext.getCompanyId();
  long userId=portletDataContext.getUserId(passwordPolicy.getUserUuid());
  ServiceContext serviceContext=portletDataContext.createServiceContext(passwordPolicy,PasswordPolicyPortletDataHandler.NAMESPACE);
  PasswordPolicy existingPasswordPolicy=PasswordPolicyLocalServiceUtil.fetchPasswordPolicyByUuidAndCompanyId(passwordPolicy.getUuid(),companyId);
  if (existingPasswordPolicy == null) {
    existingPasswordPolicy=PasswordPolicyLocalServiceUtil.fetchPasswordPolicy(companyId,passwordPolicy.getName());
  }
  PasswordPolicy importedPasswordPolicy=null;
  if (existingPasswordPolicy == null) {
    serviceContext.setUuid(passwordPolicy.getUuid());
    importedPasswordPolicy=PasswordPolicyLocalServiceUtil.addPasswordPolicy(userId,passwordPolicy.isDefaultPolicy(),passwordPolicy.getName(),passwordPolicy.getDescription(),passwordPolicy.getChangeable(),passwordPolicy.isChangeRequired(),passwordPolicy.getMinAge(),passwordPolicy.getCheckSyntax(),passwordPolicy.isAllowDictionaryWords(),passwordPolicy.getMinAlphanumeric(),passwordPolicy.getMinLength(),passwordPolicy.getMinLowerCase(),passwordPolicy.getMinNumbers(),passwordPolicy.getMinSymbols(),passwordPolicy.getMinUpperCase(),passwordPolicy.getRegex(),passwordPolicy.isHistory(),passwordPolicy.getHistoryCount(),passwordPolicy.isExpireable(),passwordPolicy.getMaxAge(),passwordPolicy.getWarningTime(),passwordPolicy.getGraceLimit(),passwordPolicy.isLockout(),passwordPolicy.getMaxFailure(),passwordPolicy.getLockoutDuration(),passwordPolicy.getResetFailureCount(),passwordPolicy.getResetTicketMaxAge(),serviceContext);
  }
 else {
    importedPasswordPolicy=PasswordPolicyLocalServiceUtil.updatePasswordPolicy(existingPasswordPolicy.getPasswordPolicyId(),passwordPolicy.getName(),passwordPolicy.getDescription(),passwordPolicy.isChangeable(),passwordPolicy.isChangeRequired(),passwordPolicy.getMinAge(),passwordPolicy.isCheckSyntax(),passwordPolicy.isAllowDictionaryWords(),passwordPolicy.getMinAlphanumeric(),passwordPolicy.getMinLength(),passwordPolicy.getMinLowerCase(),passwordPolicy.getMinNumbers(),passwordPolicy.getMinSymbols(),passwordPolicy.getMinUpperCase(),passwordPolicy.getRegex(),passwordPolicy.isHistory(),passwordPolicy.getHistoryCount(),passwordPolicy.isExpireable(),passwordPolicy.getMaxAge(),passwordPolicy.getWarningTime(),passwordPolicy.getGraceLimit(),passwordPolicy.isLockout(),passwordPolicy.getMaxFailure(),passwordPolicy.getLockoutDuration(),passwordPolicy.getResetFailureCount(),passwordPolicy.getResetTicketMaxAge(),serviceContext);
  }
  portletDataContext.importClassedModel(passwordPolicy,importedPasswordPolicy,PasswordPolicyPortletDataHandler.NAMESPACE);
}
