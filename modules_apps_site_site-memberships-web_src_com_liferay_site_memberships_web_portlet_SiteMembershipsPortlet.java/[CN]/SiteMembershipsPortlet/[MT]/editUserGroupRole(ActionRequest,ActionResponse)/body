{
  User user=PortalUtil.getSelectedUser(actionRequest,false);
  if (user == null) {
    return;
  }
  long groupId=ParamUtil.getLong(actionRequest,"groupId");
  long[] addRoleIds=StringUtil.split(ParamUtil.getString(actionRequest,"addRoleIds"),0L);
  long[] removeRoleIds=StringUtil.split(ParamUtil.getString(actionRequest,"removeRoleIds"),0L);
  UserGroupRoleServiceUtil.addUserGroupRoles(user.getUserId(),groupId,addRoleIds);
  UserGroupRoleServiceUtil.deleteUserGroupRoles(user.getUserId(),groupId,removeRoleIds);
  String redirect=ParamUtil.getString(actionRequest,"assignmentsRedirect");
  if (Validator.isNotNull(redirect)) {
    actionRequest.setAttribute(WebKeys.REDIRECT,redirect);
  }
}
