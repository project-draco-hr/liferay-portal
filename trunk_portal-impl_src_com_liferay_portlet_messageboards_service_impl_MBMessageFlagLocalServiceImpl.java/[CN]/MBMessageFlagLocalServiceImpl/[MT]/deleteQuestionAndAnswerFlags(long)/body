{
  List<MBMessage> messages=mbMessagePersistence.findByThreadId(threadId);
  for (  MBMessage message : messages) {
    if (message.isRoot()) {
      List<MBMessageFlag> messageFlags=mbMessageFlagPersistence.findByM_F(message.getMessageId(),MBMessageFlagConstants.QUESTION_FLAG);
      for (      MBMessageFlag messageFlag : messageFlags) {
        deleteFlag(messageFlag);
      }
    }
    List<MBMessageFlag> messageFlags=mbMessageFlagPersistence.findByM_F(message.getMessageId(),MBMessageFlagConstants.ANSWER_FLAG);
    for (    MBMessageFlag messageFlag : messageFlags) {
      deleteFlag(messageFlag);
    }
  }
}
