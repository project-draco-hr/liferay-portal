{
  if (Validator.isBlank(portletModel.getResourceBundle())) {
    return;
  }
  for (  Locale locale : LanguageUtil.getAvailableLocales()) {
    ResourceBundle resourceBundle=ResourceBundleUtil.getBundle(portletModel.getResourceBundle(),locale,classLoader);
    Dictionary<String,Object> properties=new HashMapDictionary<>();
    properties.put("javax.portlet.name",portletModel.getPortletId());
    properties.put("language.id",LocaleUtil.toLanguageId(locale));
    ServiceRegistration<ResourceBundle> serviceRegistration=bundleContext.registerService(ResourceBundle.class,resourceBundle,properties);
    serviceRegistrations.addServiceRegistration(serviceRegistration);
  }
}
