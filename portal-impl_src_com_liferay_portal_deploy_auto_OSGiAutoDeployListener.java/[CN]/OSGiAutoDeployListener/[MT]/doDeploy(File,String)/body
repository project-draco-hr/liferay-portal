{
  Framework framework=OSGiServiceUtil.getFramework();
  if (framework == null) {
    if (_log.isDebugEnabled()) {
      _log.debug("OSGi framework disabled or not installed!");
    }
    return;
  }
  String fileName=file.getName();
  fileName=fileName.toLowerCase();
  if (file.isDirectory() || (!fileName.endsWith(".jar") && !fileName.endsWith(".war"))) {
    return;
  }
  ZipReader zipReader=null;
  InputStream inputStream=null;
  try {
    zipReader=ZipReaderFactoryUtil.getZipReader(file);
    inputStream=zipReader.getEntryAsInputStream("/META-INF/MANIFEST.MF");
    if (inputStream == null) {
      return;
    }
    Manifest manifest=new Manifest(inputStream);
    Attributes attributes=manifest.getMainAttributes();
    String bundleSymbolicName=attributes.getValue(Constants.BUNDLE_SYMBOLICNAME);
    if (Validator.isNotNull(bundleSymbolicName)) {
      installBundle(framework,file,manifest);
    }
  }
  finally {
    cleanUp(zipReader,inputStream);
  }
}
