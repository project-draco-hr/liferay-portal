{
  Bundle bundle=getBundle(framework,manifest);
  InputStream inputStream=new FileInputStream(file);
  if (bundle != null) {
    bundle.update(inputStream);
  }
 else {
    try {
      BundleContext bundleContext=framework.getBundleContext();
      URI uri=file.toURI();
      bundle=bundleContext.installBundle(uri.toString(),inputStream);
    }
 catch (    Exception e) {
      _log.error(e,e);
    }
  }
  if (bundle == null) {
    return;
  }
  Dictionary<String,String> headers=bundle.getHeaders();
  if (headers.get(Constants.FRAGMENT_HOST) != null) {
    return;
  }
  bundle.start();
}
