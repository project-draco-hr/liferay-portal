{
  List<NotificationRecipient> notificationRecipients=_getNotificationRecipients(calendarBooking);
  for (  NotificationRecipient notificationRecipient : notificationRecipients) {
    User user=notificationRecipient.getUser();
    long startTime=calendarBooking.getStartTime();
    if (nowTime > startTime) {
      return;
    }
    NotificationType notificationType=null;
    long deltaTime=startTime - nowTime;
    if (_isInCheckInterval(deltaTime,calendarBooking.getFirstReminder())) {
      notificationType=calendarBooking.getFirstReminderNotificationType();
    }
 else     if (_isInCheckInterval(deltaTime,calendarBooking.getSecondReminder())) {
      notificationType=calendarBooking.getSecondReminderNotificationType();
    }
    if (notificationType == null) {
      continue;
    }
    NotificationSender notificationSender=NotificationSenderFactory.getNotificationSender(notificationType.toString());
    NotificationTemplateContext notificationTemplateContext=NotificationTemplateContextFactory.getInstance(notificationType,NotificationTemplateType.REMINDER,calendarBooking,user);
    notificationSender.sendNotification(user.getEmailAddress(),user.getFullName(),notificationRecipient,notificationTemplateContext);
  }
}
