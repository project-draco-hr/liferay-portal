{
  for (int i=0; i < 4; i++) {
    DLAppTestUtil.addFileEntry(_group.getGroupId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,RandomTestUtil.randomString() + ".txt",String.valueOf(i),true);
    FileEntry fileEntry=DLAppTestUtil.addFileEntry(_group.getGroupId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,RandomTestUtil.randomString() + ".txt",RandomTestUtil.randomString(),true);
    deleteGuestPermission(fileEntry);
  }
  long userId=PrincipalThreadLocal.getUserId();
  ServiceTestUtil.setUser(_user);
  try {
    Assert.assertEquals(8,SocialActivityServiceUtil.getGroupActivitiesCount(_group.getGroupId()));
    List<SocialActivity> activities=SocialActivityServiceUtil.getGroupActivities(_group.getGroupId(),0,2);
    Assert.assertEquals(2,activities.size());
    int index=3;
    for (    SocialActivity activity : activities) {
      String title=String.valueOf(index);
      Assert.assertEquals(title,activity.getExtraDataValue("title"));
      index--;
    }
    activities=SocialActivityServiceUtil.getGroupActivities(_group.getGroupId(),2,4);
    Assert.assertEquals(2,activities.size());
    for (    SocialActivity activity : activities) {
      String title=String.valueOf(index);
      Assert.assertEquals(title,activity.getExtraDataValue("title"));
      index--;
    }
  }
  finally {
    User user=UserLocalServiceUtil.getUser(userId);
    ServiceTestUtil.setUser(user);
  }
}
