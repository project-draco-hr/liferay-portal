{
  String name=PrincipalThreadLocal.getName();
  if (name == null) {
    throw new PrincipalException();
  }
  PrincipalFinder principalFinder=null;
  try {
    principalFinder=(PrincipalFinder)InstancePool.get(PropsUtil.get(PropsUtil.PRINCIPAL_FINDER));
    name=principalFinder.toLiferay(name);
  }
 catch (  Exception e) {
  }
  if (Validator.isNull(name)) {
    throw new PrincipalException("Principal cannot be null");
  }
  return name;
}
