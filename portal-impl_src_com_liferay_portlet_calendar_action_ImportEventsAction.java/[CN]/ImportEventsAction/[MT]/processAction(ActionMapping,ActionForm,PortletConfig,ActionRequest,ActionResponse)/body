{
  try {
    UploadPortletRequest uploadRequest=PortalUtil.getUploadPortletRequest(actionRequest);
    Layout layout=(Layout)actionRequest.getAttribute(WebKeys.LAYOUT);
    File file=uploadRequest.getFile("file");
    CalEventServiceUtil.importICal4j(layout.getPlid(),file);
    sendRedirect(actionRequest,actionResponse);
  }
 catch (  Exception e) {
    _log.error(e,e);
    SessionErrors.add(actionRequest,e.getClass().getName());
    setForward(actionRequest,"portlet.calendar.error");
  }
}
