{
  try {
    UploadPortletRequest uploadRequest=PortalUtil.getUploadPortletRequest(actionRequest);
    ServiceContext serviceContext=ServiceContextFactory.getInstance(CalEvent.class.getName(),actionRequest);
    File file=uploadRequest.getFile("file");
    CalEventServiceUtil.importICal4j(serviceContext.getScopeGroupId(),file);
    sendRedirect(actionRequest,actionResponse);
  }
 catch (  Exception e) {
    _log.error(e,e);
    SessionErrors.add(actionRequest,e.getClass().getName());
    setForward(actionRequest,"portlet.calendar.error");
  }
}
