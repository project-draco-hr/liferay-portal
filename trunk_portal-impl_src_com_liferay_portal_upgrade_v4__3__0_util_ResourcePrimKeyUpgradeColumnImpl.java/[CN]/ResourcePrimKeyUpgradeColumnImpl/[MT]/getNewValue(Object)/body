{
  String primKey=(String)oldValue;
  int scope=_codeIdColumn.getScope();
  if (scope == ResourceConstants.SCOPE_COMPANY) {
    return primKey;
  }
 else   if (scope == ResourceConstants.SCOPE_GROUP) {
    return String.valueOf(_groupIdMapper.getNewValue(new Long(GetterUtil.getLong(primKey))));
  }
 else   if (scope == ResourceConstants.SCOPE_INDIVIDUAL) {
    String name=(String)_nameColumn.getOldValue();
    if (name.startsWith("com.liferay.")) {
      primKey=getClassPKPrimKey(name,primKey);
    }
 else     if ((primKey.indexOf("_LAYOUT_") > 0) && (primKey.startsWith("PUB.") || primKey.startsWith("PRI."))) {
      primKey=getLayoutPrimKey(primKey);
    }
    return primKey;
  }
 else {
    throw new UpgradeException("Scope " + scope + " is invalid");
  }
}
