{
  DynamicQuery dynamicQuery=DynamicQueryFactoryUtil.forClass(CalEvent.class,PACLClassLoaderUtil.getPortalClassLoader());
  Projection minEventIdProjection=ProjectionFactoryUtil.min("eventId");
  Projection maxEventIdProjection=ProjectionFactoryUtil.max("eventId");
  ProjectionList projectionList=ProjectionFactoryUtil.projectionList();
  projectionList.add(minEventIdProjection);
  projectionList.add(maxEventIdProjection);
  dynamicQuery.setProjection(projectionList);
  addReindexCriteria(dynamicQuery,companyId);
  List<Object[]> results=CalEventLocalServiceUtil.dynamicQuery(dynamicQuery);
  Object[] minAndMaxEventIds=results.get(0);
  if ((minAndMaxEventIds[0] == null) || (minAndMaxEventIds[1] == null)) {
    return;
  }
  long minEventId=(Long)minAndMaxEventIds[0];
  long maxEventId=(Long)minAndMaxEventIds[1];
  long startEventId=minEventId;
  long endEventId=startEventId + DEFAULT_INTERVAL;
  while (startEventId <= maxEventId) {
    reindexEvents(companyId,startEventId,endEventId);
    startEventId=endEventId;
    endEventId+=DEFAULT_INTERVAL;
  }
}
