{
  Path path=file.toPath();
  String content=new String(Files.readAllBytes(path),StandardCharsets.UTF_8);
  Matcher matcher=pattern.matcher(content);
  if (!matcher.find()) {
    String message="Unable to match " + pattern + " in "+ file;
    if (isIgnoreUnmatched()) {
      if (_logger.isInfoEnabled()) {
        _logger.info(message);
      }
      return;
    }
    throw new GradleException(message);
  }
  int groupCount=matcher.groupCount();
  String newContent=content.substring(0,matcher.start(groupCount)) + replacement + content.substring(matcher.end(groupCount));
  if (content.equals(newContent)) {
    return;
  }
  Files.write(path,newContent.getBytes(StandardCharsets.UTF_8));
  _matchedFiles.add(file);
}
