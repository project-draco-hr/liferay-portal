{
  while (true) {
    if (portalCache instanceof PortalCacheWrapper) {
      PortalCacheWrapper<?,?> portalCacheWrapper=(PortalCacheWrapper<?,?>)portalCache;
      portalCache=portalCacheWrapper.getWrappedPortalCache();
    }
 else     if (portalCache instanceof EhcachePortalCache) {
      EhcachePortalCache<?,?> ehcachePortalCache=(EhcachePortalCache<?,?>)portalCache;
      return ehcachePortalCache.ehcache;
    }
 else {
      throw new IllegalArgumentException("PortalCache is not a " + EhcachePortalCache.class.getName() + " or a "+ PortalCacheWrapper.class.getName());
    }
  }
}
