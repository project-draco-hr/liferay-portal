{
  final long systemEventClassNameId=PortalUtil.getClassNameId(trashHandler.getSystemEventClassName());
  ActionableDynamicQuery actionableDynamicQuery=SystemEventLocalServiceUtil.getActionableDynamicQuery();
  actionableDynamicQuery.setAddCriteriaMethod(new ActionableDynamicQuery.AddCriteriaMethod(){
    @Override public void addCriteria(    DynamicQuery dynamicQuery){
      Property classNameIdProperty=PropertyFactoryUtil.forName("classNameId");
      dynamicQuery.add(classNameIdProperty.eq(systemEventClassNameId));
      if (systemEventSetKey > 0) {
        Property systemEventSetKeyProperty=PropertyFactoryUtil.forName("systemEventSetKey");
        dynamicQuery.add(systemEventSetKeyProperty.eq(systemEventSetKey));
      }
      Property typeProperty=PropertyFactoryUtil.forName("type");
      dynamicQuery.add(typeProperty.eq(SystemEventConstants.TYPE_DELETE));
    }
  }
);
  actionableDynamicQuery.setGroupId(group.getGroupId());
  return actionableDynamicQuery.performCount();
}
