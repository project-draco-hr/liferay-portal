{
  Thread currentThread=Thread.currentThread();
  StackTraceElement[] stackTraceElements=currentThread.getStackTrace();
  for (int i=1; i < stackTraceElements.length; i++) {
    StackTraceElement stackTraceElement=stackTraceElements[i];
    String className=stackTraceElement.getClassName();
    if ((className.startsWith("com.liferay.portalweb.plugins") || className.startsWith("com.liferay.portalweb.portal") || className.startsWith("com.liferay.portalweb.portlet")|| className.startsWith("com.liferay.portalweb.properties")) && className.endsWith("Test")) {
      String dirName=className.substring(22,className.lastIndexOf(".") + 1);
      dirName=StringUtil.replace(dirName,".","/");
      String fileName=stackTraceElement.getFileName();
      int lineNumber=stackTraceElement.getLineNumber();
      FileUtil.mkdirs(_OUTPUT_SCREENSHOTS_DIR + dirName);
      return dirName + fileName + "-"+ lineNumber;
    }
  }
  throw new RuntimeException("Unable to find screenshot file name");
}
