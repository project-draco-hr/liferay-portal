{
  portletDataContext.importPermissions("com.liferay.portlet.imagegallery",portletDataContext.getSourceGroupId(),portletDataContext.getScopeGroupId());
  Document document=SAXReaderUtil.read(data);
  Element rootElement=document.getRootElement();
  Element foldersElement=rootElement.element("folders");
  List<Element> folderElements=foldersElement.elements("folder");
  for (  Element folderElement : folderElements) {
    String path=folderElement.attributeValue("path");
    if (!portletDataContext.isPathNotProcessed(path)) {
      continue;
    }
    IGFolder folder=(IGFolder)portletDataContext.getZipEntryAsObject(path);
    Map<String,Serializable> expandoAttributes=getExpandoAttributes(portletDataContext,folderElement);
    importFolder(portletDataContext,folder,expandoAttributes);
  }
  Element imagesElement=rootElement.element("images");
  List<Element> imageElements=imagesElement.elements("image");
  for (  Element imageElement : imageElements) {
    String path=imageElement.attributeValue("path");
    if (!portletDataContext.isPathNotProcessed(path)) {
      continue;
    }
    IGImage image=(IGImage)portletDataContext.getZipEntryAsObject(path);
    String binPath=imageElement.attributeValue("bin-path");
    Map<String,Serializable> expandoAttributes=getExpandoAttributes(portletDataContext,imageElement);
    importImage(portletDataContext,image,binPath,expandoAttributes);
  }
  return null;
}
