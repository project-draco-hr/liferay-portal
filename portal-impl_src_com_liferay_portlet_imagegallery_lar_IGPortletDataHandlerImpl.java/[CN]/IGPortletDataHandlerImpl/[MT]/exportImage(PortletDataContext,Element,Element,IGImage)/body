{
  if (!context.isWithinDateRange(image.getModifiedDate())) {
    return;
  }
  if (foldersElement != null) {
    exportParentFolder(context,foldersElement,image.getFolderId());
  }
  String path=getImagePath(context,image);
  if (context.isPathNotProcessed(path)) {
    Element imageElement=imagesElement.addElement("image");
    imageElement.addAttribute("path",path);
    imageElement.addAttribute("bin-path",getImageBinPath(context,image));
    if (context.getBooleanParameter(_NAMESPACE,"categories")) {
      context.addAssetCategories(IGImage.class,image.getImageId());
    }
    if (context.getBooleanParameter(_NAMESPACE,"ratings")) {
      context.addRatingsEntries(IGImage.class,image.getImageId());
    }
    if (context.getBooleanParameter(_NAMESPACE,"tags")) {
      context.addAssetTags(IGImage.class,image.getImageId());
    }
    image.setUserUuid(image.getUserUuid());
    Image largeImage=ImageUtil.findByPrimaryKey(image.getLargeImageId());
    image.setImageType(largeImage.getType());
    context.addPermissions(IGImage.class,image.getImageId());
    context.addZipEntry(getImageBinPath(context,image),largeImage.getTextObj());
    context.addZipEntry(path,image);
  }
}
