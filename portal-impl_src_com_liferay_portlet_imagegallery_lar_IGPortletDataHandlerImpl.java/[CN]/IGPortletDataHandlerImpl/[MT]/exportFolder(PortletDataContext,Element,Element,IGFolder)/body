{
  if (context.isWithinDateRange(igFolder.getModifiedDate())) {
    String path=getFolderPath(context,igFolder);
    foldersEl.addElement("folder").addAttribute("path",path);
    if (context.isPathNotProcessed(path)) {
      igFolder.setUserUuid(igFolder.getUserUuid());
      context.addZipEntry(path,igFolder);
    }
    exportParentFolder(context,foldersEl,igFolder.getParentFolderId());
  }
  List<IGImage> igImages=IGImageUtil.findByFolderId(igFolder.getFolderId());
  for (  IGImage igImage : igImages) {
    exportImage(context,foldersEl,imagesEl,igImage);
  }
}
