{
  List<Document> docs=new ArrayList<>();
  List<Float> scores=new ArrayList<>();
  Document[] documents=hits.getDocs();
  int excludeDocsSize=0;
  int status=GetterUtil.getInteger(searchContext.getAttribute(Field.STATUS),WorkflowConstants.STATUS_APPROVED);
  long companyId=_permissionChecker.getCompanyId();
  boolean isCompanyAdmin=_permissionChecker.isCompanyAdmin(companyId);
  for (int i=0; i < documents.length; i++) {
    if (_isIncludeDocument(documents[i],status,isCompanyAdmin,companyId)) {
      docs.add(documents[i]);
      scores.add(hits.score(i));
    }
 else {
      excludeDocsSize++;
    }
  }
  hits.setDocs(docs.toArray(new Document[docs.size()]));
  hits.setScores(ArrayUtil.toFloatArray(scores));
  hits.setSearchTime((float)(System.currentTimeMillis() - hits.getStart()) / Time.SECOND);
  hits.setLength(hits.getLength() - excludeDocsSize);
}
