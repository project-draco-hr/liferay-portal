{
  super.copyXmls(srcFile,displayName,pluginPackage);
  FileUtil.delete(srcFile + "/META-INF/context.xml");
  String portletName=displayName;
  if (pluginPackage != null) {
    portletName=pluginPackage.getName();
  }
  Map<String,String> filterMap=new HashMap<String,String>();
  filterMap.put("portlet_name",displayName);
  filterMap.put("portlet_title",portletName);
  if (pluginPackage != null) {
    Properties deploymentSettings=pluginPackage.getDeploymentSettings();
    filterMap.put("portlet_class",deploymentSettings.getProperty("wai.portlet",WAIPortlet.class.getName()));
    filterMap.put("friendly_url_mapper_class",deploymentSettings.getProperty("wai.friendly.url.mapper",DefaultFriendlyURLMapper.class.getName()));
    filterMap.put("friendly_url_mapping",deploymentSettings.getProperty("wai.friendly.url.mapping","waiapp"));
    filterMap.put("friendly_url_routes",deploymentSettings.getProperty("wai.friendly.url.routes","com/liferay/util/bridges/wai/" + "wai-friendly-url-routes.xml"));
  }
 else {
    filterMap.put("portlet_class",WAIPortlet.class.getName());
    filterMap.put("friendly_url_mapper_class",DefaultFriendlyURLMapper.class.getName());
    filterMap.put("friendly_url_mapping","waiapp");
    filterMap.put("friendly_url_routes","com/liferay/util/bridges/wai/wai-friendly-url-routes.xml");
  }
  _setInitParams(filterMap,pluginPackage);
  copyDependencyXml("liferay-display.xml",srcFile + "/WEB-INF",filterMap);
  copyDependencyXml("liferay-portlet.xml",srcFile + "/WEB-INF",filterMap);
  copyDependencyXml("portlet.xml",srcFile + "/WEB-INF",filterMap);
  copyDependencyXml("iframe.jsp",srcFile + "/WEB-INF/jsp/liferay/wai");
}
