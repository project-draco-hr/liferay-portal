{
  long wsrpConsumerId=ParamUtil.getLong(actionRequest,"wsrpConsumerId");
  String adminPortletId=PortalUtil.getPortletId(actionRequest);
  boolean inbandRegistration=ParamUtil.getBoolean(actionRequest,"inbandRegistration");
  UnicodeProperties registrationProperties=null;
  if (inbandRegistration) {
    registrationProperties=new UnicodeProperties();
    for (int i=0; ; i++) {
      String registrationPropertyName=ParamUtil.getString(actionRequest,"registrationPropertyName" + i);
      String registrationPropertyValue=ParamUtil.getString(actionRequest,"registrationPropertyValue" + i);
      if (Validator.isNull(registrationPropertyName)) {
        break;
      }
      registrationProperties.setProperty(registrationPropertyName,registrationPropertyValue);
    }
  }
  String registrationHandle=ParamUtil.getString(actionRequest,"registrationHandle");
  WSRPConsumerLocalServiceUtil.registerWSRPConsumer(wsrpConsumerId,adminPortletId,registrationProperties,registrationHandle);
}
