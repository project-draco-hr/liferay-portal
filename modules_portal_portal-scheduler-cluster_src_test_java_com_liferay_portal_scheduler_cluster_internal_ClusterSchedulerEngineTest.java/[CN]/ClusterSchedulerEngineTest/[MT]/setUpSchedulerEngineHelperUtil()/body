{
  SchedulerEngineHelper schedulerEngineHelper=Mockito.mock(SchedulerEngineHelper.class);
  Mockito.when(schedulerEngineHelper.getJobState(Mockito.any(SchedulerResponse.class))).then(new Answer<TriggerState>(){
    @Override public TriggerState answer(    InvocationOnMock invocationOnMock) throws Throwable {
      Object[] args=invocationOnMock.getArguments();
      SchedulerResponse schedulerResponse=(SchedulerResponse)args[0];
      Message message=schedulerResponse.getMessage();
      JobState jobState=(JobState)message.get(SchedulerEngine.JOB_STATE);
      return jobState.getTriggerState();
    }
  }
);
  RegistryUtil.setRegistry(new BasicRegistryImpl());
  Registry registry=RegistryUtil.getRegistry();
  registry.registerService(SchedulerEngineHelper.class,schedulerEngineHelper);
}
