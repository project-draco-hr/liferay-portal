{
  File implDir=new File(webappDir,"WEB-INF/ext-impl");
  implDir.mkdirs();
  File implClassesDir=new File(implDir,"classes/com/liferay/portal/deploy/dependencies");
  implClassesDir.mkdirs();
  File globalLibDir=new File(webappDir,"WEB-INF/ext-lib/global");
  globalLibDir.mkdirs();
  File portalLibDir=new File(webappDir,"WEB-INF/ext-lib/portal");
  portalLibDir.mkdirs();
  File serviceDir=new File(webappDir,"WEB-INF/ext-service");
  serviceDir.mkdirs();
  File sqlDir=new File(webappDir,"WEB-INF/sql");
  sqlDir.mkdirs();
  File utilBridgesDir=new File(webappDir,"WEB-INF/ext-util-bridges");
  utilBridgesDir.mkdirs();
  File utilJavaDir=new File(webappDir,"WEB-INF/ext-util-java");
  utilJavaDir.mkdirs();
  File utilTaglibDir=new File(webappDir,"WEB-INF/ext-util-taglib");
  utilTaglibDir.mkdirs();
  File webDir=new File(webappDir,"WEB-INF/ext-web/docroot");
  webDir.mkdirs();
  workDir.mkdirs();
  String groupId=project.getGroupId();
  File extImplFile=null;
  for (  Object dependencyObj : project.getDependencies()) {
    Dependency dependency=(Dependency)dependencyObj;
    if (!groupId.equals(dependency.getGroupId())) {
      continue;
    }
    Artifact artifact=resolveArtifact(dependency);
    if (artifact.getArtifactId().endsWith("ext-impl")) {
      extImplFile=artifact.getFile();
      copyJarAndClasses(artifact,implDir,"ext-impl.jar");
    }
 else     if (artifact.getArtifactId().endsWith("ext-lib-global")) {
      copyLibraryDependencies(globalLibDir,artifact);
    }
 else     if (artifact.getArtifactId().endsWith("ext-lib-portal")) {
      copyLibraryDependencies(portalLibDir,artifact);
    }
 else     if (artifact.getArtifactId().endsWith("ext-service")) {
      copyJarAndClasses(artifact,serviceDir,"ext-service.jar");
    }
 else     if (artifact.getArtifactId().endsWith("ext-util-bridges")) {
      copyUtilLibrary(artifact,utilBridgesDir,implClassesDir,"util-bridges.jar");
    }
 else     if (artifact.getArtifactId().endsWith("ext-util-java")) {
      copyUtilLibrary(artifact,utilJavaDir,implClassesDir,"util-java.jar");
    }
 else     if (artifact.getArtifactId().endsWith("ext-util-taglib")) {
      copyUtilLibrary(artifact,utilTaglibDir,implClassesDir,"util-taglib.jar");
    }
 else     if (artifact.getArtifactId().endsWith("ext-web")) {
      String[] excludes=new String[]{"META-INF/**"};
      unpack(artifact.getFile(),webDir,excludes,null);
    }
  }
  unpack(extImplFile,workDir,null,new String[]{"portal-*.properties","system-*.properties"});
  CopyTask.copyDirectory(workDir,new File(webDir,"WEB-INF/classes"),"portal-*.properties,system-*.properties",null);
  _fileUtil.copyDirectory(sqlSourceDir,sqlDir);
  String dirName=webappDir.getAbsolutePath() + "/WEB-INF";
  ExtInfoBuilder infoBuilder=new ExtInfoBuilder(dirName,dirName,pluginName);
}
