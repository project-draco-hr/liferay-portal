{
  if (map instanceof Properties) {
    return (Properties)map;
  }
  Properties p=new Properties();
  Iterator itr=map.entrySet().iterator();
  while (itr.hasNext()) {
    Map.Entry entry=(Map.Entry)itr.next();
    String key=(String)entry.getKey();
    String value=(String)entry.getValue();
    if (value != null) {
      p.setProperty(key,value);
    }
  }
  return p;
}
