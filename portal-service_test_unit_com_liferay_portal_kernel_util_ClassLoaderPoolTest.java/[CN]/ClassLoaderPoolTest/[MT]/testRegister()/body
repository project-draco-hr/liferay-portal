{
  try {
    ClassLoaderPool.register(null,null);
    Assert.fail();
  }
 catch (  NullPointerException npe) {
  }
  try {
    ClassLoaderPool.register(StringPool.BLANK,null);
    Assert.fail();
  }
 catch (  NullPointerException npe) {
  }
  String contextName="contextName";
  ClassLoader classLoader=new URLClassLoader(new URL[0]);
  ClassLoaderPool.register(contextName,classLoader);
  Assert.assertEquals(1,_contextNames.size());
  Assert.assertEquals(1,_classLoaders.size());
  Assert.assertSame(classLoader,_classLoaders.get(contextName));
  Assert.assertEquals(contextName,_contextNames.get(classLoader));
  Assert.assertSame(classLoader,ClassLoaderPool.getClassLoader(contextName));
  Class<?> clazz=getClass();
  Assert.assertSame(clazz.getClassLoader(),ClassLoaderPool.getClassLoader(StringPool.BLANK));
  PortalClassLoaderUtil.setClassLoader(null);
  Thread currentThread=Thread.currentThread();
  ClassLoader contextClassLoader=currentThread.getContextClassLoader();
  Assert.assertSame(contextClassLoader,ClassLoaderPool.getClassLoader(StringPool.BLANK));
  Assert.assertEquals(contextName,ClassLoaderPool.getContextName(classLoader));
  Assert.assertEquals(StringPool.BLANK,ClassLoaderPool.getContextName(null));
  Assert.assertEquals(StringPool.BLANK,ClassLoaderPool.getContextName(new URLClassLoader(new URL[0])));
  ClassLoaderPool.unregister(classLoader);
  Assert.assertTrue(_contextNames.isEmpty());
  Assert.assertTrue(_classLoaders.isEmpty());
  ClassLoaderPool.unregister(classLoader);
  Assert.assertTrue(_contextNames.isEmpty());
  Assert.assertTrue(_classLoaders.isEmpty());
  ClassLoaderPool.register(contextName,classLoader);
  ClassLoaderPool.unregister(contextName);
  Assert.assertTrue(_contextNames.isEmpty());
  Assert.assertTrue(_classLoaders.isEmpty());
  ClassLoaderPool.unregister(contextName);
  Assert.assertTrue(_contextNames.isEmpty());
  Assert.assertTrue(_classLoaders.isEmpty());
}
