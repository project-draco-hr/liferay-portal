{
  JournalMirageTemplate journalMirageTemplate=(JournalMirageTemplate)mirageTemplate;
  JournalTemplate template=journalMirageTemplate.getTemplate();
  OptionalJournalTemplateCriteria criteria=(OptionalJournalTemplateCriteria)optionalCriteria;
  String finder=(String)criteria.getOptions().get(OptionalJournalTemplateCriteria.FINDER);
  if (finder == null) {
    return null;
  }
  try {
    if (OptionalJournalTemplateCriteria.FIND_BY_PRIMARY_KEY.equals(finder)) {
      journalMirageTemplate.setTemplate(_getJournalTemplate(template.getId()));
    }
 else     if (OptionalJournalTemplateCriteria.FIND_BY_SMALL_IMAGE_ID.equals(finder)) {
      journalMirageTemplate.setTemplate(_getJournalTemplateForSmallImageId(template.getSmallImageId()));
    }
 else     if (OptionalJournalTemplateCriteria.FIND_BY_GROUP_AND_TEMPLATE_ID.equals(finder)) {
      journalMirageTemplate.setTemplate(_getJournalTemplateForGroupAndTemplateId(template.getGroupId(),template.getTemplateId()));
    }
  }
 catch (  PortalException ex) {
    _log.error(ex.getMessage(),ex);
    throw new TemplateNotFoundException(ex.getMessage(),ex.getMessage(),ex);
  }
catch (  SystemException ex) {
    _log.error(ex.getMessage(),ex);
    throw new TemplateNotFoundException(ex.getMessage(),ex.getMessage(),ex);
  }
  return journalMirageTemplate;
}
