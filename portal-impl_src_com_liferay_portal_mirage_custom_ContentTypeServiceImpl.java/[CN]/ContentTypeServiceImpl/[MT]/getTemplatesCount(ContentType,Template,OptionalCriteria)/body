{
  int count=-1;
  OptionalJournalTemplateCriteria criteria=(OptionalJournalTemplateCriteria)optionalCriteria;
  String finder=criteria.getOptions().get(OptionalJournalTemplateCriteria.FINDER);
  if (finder == null) {
    return count;
  }
  try {
    if (OptionalJournalTemplateCriteria.COUNT_BY_GROUP_AND_STRUCTURE.equals(finder)) {
      JournalMirageTemplate journalMirageTemplate=(JournalMirageTemplate)mirageTemplate;
      JournalTemplate template=journalMirageTemplate.getTemplate();
      count=_getJournalTemplatesCount(template.getGroupId(),template.getStructureId());
    }
 else     if (OptionalJournalTemplateCriteria.COUNT_BY_GROUP_ID.equals(finder)) {
      JournalMirageTemplate journalMirageTemplate=(JournalMirageTemplate)mirageTemplate;
      JournalTemplate template=journalMirageTemplate.getTemplate();
      count=_getJournalTemplatesCount(template.getGroupId());
    }
 else     if (OptionalJournalTemplateCriteria.ARTICLE_COUNT_BY_GROUP_AND_TEMPLATE.equals(finder)) {
      JournalMirageTemplate journalMirageTemplate=(JournalMirageTemplate)mirageTemplate;
      JournalTemplate template=journalMirageTemplate.getTemplate();
      count=_getArticleCount(template.getGroupId(),template.getTemplateId());
    }
  }
 catch (  SystemException ex) {
    _log.error(ex.getMessage(),ex);
    throw new CMSException(ex.getMessage(),ex.getMessage(),ex);
  }
  return count;
}
