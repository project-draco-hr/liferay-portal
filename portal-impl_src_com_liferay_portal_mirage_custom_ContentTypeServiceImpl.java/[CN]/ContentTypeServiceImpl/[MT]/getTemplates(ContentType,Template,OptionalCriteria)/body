{
  List<Template> templates=new ArrayList<Template>();
  OptionalJournalTemplateCriteria criteria=(OptionalJournalTemplateCriteria)optionalCriteria;
  String finder=(String)criteria.getOptions().get(OptionalJournalTemplateCriteria.FINDER);
  if (finder == null) {
    return null;
  }
  try {
    if (OptionalJournalTemplateCriteria.FIND_BY_GROUP_AND_STRUCTURE.equals(finder)) {
      JournalMirageTemplate journalMirageTemplate=(JournalMirageTemplate)mirageTemplate;
      JournalTemplate template=journalMirageTemplate.getTemplate();
      templates=_getJournalTemplates(template.getGroupId(),template.getStructureId());
    }
 else     if (OptionalJournalTemplateCriteria.FIND_BY_GROUP_AND_STRUCTURE_WITH_LIMIT.equals(finder)) {
      JournalMirageTemplate journalMirageTemplate=(JournalMirageTemplate)mirageTemplate;
      JournalTemplate template=journalMirageTemplate.getTemplate();
      int start=Integer.parseInt((String)criteria.getOptions().get(OptionalJournalTemplateCriteria.RANGE_START));
      int end=Integer.parseInt((String)criteria.getOptions().get(OptionalJournalTemplateCriteria.RANGE_END));
      templates=_getJournalTemplates(template.getGroupId(),template.getStructureId(),start,end);
    }
 else     if (OptionalJournalTemplateCriteria.FIND_ALL.equals(finder)) {
      templates=_getAllJournalTemplates();
    }
 else     if (OptionalJournalTemplateCriteria.FIND_BY_GROUP_ID.equals(finder)) {
      JournalMirageTemplate journalMirageTemplate=(JournalMirageTemplate)mirageTemplate;
      JournalTemplate template=journalMirageTemplate.getTemplate();
      templates=_getJournalTemplates(template.getGroupId());
    }
 else     if (OptionalJournalTemplateCriteria.FIND_BY_GROUP_ID_WITH_LIMIT.equals(finder)) {
      JournalMirageTemplate journalMirageTemplate=(JournalMirageTemplate)mirageTemplate;
      JournalTemplate template=journalMirageTemplate.getTemplate();
      int start=Integer.parseInt((String)criteria.getOptions().get(OptionalJournalTemplateCriteria.RANGE_START));
      int end=Integer.parseInt((String)criteria.getOptions().get(OptionalJournalTemplateCriteria.RANGE_END));
      templates=_getJournalTemplates(template.getGroupId(),start,end);
    }
 else     if (OptionalJournalTemplateCriteria.FIND_BY_TEMPLATE_ID.equals(finder)) {
      JournalMirageTemplate journalMirageTemplate=(JournalMirageTemplate)mirageTemplate;
      JournalTemplate template=journalMirageTemplate.getTemplate();
      templates=_getJournalTemplates(template.getTemplateId());
    }
  }
 catch (  SystemException ex) {
    _log.error(ex.getMessage(),ex);
    throw new TemplateNotFoundException(ex.getMessage(),ex.getMessage(),ex);
  }
  return templates;
}
