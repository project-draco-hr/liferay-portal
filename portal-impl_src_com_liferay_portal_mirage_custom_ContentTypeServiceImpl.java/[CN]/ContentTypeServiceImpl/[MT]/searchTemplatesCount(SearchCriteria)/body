{
  try {
    int count=-1;
    String finder=_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.FINDER);
    long companyId=Long.parseLong(_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.COMPANY_ID));
    long groupId=Long.parseLong(_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.GROUP_ID));
    String structureId=_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.STRUCTURE_ID);
    String structureIdComparator=_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.STRUCTURE_ID_COMPARATOR);
    if (OptionalJournalTemplateCriteria.COUNT_BY_KEYWORDS.equals(finder)) {
      String keywords=_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.KEYWORDS);
      count=_searchJournalTemplatesCount(companyId,groupId,keywords,structureId,structureIdComparator);
    }
 else     if (OptionalJournalTemplateCriteria.SEARCH_COUNT.equals(finder)) {
      String templateId=_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.TEMPLATE_ID);
      String name=_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.NAME);
      String description=_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.DESCRIPTION);
      boolean andOperator=searchCriteria.isMatchAnyOneField();
      count=_searchJournalTemplatesCount(companyId,groupId,templateId,structureId,structureIdComparator,name,description,andOperator);
    }
    return count;
  }
 catch (  SystemException ex) {
    _log.error(ex.getMessage(),ex);
    throw new TemplateNotFoundException(ex.getMessage(),ex.getMessage(),ex);
  }
}
