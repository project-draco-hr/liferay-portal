{
  try {
    List<JournalTemplate> journalTemplates=null;
    String finder=_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.FINDER);
    long companyId=Long.parseLong(_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.COMPANY_ID));
    long groupId=Long.parseLong(_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.GROUP_ID));
    String structureId=_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.STRUCTURE_ID);
    String structureIdComparator=_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.STRUCTURE_ID_COMPARATOR);
    int start=Integer.parseInt(_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.RANGE_START));
    int end=Integer.parseInt(_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.RANGE_END));
    OrderByComparator obc=(OrderByComparator)searchCriteria.getOrderByComparator();
    if (OptionalJournalTemplateCriteria.FIND_BY_KEYWORDS.equals(finder)) {
      String keywords=_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.KEYWORDS);
      journalTemplates=_searchJournalTemplates(companyId,groupId,keywords,structureId,structureIdComparator,start,end,obc);
    }
 else     if (OptionalJournalTemplateCriteria.SEARCH.equals(finder)) {
      String templateId=_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.TEMPLATE_ID);
      String name=_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.NAME);
      String description=_findFieldValue(searchCriteria.getSearchFieldValues(),OptionalJournalTemplateCriteria.DESCRIPTION);
      boolean andOperator=searchCriteria.isMatchAnyOneField();
      journalTemplates=_searchJournalTemplates(companyId,groupId,templateId,structureId,structureIdComparator,name,description,andOperator,start,end,obc);
    }
    return _getTemplatesFromJournalTemplates(journalTemplates);
  }
 catch (  SystemException ex) {
    _log.error(ex.getMessage(),ex);
    throw new TemplateNotFoundException(ex.getMessage(),ex.getMessage(),ex);
  }
}
