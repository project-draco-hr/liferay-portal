{
  StopWatch stopWatch=null;
  if (_log.isInfoEnabled()) {
    stopWatch=new StopWatch();
    stopWatch.start();
  }
  try {
    if (PropsValues.DL_FILE_ENTRY_PREVIEW_FORK_PROCESS_ENABLED) {
      ProcessCallable<String> processCallable=new LiferayAudioProcessCallable(ServerDetector.getServerId(),PropsUtil.get(PropsKeys.LIFERAY_HOME),Log4JUtil.getCustomLogSettings(),srcFile.getCanonicalPath(),destFile.getCanonicalPath());
      ProcessExecutor.execute(processCallable,ClassPathUtil.getPortalClassPath());
    }
 else {
      LiferayConverter liferayConverter=new LiferayAudioConverter(srcFile.getCanonicalPath(),destFile.getCanonicalPath());
      liferayConverter.convert();
    }
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
  addFileToStore(fileVersion.getCompanyId(),PREVIEW_PATH,getPreviewFilePath(fileVersion),destFile);
  if (_log.isInfoEnabled()) {
    _log.info("Xuggler generated a preview audio for " + fileVersion.getTitle() + " in "+ stopWatch);
  }
}
