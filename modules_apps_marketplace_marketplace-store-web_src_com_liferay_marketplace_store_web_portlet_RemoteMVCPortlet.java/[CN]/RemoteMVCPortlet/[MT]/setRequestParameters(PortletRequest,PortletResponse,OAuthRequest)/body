{
  addOAuthParameter(oAuthRequest,"clientPortletNamespace",portletResponse.getNamespace());
  String currentURL=PortalUtil.getCurrentURL(portletRequest);
  addOAuthParameter(oAuthRequest,"clientURL",currentURL);
  addOAuthParameter(oAuthRequest,"p_p_id",getServerPortletId());
  String serverNamespace=PortalUtil.getPortletNamespace(getServerPortletId());
  Map<String,String[]> parameterMap=portletRequest.getParameterMap();
  for (  Map.Entry<String,String[]> entry : parameterMap.entrySet()) {
    String[] values=entry.getValue();
    if (ArrayUtil.isEmpty(values) || Validator.isNull(values[0])) {
      continue;
    }
    addOAuthParameter(oAuthRequest,serverNamespace.concat(entry.getKey()),values[0]);
  }
}
