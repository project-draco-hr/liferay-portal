{
  ThemeDisplay themeDisplay=(ThemeDisplay)renderRequest.getAttribute(WebKeys.THEME_DISPLAY);
  PortletSession portletSession=renderRequest.getPortletSession();
  Token requestToken=(Token)portletSession.getAttribute(MarketplaceStoreWebKeys.OAUTH_REQUEST_TOKEN);
  OAuthService oAuthService=oAuthManager.getOAuthService();
  Token accessToken=oAuthService.getAccessToken(requestToken,new Verifier(oAuthVerifier));
  oAuthManager.updateAccessToken(themeDisplay.getUser(),accessToken);
  portletSession.removeAttribute(MarketplaceStoreWebKeys.OAUTH_REQUEST_TOKEN);
}
