{
  String cmd=ParamUtil.getString(req,Constants.CMD);
  if (!cmd.equals(Constants.UPDATE)) {
    return;
  }
  String baseURL=ParamUtil.getString(req,"baseURL");
  String indexURL=ParamUtil.getString(req,"indexURL");
  String nodeId=ParamUtil.getString(req,"nodeId");
  String userId=ParamUtil.getString(req,"userId");
  String password=ParamUtil.getString(req,"password");
  boolean maximizeLinks=ParamUtil.getBoolean(req,"maximizeLinks");
  String portletResource=ParamUtil.getString(req,"portletResource");
  PortletPreferences prefs=PortletPreferencesFactory.getPortletSetup(req,portletResource,true,true);
  prefs.setValue("base-url",baseURL);
  prefs.setValue("index-url",indexURL);
  prefs.setValue("node-id",nodeId);
  prefs.setValue("user-id",userId);
  prefs.setValue("password",password);
  prefs.setValue("maximize-links",Boolean.toString(maximizeLinks));
  prefs.store();
  SessionMessages.add(req,config.getPortletName() + ".doConfigure");
}
