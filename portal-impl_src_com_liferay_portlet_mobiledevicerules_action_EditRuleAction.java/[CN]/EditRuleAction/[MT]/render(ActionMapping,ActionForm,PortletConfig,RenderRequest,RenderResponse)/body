{
  long ruleGroupId=ParamUtil.get(renderRequest,MDRPortletConstants.MDR_RULE_GROUP_ID,0L);
  long ruleId=ParamUtil.get(renderRequest,MDRPortletConstants.MDR_RULE_ID,0L);
  MDRRule rule=MDRRuleServiceUtil.fetchRule(ruleId);
  boolean isAddAction=Validator.isNull(rule);
  if (!isAddAction) {
    ruleGroupId=rule.getRuleGroupId();
  }
  MDRRuleGroup ruleGroup=MDRRuleGroupServiceUtil.getRuleGroup(ruleGroupId);
  String type=StringPool.BLANK;
  if (!isAddAction) {
    type=rule.getType();
  }
  String editorJSP=getEditorJSP(type);
  renderRequest.setAttribute(MDRPortletConstants.MDR_RULE_GROUP,ruleGroup);
  renderRequest.setAttribute(MDRPortletConstants.MDR_RULE,rule);
  renderRequest.setAttribute(MDRPortletConstants.TYPE,type);
  renderRequest.setAttribute(MDRPortletConstants.EDITOR_JSP,editorJSP);
  return mapping.findForward("portlet.mobile_device_rules_admin.edit_rule");
}
