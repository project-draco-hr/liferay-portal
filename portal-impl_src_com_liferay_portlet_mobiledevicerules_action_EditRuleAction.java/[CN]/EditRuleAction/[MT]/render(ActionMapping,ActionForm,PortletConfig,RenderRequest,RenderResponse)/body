{
  long ruleId=ParamUtil.getLong(renderRequest,"ruleId");
  MDRRule rule=MDRRuleServiceUtil.fetchRule(ruleId);
  renderRequest.setAttribute(WebKeys.MOBILE_DEVICE_RULES_RULE,rule);
  String type=BeanPropertiesUtil.getString(rule,"type");
  renderRequest.setAttribute(WebKeys.MOBILE_DEVICE_RULES_RULE_TYPE,type);
  String editorJSP=getEditorJSP(type);
  renderRequest.setAttribute(WebKeys.MOBILE_DEVICE_RULES_RULE_EDITOR_JSP,editorJSP);
  long ruleGroupId=BeanParamUtil.getLong(rule,renderRequest,"ruleGroupId");
  MDRRuleGroup ruleGroup=MDRRuleGroupServiceUtil.getRuleGroup(ruleGroupId);
  renderRequest.setAttribute(WebKeys.MOBILE_DEVICE_RULES_RULE_GROUP,ruleGroup);
  return mapping.findForward("portlet.mobile_device_rules.edit_rule");
}
