{
  StringBuilder sb=new StringBuilder(s);
  boolean upperCase=false;
  for (int i=0; i < s.length(); i++) {
    char c=s.charAt(i);
    if (!normalizeInnerTerms && (c == CharPool.PERIOD)) {
      return sb.toString();
    }
    if ((i > 0) && Character.isUpperCase(c)) {
      boolean nextUpperCase=true;
      if (i < (s.length() - 1)) {
        char nextChar=s.charAt(i + 1);
        if ((nextChar != CharPool.PERIOD) && !Character.isUpperCase(nextChar)) {
          nextUpperCase=false;
        }
      }
      if (upperCase && nextUpperCase) {
        sb.setCharAt(i,Character.toLowerCase(c));
      }
      upperCase=true;
    }
 else {
      upperCase=false;
    }
  }
  return sb.toString();
}
