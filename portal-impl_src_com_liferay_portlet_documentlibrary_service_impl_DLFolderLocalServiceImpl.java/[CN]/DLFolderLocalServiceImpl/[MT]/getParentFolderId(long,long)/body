{
  if (parentFolderId != DLFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
    DLFolder parentFolder=dlFolderPersistence.fetchByPrimaryKey(parentFolderId);
    if ((parentFolder == null) || (groupId != parentFolder.getGroupId())) {
      int count=getFoldersCount(groupId,DLFolderConstants.DEFAULT_PARENT_FOLDER_ID);
      if (count == 1) {
        List<DLFolder> folders=getFolders(groupId,DLFolderConstants.DEFAULT_PARENT_FOLDER_ID);
        parentFolderId=folders.get(0).getFolderId();
      }
 else {
        parentFolderId=DLFolderConstants.DEFAULT_PARENT_FOLDER_ID;
      }
    }
  }
  return parentFolderId;
}
