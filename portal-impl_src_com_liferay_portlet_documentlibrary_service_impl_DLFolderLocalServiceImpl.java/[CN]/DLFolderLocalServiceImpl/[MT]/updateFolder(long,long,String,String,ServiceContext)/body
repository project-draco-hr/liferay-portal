{
  DLFolder folder=dlFolderPersistence.findByPrimaryKey(folderId);
  parentFolderId=getParentFolderId(folder,parentFolderId);
  validate(folder.getFolderId(),folder.getGroupId(),parentFolderId,name);
  folder.setModifiedDate(new Date());
  folder.setParentFolderId(parentFolderId);
  folder.setName(name);
  folder.setDescription(description);
  dlFolderPersistence.update(folder,false);
  ExpandoBridge expandoBridge=folder.getExpandoBridge();
  expandoBridge.setAttributes(serviceContext);
  if (PropsValues.DL_LAYOUTS_SYNC_ENABLED) {
    String privateFolder=GetterUtil.getString(PropsUtil.get(PropsKeys.DL_LAYOUTS_SYNC_PRIVATE_FOLDER));
    boolean privateLayout=false;
    String[] path=folder.getPathArray();
    if (path[0].equals(privateFolder)) {
      privateLayout=true;
    }
    Layout layout=layoutLocalService.getDLFolderLayout(folder.getFolderId());
    layout.setName(folder.getName());
    layoutLocalService.updateName(folder.getGroupId(),privateLayout,layout.getLayoutId(),folder.getName(),LocaleUtil.toLanguageId(LocaleUtil.getDefault()));
  }
  return folder;
}
