{
  if (parentFolderId != DLFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
    DLFolder parentDLFolder=dlFolderPersistence.findByPrimaryKey(parentFolderId);
    if (parentDLFolder.getGroupId() != groupId) {
      throw new NoSuchFolderException(String.format("No DLFolder exists with primary key %s in group %s",parentFolderId,groupId));
    }
    if (parentDLFolder.getRepositoryId() != repositoryId) {
      throw new NoSuchFolderException(String.format("No DLFolder exists with primary key %s in " + "repository %s",parentFolderId,repositoryId));
    }
    return parentDLFolder.getFolderId();
  }
  return parentFolderId;
}
