{
  DLFolder folder=DLFolderUtil.findByPrimaryKey(folderId);
  parentFolderId=getParentFolderId(folder,parentFolderId);
  validate(name);
  folder.setModifiedDate(new Date());
  folder.setParentFolderId(parentFolderId);
  folder.setName(name);
  folder.setDescription(description);
  DLFolderUtil.update(folder);
  if (GetterUtil.getBoolean(PropsUtil.get(PropsUtil.DL_LAYOUTS_SYNC_ENABLED))) {
    String privateFolder=GetterUtil.getString(PropsUtil.get(PropsUtil.DL_LAYOUTS_SYNC_PRIVATE_FOLDER));
    boolean privateLayout=false;
    String[] path=folder.getPathArray();
    if (path[0].equals(privateFolder)) {
      privateLayout=true;
    }
    Layout layout=LayoutLocalServiceUtil.getDLFolderLayout(folder.getGroupId(),privateLayout,folder.getFolderId());
    layout.setName(folder.getName());
    LayoutLocalServiceUtil.updateName(folder.getGroupId(),privateLayout,layout.getLayoutId(),folder.getName(),LocaleUtil.toLanguageId(Locale.getDefault()));
  }
  return folder;
}
