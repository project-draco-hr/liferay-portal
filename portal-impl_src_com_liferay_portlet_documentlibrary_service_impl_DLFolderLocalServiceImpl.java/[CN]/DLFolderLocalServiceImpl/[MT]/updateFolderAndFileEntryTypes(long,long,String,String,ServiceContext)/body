{
  long defaultFileEntryTypeId=GetterUtil.getLong(serviceContext.getAttribute("defaultFileEntryTypeId"));
  List<Long> fileEntryTypeIds=(SortedArrayList<Long>)serviceContext.getAttribute("fileEntryTypeIds");
  boolean overrideFileEntryTypes=GetterUtil.getBoolean(serviceContext.getAttribute("overrideFileEntryTypes"));
  DLFolder dlFolder=dlFolderPersistence.findByPrimaryKey(folderId);
  parentFolderId=getParentFolderId(dlFolder,parentFolderId);
  validateFolder(folderId,dlFolder.getGroupId(),parentFolderId,name);
  dlFolder.setModifiedDate(serviceContext.getModifiedDate(null));
  dlFolder.setParentFolderId(parentFolderId);
  dlFolder.setName(name);
  dlFolder.setDescription(description);
  dlFolder.setExpandoBridgeAttributes(serviceContext);
  dlFolder.setOverrideFileEntryTypes(overrideFileEntryTypes);
  dlFolder.setDefaultFileEntryTypeId(defaultFileEntryTypeId);
  dlFolderPersistence.update(dlFolder,false);
  if (fileEntryTypeIds != null) {
    dlFileEntryTypeLocalService.updateFileEntryTypesByFolder(dlFolder,fileEntryTypeIds,defaultFileEntryTypeId,serviceContext);
  }
  return dlFolder;
}
