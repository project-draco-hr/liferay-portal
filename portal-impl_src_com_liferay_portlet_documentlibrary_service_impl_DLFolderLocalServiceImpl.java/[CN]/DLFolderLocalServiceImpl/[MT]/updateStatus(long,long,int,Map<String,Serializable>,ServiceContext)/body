{
  User user=userPersistence.findByPrimaryKey(userId);
  DLFolder dlFolder=dlFolderPersistence.findByPrimaryKey(folderId);
  dlFolder.setStatus(status);
  dlFolder.setStatusByUserId(user.getUserId());
  dlFolder.setStatusByUserName(user.getFullName());
  dlFolder.setStatusDate(new Date());
  dlFolderPersistence.update(dlFolder,false);
  QueryDefinition queryDefinition=new QueryDefinition(WorkflowConstants.STATUS_ANY);
  List<Object> children=getFoldersAndFileEntriesAndFileShortcuts(dlFolder.getGroupId(),folderId,null,false,queryDefinition);
  dlAppHelperLocalService.updateChildrenStatuses(user,children,status);
  return dlFolder;
}
