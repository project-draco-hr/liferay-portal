{
  HttpSession ses=req.getSession();
  String folderId=ParamUtil.getString(req,"folderId");
  String sortBy=ParamUtil.getString(req,"sortBy");
  boolean asc=ParamUtil.getBoolean(req,"asc");
  MailUtil.setFolder(ses,folderId);
  Set envelopes=null;
  if (sortBy.equals("name")) {
    envelopes=MailUtil.getEnvelopes(ses,new RecipientComparator(asc));
  }
 else   if (sortBy.equals("subject")) {
    envelopes=MailUtil.getEnvelopes(ses,new SubjectComparator(asc));
  }
 else {
    envelopes=MailUtil.getEnvelopes(ses,new DateComparator(asc));
  }
  return envelopes;
}
