{
  long start=0;
  if (_log.isInfoEnabled()) {
    start=System.currentTimeMillis();
  }
  JSONArray jsonFolders=new JSONArray();
  int count=1;
  Iterator itr=MailUtil.getFolders(req).iterator();
  while (itr.hasNext()) {
    MailFolder folder=(MailFolder)itr.next();
    JSONObject jsonFolder=new JSONObject();
    String name=folder.getName();
    jsonFolder.put("name",name);
    jsonFolder.put("id",name);
    jsonFolder.put("newCount",folder.getUnreadMessageCount());
    jsonFolder.put("totalCount",folder.getMessageCount());
    if (name.equals(MailUtil.MAIL_INBOX_NAME)) {
      jsonFolders.put(0,jsonFolder);
    }
 else {
      jsonFolders.put(count++,jsonFolder);
    }
  }
  jsonObj.put("folders",jsonFolders);
  if (_log.isInfoEnabled()) {
    _log.info("Total time to get folders " + (System.currentTimeMillis() - start) + "ms");
  }
}
