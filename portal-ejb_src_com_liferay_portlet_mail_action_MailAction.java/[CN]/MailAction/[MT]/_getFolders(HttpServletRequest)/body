{
  JSONObject jsonObj=new JSONObject();
  JSONArray jFolders=new JSONArray();
  int count=1;
  List folders=MailUtil.getAllFolders(req.getSession());
  for (int i=0; i < folders.size(); i++) {
    MailFolder folderObj=(MailFolder)folders.get(i);
    JSONObject jFolderObj=new JSONObject();
    String folderName=folderObj.getName();
    jFolderObj.put("name",folderName);
    jFolderObj.put("id",folderName);
    jFolderObj.put("newCount",folderObj.getNewMessageCount());
    jFolderObj.put("totalCount",folderObj.getMessageCount());
    if (MailUtil.MAIL_INBOX_NAME.equals(folderName)) {
      jFolders.put(0,jFolderObj);
    }
 else {
      jFolders.put(count++,jFolderObj);
    }
  }
  jsonObj.put("folders",jFolders);
  return jsonObj.toString();
}
