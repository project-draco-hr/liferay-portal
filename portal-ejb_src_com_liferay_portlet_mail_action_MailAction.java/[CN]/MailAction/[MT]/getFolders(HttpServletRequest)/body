{
  HttpSession ses=req.getSession();
  JSONObject jsonObj=new JSONObject();
  JSONArray jsonFolders=new JSONArray();
  int count=1;
  Iterator itr=MailUtil.getFolders(ses).iterator();
  while (itr.hasNext()) {
    MailFolder folder=(MailFolder)itr.next();
    JSONObject jsonFolder=new JSONObject();
    String name=folder.getName();
    jsonFolder.put("name",name);
    jsonFolder.put("id",name);
    jsonFolder.put("newCount",folder.getNewMessageCount());
    jsonFolder.put("totalCount",folder.getMessageCount());
    if (name.equals(MailUtil.MAIL_INBOX_NAME)) {
      jsonFolders.put(0,jsonFolder);
    }
 else {
      jsonFolders.put(count++,jsonFolder);
    }
  }
  jsonObj.put("folders",jsonFolders);
  return jsonObj.toString();
}
