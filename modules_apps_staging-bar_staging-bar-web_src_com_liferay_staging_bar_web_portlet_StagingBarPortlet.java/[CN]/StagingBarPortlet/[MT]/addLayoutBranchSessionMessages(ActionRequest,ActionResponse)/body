{
  if (SessionErrors.isEmpty(actionRequest)) {
    SessionMessages.add(actionRequest,PortalUtil.getPortletId(actionRequest) + SessionMessages.KEY_SUFFIX_REFRESH_PORTLET,PortletKeys.STAGING_BAR);
    Map<String,String> data=new HashMap<>();
    data.put("preventNotification",Boolean.TRUE.toString());
    SessionMessages.add(actionRequest,PortalUtil.getPortletId(actionRequest) + SessionMessages.KEY_SUFFIX_REFRESH_PORTLET_DATA,data);
  }
  String redirect=PortalUtil.escapeRedirect(ParamUtil.getString(actionRequest,"redirect"));
  WindowState windowState=actionRequest.getWindowState();
  if (windowState.equals(LiferayWindowState.POP_UP)) {
    actionResponse.sendRedirect(redirect);
  }
}
