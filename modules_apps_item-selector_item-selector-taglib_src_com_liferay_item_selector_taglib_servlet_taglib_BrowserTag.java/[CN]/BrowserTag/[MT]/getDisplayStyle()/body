{
  PortalPreferences portalPreferences=PortletPreferencesFactoryUtil.getPortalPreferences(request);
  String displayStyle=ParamUtil.getString(request,"displayStyle");
  if (Validator.isNotNull(displayStyle)) {
    displayStyle=getSafeDisplayStyle(displayStyle);
    portalPreferences.setValue(ItemSelectorPortletKeys.ITEM_SELECTOR,"display-style",displayStyle);
    return displayStyle;
  }
  if (Validator.isNotNull(_displayStyle)) {
    return getSafeDisplayStyle(_displayStyle);
  }
  return portalPreferences.getValue(ItemSelectorPortletKeys.ITEM_SELECTOR,"display-style",DISPLAY_STYLES[0]);
}
