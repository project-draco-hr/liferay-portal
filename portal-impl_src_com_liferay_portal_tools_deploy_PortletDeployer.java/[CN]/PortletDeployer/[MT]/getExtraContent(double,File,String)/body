{
  StringBuilder sb=new StringBuilder();
  String extraContent=super.getExtraContent(webXmlVersion,srcFile,displayName);
  sb.append(extraContent);
  if (ServerDetector.isWebSphere()) {
    sb.append("<context-param>");
    sb.append("<param-name>");
    sb.append("com.ibm.websphere.portletcontainer.");
    sb.append("PortletDeploymentEnabled");
    sb.append("</param-name>");
    sb.append("<param-value>false</param-value>");
    sb.append("</context-param>");
  }
  File facesXML=new File(srcFile + "/WEB-INF/faces-config.xml");
  File portletXML=new File(srcFile + "/WEB-INF/" + Portal.PORTLET_XML_FILE_NAME_STANDARD);
  File webXML=new File(srcFile + "/WEB-INF/web.xml");
  sb.append(getServletContent(portletXML,webXML));
  setupJSF(facesXML,portletXML);
  if (_sunFacesPortlet) {
    sb.append("<listener>");
    sb.append("<listener-class>");
    sb.append("com.liferay.util.bridges.jsf.sun.");
    sb.append("LiferayConfigureListener");
    sb.append("</listener-class>");
    sb.append("</listener>");
  }
  sb.append("<listener>");
  sb.append("<listener-class>");
  sb.append("com.liferay.portal.kernel.servlet.PortletContextListener");
  sb.append("</listener-class>");
  sb.append("</listener>");
  String speedFiltersContent=FileUtil.read(DeployUtil.getResourcePath("speed_filters.xml"));
  sb.append(speedFiltersContent);
  return sb.toString();
}
