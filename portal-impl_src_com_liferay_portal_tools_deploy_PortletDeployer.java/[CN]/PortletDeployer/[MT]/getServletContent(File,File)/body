{
  if (!portletXML.exists()) {
    return StringPool.BLANK;
  }
  StringBundler sb=new StringBundler();
  Document document=UnsecureSAXReaderUtil.read(portletXML);
  Element rootElement=document.getRootElement();
  List<Element> portletElements=rootElement.elements("portlet");
  for (  Element portletElement : portletElements) {
    String portletName=PortalUtil.getJsSafePortletId(portletElement.elementText("portlet-name"));
    String portletClassName=portletElement.elementText("portlet-class");
    String servletName=portletName + " Servlet";
    sb.append("<servlet>");
    sb.append("<servlet-name>");
    sb.append(servletName);
    sb.append("</servlet-name>");
    sb.append("<servlet-class>");
    sb.append("com.liferay.portal.kernel.servlet.PortletServlet");
    sb.append("</servlet-class>");
    sb.append("<init-param>");
    sb.append("<param-name>portlet-class</param-name>");
    sb.append("<param-value>");
    sb.append(portletClassName);
    sb.append("</param-value>");
    sb.append("</init-param>");
    sb.append("<load-on-startup>1</load-on-startup>");
    sb.append("</servlet>");
    sb.append("<servlet-mapping>");
    sb.append("<servlet-name>");
    sb.append(servletName);
    sb.append("</servlet-name>");
    sb.append("<url-pattern>/");
    sb.append(portletName);
    sb.append("/*</url-pattern>");
    sb.append("</servlet-mapping>");
  }
  return sb.toString();
}
