{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(com.liferay.portal.kernel.util.WebKeys.THEME_DISPLAY);
  String actionName=ParamUtil.getString(request,ActionRequest.ACTION_NAME);
  if (actionName.equals("selectFolder")) {
    portletURL.setParameter("mvcPath","/select_folder.jsp");
    portletURL.setWindowState(LiferayWindowState.POP_UP);
    PortalUtil.addPortletBreadcrumbEntry(request,themeDisplay.translate("home"),portletURL.toString());
  }
 else {
    portletURL.setParameter("folderId",String.valueOf(JournalFolderConstants.DEFAULT_PARENT_FOLDER_ID));
    Map<String,Object> data=new HashMap<>();
    data.put("direction-right",Boolean.TRUE.toString());
    data.put("folder-id",JournalFolderConstants.DEFAULT_PARENT_FOLDER_ID);
    PortalUtil.addPortletBreadcrumbEntry(request,themeDisplay.translate("home"),portletURL.toString(),data);
  }
  if (folder == null) {
    return;
  }
  List<JournalFolder> ancestorFolders=folder.getAncestors();
  Collections.reverse(ancestorFolders);
  for (  JournalFolder ancestorFolder : ancestorFolders) {
    portletURL.setParameter("folderId",String.valueOf(ancestorFolder.getFolderId()));
    Map<String,Object> data=new HashMap<>();
    data.put("direction-right",Boolean.TRUE.toString());
    data.put("folder-id",ancestorFolder.getFolderId());
    PortalUtil.addPortletBreadcrumbEntry(request,ancestorFolder.getName(),portletURL.toString(),data);
  }
  portletURL.setParameter("folderId",String.valueOf(folder.getFolderId()));
  if (folder.getFolderId() != JournalFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
    JournalFolder unescapedFolder=folder.toUnescapedModel();
    Map<String,Object> data=new HashMap<>();
    data.put("direction-right",Boolean.TRUE.toString());
    data.put("folder-id",folder.getFolderId());
    PortalUtil.addPortletBreadcrumbEntry(request,unescapedFolder.getName(),portletURL.toString(),data);
  }
}
