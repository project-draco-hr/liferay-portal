{
  if (!PropsValues.BLOGS_PINGBACK_ENABLED) {
    throw new PingbackDisabledException("Pingbacks are disabled");
  }
  validateSource();
  BlogsEntry entry=getBlogsEntry(companyId);
  if (!entry.isAllowPingbacks()) {
    throw new PingbackDisabledException("Pingbacks are disabled");
  }
  long userId=UserLocalServiceUtil.getDefaultUserId(companyId);
  long groupId=entry.getGroupId();
  String className=BlogsEntry.class.getName();
  long classPK=entry.getEntryId();
  String urlTitle=entry.getUrlTitle();
  String body="[...] " + getExcerpt() + " [...] [url="+ _sourceUri+ "]"+ LanguageUtil.get(LocaleUtil.getSiteDefault(),"read-more")+ "[/url]";
  ServiceContext serviceContext=buildServiceContext(companyId,groupId,urlTitle);
  addComment(userId,groupId,className,classPK,body,serviceContext);
}
