{
  long userThreadId=counterLocalService.increment();
  User user=UserLocalServiceUtil.getUser(userId);
  UserThread userThread=userThreadPersistence.create(userThreadId);
  userThread.setCompanyId(user.getCompanyId());
  userThread.setUserId(userId);
  userThread.setUserName(user.getFullName());
  userThread.setCreateDate(new Date());
  userThread.setModifiedDate(new Date());
  userThread.setMbThreadId(mbThreadId);
  userThread.setTopMBMessageId(topMBMessageId);
  userThread.setRead(read);
  userThread.setDeleted(deleted);
  userThreadPersistence.update(userThread);
}
