{
  HttpServletRequest request=getServletRequest();
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  if (themeDisplay == null) {
    return null;
  }
  Group group=themeDisplay.getScopeGroup();
  UnicodeProperties typeSettingsProperties=group.getTypeSettingsProperties();
  String customJspServletContextName=typeSettingsProperties.getProperty("customJspServletContextName");
  if (Validator.isNull(customJspServletContextName)) {
    return null;
  }
  String page=getPage();
  if (Validator.isNull(page)) {
    page=getEndPage();
  }
  if (Validator.isNull(page)) {
    return null;
  }
  String customPage=CustomJspRegistryUtil.getCustomJspFileName(customJspServletContextName,page);
  if (FileAvailabilityUtil.isAvailable(getServletContext(),customPage)) {
    return customPage;
  }
  return null;
}
