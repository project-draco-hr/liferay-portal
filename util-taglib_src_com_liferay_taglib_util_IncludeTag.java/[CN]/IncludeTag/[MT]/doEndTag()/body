{
  HttpServletRequest request=null;
  try {
    ServletContext servletContext=getServletContext();
    request=getServletRequest();
    StringServletResponse stringResponse=getServletResponse();
    Theme theme=(Theme)request.getAttribute(WebKeys.THEME);
    String page=getPage();
    if (isTheme()) {
      ThemeUtil.include(servletContext,request,stringResponse,pageContext,page,theme);
    }
 else {
      servletContext=getServletContext(servletContext,request);
      RequestDispatcher requestDispatcher=servletContext.getRequestDispatcher(page);
      requestDispatcher.include(request,stringResponse);
    }
    pageContext.getOut().print(stringResponse.getString());
    return EVAL_PAGE;
  }
 catch (  Exception e) {
    if (request != null) {
      String currentURL=(String)request.getAttribute(WebKeys.CURRENT_URL);
      _log.error("Current URL " + currentURL + " generates exception: "+ e.getMessage());
    }
    LogUtil.log(_log,e);
    if (e instanceof JspException) {
      throw (JspException)e;
    }
    return EVAL_PAGE;
  }
 finally {
    clearParams();
    clearProperties();
  }
}
