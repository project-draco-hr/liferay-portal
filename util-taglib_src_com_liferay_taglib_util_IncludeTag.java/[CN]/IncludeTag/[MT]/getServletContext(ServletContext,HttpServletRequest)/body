{
  if (Validator.isNull(_portletId)) {
    return servletContext;
  }
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  Portlet portlet=PortletLocalServiceUtil.getPortletById(themeDisplay.getCompanyId(),_portletId);
  if (portlet == null) {
    return servletContext;
  }
  PortletApp portletApp=portlet.getPortletApp();
  if (!portletApp.isWARFile()) {
    return servletContext;
  }
  return PortletContextUtil.getServletContext(portlet,servletContext);
}
