{
  try {
    String cmd=ParamUtil.getString(req,Constants.CMD);
    if (!cmd.equals(Constants.UPDATE)) {
      return;
    }
    long groupId=ParamUtil.getLong(req,"groupId");
    String type=ParamUtil.getString(req,"type");
    String pageURL=ParamUtil.getString(req,"pageURL");
    int pageDelta=ParamUtil.getInteger(req,"pageDelta");
    String orderByCol=ParamUtil.getString(req,"orderByCol");
    String orderByType=ParamUtil.getString(req,"orderByType");
    GroupLocalServiceUtil.getGroup(groupId);
    String portletResource=ParamUtil.getString(req,"portletResource");
    PortletPreferences prefs=PortletPreferencesFactoryUtil.getPortletSetup(req,portletResource,true,true);
    prefs.setValue("group-id",String.valueOf(groupId));
    prefs.setValue("type",type);
    prefs.setValue("page-url",pageURL);
    prefs.setValue("page-delta",String.valueOf(pageDelta));
    prefs.setValue("order-by-col",orderByCol);
    prefs.setValue("order-by-type",orderByType);
    prefs.store();
    SessionMessages.add(req,config.getPortletName() + ".doConfigure");
  }
 catch (  NoSuchGroupException nsge) {
    SessionErrors.add(req,nsge.getClass().getName());
  }
}
