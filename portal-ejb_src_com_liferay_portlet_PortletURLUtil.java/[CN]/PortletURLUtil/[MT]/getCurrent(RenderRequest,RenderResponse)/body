{
  PortletURL portletURL=res.createRenderURL();
  Enumeration enu=req.getParameterNames();
  while (enu.hasMoreElements()) {
    String param=(String)enu.nextElement();
    String[] values=req.getParameterValues(param);
    boolean addParam=true;
    for (int i=0; i < values.length; i++) {
      if (values[i].length() > _CURRENT_URL_PARAMETER_THRESHOLD) {
        addParam=false;
        break;
      }
    }
    if (addParam) {
      portletURL.setParameter(param,values);
    }
  }
  return portletURL;
}
