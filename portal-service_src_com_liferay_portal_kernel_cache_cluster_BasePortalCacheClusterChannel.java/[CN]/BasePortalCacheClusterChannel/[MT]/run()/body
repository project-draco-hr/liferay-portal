{
  while (true) {
    try {
      if (_destroy) {
        Object[] events=_eventQueue.takeSnapshot();
        for (        Object event : events) {
          dispatchEvent((PortalCacheClusterEvent)event);
          _sentEventCounter.incrementAndGet();
        }
        break;
      }
 else {
        try {
          PortalCacheClusterEvent portalCacheClusterEvent=_eventQueue.take();
          dispatchEvent(portalCacheClusterEvent);
          _sentEventCounter.incrementAndGet();
        }
 catch (        InterruptedException ie) {
        }
      }
    }
 catch (    Throwable t) {
      if (_log.isWarnEnabled()) {
        _log.warn("Please fix the unexpected throwable",t);
      }
    }
  }
}
