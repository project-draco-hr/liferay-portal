{
  ThreadPoolExecutor threadPoolExecutor=new ThreadPoolExecutor(1,1,TestUtil.KEEPALIVE_TIME,TimeUnit.MILLISECONDS,false,10);
  try {
    MarkerBlockingJob markerBlockingJob=new MarkerBlockingJob(true);
    threadPoolExecutor.execute(markerBlockingJob);
    markerBlockingJob.waitUntilBlock();
    assertEquals(1,threadPoolExecutor.getPoolSize());
    assertEquals(1,threadPoolExecutor.getActiveCount());
    threadPoolExecutor.adjustPoolSize(2,2);
    assertEquals(2,threadPoolExecutor.getCorePoolSize());
    assertEquals(2,threadPoolExecutor.getMaxPoolSize());
    Thread.sleep(TestUtil.SHORT_WAIT);
    assertEquals(1,threadPoolExecutor.getPoolSize());
    assertEquals(1,threadPoolExecutor.getActiveCount());
  }
  finally {
    TestUtil.closePool(threadPoolExecutor,true);
  }
}
