{
  ThreadPoolExecutor threadPoolExecutor=new ThreadPoolExecutor(1,1,TestUtil.KEEPALIVE_TIME,TimeUnit.MILLISECONDS,true,1);
  NoticeableFuture<Void> terminationFutute=threadPoolExecutor.terminationFuture();
  Assert.assertFalse(terminationFutute.isDone());
  Assert.assertFalse(terminationFutute.cancel(true));
  final AtomicBoolean marker=new AtomicBoolean();
  terminationFutute.addFutureListener(new FutureListener<Void>(){
    @Override public void complete(    Future<Void> future){
      marker.set(true);
    }
  }
);
  threadPoolExecutor.shutdown();
  Assert.assertTrue(threadPoolExecutor.awaitTermination(1,TimeUnit.SECONDS));
  Assert.assertTrue(terminationFutute.isDone());
  Assert.assertTrue(marker.get());
}
