{
  if ((_filter != null) && !_filter.matches(_properties)) {
    return false;
  }
  Map<String,Object> properties=new HashMap<String,Object>(_properties);
  Registry registry=RegistryUtil.getRegistry();
  ServiceRegistration<S> serviceRegistration=registry.registerService(_clazz,service,properties);
  _serviceRegistrations.put(service,serviceRegistration);
  return true;
}
