{
  try {
    long blogsEntryId=blogsEntry.getEntryId();
    String text=content.getText();
    String trackbacks[]=StringUtil.split(blogsEntry.getTrackbacks());
    long smallImageId=blogsEntry.getSmallImageId();
    File smallImageFile=null;
    if (smallImageId != 0) {
      Image smallImage=ImageLocalServiceUtil.getImage(smallImageId);
      if (smallImage != null) {
        byte[] smallImageBytes=smallImage.getTextObj();
        smallImageFile=FileUtil.createTempFile(smallImageId + StringPool.PERIOD + blogsEntry.getSmallImageType());
        FileUtil.write(smallImageFile,smallImageBytes);
      }
    }
    Calendar cal=Calendar.getInstance();
    cal.setTime(date);
    int displayDateMonth=cal.get(Calendar.MONTH);
    int displayDateDay=cal.get(Calendar.DAY_OF_MONTH);
    int displayDateYear=cal.get(Calendar.YEAR);
    int displayDateHour=cal.get(Calendar.HOUR_OF_DAY);
    int displayDateMinute=cal.get(Calendar.MINUTE);
    ServiceContext serviceContext=new ServiceContext();
    BlogsEntryServiceUtil.updateEntry(blogsEntryId,title,summary,text,displayDateMonth,displayDateDay,displayDateYear,displayDateHour,displayDateMinute,blogsEntry.getAllowPingbacks(),blogsEntry.getAllowTrackbacks(),trackbacks,blogsEntry.getSmallImage(),blogsEntry.getSmallImageURL(),smallImageFile,serviceContext);
    if (smallImageFile != null) {
      smallImageFile.delete();
    }
  }
 catch (  Exception e) {
    throw new ResponseContextException(500,e);
  }
}
