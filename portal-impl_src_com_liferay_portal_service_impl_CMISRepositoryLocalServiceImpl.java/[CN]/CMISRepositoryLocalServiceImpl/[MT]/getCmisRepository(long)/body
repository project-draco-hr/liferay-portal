{
  Repository repositoryImpl=repositoryService.getRepositoryImpl(repositoryId);
  CMISRepositoryHandler cmisRepositoryHandler=null;
  if (repositoryImpl instanceof CMISRepositoryHandler) {
    cmisRepositoryHandler=(CMISRepositoryHandler)repositoryImpl;
  }
 else   if (repositoryImpl instanceof BaseRepositoryProxyBean) {
    BaseRepositoryProxyBean baseRepositoryProxyBean=(BaseRepositoryProxyBean)repositoryImpl;
    ClassLoaderBeanHandler classLoaderBeanHandler=(ClassLoaderBeanHandler)Proxy.getInvocationHandler(baseRepositoryProxyBean.getProxyBean());
    Object bean=classLoaderBeanHandler.getBean();
    if (bean instanceof CMISRepositoryHandler) {
      cmisRepositoryHandler=(CMISRepositoryHandler)bean;
    }
  }
  CMISRepository cmisRepository=(CMISRepository)cmisRepositoryHandler.getCmisRepository();
  return cmisRepository;
}
