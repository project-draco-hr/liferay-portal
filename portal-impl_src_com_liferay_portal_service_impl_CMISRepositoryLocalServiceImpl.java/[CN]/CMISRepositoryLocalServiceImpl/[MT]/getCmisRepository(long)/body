{
  Repository repositoryImpl=repositoryService.getRepositoryImpl(repositoryId);
  CMISRepositoryHandler cmisRepositoryHandler=null;
  if (repositoryImpl instanceof CMISRepositoryHandler) {
    cmisRepositoryHandler=(CMISRepositoryHandler)repositoryImpl;
  }
 else   if (Proxy.isProxyClass(repositoryImpl.getClass())) {
    ClassLoaderBeanHandler classLoaderBeanHandler=(ClassLoaderBeanHandler)Proxy.getInvocationHandler(repositoryImpl);
    Object bean=classLoaderBeanHandler.getBean();
    if (bean instanceof CMISRepositoryHandler) {
      cmisRepositoryHandler=(CMISRepositoryHandler)bean;
    }
  }
  CMISRepository cmisRepository=(CMISRepository)cmisRepositoryHandler.getCmisRepository();
  return cmisRepository;
}
