{
  ClassLoader classLoader=PortalClassLoaderUtil.getClassLoader();
  String filterClass=_filterConfig.getInitParameter("filter-class");
  if (filterClass.startsWith("com.liferay.filters.")) {
    filterClass=StringUtil.replace(filterClass,"com.liferay.filters.","com.liferay.portal.servlet.filters.");
  }
  _filter=(Filter)classLoader.loadClass(filterClass).newInstance();
  _filter.init(_filterConfig);
  _delegateFilterChain=GetterUtil.getBoolean(_filterConfig.getInitParameter("delegate-filter-chain"),true);
}
