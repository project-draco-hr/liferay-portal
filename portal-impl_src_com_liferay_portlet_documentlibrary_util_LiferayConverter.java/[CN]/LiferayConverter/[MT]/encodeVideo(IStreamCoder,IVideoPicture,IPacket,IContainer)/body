{
  int returnValue=outputIStreamCoder.encodeVideo(outputIPacket,outputIVideoPicture,0);
  if (returnValue < 0) {
    throw new RuntimeException("Cannot encode video");
  }
  if (outputIPacket.isComplete()) {
    returnValue=outputIContainer.writePacket(outputIPacket,true);
    if (returnValue < 0) {
      throw new RuntimeException("Cannot write video packet");
    }
  }
}
