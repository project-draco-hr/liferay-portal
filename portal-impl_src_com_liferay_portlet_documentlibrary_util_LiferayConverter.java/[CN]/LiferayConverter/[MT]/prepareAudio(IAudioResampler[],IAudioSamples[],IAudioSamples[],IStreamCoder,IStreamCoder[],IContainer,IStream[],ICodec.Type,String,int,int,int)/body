{
  IStream outputIStream=outputIContainer.addNewStream(index);
  IStreamCoder outputIStreamCoder=outputIStream.getStreamCoder();
  outputIStreamCoders[index]=outputIStreamCoder;
  outputIStreams[index]=outputIStream;
  ICodec iCodec=ICodec.guessEncodingCodec(null,null,outputUrl,null,inputICodecType);
  if (iCodec == null) {
    throw new RuntimeException("Cannot guess " + inputICodecType + " encoder for "+ outputUrl);
  }
  outputIStreamCoder.setBitRate(inputIStreamCoder.getBitRate());
  outputIStreamCoder.setChannels(channels);
  outputIStreamCoder.setCodec(iCodec);
  outputIStreamCoder.setGlobalQuality(0);
  outputIStreamCoder.setSampleRate(rate);
  iAudioResamplers[index]=createAudioResampler(inputIStreamCoder,outputIStreamCoder);
  inputIAudioSamples[index]=IAudioSamples.make(1024,inputIStreamCoder.getChannels());
  outputIAudioSamples[index]=IAudioSamples.make(1024,outputIStreamCoder.getChannels());
}
