{
  for (int i=0; i < numOfStreams; i++) {
    if (outputIStreamCoders[i] != null) {
      IPacket outputTempIPacket=IPacket.make();
      if (outputIStreamCoders[i].getCodecType() == ICodec.Type.CODEC_TYPE_AUDIO) {
        outputIStreamCoders[i].encodeAudio(outputTempIPacket,null,0);
      }
 else {
        outputIStreamCoders[i].encodeVideo(outputTempIPacket,null,0);
      }
      if (outputTempIPacket.isComplete()) {
        outputIContainer.writePacket(outputTempIPacket,true);
      }
    }
  }
}
