{
  int value=inputIStreamCoder.decodeVideo(inputIVideoPicture,inputIPacket,0);
  if (value <= 0) {
    return value;
  }
  updateVideoTimeStamp(inputIVideoPicture,timeStampOffset);
  if (!inputIVideoPicture.isComplete()) {
    return 1;
  }
  if (thumbnailFile != null) {
    BufferedImage bufferedImage=null;
    if (_converterFactoryType == null) {
      _converterFactoryType=ConverterFactory.findRegisteredConverter(ConverterFactory.XUGGLER_BGR_24);
    }
    if (_converterFactoryType == null) {
      throw new UnsupportedOperationException("No converter found for " + ConverterFactory.XUGGLER_BGR_24);
    }
    if (_videoIConverter == null) {
      _videoIConverter=ConverterFactory.createConverter(_converterFactoryType.getDescriptor(),inputIVideoPicture);
    }
    bufferedImage=_videoIConverter.toImage(inputIVideoPicture);
    thumbnailFile.createNewFile();
    RenderedImage renderedImage=ImageProcessorUtil.scale(bufferedImage,thumbnailHeight,thumbnailWidth);
    ImageIO.write(renderedImage,thumbnailExtension,new FileOutputStream(thumbnailFile));
    return DECODE_VIDEO_THUMBNAIL;
  }
  if ((outputIStreamCoder != null) && (outputIContainer != null)) {
    IVideoPicture outputIVideoPicture=null;
    outputIVideoPicture=resampleVideo(iVideoResampler,inputIVideoPicture,resampledIVideoPicture);
    outputIVideoPicture.setQuality(0);
    encodeVideo(outputIStreamCoder,outputIVideoPicture,outputIPacket,outputIContainer);
  }
  return 1;
}
