{
  String template=StringUtil.read(UpgradeSchema.class.getResourceAsStream("dependencies/update.sql"));
  runSQLTemplateString(template,false,false);
  upgrade(UpgradeMVCCVersion.class);
  try {
    runSQL("alter_column_name JournalArticle structureId " + "DDMStructureKey VARCHAR(75) null");
    runSQL("alter_column_name JournalArticle templateId DDMTemplateKey " + "VARCHAR(75) null");
    runSQL("alter_column_type JournalArticle description TEXT null");
    runSQL("alter_column_name JournalFeed structureId DDMStructureKey " + "TEXT null");
    runSQL("alter_column_name JournalFeed templateId DDMTemplateKey " + "TEXT null");
    runSQL("alter_column_name JournalFeed rendererTemplateId " + "DDMRendererTemplateKey TEXT null");
    runSQL("alter_column_type JournalFeed targetPortletId VARCHAR(200) " + "null");
  }
 catch (  SQLException sqle) {
    upgradeTable(JournalArticleTable.TABLE_NAME,JournalArticleTable.TABLE_COLUMNS,JournalArticleTable.TABLE_SQL_CREATE,JournalArticleTable.TABLE_SQL_ADD_INDEXES);
    upgradeTable(JournalFeedTable.TABLE_NAME,JournalFeedTable.TABLE_COLUMNS,JournalFeedTable.TABLE_SQL_CREATE,JournalFeedTable.TABLE_SQL_ADD_INDEXES);
  }
}
