{
  _serviceReferenceMapper.map(serviceReference,new ServiceReferenceMapper.Emitter<K>(){
    @Override public void emit(    K key){
      ServiceTrackerBucket<SR,TS,R> serviceTrackerBucket=_serviceTrackerBuckets.get(key);
      if (serviceTrackerBucket == null) {
        return;
      }
      serviceTrackerBucket.remove(serviceReferenceServiceTuple);
      if (serviceTrackerBucket.isDisposable()) {
        _serviceTrackerBuckets.remove(key);
      }
    }
  }
);
  Registry registry=RegistryUtil.getRegistry();
  registry.ungetService(serviceReference);
}
