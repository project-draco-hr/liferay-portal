{
  final long testTokenId=101;
  MessageListener getListener=new MessageListener(){
    public void receive(    Message message){
      TaskInstanceRequest request=(TaskInstanceRequest)message.getPayload();
      assertNotNull(request);
      assertEquals(TaskInstanceRequestType.GET,request.getType());
      assertEquals(testTokenId,request.getTokenId());
      assertTrue(request.isGetAll());
      String responseDestination=message.getResponseDestination();
      if (responseDestination != null) {
        message.setPayload(new ArrayList<TaskInstanceInfo>());
        messageBus.sendMessage(responseDestination,message);
      }
    }
  }
;
  messageBus.registerMessageListener(DestinationNames.WORKFLOW_TASK,getListener);
  List<TaskInstanceInfo> instances=_proxy.getTaskInstanceInfosByTokenId(testTokenId);
  assertNotNull(instances);
  assertEquals(0,instances.size());
}
