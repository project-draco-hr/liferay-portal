{
  String safeFileName=FileUtil.encodeSafeFileName(fileName);
  if ((safeFileName != null) && !safeFileName.equals(fileName) && _hook.hasFile(companyId,repositoryId,fileName,versionNumber)) {
    return _hook.getFileAsStream(companyId,repositoryId,fileName,versionNumber);
  }
  return _hook.getFileAsStream(companyId,repositoryId,safeFileName,versionNumber);
}
