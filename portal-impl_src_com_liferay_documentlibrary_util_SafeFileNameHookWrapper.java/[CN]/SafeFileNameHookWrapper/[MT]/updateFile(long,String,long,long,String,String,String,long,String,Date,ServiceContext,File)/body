{
  String safeFileName=FileUtil.encodeSafeFileName(fileName);
  String safeSourceFileName=FileUtil.encodeSafeFileName(sourceFileName);
  renameUnsafeFile(companyId,portletId,groupId,repositoryId,fileName,safeFileName);
  renameUnsafeFile(companyId,portletId,groupId,repositoryId,sourceFileName,safeSourceFileName);
  _hook.updateFile(companyId,portletId,groupId,repositoryId,safeFileName,versionNumber,safeSourceFileName,fileEntryId,properties,modifiedDate,serviceContext,file);
}
