{
  String safeFileName=FileUtil.encodeSafeFileName(fileName);
  if ((safeFileName != null) && !safeFileName.equals(fileName) && _hook.hasFile(companyId,repositoryId,fileName,DLFileEntryConstants.DEFAULT_VERSION)) {
    return _hook.getFileAsStream(companyId,repositoryId,fileName);
  }
  return _hook.getFileAsStream(companyId,repositoryId,safeFileName);
}
