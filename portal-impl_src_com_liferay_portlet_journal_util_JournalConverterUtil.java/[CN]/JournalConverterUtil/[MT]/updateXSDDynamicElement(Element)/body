{
  Locale defaultLocale=LocaleUtil.getDefault();
  String name=element.attributeValue("name");
  String type=element.attributeValue("type");
  String indexType=element.attributeValue("index-type");
  String repeatable=element.attributeValue("repeatable");
  Element metaDataElement=element.element("meta-data");
  if (metaDataElement == null) {
    metaDataElement=element.addElement("meta-data");
  }
  if (type.equals("selection_break")) {
    Element parentElement=element.getParent();
    parentElement.remove(element);
    return;
  }
 else   if (type.equals("multi-list")) {
    addMetaDataAttribute(metaDataElement,"multiple","true");
  }
 else {
    Element parentElement=element.getParent();
    String parentType=parentElement.attributeValue("type");
    if ((parentType != null) && parentType.equals("select")) {
      metaDataElement.addAttribute("locale",defaultLocale.toString());
      addMetaDataAttribute(metaDataElement,"label",name);
      element.addAttribute("name","option" + PwdGenerator.getPassword(4));
      element.addAttribute("type","option");
      element.addAttribute("value",type);
      return;
    }
  }
  element.remove(element.attribute("index-type"));
  element.remove(element.attribute("repeatable"));
  element.remove(element.attribute("type"));
  element.addAttribute("autoGeneratedName","false");
  element.addAttribute("dataType",_ddmDataTypes.get(type));
  element.addAttribute("indexType",indexType);
  String newType=_journalToDDMTypes.get(type);
  element.addAttribute("type",newType);
  if (newType.startsWith("ddm")) {
    element.addAttribute("fieldNamespace","ddm");
  }
  metaDataElement.addAttribute("locale",defaultLocale.toString());
  List<Element> entries=metaDataElement.elements();
  if (entries.size() == 0) {
    addMetaDataAttribute(metaDataElement,"label",name);
  }
 else {
    for (    Element entry : entries) {
      String oldEntryName=entry.attributeValue("name");
      String newEntryName=_ddmMetaDataAttributes.get(oldEntryName);
      if (newEntryName == null) {
        metaDataElement.remove(entry);
      }
 else {
        entry.addAttribute("name",newEntryName);
      }
    }
  }
  if (newType.equals("ddm-date") || newType.equals("ddm-decimal") || newType.equals("ddm-integer")|| newType.equals("ddm-link-to-page")|| newType.equals("ddm-number")|| newType.equals("ddm-text-html")|| newType.equals("textarea")|| newType.equals("text")) {
    addMetaDataAttribute(metaDataElement,"fieldCssClass","aui-w25");
    addMetaDataAttribute(metaDataElement,"width","25");
  }
  if (newType.equals("ddm-fileupload")) {
    addMetaDataAttribute(metaDataElement,"acceptFiles","*");
    addMetaDataAttribute(metaDataElement,"readOnly","false");
  }
  addMetaDataAttribute(metaDataElement,"repeatable",repeatable);
  addMetaDataAttribute(metaDataElement,"showLabel","true");
  List<Element> children=element.elements("dynamic-element");
  for (  Element child : children) {
    updateXSDDynamicElement(child);
  }
}
