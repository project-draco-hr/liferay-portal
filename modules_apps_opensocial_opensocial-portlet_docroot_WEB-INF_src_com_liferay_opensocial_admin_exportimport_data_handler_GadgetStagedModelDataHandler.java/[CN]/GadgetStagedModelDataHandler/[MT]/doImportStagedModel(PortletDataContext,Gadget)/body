{
  ServiceContext serviceContext=portletDataContext.createServiceContext(gadget);
  Gadget importedGadget=null;
  if (portletDataContext.isDataStrategyMirror()) {
    Gadget existingGadget=GadgetLocalServiceUtil.fetchGadgetByUuidAndCompanyId(gadget.getUuid(),portletDataContext.getCompanyId());
    if (existingGadget == null) {
      serviceContext.setUuid(gadget.getUuid());
      importedGadget=GadgetLocalServiceUtil.addGadget(portletDataContext.getCompanyId(),gadget.getUrl(),gadget.getPortletCategoryNames(),serviceContext);
    }
 else {
      existingGadget.setName(gadget.getName());
      existingGadget.setUrl(gadget.getUrl());
      existingGadget.setPortletCategoryNames(gadget.getPortletCategoryNames());
      importedGadget=GadgetLocalServiceUtil.updateGadget(existingGadget);
    }
  }
 else {
    importedGadget=GadgetLocalServiceUtil.addGadget(portletDataContext.getCompanyId(),gadget.getUrl(),gadget.getPortletCategoryNames(),serviceContext);
  }
  portletDataContext.importClassedModel(gadget,importedGadget);
}
