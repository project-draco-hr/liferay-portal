{
  String screenName=StringUtil.extractFirst(emailAddress,StringPool.AT).toLowerCase();
  screenName.replace(StringPool.UNDERLINE,StringPool.PERIOD);
  screenName.replace(StringPool.SLASH,StringPool.PERIOD);
  if (screenName.equals("cyrus") || screenName.equals("postfix")) {
    screenName+=StringPool.PERIOD + userId;
  }
  try {
    UserLocalServiceUtil.getUserByScreenName(companyId,screenName);
    for (int i=1; ; i++) {
      String temp=screenName + StringPool.PERIOD + i;
      try {
        UserLocalServiceUtil.getUserByScreenName(companyId,temp);
      }
 catch (      NoSuchUserException nsue) {
        screenName=temp;
        break;
      }
    }
  }
 catch (  NoSuchUserException nsue) {
  }
  return screenName;
}
