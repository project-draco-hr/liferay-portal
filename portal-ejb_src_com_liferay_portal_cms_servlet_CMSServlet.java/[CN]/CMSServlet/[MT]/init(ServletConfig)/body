{
synchronized (CMSServlet.class) {
    super.init(config);
    ServletContext ctx=getServletContext();
    _companyId=ctx.getInitParameter("company_id");
    _groupId=GetterUtil.getLong(config.getInitParameter("group_id"));
    try {
      _contextPath=PrefsPropsUtil.getString(_companyId,PropsUtil.PORTAL_CTX);
      if (_contextPath.equals(StringPool.SLASH)) {
        _contextPath=StringPool.BLANK;
      }
    }
 catch (    Exception e) {
      throw new ServletException(e);
    }
    _rootPath=GetterUtil.getString(ctx.getInitParameter("root_path"),StringPool.SLASH);
    if (_rootPath.equals(StringPool.SLASH)) {
      _rootPath=StringPool.BLANK;
    }
    _friendlyURLPrivatePath=_rootPath + PropsUtil.get(PropsUtil.LAYOUT_FRIENDLY_URL_PRIVATE_SERVLET_MAPPING);
    _friendlyURLPublicPath=_rootPath + PropsUtil.get(PropsUtil.LAYOUT_FRIENDLY_URL_PUBLIC_SERVLET_MAPPING);
    _imagePath=_rootPath + "/image";
    _mainPath=_rootPath + MainServlet.DEFAULT_MAIN_PATH;
    String redirectsConf=config.getInitParameter("redirects_conf");
    if (redirectsConf != null) {
      _redirectProperties=ExtPropertiesLoader.getInstance(redirectsConf).getProperties();
    }
    _redirectsEnabled=GetterUtil.getBoolean(config.getInitParameter("redirects_enabled"));
  }
}
