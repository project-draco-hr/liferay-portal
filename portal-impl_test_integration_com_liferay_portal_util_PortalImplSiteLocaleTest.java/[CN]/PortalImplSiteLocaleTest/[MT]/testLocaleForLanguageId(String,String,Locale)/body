{
  MockServletContext mockServletContext=new MockServletContext(){
  }
;
  mockServletContext.setContextPath(StringPool.BLANK);
  mockServletContext.setServletContextName(StringPool.BLANK);
  _i18nServlet.init(new MockServletConfig(mockServletContext));
  MockHttpServletRequest mockHttpServletRequest=createHttpRequest(mockServletContext,i18nLanguageId,pathInfo);
  mockHttpServletRequest.setAttribute(WebKeys.LAYOUT,_layout);
  MockHttpServletResponse mockHttpServletResponse=new MockHttpServletResponse();
  mockHttpServletRequest.setCookies(mockHttpServletResponse.getCookies());
  _i18nServlet.service(mockHttpServletRequest,mockHttpServletResponse);
  Locale actualLocale=_portalImpl.getLocale(mockHttpServletRequest,mockHttpServletResponse,false);
  Assert.assertEquals(expectedLocale,actualLocale);
  return mockHttpServletResponse;
}
