{
  try {
    IMAPFolder folder=_getCurrentFolder(ses);
    if (!folder.getName().equals(MAIL_TRASH_NAME)) {
      moveMessages(ses,messageUIDs,MAIL_TRASH_NAME);
    }
 else {
      Message[] msgs=_getCurrentFolder(ses).getMessagesByUID(messageUIDs);
      _getCurrentFolder(ses).setFlags(msgs,new Flags(Flags.Flag.DELETED),true);
      _getCurrentFolder(ses).expunge();
    }
  }
 catch (  MessagingException ex) {
    _log.error("Unable to delete messages");
    throw new FolderException(ex);
  }
}
