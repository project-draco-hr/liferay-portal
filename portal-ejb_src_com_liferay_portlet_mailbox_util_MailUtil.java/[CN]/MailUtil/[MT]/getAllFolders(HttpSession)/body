{
  List list=new ArrayList();
  IMAPFolder root=(IMAPFolder)_getStore(ses).getDefaultFolder();
  try {
    Folder[] folders=root.list();
    for (int i=0; i < folders.length; i++) {
      if ((folders[i].getType() & IMAPFolder.HOLDS_MESSAGES) != 0) {
        MailFolder mf=new MailFolder(folders[i].getNewMessageCount(),folders[i].getName(),folders[i].getMessageCount());
        list.add(mf);
      }
 else {
      }
    }
  }
  finally {
    if (root != null && root.isOpen()) {
      root.close(false);
    }
  }
  return list;
}
