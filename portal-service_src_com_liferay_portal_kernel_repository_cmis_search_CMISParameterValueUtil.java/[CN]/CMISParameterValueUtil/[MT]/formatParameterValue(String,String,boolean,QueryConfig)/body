{
  if (field.equals(Field.CREATE_DATE) || field.equals(Field.MODIFIED_DATE)) {
    try {
      DateFormat searchSimpleDateFormat=DateFormatFactoryUtil.getSimpleDateFormat(_INDEX_DATE_FORMAT_PATTERN);
      Date date=searchSimpleDateFormat.parse(value);
      DateFormat cmisSimpleDateFormat=DateFormatFactoryUtil.getSimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.000'Z'");
      value=cmisSimpleDateFormat.format(date);
    }
 catch (    ParseException pe) {
      if (_log.isWarnEnabled()) {
        _log.warn("Unable to parse date " + value + " for field "+ field);
      }
    }
  }
 else {
    String productName=StringPool.BLANK;
    if (queryConfig != null) {
      productName=(String)queryConfig.getAttribute("repositoryProductName");
    }
    if (Validator.isNotNull(productName) && productName.startsWith("Alfresco")) {
      value=StringUtil.replace(value,new String[]{StringPool.APOSTROPHE},new String[]{"\\'"});
    }
 else {
      value=StringUtil.replace(value,new String[]{StringPool.APOSTROPHE,StringPool.UNDERLINE},new String[]{"\\'","\\_"});
    }
    if (wildcard) {
      value=StringUtil.replace(value,new String[]{StringPool.PERCENT,StringPool.STAR},new String[]{"\\%",StringPool.PERCENT});
    }
  }
  return value;
}
