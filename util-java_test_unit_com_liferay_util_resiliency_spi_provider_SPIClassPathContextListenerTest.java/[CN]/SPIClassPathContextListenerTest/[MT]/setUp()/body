{
  File spiEmbeddedLibDir=new File(_CONTEXT_PATH,_EMBEDDED_LIB_DIR_NAME);
  spiEmbeddedLibDir.mkdir();
  _jarFile=new File(spiEmbeddedLibDir,"jarFile.jar");
  _jarFile.createNewFile();
  File notJarFile=new File(spiEmbeddedLibDir,"notJarFile.zip");
  notJarFile.createNewFile();
  File spiEmbeddedLibExtDir=new File(_CONTEXT_PATH,_EMBEDDED_LIB_EXT_DIR_NAME);
  spiEmbeddedLibExtDir.mkdir();
  _extJarFile=new File(spiEmbeddedLibExtDir,"extJarFile.jar");
  _extJarFile.createNewFile();
  File extNotJarFile=new File(spiEmbeddedLibExtDir,"extNotJarFile.zip");
  extNotJarFile.createNewFile();
  File globalLib1Dir=new File(_CONTEXT_PATH,_GLOBAL_LIB_1_DIR_NAME);
  globalLib1Dir.mkdir();
  _portalServiceJarFile=new File(globalLib1Dir,"portal-kernel.jar");
  _portalServiceJarFile.createNewFile();
  _global1JarFile=new File(globalLib1Dir,"global1JarFile.jar");
  _global1JarFile.createNewFile();
  File global1NotJarFile=new File(globalLib1Dir,"global1NotJarFile.zip");
  global1NotJarFile.createNewFile();
  File globalLib2Dir=new File(_CONTEXT_PATH,_GLOBAL_LIB_2_DIR_NAME);
  globalLib2Dir.mkdir();
  _jdbcDriverJarFile=new File(globalLib2Dir,"jdbcDriver.jar");
  _jdbcDriverJarFile.createNewFile();
  _global2JarFile=new File(globalLib2Dir,"global2JarFile.jar");
  _global2JarFile.createNewFile();
  File global2NotJarFile=new File(globalLib2Dir,"global2NotJarFile.zip");
  global2NotJarFile.createNewFile();
  final Map<String,URL> resources=new HashMap<>();
  final String driverClassName="TestDriver";
  putResource(resources,_jdbcDriverJarFile,driverClassName);
  putResource(resources,_portalServiceJarFile,PortalException.class.getName());
  final Method getMethod=Props.class.getMethod("get",String.class);
  PropsUtil.setProps((Props)ProxyUtil.newProxyInstance(Props.class.getClassLoader(),new Class<?>[]{Props.class},new InvocationHandler(){
    @Override public Object invoke(    Object proxy,    Method method,    Object[] args){
      if (getMethod.equals(method)) {
        if (args[0].equals(PropsKeys.JDBC_DEFAULT_DRIVER_CLASS_NAME)) {
          return driverClassName;
        }
        return StringPool.BLANK;
      }
      throw new UnsupportedOperationException();
    }
  }
));
  PortalClassLoaderUtil.setClassLoader(new ClassLoader(){
    @Override public URL getResource(    String name){
      URL url=resources.get(name);
      if (url != null) {
        return url;
      }
      return super.getResource(name);
    }
  }
);
}
