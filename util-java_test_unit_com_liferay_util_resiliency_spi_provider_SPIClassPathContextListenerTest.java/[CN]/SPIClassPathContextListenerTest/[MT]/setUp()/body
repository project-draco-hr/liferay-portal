{
  File spiEmbeddedLibDir=new File(_CONTEXT_PATH,_EMBEDDED_LIB_DIR_NAME);
  spiEmbeddedLibDir.mkdir();
  _jarFile=new File(spiEmbeddedLibDir,"jarFile.jar");
  _jarFile.createNewFile();
  File notJarFile=new File(spiEmbeddedLibDir,"notJarFile.zip");
  notJarFile.createNewFile();
  File spiEmbeddedLibExtDir=new File(_CONTEXT_PATH,_EMBEDDED_LIB_EXT_DIR_NAME);
  spiEmbeddedLibExtDir.mkdir();
  _extJarFile=new File(spiEmbeddedLibExtDir,"extJarFile.jar");
  _extJarFile.createNewFile();
  File extNotJarFile=new File(spiEmbeddedLibExtDir,"extNotJarFile.zip");
  extNotJarFile.createNewFile();
  File globalLibDir1=new File(_CONTEXT_PATH,_GLOBAL_LIB_DIR1_NAME);
  globalLibDir1.mkdir();
  _portalServiceJarFile=new File(globalLibDir1,"portal-service.jar");
  _portalServiceJarFile.createNewFile();
  _global1JarFile=new File(globalLibDir1,"global1JarFile.jar");
  _global1JarFile.createNewFile();
  File global1NotJarFile=new File(globalLibDir1,"global1NotJarFile.zip");
  global1NotJarFile.createNewFile();
  File globalLibDir2=new File(_CONTEXT_PATH,_GLOBAL_LIB_DIR2_NAME);
  globalLibDir2.mkdir();
  _jdbcDriverJarFile=new File(globalLibDir2,"jdbcDriver.jar");
  _jdbcDriverJarFile.createNewFile();
  _global2JarFile=new File(globalLibDir2,"global2JarFile.jar");
  _global2JarFile.createNewFile();
  File global2NotJarFile=new File(globalLibDir2,"global2NotJarFile.zip");
  global2NotJarFile.createNewFile();
  final Map<String,URL> resources=new HashMap<String,URL>();
  final String driverClassName="TestDriver";
  putResource(resources,_jdbcDriverJarFile,driverClassName);
  putResource(resources,_portalServiceJarFile,PortalException.class.getName());
  PropsUtil.setProps(new PropsImpl(){
    @Override public String get(    String key){
      if (key.equals(PropsKeys.JDBC_DEFAULT_DRIVER_CLASS_NAME)) {
        return driverClassName;
      }
      return super.get(key);
    }
  }
);
  PortalClassLoaderUtil.setClassLoader(new ClassLoader(){
    @Override public URL getResource(    String name){
      URL url=resources.get(name);
      if (url != null) {
        return url;
      }
      return super.getResource(name);
    }
  }
);
}
