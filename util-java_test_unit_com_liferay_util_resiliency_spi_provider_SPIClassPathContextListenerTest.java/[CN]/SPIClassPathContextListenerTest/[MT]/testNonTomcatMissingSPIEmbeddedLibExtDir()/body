{
  deleteFile(new File(_CONTEXT_PATH,_EMBEDDED_LIB_EXT_DIR_NAME));
  List<LogRecord> logRecords=JDKLoggerTestUtil.configureJDKLogger(SPIClassPathContextListener.class.getName(),Level.SEVERE);
  SPIClassPathContextListener spiClassPathContextListener=new SPIClassPathContextListener();
  spiClassPathContextListener.contextInitialized(new ServletContextEvent(_mockServletContext));
  Assert.assertSame(StringPool.BLANK,SPIClassPathContextListener.SPI_CLASS_PATH);
  AtomicReference<SPIProvider> spiProviderReference=SPIClassPathContextListener.spiProviderReference;
  Assert.assertNull(spiProviderReference.get());
  Assert.assertEquals(1,logRecords.size());
  LogRecord logRecord=logRecords.get(0);
  Assert.assertEquals("Unable to find SPI embedded lib ext directory " + _CONTEXT_PATH + _EMBEDDED_LIB_EXT_DIR_NAME,logRecord.getMessage());
  logRecords=JDKLoggerTestUtil.configureJDKLogger(SPIClassPathContextListener.class.getName(),Level.SEVERE);
  File file=new File(_CONTEXT_PATH,_EMBEDDED_LIB_EXT_DIR_NAME);
  file.deleteOnExit();
  file.createNewFile();
  try {
    spiClassPathContextListener.contextInitialized(new ServletContextEvent(_mockServletContext));
  }
  finally {
    file.delete();
  }
  Assert.assertSame(StringPool.BLANK,SPIClassPathContextListener.SPI_CLASS_PATH);
  Assert.assertNull(spiProviderReference.get());
  Assert.assertEquals(1,logRecords.size());
  logRecord=logRecords.get(0);
  Assert.assertEquals("Unable to find SPI embedded lib ext directory " + _CONTEXT_PATH + _EMBEDDED_LIB_EXT_DIR_NAME,logRecord.getMessage());
}
