{
  PortletImpl portlet=new PortletImpl();
  List<String> portletResourcesList=Arrays.asList(portletResources);
  portlet.setFooterPortalCss(portletResourcesList);
  portlet.setFooterPortalJavaScript(portletResourcesList);
  portlet.setFooterPortletCss(portletResourcesList);
  portlet.setFooterPortletJavaScript(portletResourcesList);
  portlet.setHeaderPortalCss(portletResourcesList);
  portlet.setHeaderPortalJavaScript(portletResourcesList);
  portlet.setHeaderPortletCss(portletResourcesList);
  portlet.setHeaderPortletJavaScript(portletResourcesList);
  portlet.setPortletId(PortletKeys.PORTAL);
  portlet.setPortletName(contextName);
  PortletAppImpl portletApp=new PortletAppImpl(contextName);
  ServletContext servletContext=new MockServletContext();
  ServletContextPool.put(contextName,servletContext);
  portletApp.setServletContext(servletContext);
  portlet.setPortletApp(portletApp);
  return portlet;
}
