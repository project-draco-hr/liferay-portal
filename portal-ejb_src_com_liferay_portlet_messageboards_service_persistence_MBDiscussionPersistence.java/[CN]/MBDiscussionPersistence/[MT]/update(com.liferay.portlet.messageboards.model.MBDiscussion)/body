{
  Session session=null;
  try {
    if (mbDiscussion.isNew() || mbDiscussion.isModified()) {
      session=openSession();
      if (mbDiscussion.isNew()) {
        MBDiscussionHBM mbDiscussionHBM=new MBDiscussionHBM();
        mbDiscussionHBM.setDiscussionId(mbDiscussion.getDiscussionId());
        mbDiscussionHBM.setClassName(mbDiscussion.getClassName());
        mbDiscussionHBM.setClassPK(mbDiscussion.getClassPK());
        mbDiscussionHBM.setThreadId(mbDiscussion.getThreadId());
        session.save(mbDiscussionHBM);
        session.flush();
      }
 else {
        MBDiscussionHBM mbDiscussionHBM=(MBDiscussionHBM)session.get(MBDiscussionHBM.class,mbDiscussion.getPrimaryKey());
        if (mbDiscussionHBM != null) {
          mbDiscussionHBM.setClassName(mbDiscussion.getClassName());
          mbDiscussionHBM.setClassPK(mbDiscussion.getClassPK());
          mbDiscussionHBM.setThreadId(mbDiscussion.getThreadId());
          session.flush();
        }
 else {
          mbDiscussionHBM=new MBDiscussionHBM();
          mbDiscussionHBM.setDiscussionId(mbDiscussion.getDiscussionId());
          mbDiscussionHBM.setClassName(mbDiscussion.getClassName());
          mbDiscussionHBM.setClassPK(mbDiscussion.getClassPK());
          mbDiscussionHBM.setThreadId(mbDiscussion.getThreadId());
          session.save(mbDiscussionHBM);
          session.flush();
        }
      }
      mbDiscussion.setNew(false);
      mbDiscussion.setModified(false);
    }
    return mbDiscussion;
  }
 catch (  HibernateException he) {
    throw new SystemException(he);
  }
 finally {
    closeSession(session);
  }
}
