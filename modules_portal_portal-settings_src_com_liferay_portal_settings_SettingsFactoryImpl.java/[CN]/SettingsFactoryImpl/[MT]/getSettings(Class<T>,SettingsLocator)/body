{
  Settings settings=getSettings(settingsLocator);
  Class<?> settingsOverrideClass=getOverrideClass(clazz);
  try {
    TypedSettings typedSettings=new TypedSettings(settings);
    Object settingsOverrideInstance=null;
    if (settingsOverrideClass != null) {
      Constructor<?> constructor=settingsOverrideClass.getConstructor(TypedSettings.class);
      settingsOverrideInstance=constructor.newInstance(typedSettings);
    }
    SettingsInvocationHandler<T> settingsInvocationHandler=new SettingsInvocationHandler<>(clazz,settingsOverrideInstance,typedSettings);
    return settingsInvocationHandler.createProxy();
  }
 catch (  NoSuchMethodException|InvocationTargetException|InstantiationException|IllegalAccessException e) {
    throw new SettingsException("Unable to load settings of type " + clazz.getName(),e);
  }
}
