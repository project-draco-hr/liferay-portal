{
  if (!wikiPage.isDraft() && WikiPagePermissionChecker.contains(_wikiRequestHelper.getPermissionChecker(),wikiPage.getNodeId(),HtmlUtil.unescape(wikiPage.getTitle()),ActionKeys.DELETE)) {
    DeleteMenuItem deleteMenuItem=new DeleteMenuItem();
    deleteMenuItem.setKey(WikiUIItemKeys.DELETE);
    deleteMenuItem.setTrash(TrashUtil.isTrashEnabled(_wikiRequestHelper.getScopeGroupId()));
    LiferayPortletResponse liferayPortletResponse=_wikiRequestHelper.getLiferayPortletResponse();
    PortletURL portletURL=liferayPortletResponse.createActionURL();
    portletURL.setParameter("struts_action","/wiki/edit_page");
    portletURL.setParameter(Constants.CMD,TrashUtil.isTrashEnabled(_wikiRequestHelper.getScopeGroupId()) ? Constants.MOVE_TO_TRASH : Constants.DELETE);
    portletURL.setParameter("redirect",_wikiRequestHelper.getCurrentURL());
    portletURL.setParameter("nodeId",String.valueOf(wikiPage.getNodeId()));
    portletURL.setParameter("title",HtmlUtil.unescape(wikiPage.getTitle()));
    deleteMenuItem.setURL(portletURL.toString());
    menuItems.add(deleteMenuItem);
  }
  if (wikiPage.isDraft() && WikiPagePermissionChecker.contains(_wikiRequestHelper.getPermissionChecker(),wikiPage,ActionKeys.DELETE)) {
    URLMenuItem menuItem=new URLMenuItem();
    menuItem.setIcon("icon-remove");
    menuItem.setKey(WikiUIItemKeys.DELETE);
    menuItem.setLabel("discard-draft");
    LiferayPortletResponse liferayPortletResponse=_wikiRequestHelper.getLiferayPortletResponse();
    PortletURL portletURL=liferayPortletResponse.createActionURL();
    portletURL.setParameter("struts_action","/wiki/edit_page");
    portletURL.setParameter(Constants.CMD,Constants.DELETE);
    portletURL.setParameter("redirect",_wikiRequestHelper.getCurrentURL());
    portletURL.setParameter("nodeId",String.valueOf(wikiPage.getNodeId()));
    portletURL.setParameter("title",HtmlUtil.unescape(wikiPage.getTitle()));
    portletURL.setParameter("version",String.valueOf(wikiPage.getVersion()));
    menuItem.setURL(portletURL.toString());
    menuItems.add(menuItem);
  }
}
