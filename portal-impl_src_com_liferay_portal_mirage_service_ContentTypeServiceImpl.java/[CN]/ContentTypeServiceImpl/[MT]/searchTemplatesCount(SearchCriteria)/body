{
  try {
    int count=-1;
    SmartFields smartFields=new SmartFields(searchCriteria.getSearchFieldValues());
    String query=smartFields.getString(MirageTemplateCriteria.QUERY);
    long companyId=smartFields.getLong(MirageTemplateCriteria.COMPANY_ID);
    long groupId=smartFields.getLong(MirageTemplateCriteria.GROUP_ID);
    String structureId=smartFields.getString(MirageTemplateCriteria.STRUCTURE_ID);
    String structureIdComparator=smartFields.getString(MirageTemplateCriteria.STRUCTURE_ID_COMPARATOR);
    if (query.equals(MirageTemplateCriteria.COUNT_BY_KEYWORDS)) {
      String keywords=smartFields.getString(MirageTemplateCriteria.KEYWORDS);
      count=JournalTemplateFinderUtil.countByKeywords(companyId,groupId,keywords,structureId,structureIdComparator);
    }
 else     if (query.equals(MirageTemplateCriteria.COUNT_BY_C_G_T_S_N_D)) {
      String templateId=smartFields.getString(MirageTemplateCriteria.TEMPLATE_ID);
      String name=smartFields.getString(MirageTemplateCriteria.NAME);
      String description=smartFields.getString(MirageTemplateCriteria.DESCRIPTION);
      boolean andOperator=searchCriteria.isMatchAnyOneField();
      count=JournalTemplateFinderUtil.countByC_G_T_S_N_D(companyId,groupId,templateId,structureId,structureIdComparator,name,description,andOperator);
    }
    return count;
  }
 catch (  SystemException se) {
    throw new TemplateNotFoundException(se.getMessage(),se.getMessage(),se);
  }
}
