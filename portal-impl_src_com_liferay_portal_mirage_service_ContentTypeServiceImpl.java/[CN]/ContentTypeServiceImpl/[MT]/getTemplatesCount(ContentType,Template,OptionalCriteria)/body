{
  int count=-1;
  MirageTemplateCriteria criteria=(MirageTemplateCriteria)optionalCriteria;
  String query=criteria.getString(MirageTemplateCriteria.QUERY);
  if (query == null) {
    return count;
  }
  try {
    if (query.equals(MirageTemplateCriteria.COUNT_BY_G_S)) {
      MirageTemplate mirageTemplate=(MirageTemplate)mirageJournalTemplate;
      JournalTemplate template=mirageTemplate.getTemplate();
      count=JournalTemplateUtil.countByG_S(template.getGroupId(),template.getStructureId());
    }
 else     if (query.equals(MirageTemplateCriteria.COUNT_BY_GROUP_ID)) {
      MirageTemplate mirageTemplate=(MirageTemplate)mirageJournalTemplate;
      JournalTemplate template=mirageTemplate.getTemplate();
      count=JournalTemplateUtil.countByGroupId(template.getGroupId());
    }
 else     if (query.equals(MirageTemplateCriteria.ARTICLE_COUNT_BY_G_T)) {
      MirageTemplate mirageTemplate=(MirageTemplate)mirageJournalTemplate;
      JournalTemplate template=mirageTemplate.getTemplate();
      count=JournalArticleUtil.countByG_T(template.getGroupId(),template.getTemplateId());
    }
  }
 catch (  SystemException se) {
    throw new CMSException(se.getMessage(),se.getMessage(),se);
  }
  return count;
}
