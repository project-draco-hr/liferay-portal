{
  MirageTemplate mirageTemplate=(MirageTemplate)mirageJournalTemplate;
  JournalTemplate template=mirageTemplate.getTemplate();
  MirageTemplateCriteria criteria=(MirageTemplateCriteria)optionalCriteria;
  String query=criteria.getString(MirageTemplateCriteria.QUERY);
  if (query == null) {
    return null;
  }
  try {
    if (query.equals(MirageTemplateCriteria.FIND_BY_PRIMARY_KEY)) {
      mirageTemplate.setTemplate(JournalTemplateUtil.findByPrimaryKey(template.getId()));
    }
 else     if (query.equals(MirageTemplateCriteria.FIND_BY_SMALL_IMAGE_ID)) {
      mirageTemplate.setTemplate(JournalTemplateUtil.findBySmallImageId(template.getSmallImageId()));
    }
 else     if (query.equals(MirageTemplateCriteria.FIND_BY_G_T)) {
      mirageTemplate.setTemplate(JournalTemplateUtil.findByG_T(template.getGroupId(),template.getTemplateId()));
    }
  }
 catch (  PortalException pe) {
    throw new TemplateNotFoundException(pe.getMessage(),pe.getMessage(),pe);
  }
catch (  SystemException se) {
    throw new TemplateNotFoundException(se.getMessage(),se.getMessage(),se);
  }
  return mirageTemplate;
}
