{
  StringMaker sm=new StringMaker();
  sm.append(Http.getProtocol(req));
  sm.append("://");
  sm.append(req.getServletPath());
  sm.append(req.getPathInfo());
  sm.append(StringPool.QUESTION);
  sm.append(req.getQueryString());
  sm.append(StringPool.POUND);
  sm.append(LanguageUtil.getLanguageId(req));
  sm.append(StringPool.POUND);
  sm.append(getBrowserType(req));
  sm.append(StringPool.POUND);
  sm.append(BrowserSniffer.acceptsGzip(req));
  return sm.toString().trim().toUpperCase();
}
