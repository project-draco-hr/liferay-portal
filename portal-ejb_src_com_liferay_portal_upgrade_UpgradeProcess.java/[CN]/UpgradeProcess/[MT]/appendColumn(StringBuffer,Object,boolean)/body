{
  if (value == null) {
    throw new UpgradeException("Nulls should never be inserted into the database");
  }
 else   if (value instanceof String) {
    sb.append(StringUtil.replace((String)value,StringPool.COMMA,_SAFE_COMMA_CHARACTER));
  }
 else   if (value instanceof Date) {
    DateFormat df=DateUtil.getISOFormat();
    sb.append(df.format((Date)value));
  }
 else {
    sb.append(value);
  }
  if (last) {
    sb.append(StringPool.NEW_LINE);
  }
 else {
    sb.append(StringPool.COMMA);
  }
}
