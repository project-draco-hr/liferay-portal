{
  _group=ServiceTestUtil.addGroup();
  _folder=DLAppLocalServiceUtil.addFolder(TestPropsValues.getUserId(),_group.getGroupId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,"Folder A","",ServiceTestUtil.getServiceContext(_group.getGroupId()));
  DLAppLocalServiceUtil.addFolder(TestPropsValues.getUserId(),_group.getGroupId(),_folder.getFolderId(),"Folder B","",ServiceTestUtil.getServiceContext(_group.getGroupId()));
  Folder folder=DLAppLocalServiceUtil.addFolder(TestPropsValues.getUserId(),_group.getGroupId(),_folder.getFolderId(),"Folder C","",ServiceTestUtil.getServiceContext(_group.getGroupId()));
  DLAppServiceUtil.moveFolderToTrash(folder.getFolderId());
  FileEntry fileEntry=DLAppTestUtil.addFileEntry(_group.getGroupId(),_folder.getFolderId(),false,"FE1.txt","FE1.txt");
  DLFileEntry dlFileEntry=((LiferayFileEntry)fileEntry).getDLFileEntry();
  dlFileEntry.setUserId(1234);
  dlFileEntry.setSmallImageId(6789);
  dlFileEntry.setExtraSettings("Extra Settings");
  dlFileEntry=DLFileEntryLocalServiceUtil.updateDLFileEntry(dlFileEntry);
  _fileVersion=dlFileEntry.getFileVersion();
  _fileVersion.setUserId(1234);
  _fileVersion.setStatus(WorkflowConstants.STATUS_APPROVED);
  DLFileVersionLocalServiceUtil.updateDLFileVersion(_fileVersion);
  DLAppTestUtil.addFileEntry(_group.getGroupId(),_folder.getFolderId(),ContentTypes.APPLICATION_PDF,"FE2.pdf","FE2.pdf");
  fileEntry=DLAppTestUtil.addFileEntry(_group.getGroupId(),_folder.getFolderId(),false,"FE3.txt","FE3.txt");
  fileEntry=DLAppTestUtil.updateFileEntry(_group.getGroupId(),fileEntry.getFileEntryId(),"FE3.txt","FE3.txt");
  dlFileEntry=((LiferayFileEntry)fileEntry).getDLFileEntry();
  dlFileEntry.setDescription("FE3.txt");
  DLFileEntryLocalServiceUtil.updateDLFileEntry(dlFileEntry);
  FinderCacheUtil.clearCache();
  LiferayFileVersion fileVersion=(LiferayFileVersion)fileEntry.getFileVersion();
  DLFileVersion dlFileVersion=(DLFileVersion)fileVersion.getModel();
  dlFileVersion.setExtraSettings("Extra Settings");
  DLFileVersionLocalServiceUtil.updateDLFileVersion(dlFileVersion);
  DLAppServiceUtil.moveFileEntryToTrash(fileEntry.getFileEntryId());
}
