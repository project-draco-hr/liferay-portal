{
  _group=GroupTestUtil.addGroup();
  ServiceContext serviceContext=ServiceTestUtil.getServiceContext(_group.getGroupId());
  _folder=DLAppLocalServiceUtil.addFolder(TestPropsValues.getUserId(),_group.getGroupId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,"Folder A",StringPool.BLANK,serviceContext);
  DLAppLocalServiceUtil.addFolder(TestPropsValues.getUserId(),_group.getGroupId(),_folder.getFolderId(),"Folder B",StringPool.BLANK,serviceContext);
  Folder folder=DLAppLocalServiceUtil.addFolder(TestPropsValues.getUserId(),_group.getGroupId(),_folder.getFolderId(),"Folder C",StringPool.BLANK,serviceContext);
  DLAppServiceUtil.moveFolderToTrash(folder.getFolderId());
  User user=UserTestUtil.addUser(ServiceTestUtil.randomString(),_group.getGroupId());
  FileEntry fileEntry=DLAppTestUtil.addFileEntry(user.getUserId(),_group.getGroupId(),_folder.getFolderId(),"FE1.txt",ContentTypes.TEXT_PLAIN,"FE1.txt",null,WorkflowConstants.ACTION_PUBLISH);
  LiferayFileEntry liferayFileEntry=(LiferayFileEntry)fileEntry;
  DLFileEntry dlFileEntry=liferayFileEntry.getDLFileEntry();
  dlFileEntry.setExtraSettings("extra.settings=true");
  dlFileEntry.setSmallImageId(_SMALL_IMAGE_ID);
  dlFileEntry=DLFileEntryLocalServiceUtil.updateDLFileEntry(dlFileEntry);
  _dlFileVersion=dlFileEntry.getFileVersion();
  DLAppTestUtil.addFileEntry(_group.getGroupId(),_folder.getFolderId(),"FE2.pdf",ContentTypes.APPLICATION_PDF,"FE2.pdf");
  fileEntry=DLAppTestUtil.addFileEntry(_group.getGroupId(),_folder.getFolderId(),false,"FE3.txt","FE3.txt");
  fileEntry=DLAppTestUtil.updateFileEntry(_group.getGroupId(),fileEntry.getFileEntryId(),"FE3.txt","FE3.txt");
  dlFileEntry=((LiferayFileEntry)fileEntry).getDLFileEntry();
  dlFileEntry.setDescription("FE3.txt");
  DLFileEntryLocalServiceUtil.updateDLFileEntry(dlFileEntry);
  DLFileVersion dlFileVersion=dlFileEntry.getFileVersion();
  dlFileVersion.setExtraSettings("extra.settings=true");
  DLFileVersionLocalServiceUtil.updateDLFileVersion(dlFileVersion);
  FinderCacheUtil.clearCache();
  DLAppServiceUtil.moveFileEntryToTrash(fileEntry.getFileEntryId());
}
