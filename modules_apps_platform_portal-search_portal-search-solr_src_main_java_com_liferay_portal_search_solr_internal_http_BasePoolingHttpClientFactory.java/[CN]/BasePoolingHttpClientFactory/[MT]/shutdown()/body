{
  if (_log.isDebugEnabled()) {
    _log.debug("Shut down");
  }
  if (_poolingClientConnectionManager == null) {
    return;
  }
  int retry=0;
  while (retry < 10) {
    PoolStats poolStats=_poolingClientConnectionManager.getTotalStats();
    int availableConnections=poolStats.getAvailable();
    if (availableConnections <= 0) {
      break;
    }
    if (_log.isDebugEnabled()) {
      _log.debug(toString() + " is waiting on " + availableConnections+ " connections");
    }
    _poolingClientConnectionManager.closeIdleConnections(200,TimeUnit.MILLISECONDS);
    try {
      Thread.sleep(500);
    }
 catch (    InterruptedException ie) {
    }
    retry++;
  }
  _poolingClientConnectionManager.shutdown();
  _poolingClientConnectionManager=null;
  if (_log.isDebugEnabled()) {
    _log.debug(toString() + " was shut down");
  }
}
