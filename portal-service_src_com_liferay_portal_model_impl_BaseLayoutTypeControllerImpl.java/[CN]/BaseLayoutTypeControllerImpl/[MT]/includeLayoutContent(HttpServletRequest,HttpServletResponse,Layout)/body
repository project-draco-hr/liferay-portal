{
  RequestDispatcher requestDispatcher=servletContext.getRequestDispatcher(getViewPage());
  UnsyncStringWriter unsyncStringWriter=new UnsyncStringWriter();
  ServletResponse servletResponse=createServletResponse(response,unsyncStringWriter);
  String contentType=servletResponse.getContentType();
  String includeServletPath=(String)request.getAttribute(RequestDispatcher.INCLUDE_SERVLET_PATH);
  try {
    addAttributes(request);
    requestDispatcher.include(request,servletResponse);
  }
  finally {
    removeAttributes(request);
    request.setAttribute(RequestDispatcher.INCLUDE_SERVLET_PATH,includeServletPath);
  }
  if (contentType != null) {
    response.setContentType(contentType);
  }
  request.setAttribute(WebKeys.LAYOUT_CONTENT,unsyncStringWriter.getStringBundler());
  return false;
}
