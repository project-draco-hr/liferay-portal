{
  ProxyResponse proxyResponse=new ProxyResponse();
  try {
    Object payload=message.getPayload();
    if (payload == null) {
      throw new Exception("Payload is null");
    }
 else     if (!ProxyRequest.class.isAssignableFrom(payload.getClass())) {
      throw new Exception("Payload " + payload.getClass() + " is not of type "+ ProxyRequest.class.getName());
    }
 else {
      ProxyRequest proxyRequest=(ProxyRequest)payload;
      Object result=proxyRequest.execute(_manager);
      proxyResponse.setResult(result);
    }
  }
 catch (  Exception e) {
    if (_log.isDebugEnabled()) {
      _log.debug(e,e);
    }
    proxyResponse.setException(e);
  }
 finally {
    String responseDestinationName=message.getResponseDestinationName();
    if (Validator.isNotNull(responseDestinationName)) {
      Message responseMessage=MessageBusUtil.createResponseMessage(message);
      responseMessage.setPayload(proxyResponse);
      _messageBus.sendMessage(responseDestinationName,responseMessage);
    }
  }
}
