{
  if (_dlActionsDisplayContext.isShowActions() && isCancelCheckoutDocumentButtonVisible()) {
    PortletURL cancelCheckoutURL=_liferayPortletResponse.createActionURL();
    cancelCheckoutURL.setParameter("struts_action","/document_library/edit_file_entry");
    cancelCheckoutURL.setParameter(Constants.CMD,Constants.CANCEL_CHECKOUT);
    cancelCheckoutURL.setParameter("redirect",_currentURL);
    cancelCheckoutURL.setParameter("fileEntryId",String.valueOf(_fileEntry.getFileEntryId()));
    URLMenuItem urlMenuItem=new URLMenuItem();
    urlMenuItem.setIconCssClass("icon-remove");
    urlMenuItem.setId(DLMenuItems.MENU_ITEM_ID_CANCEL_CHECKOUT);
    urlMenuItem.setMessage("cancel-checkout[document]");
    urlMenuItem.setURL(cancelCheckoutURL.toString());
    menuItems.add(urlMenuItem);
  }
}
