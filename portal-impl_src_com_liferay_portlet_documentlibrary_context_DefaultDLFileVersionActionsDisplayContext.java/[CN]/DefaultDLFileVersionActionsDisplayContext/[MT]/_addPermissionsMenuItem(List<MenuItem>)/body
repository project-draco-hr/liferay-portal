{
  if (_isShowActions() && isPermissionsButtonVisible()) {
    String permissionsURL=null;
    try {
      permissionsURL=PermissionsURLTag.doTag(null,DLFileEntryConstants.getClassName(),HtmlUtil.unescape(_fileEntry.getTitle()),null,String.valueOf(_fileEntry.getFileEntryId()),LiferayWindowState.POP_UP.toString(),null,_request);
    }
 catch (    Exception e) {
      throw new SystemException("Unable to create permissions URL",e);
    }
    URLMenuItem urlMenuItem=new URLMenuItem();
    urlMenuItem.setIconCssClass("icon-lock");
    urlMenuItem.setId(DLMenuItems.MENU_ITEM_ID_PERMISSIONS);
    urlMenuItem.setMessage("permissions");
    urlMenuItem.setMethod("get");
    urlMenuItem.setURL(permissionsURL.toString());
    urlMenuItem.setUseDialog(true);
    menuItems.add(urlMenuItem);
  }
}
