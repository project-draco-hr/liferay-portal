{
  MBMessage parentMessage=MBTestUtil.addMessage(_group.getGroupId());
  long categoryId=parentMessage.getCategoryId();
  long threadId=parentMessage.getThreadId();
  long parentMessageId=parentMessage.getMessageId();
  Thread.sleep(2000);
  MBMessage firstReply=MBTestUtil.addMessage(_group.getGroupId(),categoryId,threadId,parentMessageId);
  Thread.sleep(2000);
  MBMessage secondReply=MBTestUtil.addMessage(_group.getGroupId(),categoryId,threadId,parentMessageId);
  MBMessageLocalServiceUtil.deleteMessage(secondReply.getMessageId());
  MBThread mbThread=parentMessage.getThread();
  Date mbThreadLastPost=mbThread.getLastPostDate();
  Date lastModifiedMessage=firstReply.getModifiedDate();
  Assert.assertTrue(mbThreadLastPost.getTime() == (lastModifiedMessage.getTime() / 1000) * 1000);
}
