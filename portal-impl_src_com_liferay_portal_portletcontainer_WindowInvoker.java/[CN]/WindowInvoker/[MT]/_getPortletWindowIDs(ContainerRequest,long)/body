{
  Map<PortletID,List<String>> portletWindowIDs=new HashMap<PortletID,List<String>>();
  try {
    PortletWindowContext portletWindowContext=containerRequest.getPortletWindowContext();
    List<EntityID> portletEntityIDs=portletWindowContext.getPortletWindows(PortletType.LOCAL,ContainerUtil.getEventDistributionType(containerRequest));
    if (portletEntityIDs == null) {
      return portletWindowIDs;
    }
    for (    EntityID portletEntityID : portletEntityIDs) {
      List<String> windowIDs=portletWindowIDs.get(portletEntityID.getPortletID());
      if (windowIDs == null) {
        windowIDs=new ArrayList<String>();
        portletWindowIDs.put(portletEntityID.getPortletID(),windowIDs);
      }
      String windowID=WindowInvokerUtil.getPortletWindowID(portletEntityID,plid);
      windowIDs.add(windowID);
    }
  }
 catch (  PortletWindowContextException pwce) {
    if (_log.isWarnEnabled()) {
      _log.warn(pwce,pwce);
    }
  }
  return portletWindowIDs;
}
