{
  if (!_isWARFile()) {
    return super.invokeRender(renderRequest,renderResponse);
  }
  try {
    RenderRequestImpl renderRequestImpl=(RenderRequestImpl)renderRequest;
    RenderResponseImpl renderResponseImpl=(RenderResponseImpl)renderResponse;
    HttpServletRequest request=renderRequestImpl.getOriginalHttpServletRequest();
    HttpServletResponse response=renderResponseImpl.getHttpServletResponse();
    _initUser(request,_portletModel);
    long plid=_getPlid(renderRequest);
    GetMarkupRequest getMarkupRequest=ContainerRequestFactory.createGetMarkUpRequest(request,_portletModel,renderRequestImpl.getWindowState(),renderRequestImpl.getPortletMode(),plid,isFacesPortlet(),_remotePortlet);
    _populateContainerRequest(request,response,getMarkupRequest,renderRequest);
    if (!_portletModel.getPublishingEvents().isEmpty()) {
      getMarkupRequest.setPortletNamespaces(_getPortletNamespaces(getMarkupRequest));
    }
    GetMarkupResponse getMarkupResponse=ContainerResponseFactory.createGetMarkUpResponse(response);
    List<String> allowableContentTypes=getMarkupRequest.getAllowableContentTypes();
    if (renderRequest.getWindowState().equals(LiferayWindowState.EXCLUSIVE)) {
      allowableContentTypes.add("*/*");
    }
    getMarkupRequest.setAllowableContentTypes(allowableContentTypes);
    _container.getMarkup(getMarkupRequest,getMarkupResponse);
    Map<String,List<String>> properties=getMarkupResponse.getStringProperties();
    if ((properties != null) && (properties.containsKey("clear-request-parameters"))) {
      getMarkupRequest.getRenderParameters().clear();
    }
    StringBuffer sb=getMarkupResponse.getMarkup();
    PrintWriter pw=response.getWriter();
    pw.print(sb);
    String title=getMarkupResponse.getTitle();
    renderResponseImpl.setTitle(title);
    List<String> markupHeaders=_getMarkupHeaders(getMarkupResponse);
    if (markupHeaders != null) {
      List<String> allMarkupHeaders=(List<String>)request.getAttribute(MimeResponse.MARKUP_HEAD_ELEMENT);
      if (allMarkupHeaders == null) {
        allMarkupHeaders=new ArrayList<String>();
      }
      allMarkupHeaders.addAll(markupHeaders);
      request.setAttribute(MimeResponse.MARKUP_HEAD_ELEMENT,allMarkupHeaders);
    }
    _setHttpSession(getMarkupRequest,renderRequest);
    return title;
  }
 catch (  Exception e) {
    throw new PortletException(e);
  }
 finally {
    _setPortletAttributes(renderRequest,renderResponse);
  }
}
