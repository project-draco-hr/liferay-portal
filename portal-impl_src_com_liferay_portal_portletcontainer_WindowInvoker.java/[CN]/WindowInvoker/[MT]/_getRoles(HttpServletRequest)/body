{
  if (_remoteUserId <= 0) {
    return Collections.emptyList();
  }
  long companyId=PortalUtil.getCompanyId(request);
  List<Role> roles=null;
  try {
    List<Role> tmpRoles=RoleLocalServiceUtil.getRoles(companyId);
    if (tmpRoles != null) {
      roles=new ArrayList<Role>(tmpRoles);
    }
  }
 catch (  SystemException se) {
    _log.error(se);
  }
  if (roles == null || roles.isEmpty()) {
    return Collections.EMPTY_LIST;
  }
  List<Role> userRoles=null;
  try {
    userRoles=RoleLocalServiceUtil.getUserRoles(_remoteUserId);
  }
 catch (  SystemException se) {
    _log.error(se);
  }
  if (userRoles == null || userRoles.isEmpty()) {
    return Collections.EMPTY_LIST;
  }
 else {
    List<String> roleNames=new ArrayList<String>(roles.size());
    roles.retainAll(userRoles);
    for (    Role role : roles) {
      roleNames.add(role.getName());
    }
    return roleNames;
  }
}
