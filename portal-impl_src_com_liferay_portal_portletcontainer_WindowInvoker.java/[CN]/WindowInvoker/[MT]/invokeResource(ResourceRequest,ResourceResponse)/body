{
  if (!_isWARFile()) {
    super.invokeResource(req,res);
    return;
  }
  try {
    ResourceRequestImpl reqImpl=(ResourceRequestImpl)req;
    ResourceResponseImpl resImpl=(ResourceResponseImpl)res;
    HttpServletRequest httpReq=reqImpl.getOriginalHttpServletRequest();
    HttpServletResponse httpRes=resImpl.getHttpServletResponse();
    GetResourceRequest getResourceRequest=ContainerRequestFactory.createGetResourceRequest(httpReq,_portletModel,reqImpl.getWindowState(),reqImpl.getPortletMode(),_getPlid(req));
    _populateContainerRequest(httpReq,httpRes,getResourceRequest,reqImpl);
    GetResourceResponse getResourceResponse=ContainerResponseFactory.createGetResourceResponse(httpRes);
    _container.getResources(getResourceRequest,getResourceResponse);
    String contentType=httpRes.getContentType();
    if (contentType != null) {
      resImpl.setContentType(contentType);
    }
    StringBuffer sb=getResourceResponse.getContentAsBuffer();
    byte[] bytes=getResourceResponse.getContentAsBytes();
    if (sb != null) {
      httpRes.getWriter().print(sb);
    }
 else     if ((bytes != null) && (bytes.length > 0)) {
      httpRes.getOutputStream().write(bytes);
    }
 else {
      httpRes.getWriter().print(StringPool.BLANK);
    }
  }
 catch (  Exception e) {
    throw new PortletException(e);
  }
 finally {
    _setPortletAttributes(req,res);
  }
}
