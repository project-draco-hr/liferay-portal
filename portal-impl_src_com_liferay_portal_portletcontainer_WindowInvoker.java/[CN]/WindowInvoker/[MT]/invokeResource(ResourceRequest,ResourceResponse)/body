{
  if (!_isWARFile()) {
    super.invokeResource(resourceRequest,resourceResponse);
    return;
  }
  try {
    ResourceRequestImpl resourceRequestImpl=(ResourceRequestImpl)resourceRequest;
    ResourceResponseImpl resourceResponseImpl=(ResourceResponseImpl)resourceResponse;
    HttpServletRequest request=resourceRequestImpl.getOriginalHttpServletRequest();
    HttpServletResponse response=resourceResponseImpl.getHttpServletResponse();
    _initUser(request,_portletModel);
    long plid=_getPlid(resourceRequest);
    GetResourceRequest getResourceRequest=ContainerRequestFactory.createGetResourceRequest(request,_portletModel,resourceRequestImpl.getWindowState(),resourceRequestImpl.getPortletMode(),plid,isFacesPortlet(),_remotePortlet);
    _populateContainerRequest(request,response,getResourceRequest,resourceRequest);
    GetResourceResponse getResourceResponse=ContainerResponseFactory.createGetResourceResponse(response);
    _container.getResources(getResourceRequest,getResourceResponse);
    String contentType=getResourceResponse.getContentType();
    if (contentType != null) {
      resourceResponseImpl.setContentType(contentType);
    }
    _transferHeaders(request,response,getResourceResponse);
    _setHttpSession(getResourceRequest,resourceRequest);
    StringBuffer sb=getResourceResponse.getContentAsBuffer();
    byte[] bytes=getResourceResponse.getContentAsBytes();
    if (sb != null) {
      response.getWriter().print(sb);
    }
 else     if ((bytes != null) && (bytes.length > 0)) {
      response.getOutputStream().write(bytes);
    }
 else {
      response.getWriter().print(StringPool.BLANK);
    }
  }
 catch (  Exception e) {
    throw new PortletException(e);
  }
 finally {
    _setPortletAttributes(resourceRequest,resourceResponse);
  }
}
