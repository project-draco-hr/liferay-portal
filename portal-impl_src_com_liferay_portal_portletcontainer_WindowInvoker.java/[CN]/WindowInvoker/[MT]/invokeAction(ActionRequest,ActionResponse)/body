{
  if (!_isWARFile()) {
    super.invokeAction(req,res);
    return;
  }
  try {
    ActionRequestImpl reqImpl=(ActionRequestImpl)req;
    ActionResponseImpl resImpl=(ActionResponseImpl)res;
    HttpServletRequest httpReq=reqImpl.getOriginalHttpServletRequest();
    HttpServletResponse httpRes=resImpl.getHttpServletResponse();
    ExecuteActionRequest executeActionRequest=ContainerRequestFactory.createExecuteActionRequest(httpReq,_portletModel,reqImpl.getWindowState(),reqImpl.getPortletMode(),_getPlid(req));
    _populateContainerRequest(httpReq,httpRes,executeActionRequest,reqImpl);
    ExecuteActionResponse executeActionResponse=ContainerResponseFactory.createExecuteActionResponse(httpRes);
    ChannelURLType urlType=executeActionRequest.getWindowRequestReader().readURLType(httpReq);
    _container.executeAction(executeActionRequest,executeActionResponse,urlType);
    URL redirectURL=executeActionResponse.getRedirectURL();
    if (redirectURL != null) {
      resImpl.setRedirectLocation(redirectURL.toString());
    }
    ChannelState newWindowState=executeActionResponse.getNewWindowState();
    if (newWindowState != null) {
      resImpl.setWindowState(PortletAppEngineUtils.getWindowState(newWindowState));
    }
    ChannelMode newPortletMode=executeActionResponse.getNewChannelMode();
    if (newPortletMode != null) {
      resImpl.setPortletMode(PortletAppEngineUtils.getPortletMode(newPortletMode));
    }
  }
 catch (  Exception e) {
    throw new PortletException(e);
  }
 finally {
    _setPortletAttributes(req,res);
  }
}
