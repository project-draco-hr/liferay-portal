{
  if (!_isWARFile()) {
    super.invokeAction(actionRequest,actionResponse);
    return;
  }
  try {
    ActionRequestImpl actionRequestImpl=(ActionRequestImpl)actionRequest;
    ActionResponseImpl actionResponseImpl=(ActionResponseImpl)actionResponse;
    HttpServletRequest request=actionRequestImpl.getOriginalHttpServletRequest();
    HttpServletResponse response=actionResponseImpl.getHttpServletResponse();
    ExecuteActionRequest executeActionRequest=ContainerRequestFactory.createExecuteActionRequest(request,_portletModel,actionRequestImpl.getWindowState(),actionRequestImpl.getPortletMode(),_windowRequestReader,_getPlid(actionRequest));
    _populateContainerRequest(request,response,executeActionRequest,actionRequestImpl);
    ExecuteActionResponse executeActionResponse=ContainerResponseFactory.createExecuteActionResponse(response);
    ChannelURLType urlType=executeActionRequest.getWindowRequestReader().readURLType(request);
    _container.executeAction(executeActionRequest,executeActionResponse,urlType);
    URL redirectURL=executeActionResponse.getRedirectURL();
    if (redirectURL != null) {
      actionResponseImpl.setRedirectLocation(redirectURL.toString());
    }
    ChannelState newWindowState=executeActionResponse.getNewWindowState();
    if (newWindowState != null) {
      actionResponseImpl.setWindowState(PortletAppEngineUtils.getWindowState(newWindowState));
    }
    ChannelMode newPortletMode=executeActionResponse.getNewChannelMode();
    if (newPortletMode != null) {
      actionResponseImpl.setPortletMode(PortletAppEngineUtils.getPortletMode(newPortletMode));
    }
  }
 catch (  Exception e) {
    throw new PortletException(e);
  }
 finally {
    _setPortletAttributes(actionRequest,actionResponse);
  }
}
