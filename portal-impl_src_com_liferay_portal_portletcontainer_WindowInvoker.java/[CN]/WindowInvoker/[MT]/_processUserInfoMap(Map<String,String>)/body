{
  Map<String,String> wsrpUserInfoMap=null;
  try {
    wsrpUserInfoMap=new HashMap<String,String>();
    ProfileMapManager profileMapManager=WSRPFactoryUtil.getProfileMapManager();
    Map<String,String> wsrpDefaultUserInfoMap=profileMapManager.getPortletMap();
    Set<String> userAttributes=userInfoMap.keySet();
    for (    String userAttribute : userAttributes) {
      String wsrpUserAttribute=wsrpDefaultUserInfoMap.get(userAttribute);
      if (wsrpUserAttribute != null) {
        String value=userInfoMap.get(userAttribute);
        wsrpUserInfoMap.put(wsrpUserAttribute,value);
      }
    }
  }
 catch (  Exception e) {
    if (_log.isWarnEnabled()) {
      _log.warn(e,e);
    }
    wsrpUserInfoMap=userInfoMap;
  }
  return wsrpUserInfoMap;
}
