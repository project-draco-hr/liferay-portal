{
  if (Validator.isNotNull(virtualHostname)) {
    try {
      VirtualHost virtualHost=virtualHostPersistence.findByHostname(virtualHostname);
      if ((virtualHost.getCompanyId() != companyId) || (virtualHost.getLayoutSetId() != 0)) {
        throw new CompanyVirtualHostException();
      }
    }
 catch (    NoSuchVirtualHostException nsvhe) {
      virtualHostLocalService.updateVirtualHost(companyId,0,virtualHostname);
    }
  }
 else {
    try {
      virtualHostPersistence.removeByC_L(companyId,0);
    }
 catch (    NoSuchVirtualHostException nsvhe) {
    }
  }
}
