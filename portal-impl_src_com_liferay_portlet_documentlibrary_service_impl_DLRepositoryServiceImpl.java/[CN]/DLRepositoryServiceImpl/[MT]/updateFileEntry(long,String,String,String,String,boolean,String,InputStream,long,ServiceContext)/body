{
  DLFileEntryPermission.check(getPermissionChecker(),fileEntryId,ActionKeys.UPDATE);
  boolean hasLock=hasFileEntryLock(fileEntryId);
  if (!hasLock) {
    lockFileEntry(fileEntryId);
  }
  DLFileEntry dlFileEntry=null;
  try {
    dlFileEntry=dlRepositoryLocalService.updateFileEntry(getUserId(),fileEntryId,sourceFileName,title,description,changeLog,majorVersion,extraSettings,is,size,serviceContext);
  }
  finally {
    if (!hasLock) {
      unlockFileEntry(fileEntryId);
    }
  }
  return dlFileEntry;
}
