{
  if (Validator.isNotNull(lockUuid)) {
    try {
      Lock lock=lockLocalService.getLock(DLFolder.class.getName(),folderId);
      if (!lock.getUuid().equals(lockUuid)) {
        throw new InvalidLockException("UUIDs do not match");
      }
    }
 catch (    PortalException pe) {
      if (pe instanceof ExpiredLockException || pe instanceof NoSuchLockException) {
      }
 else {
        throw pe;
      }
    }
  }
  lockLocalService.unlock(DLFolder.class.getName(),folderId);
  try {
    List<DLFileEntry> fileEntries=getFileEntries(groupId,folderId,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
    for (    DLFileEntry fileEntry : fileEntries) {
      unlockFileEntry(fileEntry.getFileEntryId());
    }
  }
 catch (  NoSuchFolderException nsfe) {
  }
catch (  Exception e) {
    _log.error(e,e);
  }
}
