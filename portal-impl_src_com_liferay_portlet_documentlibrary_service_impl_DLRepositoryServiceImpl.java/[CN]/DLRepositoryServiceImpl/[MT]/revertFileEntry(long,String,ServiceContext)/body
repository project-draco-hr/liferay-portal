{
  DLFileEntryPermission.check(getPermissionChecker(),fileEntryId,ActionKeys.UPDATE);
  boolean hasLock=hasFileEntryLock(fileEntryId);
  if (!hasLock) {
    lockFileEntry(fileEntryId);
  }
  try {
    dlRepositoryLocalService.revertFileEntry(getUserId(),fileEntryId,version,serviceContext);
  }
  finally {
    unlockFileEntry(fileEntryId);
  }
}
