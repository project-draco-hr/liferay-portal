{
  BlogsEntryLocalServiceUtil.updateStatus(TestPropsValues.getUserId(),entry.getEntryId(),WorkflowConstants.STATUS_APPROVED,getServiceContext(entry),new HashMap<String,Serializable>());
  entry=BlogsEntryLocalServiceUtil.updateStatus(TestPropsValues.getUserId(),entry.getEntryId(),WorkflowConstants.STATUS_DRAFT,getServiceContext(entry),new HashMap<String,Serializable>());
  Calendar displayDate=new GregorianCalendar();
  displayDate.add(Calendar.DATE,1);
  entry.setDisplayDate(displayDate.getTime());
  BlogsEntryLocalServiceUtil.updateBlogsEntry(entry);
  BlogsEntryLocalServiceUtil.updateStatus(TestPropsValues.getUserId(),entry.getEntryId(),WorkflowConstants.STATUS_APPROVED,getServiceContext(entry),new HashMap<String,Serializable>());
  Assert.assertFalse(isAssetEntryVisible(entry.getEntryId()));
  Assert.assertEquals(0,searchBlogsEntriesCount(group.getGroupId()));
  checkSocialActivity(BlogsActivityKeys.UPDATE_ENTRY,1);
  AssetEntry assetEntry=AssetEntryLocalServiceUtil.fetchEntry(BlogsEntry.class.getName(),entry.getEntryId());
  Assert.assertNotNull(assetEntry.getPublishDate());
}
