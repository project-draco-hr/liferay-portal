{
  try {
    if (GetterUtil.getBoolean(PropsUtil.get(PropsUtil.JCR_INITIALIZE_ON_STARTUP))) {
      JCRFactoryUtil.initialize();
    }
  }
 catch (  Exception e) {
    _log.error(e);
  }
  PortalInitableUtil.flushInitables();
  _log.debug("Registering hot deploy listeners");
  HotDeployUtil.registerListener(new HotDeployLayoutTemplateListener());
  HotDeployUtil.registerListener(new HotDeployPortletListener());
  HotDeployUtil.registerListener(new HotDeployThemeListener());
  HotDeployUtil.flushEvents();
  try {
    _log.debug("Registering auto deploy directories");
    File deployDir=new File(OmniadminUtil.getAutoDeployDeployDir());
    File destDir=new File(OmniadminUtil.getAutoDeployDestDir());
    long interval=OmniadminUtil.getAutoDeployInterval();
    List autoDeployListeners=new ArrayList();
    autoDeployListeners.add(new AutoDeployLayoutTemplateListener());
    autoDeployListeners.add(new AutoDeployPortletListener());
    autoDeployListeners.add(new AutoDeployThemeListener());
    AutoDeployDir autoDeployDir=new AutoDeployDir("defaultAutoDeployDir",deployDir,destDir,interval,autoDeployListeners);
    AutoDeployUtil.registerDir(autoDeployDir);
  }
 catch (  Exception e) {
    _log.error(e);
  }
}
