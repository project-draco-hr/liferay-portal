{
  try {
    if (GetterUtil.getBoolean(PropsUtil.get(PropsUtil.JCR_INITIALIZE_ON_STARTUP))) {
      JCRFactoryUtil.initialize();
    }
  }
 catch (  Exception e) {
    _log.error(e);
  }
  PortalInitableUtil.flushInitables();
  _log.debug("Registering hot deploy listeners");
  Iterator itr=getHotDeployListeners().iterator();
  while (itr.hasNext()) {
    HotDeployListener hotDeployListener=(HotDeployListener)itr.next();
    HotDeployUtil.registerListener(hotDeployListener);
  }
  HotDeployUtil.flushEvents();
  try {
    if (PrefsPropsUtil.getBoolean(PropsUtil.AUTO_DEPLOY_ENABLED)) {
      if (_log.isInfoEnabled()) {
        _log.info("Registering auto deploy directories");
      }
      File deployDir=new File(PrefsPropsUtil.getString(PropsUtil.AUTO_DEPLOY_DEPLOY_DIR));
      File destDir=new File(PrefsPropsUtil.getString(PropsUtil.AUTO_DEPLOY_DEST_DIR));
      long interval=PrefsPropsUtil.getLong(PropsUtil.AUTO_DEPLOY_INTERVAL);
      List autoDeployListeners=getAutoDeployListeners();
      AutoDeployDir autoDeployDir=new AutoDeployDir("defaultAutoDeployDir",deployDir,destDir,interval,autoDeployListeners);
      AutoDeployUtil.registerDir(autoDeployDir);
    }
 else {
      if (_log.isInfoEnabled()) {
        _log.info("Not registering auto deploy directories");
      }
    }
  }
 catch (  Exception e) {
    _log.error(e);
  }
  if (GetterUtil.getBoolean(PropsUtil.get(PropsUtil.SMTP_SERVER_ENABLED))) {
    int port=GetterUtil.getInteger(PropsUtil.get(PropsUtil.SMTP_SERVER_PORT));
    SMTPServerUtil.setPort(port);
    SMTPServerUtil.start();
  }
  runEvent(FixOracleAction.class.getName(),ids);
  runEvent(FixImageAction.class.getName(),ids);
}
