{
  boolean multiPartContent=PortletFileUpload.isMultipartContent(actionRequest);
  if (_log.isInfoEnabled()) {
    if (multiPartContent) {
      _log.info("The given request is a multipart request");
    }
 else {
      _log.info("The given request is NOT a multipart request");
    }
  }
  DiskFileItemFactory diskFileItemFactory=new DiskFileItemFactory();
  PortletFileUpload portletFileUpload=new PortletFileUpload(diskFileItemFactory);
  List<DiskFileItem> diskFileItems=portletFileUpload.parseRequest(actionRequest);
  if (_log.isInfoEnabled()) {
    _log.info("Apache commons upload was able to parse " + diskFileItems.size() + " items");
  }
  for (int i=0; i < diskFileItems.size(); i++) {
    DiskFileItem diskFileItem=diskFileItems.get(i);
    if (_log.isInfoEnabled()) {
      _log.info("Item " + i + " "+ diskFileItem);
    }
  }
  return diskFileItems;
}
