{
  BatchablePipe<String,Integer> batchablePipe=new BatchablePipe<String,Integer>();
  IntegerIncreasableEntry entry1=new IntegerIncreasableEntry("1st",1);
  assertTrue(batchablePipe.put(entry1));
  assertEquals(entry1,batchablePipe.take());
  assertTrue(entry1.increase(1));
  assertEquals(2,(int)entry1.getValue());
  assertFalse(entry1.increase(1));
  assertEquals(2,(int)entry1.getValue());
  IntegerIncreasableEntry entry2=new IntegerIncreasableEntry("2nd",2);
  assertTrue(batchablePipe.put(entry2));
  IntegerIncreasableEntry entry3=new IntegerIncreasableEntry("3nd",3);
  assertTrue(batchablePipe.put(entry3));
  IntegerIncreasableEntry entry4=new IntegerIncreasableEntry("4th",4);
  assertTrue(batchablePipe.put(entry4));
  assertEquals(entry2,batchablePipe.take());
  assertEquals(entry3,batchablePipe.take());
  assertEquals(entry4,batchablePipe.take());
  assertNull(batchablePipe.take());
}
