{
  Element filesElement=document.createElement("Files");
  rootNode.appendChild(filesElement);
  if (Validator.isNull(commandArgument.getCurrentGroupName())) {
    return;
  }
  Group group=commandArgument.getCurrentGroup();
  Folder folder=_getFolder(group.getGroupId(),commandArgument.getCurrentFolder());
  List<FileEntry> fileEntries=DLAppServiceUtil.getFileEntries(folder.getRepositoryId(),folder.getFolderId());
  for (  FileEntry fileEntry : fileEntries) {
    Element fileElement=document.createElement("File");
    filesElement.appendChild(fileElement);
    String name=fileEntry.getTitle();
    String periodAndExtension=StringPool.PERIOD.concat(fileEntry.getExtension());
    if (!name.endsWith(periodAndExtension)) {
      name=name.concat(periodAndExtension);
    }
    fileElement.setAttribute("name",name);
    fileElement.setAttribute("desc",name);
    fileElement.setAttribute("size",getSize(fileEntry.getSize()));
    ThemeDisplay themeDisplay=commandArgument.getThemeDisplay();
    String url=DLUtil.getPreviewURL(fileEntry,fileEntry.getFileVersion(),themeDisplay,StringPool.BLANK,false,false);
    fileElement.setAttribute("url",url);
  }
}
