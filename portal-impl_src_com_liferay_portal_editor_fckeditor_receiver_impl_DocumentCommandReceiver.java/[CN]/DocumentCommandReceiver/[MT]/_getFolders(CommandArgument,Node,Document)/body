{
  Element foldersEl=doc.createElement("Folders");
  root.appendChild(foldersEl);
  if (arg.getCurrentFolder().equals("/")) {
    LinkedHashMap groupParams=new LinkedHashMap();
    groupParams.put("usersGroups",new Long(arg.getUserId()));
    List groups=GroupLocalServiceUtil.search(arg.getCompanyId(),null,null,groupParams,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
    for (int i=0; i < groups.size(); ++i) {
      Group group=(Group)groups.get(i);
      Element folderEl=doc.createElement("Folder");
      foldersEl.appendChild(folderEl);
      folderEl.setAttribute("name",group.getName());
    }
  }
 else {
    Group group=GroupLocalServiceUtil.getGroup(arg.getCompanyId(),arg.getCurrentGroupName());
    DLFolder folder=_getFolder(group.getGroupId(),arg.getCurrentFolder());
    List folders=DLFolderLocalServiceUtil.getFolders(group.getGroupId(),folder.getFolderId());
    for (int i=0; i < folders.size(); i++) {
      folder=(DLFolder)folders.get(i);
      Element folderEl=doc.createElement("Folder");
      foldersEl.appendChild(folderEl);
      folderEl.setAttribute("name",folder.getName());
    }
  }
}
