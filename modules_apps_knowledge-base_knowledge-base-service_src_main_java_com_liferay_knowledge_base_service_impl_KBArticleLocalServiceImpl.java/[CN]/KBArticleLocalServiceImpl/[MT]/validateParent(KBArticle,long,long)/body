{
  validateParent(parentResourceClassNameId,parentResourcePrimKey);
  long kbArticleClassNameId=classNameLocalService.getClassNameId(KBArticleConstants.getClassName());
  if (parentResourceClassNameId == kbArticleClassNameId) {
    KBArticle parentKBArticle=getLatestKBArticle(parentResourcePrimKey,WorkflowConstants.STATUS_ANY);
    List<Long> ancestorResourcePrimaryKeys=parentKBArticle.getAncestorResourcePrimaryKeys();
    if (ancestorResourcePrimaryKeys.contains(kbArticle.getResourcePrimKey())) {
      throw new KBArticleParentException(String.format("Cannot move KBArticle %s inside its descendant " + "KBArticle %s",kbArticle.getResourcePrimKey(),parentKBArticle.getResourcePrimKey()));
    }
  }
}
