{
  validateParent(parentResourceClassNameId,parentResourcePrimKey);
  if ((kbArticle != null) && (parentResourceClassNameId == classNameLocalService.getClassNameId(KBArticleConstants.getClassName()))) {
    KBArticle parentKBArticle=getLatestKBArticle(parentResourcePrimKey,WorkflowConstants.STATUS_ANY);
    List<Long> ancestorResourcePrimaryKeys=parentKBArticle.getAncestorResourcePrimaryKeys();
    if (ancestorResourcePrimaryKeys.contains(kbArticle.getResourcePrimKey())) {
      throw new KBArticleParentException(String.format("Cannot move KBArticle %s inside its descendant " + "KBArticle %s",kbArticle.getTitle(),parentKBArticle.getTitle()));
    }
  }
}
