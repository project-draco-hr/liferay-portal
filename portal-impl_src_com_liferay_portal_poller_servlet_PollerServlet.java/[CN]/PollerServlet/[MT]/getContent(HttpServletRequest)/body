{
  String pollerRequestString=ParamUtil.getString(request,"pollerRequest");
  long userId=PortalUtil.getUserId(request);
  long companyId=PortalUtil.getCompanyId(request);
  JSONObject pollerResponseHeader=PollerRequestHandlerUtil.processRequest(request.getPathInfo(),pollerRequestString);
  if (pollerResponseHeader == null) {
    return StringPool.BLANK;
  }
  SynchronousPollerChannelListener synchronousPollerChannelListener=new SynchronousPollerChannelListener(companyId,pollerResponseHeader,userId);
  String response=synchronousPollerChannelListener.getNotificationBatch(PropsValues.POLLER_REQUEST_TIMEOUT);
  return response;
}
