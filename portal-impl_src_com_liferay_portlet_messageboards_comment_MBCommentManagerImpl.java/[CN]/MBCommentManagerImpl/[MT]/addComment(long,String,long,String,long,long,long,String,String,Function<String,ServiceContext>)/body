{
  MBMessage parentMessage=MBMessageLocalServiceUtil.getMessage(parentMessageId);
  long threadId=parentMessage.getThreadId();
  ServiceContext serviceContext=serviceContextFunction.apply(MBMessage.class.getName());
  MBMessage message=MBMessageServiceUtil.addDiscussionMessage(serviceContext.getScopeGroupId(),className,classPK,permissionClassName,permissionClassPK,permissionOwnerId,threadId,parentMessageId,subject,body,serviceContext);
  return message.getMessageId();
}
