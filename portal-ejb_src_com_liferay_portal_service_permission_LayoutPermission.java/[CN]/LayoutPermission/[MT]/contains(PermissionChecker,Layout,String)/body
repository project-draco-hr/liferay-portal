{
  if (GroupPermission.contains(permissionChecker,layout.getGroupId(),ActionKeys.MANAGE_LAYOUTS)) {
    return true;
  }
  try {
    ResourceLocalServiceUtil.getResource(layout.getCompanyId(),Layout.class.getName(),Resource.TYPE_CLASS,Resource.SCOPE_INDIVIDUAL,layout.getPrimaryKey().toString());
  }
 catch (  NoSuchResourceException nsre) {
    ResourceLocalServiceUtil.addResources(layout.getCompanyId(),layout.getGroupId(),null,Layout.class.getName(),layout.getPrimaryKey().toString(),false,true,true);
  }
  if (permissionChecker.isSignedIn() && !layout.isPrivateLayout() && layout.getGroup().isUser()) {
    permissionChecker.setSignedIn(false);
    boolean hasPermission=permissionChecker.hasPermission(layout.getGroupId(),Layout.class.getName(),layout.getPrimaryKey().toString(),actionId);
    permissionChecker.setSignedIn(true);
    if (hasPermission) {
      return true;
    }
  }
  return permissionChecker.hasPermission(layout.getGroupId(),Layout.class.getName(),layout.getPrimaryKey().toString(),actionId);
}
