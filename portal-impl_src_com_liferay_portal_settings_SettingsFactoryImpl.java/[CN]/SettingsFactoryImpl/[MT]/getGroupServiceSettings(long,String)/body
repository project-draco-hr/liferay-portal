{
  long companyId=getCompanyId(groupId);
  Settings portalPropertiesSettings=getPortalPropertiesSettings();
  Settings configurationBeanSettings=getConfigurationBeanSettings(serviceName,portalPropertiesSettings);
  Settings portalPreferencesSettings=getPortalPreferencesSettings(companyId,configurationBeanSettings);
  Settings companyPortletPreferencesSettings=getCompanyPortletPreferencesSettings(companyId,serviceName,portalPreferencesSettings);
  Settings groupPortletPreferencesSettings=getGroupPortletPreferencesSettings(groupId,serviceName,companyPortletPreferencesSettings);
  return applyFallbackKeys(serviceName,groupPortletPreferencesSettings);
}
