{
  Settings portalPropertiesSettings=getPortalPropertiesSettings();
  Settings portletPropertiesSettings=getPortletPropertiesSettings(serviceName,portalPropertiesSettings);
  long companyId=getGroupCompanyId(groupId);
  Settings portalPreferencesSettings=getPortalPreferencesSettings(companyId,portletPropertiesSettings);
  Settings companyPortletPreferencesSettings=getCompanyPortletPreferencesSettings(companyId,serviceName,portalPreferencesSettings);
  Settings getGroupPortletPreferencesSettings=getGroupPortletPreferencesSettings(groupId,serviceName,companyPortletPreferencesSettings);
  return applyFallbackKeys(serviceName,getGroupPortletPreferencesSettings);
}
