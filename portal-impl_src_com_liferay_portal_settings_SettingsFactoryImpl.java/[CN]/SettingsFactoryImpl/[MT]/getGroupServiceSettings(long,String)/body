{
  Settings portalPropertiesSettings=getPortalPropertiesSettings();
  Settings serviceConfigurationBeanSettings=getServiceConfigurationBeanSettings(serviceName,portalPropertiesSettings);
  long companyId=getGroupCompanyId(groupId);
  Settings portalPreferencesSettings=getPortalPreferencesSettings(companyId,serviceConfigurationBeanSettings);
  Settings companyPortletPreferencesSettings=getCompanyPortletPreferencesSettings(companyId,serviceName,portalPreferencesSettings);
  Settings getGroupPortletPreferencesSettings=getGroupPortletPreferencesSettings(groupId,serviceName,companyPortletPreferencesSettings);
  return applyFallbackKeys(serviceName,getGroupPortletPreferencesSettings);
}
