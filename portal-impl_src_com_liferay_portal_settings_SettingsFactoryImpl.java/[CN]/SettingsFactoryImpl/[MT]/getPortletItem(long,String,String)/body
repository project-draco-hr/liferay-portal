{
  PortletItem portletItem;
  try {
    portletItem=PortletItemLocalServiceUtil.getPortletItem(groupId,name,portletId,PortletPreferences.class.getName());
  }
 catch (  NoSuchPortletItemException nspie) {
    long userId=PrincipalThreadLocal.getUserId();
    portletItem=PortletItemLocalServiceUtil.updatePortletItem(userId,groupId,name,portletId,PortletPreferences.class.getName());
  }
  return portletItem;
}
