{
  List<Long> ancestorFolderIds=new ArrayList<Long>();
  if (folderId != DLFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
    Folder folder=DLAppLocalServiceUtil.getFolder(folderId);
    if (recursive) {
      ancestorFolderIds=folder.getAncestorFolderIds();
      ancestorFolderIds.add(groupId);
    }
    ancestorFolderIds.add(0,folderId);
  }
 else {
    ancestorFolderIds.add(groupId);
  }
  long[] folderIdsArray=ArrayUtil.toArray(ArrayUtil.toLongArray(ancestorFolderIds.toArray()));
  return SubscriptionLocalServiceUtil.isSubscribed(companyId,userId,Folder.class.getName(),folderIdsArray);
}
