{
  String extension=FileUtil.getExtension(tempFileName);
  int pos=tempFileName.lastIndexOf(TEMP_RANDOM_SUFFIX);
  if (pos != -1) {
    tempFileName=tempFileName.substring(0,pos);
    if (Validator.isNotNull(extension)) {
      tempFileName=tempFileName + StringPool.PERIOD + extension;
    }
  }
  while (true) {
    try {
      DLAppLocalServiceUtil.getFileEntry(groupId,folderId,tempFileName);
      StringBundler sb=new StringBundler(5);
      sb.append(FileUtil.stripExtension(tempFileName));
      sb.append(StringPool.DASH);
      sb.append(StringUtil.randomString());
      if (Validator.isNotNull(extension)) {
        sb.append(StringPool.PERIOD);
        sb.append(extension);
      }
      tempFileName=sb.toString();
    }
 catch (    Exception e) {
      break;
    }
  }
  return tempFileName;
}
