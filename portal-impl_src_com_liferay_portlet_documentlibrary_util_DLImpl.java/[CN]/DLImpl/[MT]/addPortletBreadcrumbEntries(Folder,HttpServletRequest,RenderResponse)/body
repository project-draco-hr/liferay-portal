{
  String strutsAction=ParamUtil.getString(request,"strutsAction");
  String mvcRenderCommandName=ParamUtil.getString(request,"mvcRenderCommandName");
  long groupId=ParamUtil.getLong(request,"groupId");
  boolean ignoreRootFolder=ParamUtil.getBoolean(request,"ignoreRootFolder");
  PortletURL portletURL=renderResponse.createRenderURL();
  if (mvcRenderCommandName.equals("/document_library/select_file_entry") || mvcRenderCommandName.equals("/document_library/select_folder") || mvcRenderCommandName.equals("/document_library_display/select_folder")|| mvcRenderCommandName.equals("/image_gallery_display/select_folder")) {
    _addPortletBreadcrumbEntry(request,"mvcRenderCommandName",mvcRenderCommandName,groupId,ignoreRootFolder,portletURL);
  }
 else   if (strutsAction.equals("/item_selector/view")) {
    _addPortletBreadcrumbEntry(request,"strutsAction",strutsAction,groupId,ignoreRootFolder,portletURL);
  }
 else {
    portletURL.setParameter("mvcRenderCommandName","/document_library/view");
  }
  addPortletBreadcrumbEntries(folder,request,portletURL);
}
