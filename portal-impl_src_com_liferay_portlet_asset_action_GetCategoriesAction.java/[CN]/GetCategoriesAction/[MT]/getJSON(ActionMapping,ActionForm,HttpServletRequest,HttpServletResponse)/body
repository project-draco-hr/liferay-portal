{
  JSONArray jsonArray=JSONFactoryUtil.createJSONArray();
  List<AssetCategory> categories=getCategories(request);
  for (  AssetCategory category : categories) {
    JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
    int childCategoriesCount=AssetCategoryLocalServiceUtil.getChildCategoriesCount(category.getCategoryId());
    jsonObject.put("categoryId",category.getCategoryId());
    jsonObject.put("hasChildren",childCategoriesCount > 0);
    jsonObject.put("name",category.getName());
    jsonObject.put("parentCategoryId",category.getParentCategoryId());
    jsonObject.put("title",category.getTitle());
    jsonArray.put(jsonObject);
  }
  return jsonArray.toString();
}
