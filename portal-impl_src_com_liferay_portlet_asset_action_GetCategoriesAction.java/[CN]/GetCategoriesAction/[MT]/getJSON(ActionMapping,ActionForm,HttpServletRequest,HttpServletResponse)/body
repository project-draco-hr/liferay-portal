{
  JSONArray jsonArray=JSONFactoryUtil.createJSONArray();
  List<AssetCategory> categories=getCategories(request);
  for (  AssetCategory category : categories) {
    JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
    List<AssetCategory> childCategories=AssetCategoryServiceUtil.getChildCategories(category.getCategoryId());
    jsonObject.put("categoryId",category.getCategoryId());
    jsonObject.put("hasChildren",!childCategories.isEmpty());
    jsonObject.put("name",category.getName());
    jsonObject.put("numChildren",childCategories.size());
    jsonObject.put("parentCategoryId",category.getParentCategoryId());
    jsonObject.put("titleCurrentValue",category.getTitleCurrentValue());
    jsonArray.put(jsonObject);
  }
  return jsonArray.toString();
}
