{
  long categoryId=ParamUtil.getLong(request,"categoryId");
  long vocabularyId=ParamUtil.getLong(request,"vocabularyId");
  List<AssetCategory> categories=null;
  if (categoryId > 0) {
    categories=AssetCategoryLocalServiceUtil.getChildCategories(categoryId);
  }
 else   if (vocabularyId > 0) {
    long parentCategoryId=ParamUtil.getLong(request,"parentCategoryId",AssetCategoryConstants.DEFAULT_PARENT_CATEGORY_ID);
    categories=AssetCategoryLocalServiceUtil.getVocabularyCategories(parentCategoryId,vocabularyId);
  }
 else {
    categories=Collections.EMPTY_LIST;
  }
  int start=ParamUtil.getInteger(request,"start");
  int limit=ParamUtil.getInteger(request,"limit");
  if (limit > 0) {
    categories=ListUtil.subList(categories,start,start + limit);
  }
  return categories;
}
