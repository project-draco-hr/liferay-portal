{
  Set<Class<? extends Capability>> supportedCapabilities=capabilityMap.keySet();
  if (!supportedCapabilities.containsAll(exportedCapabilities)) {
    throw new IllegalArgumentException(String.format("Exporting capabilities not explicitly supported is not " + "allowed. Repository supports %s, but tried to export %s",capabilityMap.keySet(),exportedCapabilities));
  }
  _repository=repository;
  _capabilityMap=capabilityMap;
  _exportedCapabilities=exportedCapabilities;
}
