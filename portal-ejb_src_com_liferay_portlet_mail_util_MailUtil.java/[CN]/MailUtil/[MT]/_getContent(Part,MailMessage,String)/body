{
  try {
    String contentType=part.getContentType().toLowerCase();
    if (part.getContent() instanceof Multipart) {
      Multipart multipart=(Multipart)part.getContent();
      for (int i=0; i < multipart.getCount(); i++) {
        Part curPart=multipart.getBodyPart(i);
        mailMessage=_getContent(curPart,mailMessage,contentPath + StringPool.PERIOD + i);
      }
    }
 else     if (contentType.startsWith(Constants.TEXT_PLAIN)) {
      mailMessage.appendPlainBody((String)part.getContent());
    }
 else     if (contentType.startsWith(Constants.TEXT_HTML)) {
      mailMessage.appendHtmlBody((String)part.getContent());
    }
 else     if (contentType.startsWith(Constants.MESSAGE_RFC822)) {
    }
 else {
      mailMessage.appendRemoteAttachment(_getRemoteAttachment(part,contentPath + StringPool.PERIOD + -1));
    }
  }
 catch (  IOException ioe) {
    throw new ContentException(ioe);
  }
catch (  MessagingException me) {
    throw new ContentException(me);
  }
  return mailMessage;
}
