{
  try {
    if (p.isMimeType(Constants.TEXT_PLAIN)) {
      String text=(String)p.getContent();
      if (Validator.isHTML(text)) {
        return new Content(text,Constants.TEXT_HTML);
      }
 else {
        return new Content(text,Constants.TEXT_PLAIN);
      }
    }
 else     if (p.isMimeType(Constants.TEXT_HTML)) {
      return new Content((String)p.getContent(),Constants.TEXT_HTML);
    }
 else     if (p.isMimeType("multipart/*")) {
      Multipart mp=(Multipart)p.getContent();
      return getContent(mp.getBodyPart(0));
    }
 else     if (p.isMimeType("message/rfc822")) {
      return getContent((Part)p.getContent());
    }
  }
 catch (  Exception e) {
  }
  try {
    BufferedReader br=new BufferedReader(new InputStreamReader(p.getInputStream(),"US-ASCII"));
    StringBuffer sb=new StringBuffer();
    String s=null;
    while ((s=br.readLine()) != null) {
      sb.append(s);
      sb.append("\n");
    }
    return new Content(sb.toString(),Constants.TEXT_PLAIN);
  }
 catch (  Exception e) {
  }
  return null;
}
