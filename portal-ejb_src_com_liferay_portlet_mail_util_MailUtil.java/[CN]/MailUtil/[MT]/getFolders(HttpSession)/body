{
  List list=new ArrayList();
  IMAPFolder root=null;
  try {
    Store store=_getStore(ses);
    root=(IMAPFolder)store.getDefaultFolder();
    Folder[] folders=root.list();
    _getFolders(list,folders);
  }
 catch (  MessagingException me) {
    throw new FolderException(me);
  }
 finally {
    try {
      if ((root != null) && root.isOpen()) {
        root.close(false);
      }
    }
 catch (    Exception ex) {
    }
  }
  return list;
}
