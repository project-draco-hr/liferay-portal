{
  List list=new ArrayList();
  IMAPFolder root=null;
  try {
    List l=new ArrayList();
    Store store=_getStore(ses);
    root=(IMAPFolder)store.getDefaultFolder();
    Folder[] folders=root.list();
    _getFolders(l,folders);
    for (int i=0; i < DEFAULT_FOLDERS.length; i++) {
      for (ListIterator itr=l.listIterator(); itr.hasNext(); ) {
        MailFolder mf=(MailFolder)itr.next();
        if (DEFAULT_FOLDERS[i].equals(_getResolvedFolderName(mf.getName()))) {
          list.add(mf);
          itr.remove();
          break;
        }
      }
    }
    list.addAll(l);
  }
 catch (  MessagingException me) {
    throw new FolderException(me);
  }
 finally {
    try {
      if ((root != null) && root.isOpen()) {
        root.close(false);
      }
    }
 catch (    Exception ex) {
    }
  }
  return list;
}
