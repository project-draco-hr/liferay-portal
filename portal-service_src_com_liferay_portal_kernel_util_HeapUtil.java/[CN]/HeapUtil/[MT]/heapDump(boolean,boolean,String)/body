{
  int processId=ProcessUtil.getProcessId();
  StringBundler sb=new StringBundler(7);
  sb.append("jmap -dump:");
  if (live) {
    sb.append("live,");
  }
  if (binary) {
    sb.append("format=b,");
  }
  sb.append("file=");
  sb.append(file);
  sb.append(StringPool.SPACE);
  sb.append(processId);
  try {
    Runtime runtime=Runtime.getRuntime();
    runtime.exec(sb.toString());
  }
 catch (  IOException ioe) {
    throw new RuntimeException("Unable to perform heap dump",ioe);
  }
}
