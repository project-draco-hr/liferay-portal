{
  User user=userPersistence.findByPrimaryKey(userId);
  long classNameId=PortalUtil.getClassNameId(className);
  Date now=new Date();
  validate(name);
  long portletItemId=counterLocalService.increment();
  PortletItem portletItem=portletItemPersistence.create(portletItemId);
  portletItem.setGroupId(groupId);
  portletItem.setCompanyId(user.getCompanyId());
  portletItem.setUserId(user.getUserId());
  portletItem.setUserName(user.getFullName());
  portletItem.setCreateDate(now);
  portletItem.setModifiedDate(now);
  portletItem.setName(name);
  portletItem.setPortletId(portletId);
  portletItem.setClassNameId(classNameId);
  portletItemPersistence.update(portletItem);
  return portletItem;
}
