{
  PortletItem portletItem=null;
  try {
    Date now=new Date();
    User user=userPersistence.findByPrimaryKey(userId);
    portletItem=getPortletItem(groupId,portletId,PortletPreferences.class.getName(),name);
    portletItem.setUserId(userId);
    portletItem.setUserName(user.getFullName());
    portletItem.setModifiedDate(now);
    portletItemPersistence.update(portletItem);
  }
 catch (  NoSuchPortletItemException nsste) {
    portletItem=addPortletItem(userId,groupId,portletId,PortletPreferences.class.getName(),name);
  }
  return portletItem;
}
