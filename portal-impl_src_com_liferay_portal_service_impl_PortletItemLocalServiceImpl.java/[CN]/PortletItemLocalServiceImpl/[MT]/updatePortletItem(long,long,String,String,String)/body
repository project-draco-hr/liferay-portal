{
  PortletItem portletItem=null;
  try {
    User user=userPersistence.findByPrimaryKey(userId);
    portletItem=getPortletItem(groupId,name,portletId,PortletPreferences.class.getName());
    portletItem.setUserId(userId);
    portletItem.setUserName(user.getFullName());
    portletItemPersistence.update(portletItem);
  }
 catch (  NoSuchPortletItemException nspie) {
    portletItem=addPortletItem(userId,groupId,name,portletId,PortletPreferences.class.getName());
  }
  return portletItem;
}
