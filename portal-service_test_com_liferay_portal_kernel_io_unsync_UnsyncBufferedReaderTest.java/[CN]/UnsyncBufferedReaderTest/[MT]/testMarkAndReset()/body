{
  UnsyncBufferedReader unsyncBufferedReader=new UnsyncBufferedReader(new StringReader("abcdefghi"),5);
  assertEquals(-1,unsyncBufferedReader.markIndex);
  int markLimit=3;
  unsyncBufferedReader.mark(markLimit);
  assertEquals(markLimit,unsyncBufferedReader.markLimit);
  assertEquals(0,unsyncBufferedReader.markIndex);
  assertEquals('a',unsyncBufferedReader.read());
  assertEquals('b',unsyncBufferedReader.read());
  assertEquals('c',unsyncBufferedReader.read());
  assertEquals(3,unsyncBufferedReader.index);
  unsyncBufferedReader.reset();
  assertEquals(0,unsyncBufferedReader.markIndex);
  assertEquals('a',unsyncBufferedReader.read());
  assertEquals('b',unsyncBufferedReader.read());
  assertEquals('c',unsyncBufferedReader.read());
  assertEquals(3,unsyncBufferedReader.index);
  unsyncBufferedReader=new UnsyncBufferedReader(new StringReader("abcdefghi"),5);
  assertEquals(-1,unsyncBufferedReader.markIndex);
  unsyncBufferedReader.mark(markLimit);
  assertEquals(markLimit,unsyncBufferedReader.markLimit);
  assertEquals(0,unsyncBufferedReader.markIndex);
  assertEquals('a',unsyncBufferedReader.read());
  assertEquals('b',unsyncBufferedReader.read());
  assertEquals('c',unsyncBufferedReader.read());
  assertEquals('d',unsyncBufferedReader.read());
  assertEquals('e',unsyncBufferedReader.read());
  assertEquals('f',unsyncBufferedReader.read());
  assertEquals(1,unsyncBufferedReader.index);
  assertEquals(-1,unsyncBufferedReader.markIndex);
  unsyncBufferedReader=new UnsyncBufferedReader(new StringReader(new String(_BUFFER)),16);
  unsyncBufferedReader.mark(8192);
  assertEquals(0,unsyncBufferedReader.markIndex);
  for (int i=0; i < 4097; i++) {
    assertEquals(i % 16 + 'a',unsyncBufferedReader.read());
  }
  assertEquals(8192,unsyncBufferedReader.buffer.length);
  assertEquals(0,unsyncBufferedReader.markIndex);
  assertEquals(4097,unsyncBufferedReader.index);
  unsyncBufferedReader.mark(8192);
  assertEquals(4097,unsyncBufferedReader.markIndex);
  for (int i=4097; i < 8193; i++) {
    assertEquals(i % 16 + 'a',unsyncBufferedReader.read());
  }
  assertEquals(0,unsyncBufferedReader.markIndex);
}
