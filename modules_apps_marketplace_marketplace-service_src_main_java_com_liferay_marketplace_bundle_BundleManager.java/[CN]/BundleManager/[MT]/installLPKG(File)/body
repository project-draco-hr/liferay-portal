{
  _lpkgVerifier.verify(file);
  if (isRestartRequired(file)) {
    AutoDeploymentContext autoDeploymentContext=new AutoDeploymentContext();
    autoDeploymentContext.setFile(file);
    DeployManagerUtil.deploy(autoDeploymentContext);
    return Collections.emptyList();
  }
 else {
    List<Bundle> bundles=_lpkgDeployer.deploy(_bundleContext,file);
    for (int i=1; i < bundles.size(); i++) {
      Bundle bundle=bundles.get(i);
      bundle.start();
    }
    return bundles;
  }
}
