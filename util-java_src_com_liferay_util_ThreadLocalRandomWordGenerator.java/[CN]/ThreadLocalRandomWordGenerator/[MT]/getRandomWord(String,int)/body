{
  if (key == null) {
    throw new IllegalArgumentException("Key is null");
  }
  Map<String,Integer> keySeedMap=_THREADLOCAL_KEY_SEED_MAP.get();
  Integer lastSeed=keySeedMap.get(key);
  int seed;
  if (lastSeed == null) {
    seed=key.hashCode();
  }
 else {
    seed=lastSeed;
  }
  StringBuilder sb=new StringBuilder(length);
  for (int i=0; i < length; i++) {
    int index=seed > 0 ? seed % 26 : -seed % 26;
    sb.append(_CHARACTERS[index]);
    seed=nextRandom(seed);
  }
  keySeedMap.put(key,seed);
  return sb.toString();
}
