{
  try {
    String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
    if (!cmd.equals(Constants.UPDATE)) {
      return;
    }
    long nodeId=ParamUtil.getLong(actionRequest,"nodeId");
    String title=ParamUtil.getString(actionRequest,"title");
    WikiNode node=WikiNodeServiceUtil.getNode(nodeId);
    String portletResource=ParamUtil.getString(actionRequest,"portletResource");
    PortletPreferences preferences=PortletPreferencesFactoryUtil.getPortletSetup(actionRequest,portletResource);
    preferences.setValue("node-id",String.valueOf(node.getNodeId()));
    preferences.setValue("title",title);
    preferences.store();
    SessionMessages.add(actionRequest,portletConfig.getPortletName() + ".doConfigure");
  }
 catch (  NoSuchNodeException nsne) {
    SessionErrors.add(actionRequest,nsne.getClass().getName());
  }
}
