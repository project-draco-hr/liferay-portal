{
  StagedModel stagedModel=null;
  Attribute classNameAttribute=null;
  String elementName=element.getName();
  if (elementName.equals("reference")) {
    stagedModel=_getReferenceStagedModel(portletDataContext,element);
    Element referenceStagedModelElement=portletDataContext.getImportDataElement(stagedModel);
    if (referenceStagedModelElement != null) {
      classNameAttribute=referenceStagedModelElement.attribute("class-name");
    }
  }
 else {
    String path=element.attributeValue("path");
    stagedModel=(StagedModel)portletDataContext.getZipEntryAsObject(element,path);
    classNameAttribute=element.attribute("class-name");
  }
  if ((classNameAttribute != null) && (stagedModel instanceof TypedModel)) {
    String className=classNameAttribute.getValue();
    if (Validator.isNotNull(className)) {
      long classNameId=PortalUtil.getClassNameId(className);
      TypedModel typedModel=(TypedModel)stagedModel;
      typedModel.setClassNameId(classNameId);
    }
  }
  return stagedModel;
}
