{
  SyncAccount syncAccount=SyncAccountService.fetchSyncAccount(syncAccountId);
  if (!moveFile) {
    SyncFile syncFile=SyncFileService.fetchSyncFile(syncAccount.getFilePathName());
    String originalFileKey=syncFile.getFileKey();
    String targetFileKey=FileUtil.getFileKey(filePath);
    if (!originalFileKey.equals(targetFileKey)) {
      throw new Exception("Target folder is not the moved sync data folder");
    }
  }
  syncAccount.setActive(false);
  SyncAccountService.update(syncAccount);
  if (moveFile) {
    Files.createDirectories(filePath);
    Files.move(Paths.get(syncAccount.getFilePathName()),filePath,StandardCopyOption.REPLACE_EXISTING);
  }
  syncAccount=setFilePathName(syncAccountId,filePath.toString());
  syncAccount.setActive(true);
  syncAccount.setUiEvent(SyncAccount.UI_EVENT_DEFAULT);
  SyncAccountService.update(syncAccount);
}
