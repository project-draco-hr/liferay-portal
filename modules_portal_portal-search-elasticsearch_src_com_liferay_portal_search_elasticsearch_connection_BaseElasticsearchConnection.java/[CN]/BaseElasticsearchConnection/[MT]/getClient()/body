{
  if (_client != null) {
    return _client;
  }
  ImmutableSettings.Builder builder=ImmutableSettings.settingsBuilder();
  loadOptionalDefaultConfigurations(builder);
  String[] additionalConfigurations=elasticsearchConfiguration.additionalConfigurations();
  if (ArrayUtil.isNotEmpty(additionalConfigurations)) {
    StringBundler sb=new StringBundler(additionalConfigurations.length * 2);
    for (    String additionalConfiguration : additionalConfigurations) {
      sb.append(additionalConfiguration);
      sb.append(StringPool.NEW_LINE);
    }
    builder.loadFromSource(sb.toString());
  }
  loadRequiredDefaultConfigurations(builder);
  loadSettingsContributors(builder);
  _client=createClient(builder);
  return _client;
}
