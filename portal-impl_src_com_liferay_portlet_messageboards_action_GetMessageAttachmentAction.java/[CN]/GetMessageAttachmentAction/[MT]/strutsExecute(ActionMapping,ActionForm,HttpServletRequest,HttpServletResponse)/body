{
  try {
    long messageId=ParamUtil.getLong(req,"messageId");
    String fileName=ParamUtil.getString(req,"attachment");
    getFile(messageId,fileName,res);
    return null;
  }
 catch (  NoSuchFileException nsfe) {
    PortalUtil.sendError(HttpServletResponse.SC_NOT_FOUND,nsfe,req,res);
    return null;
  }
catch (  NoSuchMessageException nsme) {
    PortalUtil.sendError(HttpServletResponse.SC_NOT_FOUND,nsme,req,res);
    return null;
  }
catch (  PrincipalException pe) {
    PortalUtil.sendError(HttpServletResponse.SC_FORBIDDEN,pe,req,res);
    return null;
  }
catch (  Exception e) {
    req.setAttribute(PageContext.EXCEPTION,e);
    return mapping.findForward(ActionConstants.COMMON_ERROR);
  }
}
