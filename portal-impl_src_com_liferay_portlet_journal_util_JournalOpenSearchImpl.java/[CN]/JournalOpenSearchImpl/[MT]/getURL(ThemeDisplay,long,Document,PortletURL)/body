{
  Layout layout=themeDisplay.getLayout();
  String articleId=result.get(Field.ENTRY_CLASS_PK);
  String version=result.get("version");
  PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
  List<Long> hitLayoutIds=JournalContentSearchLocalServiceUtil.getLayoutIds(layout.getGroupId(),layout.isPrivateLayout(),articleId);
  for (  Long hitLayoutId : hitLayoutIds) {
    if (LayoutPermissionUtil.contains(permissionChecker,layout.getGroupId(),layout.isPrivateLayout(),hitLayoutId,ActionKeys.VIEW)) {
      Layout hitLayout=LayoutLocalServiceUtil.getLayout(layout.getGroupId(),layout.isPrivateLayout(),hitLayoutId.longValue());
      return PortalUtil.getLayoutURL(hitLayout,themeDisplay);
    }
  }
  String URL=null;
  URL=getLayoutURL(themeDisplay,articleId);
  if (URL != null) {
    return URL;
  }
  StringBuilder sb=new StringBuilder();
  sb.append(themeDisplay.getPathMain());
  sb.append("/journal/view_article_content?groupId=");
  sb.append(groupId);
  sb.append("&articleId=");
  sb.append(articleId);
  sb.append("&version=");
  sb.append(version);
  return sb.toString();
}
