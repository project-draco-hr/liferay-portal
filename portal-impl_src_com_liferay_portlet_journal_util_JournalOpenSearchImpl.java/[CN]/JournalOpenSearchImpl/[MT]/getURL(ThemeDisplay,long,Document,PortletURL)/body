{
  PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
  String articleId=result.get(Field.ENTRY_CLASS_PK);
  String version=result.get("version");
  Layout layout=null;
  layout=getLayoutWithJournalContent(GroupLocalServiceUtil.getGroup(groupId),articleId,permissionChecker,false);
  if (Validator.isNotNull(layout)) {
    return PortalUtil.getLayoutURL(layout,themeDisplay);
  }
  List<Group> usersGroups=themeDisplay.getUser().getMyPlaces();
  for (  Group group : usersGroups) {
    layout=getLayoutWithJournalContent(group,articleId,permissionChecker);
    if (Validator.isNotNull(layout)) {
      return PortalUtil.getLayoutURL(layout,themeDisplay);
    }
  }
  List<Group> publicGroups=GroupLocalServiceUtil.getGroups(QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  for (  Group group : publicGroups) {
    layout=getLayoutWithJournalContent(group,articleId,permissionChecker,false);
    if (Validator.isNotNull(layout)) {
      return PortalUtil.getLayoutURL(layout,themeDisplay);
    }
  }
  StringBuilder sb=new StringBuilder();
  sb.append(themeDisplay.getPathMain());
  sb.append("/journal/view_article_content?groupId=");
  sb.append(groupId);
  sb.append("&articleId=");
  sb.append(articleId);
  sb.append("&version=");
  sb.append(version);
  return sb.toString();
}
