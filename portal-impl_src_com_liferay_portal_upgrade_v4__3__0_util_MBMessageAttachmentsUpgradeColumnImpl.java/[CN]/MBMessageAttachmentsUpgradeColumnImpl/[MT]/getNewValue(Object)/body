{
  Boolean attachments=(Boolean)oldValue;
  if (attachments.booleanValue()) {
    Long oldMessageId=(Long)_messageIdColumn.getOldValue();
    String oldCompanyId=(String)_companyIdColumn.getOldValue();
    Long oldThreadId=(Long)_threadIdColumn.getOldValue();
    Long newMessageId=(Long)_messageIdColumn.getNewValue();
    Long newCompanyId=(Long)_companyIdColumn.getNewValue();
    Long newThreadId=(Long)_threadIdColumn.getNewValue();
    try {
      DLServiceUtil.addDirectory(newCompanyId.longValue(),CompanyConstants.SYSTEM,"messageboards/" + newThreadId);
      DLLocalServiceUtil.move("/" + oldCompanyId + "/documentlibrary/system/messageboards/"+ oldThreadId+ "/"+ oldMessageId,"/" + newCompanyId + "/documentlibrary/0/messageboards/"+ newThreadId+ "/"+ newMessageId);
    }
 catch (    Exception e) {
      _log.error(e.getMessage());
    }
  }
  return attachments;
}
