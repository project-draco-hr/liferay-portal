{
  long userId=portletDataContext.getUserId(stagedAssetLink.getUserUuid());
  StagedAssetLink existingStagedAssetLink=fetchExistingAssetLink(portletDataContext.getScopeGroupId(),stagedAssetLink.getEntry1Uuid(),stagedAssetLink.getEntry2Uuid());
  if (existingStagedAssetLink != null) {
    _assetLinkLocalService.updateLink(userId,existingStagedAssetLink.getEntryId1(),existingStagedAssetLink.getEntryId2(),stagedAssetLink.getType(),stagedAssetLink.getWeight());
    return;
  }
  AssetEntry assetEntry1=_assetEntryLocalService.fetchEntry(portletDataContext.getScopeGroupId(),stagedAssetLink.getEntry1Uuid());
  AssetEntry assetEntry2=_assetEntryLocalService.fetchEntry(portletDataContext.getScopeGroupId(),stagedAssetLink.getEntry2Uuid());
  if ((assetEntry1 == null) || (assetEntry2 == null)) {
    return;
  }
  _assetLinkLocalService.addLink(userId,assetEntry1.getEntryId(),assetEntry2.getEntryId(),stagedAssetLink.getType(),stagedAssetLink.getWeight());
}
