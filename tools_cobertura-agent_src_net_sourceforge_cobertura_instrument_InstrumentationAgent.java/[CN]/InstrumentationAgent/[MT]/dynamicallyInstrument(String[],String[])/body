{
  if ((_instrumentation == null) || _dynamicallyInstrumented) {
    return;
  }
  if (includes == null) {
    includes=_includes;
  }
  if (excludes == null) {
    excludes=_excludes;
  }
  CoberturaClassFileTransformer coberturaClassFileTransformer=new CoberturaClassFileTransformer(includes,excludes,_lockFile);
  _instrumentation.addTransformer(coberturaClassFileTransformer,true);
  Class<?>[] allLoadedClasses=_instrumentation.getAllLoadedClasses();
  List<Class<?>> modifiableClasses=new ArrayList<Class<?>>();
  for (  Class<?> loadedClass : allLoadedClasses) {
    if (_instrumentation.isModifiableClass(loadedClass)) {
      modifiableClasses.add(loadedClass);
    }
  }
  _instrumentation.retransformClasses(modifiableClasses.toArray(new Class<?>[modifiableClasses.size()]));
  _dynamicallyInstrumented=true;
  System.setProperty("junit.code.coverage","true");
}
