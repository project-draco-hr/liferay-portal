{
  Thread thread=Thread.currentThread();
  ClassLoader contextClassLoader=thread.getContextClassLoader();
  ClassLoader pluginClassLoader=(ClassLoader)_servletContext.getAttribute(PluginContextListener.PLUGIN_CLASS_LOADER);
  PACLPolicy paclPolicy=PortalSecurityManagerThreadLocal.getPACLPolicy();
  try {
    if (pluginClassLoader == null) {
      PortalSecurityManagerThreadLocal.setPACLPolicy(null);
      thread.setContextClassLoader(PACLClassLoaderUtil.getPortalClassLoader());
    }
 else {
      PACLPolicy pluginPACLPolicy=PACLPolicyManager.getPACLPolicy(pluginClassLoader);
      PortalSecurityManagerThreadLocal.setPACLPolicy(pluginPACLPolicy);
      thread.setContextClassLoader(pluginClassLoader);
    }
    if (include) {
      _requestDispatcher.include(servletRequest,servletResponse);
    }
 else {
      _requestDispatcher.forward(servletRequest,servletResponse);
    }
  }
  finally {
    thread.setContextClassLoader(contextClassLoader);
    PortalSecurityManagerThreadLocal.setPACLPolicy(paclPolicy);
  }
}
