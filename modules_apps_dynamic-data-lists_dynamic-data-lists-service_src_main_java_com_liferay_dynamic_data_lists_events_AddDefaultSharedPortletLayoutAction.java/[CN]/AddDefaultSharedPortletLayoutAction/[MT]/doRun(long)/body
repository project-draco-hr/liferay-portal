{
  Group group=_groupLocalService.getGroup(companyId,GroupConstants.GUEST);
  Layout layout=_layoutLocalService.fetchLayoutByFriendlyURL(group.getGroupId(),false,"/shared");
  if (!Validator.isNull(layout)) {
    return;
  }
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setAddGuestPermissions(true);
  serviceContext.setAddGroupPermissions(true);
  serviceContext.setAttribute("layout.instanceable.allowed",Boolean.TRUE);
  serviceContext.setScopeGroupId(group.getGroupId());
  long defaultUserId=_userLocalService.getDefaultUserId(companyId);
  serviceContext.setUserId(defaultUserId);
  _layoutLocalService.addLayout(defaultUserId,group.getGroupId(),false,LayoutConstants.DEFAULT_PARENT_LAYOUT_ID,"shared",StringPool.BLANK,StringPool.BLANK,"shared_portlet",true,"/shared",serviceContext);
}
