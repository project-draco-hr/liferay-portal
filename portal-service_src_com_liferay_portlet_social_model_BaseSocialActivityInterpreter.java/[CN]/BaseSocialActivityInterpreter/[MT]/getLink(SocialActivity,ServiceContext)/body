{
  TrashHandler trashHandler=TrashHandlerRegistryUtil.getTrashHandler(activity.getClassName());
  long classPK=activity.getClassPK();
  if ((trashHandler != null) && (trashHandler.isInTrash(classPK) || trashHandler.isInTrashContainer(classPK))) {
    PortletURL portletURL=TrashUtil.getViewContentURL(serviceContext.getRequest(),activity.getClassName(),classPK);
    return portletURL.toString();
  }
  String path=getPath(activity,serviceContext);
  if (Validator.isNull(path)) {
    return null;
  }
  if (!path.startsWith(StringPool.SLASH)) {
    return path;
  }
  StringBundler sb=new StringBundler(3);
  sb.append(serviceContext.getPortalURL());
  sb.append(serviceContext.getPathMain());
  sb.append(path);
  return sb.toString();
}
