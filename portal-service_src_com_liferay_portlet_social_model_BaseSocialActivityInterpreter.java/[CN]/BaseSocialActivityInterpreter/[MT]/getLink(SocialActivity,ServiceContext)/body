{
  String className=activity.getClassName();
  long classPK=activity.getClassPK();
  TrashHandler trashHandler=TrashHandlerRegistryUtil.getTrashHandler(className);
  if ((trashHandler != null) && (trashHandler.isInTrash(classPK) || trashHandler.isInTrashContainer(classPK))) {
    PortletURL portletURL=TrashUtil.getViewContentURL(serviceContext.getRequest(),className,classPK);
    if (portletURL == null) {
      return null;
    }
    return portletURL.toString();
  }
  String path=getPath(activity,serviceContext);
  if (Validator.isNull(path)) {
    return null;
  }
  path=addNoSuchEntryRedirect(path,className,classPK,serviceContext);
  if (!path.startsWith(StringPool.SLASH)) {
    return path;
  }
  return serviceContext.getPortalURL() + serviceContext.getPathMain() + path;
}
