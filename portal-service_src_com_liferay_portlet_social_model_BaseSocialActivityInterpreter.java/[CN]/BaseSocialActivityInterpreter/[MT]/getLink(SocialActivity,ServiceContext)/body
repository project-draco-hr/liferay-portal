{
  TrashHandler trashHandler=TrashHandlerRegistryUtil.getTrashHandler(activity.getClassName());
  long classPK=activity.getClassPK();
  if ((trashHandler != null) && (trashHandler.isInTrash(classPK) || trashHandler.isInTrashContainer(classPK))) {
    PortletURL portletURL=TrashUtil.getViewContentURL(serviceContext.getRequest(),activity.getClassName(),classPK);
    if (portletURL == null) {
      return null;
    }
    return portletURL.toString();
  }
  String path=getPath(activity,serviceContext);
  if (Validator.isNull(path)) {
    return null;
  }
  if (!path.startsWith(StringPool.SLASH)) {
    return path;
  }
  return serviceContext.getPortalURL() + serviceContext.getPathMain() + path;
}
