{
  long formStructureLinkId=counterLocalService.increment();
  FormStructureLink formStructureLink=formStructureLinkPersistence.create(formStructureLinkId);
  formStructureLink.setFormStructureId(formStructureId);
  formStructureLink.setClassName(className);
  formStructureLink.setClassPK(classPK);
  formStructureLinkPersistence.update(formStructureLink,false);
  if (serviceContext.getAddCommunityPermissions() || serviceContext.getAddGuestPermissions()) {
    addFormStructureLinkResources(formStructureLink,serviceContext.getAddCommunityPermissions(),serviceContext.getAddGuestPermissions());
  }
 else {
    addFormStructureLinkResources(formStructureLink,serviceContext.getCommunityPermissions(),serviceContext.getGuestPermissions());
  }
  return formStructureLink;
}
