{
  friendlyURL=getFriendlyURL(friendlyURL);
  if (Validator.isNull(friendlyURL)) {
    friendlyURL=StringPool.SLASH + getFriendlyURL(name);
    if (LayoutImpl.validateFriendlyURL(friendlyURL) != -1) {
      friendlyURL=StringPool.SLASH + classPK;
    }
 else {
      String baseFriendlyURL=friendlyURL;
      for (int i=1; ; i++) {
        try {
          validateFriendlyURL(groupId,companyId,classPK,classNameId,friendlyURL);
          break;
        }
 catch (        GroupFriendlyURLException e) {
          friendlyURL=baseFriendlyURL + i;
        }
      }
    }
  }
  return friendlyURL;
}
