{
  friendlyURL=getFriendlyURL(friendlyURL);
  if (Validator.isNull(friendlyURL)) {
    friendlyURL=StringPool.SLASH + getFriendlyURL(name);
    String baseFriendlyURL=friendlyURL;
    for (int i=1; ; i++) {
      try {
        validateFriendlyURL(groupId,companyId,classPK,classNameId,friendlyURL);
        break;
      }
 catch (      GroupFriendlyURLException gfue) {
        int type=gfue.getType();
        if (type == GroupFriendlyURLException.DUPLICATE) {
          friendlyURL=baseFriendlyURL + i;
        }
 else {
          friendlyURL=StringPool.SLASH + classPK;
          break;
        }
      }
    }
  }
  return friendlyURL;
}
