{
  if (!includeAdministrative) {
    return getUserSitesGroups(userId);
  }
  Set<Group> sites=new HashSet<Group>();
  List<UserGroupRole> userGroupRoles=userGroupRoleLocalService.getUserGroupRoles(userId);
  for (  UserGroupRole userGroupRole : userGroupRoles) {
    Role role=userGroupRole.getRole();
    String roleName=role.getName();
    if (roleName.equals(RoleConstants.SITE_ADMINISTRATOR) || roleName.equals(RoleConstants.SITE_OWNER)) {
      Group group=userGroupRole.getGroup();
      sites.add(group);
    }
  }
  sites.addAll(getUserSitesGroups(userId));
  return new ArrayList<Group>(sites);
}
