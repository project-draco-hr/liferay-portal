{
  Company company=companyPersistence.findByPrimaryKey(companyId);
  if (company.isSystem()) {
    return;
  }
  if (Validator.isNull(friendlyURL)) {
    return;
  }
  int exceptionType=LayoutImpl.validateFriendlyURL(friendlyURL);
  if (exceptionType != -1) {
    throw new GroupFriendlyURLException(exceptionType);
  }
  Group group=groupPersistence.fetchByC_F(companyId,friendlyURL);
  if ((group != null) && (group.getGroupId() != groupId)) {
    GroupFriendlyURLException gfurle=new GroupFriendlyURLException(GroupFriendlyURLException.DUPLICATE);
    gfurle.setDuplicateClassPK(group.getGroupId());
    gfurle.setDuplicateClassName(Group.class.getName());
    throw gfurle;
  }
  String groupIdFriendlyURL=friendlyURL.substring(1);
  if (Validator.isNumber(groupIdFriendlyURL)) {
    long groupClassNameId=classNameLocalService.getClassNameId(Group.class);
    if (((classNameId != groupClassNameId) && !groupIdFriendlyURL.equals(String.valueOf(classPK)) && !PropsValues.USERS_SCREEN_NAME_ALLOW_NUMERIC) || ((classNameId == groupClassNameId) && !groupIdFriendlyURL.equals(String.valueOf(groupId)))) {
      GroupFriendlyURLException gfurle=new GroupFriendlyURLException(GroupFriendlyURLException.POSSIBLE_DUPLICATE);
      gfurle.setKeywordConflict(groupIdFriendlyURL);
      throw gfurle;
    }
  }
  String screenName=friendlyURL.substring(1);
  User user=userPersistence.fetchByC_SN(companyId,screenName);
  if (user != null) {
    long userClassNameId=classNameLocalService.getClassNameId(User.class);
    if ((classNameId == userClassNameId) && (classPK == user.getUserId())) {
    }
 else {
      GroupFriendlyURLException gfurle=new GroupFriendlyURLException(GroupFriendlyURLException.DUPLICATE);
      gfurle.setDuplicateClassPK(user.getUserId());
      gfurle.setDuplicateClassName(User.class.getName());
      throw gfurle;
    }
  }
  if (StringUtil.count(friendlyURL,CharPool.SLASH) > 1) {
    throw new GroupFriendlyURLException(GroupFriendlyURLException.TOO_DEEP);
  }
}
