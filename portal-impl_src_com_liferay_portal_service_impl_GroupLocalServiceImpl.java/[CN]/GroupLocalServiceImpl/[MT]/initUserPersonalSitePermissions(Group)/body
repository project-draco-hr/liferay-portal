{
  Role role=roleLocalService.getRole(group.getCompanyId(),RoleConstants.USER);
  setCompanyPermissions(role,PortletKeys.PORTAL,new String[]{ActionKeys.VIEW_CONTROL_PANEL});
  List<Portlet> portlets=portletLocalService.getPortlets(group.getCompanyId(),false,false);
  for (  Portlet portlet : portlets) {
    setRolePermissions(group,role,portlet.getPortletId(),new String[]{ActionKeys.VIEW});
  }
  setRolePermissions(group,role,Layout.class.getName(),new String[]{ActionKeys.VIEW});
  setRolePermissions(group,role,"com.liferay.portlet.blogs",new String[]{ActionKeys.ADD_ENTRY,ActionKeys.PERMISSIONS,ActionKeys.SUBSCRIBE});
  setRolePermissions(group,role,"com.liferay.portlet.calendar",new String[]{ActionKeys.ADD_EVENT,ActionKeys.EXPORT_ALL_EVENTS,ActionKeys.PERMISSIONS});
  role=roleLocalService.getRole(group.getCompanyId(),RoleConstants.POWER_USER);
  for (  Portlet portlet : portlets) {
    List<String> actions=ResourceActionsUtil.getPortletResourceActions(portlet.getPortletId());
    String controlPanelEntryCategory=GetterUtil.getString(portlet.getControlPanelEntryCategory());
    if (actions.contains(ActionKeys.ACCESS_IN_CONTROL_PANEL) && controlPanelEntryCategory.equals(PortletCategoryKeys.CONTENT)) {
      setRolePermissions(group,role,portlet.getPortletId(),new String[]{ActionKeys.ACCESS_IN_CONTROL_PANEL});
    }
  }
  setRolePermissions(group,role,Group.class.getName(),new String[]{ActionKeys.MANAGE_LAYOUTS});
  setRolePermissions(group,role,"com.liferay.portlet.asset");
  setRolePermissions(group,role,"com.liferay.portlet.blogs");
  setRolePermissions(group,role,"com.liferay.portlet.bookmarks");
  setRolePermissions(group,role,"com.liferay.portlet.calendar");
  setRolePermissions(group,role,"com.liferay.portlet.documentlibrary");
  setRolePermissions(group,role,"com.liferay.portlet.imagegallery");
  setRolePermissions(group,role,"com.liferay.portlet.messageboards");
  setRolePermissions(group,role,"com.liferay.portlet.polls");
  setRolePermissions(group,role,"com.liferay.portlet.wiki");
}
