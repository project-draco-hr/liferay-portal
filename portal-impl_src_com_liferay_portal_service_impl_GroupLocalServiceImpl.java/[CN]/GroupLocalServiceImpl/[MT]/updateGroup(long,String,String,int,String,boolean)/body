{
  Group group=groupPersistence.findByPrimaryKey(groupId);
  long classNameId=group.getClassNameId();
  long classPK=group.getClassPK();
  friendlyURL=getFriendlyURL(friendlyURL);
  if ((classNameId <= 0) || (classPK <= 0)) {
    validateName(group.getGroupId(),group.getCompanyId(),name);
  }
  if (PortalUtil.isSystemGroup(group.getName()) && !group.getName().equals(name)) {
    throw new RequiredGroupException();
  }
  validateFriendlyURL(group.getGroupId(),group.getCompanyId(),group.getClassNameId(),group.getClassPK(),friendlyURL);
  group.setName(name);
  group.setDescription(description);
  group.setType(type);
  group.setFriendlyURL(friendlyURL);
  group.setActive(active);
  groupPersistence.update(group,false);
  return group;
}
