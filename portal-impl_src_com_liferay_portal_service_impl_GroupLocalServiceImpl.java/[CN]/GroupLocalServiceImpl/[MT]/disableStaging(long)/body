{
  Group group=groupPersistence.findByPrimaryKey(groupId);
  int stagingGroupCount=group.getRemoteStagingGroupCount();
  if (stagingGroupCount > 0) {
    stagingGroupCount=stagingGroupCount - 1;
    group.setRemoteStagingGroupCount(stagingGroupCount);
    if (stagingGroupCount == 0) {
      UnicodeProperties typeSettingsProperties=group.getTypeSettingsProperties();
      List<String> keys=new ArrayList<String>();
      for (      String key : typeSettingsProperties.keySet()) {
        if (key.startsWith(StagingConstants.STAGED_PORTLET)) {
          keys.add(key);
        }
      }
      for (      String key : keys) {
        typeSettingsProperties.remove(key);
      }
      group.setTypeSettingsProperties(typeSettingsProperties);
    }
    groupPersistence.update(group);
  }
}
