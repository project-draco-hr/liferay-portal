{
  long defaultUserId=userLocalService.getDefaultUserId(group.getCompanyId());
  String friendlyURL=getFriendlyURL(PropsValues.DEFAULT_CONTROL_PANEL_FRIENDLY_URL);
  Layout layout=layoutLocalService.addLayout(defaultUserId,group.getGroupId(),true,LayoutConstants.DEFAULT_PARENT_LAYOUT_ID,PropsValues.DEFAULT_CONTROL_PANEL_LAYOUT_NAME,StringPool.BLANK,StringPool.BLANK,LayoutConstants.TYPE_PANEL,false,friendlyURL);
  UnicodeProperties props=layout.getTypeSettingsProperties();
  props.setProperty("panelSelectedPortlets",PropsValues.DEFAULT_CONTROL_PANEL_LAYOUT_PORTLETS);
  layoutLocalService.updateLayout(layout.getGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),layout.getTypeSettings());
  boolean updateLayoutSet=false;
  LayoutSet layoutSet=layout.getLayoutSet();
  if (Validator.isNotNull(PropsValues.DEFAULT_CONTROL_PANEL_LAYOUT_REGULAR_THEME_ID)) {
    layoutSet.setThemeId(PropsValues.DEFAULT_CONTROL_PANEL_LAYOUT_REGULAR_THEME_ID);
    updateLayoutSet=true;
  }
  if (updateLayoutSet) {
    LayoutSetLocalServiceUtil.updateLayoutSet(layoutSet);
  }
}
