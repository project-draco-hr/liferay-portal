{
  Group group=groupPersistence.findByPrimaryKey(groupId);
  if (PortalUtil.isSystemGroup(group.getName())) {
    throw new RequiredGroupException();
  }
  try {
    layoutSetLocalService.deleteLayoutSet(groupId,true);
  }
 catch (  NoSuchLayoutSetException nslse) {
  }
  try {
    layoutSetLocalService.deleteLayoutSet(groupId,false);
  }
 catch (  NoSuchLayoutSetException nslse) {
  }
  try {
    Role role=roleLocalService.getGroupRole(group.getCompanyId(),groupId);
    roleLocalService.deleteRole(role.getRoleId());
  }
 catch (  NoSuchRoleException nsre) {
  }
  userGroupRoleLocalService.deleteUserGroupRolesByGroupId(groupId);
  membershipRequestLocalService.deleteMembershipRequests(group.getGroupId());
  blogsEntryLocalService.deleteEntries(groupId);
  blogsStatsUserLocalService.deleteStatsUserByGroupId(groupId);
  bookmarksFolderLocalService.deleteFolders(groupId);
  calEventLocalService.deleteEvents(groupId);
  dlFolderLocalService.deleteFolders(groupId);
  igFolderLocalService.deleteFolders(groupId);
  journalArticleLocalService.deleteArticles(groupId);
  mbBanLocalService.deleteBansByGroupId(groupId);
  mbCategoryLocalService.deleteCategories(groupId);
  mbStatsUserLocalService.deleteStatsUserByGroupId(groupId);
  pollsQuestionLocalService.deleteQuestions(groupId);
  shoppingCartLocalService.deleteGroupCarts(groupId);
  wikiNodeLocalService.deleteNodes(groupId);
  Iterator itr=resourceFinder.findByC_P(group.getCompanyId(),String.valueOf(groupId)).iterator();
  while (itr.hasNext()) {
    Resource resource=(Resource)itr.next();
    resourceLocalService.deleteResource(resource);
  }
  long organizationClassNameId=PortalUtil.getClassNameId(Organization.class.getName());
  if (((group.getClassNameId() <= 0) && (group.getClassPK() <= 0)) || (group.getClassNameId() == organizationClassNameId)) {
    resourceLocalService.deleteResource(group.getCompanyId(),Group.class.getName(),ResourceImpl.SCOPE_INDIVIDUAL,group.getGroupId());
  }
  groupPersistence.remove(groupId);
  PermissionCacheUtil.clearCache();
}
