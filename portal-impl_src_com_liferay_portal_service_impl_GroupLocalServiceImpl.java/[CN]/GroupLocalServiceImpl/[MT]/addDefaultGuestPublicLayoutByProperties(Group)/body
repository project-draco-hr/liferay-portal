{
  long defaultUserId=userLocalService.getDefaultUserId(group.getCompanyId());
  String friendlyURL=getFriendlyURL(PropsValues.DEFAULT_GUEST_PUBLIC_LAYOUT_FRIENDLY_URL);
  ServiceContext serviceContext=new ServiceContext();
  Layout layout=layoutLocalService.addLayout(defaultUserId,group.getGroupId(),false,LayoutConstants.DEFAULT_PARENT_LAYOUT_ID,PropsValues.DEFAULT_GUEST_PUBLIC_LAYOUT_NAME,StringPool.BLANK,StringPool.BLANK,LayoutConstants.TYPE_PORTLET,false,friendlyURL,serviceContext);
  LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
  layoutTypePortlet.setLayoutTemplateId(0,PropsValues.DEFAULT_GUEST_PUBLIC_LAYOUT_TEMPLATE_ID,false);
  for (int i=0; i < 10; i++) {
    String columnId="column-" + i;
    String portletIds=PropsUtil.get(PropsKeys.DEFAULT_GUEST_PUBLIC_LAYOUT_COLUMN + i);
    layoutTypePortlet.addPortletIds(0,StringUtil.split(portletIds),columnId,false);
  }
  layoutLocalService.updateLayout(layout.getGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),layout.getTypeSettings());
  boolean updateLayoutSet=false;
  LayoutSet layoutSet=layout.getLayoutSet();
  if (Validator.isNotNull(PropsValues.DEFAULT_GUEST_PUBLIC_LAYOUT_REGULAR_THEME_ID)) {
    layoutSet.setThemeId(PropsValues.DEFAULT_GUEST_PUBLIC_LAYOUT_REGULAR_THEME_ID);
    updateLayoutSet=true;
  }
  if (Validator.isNotNull(PropsValues.DEFAULT_GUEST_PUBLIC_LAYOUT_REGULAR_COLOR_SCHEME_ID)) {
    layoutSet.setColorSchemeId(PropsValues.DEFAULT_GUEST_PUBLIC_LAYOUT_REGULAR_COLOR_SCHEME_ID);
    updateLayoutSet=true;
  }
  if (Validator.isNotNull(PropsValues.DEFAULT_GUEST_PUBLIC_LAYOUT_WAP_THEME_ID)) {
    layoutSet.setWapThemeId(PropsValues.DEFAULT_GUEST_PUBLIC_LAYOUT_WAP_THEME_ID);
    updateLayoutSet=true;
  }
  if (Validator.isNotNull(PropsValues.DEFAULT_GUEST_PUBLIC_LAYOUT_WAP_COLOR_SCHEME_ID)) {
    layoutSet.setWapColorSchemeId(PropsValues.DEFAULT_GUEST_PUBLIC_LAYOUT_WAP_COLOR_SCHEME_ID);
    updateLayoutSet=true;
  }
  if (updateLayoutSet) {
    layoutSetLocalService.updateLayoutSet(layoutSet);
  }
}
