{
  long defaultUserId=UserLocalServiceUtil.getDefaultUserId(group.getCompanyId());
  String name=PropsUtil.get(PropsUtil.DEFAULT_GUEST_LAYOUT_NAME);
  String friendlyURL=StringPool.BLANK;
  if (Validator.isNotNull(group.getFriendlyURL())) {
    friendlyURL=PropsUtil.get(PropsUtil.DEFAULT_GUEST_FRIENDLY_URL);
  }
  Layout layout=LayoutLocalServiceUtil.addLayout(defaultUserId,group.getGroupId(),false,LayoutImpl.DEFAULT_PARENT_LAYOUT_ID,name,StringPool.BLANK,StringPool.BLANK,LayoutImpl.TYPE_PORTLET,false,friendlyURL);
  LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
  String layoutTemplateId=PropsUtil.get(PropsUtil.DEFAULT_GUEST_LAYOUT_TEMPLATE_ID);
  layoutTypePortlet.setLayoutTemplateId(0,layoutTemplateId,false);
  for (int i=0; i < 10; i++) {
    String columnId="column-" + i;
    String portletIds=PropsUtil.get(PropsUtil.DEFAULT_GUEST_LAYOUT_COLUMN + i);
    layoutTypePortlet.addPortletIds(0,StringUtil.split(portletIds),columnId,false);
  }
  LayoutLocalServiceUtil.updateLayout(layout.getGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),layout.getTypeSettings());
}
