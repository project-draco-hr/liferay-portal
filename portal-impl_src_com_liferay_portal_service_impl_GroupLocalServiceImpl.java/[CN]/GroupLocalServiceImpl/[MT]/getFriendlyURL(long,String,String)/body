{
  friendlyURL=getFriendlyURL(friendlyURL);
  if (Validator.isNull(friendlyURL)) {
    friendlyURL=StringPool.SLASH + getFriendlyURL(name);
  }
  String screenName=friendlyURL.substring(1);
  try {
    groupPersistence.findByC_F(companyId,friendlyURL);
  }
 catch (  NoSuchGroupException nsge) {
    try {
      userPersistence.findByC_SN(companyId,screenName);
    }
 catch (    NoSuchUserException nsue) {
      return friendlyURL;
    }
  }
  for (int i=1; ; i++) {
    String tempFriendlyURL=friendlyURL + StringPool.PERIOD + i;
    try {
      groupPersistence.findByC_F(companyId,tempFriendlyURL);
    }
 catch (    NoSuchGroupException nsge) {
      String tempScreenName=screenName + StringPool.PERIOD + i;
      try {
        userPersistence.findByC_SN(companyId,tempScreenName);
      }
 catch (      NoSuchUserException nsue) {
        friendlyURL=tempFriendlyURL;
        break;
      }
    }
  }
  return friendlyURL;
}
