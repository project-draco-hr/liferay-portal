{
  long defaultUserId=userLocalService.getDefaultUserId(companyId);
  String[] systemGroups=PortalUtil.getSystemGroups();
  for (int i=0; i < systemGroups.length; i++) {
    Group group=null;
    try {
      group=groupFinder.findByC_N(companyId,systemGroups[i]);
    }
 catch (    NoSuchGroupException nsge) {
      String friendlyURL=null;
      int communityType=GroupImpl.TYPE_COMMUNITY_OPEN;
      if (systemGroups[i].equals(GroupImpl.GUEST)) {
        friendlyURL="/guest";
      }
 else       if (systemGroups[i].equals(GroupImpl.CONTROL_PANEL)) {
        friendlyURL="/control-panel";
        communityType=GroupImpl.TYPE_COMMUNITY_PRIVATE;
      }
      group=addGroup(defaultUserId,null,0,systemGroups[i],null,communityType,friendlyURL,true);
    }
    if (group.getName().equals(GroupImpl.GUEST)) {
      LayoutSet layoutSet=layoutSetLocalService.getLayoutSet(group.getGroupId(),false);
      if (layoutSet.getPageCount() == 0) {
        addDefaultGuestPublicLayouts(group);
      }
    }
    if (group.getName().equals(GroupImpl.CONTROL_PANEL)) {
      LayoutSet layoutSet=layoutSetLocalService.getLayoutSet(group.getGroupId(),true);
      if (layoutSet.getPageCount() == 0) {
        addDefaultControlPanelLayouts(group);
      }
    }
  }
}
