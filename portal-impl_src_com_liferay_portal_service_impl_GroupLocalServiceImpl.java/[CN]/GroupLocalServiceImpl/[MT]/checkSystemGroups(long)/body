{
  long defaultUserId=userLocalService.getDefaultUserId(companyId);
  String[] systemGroups=PortalUtil.getSystemGroups();
  for (int i=0; i < systemGroups.length; i++) {
    Group group=null;
    try {
      group=groupFinder.findByC_N(companyId,systemGroups[i]);
    }
 catch (    NoSuchGroupException nsge) {
      int type=GroupConstants.TYPE_COMMUNITY_OPEN;
      String friendlyURL=null;
      if (systemGroups[i].equals(GroupConstants.CONTROL_PANEL)) {
        type=GroupConstants.TYPE_COMMUNITY_PRIVATE;
        friendlyURL="/control_panel";
      }
 else       if (systemGroups[i].equals(GroupConstants.GUEST)) {
        friendlyURL="/guest";
      }
      group=addGroup(defaultUserId,null,0,systemGroups[i],null,type,friendlyURL,true);
    }
    if (group.getName().equals(GroupConstants.CONTROL_PANEL)) {
      LayoutSet layoutSet=layoutSetLocalService.getLayoutSet(group.getGroupId(),true);
      if (layoutSet.getPageCount() == 0) {
        addControlPanelLayouts(group);
      }
    }
    if (group.getName().equals(GroupConstants.GUEST)) {
      LayoutSet layoutSet=layoutSetLocalService.getLayoutSet(group.getGroupId(),false);
      if (layoutSet.getPageCount() == 0) {
        addDefaultGuestPublicLayouts(group);
      }
    }
  }
}
