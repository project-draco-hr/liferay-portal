{
  User user=UserLocalServiceUtil.fetchUser(auditedModel.getUserId());
  if (user != null) {
    return user.getUserId();
  }
  User defaultUser=UserLocalServiceUtil.getDefaultUser(auditedModel.getCompanyId());
  if (_log.isWarnEnabled()) {
    StringBundler sb=new StringBundler(9);
    sb.append("Using default user (userId=");
    sb.append(defaultUser.getUserId());
    sb.append(", companyId=");
    sb.append(defaultUser.getCompanyId());
    sb.append(") for model ");
    sb.append(auditedModel.getModelClassName());
    sb.append(" with primary key ");
    sb.append(auditedModel.getPrimaryKeyObj());
    sb.append(StringPool.PERIOD);
    _log.warn(sb.toString());
  }
  return defaultUser.getUserId();
}
