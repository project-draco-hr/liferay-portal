{
  if (!hasFileUploadFields(structure)) {
    return;
  }
  List<DDMStructureLink> structureLinks=DDMStructureLinkLocalServiceUtil.getStructureLinks(structure.getStructureId(),QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  for (  DDMStructureLink structureLink : structureLinks) {
    updateFileUploadReferences(structureLink);
  }
  updateStructure(structure,updateXSD(structure.getXsd()));
  List<DDMTemplate> templates=DDMTemplateLocalServiceUtil.getTemplates(structure.getGroupId(),_ddmStructureClassNameId,structure.getStructureId(),DDMTemplateConstants.TEMPLATE_TYPE_FORM);
  for (  DDMTemplate template : templates) {
    updateTemplate(template,updateXSD(template.getScript()));
  }
}
