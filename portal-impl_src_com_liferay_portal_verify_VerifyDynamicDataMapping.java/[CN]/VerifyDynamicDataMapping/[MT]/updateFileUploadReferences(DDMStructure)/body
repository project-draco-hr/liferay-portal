{
  if (!hasFileUploadFields(structure)) {
    return;
  }
  List<DDMStructureLink> structureLinks=DDMStructureLinkLocalServiceUtil.getStructureLinks(structure.getStructureId(),QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  for (  DDMStructureLink structureLink : structureLinks) {
    updateFileUploadReferences(structureLink);
  }
  String xsd=updateFileUploadReferences(structure.getXsd());
  updateStructure(structure,xsd);
  List<DDMTemplate> templates=getFormTemplates(structure);
  for (  DDMTemplate template : templates) {
    String script=updateFileUploadReferences(template.getScript());
    updateTemplate(template,script);
  }
}
