{
  String contentType=MimeTypesUtil.getContentType(fileName);
  String title=fileName;
  int index=title.indexOf(CharPool.PERIOD);
  if (index > 0) {
    title=title.substring(0,index);
  }
  File file=DLStoreUtil.getFile(companyId,CompanyConstants.SYSTEM,filePath);
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setAddGroupPermissions(true);
  serviceContext.setAddGuestPermissions(true);
  FileEntry fileEntry=DLAppLocalServiceUtil.addFileEntry(userId,groupId,folderId,fileName,contentType,title,StringPool.BLANK,StringPool.BLANK,file,serviceContext);
  updateFileEntryStatus(fileEntry,status,serviceContext);
  return fileEntry;
}
