{
  String defaultLanguageId=structure.getDefaultLanguageId();
  XPath xPathSelector=SAXReaderUtil.createXPath("//dynamic-element");
  Document document=structure.getDocument();
  List<Node> nodes=xPathSelector.selectNodes(document);
  boolean isModified=false;
  for (  Node node : nodes) {
    Element dynamicElementElement=(Element)node;
    boolean hasDefaultMetadataElement=hasDefaultMetadataElement(dynamicElementElement,defaultLanguageId);
    if (hasDefaultMetadataElement) {
      continue;
    }
    createDefaultMetadataElement(dynamicElementElement,defaultLanguageId);
    isModified=true;
  }
  if (isModified) {
    String xsd=DDMXMLUtil.formatXML(document);
    structure.setXsd(xsd);
    DDMStructureLocalServiceUtil.updateDDMStructure(structure);
  }
}
