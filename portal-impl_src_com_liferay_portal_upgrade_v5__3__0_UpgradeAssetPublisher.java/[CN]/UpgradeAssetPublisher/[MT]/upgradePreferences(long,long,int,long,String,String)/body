{
  PortletPreferencesImpl preferences=PortletPreferencesSerializer.fromXML(companyId,ownerId,ownerType,plid,portletId,xml);
  long classNameId=GetterUtil.getLong(preferences.getValue("class-name-id",null));
  preferences.reset("class-name-id");
  if (classNameId != 0) {
    preferences.setValues("class-name-ids",new String[]{String.valueOf(classNameId)});
  }
  boolean andOperator=GetterUtil.getBoolean(preferences.getValue("and-operator",null));
  preferences.reset("and-operator");
  String[] assetTagNames=preferences.getValues("entries",null);
  String[] notAssetTagNames=preferences.getValues("not-entries",null);
  int i=0;
  if (assetTagNames != null) {
    preferences.reset("entries");
    preferences.setValue("queryContains" + i,Boolean.TRUE.toString());
    preferences.setValue("queryAndOperator" + i,String.valueOf(andOperator));
    preferences.setValue("queryName" + i,"assetTags");
    preferences.setValues("queryValues" + i,assetTagNames);
    i++;
  }
  if (notAssetTagNames != null) {
    preferences.reset("not-entries");
    preferences.setValue("queryContains" + i,Boolean.FALSE.toString());
    preferences.setValue("queryAndOperator" + i,String.valueOf(andOperator));
    preferences.setValue("queryName" + i,"assetTags");
    preferences.setValues("queryValues" + i,notAssetTagNames);
    i++;
  }
  return PortletPreferencesSerializer.toXML(preferences);
}
