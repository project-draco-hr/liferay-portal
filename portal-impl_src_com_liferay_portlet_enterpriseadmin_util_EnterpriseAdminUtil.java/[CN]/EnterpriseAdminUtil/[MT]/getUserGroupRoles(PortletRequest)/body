{
  List<UserGroupRole> userGroupRoles=new UniqueList<UserGroupRole>();
  long[] groupRolesRoleIds=StringUtil.split(ParamUtil.getString(portletRequest,"groupRolesRoleIds"),0L);
  long[] groupRolesGroupIds=StringUtil.split(ParamUtil.getString(portletRequest,"groupRolesGroupIds"),0L);
  if (groupRolesGroupIds.length != groupRolesRoleIds.length) {
    return userGroupRoles;
  }
  User user=PortalUtil.getSelectedUser(portletRequest);
  for (int i=0; i < groupRolesGroupIds.length; i++) {
    if ((groupRolesGroupIds[i] == 0) || (groupRolesRoleIds[i] == 0)) {
      continue;
    }
    UserGroupRole userGroupRole=new UserGroupRoleImpl();
    userGroupRole.setUserId(user.getUserId());
    userGroupRole.setGroupId(groupRolesGroupIds[i]);
    userGroupRole.setRoleId(groupRolesRoleIds[i]);
    userGroupRoles.add(userGroupRole);
  }
  return userGroupRoles;
}
