{
  List<Address> addresses=new ArrayList<Address>();
  int[] addressIndexes=StringUtil.split(ParamUtil.getString(actionRequest,"addressIndexes"),0);
  int addressPrimary=ParamUtil.getInteger(actionRequest,"addressPrimary");
  for (  int addressIndex : addressIndexes) {
    long addressId=ParamUtil.getLong(actionRequest,"addressId" + addressIndex);
    String street1=ParamUtil.getString(actionRequest,"addressStreet1" + addressIndex);
    String street2=ParamUtil.getString(actionRequest,"addressStreet2" + addressIndex);
    String street3=ParamUtil.getString(actionRequest,"addressStreet3" + addressIndex);
    String city=ParamUtil.getString(actionRequest,"addressCity" + addressIndex);
    String zip=ParamUtil.getString(actionRequest,"addressZip" + addressIndex);
    if (Validator.isNull(street1) && Validator.isNull(street2) && Validator.isNull(street3)&& Validator.isNull(city)&& Validator.isNull(zip)) {
      continue;
    }
    long regionId=ParamUtil.getLong(actionRequest,"addressRegionId" + addressIndex);
    long countryId=ParamUtil.getLong(actionRequest,"addressCountryId" + addressIndex);
    int typeId=ParamUtil.getInteger(actionRequest,"addressTypeId" + addressIndex);
    boolean mailing=ParamUtil.getBoolean(actionRequest,"addressMailing" + addressIndex);
    boolean primary=false;
    if (addressIndex == addressPrimary) {
      primary=true;
    }
    Address address=new AddressImpl();
    address.setAddressId(addressId);
    address.setStreet1(street1);
    address.setStreet2(street2);
    address.setStreet3(street3);
    address.setCity(city);
    address.setZip(zip);
    address.setRegionId(regionId);
    address.setCountryId(countryId);
    address.setTypeId(typeId);
    address.setMailing(mailing);
    address.setPrimary(primary);
    addresses.add(address);
  }
  return addresses;
}
