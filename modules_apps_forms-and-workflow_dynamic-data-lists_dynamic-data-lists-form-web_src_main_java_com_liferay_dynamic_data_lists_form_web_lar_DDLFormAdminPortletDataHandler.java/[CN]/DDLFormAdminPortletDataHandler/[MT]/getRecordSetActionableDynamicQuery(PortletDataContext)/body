{
  ActionableDynamicQuery actionableDynamicQuery=_ddlRecordSetLocalService.getExportActionableDynamicQuery(portletDataContext);
  final ActionableDynamicQuery.AddCriteriaMethod addCriteriaMethod=actionableDynamicQuery.getAddCriteriaMethod();
  actionableDynamicQuery.setAddCriteriaMethod(new ActionableDynamicQuery.AddCriteriaMethod(){
    @Override public void addCriteria(    DynamicQuery dynamicQuery){
      addCriteriaMethod.addCriteria(dynamicQuery);
      Property scopeProperty=PropertyFactoryUtil.forName("scope");
      dynamicQuery.add(scopeProperty.eq(DDLRecordSetConstants.SCOPE_FORMS));
    }
  }
);
  actionableDynamicQuery.setPerformActionMethod(new ActionableDynamicQuery.PerformActionMethod<DDLRecordSet>(){
    @Override public void performAction(    DDLRecordSet ddlRecordSet) throws PortalException {
      StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,ddlRecordSet);
      DDMStructure ddmStructure=ddlRecordSet.getDDMStructure();
      StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,ddmStructure);
      for (      DDMTemplate ddmTemplate : ddmStructure.getTemplates()) {
        StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,ddmTemplate);
      }
    }
  }
);
  return actionableDynamicQuery;
}
