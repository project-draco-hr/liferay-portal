{
  ActionableDynamicQuery actionableDynamicQuery=_dlFileEntryLocalService.getActionableDynamicQuery();
  actionableDynamicQuery.setPerformActionMethod(new ActionableDynamicQuery.PerformActionMethod(){
    @Override public void performAction(    Object object){
      DLFileEntry dlFileEntry=(DLFileEntry)object;
      GoogleDocsMetadataHelper googleDocsMetadataHelper=new GoogleDocsMetadataHelper(dlFileEntry,_dlFileEntryMetadataLocalService,_storageEngine);
      LegacyGoogleDocsMetadataHelper legacyGoogleDocsMetadataHelper=new LegacyGoogleDocsMetadataHelper(dlFileEntry,_storageEngine);
      googleDocsMetadataHelper.setFieldValue(GoogleDocsConstants.DDM_FIELD_NAME_EMBEDDABLE_URL,legacyGoogleDocsMetadataHelper.getFieldValue(LegacyGoogleDocsConstants.DDM_FIELD_NAME_VIEW_URL));
      googleDocsMetadataHelper.setFieldValue(GoogleDocsConstants.DDM_FIELD_NAME_ICON_URL,legacyGoogleDocsMetadataHelper.getFieldValue(LegacyGoogleDocsConstants.DDM_FIELD_NAME_ICON_URL));
      googleDocsMetadataHelper.setFieldValue(GoogleDocsConstants.DDM_FIELD_NAME_ID,legacyGoogleDocsMetadataHelper.getFieldValue(LegacyGoogleDocsConstants.DDM_FIELD_NAME_ID));
      googleDocsMetadataHelper.setFieldValue(GoogleDocsConstants.DDM_FIELD_NAME_NAME,legacyGoogleDocsMetadataHelper.getFieldValue(LegacyGoogleDocsConstants.DDM_FIELD_NAME_NAME));
      googleDocsMetadataHelper.setFieldValue(GoogleDocsConstants.DDM_FIELD_NAME_URL,legacyGoogleDocsMetadataHelper.getFieldValue(LegacyGoogleDocsConstants.DDM_FIELD_NAME_EDIT_URL));
      googleDocsMetadataHelper.update();
      legacyGoogleDocsMetadataHelper.delete();
    }
  }
);
  actionableDynamicQuery.performActions();
}
