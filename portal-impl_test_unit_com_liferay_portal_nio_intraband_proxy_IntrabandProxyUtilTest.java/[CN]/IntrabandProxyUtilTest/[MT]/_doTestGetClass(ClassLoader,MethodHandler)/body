{
  FutureTask<Class<?>> futureTask=new FutureTask<Class<?>>(new Callable<Class<?>>(){
    @Override public Class<?> call() throws Exception {
      return (Class<?>)methodHandler.invoke();
    }
  }
);
  Thread thread=new Thread(futureTask);
  Class<?> stubClass=null;
synchronized (classLoader) {
    thread.start();
    while (thread.getState() != Thread.State.BLOCKED)     ;
    stubClass=(Class<?>)methodHandler.invoke();
  }
  Assert.assertSame(stubClass,futureTask.get());
  Assert.assertSame(stubClass,methodHandler.invoke());
}
