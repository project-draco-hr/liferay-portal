{
  try {
    boolean deleteDirectory=false;
    Path parentPath=path.getParent();
    if ((parentPath != null) && Files.notExists(parentPath)) {
      Files.createDirectories(parentPath);
      deleteDirectory=true;
    }
    Files.createFile(path);
    File file=path.toFile();
    file.deleteOnExit();
    if (deleteDirectory) {
      file=parentPath.toFile();
      file.deleteOnExit();
    }
  }
 catch (  IOException ioe) {
    ReflectionUtil.throwException(ioe);
  }
}
