{
  String propertyKey=StringBundler.class.getName() + ".threadlocal.buffer.limit";
  String propertyValue=System.getProperty(propertyKey);
  System.clearProperty(propertyKey);
  try {
    Assert.assertEquals(Integer.MAX_VALUE,ReflectionTestUtil.getFieldValue(StringBundler.class,"_THREAD_LOCAL_BUFFER_LIMIT"));
    Assert.assertNull(ReflectionTestUtil.getFieldValue(StringBundler.class,"_stringBuilderThreadLocal"));
    StringBundler sb=new StringBundler();
    sb.append("1");
    sb.append("2");
    sb.append("3");
    sb.append("4");
    Assert.assertEquals("1234",sb.toString());
    Assert.assertNull(ReflectionTestUtil.getFieldValue(StringBundler.class,"_stringBuilderThreadLocal"));
  }
  finally {
    if (propertyValue != null) {
      System.setProperty(propertyKey,propertyValue);
    }
  }
}
