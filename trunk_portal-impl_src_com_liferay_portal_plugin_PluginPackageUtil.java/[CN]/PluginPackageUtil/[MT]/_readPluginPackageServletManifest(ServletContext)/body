{
  Attributes attributes=null;
  String servletContextName=servletContext.getServletContextName();
  InputStream inputStream=servletContext.getResourceAsStream("/META-INF/MANIFEST.MF");
  if (inputStream != null) {
    Manifest manifest=new Manifest(inputStream);
    attributes=manifest.getMainAttributes();
  }
 else {
    attributes=new Attributes();
  }
  String artifactGroupId=attributes.getValue("Implementation-Vendor-Id");
  if (Validator.isNull(artifactGroupId)) {
    artifactGroupId=attributes.getValue("Implementation-Vendor");
  }
  if (Validator.isNull(artifactGroupId)) {
    artifactGroupId=GetterUtil.getString(attributes.getValue("Bundle-Vendor"),servletContextName);
  }
  String artifactId=attributes.getValue("Implementation-Title");
  if (Validator.isNull(artifactId)) {
    artifactId=GetterUtil.getString(attributes.getValue("Bundle-Name"),servletContextName);
  }
  String version=attributes.getValue("Implementation-Version");
  if (Validator.isNull(version)) {
    version=GetterUtil.getString(attributes.getValue("Bundle-Version"),Version.UNKNOWN);
  }
  if (version.equals(Version.UNKNOWN) && _log.isWarnEnabled()) {
    _log.warn("Plugin package on context " + servletContextName + " cannot be tracked because this WAR does not contain a "+ "liferay-plugin-package.xml file");
  }
  PluginPackage pluginPackage=new PluginPackageImpl(artifactGroupId + StringPool.SLASH + artifactId+ StringPool.SLASH+ version+ StringPool.SLASH+ "war");
  pluginPackage.setName(artifactId);
  String shortDescription=attributes.getValue("Bundle-Description");
  if (Validator.isNotNull(shortDescription)) {
    pluginPackage.setShortDescription(shortDescription);
  }
  String pageURL=attributes.getValue("Bundle-DocURL");
  if (Validator.isNotNull(pageURL)) {
    pluginPackage.setPageURL(pageURL);
  }
  return pluginPackage;
}
