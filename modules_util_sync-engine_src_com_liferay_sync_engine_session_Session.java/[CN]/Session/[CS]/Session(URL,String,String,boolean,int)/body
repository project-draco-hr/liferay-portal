{
  _executorService=Executors.newFixedThreadPool(maxConnections);
  HttpClientBuilder httpClientBuilder=HttpClientBuilder.create();
  httpClientBuilder.disableAutomaticRetries();
  CredentialsProvider credentialsProvider=new BasicCredentialsProvider();
  credentialsProvider.setCredentials(new AuthScope(url.getHost(),url.getPort()),new UsernamePasswordCredentials(login,password));
  httpClientBuilder.setDefaultCredentialsProvider(credentialsProvider);
  RequestConfig.Builder builder=RequestConfig.custom();
  builder.setConnectTimeout(PropsValues.SYNC_HTTP_CONNECTION_TIMEOUT);
  builder.setSocketTimeout(PropsValues.SYNC_HTTP_SOCKET_TIMEOUT);
  httpClientBuilder.setDefaultRequestConfig(builder.build());
  httpClientBuilder.setMaxConnPerRoute(maxConnections);
  httpClientBuilder.setMaxConnTotal(maxConnections);
  httpClientBuilder.setRoutePlanner(getHttpRoutePlanner());
  if (trustSelfSigned) {
    try {
      SSLContextBuilder sslContextBuilder=new SSLContextBuilder();
      sslContextBuilder.loadTrustMaterial(null,new TrustSelfSignedStrategy());
      SSLConnectionSocketFactory sslConnectionSocketFactory=new SSLConnectionSocketFactory(sslContextBuilder.build(),SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);
      httpClientBuilder.setSSLSocketFactory(sslConnectionSocketFactory);
    }
 catch (    Exception e) {
      _logger.error(e.getMessage(),e);
    }
  }
  _httpClient=httpClientBuilder.build();
  _httpHost=new HttpHost(url.getHost(),url.getPort(),url.getProtocol());
  _token=null;
  Runnable runnable=new Runnable(){
    @Override public void run(){
      _downloadRate=_downloadedBytes.get();
      _downloadedBytes.set(0);
      _uploadRate=_uploadedBytes.get();
      _uploadedBytes.set(0);
    }
  }
;
  _scheduledExecutorService.scheduleAtFixedRate(runnable,0,1000,TimeUnit.MILLISECONDS);
}
