{
  long entryId=_getEntryId(folderId,fileEntryId,fileVersionId);
  com.liferay.portal.kernel.repository.Repository repositoryImpl=_repositoryEntryMap.get(entryId);
  if (repositoryImpl == null) {
    repositoryImpl=new LiferayRepository(folderId,fileEntryId,fileVersionId);
    if (repositoryImpl.getRepositoryId() == 0) {
      repositoryImpl=null;
    }
    if (repositoryImpl == null) {
      repositoryImpl=_createRepositoryImpl(entryId);
    }
 else {
      checkRepository(repositoryImpl.getRepositoryId());
    }
    _repositoryEntryMap.put(entryId,repositoryImpl);
  }
  return repositoryImpl;
}
