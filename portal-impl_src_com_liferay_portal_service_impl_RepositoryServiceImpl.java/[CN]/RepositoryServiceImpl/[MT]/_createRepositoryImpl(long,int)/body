{
  Properties repositoryImpls=PropsUtil.getProperties(PropsKeys.DL_REPOSITORY_IMPL,true);
  String repositoryImpl=repositoryImpls.getProperty(Long.toString(type));
  try {
    BaseRepositoryImpl baseRepository=(BaseRepositoryImpl)Class.forName(repositoryImpl).newInstance();
    UnicodeProperties typeSettingsProperties=getRepository(repositoryId).getTypeSettingsProperties();
    baseRepository.initRepository(repositoryId,typeSettingsProperties,repositoryEntryPersistence,counterLocalService);
    return baseRepository;
  }
 catch (  Exception e) {
    throw new RepositoryException("There is no valid repository class for type " + type,e);
  }
}
