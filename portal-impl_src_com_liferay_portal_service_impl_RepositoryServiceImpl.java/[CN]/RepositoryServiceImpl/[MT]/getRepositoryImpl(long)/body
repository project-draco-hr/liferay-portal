{
  com.liferay.portal.kernel.repository.Repository repositoryImpl=_repositoryMap.get(repositoryId);
  if (repositoryImpl == null) {
    int type=_getRepositoryType(repositoryId);
    if (type == 0) {
      repositoryImpl=new LiferayRepository(repositoryId);
    }
 else {
      repositoryImpl=_createRepositoryImpl(repositoryId,type);
    }
    checkRepository(repositoryId);
    _repositoryMap.put(repositoryId,repositoryImpl);
  }
  return repositoryImpl;
}
