{
  long entryId=_getEntryId(folderId,fileEntryId,fileVersionId);
  LocalRepository localRepositoryImpl=_localRepositoryEntryMap.get(entryId);
  if (localRepositoryImpl == null) {
    localRepositoryImpl=new LiferayLocalRepository(folderId,fileEntryId,fileVersionId);
    if (localRepositoryImpl.getRepositoryId() == 0) {
      localRepositoryImpl=null;
    }
    if (localRepositoryImpl == null) {
      BaseRepositoryImpl baseRepository=_createRepositoryImpl(entryId);
      localRepositoryImpl=baseRepository.getLocalRepository();
    }
 else {
      checkRepository(localRepositoryImpl.getRepositoryId());
    }
    _localRepositoryEntryMap.put(entryId,localRepositoryImpl);
  }
  return localRepositoryImpl;
}
