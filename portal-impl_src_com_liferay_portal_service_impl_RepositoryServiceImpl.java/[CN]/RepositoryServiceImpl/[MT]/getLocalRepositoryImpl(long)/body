{
  LocalRepository localRepositoryImpl=_localRepositoryMap.get(repositoryId);
  if (localRepositoryImpl == null) {
    int type=_getRepositoryType(repositoryId);
    if (type == 0) {
      localRepositoryImpl=new LiferayLocalRepository(repositoryId);
    }
 else {
      BaseRepositoryImpl baseRepository=_createRepositoryImpl(repositoryId,type);
      localRepositoryImpl=baseRepository.getLocalRepository();
    }
    checkRepository(repositoryId);
    _localRepositoryMap.put(repositoryId,localRepositoryImpl);
  }
  return localRepositoryImpl;
}
