{
  if (_invalid) {
synchronized (this) {
      if (_invalid) {
        IndexSearcher indexSearcher=_indexSearcher;
        if (indexSearcher == null) {
          throw new AlreadyClosedException("Index searcher manager is closed");
        }
        IndexReader newIndexReader=IndexReader.openIfChanged(indexSearcher.getIndexReader());
        if (newIndexReader != null) {
          _indexSearcher=_createIndexSearcher(newIndexReader);
          release(indexSearcher);
        }
        _invalid=false;
      }
    }
  }
  IndexSearcher indexSearcher=null;
  while ((indexSearcher=_indexSearcher) != null) {
    IndexReader indexReader=indexSearcher.getIndexReader();
    if (indexReader.tryIncRef()) {
      return indexSearcher;
    }
    if (indexSearcher == _indexSearcher) {
      throw new IllegalStateException("Index reader was closed externally");
    }
  }
  throw new AlreadyClosedException("Index searcher manager is closed");
}
