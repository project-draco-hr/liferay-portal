{
  Random random=new Random();
  int a=random.nextInt(50);
  int b=random.nextInt(50);
  final URL wsUrl=new URL(context,"/api/jsonws/testws.testweb/sum/a/" + a + "/b/"+ b);
  CloseableHttpClient httpClient=HttpClients.custom().setDefaultCredentialsProvider(new BasicCredentialsProvider(){
{
      setCredentials(new AuthScope(wsUrl.getHost(),wsUrl.getPort()),new UsernamePasswordCredentials("test@liferay.com","test"));
    }
  }
).build();
  HttpGet httpGet=new HttpGet(wsUrl.toURI());
  CloseableHttpResponse httpResponse=httpClient.execute(httpGet);
  InputStream content=httpResponse.getEntity().getContent();
  String contentString=StringUtil.read(content);
  Assert.assertEquals(a + b,Integer.parseInt(contentString));
}
