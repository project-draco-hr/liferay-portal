{
  HttpClientBuilder httpClientBuilder=HttpClients.custom();
  CredentialsProvider credentialsProvider=new BasicCredentialsProvider();
  Random random=new Random();
  int a=random.nextInt(50);
  int b=random.nextInt(50);
  final URL url=new URL(_url,"/api/jsonws/test.testweb/sum/a/" + a + "/b/"+ b);
  credentialsProvider.setCredentials(new AuthScope(url.getHost(),url.getPort()),new UsernamePasswordCredentials("test@liferay.com","test"));
  httpClientBuilder.setDefaultCredentialsProvider(credentialsProvider);
  CloseableHttpClient closeableHttpClient=httpClientBuilder.build();
  HttpGet httpGet=new HttpGet(url.toURI());
  CloseableHttpResponse closeableHttpResponse=closeableHttpClient.execute(httpGet);
  HttpEntity httpEntity=closeableHttpResponse.getEntity();
  InputStream inputStream=httpEntity.getContent();
  String string=StringUtil.read(inputStream);
  Assert.assertEquals(a + b,Integer.parseInt(string));
}
