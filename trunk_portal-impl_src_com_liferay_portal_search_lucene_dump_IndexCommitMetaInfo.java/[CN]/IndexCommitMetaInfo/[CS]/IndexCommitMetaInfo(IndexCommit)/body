{
  if (indexCommit == null) {
    _empty=true;
    return;
  }
  List<String> fileNames=new ArrayList<String>(indexCommit.getFileNames());
  _segments=new ArrayList<Segment>(fileNames.size());
  Directory directory=indexCommit.getDirectory();
  for (  String fileName : fileNames) {
    Segment segment=new Segment(fileName,directory.fileLength(fileName));
    _segments.add(segment);
  }
  _generation=indexCommit.getGeneration();
}
