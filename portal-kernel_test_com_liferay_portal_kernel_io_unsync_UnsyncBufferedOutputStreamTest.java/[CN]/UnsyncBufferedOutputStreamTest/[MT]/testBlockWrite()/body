{
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  UnsyncBufferedOutputStream unsyncBos=new UnsyncBufferedOutputStream(baos,testDataSize * 2);
  assertEquals(testDataSize * 2,unsyncBos.buffer.length);
  unsyncBos.write(testData);
  for (int i=0; i < testDataSize; i++) {
    assertEquals(i,unsyncBos.buffer[i]);
  }
  unsyncBos.write(testData);
  for (int i=testDataSize; i < testDataSize * 2; i++) {
    assertEquals(i - testDataSize,unsyncBos.buffer[i]);
  }
  unsyncBos.write(100);
  assertEquals(100,unsyncBos.buffer[0]);
  assertEquals(testDataSize * 2,baos.size());
}
