{
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  UnsyncBufferedOutputStream unsyncBos=new UnsyncBufferedOutputStream(baos,_BUFFER_SIZE * 2);
  assertEquals(_BUFFER_SIZE * 2,unsyncBos.buffer.length);
  unsyncBos.write(_BUFFER);
  for (int i=0; i < _BUFFER_SIZE; i++) {
    assertEquals(i,unsyncBos.buffer[i]);
  }
  unsyncBos.write(_BUFFER);
  for (int i=_BUFFER_SIZE; i < _BUFFER_SIZE * 2; i++) {
    assertEquals(i - _BUFFER_SIZE,unsyncBos.buffer[i]);
  }
  unsyncBos.write(100);
  assertEquals(100,unsyncBos.buffer[0]);
  assertEquals(_BUFFER_SIZE * 2,baos.size());
}
