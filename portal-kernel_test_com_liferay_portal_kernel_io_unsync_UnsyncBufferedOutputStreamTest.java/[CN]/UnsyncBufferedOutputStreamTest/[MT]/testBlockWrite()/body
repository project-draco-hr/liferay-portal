{
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  UnsyncBufferedOutputStream ubos=new UnsyncBufferedOutputStream(baos,_BUFFER_SIZE * 2);
  assertEquals(_BUFFER_SIZE * 2,ubos.buffer.length);
  ubos.write(_BUFFER);
  for (int i=0; i < _BUFFER_SIZE; i++) {
    assertEquals(i,ubos.buffer[i]);
  }
  ubos.write(_BUFFER);
  for (int i=_BUFFER_SIZE; i < _BUFFER_SIZE * 2; i++) {
    assertEquals(i - _BUFFER_SIZE,ubos.buffer[i]);
  }
  ubos.write(100);
  assertEquals(100,ubos.buffer[0]);
  assertEquals(_BUFFER_SIZE * 2,baos.size());
}
