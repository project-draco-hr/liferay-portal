{
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  UnsyncBufferedOutputStream unsyncBos=new UnsyncBufferedOutputStream(baos,testDataSize * 2);
  assertEquals(testDataSize * 2,unsyncBos.buffer.length);
  for (int i=0; i < testDataSize; i++) {
    unsyncBos.write(i);
    assertEquals(i,unsyncBos.buffer[i]);
  }
  unsyncBos.flush();
  byte[] resultData=baos.toByteArray();
  assertTrue(Arrays.equals(testData,resultData));
}
