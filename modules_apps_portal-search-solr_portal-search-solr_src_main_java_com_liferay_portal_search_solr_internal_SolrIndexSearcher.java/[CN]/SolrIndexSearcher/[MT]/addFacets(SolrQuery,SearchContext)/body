{
  Map<String,Facet> facets=searchContext.getFacets();
  for (  Facet facet : facets.values()) {
    if (facet.isStatic()) {
      continue;
    }
    FacetConfiguration facetConfiguration=facet.getFacetConfiguration();
    _facetProcessor.processFacet(solrQuery,facet);
    String facetSort=FacetParams.FACET_SORT_COUNT;
    String order=facetConfiguration.getOrder();
    if (order.equals("OrderValueAsc")) {
      facetSort=FacetParams.FACET_SORT_INDEX;
    }
    solrQuery.add("f." + facetConfiguration.getFieldName() + ".facet.sort",facetSort);
  }
  solrQuery.setFacetLimit(-1);
}
