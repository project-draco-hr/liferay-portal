{
  StringBundler sb=new StringBundler();
  String delimiter=StringPool.BLANK;
  Map<String,Map<String,Resource>> directories=jar.getDirectories();
  for (  String directory : directories.keySet()) {
    if (directory.equals("META-INF") || directory.startsWith("META-INF/")) {
      continue;
    }
    if (directory.equals("OSGI-OPT") || directory.startsWith("OSGI-OPT/")) {
      continue;
    }
    if (directory.equals(StringPool.SLASH)) {
      continue;
    }
    if (directory.endsWith(StringPool.SLASH)) {
      directory=directory.substring(0,directory.length() - 1);
    }
    if (directory.endsWith(StringPool.SLASH)) {
      directory=directory.substring(0,directory.length() - 1);
    }
    String className=directory.replace(StringPool.SLASH,StringPool.PERIOD);
    if (directories.get(directory) != null) {
      sb.append(delimiter);
      sb.append(className);
      delimiter=StringPool.COMMA;
    }
  }
  return sb.toString();
}
