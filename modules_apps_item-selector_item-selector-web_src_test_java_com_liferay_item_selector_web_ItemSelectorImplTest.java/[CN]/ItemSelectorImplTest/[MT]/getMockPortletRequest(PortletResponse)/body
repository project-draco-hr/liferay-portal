{
  LiferayPortletRequest liferayPortletRequest=mock(LiferayPortletRequest.class);
  when(liferayPortletRequest.getAttribute(JavaConstants.JAVAX_PORTLET_RESPONSE)).thenReturn(portletResponse);
  ThemeDisplay themeDisplay=mock(ThemeDisplay.class);
  when(liferayPortletRequest.getAttribute(WebKeys.THEME_DISPLAY)).thenReturn(themeDisplay);
  Map<String,String[]> parameters=_itemSelectorImpl.getItemSelectorParameters("itemSelectedEventName",_mediaItemSelectorCriterion,_flickrItemSelectorCriterion);
  when(liferayPortletRequest.getParameterMap()).thenReturn(parameters);
  HttpServletRequest request=mock(HttpServletRequest.class);
  when(liferayPortletRequest.getHttpServletRequest()).thenReturn(request);
  when(request.getAttribute(WebKeys.THEME_DISPLAY)).thenReturn(themeDisplay);
  Group group=mock(Group.class);
  when(themeDisplay.getScopeGroup()).thenReturn(group);
  when(group.getGroupId()).thenReturn(12345L);
  when(themeDisplay.getScopeGroupId()).thenReturn(12345L);
  when(themeDisplay.getCompanyId()).thenReturn(12345L);
  return liferayPortletRequest;
}
