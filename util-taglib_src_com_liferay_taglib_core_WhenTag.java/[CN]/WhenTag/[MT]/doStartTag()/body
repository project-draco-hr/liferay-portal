{
  Tag parentTag=getParent();
  if (!(parentTag instanceof ChooseTag)) {
    throw new JspTagException("The when tag must exist under a choose tag");
  }
  ChooseTag chooseTag=(ChooseTag)parentTag;
  if (!chooseTag.canRun()) {
    return SKIP_BODY;
  }
  if (condition()) {
    chooseTag.markRan();
    return EVAL_BODY_INCLUDE;
  }
 else {
    return SKIP_BODY;
  }
}
