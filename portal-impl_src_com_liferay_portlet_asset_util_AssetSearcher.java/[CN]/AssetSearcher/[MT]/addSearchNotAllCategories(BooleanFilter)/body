{
  long[] notAllCategoryIds=_assetEntryQuery.getNotAllCategoryIds();
  if (notAllCategoryIds.length == 0) {
    return;
  }
  BooleanFilter categoryIdsBooleanFilter=new BooleanFilter();
  for (  long notAllCategoryId : notAllCategoryIds) {
    AssetCategory assetCategory=AssetCategoryLocalServiceUtil.fetchAssetCategory(notAllCategoryId);
    if (assetCategory == null) {
      continue;
    }
    List<Long> categoryIds=new ArrayList<>();
    if (PropsValues.ASSET_CATEGORIES_SEARCH_HIERARCHICAL) {
      categoryIds.addAll(AssetCategoryLocalServiceUtil.getSubcategoryIds(notAllCategoryId));
    }
    if (categoryIds.isEmpty()) {
      categoryIds.add(notAllCategoryId);
    }
    BooleanFilter categoryIdBooleanFilter=new BooleanFilter();
    for (    long categoryId : categoryIds) {
      categoryIdBooleanFilter.addTerm(Field.ASSET_CATEGORY_IDS,categoryId);
    }
    categoryIdsBooleanFilter.add(categoryIdBooleanFilter,BooleanClauseOccur.MUST);
  }
  queryBooleanFilter.add(categoryIdsBooleanFilter,BooleanClauseOccur.MUST_NOT);
}
