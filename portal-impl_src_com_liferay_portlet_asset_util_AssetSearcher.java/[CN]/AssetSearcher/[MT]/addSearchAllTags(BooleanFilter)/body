{
  PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
  long[][] allTagIdsArray=_assetEntryQuery.getAllTagIdsArray();
  if (allTagIdsArray.length == 0) {
    return;
  }
  BooleanFilter tagIdsArrayBooleanFilter=new BooleanFilter();
  for (  long[] allTagIds : allTagIdsArray) {
    if (allTagIds.length == 0) {
      continue;
    }
    long[] filteredAllTagIds=AssetUtil.filterTagIds(permissionChecker,allTagIds);
    if (allTagIds.length != filteredAllTagIds.length) {
      addImpossibleTerm(queryBooleanFilter,Field.ASSET_TAG_IDS);
      return;
    }
    BooleanFilter tagIdsBooleanFilter=new BooleanFilter();
    for (    long tagId : allTagIds) {
      tagIdsBooleanFilter.addTerm(Field.ASSET_TAG_IDS,tagId);
    }
    tagIdsArrayBooleanFilter.add(tagIdsBooleanFilter,BooleanClauseOccur.MUST);
  }
  queryBooleanFilter.add(tagIdsArrayBooleanFilter,BooleanClauseOccur.MUST);
}
