{
  removeGuestPermissions(companyId,name,scope,primKey);
  List<String> actions=ResourceActionsUtil.getResourceActions(portletResource,name);
  Role userRole=RoleLocalServiceUtil.getRole(companyId,roleName);
  List<String> availableResourcePermissionActionIds=ResourcePermissionLocalServiceUtil.getAvailableResourcePermissionActionIds(companyId,name,scope,primKey,userRole.getRoleId(),actions);
  availableResourcePermissionActionIds.remove(actionId);
  String[] actionIds=new String[0];
  for (  String availableResourcePermissionActionId : availableResourcePermissionActionIds) {
    actionIds=ArrayUtil.append(actionIds,availableResourcePermissionActionId);
  }
  ResourcePermissionLocalServiceUtil.setResourcePermissions(companyId,name,scope,primKey,userRole.getRoleId(),actionIds);
}
