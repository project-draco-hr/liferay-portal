{
  SortedMap<String,String> sortedParamMap=new TreeMap<String,String>(params);
  String canonicalQS=canonicalize(sortedParamMap);
  String toSign=REQUEST_METHOD + StringPool.NEWLINE + ECS_ENDPOINT+ StringPool.NEWLINE+ REQUEST_URI+ StringPool.NEWLINE+ canonicalQS;
  String url=null;
  try {
    String signature=generateSignature(toSign);
    url="http://" + ECS_ENDPOINT + REQUEST_URI+ StringPool.QUESTION_MARK+ canonicalQS+ StringPool.AMPERSAND+ "Signature"+ StringPool.EQUALS+ signature;
  }
 catch (  SignatureException e) {
    _log.error("Failed to generate signature : " + e.getMessage());
  }
  return url;
}
