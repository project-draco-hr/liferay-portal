{
  if (url == null) {
    return null;
  }
  String anchor=StringPool.BLANK;
  int pos=url.indexOf(CharPool.POUND);
  if (pos != -1) {
    anchor=url.substring(pos);
    url=url.substring(0,pos);
  }
  StringBundler sb=new StringBundler(7);
  sb.append(url);
  if (url.indexOf(CharPool.QUESTION) == -1) {
    sb.append(StringPool.QUESTION);
  }
 else   if (!url.endsWith(StringPool.QUESTION) && !url.endsWith(StringPool.AMPERSAND)) {
    sb.append(StringPool.AMPERSAND);
  }
  sb.append(name);
  sb.append(StringPool.EQUAL);
  sb.append(encodeURL(value));
  sb.append(anchor);
  return sb.toString();
}
