{
  _ddmStructure=ddmStructure;
  DLFileEntryType dlFileEntryType=DLFileEntryTypeLocalServiceUtil.addFileEntryType(TestPropsValues.getUserId(),serviceContext.getScopeGroupId(),"Structure",StringPool.BLANK,new long[]{ddmStructure.getStructureId()},serviceContext);
  String content="Content: Enterprise. Open Source. For Life.";
  Fields fields=new Fields();
  Field textField=new Field(ddmStructure.getStructureId(),"name",keywords);
  textField.setDefaultLocale(LocaleUtil.US);
  fields.put(textField);
  DDMFormValues ddmFormValues=FieldsToDDMFormValuesConverterUtil.convert(ddmStructure,fields);
  serviceContext.setAttribute("fileEntryTypeId",dlFileEntryType.getFileEntryTypeId());
  serviceContext.setAttribute(DDMFormValues.class.getName() + ddmStructure.getStructureId(),ddmFormValues);
  long repositoryId=serviceContext.getScopeGroupId();
  long folderId=DLFolderConstants.DEFAULT_PARENT_FOLDER_ID;
  String sourceFileName="Text.txt";
  String mimeType=ContentTypes.TEXT_PLAIN;
  String title=RandomTestUtil.randomString();
  byte[] bytes=content.getBytes();
  int workflowAction=WorkflowConstants.ACTION_PUBLISH;
  FileEntry fileEntry=DLAppTestUtil.addFileEntry(repositoryId,folderId,sourceFileName,mimeType,title,bytes,workflowAction,serviceContext);
  return (DLFileEntry)fileEntry.getModel();
}
