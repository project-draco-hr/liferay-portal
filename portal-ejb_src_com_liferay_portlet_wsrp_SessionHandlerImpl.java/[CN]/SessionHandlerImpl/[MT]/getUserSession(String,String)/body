{
  if (_portletSession == null) {
    try {
      throw new Exception("PortletSession is null. Call setPortletSession() first.");
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
 else {
    Producer producer=_consumerEnv.getProducerRegistry().getProducer(producerID);
    if (producer != null) {
      String markupURL=producer.getMarkupInterfaceEndpoint();
      return new UserSessionImpl(producerID,userID,markupURL,_portletSession);
    }
  }
  return null;
}
