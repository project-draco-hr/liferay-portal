{
  Dictionary<String,String> headers=bundle.getHeaders();
  String exportPackage=headers.get(Constants.EXPORT_PACKAGE);
  if (exportPackage == null) {
    return null;
  }
  Parameters parameters=OSGiHeader.parseHeader(exportPackage);
  Map<String,? extends Map<String,String>> exportPackages=parameters.asMapMap();
  Map<String,Packages> bundleExportPackages=new HashMap<>();
  for (  Map.Entry<String,? extends Map<String,String>> entry : exportPackages.entrySet()) {
    String packageName=entry.getKey();
    Map<String,String> attributes=entry.getValue();
    String version=attributes.get(Constants.VERSION_ATTRIBUTE);
    if (version == null) {
      version="0.0";
    }
    bundleExportPackages.put(packageName,new Packages(packageName,version,bundle.getSymbolicName()));
  }
  return bundleExportPackages;
}
