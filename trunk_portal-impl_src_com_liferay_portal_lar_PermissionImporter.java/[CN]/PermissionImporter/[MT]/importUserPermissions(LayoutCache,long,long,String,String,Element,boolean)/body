{
  Element userPermissionsElement=parentElement.element("user-permissions");
  if (userPermissionsElement == null) {
    return;
  }
  List<Element> userActionsElements=userPermissionsElement.elements("user-actions");
  for (  Element userActionsElement : userActionsElements) {
    String uuid=userActionsElement.attributeValue("uuid");
    User user=layoutCache.getUser(companyId,groupId,uuid);
    if (user == null) {
      if (_log.isWarnEnabled()) {
        _log.warn("Ignoring permissions for user with uuid " + uuid);
      }
    }
 else {
      List<String> actions=getActions(userActionsElement);
      Resource resource=layoutCache.getResource(companyId,groupId,resourceName,ResourceConstants.SCOPE_INDIVIDUAL,resourcePrimKey,portletActions);
      PermissionLocalServiceUtil.setUserPermissions(user.getUserId(),actions.toArray(new String[actions.size()]),resource.getResourceId());
    }
  }
}
