{
  PortletURL portletURL=PortalUtil.getControlPanelPortletURL(portletRequest,DLPortletKeys.DOCUMENT_LIBRARY_ADMIN,PortletRequest.ACTION_PHASE);
  portletURL.setParameter(ActionRequest.ACTION_NAME,"/document_library/edit_file_entry");
  portletURL.setParameter(Constants.CMD,Constants.CHECKOUT);
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  portletURL.setParameter("redirect",themeDisplay.getURLCurrent());
  try {
    FileEntry fileEntry=ActionUtil.getFileEntry(portletRequest);
    portletURL.setParameter("fileEntryId",String.valueOf(fileEntry.getFileEntryId()));
  }
 catch (  Exception e) {
  }
  return portletURL.toString();
}
