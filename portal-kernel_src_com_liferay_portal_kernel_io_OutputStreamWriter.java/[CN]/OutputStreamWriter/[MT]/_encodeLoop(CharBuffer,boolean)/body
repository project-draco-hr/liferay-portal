{
  while (inputCharBuffer.hasRemaining()) {
    CoderResult coderResult=_charsetEncoder.encode(inputCharBuffer,_outputByteBuffer,endOfInput);
    if (coderResult.isError()) {
      coderResult.throwException();
    }
    if (coderResult.isUnderflow()) {
      if (_autoFlush) {
        _flushBuffer();
      }
      if ((_inputCharBuffer != inputCharBuffer) && inputCharBuffer.hasRemaining()) {
        _inputCharBuffer.put(inputCharBuffer.get());
      }
      break;
    }
    _flushBuffer();
  }
}
