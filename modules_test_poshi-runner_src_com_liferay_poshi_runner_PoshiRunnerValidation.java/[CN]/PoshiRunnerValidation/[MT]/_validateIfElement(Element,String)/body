{
  _validateHasChildElements(element,filePath);
  _validateHasNoAttributes(element,filePath);
  String fileName=filePath.substring(filePath.lastIndexOf(".") + 1);
  List<Element> childElements=element.elements();
  if (fileName.equals("function")) {
    Element firstChildElement=childElements.get(0);
    String firstChildElementName=firstChildElement.getName();
    if (!StringUtils.equals(firstChildElementName,"condition") && !StringUtils.equals(firstChildElementName,"contains")) {
      throw new PoshiRunnerException("Missing (condition|contains) child element\n" + filePath + ":"+ firstChildElement.attributeValue("line-number"));
    }
  }
  List<Element> thenElements=element.elements("then");
  if (thenElements.size() > 1) {
    throw new PoshiRunnerException("Too many then elements\n" + filePath + ":"+ element.attributeValue("line-number"));
  }
  _validateHasChildElements(thenElements.get(0),filePath);
  List<Element> elseElements=element.elements("else");
  if (elseElements.size() > 1) {
    throw new PoshiRunnerException("Too many else elements\n" + filePath + ":"+ element.attributeValue("line-number"));
  }
  List<String> conditionTags=Arrays.asList("and","condition","contains","equals","isset","not","or");
  int i=0;
  for (  Element childElement : childElements) {
    String childElementName=childElement.getName();
    if (conditionTags.contains(childElementName) && (i == 0)) {
      _validateConditionElement(childElement,filePath);
    }
 else     if (childElementName.equals("else")) {
      _validateHasChildElements(childElement,filePath);
      _validateHasNoAttributes(childElement,filePath);
      _parseElements(childElement,filePath);
    }
 else     if (childElementName.equals("elseif")) {
      _validateHasChildElements(childElement,filePath);
      _validateHasNoAttributes(childElement,filePath);
      _validateIfElement(childElement,filePath);
    }
 else     if (childElementName.equals("then")) {
      _validateHasChildElements(childElement,filePath);
      _validateHasNoAttributes(childElement,filePath);
      _parseElements(childElement,filePath);
    }
 else {
      throw new PoshiRunnerException("Invalid " + childElementName + " element\n"+ filePath+ ":"+ childElement.attributeValue("line-number"));
    }
    i++;
  }
}
