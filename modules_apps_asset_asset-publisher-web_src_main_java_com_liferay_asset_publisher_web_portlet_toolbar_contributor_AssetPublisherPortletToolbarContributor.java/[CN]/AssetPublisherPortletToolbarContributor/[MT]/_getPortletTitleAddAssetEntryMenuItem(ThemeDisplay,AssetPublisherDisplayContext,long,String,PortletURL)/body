{
  AssetRendererFactory<?> assetRendererFactory=AssetRendererFactoryRegistryUtil.getAssetRendererFactoryByClassName(_getClassName(className));
  String message=_getMessage(className,themeDisplay.getLocale());
  long curGroupId=groupId;
  Group group=_groupLocalService.fetchGroup(groupId);
  if (!group.isStagedPortlet(assetRendererFactory.getPortletId()) && !group.isStagedRemotely()) {
    curGroupId=group.getLiveGroupId();
  }
  PortletDisplay portletDisplay=themeDisplay.getPortletDisplay();
  boolean addDisplayPageParameter=AssetUtil.isDefaultAssetPublisher(themeDisplay.getLayout(),portletDisplay.getId(),assetPublisherDisplayContext.getPortletResource());
  String url=_getURL(curGroupId,themeDisplay.getPlid(),portletURL,assetRendererFactory.getPortletId(),addDisplayPageParameter,themeDisplay.getLayout());
  URLMenuItem urlMenuItem=new URLMenuItem();
  urlMenuItem.setLabel(HtmlUtil.escape(message));
  urlMenuItem.setURL(url);
  urlMenuItem.setUseDialog(true);
  return urlMenuItem;
}
