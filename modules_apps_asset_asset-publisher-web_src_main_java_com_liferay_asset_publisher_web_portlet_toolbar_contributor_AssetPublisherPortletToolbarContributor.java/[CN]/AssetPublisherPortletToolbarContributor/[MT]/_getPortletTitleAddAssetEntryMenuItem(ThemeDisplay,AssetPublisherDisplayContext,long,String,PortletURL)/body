{
  URLMenuItem urlMenuItem=new URLMenuItem();
  Map<String,Object> data=new HashMap<>();
  PortletDisplay portletDisplay=themeDisplay.getPortletDisplay();
  data.put("id",HtmlUtil.escape(portletDisplay.getNamespace()) + "editAsset");
  String message=AssetUtil.getClassNameMessage(className,themeDisplay.getLocale());
  String title=LanguageUtil.format(themeDisplay.getLocale(),"new-x",message,false);
  data.put("title",title);
  urlMenuItem.setData(data);
  urlMenuItem.setLabel(HtmlUtil.escape(message));
  long curGroupId=groupId;
  Group group=_groupLocalService.fetchGroup(groupId);
  AssetRendererFactory<?> assetRendererFactory=AssetRendererFactoryRegistryUtil.getAssetRendererFactoryByClassName(AssetUtil.getClassName(className));
  if (!group.isStagedPortlet(assetRendererFactory.getPortletId()) && !group.isStagedRemotely()) {
    curGroupId=group.getLiveGroupId();
  }
  boolean addDisplayPageParameter=AssetUtil.isDefaultAssetPublisher(themeDisplay.getLayout(),portletDisplay.getId(),assetPublisherDisplayContext.getPortletResource());
  String url=AssetUtil.getAddURLPopUp(curGroupId,themeDisplay.getPlid(),portletURL,assetRendererFactory.getPortletId(),addDisplayPageParameter,themeDisplay.getLayout());
  urlMenuItem.setURL(url);
  urlMenuItem.setUseDialog(true);
  return urlMenuItem;
}
