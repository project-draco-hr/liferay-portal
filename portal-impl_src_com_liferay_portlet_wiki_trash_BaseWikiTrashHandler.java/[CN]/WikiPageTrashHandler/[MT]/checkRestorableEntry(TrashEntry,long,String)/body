{
  WikiPage page=WikiPageLocalServiceUtil.getLatestPage(trashEntry.getClassPK(),WorkflowConstants.STATUS_ANY,false);
  if (containerModelId == TrashEntryConstants.DEFAULT_CONTAINER_ID) {
    containerModelId=page.getNodeId();
  }
  String originalTitle=trashEntry.getTypeSettingsProperty("title");
  if (Validator.isNotNull(newName)) {
    originalTitle=newName;
  }
  WikiPageResource pageResource=WikiPageResourceLocalServiceUtil.fetchPageResource(containerModelId,originalTitle);
  if (pageResource != null) {
    RestoreEntryException ree=new RestoreEntryException(RestoreEntryException.DUPLICATE);
    WikiPage duplicatePage=WikiPageLocalServiceUtil.getLatestPage(pageResource.getResourcePrimKey(),WorkflowConstants.STATUS_ANY,false);
    ree.setDuplicateEntryId(duplicatePage.getResourcePrimKey());
    ree.setOldName(duplicatePage.getTitle());
    ree.setTrashEntryId(trashEntry.getEntryId());
    throw ree;
  }
}
