{
  String templateName=breakpoint.getTemplateName();
synchronized (templateDebugInfos) {
    TemplateDebugInfo tdi=createTemplateDebugInfo(templateName);
    List breakpoints=tdi.breakpoints;
    int pos=Collections.binarySearch(breakpoints,breakpoint);
    if (pos < 0) {
      breakpoints.add(-pos - 1,breakpoint);
      for (Iterator iter=tdi.templates.iterator(); iter.hasNext(); ) {
        TemplateReference ref=(TemplateReference)iter.next();
        Template t=ref.getTemplate();
        if (t == null) {
          iter.remove();
        }
 else {
          boolean inserted=insertDebugBreak(t,breakpoint);
          if (!inserted) {
            breakpoints.remove(breakpoint);
            return false;
          }
        }
      }
    }
  }
  return true;
}
