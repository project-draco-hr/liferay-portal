{
  String templateName=template.getName();
synchronized (templateDebugInfos) {
    TemplateDebugInfo tdi=createTemplateDebugInfo(templateName);
    tdi.templates.add(new TemplateReference(templateName,template,refQueue));
    for (Iterator iter=tdi.breakpoints.iterator(); iter.hasNext(); ) {
      Breakpoint breakpoint=(Breakpoint)iter.next();
      insertDebugBreak(template,breakpoint);
    }
  }
}
