{
  for (; ; ) {
    TemplateReference ref=(TemplateReference)refQueue.poll();
    if (ref == null) {
      break;
    }
    TemplateDebugInfo tdi=findTemplateDebugInfo(ref.templateName);
    if (tdi != null) {
      tdi.templates.remove(ref);
      if (tdi.isEmpty()) {
        templateDebugInfos.remove(ref.templateName);
      }
    }
  }
}
