{
  DiscussionPermission discussionPermission=_commentManager.getDiscussionPermission(getPermissionChecker());
  discussionPermission.checkViewPermission(getCompanyId(groupId),groupId,className,classPK);
  Discussion discussion=_commentManager.getDiscussion(getUserId(),groupId,className,classPK,createServiceContextFunction());
  DiscussionComment rootDiscussionComment=discussion.getRootDiscussionComment();
  if (start == QueryUtil.ALL_POS) {
    start=0;
  }
  DiscussionCommentIterator threadDiscussionCommentIterator=rootDiscussionComment.getThreadDiscussionCommentIterator(start);
  if (end == QueryUtil.ALL_POS) {
    return getAllComments(threadDiscussionCommentIterator);
  }
  int commentsCount=end - start;
  if (commentsCount <= 0) {
    return Collections.emptyList();
  }
  List<CommentJSONWS> commentJSONWSs=new ArrayList<>(commentsCount);
  while (threadDiscussionCommentIterator.hasNext() && (commentsCount > 0)) {
    CommentJSONWS commentJSONWS=new CommentJSONWS(threadDiscussionCommentIterator.next());
    commentJSONWSs.add(commentJSONWS);
    commentsCount--;
  }
  return commentJSONWSs;
}
