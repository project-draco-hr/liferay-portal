{
  WikiPage wikiPage=WikiPageLocalServiceUtil.getPage(trashEntry.getClassPK());
  String restoredTitle=wikiPage.getTitle();
  if (Validator.isNotNull(newName)) {
    restoredTitle=newName;
  }
  String originalTitle=TrashUtil.stripTrashNamespace(restoredTitle);
  WikiPage duplicatedWikiPage=WikiPageLocalServiceUtil.fetchWikiPage(wikiPage.getNodeId(),originalTitle,wikiPage.getVersion());
  if (duplicatedWikiPage != null) {
    DuplicateEntryException dee=new DuplicateEntryException();
    dee.setDuplicateEntryId(duplicatedWikiPage.getPageId());
    dee.setOldName(duplicatedWikiPage.getTitle());
    dee.setTrashEntryId(trashEntry.getEntryId());
    throw dee;
  }
}
