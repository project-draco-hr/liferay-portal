{
  WikiPage page=WikiPageLocalServiceUtil.getPage(classPK);
  String portletName=PortletKeys.WIKI;
  long plid=PortalUtil.getPlidFromPortletId(page.getGroupId(),PortletKeys.WIKI);
  if (plid == LayoutConstants.DEFAULT_PLID) {
    plid=PortalUtil.getControlPanelPlid(portletRequest);
    portletName=PortletKeys.WIKI_ADMIN;
  }
  PortletURL portletURL=PortletURLFactoryUtil.create(portletRequest,portletName,plid,PortletRequest.RENDER_PHASE);
  WikiNode node=page.getNode();
  portletURL.setParameter("struts_action","/wiki/view");
  portletURL.setParameter("nodeName",node.getName());
  portletURL.setParameter("title",HtmlUtil.unescape(page.getTitle()));
  return portletURL.toString();
}
