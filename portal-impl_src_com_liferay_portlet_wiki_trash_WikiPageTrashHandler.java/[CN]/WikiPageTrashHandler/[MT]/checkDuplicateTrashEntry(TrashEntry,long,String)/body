{
  WikiPage page=WikiPageLocalServiceUtil.getPage(trashEntry.getClassPK());
  if (containerModelId == TrashEntryConstants.DEFAULT_CONTAINER_ID) {
    containerModelId=page.getNodeId();
  }
  String restoredTitle=page.getTitle();
  if (Validator.isNotNull(newName)) {
    restoredTitle=newName;
  }
  String originalTitle=TrashUtil.stripTrashNamespace(restoredTitle);
  WikiPageResource pageResource=WikiPageResourceLocalServiceUtil.fetchPageResource(containerModelId,originalTitle);
  if (pageResource != null) {
    DuplicateEntryException dee=new DuplicateEntryException();
    WikiPage duplicatePage=WikiPageLocalServiceUtil.getPage(pageResource.getResourcePrimKey());
    dee.setDuplicateEntryId(duplicatePage.getPageId());
    dee.setOldName(duplicatePage.getTitle());
    dee.setTrashEntryId(trashEntry.getEntryId());
    throw dee;
  }
}
