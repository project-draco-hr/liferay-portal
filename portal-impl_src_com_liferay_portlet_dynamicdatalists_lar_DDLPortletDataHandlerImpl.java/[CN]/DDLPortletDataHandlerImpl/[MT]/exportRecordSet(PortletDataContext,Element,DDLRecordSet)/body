{
  String path=getRecordSetPath(portletDataContext,recordSet);
  if (!portletDataContext.isPathNotProcessed(path)) {
    return;
  }
  Element recordSetElement=recordSetsElement.addElement("record-set");
  portletDataContext.addClassedModel(recordSetElement,path,recordSet,_NAMESPACE);
  DDMStructure ddmStructure=recordSet.getDDMStructure();
  Element ddmStructureReferencesElement=recordSetElement.addElement("ddm-structure-references");
  DDMPortletDataHandlerImpl.exportStructure(portletDataContext,ddmStructureReferencesElement,ddmStructure);
  List<DDMTemplate> ddmTemplates=ddmStructure.getDDMTemplates();
  Element ddmTemplateReferencesElement=recordSetElement.addElement("ddm-template-references");
  for (  DDMTemplate ddmTemplate : ddmTemplates) {
    DDMPortletDataHandlerImpl.exportTemplate(portletDataContext,ddmTemplateReferencesElement,ddmTemplate);
  }
}
