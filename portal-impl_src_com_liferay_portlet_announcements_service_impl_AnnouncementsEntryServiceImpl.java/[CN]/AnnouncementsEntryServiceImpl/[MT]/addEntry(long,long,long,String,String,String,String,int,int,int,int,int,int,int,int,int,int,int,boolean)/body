{
  PermissionChecker permissionChecker=getPermissionChecker();
  PortletPermissionUtil.check(permissionChecker,plid,PortletKeys.ANNOUNCEMENTS,ActionKeys.ADD_ENTRY);
  if (classNameId == 0) {
    if (!permissionChecker.isOmniadmin()) {
      throw new PrincipalException();
    }
  }
 else {
    String className=PortalUtil.getClassName(classNameId);
    if (className.equals(Group.class.getName()) && !GroupPermissionUtil.contains(permissionChecker,classPK,ActionKeys.ASSIGN_MEMBERS)) {
      throw new PrincipalException();
    }
    if (className.equals(Organization.class.getName()) && !OrganizationPermissionUtil.contains(permissionChecker,classPK,ActionKeys.ASSIGN_MEMBERS)) {
      throw new PrincipalException();
    }
    if (className.equals(Role.class.getName()) && !RolePermissionUtil.contains(permissionChecker,classPK,ActionKeys.ASSIGN_MEMBERS)) {
      throw new PrincipalException();
    }
    if (className.equals(UserGroup.class.getName()) && !UserGroupPermissionUtil.contains(permissionChecker,classPK,ActionKeys.ASSIGN_MEMBERS)) {
      throw new PrincipalException();
    }
  }
  return announcementsEntryLocalService.addEntry(getUserId(),classNameId,classPK,title,content,url,type,displayDateMonth,displayDateDay,displayDateYear,displayDateHour,displayDateMinute,expirationDateMonth,expirationDateDay,expirationDateYear,expirationDateHour,expirationDateMinute,priority,alert);
}
