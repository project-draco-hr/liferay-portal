{
  boolean dlAppHelperEnabled=DLAppHelperThreadLocal.isEnabled();
  try {
    DLAppHelperThreadLocal.setEnabled(false);
    LocalRepository localRepository=RepositoryLocalServiceUtil.getLocalRepositoryImpl(0,fileEntryId,0,0);
    RepositoryTrashUtil.restoreFileEntryFromTrash(userId,localRepository.getRepositoryId(),fileEntryId);
  }
  finally {
    DLAppHelperThreadLocal.setEnabled(dlAppHelperEnabled);
  }
}
