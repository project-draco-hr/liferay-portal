{
  for (int i=0; i < inputStreamOVPs.size(); i++) {
    ObjectValuePair<String,InputStream> inputStreamOVP=inputStreamOVPs.get(i);
    InputStream inputStream=inputStreamOVP.getValue();
    String fileName=inputStreamOVP.getKey();
    File file=null;
    try {
      file=FileUtil.createTempFile(inputStream);
      String mimeType=MimeTypesUtil.getContentType(file,fileName);
      addPortletFileEntry(groupId,userId,className,classPK,portletId,folderId,file,fileName,mimeType);
    }
 catch (    IOException ioe) {
      throw new SystemException("Unable to write temporary file " + file.getAbsolutePath(),ioe);
    }
 finally {
      FileUtil.delete(file);
    }
  }
}
