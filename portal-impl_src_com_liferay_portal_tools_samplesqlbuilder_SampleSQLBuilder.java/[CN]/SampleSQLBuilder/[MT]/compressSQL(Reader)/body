{
  UnsyncBufferedReader unsyncBufferedReader=new UnsyncBufferedReader(reader);
  String s=null;
  while ((s=unsyncBufferedReader.readLine()) != null) {
    s=s.trim();
    if (s.length() > 0) {
      if (s.startsWith("insert into ")) {
        compressInsertSQL(s.substring(12));
      }
 else       if (s.length() > 0) {
        _otherSQLs.add(s);
      }
    }
  }
  unsyncBufferedReader.close();
  for (  Map.Entry<String,StringBundler> entry : _insertSQLs.entrySet()) {
    String tableName=entry.getKey();
    StringBundler sb=entry.getValue();
    String sql=_db.buildSQL(sb.toString());
    writeToInsertSQLFile(tableName,sql);
    Writer insertSQLWriter=_insertSQLWriters.remove(tableName);
    insertSQLWriter.write(";\n");
    insertSQLWriter.close();
  }
  File endSQLFile=new File(_tempDir,_endSQLFileName);
  Writer endSQLFileWriter=new FileWriter(endSQLFile);
  for (  String sql : _otherSQLs) {
    sql=_db.buildSQL(sql);
    endSQLFileWriter.write(sql);
    endSQLFileWriter.write(StringPool.NEW_LINE);
  }
  endSQLFileWriter.close();
}
