{
  final Writer writer=charPipe.getWriter();
  Thread thread=new Thread(){
    @Override public void run(){
      try {
        _writerSampleSQL=new UnsyncTeeWriter(writer,new FileWriter(_outputDir + "/sample.sql"));
        createSample();
        _writerSampleSQL.close();
        charPipe.close();
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
    protected void createSample() throws Exception {
      _writerBlogsCSV=getWriter("blogs.csv");
      _writerDocumentLibraryCSV=getWriter("document_library.csv");
      _writerMessageBoardsCSV=getWriter("message_boards.csv");
      _writerUsersCSV=getWriter("users.csv");
      _writerWikiCSV=getWriter("wiki.csv");
      Map<String,Object> context=getContext();
      processTemplate(_tplSample,context);
      _writerBlogsCSV.flush();
      _writerDocumentLibraryCSV.flush();
      _writerMessageBoardsCSV.flush();
      _writerUsersCSV.flush();
      _writerWikiCSV.flush();
    }
    protected Writer getWriter(    String fileName) throws Exception {
      return new FileWriter(new File(_outputDir + "/" + fileName));
    }
  }
;
  thread.start();
}
