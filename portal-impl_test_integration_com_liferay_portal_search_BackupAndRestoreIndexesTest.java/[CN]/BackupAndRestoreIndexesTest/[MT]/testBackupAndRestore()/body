{
  Map<Long,String> backupNames=new HashMap<>();
  for (  long companyId : PortalInstances.getCompanyIds()) {
    String backupName=StringUtil.lowerCase(BackupAndRestoreIndexesTest.class.getName());
    backupName=backupName + "-" + System.currentTimeMillis();
    IndexAdminHelperUtil.backup(companyId,SearchEngineHelper.SYSTEM_ENGINE_ID,backupName);
    backupNames.put(companyId,backupName);
  }
  _group=GroupTestUtil.addGroup();
  for (  Map.Entry<Long,String> entry : backupNames.entrySet()) {
    String backupName=entry.getValue();
    IndexAdminHelperUtil.restore(entry.getKey(),backupName);
    IndexAdminHelperUtil.removeBackup(entry.getKey(),backupName);
  }
}
