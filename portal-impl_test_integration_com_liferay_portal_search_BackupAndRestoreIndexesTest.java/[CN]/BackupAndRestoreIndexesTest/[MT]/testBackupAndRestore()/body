{
  Map<Long,String> backupNames=new HashMap<Long,String>();
  for (  long companyId : PortalInstances.getCompanyIds()) {
    String backupName=StringUtil.lowerCase(BackupAndRestoreIndexesTest.class.getName() + "-" + System.currentTimeMillis());
    SearchEngineUtil.backup(companyId,SearchEngineUtil.SYSTEM_ENGINE_ID,backupName);
    backupNames.put(companyId,backupName);
  }
  _group=GroupTestUtil.addGroup();
  for (  Map.Entry<Long,String> entry : backupNames.entrySet()) {
    String backupName=entry.getValue();
    SearchEngineUtil.restore(entry.getKey(),backupName);
    SearchEngineUtil.removeBackup(entry.getKey(),backupName);
  }
}
