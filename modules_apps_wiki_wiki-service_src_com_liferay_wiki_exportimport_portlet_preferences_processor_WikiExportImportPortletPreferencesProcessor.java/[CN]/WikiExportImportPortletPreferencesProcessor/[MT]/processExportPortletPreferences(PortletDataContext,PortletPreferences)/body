{
  String portletId=portletDataContext.getPortletId();
  String hiddenNodeNames=portletPreferences.getValue("hiddenNodes",null);
  for (  String hiddenNodeName : StringUtil.split(hiddenNodeNames)) {
    WikiNode wikiNode=WikiNodeLocalServiceUtil.fetchNode(portletDataContext.getScopeGroupId(),hiddenNodeName);
    StagedModelDataHandlerUtil.exportReferenceStagedModel(portletDataContext,portletId,wikiNode);
  }
  String visibleNodeNames=portletPreferences.getValue("visibleNodes",null);
  for (  String visibleNodeName : StringUtil.split(visibleNodeNames)) {
    WikiNode wikiNode=WikiNodeLocalServiceUtil.fetchNode(portletDataContext.getScopeGroupId(),visibleNodeName);
    StagedModelDataHandlerUtil.exportReferenceStagedModel(portletDataContext,portletId,wikiNode);
  }
  return portletPreferences;
}
