{
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  if (!cmd.equals(Constants.UPDATE)) {
    return;
  }
  String portletResource=ParamUtil.getString(actionRequest,"portletResource");
  PortletPreferences preferences=PortletPreferencesFactoryUtil.getPortletSetup(actionRequest,portletResource);
  String tabs1=ParamUtil.getString(actionRequest,"tabs1");
  if (tabs1.equals("general")) {
    String authType=ParamUtil.getString(actionRequest,"authType");
    preferences.setValue("authType",authType);
  }
 else   if (tabs1.equals("email-notifications")) {
    String tabs2=ParamUtil.getString(actionRequest,"tabs2");
    if (tabs2.equals("general")) {
      String emailFromName=ParamUtil.getString(actionRequest,"emailFromName");
      String emailFromAddress=ParamUtil.getString(actionRequest,"emailFromAddress");
      preferences.setValue("emailFromName",emailFromName);
      if (Validator.isNotNull(emailFromAddress)) {
        if (!Validator.isEmailAddress(emailFromAddress)) {
          SessionErrors.add(actionRequest,"emailFromAddress");
        }
 else {
          preferences.setValue("emailFromAddress",emailFromAddress);
        }
      }
 else {
        preferences.setValue("emailFromAddress",emailFromAddress);
      }
    }
 else     if (tabs2.equals("password-changed-notification")) {
      String emailPasswordSentEnabled=ParamUtil.getString(actionRequest,"emailPasswordSentEnabled");
      preferences.setValue("emailPasswordSentEnabled",emailPasswordSentEnabled);
      LocalizationUtil.setLocalizedPrefsValues(actionRequest,preferences,"emailPasswordSentSubject");
      LocalizationUtil.setLocalizedPrefsValues(actionRequest,preferences,"emailPasswordSentBody");
    }
  }
  preferences.store();
  SessionMessages.add(actionRequest,portletConfig.getPortletName() + ".doConfigure");
}
