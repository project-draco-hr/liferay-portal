{
  if (query instanceof BooleanQueryImpl) {
    return ((BooleanQueryImpl)query).getBooleanQuery();
  }
 else   if (query instanceof LuceneQueryImpl) {
    return ((LuceneQueryImpl)query).getQuery();
  }
 else   if (query instanceof StringQueryImpl) {
    QueryParser parser=new QueryParser(LuceneHelperUtil.getVersion(),StringPool.BLANK,LuceneHelperUtil.getAnalyzer());
    try {
      return parser.parse(query.toString());
    }
 catch (    org.apache.lucene.queryParser.ParseException pe) {
      throw new ParseException(pe);
    }
  }
 else   if (query instanceof TermQueryImpl) {
    return ((TermQueryImpl)query).getTermQuery();
  }
 else   if (query instanceof TermRangeQueryImpl) {
    return ((TermRangeQueryImpl)query).getTermRangeQuery();
  }
 else {
    return null;
  }
}
