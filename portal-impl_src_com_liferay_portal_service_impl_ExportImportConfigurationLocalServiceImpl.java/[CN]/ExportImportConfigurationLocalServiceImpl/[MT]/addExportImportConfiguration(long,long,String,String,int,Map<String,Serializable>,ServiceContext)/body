{
  User user=userPersistence.findByPrimaryKey(userId);
  Date now=new Date();
  long exportImportConfigurationId=counterLocalService.increment();
  ExportImportConfiguration exportImportConfiguration=exportImportConfigurationPersistence.create(exportImportConfigurationId);
  exportImportConfiguration.setGroupId(groupId);
  exportImportConfiguration.setCompanyId(user.getCompanyId());
  exportImportConfiguration.setUserId(userId);
  exportImportConfiguration.setUserName(user.getFullName());
  exportImportConfiguration.setCreateDate(serviceContext.getCreateDate(now));
  exportImportConfiguration.setModifiedDate(serviceContext.getModifiedDate(now));
  exportImportConfiguration.setName(name);
  exportImportConfiguration.setDescription(description);
  exportImportConfiguration.setType(type);
  exportImportConfiguration.setStatus(WorkflowConstants.STATUS_APPROVED);
  exportImportConfiguration.setStatusByUserId(userId);
  exportImportConfiguration.setStatusByUserName(user.getScreenName());
  exportImportConfiguration.setStatusDate(now);
  if (settingsMap != null) {
    String settings=JSONFactoryUtil.serialize(settingsMap);
    exportImportConfiguration.setSettings(settings);
  }
  return exportImportConfigurationPersistence.update(exportImportConfiguration);
}
