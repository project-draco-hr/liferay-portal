{
  long companyId=message.getLong("companyId");
  CompanyThreadLocal.setCompanyId(companyId);
  BatchablePipe<String,BufferedIncreasableEntry> batchablePipe=(BatchablePipe<String,BufferedIncreasableEntry>)message.getPayload();
  while (true) {
    BufferedIncreasableEntry bufferedIncreasableEntry=(BufferedIncreasableEntry)batchablePipe.take();
    if (bufferedIncreasableEntry == null) {
      break;
    }
    try {
      bufferedIncreasableEntry.proceed();
    }
 catch (    Throwable t) {
      _log.error("Cannot write buffered increment value to the database",t);
    }
  }
}
