{
  List<StagedModel> folderDependentStagedModels=dependentStagedModelsMap.get(DLFolder.class.getSimpleName());
  Folder folder=(Folder)folderDependentStagedModels.get(0);
  List<StagedModel> dlFileEntryTypeDependentStagedModels=dependentStagedModelsMap.get(DLFileEntryType.class.getSimpleName());
  DLFileEntryType dlFileEntryType=(DLFileEntryType)dlFileEntryTypeDependentStagedModels.get(0);
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(group.getGroupId(),TestPropsValues.getUserId());
  folder=DLAppServiceUtil.addFolder(group.getGroupId(),folder.getFolderId(),RandomTestUtil.randomString(),RandomTestUtil.randomString(),serviceContext);
  DLFolder dlFolder=(DLFolder)folder.getModel();
  dlFolder.setDefaultFileEntryTypeId(dlFileEntryType.getFileEntryTypeId());
  dlFolder.setRestrictionType(DLFolderConstants.RESTRICTION_TYPE_FILE_ENTRY_TYPES_AND_WORKFLOW);
  DLFolderLocalServiceUtil.updateDLFolder(dlFolder);
  List<Long> dlFileEntryTypeIds=new ArrayList<>();
  dlFileEntryTypeIds.add(dlFileEntryType.getFileEntryTypeId());
  DLFileEntryTypeLocalServiceUtil.updateFolderFileEntryTypes(dlFolder,dlFileEntryTypeIds,dlFileEntryType.getFileEntryTypeId(),serviceContext);
  return folder;
}
