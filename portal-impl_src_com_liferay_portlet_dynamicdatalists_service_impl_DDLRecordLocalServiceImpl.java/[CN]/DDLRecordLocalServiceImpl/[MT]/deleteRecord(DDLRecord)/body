{
  ddlRecordPersistence.remove(record);
  List<DDLRecordVersion> recordVersions=ddlRecordVersionPersistence.findByRecordId(record.getRecordId());
  for (  DDLRecordVersion recordVersion : recordVersions) {
    ddlRecordVersionPersistence.remove(recordVersion);
    StorageEngineUtil.deleteByClass(recordVersion.getDDMStorageId());
    workflowInstanceLinkLocalService.deleteWorkflowInstanceLinks(record.getCompanyId(),record.getGroupId(),DDLRecord.class.getName(),recordVersion.getPrimaryKey());
  }
  Indexer indexer=IndexerRegistryUtil.nullSafeGetIndexer(DDLRecord.class);
  indexer.delete(record);
  try {
    DLStoreUtil.deleteDirectory(record.getCompanyId(),CompanyConstants.SYSTEM,DDMUtil.getFileUploadPath(record));
  }
 catch (  NoSuchDirectoryException nsde) {
    if (_log.isDebugEnabled()) {
      _log.debug(nsde.getMessage());
    }
  }
}
