{
  long companyId=record.getCompanyId();
  long repositoryId=CompanyConstants.SYSTEM;
  String dirName=DDLUtil.getRecordFileUploadPath(record);
  try {
    DLStoreUtil.deleteDirectory(companyId,repositoryId,dirName);
  }
 catch (  NoSuchDirectoryException nsde) {
    if (_log.isDebugEnabled()) {
      _log.debug(nsde.getMessage());
    }
  }
  ddlRecordPersistence.remove(record);
  List<DDLRecordVersion> recordVersions=ddlRecordVersionPersistence.findByRecordId(record.getRecordId());
  for (  DDLRecordVersion recordVersion : recordVersions) {
    ddlRecordVersionPersistence.remove(recordVersion);
    StorageEngineUtil.deleteByClass(recordVersion.getDDMStorageId());
    workflowInstanceLinkLocalService.deleteWorkflowInstanceLinks(record.getCompanyId(),record.getGroupId(),DDLRecord.class.getName(),recordVersion.getPrimaryKey());
  }
}
