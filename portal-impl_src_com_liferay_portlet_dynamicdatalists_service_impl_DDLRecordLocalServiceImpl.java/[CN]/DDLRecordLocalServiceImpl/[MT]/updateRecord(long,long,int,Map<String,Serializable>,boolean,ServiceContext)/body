{
  DDLRecord record=ddlRecordPersistence.findByPrimaryKey(recordId);
  DDMFormValues oldDDMFormValues=record.getDDMFormValues();
  DDLRecordSet recordSet=record.getRecordSet();
  DDMStructure ddmStructure=recordSet.getDDMStructure();
  Fields fields=toFields(ddmStructure.getStructureId(),fieldsMap,serviceContext.getLocale(),oldDDMFormValues.getDefaultLocale(),false);
  return ddlRecordLocalService.updateRecord(userId,recordId,false,displayIndex,fields,mergeFields,serviceContext);
}
