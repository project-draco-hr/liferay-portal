{
  DDLRecord record=ddlRecordPersistence.findByPrimaryKey(recordId);
  Fields oldFields=record.getFields();
  DDLRecordSet recordSet=record.getRecordSet();
  DDMStructure ddmStructure=recordSet.getDDMStructure();
  Fields fields=toFields(ddmStructure.getStructureId(),fieldsMap,serviceContext.getLocale(),oldFields.getDefaultLocale());
  return ddlRecordLocalService.updateRecord(userId,recordId,false,displayIndex,fields,mergeFields,serviceContext);
}
