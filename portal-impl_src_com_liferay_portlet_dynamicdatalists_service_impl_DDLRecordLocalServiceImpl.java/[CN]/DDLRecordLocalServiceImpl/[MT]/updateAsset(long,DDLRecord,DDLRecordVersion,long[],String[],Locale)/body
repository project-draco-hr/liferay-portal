{
  boolean addDraftAssetEntry=false;
  if ((recordVersion != null) && !recordVersion.isApproved()) {
    String version=recordVersion.getVersion();
    if (!version.equals(DDLRecordConstants.VERSION_DEFAULT)) {
      int approvedRecordVersionsCount=ddlRecordVersionPersistence.countByR_S(record.getRecordId(),WorkflowConstants.STATUS_APPROVED);
      if (approvedRecordVersionsCount > 0) {
        addDraftAssetEntry=true;
      }
    }
  }
  boolean visible=false;
  if ((recordVersion != null) && !recordVersion.isApproved()) {
    visible=false;
  }
  DDLRecordSet recordSet=record.getRecordSet();
  String title=LanguageUtil.format(locale,"new-record-for-list-x",recordSet.getName(locale));
  if (addDraftAssetEntry) {
    assetEntryLocalService.updateEntry(userId,record.getGroupId(),DDLRecordConstants.getClassName(),recordVersion.getRecordVersionId(),record.getUuid(),0,assetCategoryIds,assetTagNames,false,null,null,null,null,ContentTypes.TEXT_HTML,title,null,StringPool.BLANK,null,null,0,0,null,false);
  }
 else {
    assetEntryLocalService.updateEntry(userId,record.getGroupId(),DDLRecordConstants.getClassName(),record.getRecordId(),record.getUuid(),0,assetCategoryIds,assetTagNames,visible,null,null,null,null,ContentTypes.TEXT_HTML,title,null,StringPool.BLANK,null,null,0,0,null,false);
  }
}
