{
  JSONObject ddlRecordJSONObject=JSONFactoryUtil.createJSONObject();
  ddlRecordJSONObject.put("modelAttributes",JSONFactoryUtil.createJSONObject(JSONFactoryUtil.looseSerialize(ddlRecord.getModelAttributes())));
  Map<String,Object> ddlRecordMap=new HashMap<String,Object>();
  Fields fields=ddlRecord.getFields();
  Set<Locale> availableLocales=fields.getAvailableLocales();
  if ((locale == null) || !availableLocales.contains(locale)) {
    locale=fields.getDefaultLocale();
  }
  for (  Field field : fields) {
    Object fieldValue=getFieldValue(field,locale);
    if (fieldValue != null) {
      ddlRecordMap.put(field.getName(),fieldValue);
    }
  }
  ddlRecordJSONObject.put("modelValues",JSONFactoryUtil.createJSONObject(JSONFactoryUtil.looseSerialize(ddlRecordMap)));
  return ddlRecordJSONObject;
}
