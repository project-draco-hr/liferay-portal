{
  String eTag=(String)request.getAttribute(ETAG);
  if (eTag != null) {
    return;
  }
  eTag=Integer.toHexString(Arrays.hashCode(bytes));
  request.setAttribute(ETAG,eTag);
  response.setHeader(HttpHeaders.ETAG,eTag);
  String ifNoneMatch=request.getHeader(HttpHeaders.IF_NONE_MATCH);
  if (eTag.equals(ifNoneMatch)) {
    response.setStatus(HttpServletResponse.SC_NOT_MODIFIED);
  }
}
