{
  if (_byteBuffer != null) {
    return _byteBuffer.limit();
  }
  if (_charBuffer != null) {
    ByteBuffer byteBuffer=CharsetEncoderUtil.encode(getCharacterEncoding(),_charBuffer.duplicate());
    return byteBuffer.limit();
  }
  try {
    _flushInternalBuffer();
  }
 catch (  IOException ioe) {
    throw new RuntimeException(ioe);
  }
  if (_unsyncByteArrayOutputStream != null) {
    return _unsyncByteArrayOutputStream.size();
  }
  if (_unsyncStringWriter != null) {
    String content=_unsyncStringWriter.toString();
    ByteBuffer byteBuffer=CharsetEncoderUtil.encode(getCharacterEncoding(),content);
    return byteBuffer.limit();
  }
  return 0;
}
