{
  if (_mbeanServer == null || _bus == null) {
    throw new IllegalStateException("Must configure a mbean server " + "and a message bus");
  }
  _mbeanServer.registerMBean(new MessageBusManager(_bus),MessageBusManager.createObjectName());
  Collection<Destination> destinations=((MessageBusManagement)_bus).getDestinations();
  for (  Destination destination : destinations) {
    _registerDestination(destination);
  }
}
