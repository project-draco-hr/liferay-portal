{
  PortletURL categoriesURL=res.createRenderURL();
  categoriesURL.setWindowState(WindowState.MAXIMIZED);
  categoriesURL.setParameter("struts_action","/shopping/view");
  categoriesURL.setParameter("tabs1","categories");
  String categoriesLink="<a href=\"" + categoriesURL.toString() + "\">"+ LanguageUtil.get(pageContext,"categories")+ "</a>";
  if (category == null) {
    return categoriesLink;
  }
  String breadcrumbs=StringPool.BLANK;
  if (category != null) {
    for (int i=0; ; i++) {
      PortletURL portletURL=res.createRenderURL();
      portletURL.setWindowState(WindowState.MAXIMIZED);
      portletURL.setParameter("struts_action","/shopping/view");
      portletURL.setParameter("tabs1","categories");
      portletURL.setParameter("categoryId",category.getCategoryId());
      String categoryLink="<a href=\"" + portletURL.toString() + "\">"+ category.getName()+ "</a>";
      if (i == 0) {
        breadcrumbs=categoryLink;
      }
 else {
        breadcrumbs=categoryLink + " &raquo; " + breadcrumbs;
      }
      if (category.isRoot()) {
        break;
      }
      category=ShoppingCategoryLocalServiceUtil.getCategory(category.getParentCategoryId());
    }
  }
  breadcrumbs=categoriesLink + " &raquo; " + breadcrumbs;
  return breadcrumbs;
}
