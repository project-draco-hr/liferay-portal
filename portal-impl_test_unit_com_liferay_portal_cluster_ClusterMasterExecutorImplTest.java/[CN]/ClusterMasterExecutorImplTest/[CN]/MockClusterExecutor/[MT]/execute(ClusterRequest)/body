{
  List<Address> addresses=new ArrayList<>();
  Collection<Address> clusterNodeAddresses=clusterRequest.getTargetClusterNodeAddresses();
  if (clusterNodeAddresses != null) {
    addresses.addAll(clusterNodeAddresses);
  }
  Set<String> clusterNodeIds=new HashSet<>();
  for (  Address address : addresses) {
    MockAddress mockAddress=(MockAddress)address.getRealAddress();
    clusterNodeIds.add(mockAddress.getName());
  }
  FutureClusterResponses futureClusterResponses=new FutureClusterResponses(clusterNodeIds);
  for (  Address address : addresses) {
    ClusterNodeResponse clusterNodeResponse=new ClusterNodeResponse();
    clusterNodeResponse.setAddress(address);
    clusterNodeResponse.setClusterMessageType(ClusterMessageType.EXECUTE);
    clusterNodeResponse.setMulticast(clusterRequest.isMulticast());
    clusterNodeResponse.setUuid(clusterRequest.getUuid());
    MockAddress mockAddress=(MockAddress)address.getRealAddress();
    try {
      clusterNodeResponse.setClusterNode(new ClusterNode(mockAddress.getName(),InetAddress.getLocalHost()));
      MethodHandler methodHandler=clusterRequest.getMethodHandler();
      clusterNodeResponse.setResult(methodHandler.invoke());
    }
 catch (    Exception e) {
      throw new RuntimeException(e);
    }
    futureClusterResponses.addClusterNodeResponse(clusterNodeResponse);
  }
  return futureClusterResponses;
}
