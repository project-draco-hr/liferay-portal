{
  ClusterMasterExecutorImpl clusterMasterExecutorImpl=new ClusterMasterExecutorImpl();
  MockClusterExecutor mockClusterExecutor=new MockClusterExecutor(true);
  mockClusterExecutor.addClusterNodeId(_OTHER_CLUSTER_NODE_ID);
  clusterMasterExecutorImpl.setClusterExecutor(mockClusterExecutor);
  clusterMasterExecutorImpl.initialize();
  Assert.assertTrue(clusterMasterExecutorImpl.isMaster());
  MockClusterMasterTokenTransitionListener mockClusterMasterTokenTransitionListener=new MockClusterMasterTokenTransitionListener();
  clusterMasterExecutorImpl.registerClusterMasterTokenTransitionListener(mockClusterMasterTokenTransitionListener);
  _mockLockLocalService.setLock(_OTHER_CLUSTER_NODE_ID);
  clusterMasterExecutorImpl.getMasterClusterNodeId();
  Assert.assertFalse(clusterMasterExecutorImpl.isMaster());
  Assert.assertTrue(mockClusterMasterTokenTransitionListener.isMasterTokenReleasedNotified());
  _mockLockLocalService.setLock(_LOCAL_CLUSTER_NODE_ID);
  clusterMasterExecutorImpl.getMasterClusterNodeId();
  Assert.assertTrue(clusterMasterExecutorImpl.isMaster());
  Assert.assertTrue(mockClusterMasterTokenTransitionListener.isMasterTokenAcquiredNotified());
}
