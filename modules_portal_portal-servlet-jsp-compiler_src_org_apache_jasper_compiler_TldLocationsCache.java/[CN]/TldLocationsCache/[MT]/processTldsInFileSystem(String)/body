{
  Set dirList=ctxt.getResourcePaths(startPath);
  if (dirList != null) {
    Iterator it=dirList.iterator();
    while (it.hasNext()) {
      String path=(String)it.next();
      if (path.endsWith("/")) {
        processTldsInFileSystem(path);
      }
      if (!path.endsWith(".tld")) {
        continue;
      }
      if (path.startsWith("/WEB-INF/tags/") && !path.endsWith("implicit.tld")) {
        throw new JasperException(Localizer.getMessage("jsp.error.tldinit.tldInWebInfTags",path));
      }
      InputStream stream=ctxt.getResourceAsStream(path);
      String uri=null;
      try {
        uri=getUriFromTld(path,stream);
      }
  finally {
        if (stream != null) {
          try {
            stream.close();
          }
 catch (          Throwable t) {
          }
        }
      }
      if (uri != null && mappings.get(uri) == null && !systemUris.contains(uri) && (!systemUrisJsf.contains(uri) || useMyFaces)) {
        mappings.put(uri,new String[]{path,null});
      }
    }
  }
}
