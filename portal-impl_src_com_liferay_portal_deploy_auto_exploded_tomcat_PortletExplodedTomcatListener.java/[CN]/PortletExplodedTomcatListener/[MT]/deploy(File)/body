{
  if (_log.isDebugEnabled()) {
    _log.debug("Invoking deploy for " + file.getPath());
  }
  ExplodedTomcatDeployer deployer=null;
  File docBaseDir=getDocBaseDir(file,"index.php");
  if (docBaseDir != null) {
    deployer=getPhpDeployer();
  }
 else {
    docBaseDir=getDocBaseDir(file,"WEB-INF/" + Portal.PORTLET_XML_FILE_NAME_STANDARD);
    if (docBaseDir != null) {
      deployer=_deployer;
    }
 else {
      return;
    }
  }
  if (_log.isInfoEnabled()) {
    _log.info("Modifying portlets for " + file.getPath());
  }
  deployer.explodedTomcatDeploy(file,docBaseDir,null);
  if (_log.isInfoEnabled()) {
    _log.info("Portlets for " + file.getPath() + " modified successfully");
  }
  if (ServerDetector.isTomcat()) {
    copyContextFile(file);
  }
}
