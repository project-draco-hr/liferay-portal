{
  User user=_userLocalService.getUser(userId);
  SocialInteractionsConfiguration socialInteractionsConfiguration=SocialInteractionsConfigurationUtil.getSocialInteractionsConfiguration(user.getCompanyId(),MentionsPortletKeys.MENTIONS);
  Matcher matcher=_pattern.matcher(content);
  Set<String> mentionedUsersScreenNames=new HashSet<>();
  while (matcher.find()) {
    String mentionedUserScreenName=matcher.group(2);
    List<User> users=_mentionsUserFinder.getUsers(user.getCompanyId(),userId,mentionedUserScreenName,socialInteractionsConfiguration);
    for (    User curUser : users) {
      if (mentionedUserScreenName.equals(curUser.getScreenName())) {
        mentionedUsersScreenNames.add(mentionedUserScreenName);
        break;
      }
    }
  }
  return mentionedUsersScreenNames.toArray(new String[mentionedUsersScreenNames.size()]);
}
