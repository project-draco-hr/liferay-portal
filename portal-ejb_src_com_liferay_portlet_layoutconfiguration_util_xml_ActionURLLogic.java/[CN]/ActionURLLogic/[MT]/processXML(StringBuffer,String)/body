{
  SAXReader reader=new SAXReader();
  Document doc=reader.read(new StringReader(xml));
  Element root=doc.getRootElement();
  PortletURLImpl portletURL=(PortletURLImpl)_res.createPortletURL(isAction());
  String portletName=root.attributeValue("portlet-name");
  if (portletName != null) {
    portletURL.setPortletName(portletName);
  }
  for (int i=1; ; i++) {
    String paramName=root.attributeValue("param-name-" + i);
    String paramValue=root.attributeValue("param-value-" + i);
    if ((paramName == null) || (paramValue == null)) {
      break;
    }
    portletURL.setParameter(paramName,paramValue);
  }
  sb.append(portletURL.toString());
}
