{
  if (_forwardCookies.length == 0) {
    return;
  }
  Map<String,String> cookiesMap=new HashMap<>();
  Object cookiesObject=messageContext.getProperty(HTTPConstants.HEADER_COOKIE);
  String[] cookies=new String[0];
  if (cookiesObject instanceof String[]) {
    cookies=(String[])cookiesObject;
  }
 else   if (cookiesObject instanceof String) {
    cookies=new String[]{(String)cookiesObject};
  }
  for (  String cookie : cookies) {
    String name=cookie.substring(0,cookie.indexOf(StringPool.EQUAL));
    cookiesMap.put(StringUtil.toLowerCase(name),cookie);
  }
  for (  String forwardCookie : _forwardCookies) {
    String value=CookieKeys.getCookie(request,forwardCookie);
    if (Validator.isNull(value)) {
      continue;
    }
    cookiesMap.put(forwardCookie,forwardCookie.concat(StringPool.EQUAL).concat(value));
  }
  Collection<String> cookiesCollection=cookiesMap.values();
  cookiesObject=cookiesCollection.toArray(new String[0]);
  messageContext.setProperty(HTTPConstants.HEADER_COOKIE,cookiesObject);
}
