{
  try (LoggingTimer loggingTimer=new LoggingTimer()){
    runSQL("alter table DLFileVersion add fileName VARCHAR(255) null");
    try (PreparedStatement ps1=connection.prepareStatement("select fileVersionId, extension, title from " + "DLFileVersion");PreparedStatement ps2=AutoBatchPreparedStatementUtil.concurrentAutoBatch(connection,"update DLFileVersion set fileName = ? where " + "fileVersionId = ?");ResultSet rs=ps1.executeQuery()){
      while (rs.next()) {
        long fileVersionId=rs.getLong("fileVersionId");
        String extension=GetterUtil.getString(rs.getString("extension"));
        String title=GetterUtil.getString(rs.getString("title"));
        String fileName=DLUtil.getSanitizedFileName(title,extension);
        ps2.setString(1,fileName);
        ps2.setLong(2,fileVersionId);
        ps2.addBatch();
      }
      ps2.executeBatch();
    }
   }
 }
