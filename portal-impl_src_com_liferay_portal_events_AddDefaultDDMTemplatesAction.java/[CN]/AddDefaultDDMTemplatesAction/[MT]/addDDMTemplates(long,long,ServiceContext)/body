{
  List<PortletDisplayTemplateHandler> portletDisplayTemplateHandlers=PortletDisplayTemplateHandlerRegistryUtil.getPortletDisplayTemplateHandlers();
  for (  PortletDisplayTemplateHandler portletDisplayTemplateHandler : portletDisplayTemplateHandlers) {
    try {
      long classNameId=PortalUtil.getClassNameId(portletDisplayTemplateHandler.getClassName());
      List<Element> templateElements=portletDisplayTemplateHandler.getDefaultTemplates();
      for (      Element templateElement : templateElements) {
        String templateKey=templateElement.elementText("template-key");
        DDMTemplate ddmTemplate=DDMTemplateLocalServiceUtil.fetchTemplate(groupId,templateKey);
        if (ddmTemplate != null) {
          continue;
        }
        String name=templateElement.elementText("name");
        String description=templateElement.elementText("description");
        String language=templateElement.elementText("language");
        String scriptFile=templateElement.elementText("script-file");
        addDDMTemplate(userId,groupId,classNameId,templateKey,name,description,scriptFile,language,serviceContext);
      }
    }
 catch (    Exception e) {
      if (_log.isWarnEnabled()) {
        _log.warn("Unable to install default portlet display templates " + "for " + portletDisplayTemplateHandler.getName(LocaleUtil.getDefault()));
      }
    }
  }
}
