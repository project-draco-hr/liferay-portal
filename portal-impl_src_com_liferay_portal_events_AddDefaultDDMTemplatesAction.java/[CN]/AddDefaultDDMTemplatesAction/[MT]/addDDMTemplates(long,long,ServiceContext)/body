{
  List<TemplateHandler> templateHandlers=TemplateHandlerRegistryUtil.getTemplateHandlers();
  for (  TemplateHandler templateHandler : templateHandlers) {
    long classNameId=PortalUtil.getClassNameId(templateHandler.getClassName());
    List<Element> templateElements=templateHandler.getDefaultTemplateElements();
    ClassLoader classLoader=templateHandler.getClass().getClassLoader();
    for (    Element templateElement : templateElements) {
      String templateKey=templateElement.elementText("template-key");
      DDMTemplate ddmTemplate=DDMTemplateLocalServiceUtil.fetchTemplate(groupId,classNameId,templateKey);
      if (ddmTemplate != null) {
        continue;
      }
      String name=templateElement.elementText("name");
      String description=templateElement.elementText("description");
      String language=templateElement.elementText("language");
      String scriptFileName=templateElement.elementText("script-file");
      boolean cacheable=GetterUtil.getBoolean(templateElement.elementText("cacheable"));
      Map<Locale,String> nameMap=new HashMap<Locale,String>();
      Map<Locale,String> descriptionMap=new HashMap<Locale,String>();
      Locale[] locales=LanguageUtil.getAvailableLocales(groupId);
      for (      Locale locale : locales) {
        nameMap.put(locale,LanguageUtil.get(locale,name));
        descriptionMap.put(locale,LanguageUtil.get(locale,description));
      }
      String script=ContentUtil.get(classLoader,scriptFileName);
      DDMTemplateLocalServiceUtil.addTemplate(userId,groupId,classNameId,0,templateKey,nameMap,descriptionMap,DDMTemplateConstants.TEMPLATE_TYPE_DISPLAY,null,language,script,cacheable,false,null,null,serviceContext);
    }
  }
}
