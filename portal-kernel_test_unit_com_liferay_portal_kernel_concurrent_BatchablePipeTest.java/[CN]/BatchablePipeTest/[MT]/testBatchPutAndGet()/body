{
  BatchablePipe<String,Integer> batchablePipe=new BatchablePipe<>();
  IncreasableEntry<String,Integer> increasbleEntry1=new IntegerIncreasableEntry("1st",1);
  Assert.assertTrue(batchablePipe.put(increasbleEntry1));
  Assert.assertFalse(batchablePipe.put(increasbleEntry1));
  IncreasableEntry<String,Integer> batchedIncreasableEntry=batchablePipe.take();
  Assert.assertNotSame(increasbleEntry1,batchedIncreasableEntry);
  Assert.assertEquals(increasbleEntry1.getKey(),batchedIncreasableEntry.getKey());
  Assert.assertEquals(2,(int)batchedIncreasableEntry.getValue());
  Assert.assertNull(batchablePipe.take());
  IncreasableEntry<String,Integer> increasbleEntry2=new IntegerIncreasableEntry("2nd",1);
  IncreasableEntry<String,Integer> increasbleEntry3=new IntegerIncreasableEntry("2nd",2);
  Assert.assertTrue(batchablePipe.put(increasbleEntry2));
  Assert.assertFalse(batchablePipe.put(increasbleEntry3));
  batchedIncreasableEntry=batchablePipe.take();
  Assert.assertNotSame(increasbleEntry2,batchedIncreasableEntry);
  Assert.assertNotSame(increasbleEntry3,batchedIncreasableEntry);
  Assert.assertEquals("2nd",batchedIncreasableEntry.getKey());
  Assert.assertEquals(3,(int)batchedIncreasableEntry.getValue());
  Assert.assertNull(batchablePipe.take());
  IncreasableEntry<String,Integer> increasbleEntry4=new IntegerIncreasableEntry("3rd",1);
  IncreasableEntry<String,Integer> increasbleEntry5=new IntegerIncreasableEntry("4th",1);
  IncreasableEntry<String,Integer> increasbleEntry6=new IntegerIncreasableEntry("4th",2);
  IncreasableEntry<String,Integer> increasbleEntry7=new IntegerIncreasableEntry("3rd",3);
  IncreasableEntry<String,Integer> increasbleEntry8=new IntegerIncreasableEntry("5th",1);
  Assert.assertTrue(batchablePipe.put(increasbleEntry4));
  Assert.assertTrue(batchablePipe.put(increasbleEntry5));
  Assert.assertFalse(batchablePipe.put(increasbleEntry6));
  Assert.assertFalse(batchablePipe.put(increasbleEntry7));
  Assert.assertTrue(batchablePipe.put(increasbleEntry8));
  batchedIncreasableEntry=batchablePipe.take();
  Assert.assertNotSame(increasbleEntry4,batchedIncreasableEntry);
  Assert.assertNotSame(increasbleEntry5,batchedIncreasableEntry);
  Assert.assertNotSame(increasbleEntry6,batchedIncreasableEntry);
  Assert.assertNotSame(increasbleEntry7,batchedIncreasableEntry);
  Assert.assertNotSame(increasbleEntry8,batchedIncreasableEntry);
  Assert.assertEquals("4th",batchedIncreasableEntry.getKey());
  Assert.assertEquals(3,(int)batchedIncreasableEntry.getValue());
  batchedIncreasableEntry=batchablePipe.take();
  Assert.assertNotSame(increasbleEntry4,batchedIncreasableEntry);
  Assert.assertNotSame(increasbleEntry5,batchedIncreasableEntry);
  Assert.assertNotSame(increasbleEntry6,batchedIncreasableEntry);
  Assert.assertNotSame(increasbleEntry7,batchedIncreasableEntry);
  Assert.assertNotSame(increasbleEntry8,batchedIncreasableEntry);
  Assert.assertEquals("3rd",batchedIncreasableEntry.getKey());
  Assert.assertEquals(4,(int)batchedIncreasableEntry.getValue());
  batchedIncreasableEntry=batchablePipe.take();
  Assert.assertNotSame(increasbleEntry4,batchedIncreasableEntry);
  Assert.assertNotSame(increasbleEntry5,batchedIncreasableEntry);
  Assert.assertNotSame(increasbleEntry6,batchedIncreasableEntry);
  Assert.assertNotSame(increasbleEntry7,batchedIncreasableEntry);
  Assert.assertSame(increasbleEntry8,batchedIncreasableEntry);
  Assert.assertNull(batchablePipe.take());
}
