{
  long threadId=counterLocalService.increment();
  addMBThread(PortalUUIDUtil.generate(),threadId,mbThread.getGroupId(),mbThread.getCompanyId(),mbThread.getUserId(),mbThread.getUserName(),mbThread.getCreateDate(),mbThread.getModifiedDate(),mbThread.getCategoryId(),0,mbThread.getRootMessageUserId(),mbThread.getMessageCount(),mbThread.getViewCount(),mbThread.getLastPostByUserId(),mbThread.getLastPostDate(),mbThread.getPriority(),mbThread.isQuestion(),mbThread.getStatus(),mbThread.getStatusByUserId(),mbThread.getStatusByUserName(),mbThread.getStatusDate());
  Map<Long,Long> mbMessageIds=new HashMap<>();
  List<MBMessage> mbMessages=mbMessagePersistence.findByThreadId(mbThread.getThreadId());
  for (  MBMessage mbMessage : mbMessages) {
    importMBMessage(mbMessage,threadId,calendarBookingId,mbMessageIds);
  }
  updateMBThreadRootMessageId(threadId,mbMessageIds.get(mbThread.getRootMessageId()));
  return threadId;
}
