{
  if (text == null) {
    return null;
  }
  StringBuilder sb=new StringBuilder();
  BufferedReader br=new BufferedReader(new StringReader(text));
  String s=StringPool.BLANK;
  while ((s=br.readLine()) != null) {
    if (s.length() == 0) {
      sb.append(lineSeparator);
      continue;
    }
    int lineLength=0;
    String[] tokens=s.split(StringPool.SPACE);
    for (    String token : tokens) {
      if ((lineLength + token.length() + 1) > width) {
        if (lineLength > 0) {
          sb.append(lineSeparator);
        }
        sb.append(token);
        lineLength=token.length();
      }
 else {
        if (lineLength > 0) {
          sb.append(StringPool.SPACE);
          lineLength++;
        }
        sb.append(token);
        lineLength+=token.length();
      }
    }
    sb.append(lineSeparator);
  }
  return sb.toString();
}
