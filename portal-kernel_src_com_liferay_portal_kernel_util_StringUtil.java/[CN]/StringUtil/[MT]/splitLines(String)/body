{
  if (Validator.isNull(s)) {
    return _emptyStringArray;
  }
  s=s.trim();
  List<String> lines=new ArrayList<>();
  int lastIndex=0;
  while (true) {
    int returnIndex=s.indexOf(CharPool.RETURN,lastIndex);
    if (returnIndex == -1) {
      _split(lines,s,lastIndex,CharPool.NEW_LINE);
      return lines.toArray(new String[lines.size()]);
    }
    int newLineIndex=s.indexOf(CharPool.NEW_LINE,lastIndex);
    if (newLineIndex == -1) {
      _split(lines,s,lastIndex,CharPool.RETURN);
      return lines.toArray(new String[lines.size()]);
    }
    if (newLineIndex < returnIndex) {
      lines.add(s.substring(lastIndex,newLineIndex));
      lastIndex=newLineIndex + 1;
    }
 else {
      lines.add(s.substring(lastIndex,returnIndex));
      lastIndex=returnIndex + 1;
      if (lastIndex == newLineIndex) {
        lastIndex++;
      }
    }
  }
}
