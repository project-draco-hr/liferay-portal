{
  if (text == null) {
    return null;
  }
  StringBuilder sb=new StringBuilder();
  try {
    BufferedReader br=new BufferedReader(new StringReader(text));
    String s=StringPool.BLANK;
    while ((s=br.readLine()) != null) {
      if (s.length() == 0) {
        sb.append(lineSeparator);
      }
 else {
        String[] tokens=s.split(StringPool.SPACE);
        boolean firstWord=true;
        int curLineLength=0;
        for (int i=0; i < tokens.length; i++) {
          if (!firstWord) {
            sb.append(StringPool.SPACE);
            curLineLength++;
          }
          if (firstWord) {
            sb.append(lineSeparator);
          }
          sb.append(tokens[i]);
          curLineLength+=tokens[i].length();
          if (curLineLength >= width) {
            firstWord=true;
            curLineLength=0;
          }
 else {
            firstWord=false;
          }
        }
      }
    }
  }
 catch (  IOException ioe) {
    _log.error(ioe.getMessage());
  }
  return sb.toString();
}
