{
  if ((add == null) || (delimiter == null)) {
    return null;
  }
  if (s == null) {
    s=StringPool.BLANK;
  }
  if (allowDuplicates || !contains(s,add,delimiter)) {
    StringMaker sm=new StringMaker();
    sm.append(s);
    if (Validator.isNull(s) || s.endsWith(delimiter)) {
      sm.append(add);
      sm.append(delimiter);
    }
 else {
      sm.append(delimiter);
      sm.append(add);
      sm.append(delimiter);
    }
    s=sm.toString();
  }
  return s;
}
