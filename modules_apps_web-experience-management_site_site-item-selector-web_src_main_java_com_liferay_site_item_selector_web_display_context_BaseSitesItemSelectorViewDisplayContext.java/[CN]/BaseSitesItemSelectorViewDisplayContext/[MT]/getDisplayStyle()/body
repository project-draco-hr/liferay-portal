{
  String displayStyle=ParamUtil.getString(request,"displayStyle","");
  PortalPreferences portalPreferences=PortletPreferencesFactoryUtil.getPortalPreferences(request);
  String currentDisplayStyle=portalPreferences.getValue(SitesItemSelectorWebKeys.SITES_ITEM_SELECTOR,"display-style","icon");
  if (Validator.isBlank(displayStyle) || displayStyle.equals(currentDisplayStyle)) {
    return currentDisplayStyle;
  }
 else {
    portalPreferences.setValue(SitesItemSelectorWebKeys.SITES_ITEM_SELECTOR,"display-style",displayStyle);
    request.setAttribute(WebKeys.SINGLE_PAGE_APPLICATION_CLEAR_CACHE,Boolean.TRUE);
    return displayStyle;
  }
}
