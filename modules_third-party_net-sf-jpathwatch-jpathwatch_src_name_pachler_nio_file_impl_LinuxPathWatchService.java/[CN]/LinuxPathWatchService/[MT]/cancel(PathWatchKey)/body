{
  if (inotifyFd == -1)   throw new ClosedWatchServiceException();
  int wd=-1;
  Set<Entry<Integer,LinuxPathWatchKey>> entrySet=keys.entrySet();
  Iterator<Entry<Integer,LinuxPathWatchKey>> iterator=entrySet.iterator();
  while (iterator.hasNext()) {
    Entry<Integer,LinuxPathWatchKey> entry=iterator.next();
    if (entry.getValue() == pathWatchKey) {
      wd=entry.getKey().intValue();
      if ((pathWatchKey.getFlags() & FLAG_FILTER_KEY_INVALID) != 0)       inotifyEventHandler(wd,IN_IGNORED,0,null);
      pathWatchKey.invalidate();
      iterator.remove();
      break;
    }
  }
  if (pathWatchKey == null)   return;
  int result=inotify_rm_watch(inotifyFd,wd);
  if (result == -1)   Logger.getLogger(getClass().getName()).log(Level.WARNING,"inotify_rm_watch() failed: {0}",strerror(errno()));
}
