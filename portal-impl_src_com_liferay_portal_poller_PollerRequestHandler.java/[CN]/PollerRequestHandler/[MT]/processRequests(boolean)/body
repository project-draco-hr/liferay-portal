{
  if (receiveRequest) {
    MessageBusUtil.registerMessageListener(DestinationNames.POLLER_RESPONSE,this);
  }
  try {
    for (    PollerRequest pollerRequest : _pollerRequests.values()) {
      Message message=new Message();
      message.setPayload(pollerRequest);
      message.setResponseDestinationName(DestinationNames.POLLER_RESPONSE);
      String responseId=PortalUUIDUtil.generate();
      message.setResponseId(responseId);
      _responseIds.put(responseId,responseId);
      MessageBusUtil.sendMessage(DestinationNames.POLLER,message);
    }
synchronized (this) {
      if (_responseCount != _pollerRequests.size()) {
        try {
          this.wait(PropsValues.POLLER_REQUEST_TIMEOUT);
        }
 catch (        InterruptedException ie) {
        }
      }
    }
  }
  finally {
    if (receiveRequest) {
      MessageBusUtil.unregisterMessageListener(DestinationNames.POLLER_RESPONSE,this);
    }
  }
}
