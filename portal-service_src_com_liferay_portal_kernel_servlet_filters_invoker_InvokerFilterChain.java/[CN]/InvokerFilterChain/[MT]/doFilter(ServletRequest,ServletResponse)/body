{
  if (_filters.isEmpty()) {
    _filterChain.doFilter(servletRequest,servletResponse);
  }
 else {
    HttpServletRequest request=(HttpServletRequest)servletRequest;
    HttpServletResponse response=(HttpServletResponse)servletResponse;
    Filter filter=_filters.remove();
    boolean filterEnabled=true;
    if (filter instanceof PortalClassLoaderFilter) {
      PortalClassLoaderFilter portalClassLoaderFilter=(PortalClassLoaderFilter)filter;
      if (portalClassLoaderFilter.getWrappedFilter() instanceof LiferayFilter) {
        LiferayFilter liferayFilter=(LiferayFilter)portalClassLoaderFilter.getWrappedFilter();
        filterEnabled=liferayFilter.isFilterEnabled(request,response);
      }
    }
    if (filter instanceof LiferayFilter) {
      LiferayFilter liferayFilter=(LiferayFilter)filter;
      filterEnabled=liferayFilter.isFilterEnabled(request,response);
    }
    if (filterEnabled) {
      if (filter instanceof DirectCallFilter) {
        try {
          processDirectCallFilter(filter,request,response);
        }
 catch (        IOException ioe) {
          throw ioe;
        }
catch (        ServletException se) {
          throw se;
        }
catch (        Exception e) {
          throw new ServletException(e);
        }
      }
 else {
        filter.doFilter(request,response,this);
      }
    }
 else {
      if (_log.isDebugEnabled()) {
        _log.debug("Skip disabled filter " + filter.getClass());
      }
      doFilter(request,response);
    }
  }
}
