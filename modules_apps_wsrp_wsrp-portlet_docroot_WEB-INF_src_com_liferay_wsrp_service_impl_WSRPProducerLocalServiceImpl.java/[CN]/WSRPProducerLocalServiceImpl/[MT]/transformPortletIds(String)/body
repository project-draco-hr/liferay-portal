{
  String[] portletIdsArray=StringUtil.split(portletIds);
  for (int i=0; i < portletIdsArray.length; i++) {
    String portletId=portletIdsArray[i];
    if (portletId.contains(PortletConstants.INSTANCE_SEPARATOR)) {
      continue;
    }
    Portlet portlet=PortletLocalServiceUtil.getPortletById(portletId);
    if (!portlet.isInstanceable()) {
      continue;
    }
    String instanceId=PwdGenerator.getPassword(PwdGenerator.KEY1 + PwdGenerator.KEY2 + PwdGenerator.KEY3,4);
    portletIdsArray[i]=portletId + PortletConstants.INSTANCE_SEPARATOR + instanceId;
  }
  return StringUtil.merge(portletIdsArray);
}
