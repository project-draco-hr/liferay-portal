{
  PortletPreferences prefs=req.getPreferences();
  String userId=prefs.getValue("user-id",StringPool.BLANK);
  String password=prefs.getValue("password",StringPool.BLANK);
  String uuid=prefs.getValue("uuid",StringPool.BLANK);
  String path=ParamUtil.getString(req,"path");
  boolean maximizeLinks=GetterUtil.getBoolean(prefs.getValue("maximize-links",StringPool.BLANK));
  uuid=ParamUtil.getString(req,"uuid",uuid);
  req.setAttribute("uuid",uuid);
  String content=null;
  try {
    content=AlfrescoContentCacheUtil.getContent(userId,password,uuid,path,maximizeLinks,res);
  }
 catch (  Exception e) {
    Throwable cause=e.getCause();
    if (cause != null) {
      _log.error(cause.getMessage());
    }
 else {
      _log.error(e.getMessage());
    }
  }
  req.setAttribute(WebKeys.ALFRESCO_CONTENT,content);
  boolean preview=ParamUtil.getBoolean(req,"preview");
  if (!preview) {
    return mapping.findForward("portlet.alfresco_content.view_1");
  }
 else {
    return mapping.findForward("portlet.alfresco_content.view_2");
  }
}
