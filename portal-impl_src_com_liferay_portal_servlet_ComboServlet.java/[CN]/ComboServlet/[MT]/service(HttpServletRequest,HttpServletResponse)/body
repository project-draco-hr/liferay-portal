{
  Map<String,String[]> parameterMap=request.getParameterMap();
  if (parameterMap.size() == 0) {
    response.sendError(HttpServletResponse.SC_BAD_REQUEST);
    return;
  }
  String minifierType=ParamUtil.getString(request,"minifierType");
  int size=parameterMap.size();
  byte[][] bytesArray=new byte[size][];
  for (  String modulePath : parameterMap.keySet()) {
    bytesArray[--size]=getFileContent(modulePath,minifierType);
  }
  String contentType=ContentTypes.TEXT_JAVASCRIPT;
  String firstModulePath=(String)request.getParameterNames().nextElement();
  String extension=FileUtil.getExtension(firstModulePath);
  if (extension.equalsIgnoreCase(_CSS_EXTENSION)) {
    contentType=ContentTypes.TEXT_CSS;
  }
  response.setContentType(contentType);
  ServletResponseUtil.write(response,bytesArray);
}
