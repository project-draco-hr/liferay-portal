{
  long targetGroupId=ParamUtil.getLong(actionRequest,"groupId");
  boolean privateLayoutSet=ParamUtil.getBoolean(actionRequest,"privateLayoutSet");
  long layoutSetPrototypeId=ParamUtil.getLong(actionRequest,"layoutSetPrototypeId");
  LayoutSetPrototype layoutSetPrototype=LayoutSetPrototypeServiceUtil.getLayoutSetPrototype(layoutSetPrototypeId);
  SitesUtil.setMergeFailCount(layoutSetPrototype,0);
  LayoutSet targetLayoutSet=LayoutSetLocalServiceUtil.getLayoutSet(targetGroupId,privateLayoutSet);
  SitesUtil.resetPrototype(targetLayoutSet);
  Group targetGroup=GroupLocalServiceUtil.getGroup(targetGroupId);
  SitesUtil.mergeLayoutSetPrototypeLayouts(targetGroup,targetLayoutSet);
  layoutSetPrototype=LayoutSetPrototypeServiceUtil.getLayoutSetPrototype(layoutSetPrototypeId);
  if (SitesUtil.getMergeFailCount(layoutSetPrototype) > 0) {
    SessionErrors.add(actionRequest,"resetMergeFailCountAndMerge");
  }
}
