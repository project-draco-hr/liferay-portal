{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long groupId=ParamUtil.getLong(actionRequest,"groupId");
  if ((groupId == themeDisplay.getDoAsGroupId()) || (groupId == themeDisplay.getScopeGroupId()) || (groupId == getRefererGroupId(themeDisplay))) {
    throw new RequiredGroupException(String.valueOf(groupId));
  }
  Group group=GroupServiceUtil.getGroup(groupId);
  boolean active=false;
  if (cmd.equals(Constants.RESTORE)) {
    active=true;
  }
  ServiceContext serviceContext=ServiceContextFactory.getInstance(Group.class.getName(),actionRequest);
  GroupServiceUtil.updateGroup(groupId,group.getParentGroupId(),group.getName(),group.getDescription(),group.getType(),group.getFriendlyURL(),active,serviceContext);
}
