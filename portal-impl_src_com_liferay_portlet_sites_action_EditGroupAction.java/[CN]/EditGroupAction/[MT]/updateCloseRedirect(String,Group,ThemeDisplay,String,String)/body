{
  if (group == null || Validator.isNull(closeRedirect)) {
    return closeRedirect;
  }
  String oldPath=null;
  String newPath=null;
  if (Validator.isNotNull(oldFriendlyURL)) {
    oldPath=oldFriendlyURL;
    newPath=group.getFriendlyURL();
    if (closeRedirect.indexOf(oldPath) != -1) {
      closeRedirect=PortalUtil.updateRedirect(closeRedirect,oldPath,newPath);
    }
 else {
      closeRedirect=PortalUtil.getGroupFriendlyURL(group,false,themeDisplay);
    }
  }
  if (Validator.isNotNull(oldStagingFriendlyURL)) {
    Group stagingGroup=group.getStagingGroup();
    if (GroupLocalServiceUtil.fetchGroup(stagingGroup.getGroupId()) == null) {
      oldPath=oldStagingFriendlyURL;
      newPath=group.getFriendlyURL();
    }
 else {
      oldPath=oldStagingFriendlyURL;
      newPath=stagingGroup.getFriendlyURL();
    }
    if (closeRedirect.contains(oldPath)) {
      closeRedirect=PortalUtil.updateRedirect(closeRedirect,oldPath,newPath);
    }
 else {
      closeRedirect=PortalUtil.getGroupFriendlyURL(group,false,themeDisplay);
    }
  }
  return closeRedirect;
}
