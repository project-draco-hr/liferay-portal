{
  ServiceContext serviceContext=new ServiceContext();
  byte[] testFileBytes=FileUtil.getBytes(getClass(),_TEST_DDM_STRUCTURE);
  DDMForm ddmForm=_ddmFormXSDDeserializer.deserialize(new String(testFileBytes));
  serviceContext.setAttribute("ddmForm",DDMBeanTranslatorUtil.translate(ddmForm));
  User user=TestPropsValues.getUser();
  serviceContext.setLanguageId(LocaleUtil.toLanguageId(user.getLocale()));
  DLFileEntryType dlFileEntryType=DLFileEntryTypeLocalServiceUtil.addFileEntryType(TestPropsValues.getUserId(),_group.getGroupId(),"Test Structure",StringPool.BLANK,new long[0],serviceContext);
  List<com.liferay.dynamic.data.mapping.kernel.DDMStructure> ddmStructures=dlFileEntryType.getDDMStructures();
  Assert.assertEquals(1,ddmStructures.size());
  DDMStructure ddmStructure=DDMStructureLocalServiceUtil.getStructure(ddmStructures.get(0).getStructureId());
  Locale[] availableLocales=LocaleUtil.fromLanguageIds(ddmStructure.getAvailableLanguageIds());
  boolean hasDefaultLocale=ArrayUtil.contains(availableLocales,LocaleUtil.getSiteDefault());
  Assert.assertTrue(hasDefaultLocale);
  boolean hasHungarianLocale=ArrayUtil.contains(availableLocales,LocaleUtil.HUNGARY);
  Assert.assertTrue(hasHungarianLocale);
  boolean hasUserLocale=ArrayUtil.contains(availableLocales,user.getLocale());
  Assert.assertTrue(hasUserLocale);
  DLFileEntryTypeLocalServiceUtil.deleteDLFileEntryType(dlFileEntryType);
}
