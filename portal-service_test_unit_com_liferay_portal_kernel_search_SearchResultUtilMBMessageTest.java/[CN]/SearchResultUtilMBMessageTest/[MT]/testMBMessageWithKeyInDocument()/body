{
  when(mbMessageLocalService.getMessage(ENTRY_CLASS_PK)).thenReturn(mbMessage);
  mockStatic(IndexerRegistryUtil.class,new ThrowsExceptionClass(IllegalStateException.class));
  searchSingleDocument(createMBMessageDocumentWithAlternateKey());
  Assert.assertEquals(DOCUMENT_CLASS_NAME,result.getClassName());
  Assert.assertEquals(DOCUMENT_CLASS_PK,result.getClassPK());
  List<MBMessage> mbMessages=result.getMBMessages();
  Assert.assertSame(mbMessage,mbMessages.get(0));
  Assert.assertEquals(1,mbMessages.size());
  Assert.assertNull(result.getSummary());
  assertThatEverythingUnrelatedIsEmpty();
}
