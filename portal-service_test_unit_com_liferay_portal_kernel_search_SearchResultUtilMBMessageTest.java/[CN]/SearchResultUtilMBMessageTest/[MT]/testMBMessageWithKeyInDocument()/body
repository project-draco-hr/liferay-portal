{
  when(mbMessageLocalService.getMessage(SearchTestUtil.ENTRY_CLASS_PK)).thenReturn(mbMessage);
  mockStatic(IndexerRegistryUtil.class,new ThrowsExceptionClass(IllegalStateException.class));
  SearchResult searchResult=assertThatSearchSingleDocumentReturnsOneSearchResult(createMBMessageDocumentWithAlternateKey());
  Assert.assertEquals(SearchTestUtil.DOCUMENT_CLASS_NAME,searchResult.getClassName());
  Assert.assertEquals(SearchTestUtil.DOCUMENT_CLASS_PK,searchResult.getClassPK());
  List<MBMessage> mbMessages=searchResult.getMBMessages();
  Assert.assertSame(mbMessage,mbMessages.get(0));
  Assert.assertEquals(1,mbMessages.size());
  Assert.assertNull(searchResult.getSummary());
  assertThatFileEntryTuplesAndVersionsAreEmpty(searchResult);
}
