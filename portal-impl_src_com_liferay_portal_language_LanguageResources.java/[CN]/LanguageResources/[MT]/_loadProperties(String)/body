{
  Properties properties=new Properties();
  boolean enabled=PortalSecurityManagerThreadLocal.isEnabled();
  try {
    PortalSecurityManagerThreadLocal.setEnabled(false);
    ClassLoader classLoader=LanguageResources.class.getClassLoader();
    Enumeration<URL> enu=classLoader.getResources(name);
    if (_log.isDebugEnabled() && !enu.hasMoreElements()) {
      _log.debug("No resources found for " + name);
    }
    while (enu.hasMoreElements()) {
      URL url=enu.nextElement();
      if (_log.isInfoEnabled()) {
        _log.debug("Loading " + name + " from "+ url);
      }
      InputStream inputStream=url.openStream();
      try {
        Properties inputStreamProperties=PropertiesUtil.load(inputStream,StringPool.UTF8);
        properties.putAll(inputStreamProperties);
        if (_log.isInfoEnabled()) {
          _log.info("Loading " + url + " with "+ inputStreamProperties.size()+ " values");
        }
      }
  finally {
        inputStream.close();
      }
    }
  }
 catch (  Exception e) {
    if (_log.isWarnEnabled()) {
      _log.warn(e,e);
    }
  }
 finally {
    PortalSecurityManagerThreadLocal.setEnabled(enabled);
  }
  return properties;
}
