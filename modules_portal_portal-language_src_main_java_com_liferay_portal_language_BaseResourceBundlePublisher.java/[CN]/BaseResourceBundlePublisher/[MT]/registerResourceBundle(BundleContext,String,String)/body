{
  for (  Locale locale : _languageUtil.getAvailableLocales()) {
    ResourceBundle resourceBundle=null;
    try {
      Class<?> clazz=getClass();
      resourceBundle=ResourceBundleUtil.getBundle(bundleName,locale,clazz.getClassLoader());
    }
 catch (    MissingResourceException mre) {
      if (_log.isDebugEnabled()) {
        _log.debug("Unable to create resource bundle for locale " + locale,mre);
      }
      continue;
    }
    Dictionary<String,Object> properties=new HashMapDictionary<>();
    properties.put("javax.portlet.name",portletName);
    properties.put("language.id",LocaleUtil.toLanguageId(locale));
    ServiceRegistration<ResourceBundle> serviceRegistration=bundleContext.registerService(ResourceBundle.class,resourceBundle,properties);
    _serviceRegistrations.add(serviceRegistration);
  }
}
