{
  List<BatchSizeRecord> hostRecentBatchSizes=_recentBatchSizesMap.get(hostName);
  if ((hostRecentBatchSizes == null) || hostRecentBatchSizes.isEmpty()) {
    return 0;
  }
  int recentBatchSizesTotal=0;
  List<BatchSizeRecord> hostRecentBatchSizeEntriesToBeRemoved=new ArrayList<>(hostRecentBatchSizes.size());
  for (  BatchSizeRecord recentBatchSizeRecord : hostRecentBatchSizes) {
    if ((recentBatchSizeRecord.timestamp + recentBatchPeriod) > System.currentTimeMillis()) {
      recentBatchSizesTotal+=recentBatchSizeRecord.size;
    }
 else {
      hostRecentBatchSizeEntriesToBeRemoved.add(recentBatchSizeRecord);
    }
  }
  hostRecentBatchSizes.removeAll(hostRecentBatchSizeEntriesToBeRemoved);
  return recentBatchSizesTotal;
}
