{
  portletDataContext.addPermissions("com.liferay.portlet.bookmarks",portletDataContext.getScopeGroupId());
  Document document=SAXReaderUtil.createDocument();
  Element rootElement=document.addElement("bookmarks-data");
  rootElement.addAttribute("group-id",String.valueOf(portletDataContext.getScopeGroupId()));
  Element foldersElement=rootElement.addElement("folders");
  Element entriesElement=rootElement.addElement("entries");
  List<BookmarksFolder> folders=BookmarksFolderUtil.findByGroupId(portletDataContext.getScopeGroupId());
  for (  BookmarksFolder folder : folders) {
    if (!portletDataContext.isWithinDateRange(folder.getModifiedDate())) {
      continue;
    }
    StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,foldersElement,folder);
  }
  List<BookmarksEntry> entries=BookmarksEntryLocalServiceUtil.getGroupEntries(portletDataContext.getScopeGroupId(),QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  for (  BookmarksEntry entry : entries) {
    if (!portletDataContext.isWithinDateRange(entry.getModifiedDate())) {
      continue;
    }
    StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,new Element[]{foldersElement,entriesElement},entry);
  }
  return document.formattedString();
}
