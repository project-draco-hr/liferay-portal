{
  long rootFolderId=GetterUtil.getLong(portletPreferences.getValue("rootFolderId",null));
  if (rootFolderId != BookmarksFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
    BookmarksFolder folder=BookmarksFolderLocalServiceUtil.getFolder(rootFolderId);
    Portlet portlet=PortletLocalServiceUtil.getPortletById(portletId);
    portletDataContext.addReferenceElement(portlet,rootElement,folder,BookmarksFolder.class,PortletDataContext.REFERENCE_TYPE_DEPENDENCY,!portletDataContext.getBooleanParameter(NAMESPACE,"entries"));
  }
  return portletPreferences;
}
