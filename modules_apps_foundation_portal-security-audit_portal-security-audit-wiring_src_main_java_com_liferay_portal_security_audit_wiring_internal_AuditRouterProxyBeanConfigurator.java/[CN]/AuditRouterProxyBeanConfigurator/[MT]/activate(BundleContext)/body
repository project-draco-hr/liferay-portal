{
  AuditRouterProxyBean auditRouterProxyBean=new AuditRouterProxyBean();
  auditRouterProxyBean.setDestinationName(DestinationNames.AUDIT);
  auditRouterProxyBean.setSynchronousDestinationName(DestinationNames.AUDIT);
  auditRouterProxyBean.setSynchronousMessageSenderMode(SynchronousMessageSender.Mode.DIRECT);
  auditRouterProxyBean.afterPropertiesSet();
  InvocationHandlerFactory invocationHandlerFactory=MessagingProxyInvocationHandler.getInvocationHandlerFactory();
  InvocationHandler invocationHandler=invocationHandlerFactory.createInvocationHandler(auditRouterProxyBean);
  Class<?> beanClass=auditRouterProxyBean.getClass();
  AuditRouter auditRouter=(AuditRouter)ProxyUtil.newProxyInstance(beanClass.getClassLoader(),beanClass.getInterfaces(),invocationHandler);
  Dictionary<String,Object> schedulerEngineDictionary=new HashMapDictionary<>();
  schedulerEngineDictionary.put("audit.router.proxy",Boolean.TRUE);
  _auditRouterSesrviceRegistration=bundleContext.registerService(AuditRouter.class,auditRouter,schedulerEngineDictionary);
}
