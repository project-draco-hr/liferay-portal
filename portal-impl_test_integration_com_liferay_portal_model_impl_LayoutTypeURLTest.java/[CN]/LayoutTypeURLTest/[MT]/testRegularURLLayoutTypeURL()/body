{
  String invalidURLInput="javascript:alert(1)";
  ThemeDisplay themeDisplay=initThemeDisplay(company,group,publicLayout,VIRTUAL_HOSTNAME);
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext();
  Layout layoutURLType=LayoutLocalServiceUtil.addLayout(TestPropsValues.getUserId(),TestPropsValues.getGroupId(),false,publicLayout.getLayoutId(),"Link","Link","Test invalid URL",LayoutConstants.TYPE_URL,false,null,serviceContext);
  MockHttpServletRequest mockHttpServletRequest=new MockHttpServletRequest();
  mockHttpServletRequest.setAttribute(WebKeys.THEME_DISPLAY,themeDisplay);
  UnicodeProperties properties=layoutURLType.getTypeSettingsProperties();
  properties.setProperty("url",invalidURLInput);
  String regularURL=layoutURLType.getRegularURL(mockHttpServletRequest);
  Assert.assertTrue("LayoutImpl#getRegularURL() failed to provide a valid URL to " + "layout of type URL",Validator.isUrl(regularURL,true));
}
