{
  PortletPreferences portletPreferences=PortletPreferencesFactoryUtil.fromXML(companyId,ownerId,ownerType,plid,portletId,xml);
  Map<String,String[]> preferencesMap=portletPreferences.getMap();
  for (  Map.Entry<String,String[]> entry : preferencesMap.entrySet()) {
    String oldName=entry.getKey();
    String newName=TextFormatter.format(oldName,TextFormatter.M);
    portletPreferences.reset(oldName);
    portletPreferences.setValues(newName,entry.getValue());
  }
  return PortletPreferencesFactoryUtil.toXML(portletPreferences);
}
