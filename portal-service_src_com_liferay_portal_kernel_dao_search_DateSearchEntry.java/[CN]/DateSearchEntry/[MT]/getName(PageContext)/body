{
  if (_date != null) {
    Object[] localeAndTimeZone=getLocaleAndTimeZone(pageContext);
    Format dateFormatDateTime=FastDateFormatFactoryUtil.getDateTime((Locale)localeAndTimeZone[0],(TimeZone)localeAndTimeZone[1]);
    StringBundler sb=new StringBundler(5);
    sb.append("<span onmouseover=\"Liferay.Portal.ToolTip.show(this, '");
    sb.append(dateFormatDateTime.format(_date));
    sb.append("')\">");
    if (_date.before(new Date())) {
      sb.append(LanguageUtil.format(pageContext,"x-ago",LanguageUtil.getTimeDescription(pageContext,System.currentTimeMillis() - _date.getTime(),true)));
    }
 else {
      sb.append(LanguageUtil.format(pageContext,"within-x",LanguageUtil.getTimeDescription(pageContext,_date.getTime() - System.currentTimeMillis(),true)));
    }
    sb.append("</span>");
    return sb.toString();
  }
 else {
    return StringPool.BLANK;
  }
}
