{
  ClassLoader classLoader=null;
  if (event != null) {
    classLoader=event.getContextClassLoader();
  }
 else {
    classLoader=PortalClassLoaderUtil.getClassLoader();
  }
  Element achievementClassElement=achievementElement.element("achievement-class");
  if (achievementClassElement == null || achievementClassElement.getTextTrim().equals("")) {
    return;
  }
  SocialAchievement achievement=null;
  try {
    Class clazz=classLoader.loadClass(achievementClassElement.getTextTrim());
    achievement=(SocialAchievement)clazz.newInstance();
  }
 catch (  Exception e) {
    if (_log.isWarnEnabled()) {
      _log.warn("Cannot instantiate achievement class " + achievementClassElement.getTextTrim(),e);
    }
    return;
  }
  achievement.setName(achievementElement.element("name").getTextTrim());
  achievement.setIcon(achievementElement.element("icon").getTextTrim());
  for (  Element property : achievementElement.elements("property")) {
    readAchievementProperty(property,achievement);
  }
  activityDefinition.getAchievements().add(achievement);
  if (hotDeployRegistry != null) {
    String path=event.getServletContextName() + StringPool.SLASH + activityDefinition.getModelName()+ StringPool.SLASH+ activityDefinition.getActivityKey()+ _ACHIEVEMENT_+ achievement.getName();
    hotDeployRegistry.put(path,achievement);
  }
}
