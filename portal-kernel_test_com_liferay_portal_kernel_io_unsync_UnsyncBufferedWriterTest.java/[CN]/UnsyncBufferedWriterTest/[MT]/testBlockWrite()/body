{
  StringWriter sw=new StringWriter();
  UnsyncBufferedWriter ubw=new UnsyncBufferedWriter(sw,3);
  ubw.write("ab".toCharArray());
  assertEquals(2,ubw.count);
  assertEquals('a',ubw.buffer[0]);
  assertEquals('b',ubw.buffer[1]);
  assertEquals(0,sw.getBuffer().length());
  ubw.write("cd".toCharArray());
  assertEquals(2,ubw.count);
  assertEquals('c',ubw.buffer[0]);
  assertEquals('d',ubw.buffer[1]);
  assertEquals(2,sw.getBuffer().length());
  assertEquals("ab",sw.getBuffer().toString());
  ubw.write("efg".toCharArray());
  assertEquals(0,ubw.count);
  assertEquals(7,sw.getBuffer().length());
  assertEquals("abcdefg",sw.getBuffer().toString());
  ubw.write("hij".toCharArray());
  assertEquals(0,ubw.count);
  assertEquals(10,sw.getBuffer().length());
  assertEquals("abcdefghij",sw.getBuffer().toString());
}
