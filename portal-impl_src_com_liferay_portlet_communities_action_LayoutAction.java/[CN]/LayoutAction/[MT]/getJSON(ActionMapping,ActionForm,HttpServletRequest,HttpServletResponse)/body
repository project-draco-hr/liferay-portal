{
  long groupId=ParamUtil.getLong(request,"groupId");
  boolean privateLayout=ParamUtil.getBoolean(request,"privateLayout");
  long parentLayoutId=ParamUtil.getLong(request,"parentLayoutId");
  List<Layout> layouts=LayoutLocalServiceUtil.getLayouts(groupId,privateLayout,parentLayoutId);
  JSONArray jsonArray=JSONFactoryUtil.createJSONArray();
  for (  Layout layout : layouts) {
    JSONObject jsonObj=JSONFactoryUtil.createJSONObject();
    boolean hasChildren=(layout.getChildren().size() > 0);
    jsonObj.put("hasChildren",hasChildren);
    jsonObj.put("layoutId",layout.getLayoutId());
    jsonObj.put("name",layout.getName());
    jsonObj.put("parentLayoutId",layout.getParentLayoutId());
    jsonObj.put("plid",layout.getPlid());
    jsonObj.put("priority",layout.getPriority());
    jsonObj.put("privateLayout",layout.getPrivateLayout());
    jsonObj.put("type",layout.getType());
    jsonArray.put(jsonObj);
  }
  return jsonArray.toString();
}
