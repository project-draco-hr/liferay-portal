{
  Map<String,String> parameters=new HashMap<String,String>();
  parameters.put(SessionParameter.ATOMPUB_URL,getTypeSettingsValue(_ATOMPUB_URL));
  parameters.put(SessionParameter.BINDING_TYPE,BindingType.ATOMPUB.value());
  parameters.put(SessionParameter.COMPRESSION,Boolean.TRUE.toString());
  Locale locale=LocaleUtil.getDefault();
  parameters.put(SessionParameter.LOCALE_ISO3166_COUNTRY,locale.getCountry());
  parameters.put(SessionParameter.LOCALE_ISO639_LANGUAGE,locale.getLanguage());
  String password=PrincipalThreadLocal.getPassword();
  if (Validator.isNotNull(password)) {
    parameters.put(SessionParameter.PASSWORD,password);
  }
  String login=getLogin();
  if (Validator.isNotNull(login)) {
    parameters.put(SessionParameter.USER,login);
  }
  CMISRepositoryUtil.checkRepository(getRepositoryId(),parameters,getTypeSettingsProperties(),_REPOSITORY_ID);
  return CMISRepositoryUtil.createSession(parameters);
}
