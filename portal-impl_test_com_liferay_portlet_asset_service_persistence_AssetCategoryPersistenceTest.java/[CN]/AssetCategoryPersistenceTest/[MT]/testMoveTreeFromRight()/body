{
  long groupId=nextLong();
  AssetCategory rootAssetCategory=addAssetCategory(groupId,null);
  long previousRootLeftCategoryId=rootAssetCategory.getLeftCategoryId();
  long previousRootRightCategoryId=rootAssetCategory.getRightCategoryId();
  AssetCategory parentAssetCategory=addAssetCategory(groupId,null);
  AssetCategory childAssetCategory=addAssetCategory(groupId,parentAssetCategory.getCategoryId());
  parentAssetCategory=_persistence.fetchByPrimaryKey(parentAssetCategory.getPrimaryKey());
  parentAssetCategory.setParentCategoryId(rootAssetCategory.getCategoryId());
  _persistence.update(parentAssetCategory,false);
  rootAssetCategory=_persistence.fetchByPrimaryKey(rootAssetCategory.getPrimaryKey());
  childAssetCategory=_persistence.fetchByPrimaryKey(childAssetCategory.getPrimaryKey());
  assertEquals(previousRootLeftCategoryId,rootAssetCategory.getLeftCategoryId());
  assertEquals(previousRootRightCategoryId + 4,rootAssetCategory.getRightCategoryId());
  assertEquals(rootAssetCategory.getLeftCategoryId() + 1,parentAssetCategory.getLeftCategoryId());
  assertEquals(rootAssetCategory.getRightCategoryId() + -1,parentAssetCategory.getRightCategoryId());
  assertEquals(parentAssetCategory.getLeftCategoryId() + 1,childAssetCategory.getLeftCategoryId());
  assertEquals(parentAssetCategory.getRightCategoryId() + -1,childAssetCategory.getRightCategoryId());
}
