{
  Portlet portlet=getPortlet();
  String portletURLClass=portlet.getPortletURLClass();
  if (Validator.isNotNull(portletURLClass)) {
    try {
      Class portletURLClassObj=Class.forName(portletURLClass);
      Constructor constructor=portletURLClassObj.getConstructor(new Class[]{com.liferay.portlet.ActionResponseImpl.class,boolean.class});
      return (PortletURL)constructor.newInstance(new Object[]{this,Boolean.valueOf(action)});
    }
 catch (    Exception e) {
      _log.error(e);
    }
  }
  return new PortletURLImpl(_req,_portletName,_layout.getPlid(),action);
}
