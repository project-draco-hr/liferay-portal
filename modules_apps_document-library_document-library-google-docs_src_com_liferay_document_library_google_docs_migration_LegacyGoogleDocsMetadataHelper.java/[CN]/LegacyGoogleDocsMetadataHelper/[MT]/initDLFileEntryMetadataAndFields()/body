{
  if (_fields == null) {
    _fields=new HashMap<>();
    if (_dlFileVersion == null) {
      return;
    }
    try {
      _dlFileEntryMetadata=DLFileEntryMetadataLocalServiceUtil.getFileEntryMetadata(_ddmStructure.getStructureId(),_dlFileVersion.getFileVersionId());
      Fields fields=_storageEngine.getFields(_dlFileEntryMetadata.getDDMStorageId());
      for (      Field field : fields) {
        _fields.put(field.getName(),field);
      }
    }
 catch (    PortalException pe) {
      throw new SystemException("Unable to load DDM fields for file version " + _dlFileVersion.getFileVersionId(),pe);
    }
  }
}
