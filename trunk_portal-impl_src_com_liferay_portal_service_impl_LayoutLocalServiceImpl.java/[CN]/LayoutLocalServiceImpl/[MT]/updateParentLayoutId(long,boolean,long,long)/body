{
  parentLayoutId=getParentLayoutId(groupId,privateLayout,parentLayoutId);
  validateParentLayoutId(groupId,privateLayout,layoutId,parentLayoutId);
  Date now=new Date();
  Layout layout=layoutPersistence.findByG_P_L(groupId,privateLayout,layoutId);
  if (parentLayoutId != layout.getParentLayoutId()) {
    layout.setPriority(getNextPriority(groupId,privateLayout,parentLayoutId));
  }
  layout.setModifiedDate(now);
  layout.setParentLayoutId(parentLayoutId);
  layoutPersistence.update(layout,false);
  return layout;
}
