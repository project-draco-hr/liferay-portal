{
  Properties userMappings=getUserMappings(companyId);
  LogUtil.debug(_log,userMappings);
  boolean autoPassword=false;
  if (Validator.isNull(screenName)) {
    screenName=LDAPUtil.getAttributeValue(attrs,userMappings.getProperty("screenName")).toLowerCase();
  }
  if (Validator.isNull(emailAddress)) {
    emailAddress=LDAPUtil.getAttributeValue(attrs,userMappings.getProperty("emailAddress"));
  }
  User user=_importLDAPUser(companyId,ctx,attrs,userMappings,autoPassword,password,screenName,emailAddress,true,importGroupMembership);
  return user;
}
