{
  User user=null;
  try {
    String authType=PrefsPropsUtil.getString(companyId,PropsKeys.COMPANY_SECURITY_AUTH_TYPE,PropsValues.COMPANY_SECURITY_AUTH_TYPE);
    if (authType.equals(CompanyConstants.AUTH_TYPE_SN)) {
      user=UserLocalServiceUtil.getUserByScreenName(companyId,data.getUserData().getScreenName());
    }
 else {
      user=UserLocalServiceUtil.getUserByEmailAddress(companyId,data.getUserData().getEmailAddress());
    }
  }
 catch (  NoSuchUserException e) {
  }
  return user;
}
