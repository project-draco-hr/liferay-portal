{
  Properties userMappings=getUserMappings(companyId);
  Properties groupMappings=getGroupMappings(companyId);
  LogUtil.debug(_log,userMappings);
  String name=LDAPUtil.getAttributeValue(attrs,groupMappings.getProperty("groupName")).toLowerCase();
  String description=LDAPUtil.getAttributeValue(attrs,groupMappings.getProperty("description"));
  long creatorUserId=UserLocalServiceUtil.getDefaultUserId(companyId);
  UserGroup userGroup=null;
  try {
    userGroup=UserGroupLocalServiceUtil.getUserGroup(companyId,name);
    UserGroupLocalServiceUtil.updateUserGroup(companyId,userGroup.getUserGroupId(),name,description);
  }
 catch (  NoSuchUserGroupException nsuge) {
    userGroup=UserGroupLocalServiceUtil.addUserGroup(creatorUserId,companyId,name,description);
  }
  if (importGroupMembership && userGroup != null) {
    Attribute attr=attrs.get(groupMappings.getProperty("user"));
    if (attr != null) {
      _importUsersAndMembershipFromLDAPGroup(companyId,ctx,userGroup.getUserGroupId(),attr);
    }
  }
  return userGroup;
}
