{
  LdapContext ldapContext=getContext(ldapServerId,companyId);
  try {
    if (ldapContext == null) {
      return false;
    }
    Properties groupMappings=LDAPSettingsUtil.getGroupMappings(ldapServerId,companyId);
    StringBundler filter=new StringBundler(5);
    filter.append(StringPool.OPEN_PARENTHESIS);
    filter.append(groupMappings.getProperty(GroupConverterKeys.USER));
    filter.append(StringPool.EQUAL);
    filter.append(userDN);
    filter.append(StringPool.CLOSE_PARENTHESIS);
    SearchControls searchControls=new SearchControls(SearchControls.SUBTREE_SCOPE,1,0,null,false,false);
    NamingEnumeration<SearchResult> enu=ldapContext.search(groupDN,filter.toString(),searchControls);
    if (enu.hasMoreElements()) {
      return true;
    }
  }
 catch (  NameNotFoundException nnfe) {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to determine if user DN " + userDN + " is a member of group DN "+ groupDN,nnfe);
    }
  }
 finally {
    if (ldapContext != null) {
      ldapContext.close();
    }
  }
  return false;
}
