{
  long companyId=user.getCompanyId();
  if (!isAuthEnabled(companyId) || !isExportEnabled(companyId)) {
    return;
  }
  LdapContext ctx=getContext(companyId);
  try {
    if (ctx == null) {
      return;
    }
    Properties userMappings=getUserMappings(companyId);
    Binding binding=getUser(user.getCompanyId(),user.getScreenName());
    String name=StringPool.BLANK;
    if (binding == null) {
    }
 else {
      name=getNameInNamespace(companyId,binding);
      Modifications mods=Modifications.getInstance();
      mods.addItem(userMappings.getProperty("firstName"),user.getFirstName());
      mods.addItem(userMappings.getProperty("lastName"),user.getLastName());
      String fullNameMapping=userMappings.getProperty("fullName");
      if (Validator.isNotNull(fullNameMapping)) {
        mods.addItem(fullNameMapping,user.getFullName());
      }
      if (user.isPasswordModified() && Validator.isNotNull(user.getPasswordUnencrypted())) {
        mods.addItem(userMappings.getProperty("password"),user.getPasswordUnencrypted());
      }
      if (Validator.isNotNull(user.getEmailAddress())) {
        mods.addItem(userMappings.getProperty("emailAddress"),user.getEmailAddress());
      }
      String jobTitleMapping=userMappings.getProperty("jobTitle");
      if (Validator.isNotNull(jobTitleMapping)) {
        mods.addItem(jobTitleMapping,user.getContact().getJobTitle());
      }
      ModificationItem[] modItems=mods.getItems();
      ctx.modifyAttributes(name,modItems);
    }
  }
 catch (  Exception e) {
    throw e;
  }
 finally {
    if (ctx != null) {
      ctx.close();
    }
  }
}
