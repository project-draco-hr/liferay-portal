{
  PermissionChecker permissionChecker=getPermissionChecker();
  TrashEntry entry=trashEntryLocalService.getEntry(className,classPK);
  TrashHandler trashHandler=TrashHandlerRegistryUtil.getTrashHandler(className);
  if (!trashHandler.hasTrashPermission(permissionChecker,entry.getGroupId(),destinationContainerModelId,TrashActionKeys.MOVE)) {
    throw new PrincipalException();
  }
  if (trashHandler.isInTrash(classPK) && !trashHandler.hasTrashPermission(permissionChecker,0,classPK,TrashActionKeys.RESTORE)) {
    throw new PrincipalException();
  }
  trashHandler.checkDuplicateTrashEntry(entry,destinationContainerModelId,StringPool.BLANK);
  if (trashHandler.isInTrash(classPK)) {
    trashHandler.moveTrashEntry(getUserId(),classPK,destinationContainerModelId,serviceContext);
  }
 else {
    trashHandler.moveEntry(getUserId(),classPK,destinationContainerModelId,serviceContext);
  }
}
