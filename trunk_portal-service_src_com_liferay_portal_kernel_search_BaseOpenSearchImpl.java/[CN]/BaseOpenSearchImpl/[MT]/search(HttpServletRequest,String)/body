{
  try {
    long userId=PortalUtil.getUserId(request);
    if (userId == 0) {
      long companyId=PortalUtil.getCompanyId(request);
      userId=UserLocalServiceUtil.getDefaultUserId(companyId);
    }
    String keywords=GetterUtil.getString(HttpUtil.getParameter(url,"keywords",false));
    int startPage=GetterUtil.getInteger(HttpUtil.getParameter(url,"p",false),1);
    int itemsPerPage=GetterUtil.getInteger(HttpUtil.getParameter(url,"c",false),SearchContainer.DEFAULT_DELTA);
    String format=GetterUtil.getString(HttpUtil.getParameter(url,"format",false));
    return search(request,userId,keywords,startPage,itemsPerPage,format);
  }
 catch (  SearchException se) {
    throw se;
  }
catch (  Exception e) {
    throw new SearchException(e);
  }
}
