{
  _clazz=clazz;
  _filter=filter;
  _properties=Collections.unmodifiableMap(properties);
  Registry registry=RegistryUtil.getRegistry();
  if (filter != null) {
    filter=_getFilter(filter,_clazz);
    _serviceTracker=registry.trackServices(filter,new DefaultServiceTrackerCustomizer(serviceTrackerCustomizer));
  }
 else {
    _serviceTracker=registry.trackServices(clazz,new DefaultServiceTrackerCustomizer(serviceTrackerCustomizer));
  }
  _serviceTracker.open();
}
