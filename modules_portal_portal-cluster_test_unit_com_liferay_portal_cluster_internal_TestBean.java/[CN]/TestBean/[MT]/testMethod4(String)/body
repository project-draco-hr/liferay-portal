{
  ThreadLocalCache<String> threadLocalCache=ThreadLocalCacheManager.getThreadLocalCache(Lifecycle.REQUEST,TestBean.class.getName());
  if (value.length() > 0) {
    threadLocalCache.put(_THREAD_LOCAL_CACHE_KEY,value);
    _testThreadLocal.set(value);
    return value;
  }
  if (_testThreadLocal.get() != null) {
    throw new IllegalStateException("Short live thread local has not been cleared");
  }
  if (threadLocalCache.get(_THREAD_LOCAL_CACHE_KEY) != null) {
    throw new IllegalStateException("Thread local cache was not cleared");
  }
  return null;
}
