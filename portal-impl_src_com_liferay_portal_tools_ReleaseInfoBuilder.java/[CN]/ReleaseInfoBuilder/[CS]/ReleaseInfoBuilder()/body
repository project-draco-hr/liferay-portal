{
  try {
    Properties releaseProps=FileUtil.toProperties("../release.properties");
    String version=releaseProps.getProperty("lp.version");
    File file=new File("../portal-kernel/src/com/liferay/portal/kernel/util/" + "ReleaseInfo.java");
    String content=FileUtil.read(file);
    int x=content.indexOf("String version = \"");
    x=content.indexOf("\"",x) + 1;
    int y=content.indexOf("\"",x);
    content=content.substring(0,x) + version + content.substring(y,content.length());
    x=content.indexOf("String build = \"");
    x=content.indexOf("\"",x) + 1;
    y=content.indexOf("\"",x);
    int build=GetterUtil.getInteger(content.substring(x,y)) + 1;
    content=content.substring(0,x) + build + content.substring(y,content.length());
    DateFormat df=DateFormat.getDateInstance(DateFormat.LONG);
    String date=df.format(new Date());
    x=content.indexOf("String date = \"");
    x=content.indexOf("\"",x) + 1;
    y=content.indexOf("\"",x);
    content=content.substring(0,x) + date + content.substring(y,content.length());
    FileUtil.write(file,content);
    file=new File("../sql/portal-data-release.sql");
    content=FileUtil.read(file);
    x=content.indexOf("insert into Release_");
    y=content.indexOf(", FALSE);",x);
    x=content.lastIndexOf(" ",y - 1) + 1;
    content=content.substring(0,x) + build + content.substring(y,content.length());
    FileUtil.write(file,content);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}
