{
  DDMStructure ddmStructure=addDDMStructure(JournalArticle.class.getName());
  Map<String,String> portletPreferencesMap=new HashMap<>();
  portletPreferencesMap.put("subtypeFieldsFilterEnabled",Boolean.TRUE.toString());
  portletPreferencesMap.put("subtypeFieldsFilterEnabledJournalArticleAssetRendererFactory",Boolean.TRUE.toString());
  portletPreferencesMap.put("anyClassTypeJournalArticleAssetRendererFactory",String.valueOf(ddmStructure.getStructureId()));
  portletPreferencesMap.put("ddmStructureFieldName","Birthday");
  portletPreferencesMap.put("ddmStructureFieldValue",StringPool.BLANK);
  String portletId=getPortletId();
  updatePortletPreferences(portletId,portletPreferencesMap);
  _upgradePortletPreferences.upgrade();
  PortletPreferences portletPreferences=getPortletPreferences(portletId);
  String fieldValue=portletPreferences.getValue("ddmStructureFieldValue",StringPool.BLANK);
  Assert.assertEquals(StringPool.BLANK,fieldValue);
}
