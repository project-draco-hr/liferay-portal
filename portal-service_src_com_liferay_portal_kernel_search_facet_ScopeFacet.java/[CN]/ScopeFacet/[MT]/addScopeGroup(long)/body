{
  try {
    List<Layout> scopeLayouts=new ArrayList<Layout>();
    Layout layout=getSearchContext().getLayout();
    if (layout != null) {
      scopeLayouts.addAll(LayoutLocalServiceUtil.getScopeGroupLayouts(groupId,layout.isPrivateLayout()));
    }
 else {
      scopeLayouts.addAll(LayoutLocalServiceUtil.getScopeGroupLayouts(groupId,false));
      scopeLayouts.addAll(LayoutLocalServiceUtil.getScopeGroupLayouts(groupId,true));
    }
    long[] scopeGroupIds=new long[scopeLayouts.size() + 1];
    scopeGroupIds[0]=groupId;
    for (int i=0; i < scopeLayouts.size(); i++) {
      Layout scopeLayout=scopeLayouts.get(i);
      scopeGroupIds[i + 1]=scopeLayout.getScopeGroup().getGroupId();
    }
    return scopeGroupIds;
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
  return new long[]{groupId};
}
