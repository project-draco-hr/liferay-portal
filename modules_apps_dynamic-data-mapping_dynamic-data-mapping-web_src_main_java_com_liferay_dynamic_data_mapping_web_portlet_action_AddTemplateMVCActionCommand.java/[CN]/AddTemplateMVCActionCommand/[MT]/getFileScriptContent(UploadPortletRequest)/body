{
  File file=uploadPortletRequest.getFile("script");
  if (file == null) {
    return null;
  }
  String fileScriptContent=FileUtil.read(file);
  String contentType=MimeTypesUtil.getContentType(file);
  if (Validator.isNotNull(fileScriptContent) && !(contentType.equals(ContentTypes.APPLICATION_XSLT_XML) || contentType.startsWith(ContentTypes.TEXT))) {
    throw new TemplateScriptException("Invalid contentType " + contentType);
  }
  return fileScriptContent;
}
