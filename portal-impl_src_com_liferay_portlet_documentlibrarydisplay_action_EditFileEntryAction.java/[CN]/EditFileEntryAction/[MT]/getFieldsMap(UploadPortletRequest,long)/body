{
  HashMap<Long,Fields> fieldsMap=new HashMap<Long,Fields>();
  if (documentTypeId > 0) {
    List<DDMStructure> ddmStructures=DLDocumentTypeLocalServiceUtil.getDDMStructures(documentTypeId);
    for (    DDMStructure ddmStructure : ddmStructures) {
      String namespace=String.valueOf(ddmStructure.getStructureId());
      Set<String> fieldNames=ddmStructure.getFieldNames();
      Fields fields=new Fields();
      for (      String name : fieldNames) {
        Field field=new Field();
        field.setName(name);
        String value=ParamUtil.getString(uploadRequest,namespace + name);
        field.setValue(value);
        fields.put(field);
      }
      fieldsMap.put(ddmStructure.getStructureId(),fields);
    }
  }
  return fieldsMap;
}
