{
  PortletURL deleteLayoutURL=PortalUtil.getControlPanelPortletURL(liferayPortletRequest,LayoutAdminPortletKeys.GROUP_PAGES,PortletRequest.ACTION_PHASE);
  deleteLayoutURL.setParameter(ActionRequest.ACTION_NAME,"deleteLayout");
  deleteLayoutURL.setParameter("mvcPath","/panel/app/layouts_tree.jsp");
  try {
    deleteLayoutURL.setWindowState(LiferayWindowState.EXCLUSIVE);
  }
 catch (  WindowStateException wse) {
  }
  PortletURL redirectURL=PortalUtil.getControlPanelPortletURL(liferayPortletRequest,LayoutAdminPortletKeys.GROUP_PAGES,RenderRequest.RENDER_PHASE);
  redirectURL.setParameter("selPlid",String.valueOf(LayoutConstants.DEFAULT_PLID));
  redirectURL.setParameter("mvcPath","/panel/app/layouts_tree.jsp");
  try {
    redirectURL.setWindowState(LiferayWindowState.EXCLUSIVE);
  }
 catch (  WindowStateException wse) {
  }
  deleteLayoutURL.setParameter("redirect",redirectURL.toString());
  try {
    LayoutSetBranch layoutSetBranch=getLayoutSetBranch();
    Map<String,String[]> parameterMap=deleteLayoutURL.getParameterMap();
    if ((layoutSetBranch != null) && !parameterMap.containsKey("layoutSetBranchId")) {
      deleteLayoutURL.setParameter("layoutSetBranchId",String.valueOf(layoutSetBranch.getLayoutSetBranchId()));
    }
  }
 catch (  PortalException pe) {
  }
  if (selPlid >= LayoutConstants.DEFAULT_PLID) {
    deleteLayoutURL.setParameter("selPlid",String.valueOf(selPlid));
  }
  return deleteLayoutURL;
}
