{
  Map<String,Serializable> settingsMap=exportImportConfiguration.getSettingsMap();
  Map<String,String[]> parameterMap=(Map<String,String[]>)settingsMap.get("parameterMap");
  String portletId=MapUtil.getString(settingsMap,"portletId");
  long targetPlid=MapUtil.getLong(settingsMap,"targetPlid");
  long targetGroupId=MapUtil.getLong(settingsMap,"targetGroupId");
  long userId=MapUtil.getLong(settingsMap,"userId");
  Layout layout=LayoutLocalServiceUtil.getLayout(targetPlid);
  String userIdStrategyString=MapUtil.getString(parameterMap,PortletDataHandlerKeys.USER_ID_STRATEGY);
  UserIdStrategy userIdStrategy=ExportImportHelperUtil.getUserIdStrategy(userId,userIdStrategyString);
  ZipReader zipReader=ZipReaderFactoryUtil.getZipReader(file);
  PortletDataContext portletDataContext=PortletDataContextFactoryUtil.createImportPortletDataContext(layout.getCompanyId(),targetGroupId,parameterMap,userIdStrategy,zipReader);
  portletDataContext.setOldPlid(targetPlid);
  portletDataContext.setPlid(targetPlid);
  portletDataContext.setPortletId(portletId);
  portletDataContext.setPrivateLayout(layout.isPrivateLayout());
  return portletDataContext;
}
