{
  try {
    Definition definition=_workflowModelParser.parse(inputStream);
    if (_workflowValidator != null) {
      _workflowValidator.validate(definition);
    }
    WorkflowDefinition workflowDefinition=_workflowDeployer.deploy(title,definition,serviceContext);
    return workflowDefinition;
  }
 catch (  WorkflowException we) {
    throw we;
  }
catch (  PortalException e) {
    throw new WorkflowException(e);
  }
}
