{
  TempFileEntryUtil.addTempFileEntry(_group.getGroupId(),_user.getUserId(),"folder","file",new ByteArrayInputStream("Hello World!".getBytes()),"text/plain");
  Repository repository=RepositoryLocalServiceUtil.fetchRepository(_group.getGroupId(),TempFileEntryUtil.class.getName(),StringPool.BLANK);
  LocalRepository localRepository=RepositoryProviderUtil.getLocalRepository(repository.getRepositoryId());
  int itemsCount=getItemsCount(localRepository);
  Assert.assertTrue(itemsCount > 0);
  TemporaryFileEntriesCapability temporaryFileEntriesCapability=localRepository.getCapability(TemporaryFileEntriesCapability.class);
  temporaryFileEntriesCapability.setTemporaryFileEntriesTimeout(1);
  Thread.sleep(2);
  temporaryFileEntriesCapability.deleteExpiredTemporaryFileEntries();
  itemsCount=getItemsCount(localRepository);
  Assert.assertEquals(itemsCount,0);
}
