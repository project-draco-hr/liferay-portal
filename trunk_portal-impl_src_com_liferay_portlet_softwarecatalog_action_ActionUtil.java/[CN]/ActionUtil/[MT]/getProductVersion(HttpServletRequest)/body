{
  long productVersionId=ParamUtil.getLong(request,"productVersionId");
  long copyProductVersionId=ParamUtil.getLong(request,"copyProductVersionId");
  SCProductVersion productVersion=null;
  SCProductEntry productEntry=null;
  if (productVersionId > 0) {
    productVersion=SCProductVersionServiceUtil.getProductVersion(productVersionId);
    productEntry=SCProductEntryServiceUtil.getProductEntry(productVersion.getProductEntryId());
    request.setAttribute(WebKeys.SOFTWARE_CATALOG_PRODUCT_VERSION,productVersion);
    request.setAttribute(WebKeys.SOFTWARE_CATALOG_PRODUCT_ENTRY,productEntry);
  }
 else   if (copyProductVersionId > 0) {
    productVersion=SCProductVersionServiceUtil.getProductVersion(copyProductVersionId);
    productEntry=SCProductEntryServiceUtil.getProductEntry(productVersion.getProductEntryId());
    String oldVersion=productVersion.getVersion();
    Version version=Version.getInstance(oldVersion);
    version=Version.incrementBuildNumber(version);
    String newVersion=version.toString();
    productVersion.setVersion(newVersion);
    String directDownloadURL=productVersion.getDirectDownloadURL();
    directDownloadURL=StringUtil.replace(directDownloadURL,oldVersion,newVersion);
    productVersion.setDirectDownloadURL(directDownloadURL);
    request.setAttribute(WebKeys.SOFTWARE_CATALOG_PRODUCT_VERSION,productVersion);
    request.setAttribute(WebKeys.SOFTWARE_CATALOG_PRODUCT_ENTRY,productEntry);
  }
 else {
    getProductEntry(request);
  }
}
