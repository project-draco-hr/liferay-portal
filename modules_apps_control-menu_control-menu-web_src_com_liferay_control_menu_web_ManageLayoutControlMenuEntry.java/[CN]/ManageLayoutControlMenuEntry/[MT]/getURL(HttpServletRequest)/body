{
  String portletId=PortletProviderUtil.getPortletId(Layout.class.getName(),PortletProvider.Action.EDIT);
  PortletURL editPageURL=PortalUtil.getControlPanelPortletURL(request,portletId,0,PortletRequest.RENDER_PHASE);
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  Layout layout=themeDisplay.getLayout();
  editPageURL.setParameter("groupId",String.valueOf(layout.getGroupId()));
  editPageURL.setParameter("selPlid",String.valueOf(layout.getPlid()));
  editPageURL.setParameter("privateLayout",String.valueOf(layout.isPrivateLayout()));
  editPageURL.setParameter("treeId","layoutsTree");
  editPageURL.setParameter("viewLayout",Boolean.TRUE.toString());
  return editPageURL.toString();
}
