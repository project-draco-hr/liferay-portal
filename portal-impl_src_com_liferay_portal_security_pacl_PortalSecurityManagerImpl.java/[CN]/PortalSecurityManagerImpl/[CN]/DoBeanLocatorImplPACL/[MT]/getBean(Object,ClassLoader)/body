{
  if (classLoader == ClassLoaderUtil.getPortalClassLoader()) {
    Class<?> callerClass=Reflection.getCallerClass(5);
    ClassLoader callerClassLoader=ClassLoaderUtil.getClassLoader(callerClass);
    if (callerClassLoader == classLoader) {
      return bean;
    }
  }
  InvocationHandler invocationHandler=new InvocationHandler(){
    public Object invoke(    Object proxy,    Method method,    Object[] arguments) throws Throwable {
      return method.invoke(bean,arguments);
    }
  }
;
  invocationHandler=new PACLInvocationHandler(invocationHandler);
  return ProxyUtil.newProxyInstance(classLoader,ReflectionUtil.getInterfaces(bean,classLoader),invocationHandler);
}
