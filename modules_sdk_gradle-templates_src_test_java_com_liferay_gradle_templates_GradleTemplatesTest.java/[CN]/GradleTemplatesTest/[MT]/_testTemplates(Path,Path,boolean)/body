{
  try (DirectoryStream<Path> directoryStream=Files.newDirectoryStream(rootDirPath)){
    for (    Path path : directoryStream) {
      if (!Files.isDirectory(path)) {
        continue;
      }
      Path dirNamePath=path.getFileName();
      Path otherDirPath=otherRootDirPath.resolve(dirNamePath.toString());
      Assert.assertTrue("Missing " + otherDirPath,Files.exists(otherDirPath));
      Path gitIgnorePath=path.resolve("gitignore");
      Path dotGitIgnorePath=path.resolve(".gitignore");
      Assert.assertFalse("Rename " + dotGitIgnorePath + " to "+ gitIgnorePath+ " to bypass GRADLE-1883",Files.exists(dotGitIgnorePath));
      if (gitIgnoreForbidden) {
        Assert.assertFalse("Forbidden " + gitIgnorePath,Files.exists(gitIgnorePath));
      }
 else {
        Assert.assertTrue("Missing " + gitIgnorePath,Files.exists(gitIgnorePath));
      }
    }
  }
 }
