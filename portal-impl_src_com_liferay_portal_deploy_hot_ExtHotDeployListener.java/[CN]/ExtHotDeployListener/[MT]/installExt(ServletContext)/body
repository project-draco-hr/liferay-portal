{
  String servletContextName=servletContext.getServletContextName();
  String globalLibDir=PortalUtil.getGlobalLibDir();
  String portalWebDir=PortalUtil.getPortalWebDir();
  String portalLibDir=PortalUtil.getPortalLibDir();
  String pluginWebDir=WebDirDetector.getRootDir(servletContext.getClassLoader());
  copyJar(servletContext,globalLibDir,"ext-service");
  copyJar(servletContext,portalLibDir,"ext-impl");
  copyJar(servletContext,portalLibDir,"ext-util-bridges");
  copyJar(servletContext,portalLibDir,"ext-util-java");
  copyJar(servletContext,portalLibDir,"ext-util-taglib");
  mergeWebXml(portalWebDir,pluginWebDir);
  CopyTask.copyDirectory(pluginWebDir + "WEB-INF/ext-web/docroot",portalWebDir,StringPool.BLANK,"**/WEB-INF/web.xml",true,false);
  FileUtil.copyFile(pluginWebDir + "WEB-INF/ext-" + servletContextName+ ".xml",portalWebDir + "WEB-INF/ext-" + servletContextName+ ".xml");
  ExtRegistry.registerExt(servletContext);
}
