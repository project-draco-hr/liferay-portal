{
  GroupTestUtil.enableLocalStaging(_sourceGroup);
  JournalArticle article=JournalTestUtil.addArticle(_sourceGroup.getGroupId(),"Title","content",LocaleUtil.fromLanguageId(defaultContentLanguageId));
  User user=TestPropsValues.getUser();
  Map<String,String[]> parameterMap=ExportImportConfigurationParameterMapFactory.buildParameterMap();
  Map<String,Serializable> publishLayoutLocalSettingsMap=ExportImportConfigurationSettingsMapFactory.buildPublishLayoutLocalSettingsMap(user,_sourceGroup.getGroupId(),_targetGroup.getGroupId(),false,ExportImportHelperUtil.getAllLayoutIds(_sourceGroup.getGroupId(),false),parameterMap);
  ExportImportConfiguration exportImportConfiguration=ExportImportConfigurationLocalServiceUtil.addExportImportConfiguration(user.getUserId(),_sourceGroup.getGroupId(),StringPool.BLANK,StringPool.BLANK,ExportImportConfigurationConstants.TYPE_PUBLISH_LAYOUT_LOCAL,publishLayoutLocalSettingsMap,WorkflowConstants.STATUS_DRAFT,new ServiceContext());
  File file=ExportImportLocalServiceUtil.exportLayoutsAsFile(exportImportConfiguration);
  CompanyTestUtil.resetCompanyLocales(TestPropsValues.getCompanyId(),languageIds,defaultLanguageId);
  ExportImportLocalServiceUtil.importLayouts(exportImportConfiguration,file);
  JournalArticleResource articleResource=JournalArticleResourceLocalServiceUtil.fetchJournalArticleResourceByUuidAndGroupId(article.getArticleResourceUuid(),_targetGroup.getGroupId());
  Assert.assertNotNull(articleResource);
  JournalArticle stagingArticle=JournalArticleLocalServiceUtil.getLatestArticle(articleResource.getResourcePrimKey(),WorkflowConstants.STATUS_ANY,false);
  if (languageIds.contains(defaultContentLanguageId)) {
    Assert.assertEquals(article.getDefaultLanguageId(),stagingArticle.getDefaultLanguageId());
  }
 else {
    Assert.assertEquals(defaultLanguageId,stagingArticle.getDefaultLanguageId());
  }
  for (  Locale locale : _locales) {
    if (languageIds.contains(LocaleUtil.toLanguageId(locale)) || languageIds.contains(defaultContentLanguageId)) {
      Assert.assertEquals(article.getTitle(locale),stagingArticle.getTitle(locale));
    }
 else {
      Assert.assertEquals(article.getTitle(defaultLanguageId),stagingArticle.getTitle(locale));
    }
  }
}
