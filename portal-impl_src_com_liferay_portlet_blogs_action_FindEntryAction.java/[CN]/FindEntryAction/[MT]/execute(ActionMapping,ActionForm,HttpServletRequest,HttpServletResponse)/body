{
  try {
    long plid=ParamUtil.getLong(req,"p_l_id");
    long entryId=ParamUtil.getLong(req,"entryId");
    boolean showAllEntries=ParamUtil.getBoolean(req,"showAllEntries");
    try {
      plid=getPlid(plid,entryId);
    }
 catch (    Exception e) {
      if (_log.isWarnEnabled()) {
        _log.warn(e);
      }
    }
    String urlTitle=getUrlTitle(entryId);
    PortletURL portletURL=new PortletURLImpl(req,PortletKeys.BLOGS,plid,false);
    portletURL.setWindowState(WindowState.NORMAL);
    portletURL.setPortletMode(PortletMode.VIEW);
    if (showAllEntries) {
      portletURL.setParameter("struts_action","/blogs/view");
    }
 else {
      portletURL.setParameter("struts_action","/blogs/view_entry");
      if (Validator.isNotNull(urlTitle)) {
        portletURL.setParameter("urlTitle",urlTitle);
      }
 else {
        portletURL.setParameter("entryId",String.valueOf(entryId));
      }
    }
    String redirect=portletURL.toString();
    res.sendRedirect(redirect);
    return null;
  }
 catch (  Exception e) {
    req.setAttribute(PageContext.EXCEPTION,e);
    return mapping.findForward(ActionConstants.COMMON_ERROR);
  }
}
