{
  final Configuration defaultConfiguration=GradleUtil.getConfiguration(project,Dependency.DEFAULT_CONFIGURATION);
  Configuration providedConfiguration=GradleUtil.getConfiguration(project,ProvidedBasePlugin.getPROVIDED_CONFIGURATION_NAME());
  DependencySet dependencySet=providedConfiguration.getDependencies();
  dependencySet.withType(ProjectDependency.class,new Action<ProjectDependency>(){
    @Override public void execute(    ProjectDependency projectDependency){
      defaultConfiguration.exclude(Collections.singletonMap("module",projectDependency.getName()));
    }
  }
);
}
