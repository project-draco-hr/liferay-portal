{
  Copy copy=GradleUtil.addTask(project,COPY_LIBS_TASK_NAME,Copy.class);
  File libDir=getLibDir(project);
  copy.eachFile(new ExcludeExistingFileAction(libDir));
  Configuration configuration=GradleUtil.getConfiguration(project,JavaPlugin.RUNTIME_CONFIGURATION_NAME);
  copy.from(configuration);
  copy.into(libDir);
  Closure<String> closure=new RenameDependencyClosure(project,configuration.getName());
  copy.rename(closure);
  Task classesTask=GradleUtil.getTask(project,JavaPlugin.CLASSES_TASK_NAME);
  classesTask.dependsOn(copy);
  return copy;
}
