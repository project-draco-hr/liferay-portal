{
  if (testProject) {
    task.setEnabled(false);
  }
  if (gitRepoDir != null) {
    task.onlyIf(new LeafArtifactSpec(gitRepoDir));
  }
  task.onlyIf(new OutOfDateArtifactSpec(recordArtifactTask));
}
