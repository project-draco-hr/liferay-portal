{
  InstallCacheTask installCacheTask=GradleUtil.addTask(project,INSTALL_CACHE_TASK_NAME,InstallCacheTask.class);
  installCacheTask.dependsOn(BasePlugin.CLEAN_TASK_NAME + StringUtil.capitalize(installCacheTask.getName()),MavenPlugin.INSTALL_TASK_NAME);
  installCacheTask.doFirst(new Action<Task>(){
    @Override public void execute(    Task task){
      String result=getGitResult(task.getProject(),"status","--porcelain",".");
      if (Validator.isNotNull(result)) {
        throw new GradleException("Unable to install project to the local Gradle " + "cache, commit changes first");
      }
    }
  }
);
  installCacheTask.setArtifactGroup(new Callable<Object>(){
    @Override public Object call() throws Exception {
      return project.getGroup();
    }
  }
);
  installCacheTask.setArtifactName(new Callable<String>(){
    @Override public String call() throws Exception {
      return getArchivesBaseName(project);
    }
  }
);
  installCacheTask.setArtifactVersion(new Callable<Object>(){
    @Override public Object call() throws Exception {
      return project.getVersion();
    }
  }
);
  installCacheTask.setDescription("Installs the project to the local Gradle cache for testing.");
  installCacheTask.setGroup(BasePlugin.UPLOAD_GROUP);
  GradleUtil.setProperty(installCacheTask,LiferayBasePlugin.AUTO_CLEAN_PROPERTY_NAME,false);
  return installCacheTask;
}
