{
  final Project project=recordArtifactTask.getProject();
  Task task=GradleUtil.getTask(project,LiferayJavaPlugin.DEPLOY_TASK_NAME);
  if (!(task instanceof Copy)) {
    return;
  }
  Properties artifactProperties=getArtifactProperties(recordArtifactTask);
  if (isStale(project,artifactProperties)) {
    if (_logger.isDebugEnabled()) {
      _logger.debug("Unable to download artifact, " + project + " is stale");
    }
    return;
  }
  final String artifactURL=artifactProperties.getProperty("artifact.url");
  if (Validator.isNull(artifactURL)) {
    if (_logger.isWarnEnabled()) {
      _logger.warn("Unable to find artifact.url in " + recordArtifactTask.getOutputFile());
    }
    return;
  }
  Copy copy=(Copy)task;
  Task jarTask=GradleUtil.getTask(project,JavaPlugin.JAR_TASK_NAME);
  boolean replaced=GradleUtil.replaceCopySpecSourcePath(copy.getRootSpec(),jarTask,new Callable<File>(){
    @Override public File call() throws Exception {
      return FileUtil.get(project,artifactURL);
    }
  }
);
  if (replaced && _logger.isLifecycleEnabled()) {
    _logger.lifecycle("Downloading artifact from " + artifactURL);
  }
}
