{
  String version=String.valueOf(project.getVersion());
  if (version.endsWith(_SNAPSHOT_VERSION_SUFFIX)) {
    return;
  }
  Task uploadArchivesTask=GradleUtil.getTask(project,BasePlugin.UPLOAD_ARCHIVES_TASK_NAME);
  TaskContainer taskContainer=project.getTasks();
  Task recordArtifactTask=taskContainer.findByName(RECORD_ARTIFACT_TASK_NAME);
  if (recordArtifactTask != null) {
    uploadArchivesTask.dependsOn(recordArtifactTask);
  }
  TaskCollection<PublishNodeModuleTask> publishNodeModuleTasks=taskContainer.withType(PublishNodeModuleTask.class);
  uploadArchivesTask.dependsOn(publishNodeModuleTasks);
  Task updateBundleVersionTask=taskContainer.findByName(UPDATE_BUNDLE_VERSION_TASK_NAME);
  if (updateBundleVersionTask != null) {
    uploadArchivesTask.finalizedBy(updateBundleVersionTask);
  }
  uploadArchivesTask.finalizedBy(updateFileVersionsTask);
}
