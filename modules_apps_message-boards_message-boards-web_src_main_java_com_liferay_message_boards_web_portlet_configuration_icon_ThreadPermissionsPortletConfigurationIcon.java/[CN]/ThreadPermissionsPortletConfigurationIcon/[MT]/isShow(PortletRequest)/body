{
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  User user=themeDisplay.getUser();
  if (user.isDefaultUser()) {
    return false;
  }
  PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
  try {
    MBMessageDisplay messageDisplay=ActionUtil.getMessageDisplay(portletRequest);
    MBThread thread=messageDisplay.getThread();
    if (thread.isLocked()) {
      return false;
    }
    if (!MBMessagePermission.contains(permissionChecker,messageDisplay.getMessage(),ActionKeys.PERMISSIONS)) {
      return false;
    }
  }
 catch (  PortalException pe) {
    return false;
  }
  return true;
}
