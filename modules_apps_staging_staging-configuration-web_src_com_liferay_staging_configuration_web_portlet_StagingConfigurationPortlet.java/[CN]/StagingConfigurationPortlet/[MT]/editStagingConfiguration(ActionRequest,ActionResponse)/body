{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long liveGroupId=ParamUtil.getLong(actionRequest,"liveGroupId");
  Group liveGroup=_groupLocalService.getGroup(liveGroupId);
  int stagingType=ParamUtil.getInteger(actionRequest,"stagingType");
  boolean branchingPublic=ParamUtil.getBoolean(actionRequest,"branchingPublic");
  boolean branchingPrivate=ParamUtil.getBoolean(actionRequest,"branchingPrivate");
  ServiceContext serviceContext=ServiceContextFactory.getInstance(actionRequest);
  boolean forceDisable=ParamUtil.getBoolean(actionRequest,"forceDisable");
  if (forceDisable) {
    _groupLocalService.disableStaging(liveGroupId);
  }
 else   if (stagingType == StagingConstants.TYPE_LOCAL_STAGING) {
    _stagingLocalService.enableLocalStaging(themeDisplay.getUserId(),liveGroup,branchingPublic,branchingPrivate,serviceContext);
  }
 else   if (stagingType == StagingConstants.TYPE_REMOTE_STAGING) {
    String remoteAddress=ParamUtil.getString(actionRequest,"remoteAddress");
    int remotePort=ParamUtil.getInteger(actionRequest,"remotePort");
    String remotePathContext=ParamUtil.getString(actionRequest,"remotePathContext");
    boolean secureConnection=ParamUtil.getBoolean(actionRequest,"secureConnection");
    long remoteGroupId=ParamUtil.getLong(actionRequest,"remoteGroupId");
    _stagingLocalService.enableRemoteStaging(themeDisplay.getUserId(),liveGroup,branchingPublic,branchingPrivate,remoteAddress,remotePort,remotePathContext,secureConnection,remoteGroupId,serviceContext);
  }
 else   if (stagingType == StagingConstants.TYPE_NOT_STAGED) {
    _stagingLocalService.disableStaging(liveGroup,serviceContext);
  }
  String redirect=ParamUtil.getString(actionRequest,"redirect");
  actionRequest.setAttribute(WebKeys.REDIRECT,redirect);
  sendRedirect(actionRequest,actionResponse);
}
