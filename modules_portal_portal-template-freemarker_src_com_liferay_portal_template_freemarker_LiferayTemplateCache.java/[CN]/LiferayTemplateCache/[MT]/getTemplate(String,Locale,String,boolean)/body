{
  for (  String macroTemplateId : _freemarkerEngineConfiguration.macroLibrary()) {
    int pos=macroTemplateId.indexOf(" as ");
    if (pos != -1) {
      macroTemplateId=macroTemplateId.substring(0,pos);
    }
    if (templateId.equals(macroTemplateId)) {
      try {
        return AccessController.doPrivileged(new TemplatePrivilegedExceptionAction(macroTemplateId,locale,encoding));
      }
 catch (      PrivilegedActionException pae) {
        throw (IOException)pae.getException();
      }
    }
  }
  return doGetTemplate(templateId,locale,encoding);
}
