{
  if (context.isWithinDateRange(node.getModifiedDate())) {
    String path=getNodePath(context,node);
    if (context.isPathNotProcessed(path)) {
      Element nodeEl=nodesEl.addElement("node");
      nodeEl.addAttribute("path",path);
      node.setUserUuid(node.getUserUuid());
      context.addPermissions(WikiNode.class,node.getNodeId());
      context.addZipEntry(path,node);
    }
  }
  List<WikiPage> nodePages=WikiPageUtil.findByN_S(node.getNodeId(),WorkflowConstants.STATUS_APPROVED,QueryUtil.ALL_POS,QueryUtil.ALL_POS,new PageVersionComparator(true));
  for (  WikiPage page : nodePages) {
    exportPage(context,nodesEl,pagesEl,page);
  }
}
