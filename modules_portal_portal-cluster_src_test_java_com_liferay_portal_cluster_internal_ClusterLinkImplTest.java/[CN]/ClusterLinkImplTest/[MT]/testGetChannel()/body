{
  ClusterLinkImpl clusterLinkImpl=getClusterLinkImpl(true,2);
  ClusterChannel clusterChannel1=clusterLinkImpl.getChannel(Priority.LEVEL1);
  Assert.assertSame(clusterChannel1,clusterLinkImpl.getChannel(Priority.LEVEL2));
  Assert.assertSame(clusterChannel1,clusterLinkImpl.getChannel(Priority.LEVEL3));
  Assert.assertSame(clusterChannel1,clusterLinkImpl.getChannel(Priority.LEVEL4));
  Assert.assertSame(clusterChannel1,clusterLinkImpl.getChannel(Priority.LEVEL5));
  ClusterChannel clusterChannel2=clusterLinkImpl.getChannel(Priority.LEVEL6);
  Assert.assertSame(clusterChannel2,clusterLinkImpl.getChannel(Priority.LEVEL7));
  Assert.assertSame(clusterChannel2,clusterLinkImpl.getChannel(Priority.LEVEL8));
  Assert.assertSame(clusterChannel2,clusterLinkImpl.getChannel(Priority.LEVEL9));
  Assert.assertSame(clusterChannel2,clusterLinkImpl.getChannel(Priority.LEVEL10));
  List<TestClusterChannel> clusterChannels=TestClusterChannel.getClusterChannels();
  Assert.assertEquals(2,clusterChannels.size());
  Assert.assertNotEquals(clusterChannel1,clusterChannel2);
  Assert.assertTrue(clusterChannels.contains(clusterChannel1));
  Assert.assertTrue(clusterChannels.contains(clusterChannel2));
}
