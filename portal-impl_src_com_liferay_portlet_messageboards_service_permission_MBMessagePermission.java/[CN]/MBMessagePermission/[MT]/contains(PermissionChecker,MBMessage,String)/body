{
  MBCategory category=message.getCategory();
  long groupId=(category != null) ? category.getGroupId() : 0L;
  if (MBBanLocalServiceUtil.hasBan(groupId,permissionChecker.getUserId())) {
    return false;
  }
 else {
    return permissionChecker.hasPermission(groupId,MBMessage.class.getName(),message.getMessageId(),actionId);
  }
}
