{
  HttpServletRequest httpServletRequest=PortletContainerTestUtil.getHttpServletRequest(_group,_layout);
  Assert.assertSame(_layout,httpServletRequest.getAttribute(WebKeys.LAYOUT));
  ThemeDisplay themeDisplay=(ThemeDisplay)httpServletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  Company company=CompanyLocalServiceUtil.getCompany(_layout.getCompanyId());
  Assert.assertEquals(company,themeDisplay.getCompany());
  Assert.assertEquals(_layout.getCompanyId(),themeDisplay.getCompanyId());
  Assert.assertSame(_layout,themeDisplay.getLayout());
  Assert.assertEquals(_layout.getPlid(),themeDisplay.getPlid());
  Assert.assertEquals(TestPropsValues.PORTAL_URL,themeDisplay.getPortalURL());
  Assert.assertEquals(httpServletRequest,themeDisplay.getRequest());
  Assert.assertEquals(_group.getGroupId(),themeDisplay.getScopeGroupId());
  Assert.assertEquals(_group.getGroupId(),themeDisplay.getSiteGroupId());
  Assert.assertEquals(TestPropsValues.getUser(),themeDisplay.getUser());
}
