{
  Map<String,Set<String>> portletModesMap=null;
  try {
    Portlet portlet=_getPortlet(portletName);
    portletModesMap=portlet.getPortletModes();
  }
 catch (  Exception e) {
    throw new ProducerException(e);
  }
  List<MarkupType> markupTypes=new ArrayList<MarkupType>();
  for (  String mimeType : portletModesMap.keySet()) {
    MarkupType markupType=new MarkupType();
    markupType.getWindowStates().addAll(_WSRP_STATES);
    Set<String> modes=portletModesMap.get(mimeType);
    for (    String mode : modes) {
      if (mode.equalsIgnoreCase("edit")) {
        markupType.getModes().add("wsrp:edit");
      }
 else       if (mode.equalsIgnoreCase("help")) {
        markupType.getModes().add("wsrp:help");
      }
 else       if (mode.equalsIgnoreCase("view")) {
        markupType.getModes().add("wsrp:view");
      }
    }
    markupType.setMimeType(mimeType);
    markupTypes.add(markupType);
  }
  return markupTypes;
}
