{
  if (themeDir.isDirectory()) {
    _copyTheme(themeDir);
    return;
  }
  Path outputDirPath=_outputDir.toPath();
  try (ZipFile zipFile=new ZipFile(themeDir)){
    Enumeration<? extends ZipEntry> enumeration=zipFile.entries();
    while (enumeration.hasMoreElements()) {
      ZipEntry zipEntry=enumeration.nextElement();
      String name=zipEntry.getName();
      if (name.endsWith("/") || !name.startsWith("META-INF/resources/" + themeName) || _isIgnoredTemplateFile(name)) {
        continue;
      }
      name=name.substring(20 + themeName.length());
      Path path=outputDirPath.resolve(name);
      Files.createDirectories(path.getParent());
      Files.copy(zipFile.getInputStream(zipEntry),path,StandardCopyOption.REPLACE_EXISTING);
    }
  }
 }
