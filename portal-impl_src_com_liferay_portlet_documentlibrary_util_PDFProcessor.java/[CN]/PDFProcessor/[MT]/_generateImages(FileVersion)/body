{
  try {
    if (_hasImages(fileVersion)) {
      return;
    }
    String extension=fileVersion.getExtension();
    if (extension.equals("pdf")) {
      if (fileVersion instanceof LiferayFileVersion) {
        try {
          LiferayFileVersion liferayFileVersion=(LiferayFileVersion)fileVersion;
          File file=liferayFileVersion.getFile(false);
          _generateImages(fileVersion,file);
          return;
        }
 catch (        UnsupportedOperationException uoe) {
        }
      }
      InputStream inputStream=fileVersion.getContentStream(false);
      _generateImages(fileVersion,inputStream);
    }
 else     if (DocumentConversionUtil.isEnabled()) {
      InputStream inputStream=fileVersion.getContentStream(false);
      String id=DLUtil.getTempFileId(fileVersion.getFileEntryId(),fileVersion.getVersion());
      File file=DocumentConversionUtil.convert(id,inputStream,fileVersion.getExtension(),"pdf");
      _generateImages(fileVersion,file);
    }
  }
 catch (  NoSuchFileEntryException nsfee) {
  }
catch (  Exception e) {
    _log.error(e,e);
  }
 finally {
    _fileEntries.remove(fileVersion.getFileVersionId());
  }
}
