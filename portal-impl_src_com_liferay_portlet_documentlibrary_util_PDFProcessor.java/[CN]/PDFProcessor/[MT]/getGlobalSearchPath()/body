{
  String globalSearchPath=null;
  try {
    PortletPreferences preferences=PrefsPropsUtil.getPreferences();
    globalSearchPath=preferences.getValue(PropsKeys.IMAGEMAGICK_GLOBAL_SEARCH_PATH,null);
    if (Validator.isNull(globalSearchPath)) {
      String filterName=null;
      if (OSDetector.isApple()) {
        filterName="apple";
      }
 else       if (OSDetector.isWindows()) {
        filterName="windows";
      }
 else {
        filterName="unix";
      }
      globalSearchPath=PropsUtil.get(PropsKeys.IMAGEMAGICK_GLOBAL_SEARCH_PATH,new Filter(filterName));
    }
  }
 catch (  Exception e) {
    _log.error(e);
  }
  return globalSearchPath;
}
