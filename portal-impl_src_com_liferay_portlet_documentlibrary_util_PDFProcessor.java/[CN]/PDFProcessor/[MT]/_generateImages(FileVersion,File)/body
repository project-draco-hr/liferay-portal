{
  if (PropsValues.IMAGEMAGICK_ENABLED) {
    long fileVersionId=fileVersion.getFileVersionId();
    if (_isGeneratePreview(fileVersion)) {
      _generateImagesIM(fileVersion,file,PropsValues.DL_FILE_ENTRY_PREVIEW_DOCUMENT_DEPTH,PropsValues.DL_FILE_ENTRY_PREVIEW_DOCUMENT_DPI,PropsValues.DL_FILE_ENTRY_PREVIEW_DOCUMENT_HEIGHT,PropsValues.DL_FILE_ENTRY_PREVIEW_DOCUMENT_WIDTH,false);
      if (_log.isInfoEnabled()) {
        _log.info("ImageMagick generated " + getPreviewFileCount(fileVersion) + " preview pages for "+ fileVersionId);
      }
    }
    if (_isGenerateThumbnail(fileVersion)) {
      _generateImagesIM(fileVersion,file,PropsValues.DL_FILE_ENTRY_THUMBNAIL_DEPTH,PropsValues.DL_FILE_ENTRY_THUMBNAIL_DPI,PropsValues.DL_FILE_ENTRY_THUMBNAIL_HEIGHT,PropsValues.DL_FILE_ENTRY_THUMBNAIL_WIDTH,true);
      if (_log.isInfoEnabled()) {
        _log.info("ImageMagick generated a thumbnail for " + fileVersionId);
      }
    }
  }
 else {
    _generateImages(fileVersion,new FileInputStream(file));
  }
}
