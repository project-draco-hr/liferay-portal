{
  PortletURL portletURL=_liferayPortletResponse.createRenderURL();
  User selUser=PortalUtil.getSelectedUser(_request);
  if (selUser != null) {
    portletURL.setParameter("p_u_i_d",String.valueOf(selUser.getUserId()));
  }
  long[] selectedGroupIds=StringUtil.split(ParamUtil.getString(_request,"selectedGroupIds"),0L);
  boolean includeCompany=ParamUtil.getBoolean(_request,"includeCompany");
  boolean includeCurrentGroup=ParamUtil.getBoolean(_request,"includeCurrentGroup",true);
  boolean includeUserPersonalSite=ParamUtil.getBoolean(_request,"includeUserPersonalSite");
  String eventName=ParamUtil.getString(_request,"eventName",_liferayPortletResponse.getNamespace() + "selectSite");
  String target=ParamUtil.getString(_request,"target");
  portletURL.setParameter("groupId",String.valueOf(getGroupId()));
  portletURL.setParameter("selectedGroupIds",StringUtil.merge(selectedGroupIds));
  portletURL.setParameter("type",getType());
  portletURL.setParameter("types",getTypes());
  portletURL.setParameter("displayStyle",getDisplayStyle());
  portletURL.setParameter("filter",getFilter());
  portletURL.setParameter("includeCompany",String.valueOf(includeCompany));
  portletURL.setParameter("includeCurrentGroup",String.valueOf(includeCurrentGroup));
  portletURL.setParameter("includeUserPersonalSite",String.valueOf(includeUserPersonalSite));
  portletURL.setParameter("manualMembership",String.valueOf(isManualMembership()));
  portletURL.setParameter("eventName",eventName);
  portletURL.setParameter("target",target);
  return portletURL;
}
