{
  className=className.trim();
  Object obj=_classPool.get(className);
  if (obj == null) {
    ClassLoader portalClassLoader=PortalClassLoaderUtil.getClassLoader();
    try {
      Class<?> classObj=portalClassLoader.loadClass(className);
      obj=classObj.newInstance();
      _put(className,obj);
    }
 catch (    Exception e1) {
      if (_log.isWarnEnabled()) {
        _log.warn("Unable to load " + className + " with the portal class loader",e1);
      }
      Thread currentThread=Thread.currentThread();
      ClassLoader contextClassLoader=currentThread.getContextClassLoader();
      try {
        Class<?> classObj=contextClassLoader.loadClass(className);
        obj=classObj.newInstance();
        _put(className,obj);
      }
 catch (      Exception e2) {
        _log.error("Unable to load " + className + " with the portal class loader or the current "+ "context class loader",e2);
      }
    }
  }
  return obj;
}
