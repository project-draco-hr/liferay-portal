{
  if (size < _MINIMUM_INCREMENT_SIZE) {
    size=_MINIMUM_INCREMENT_SIZE;
  }
  Session session=null;
  try {
    session=openSession();
    CounterHBM counterHBM=null;
    try {
      counterHBM=(CounterHBM)session.load(CounterHBM.class,name);
    }
 catch (    ObjectNotFoundException onfe) {
      counterHBM=new CounterHBM();
      counterHBM.setName(name);
      counterHBM.setCurrentId(_DEFAULT_CURRENT_ID);
      session.save(counterHBM);
      session.flush();
    }
    long currentId=counterHBM.getCurrentId() + size;
    counterHBM.setCurrentId(currentId);
    session.flush();
    return currentId;
  }
 catch (  HibernateException he) {
    he.printStackTrace();
    throw new SystemException(he);
  }
 finally {
    closeSession(session);
  }
}
