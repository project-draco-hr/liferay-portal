{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long groupId=ParamUtil.getLong(actionRequest,"groupId");
  String privateLayoutParam=actionRequest.getParameter("privateLayout");
  List<Layout> layouts=getLayouts(groupId,privateLayoutParam);
  if (layouts.isEmpty()) {
    SessionErrors.add(actionRequest,NoSuchLayoutSetException.class.getName(),new NoSuchLayoutSetException("{groupId=" + groupId + ",privateLayout="+ privateLayoutParam+ "}"));
  }
  String redirect=getRedirect(themeDisplay,layouts,groupId,privateLayoutParam);
  if (Validator.isNull(redirect)) {
    redirect=PortalUtil.escapeRedirect(ParamUtil.getString(actionRequest,"redirect"));
  }
  if (Validator.isNotNull(redirect)) {
    actionResponse.sendRedirect(redirect);
  }
}
