{
  PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
  boolean checkGuest=permissionChecker.isCheckGuest();
  try {
    for (    Layout layout : layouts) {
      if (layout.isPrivateLayout()) {
        permissionChecker.setCheckGuest(false);
      }
 else {
        permissionChecker.setCheckGuest(true);
      }
      if (!layout.isHidden() && LayoutPermissionUtil.contains(permissionChecker,layout,ActionKeys.VIEW)) {
        return PortalUtil.getLayoutURL(layout,themeDisplay);
      }
    }
  }
  finally {
    permissionChecker.setCheckGuest(checkGuest);
  }
  Group group=GroupLocalServiceUtil.getGroup(groupId);
  return PortalUtil.getGroupFriendlyURL(group,GetterUtil.getBoolean(privateLayoutParam),themeDisplay);
}
