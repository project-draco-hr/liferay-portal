{
  SearchResponseScroller searchResponseScroller=null;
  try {
    Client client=_elasticsearchConnectionManager.getClient();
    MatchAllQueryBuilder matchAllQueryBuilder=QueryBuilders.matchAllQuery();
    TermFilterBuilder termFilterBuilder=FilterBuilders.termFilter(Field.ENTRY_CLASS_NAME,className);
    termFilterBuilder.cache(false);
    QueryBuilder queryBuilder=QueryBuilders.filteredQuery(matchAllQueryBuilder,termFilterBuilder);
    searchResponseScroller=new SearchResponseScroller(client,searchContext,queryBuilder,TimeValue.timeValueSeconds(30),DocumentTypes.LIFERAY);
    searchResponseScroller.prepare();
    searchResponseScroller.scroll(_searchHitsProcessor);
  }
 catch (  Exception e) {
    throw new SearchException("Unable to delete data for entity " + className,e);
  }
 finally {
    if (searchResponseScroller != null) {
      searchResponseScroller.close();
    }
  }
}
