{
  if (_loaded) {
    return;
  }
  Properties properties=new Properties();
  Thread currentThread=Thread.currentThread();
  ClassLoader classLoader=currentThread.getContextClassLoader();
  boolean systemPropertiesQuiet=GetterUtil.getBoolean(System.getProperty(SYSTEM_PROPERTIES_QUIET));
  try {
    Enumeration<URL> enumeration=classLoader.getResources("system.properties");
    while (enumeration.hasMoreElements()) {
      URL url=enumeration.nextElement();
      try (InputStream inputStream=url.openStream()){
        properties.load(inputStream);
      }
       if (!systemPropertiesQuiet) {
        System.out.println("Loading " + url);
      }
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  try {
    Enumeration<URL> enumeration=classLoader.getResources("system-ext.properties");
    while (enumeration.hasMoreElements()) {
      URL url=enumeration.nextElement();
      _loaded=true;
      try (InputStream inputStream=url.openStream()){
        properties.load(inputStream);
      }
       if (!systemPropertiesQuiet) {
        System.out.println("Loading " + url);
      }
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  SystemEnv.setProperties(properties);
  boolean systemPropertiesLoad=GetterUtil.getBoolean(System.getProperty(SYSTEM_PROPERTIES_LOAD),true);
  boolean systemPropertiesFinal=GetterUtil.getBoolean(System.getProperty(SYSTEM_PROPERTIES_FINAL),true);
  if (systemPropertiesLoad) {
    Enumeration<String> enu=(Enumeration<String>)properties.propertyNames();
    while (enu.hasMoreElements()) {
      String key=enu.nextElement();
      if (systemPropertiesFinal || Validator.isNull(System.getProperty(key))) {
        System.setProperty(key,properties.getProperty(key));
      }
    }
  }
  _properties=new ConcurrentHashMap<>();
  PropertiesUtil.fromProperties(properties,_properties);
}
