{
  if (_loaded) {
    return;
  }
  Properties properties=new Properties();
  Thread currentThread=Thread.currentThread();
  ClassLoader classLoader=currentThread.getContextClassLoader();
  boolean systemPropertiesQuiet=GetterUtil.getBoolean(System.getProperty(SYSTEM_PROPERTIES_QUIET));
  try {
    URL url=classLoader.getResource("system.properties");
    if (url != null) {
      InputStream inputStream=url.openStream();
      properties.load(inputStream);
      inputStream.close();
      if (!systemPropertiesQuiet) {
        System.out.println("Loading " + url);
      }
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  try {
    URL url=classLoader.getResource("system-ext.properties");
    if (url != null) {
      _loaded=true;
      InputStream inputStream=url.openStream();
      properties.load(inputStream);
      inputStream.close();
      if (!systemPropertiesQuiet) {
        System.out.println("Loading " + url);
      }
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  SystemEnv.setProperties(properties);
  boolean systemPropertiesLoad=GetterUtil.getBoolean(System.getProperty(SYSTEM_PROPERTIES_LOAD),true);
  boolean systemPropertiesFinal=GetterUtil.getBoolean(System.getProperty(SYSTEM_PROPERTIES_FINAL),true);
  if (systemPropertiesLoad) {
    Enumeration<String> enu=(Enumeration<String>)properties.propertyNames();
    while (enu.hasMoreElements()) {
      String key=enu.nextElement();
      if (systemPropertiesFinal || Validator.isNull(System.getProperty(key))) {
        System.setProperty(key,properties.getProperty(key));
      }
    }
  }
  _properties=new ConcurrentHashMap<String,String>();
  PropertiesUtil.fromProperties(properties,_properties);
}
