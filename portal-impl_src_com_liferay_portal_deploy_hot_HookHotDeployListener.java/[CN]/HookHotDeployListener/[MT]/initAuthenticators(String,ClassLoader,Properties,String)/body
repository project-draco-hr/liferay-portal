{
  Registry registry=RegistryUtil.getRegistry();
  Map<Object,ServiceRegistration<?>> serviceRegistrations=getServiceRegistrations(servletContextName);
  String[] authenticatorClassNames=StringUtil.split(portalProperties.getProperty(key));
  for (  String authenticatorClassName : authenticatorClassNames) {
    Authenticator authenticator=(Authenticator)newInstance(portletClassLoader,Authenticator.class,authenticatorClassName);
    Map<String,Object> properties=new HashMap<String,Object>();
    properties.put("key",key);
    ServiceRegistration<Authenticator> serviceRegistration=registry.registerService(Authenticator.class,authenticator,properties);
    serviceRegistrations.put(authenticatorClassName,serviceRegistration);
  }
}
