{
  ServletContext servletContext=event.getServletContext();
  String servletContextName=servletContext.getServletContextName();
  if (_log.isDebugEnabled()) {
    _log.debug("Invoking undeploy for " + servletContextName);
  }
  if (!_servletContextNames.remove(servletContextName)) {
    return;
  }
  AuthenticatorsContainer authenticatorsContainer=_authenticatorsContainerMap.remove(servletContextName);
  if (authenticatorsContainer != null) {
    authenticatorsContainer.unregisterAuthenticators();
  }
  AuthFailuresContainer authFailuresContainer=_authFailuresContainerMap.remove(servletContextName);
  if (authFailuresContainer != null) {
    authFailuresContainer.unregisterAuthFailures();
  }
  AutoLoginsContainer autoLoginsContainer=_autoLoginsContainerMap.remove(servletContextName);
  if (autoLoginsContainer != null) {
    autoLoginsContainer.unregisterAutoLogins();
  }
  CustomJspBag customJspBag=_customJspBagsMap.remove(servletContextName);
  if (customJspBag != null) {
    destroyCustomJspBag(customJspBag);
  }
  com.liferay.documentlibrary.util.Hook dlHook=_dlHooksMap.remove(servletContextName);
  if (dlHook != null) {
    com.liferay.documentlibrary.util.HookFactory.setInstance(null);
  }
  EventsContainer eventsContainer=_eventsContainerMap.remove(servletContextName);
  if (eventsContainer != null) {
    eventsContainer.unregisterEvents();
  }
  com.liferay.portal.image.Hook imageHook=_imageHooksMap.remove(servletContextName);
  if (imageHook != null) {
    com.liferay.portal.image.HookFactory.setInstance(null);
  }
  LanguagesContainer languagesContainer=_languagesContainerMap.remove(servletContextName);
  if (languagesContainer != null) {
    languagesContainer.unregisterLanguages();
  }
  com.liferay.mail.util.Hook mailHook=_mailHooksMap.remove(servletContextName);
  if (mailHook != null) {
    com.liferay.mail.util.HookFactory.setInstance(null);
  }
  ModelListenersContainer modelListenersContainer=_modelListenersContainerMap.remove(servletContextName);
  if (modelListenersContainer != null) {
    modelListenersContainer.unregisterModelListeners();
  }
  Properties portalProperties=_portalPropertiesMap.remove(servletContextName);
  if (portalProperties != null) {
    destroyPortalProperties(portalProperties);
  }
  unregisterClpMessageListeners(servletContext);
  if (_log.isInfoEnabled()) {
    _log.info("Hook for " + servletContextName + " was unregistered");
  }
}
