{
  Filter filter=(Filter)InstanceFactory.newInstance(portletClassLoader,filterClassName);
  if (filter instanceof LiferayFilter) {
    filter=(Filter)Proxy.newProxyInstance(portletClassLoader,new Class[]{LiferayFilter.class},new ClassLoaderBeanHandler(filter,portletClassLoader));
  }
 else {
    filter=(Filter)Proxy.newProxyInstance(portletClassLoader,new Class[]{Filter.class},new ClassLoaderBeanHandler(filter,portletClassLoader));
  }
  return filter;
}
