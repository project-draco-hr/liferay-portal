{
  int pos=modelName.lastIndexOf(CharPool.PERIOD);
  String entityName=modelName.substring(pos + 1);
  pos=modelName.lastIndexOf(".model.");
  String packagePath=modelName.substring(0,pos);
  String beanName=packagePath + ".service.persistence." + entityName+ "Persistence";
  if (servletContextName != null) {
    try {
      return (BasePersistence<?>)PortletBeanLocatorUtil.locate(servletContextName,beanName);
    }
 catch (    BeanLocatorException e) {
    }
  }
  return (BasePersistence<?>)PortalBeanLocatorUtil.locate(beanName);
}
