{
  Registry registry=RegistryUtil.getRegistry();
  Map<Object,ServiceRegistration<?>> serviceRegistrations=getServiceRegistrations(servletContextName);
  List<Element> indexerPostProcessorElements=parentElement.elements("indexer-post-processor");
  for (  Element indexerPostProcessorElement : indexerPostProcessorElements) {
    String indexerClassName=indexerPostProcessorElement.elementText("indexer-class-name");
    if (!checkPermission(PACLConstants.PORTAL_HOOK_PERMISSION_INDEXER,portletClassLoader,indexerClassName,"Rejecting indexer " + indexerClassName)) {
      continue;
    }
    String indexerPostProcessorImpl=indexerPostProcessorElement.elementText("indexer-post-processor-impl");
    IndexerPostProcessor indexerPostProcessor=(IndexerPostProcessor)InstanceFactory.newInstance(portletClassLoader,indexerPostProcessorImpl);
    Map<String,Object> properties=new HashMap<String,Object>();
    properties.put("indexer.class.name",indexerClassName);
    ServiceRegistration<IndexerPostProcessor> serviceRegistration=registry.registerService(IndexerPostProcessor.class,indexerPostProcessor,properties);
    serviceRegistrations.put(indexerPostProcessorImpl,serviceRegistration);
  }
}
