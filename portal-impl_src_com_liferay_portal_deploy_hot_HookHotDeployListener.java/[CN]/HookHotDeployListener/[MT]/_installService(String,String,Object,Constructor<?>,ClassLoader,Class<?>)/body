{
  ServiceBag serviceBag=_servicesContainer.findByServiceType(serviceType);
  Object oldService=null;
  if (serviceBag == null) {
    oldService=_getService(serviceProxy);
  }
 else {
    oldService=serviceBag.getOldService();
    _servicesContainer.removeByServiceType(serviceType);
  }
  Object newService=serviceImplConstructor.newInstance(oldService);
  _servicesContainer.addServiceBag(servletContextName,serviceType,oldService,newService);
  _setWrappedService(serviceProxy,newService,portletClassLoader,serviceTypeClass);
}
