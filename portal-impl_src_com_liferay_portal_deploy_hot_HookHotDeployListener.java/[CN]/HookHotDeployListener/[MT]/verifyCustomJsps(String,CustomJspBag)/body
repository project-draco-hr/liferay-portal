{
  if (_customJspBagsMap.isEmpty() || _customJspBagsMap.containsKey(currentServletContextName) || !currentCustomJspBag.isCustomJspGlobal()) {
    return;
  }
  String currentCustomJspDir=currentCustomJspBag.getCustomJspDir();
  Set<String> currentCustomJsps=new HashSet<>();
  for (  String currentCustomJsp : currentCustomJspBag.getCustomJsps()) {
    int pos=currentCustomJsp.indexOf(currentCustomJspDir);
    String portalJsp=currentCustomJsp.substring(pos + currentCustomJspDir.length());
    currentCustomJsps.add(portalJsp);
  }
  Map<String,String> collidingCustomJsps=new HashMap<>();
  for (  Map.Entry<String,CustomJspBag> entry : _customJspBagsMap.entrySet()) {
    String servletContextName=(String)entry.getKey();
    CustomJspBag customJspBag=(CustomJspBag)entry.getValue();
    String customJspDir=customJspBag.getCustomJspDir();
    List<String> customJsps=customJspBag.getCustomJsps();
    for (    String customJsp : customJsps) {
      int pos=customJsp.indexOf(customJspDir);
      String portalJsp=customJsp.substring(pos + customJspDir.length());
      if (currentCustomJsps.contains(portalJsp)) {
        collidingCustomJsps.put(portalJsp,servletContextName);
      }
    }
  }
  if ((collidingCustomJsps != null) && !collidingCustomJsps.isEmpty()) {
    _log.error(currentServletContextName + " is colliding with the " + "currently installed hooks");
    throw new DuplicateCustomJspException();
  }
}
