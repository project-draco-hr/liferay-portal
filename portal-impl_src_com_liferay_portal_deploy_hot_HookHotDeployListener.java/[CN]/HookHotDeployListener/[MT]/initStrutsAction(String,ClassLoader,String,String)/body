{
  Object strutsActionObject=InstanceFactory.newInstance(portletClassLoader,strutsActionClassName);
  if (strutsActionObject instanceof StrutsAction) {
    StrutsAction strutsAction=(StrutsAction)ProxyUtil.newProxyInstance(portletClassLoader,new Class[]{StrutsAction.class},new ClassLoaderBeanHandler(strutsActionObject,portletClassLoader));
    registerService(servletContextName,strutsActionClassName,StrutsAction.class,strutsAction,"path",strutsActionPath);
  }
 else {
    StrutsPortletAction strutsPortletAction=(StrutsPortletAction)ProxyUtil.newProxyInstance(portletClassLoader,new Class[]{StrutsPortletAction.class},new ClassLoaderBeanHandler(strutsActionObject,portletClassLoader));
    registerService(servletContextName,strutsActionClassName,StrutsPortletAction.class,strutsPortletAction,"path",strutsActionPath);
  }
}
