{
  if (layoutSetBranchId <= 0) {
    User user=userPersistence.findByPrimaryKey(userId);
    if (layoutSetId <= 0) {
      LayoutSet layoutSet=layoutSetPersistence.findByG_P(groupId,privateLayout);
      layoutSetId=layoutSet.getLayoutSetId();
    }
    layoutSetBranchId=StagingUtil.getRecentLayoutSetBranchId(user,layoutSetId);
  }
  if (layoutSetBranchId > 0) {
    try {
      return getLayoutSetBranch(layoutSetBranchId);
    }
 catch (    NoSuchLayoutSetBranchException nslsbe) {
    }
  }
  return getMasterLayoutSetBranch(groupId,privateLayout);
}
