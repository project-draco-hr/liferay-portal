{
  serviceContext.setWorkflowAction(WorkflowConstants.ACTION_PUBLISH);
  LayoutSetBranch layoutSetBranch=layoutSetBranchPersistence.findByPrimaryKey(layoutSetBranchId);
  List<LayoutRevision> revisions=layoutRevisionLocalService.getLayoutRevisions(mergeLayoutSetBranchId,true);
  for (  LayoutRevision revision : revisions) {
    serviceContext.setAttribute("mergeLayoutRevisionId",revision.getLayoutRevisionId());
    layoutRevisionLocalService.addLayoutRevision(revision.getUserId(),layoutSetBranch.getLayoutSetBranchId(),LayoutRevisionConstants.DEFAULT_PARENT_LAYOUT_REVISION_ID,false,revision.getPlid(),revision.getPrivateLayout(),revision.getName(),revision.getTitle(),revision.getDescription(),revision.getKeywords(),revision.getRobots(),revision.getTypeSettings(),revision.getIconImage(),revision.getIconImageId(),revision.getThemeId(),revision.getColorSchemeId(),revision.getWapThemeId(),revision.getWapColorSchemeId(),revision.getCss(),serviceContext);
  }
  return layoutSetBranch;
}
