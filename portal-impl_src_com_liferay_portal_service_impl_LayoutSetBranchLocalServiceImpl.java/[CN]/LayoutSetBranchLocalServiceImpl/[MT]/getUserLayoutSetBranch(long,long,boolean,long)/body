{
  if (layoutSetBranchId <= 0) {
    User user=userPersistence.findByPrimaryKey(userId);
    LayoutSet layoutSet=layoutSetLocalService.getLayoutSet(groupId,privateLayout);
    layoutSetBranchId=StagingUtil.getRecentLayoutSetBranchId(user,layoutSet.getLayoutSetId());
  }
  if (layoutSetBranchId > 0) {
    try {
      return getLayoutSetBranch(layoutSetBranchId);
    }
 catch (    NoSuchLayoutSetBranchException nslsbe) {
    }
  }
  return getMasterLayoutSetBranch(groupId,privateLayout);
}
