{
  LayoutSetBranch layoutSetBranch=layoutSetBranchPersistence.findByPrimaryKey(layoutSetBranchId);
  List<LayoutRevision> layoutRevisions=layoutRevisionLocalService.getLayoutRevisions(mergeLayoutSetBranchId,true);
  serviceContext.setWorkflowAction(WorkflowConstants.ACTION_PUBLISH);
  for (  LayoutRevision layoutRevision : layoutRevisions) {
    serviceContext.setAttribute("mergeLayoutRevisionId",layoutRevision.getLayoutRevisionId());
    layoutRevisionLocalService.addLayoutRevision(layoutRevision.getUserId(),layoutSetBranch.getLayoutSetBranchId(),LayoutRevisionConstants.DEFAULT_PARENT_LAYOUT_REVISION_ID,false,layoutRevision.getPlid(),layoutRevision.isPrivateLayout(),layoutRevision.getName(),layoutRevision.getTitle(),layoutRevision.getDescription(),layoutRevision.getKeywords(),layoutRevision.getRobots(),layoutRevision.getTypeSettings(),layoutRevision.getIconImage(),layoutRevision.getIconImageId(),layoutRevision.getThemeId(),layoutRevision.getColorSchemeId(),layoutRevision.getWapThemeId(),layoutRevision.getWapColorSchemeId(),layoutRevision.getCss(),serviceContext);
  }
  return layoutSetBranch;
}
