{
  Set<Class<? extends Capability>> supportedCapabilities=supportedCapabilitiesMap.keySet();
  if (!supportedCapabilities.containsAll(exportedCapabilityClasses)) {
    throw new IllegalArgumentException(String.format("Exporting capabilities not explicitly supported is not " + "allowed. Repository supports %s, but tried to " + "export %s",supportedCapabilitiesMap.keySet(),exportedCapabilityClasses));
  }
  _repository=repository;
  _supportedCapabilitiesMap=supportedCapabilitiesMap;
  _exportedCapabilityClasses=exportedCapabilityClasses;
}
