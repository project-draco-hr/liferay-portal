{
  Iterator<Field> itr=fields.iterator();
  while (itr.hasNext()) {
    Field field=itr.next();
    Map dataMap=null;
    if (field.isRepeatable()) {
      dataMap=new HashMap<Locale,String[]>();
      for (      Locale locale : field.getAvailableLocales()) {
        String[] values=ArrayUtil.toStringArray((Object[])field.getValue(locale));
        dataMap.put(locale,values);
      }
    }
 else {
      dataMap=new HashMap<Locale,String>();
      for (      Locale locale : field.getAvailableLocales()) {
        String value=String.valueOf(field.getValue(locale));
        dataMap.put(locale,value);
      }
    }
    ExpandoValueLocalServiceUtil.addValue(expandoTable.getCompanyId(),ExpandoStorageAdapter.class.getName(),expandoTable.getName(),field.getName(),classPK,dataMap,field.getDefaultLocale());
  }
}
