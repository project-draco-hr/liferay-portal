{
  Iterator<Field> itr=fields.iterator();
  while (itr.hasNext()) {
    Field field=itr.next();
    Map<Locale,?> dataMap=null;
    if (field.isRepeatable()) {
      Map<Locale,String[]> stringArrayMap=new HashMap<Locale,String[]>();
      for (      Locale locale : field.getAvailableLocales()) {
        String[] values=ArrayUtil.toStringArray((Object[])field.getValue(locale));
        stringArrayMap.put(locale,values);
      }
      dataMap=stringArrayMap;
    }
 else {
      Map<Locale,String> stringMap=new HashMap<Locale,String>();
      for (      Locale locale : field.getAvailableLocales()) {
        String value=String.valueOf(field.getValue(locale));
        stringMap.put(locale,value);
      }
      dataMap=stringMap;
    }
    ExpandoValueLocalServiceUtil.addValue(expandoTable.getCompanyId(),ExpandoStorageAdapter.class.getName(),expandoTable.getName(),field.getName(),classPK,dataMap,field.getDefaultLocale());
  }
}
