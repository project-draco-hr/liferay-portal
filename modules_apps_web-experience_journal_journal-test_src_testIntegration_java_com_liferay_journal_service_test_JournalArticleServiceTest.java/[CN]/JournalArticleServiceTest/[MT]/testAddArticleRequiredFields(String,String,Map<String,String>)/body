{
  String definition=readText(ddmStructureDefinition);
  DDMForm ddmForm=_ddmFormXSDDeserializer.deserialize(definition);
  DDMStructure ddmStructure=DDMStructureTestUtil.addStructure(_group.getGroupId(),JournalArticle.class.getName(),ddmForm);
  DDMTemplate ddmTemplate=DDMTemplateTestUtil.addTemplate(_group.getGroupId(),ddmStructure.getStructureId(),PortalUtil.getClassNameId(JournalArticle.class));
  String xmlContent=readText(journalArticleContent);
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(_group.getGroupId());
  for (  Map.Entry<String,String> entry : requiredFields.entrySet()) {
    Assert.assertTrue(ddmStructure.getFieldRequired(entry.getKey()));
    serviceContext.setAttribute(entry.getKey(),entry.getValue());
  }
  JournalTestUtil.addArticleWithXMLContent(JournalFolderConstants.DEFAULT_PARENT_FOLDER_ID,JournalArticleConstants.CLASSNAME_ID_DEFAULT,xmlContent,ddmStructure.getStructureKey(),ddmTemplate.getTemplateKey(),LocaleUtil.fromLanguageId(ddmStructure.getDefaultLanguageId()),serviceContext);
}
