{
  try {
    Document doc=SAXReaderUtil.createDocument();
    Element root=doc.addElement("locks");
    Map<String,Lock> locksMap=context.getLocks();
    for (    Map.Entry<String,Lock> entry : locksMap.entrySet()) {
      Lock lock=entry.getValue();
      String entryKey=entry.getKey();
      int index=entryKey.indexOf(StringPool.POUND);
      String className=entryKey.substring(0,index);
      String key=entryKey.substring(index + 1);
      String path=getLocksPath(context,className,key,lock);
      Element asset=root.addElement("asset");
      asset.addAttribute("class-name",className);
      asset.addAttribute("key",key);
      asset.addAttribute("path",path);
      if (context.isPathNotProcessed(path)) {
        context.addZipEntry(path,lock);
      }
    }
    context.addZipEntry(context.getRootPath() + "/locks.xml",doc.formattedString());
  }
 catch (  IOException ioe) {
    throw new SystemException(ioe);
  }
}
