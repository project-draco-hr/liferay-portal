{
  Element userRolesEl=SAXReaderUtil.createElement("user-roles");
  List<User> users=layoutCache.getGroupUsers(groupId);
  for (  User user : users) {
    long userId=user.getUserId();
    String emailAddress=user.getEmailAddress();
    List<Role> userRoles=layoutCache.getUserRoles(userId);
    Element userEl=exportRoles(companyId,resourceName,ResourceConstants.SCOPE_GROUP,String.valueOf(groupId),userRolesEl,"user",userRoles);
    if (userEl.elements().isEmpty()) {
      userRolesEl.remove(userEl);
    }
 else {
      userEl.addAttribute("email-address",emailAddress);
    }
  }
  if (!userRolesEl.elements().isEmpty()) {
    parentEl.add(userRolesEl);
  }
}
