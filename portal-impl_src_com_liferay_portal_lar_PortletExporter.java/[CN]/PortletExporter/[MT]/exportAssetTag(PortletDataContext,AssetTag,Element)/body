{
  String path=getAssetTagPath(portletDataContext,assetTag.getTagId());
  if (!portletDataContext.isPathNotProcessed(path)) {
    return;
  }
  Element assetTagElement=assetTagsElement.addElement("tag");
  assetTagElement.addAttribute("path",path);
  assetTag.setUserUuid(assetTag.getUserUuid());
  portletDataContext.addZipEntry(path,assetTag);
  List<AssetTagProperty> assetTagProperties=AssetTagPropertyLocalServiceUtil.getTagProperties(assetTag.getTagId());
  for (  AssetTagProperty assetTagProperty : assetTagProperties) {
    Element propertyElement=assetTagElement.addElement("property");
    propertyElement.addAttribute("key",assetTagProperty.getKey());
    propertyElement.addAttribute("value",assetTagProperty.getValue());
  }
  portletDataContext.addPermissions(AssetTag.class,assetTag.getTagId());
}
