{
  try {
    Document doc=SAXReaderUtil.createDocument();
    Map<String,List<ExpandoColumn>> expandoColumnsMap=context.getExpandoColumns();
    Element expandoTablesElement=doc.addElement("expando-tables");
    for (    Map.Entry<String,List<ExpandoColumn>> entry : expandoColumnsMap.entrySet()) {
      String className=entry.getKey();
      Element expandoTableElement=expandoTablesElement.addElement("expando-table");
      expandoTableElement.addAttribute("class-name",className);
      List<ExpandoColumn> expandoColumns=entry.getValue();
      for (      ExpandoColumn expandoColumn : expandoColumns) {
        Element expandoColumnElement=expandoTableElement.addElement("expando-column");
        long columnId=expandoColumn.getColumnId();
        String name=expandoColumn.getName();
        int type=expandoColumn.getType();
        String typeSettings=expandoColumn.getTypeSettings();
        String defaultData=expandoColumn.getDefaultData();
        expandoColumnElement.addAttribute("column-id",String.valueOf(columnId));
        expandoColumnElement.addAttribute("name",name);
        expandoColumnElement.addAttribute("type",String.valueOf(type));
        Element typeSettingsElement=expandoColumnElement.addElement("type-settings");
        typeSettingsElement.addText(typeSettings);
        Element defaultDataElement=expandoColumnElement.addElement("default-data");
        defaultDataElement.addText(defaultData);
      }
    }
    context.addZipEntry(context.getRootPath() + "/expando-tables.xml",doc.formattedString());
  }
 catch (  IOException ioe) {
    throw new SystemException(ioe);
  }
}
