{
  try {
    Document doc=SAXReaderUtil.createDocument();
    Element root=doc.addElement("ratings");
    Map<String,List<RatingsEntry>> ratingsEntriesMap=context.getRatingsEntries();
    for (    Map.Entry<String,List<RatingsEntry>> entry : ratingsEntriesMap.entrySet()) {
      String[] ratingsEntry=entry.getKey().split(StringPool.POUND);
      String ratingPath=getRatingPath(context,ratingsEntry[0],ratingsEntry[1]);
      Element asset=root.addElement("asset");
      asset.addAttribute("path",ratingPath);
      asset.addAttribute("class-name",ratingsEntry[0]);
      asset.addAttribute("class-pk",ratingsEntry[1]);
      List<RatingsEntry> ratingsEntries=entry.getValue();
      for (      RatingsEntry rating : ratingsEntries) {
        ratingPath=getRatingPath(context,ratingsEntry[0],ratingsEntry[1],rating);
        context.addZipEntry(ratingPath,rating);
      }
    }
    context.addZipEntry(context.getRootPath() + "/ratings.xml",doc.formattedString());
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
