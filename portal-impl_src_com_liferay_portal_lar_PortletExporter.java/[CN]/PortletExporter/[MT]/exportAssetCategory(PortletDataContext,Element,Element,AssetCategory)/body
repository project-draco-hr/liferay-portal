{
  exportAssetVocabulary(portletDataContext,assetVocabulariesElement,assetCategory.getVocabularyId());
  if (assetCategory.getParentCategoryId() != AssetCategoryConstants.DEFAULT_PARENT_CATEGORY_ID) {
    exportAssetCategory(portletDataContext,assetVocabulariesElement,assetCategoriesElement,assetCategory.getParentCategoryId());
  }
  String path=getAssetCategoryPath(portletDataContext,assetCategory.getCategoryId());
  if (!portletDataContext.isPathNotProcessed(path)) {
    return;
  }
  Element assetCategoryElement=assetCategoriesElement.addElement("category");
  if (assetCategory.getGroupId() == portletDataContext.getCompanyGroupId()) {
    assetCategoryElement.addAttribute("global","true");
  }
  assetCategoryElement.addAttribute("path",path);
  assetCategory.setUserUuid(assetCategory.getUserUuid());
  portletDataContext.addZipEntry(path,assetCategory);
  List<AssetCategoryProperty> assetCategoryProperties=AssetCategoryPropertyLocalServiceUtil.getCategoryProperties(assetCategory.getCategoryId());
  for (  AssetCategoryProperty assetCategoryProperty : assetCategoryProperties) {
    Element propertyElement=assetCategoryElement.addElement("property");
    propertyElement.addAttribute("userUuid",assetCategoryProperty.getUserUuid());
    propertyElement.addAttribute("key",assetCategoryProperty.getKey());
    propertyElement.addAttribute("value",assetCategoryProperty.getValue());
  }
  portletDataContext.addPermissions(AssetCategory.class,assetCategory.getCategoryId());
}
