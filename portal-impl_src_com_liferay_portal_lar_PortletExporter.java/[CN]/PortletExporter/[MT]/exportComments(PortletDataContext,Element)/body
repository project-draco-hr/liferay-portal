{
  try {
    Document doc=SAXReaderUtil.createDocument();
    Element root=doc.addElement("comments");
    Map<String,List<MBMessage>> commentsMap=context.getComments();
    for (    Map.Entry<String,List<MBMessage>> entry : commentsMap.entrySet()) {
      String[] comment=entry.getKey().split(StringPool.POUND);
      String path=getCommentPath(context,comment[0],comment[1]);
      Element asset=root.addElement("asset");
      asset.addAttribute("path",path);
      asset.addAttribute("class-name",comment[0]);
      asset.addAttribute("class-pk",comment[1]);
      List<MBMessage> messages=entry.getValue();
      for (      MBMessage message : messages) {
        path=getCommentPath(context,comment[0],comment[1],message);
        context.addZipEntry(path,message);
      }
    }
    context.addZipEntry(context.getRootPath() + "/comments.xml",doc.formattedString());
  }
 catch (  IOException ioe) {
    throw new SystemException(ioe);
  }
}
