{
  try {
    Element vocabulariesEl=root.element("vocabularies");
    if (vocabulariesEl == null) {
      vocabulariesEl=root.addElement("vocabularies");
    }
    Element assetsEl=root.addElement("assets");
    Element categoriesEl=root.addElement("categories");
    Map<String,String[]> assetCategoryUuidsMap=context.getAssetCategoryUuidsMap();
    for (    Map.Entry<String,String[]> entry : assetCategoryUuidsMap.entrySet()) {
      String[] categoryEntry=entry.getKey().split(StringPool.POUND);
      String className=categoryEntry[0];
      long classPK=GetterUtil.getLong(categoryEntry[1]);
      Element asset=assetsEl.addElement("asset");
      asset.addAttribute("class-name",className);
      asset.addAttribute("class-pk",String.valueOf(classPK));
      asset.addAttribute("category-uuids",StringUtil.merge(entry.getValue()));
      List<AssetCategory> assetCategories=AssetCategoryServiceUtil.getCategories(className,classPK);
      for (      AssetCategory assestCategory : assetCategories) {
        exportCategory(context,vocabulariesEl,categoriesEl,assestCategory);
      }
    }
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
