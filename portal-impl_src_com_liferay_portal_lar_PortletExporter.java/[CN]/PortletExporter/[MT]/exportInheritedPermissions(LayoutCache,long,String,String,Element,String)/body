{
  Element entityPermissionsEl=SAXReaderUtil.createElement(entityName + "-permissions");
  Map<String,Long> entityMap=layoutCache.getEntityMap(companyId,entityName);
  Iterator<Map.Entry<String,Long>> itr=entityMap.entrySet().iterator();
  while (itr.hasNext()) {
    Map.Entry<String,Long> entry=itr.next();
    String name=entry.getKey().toString();
    long entityGroupId=entry.getValue();
    Element entityEl=exportGroupPermissions(companyId,entityGroupId,resourceName,resourcePrimKey,entityPermissionsEl,entityName + "-actions");
    if (entityEl.elements().isEmpty()) {
      entityPermissionsEl.remove(entityEl);
    }
 else {
      entityEl.addAttribute("name",name);
    }
  }
  if (!entityPermissionsEl.elements().isEmpty()) {
    parentEl.add(entityPermissionsEl);
  }
}
