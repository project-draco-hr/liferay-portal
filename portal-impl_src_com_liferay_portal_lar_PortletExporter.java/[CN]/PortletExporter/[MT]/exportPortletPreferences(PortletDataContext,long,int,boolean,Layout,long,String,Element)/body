{
  PortletPreferences portletPreferences=null;
  if ((ownerType == PortletKeys.PREFS_OWNER_TYPE_COMPANY) || (ownerType == PortletKeys.PREFS_OWNER_TYPE_GROUP) || (ownerType == PortletKeys.PREFS_OWNER_TYPE_ARCHIVED)) {
    plid=PortletKeys.PREFS_OWNER_ID_DEFAULT;
  }
  try {
    portletPreferences=PortletPreferencesLocalServiceUtil.getPortletPreferences(ownerId,ownerType,plid,portletId);
  }
 catch (  NoSuchPortletPreferencesException nsppe) {
    return;
  }
  LayoutTypePortlet layoutTypePortlet=null;
  if (layout != null) {
    layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
  }
  if ((layoutTypePortlet == null) || layoutTypePortlet.hasPortletId(portletId)) {
    exportPortletPreference(portletDataContext,ownerId,ownerType,defaultUser,portletPreferences,portletId,plid,parentElement);
  }
}
