{
  if (throwable instanceof InvocationTargetException) {
    throwable=throwable.getCause();
  }
  JSONObject jsonObject=createJSONObject();
  String throwableMessage=throwable.getMessage();
  if (Validator.isNull(throwableMessage)) {
    throwableMessage=throwable.toString();
  }
  jsonObject.put("exception",throwableMessage);
  jsonObject.put("throwable",throwable.toString());
  JSONObject error=createJSONObject();
  jsonObject.put("error",error);
  error.put("message",throwableMessage);
  error.put("type",ClassUtil.getClassName(throwable));
  Throwable causeThrowable=throwable.getCause();
  JSONObject parentJSONObject=error;
  while (causeThrowable != null) {
    JSONObject cause=createJSONObject();
    throwableMessage=causeThrowable.getMessage();
    if (Validator.isNull(throwableMessage)) {
      throwableMessage=causeThrowable.toString();
    }
    cause.put("message",throwableMessage);
    cause.put("type",ClassUtil.getClassName(causeThrowable));
    parentJSONObject.put("cause",cause);
    causeThrowable=causeThrowable.getCause();
    parentJSONObject=cause;
  }
  return jsonObject.toString();
}
