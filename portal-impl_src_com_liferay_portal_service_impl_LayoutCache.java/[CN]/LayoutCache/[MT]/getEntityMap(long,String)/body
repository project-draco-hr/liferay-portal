{
  Map entityMap=(Map)entityMapMap.get(entityName);
  if (entityMap == null) {
    entityMap=new HashMap();
    if (entityName.equals("user-group")) {
      List userGroups=UserGroupLocalServiceUtil.search(companyId,null,null,null,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
      for (int i=0; i < userGroups.size(); i++) {
        UserGroup userGroup=(UserGroup)userGroups.get(i);
        Group group=userGroup.getGroup();
        entityMap.put(userGroup.getName(),new Long(group.getGroupId()));
      }
    }
 else     if (entityName.equals("organization") || entityName.equals("location")) {
      List organizations=null;
      if (entityName.equals("organization")) {
        organizations=OrganizationLocalServiceUtil.search(companyId,OrganizationImpl.ANY_PARENT_ORGANIZATION_ID,null,OrganizationImpl.TYPE_REGULAR,null,null,null,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
      }
 else       if (entityName.equals("location")) {
        organizations=OrganizationLocalServiceUtil.search(companyId,OrganizationImpl.ANY_PARENT_ORGANIZATION_ID,null,OrganizationImpl.TYPE_LOCATION,null,null,null,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
      }
      for (int i=0; i < organizations.size(); i++) {
        Organization organization=(Organization)organizations.get(i);
        Group group=organization.getGroup();
        entityMap.put(organization.getName(),new Long(group.getGroupId()));
      }
    }
    entityMapMap.put(entityName,entityMap);
  }
  return entityMap;
}
