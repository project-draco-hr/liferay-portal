{
  JournalArticle article=_journalArticleLocalService.getArticle(classPK);
  long folderId=_journalFolderLocalService.getInheritedWorkflowFolderId(article.getFolderId());
  DDMStructure ddmStructure=_ddmStructureLocalService.getStructure(article.getGroupId(),PortalUtil.getClassNameId(JournalArticle.class),article.getDDMStructureKey(),true);
  WorkflowDefinitionLink workflowDefinitionLink=_workflowDefinitionLinkLocalService.fetchWorkflowDefinitionLink(companyId,groupId,JournalFolder.class.getName(),folderId,ddmStructure.getStructureId(),true);
  if (workflowDefinitionLink == null) {
    workflowDefinitionLink=_workflowDefinitionLinkLocalService.fetchWorkflowDefinitionLink(companyId,groupId,JournalFolder.class.getName(),folderId,JournalArticleConstants.DDM_STRUCTURE_ID_ALL,true);
  }
  return workflowDefinitionLink;
}
