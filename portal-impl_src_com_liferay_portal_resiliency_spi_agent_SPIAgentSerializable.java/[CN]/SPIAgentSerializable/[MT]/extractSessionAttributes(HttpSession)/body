{
  Map<String,Serializable> sessionAttributes=new HashMap<String,Serializable>();
  Enumeration<String> enumeration=session.getAttributeNames();
  while (enumeration.hasMoreElements()) {
    String name=enumeration.nextElement();
    Object value=session.getAttribute(name);
    if (value instanceof Serializable) {
      sessionAttributes.put(name,(Serializable)value);
    }
 else     if (_log.isWarnEnabled()) {
      _log.warn("Nonserializable session attribute name " + name + " with value "+ value);
    }
  }
  return sessionAttributes;
}
