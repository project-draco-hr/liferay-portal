{
  ExpandoColumn column=expandoColumnPersistence.fetchByC_N(classNameId,name);
  if (column == null) {
    validate(name,type);
    long expandoId=counterLocalService.increment();
    column=expandoColumnPersistence.create(expandoId);
    column.setClassNameId(classNameId);
    column.setName(name);
    column.setType(type);
    column.setSettingsProperties(properties);
    expandoColumnPersistence.update(column,false);
  }
  return column;
}
