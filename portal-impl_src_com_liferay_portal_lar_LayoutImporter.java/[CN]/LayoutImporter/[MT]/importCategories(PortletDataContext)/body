{
  try {
    String xml=context.getZipEntryAsString(context.getSourceRootPath() + "/categories-hierarchy.xml");
    if (Validator.isNull(xml)) {
      return;
    }
    Document doc=SAXReaderUtil.read(xml);
    Element root=doc.getRootElement();
    List<Element> vocabularies=root.elements("vocabulary");
    for (    Element vocabularyEl : vocabularies) {
      String vocabularyUuid=GetterUtil.getString(vocabularyEl.attributeValue("uuid"));
      String vocabularyName=GetterUtil.getString(vocabularyEl.attributeValue("name"));
      String userUuid=GetterUtil.getString(vocabularyEl.attributeValue("userUuid"));
      ServiceContext serviceContext=new ServiceContext();
      serviceContext.setAddCommunityPermissions(true);
      serviceContext.setAddGuestPermissions(true);
      serviceContext.setScopeGroupId(context.getGroupId());
      AssetVocabulary assetVocabulary=null;
      if (context.getDataStrategy().equals(PortletDataHandlerKeys.DATA_STRATEGY_MIRROR)) {
        AssetVocabulary existingAssetVocabulary=AssetVocabularyUtil.fetchByUUID_G(vocabularyUuid,context.getGroupId());
        if (existingAssetVocabulary == null) {
          assetVocabulary=AssetVocabularyLocalServiceUtil.addVocabulary(vocabularyUuid,context.getUserId(userUuid),vocabularyName,serviceContext);
        }
 else {
          assetVocabulary=AssetVocabularyLocalServiceUtil.updateVocabulary(existingAssetVocabulary.getVocabularyId(),vocabularyName,serviceContext);
        }
      }
 else {
        assetVocabulary=AssetVocabularyLocalServiceUtil.addVocabulary(null,context.getUserId(userUuid),vocabularyName,serviceContext);
      }
      List<Element> categories=vocabularyEl.elements("category");
      for (      Element category : categories) {
        String categoryUuid=GetterUtil.getString(category.attributeValue("uuid"));
        String parentCategoryUuid=GetterUtil.getString(category.attributeValue("parentCategoryUuid"));
        String categoryName=GetterUtil.getString(category.attributeValue("name"));
        String[] properties=null;
        try {
          importCategory(context,categoryUuid,userUuid,parentCategoryUuid,categoryName,assetVocabulary.getVocabularyId(),properties,serviceContext);
        }
 catch (        DuplicateCategoryException dce) {
        }
catch (        NoSuchCategoryException nsce) {
        }
      }
    }
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
