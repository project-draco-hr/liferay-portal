{
  List<Element> roleEls=parentEl.elements("role");
  for (int i=0; i < roleEls.size(); i++) {
    Element roleEl=roleEls.get(i);
    String roleName=roleEl.attributeValue("name");
    Role role=layoutCache.getRole(companyId,roleName);
    if (role == null) {
      _log.warn("Ignoring permissions for role with name " + roleName);
    }
 else {
      List<String> actions=getActions(roleEl);
      PermissionLocalServiceUtil.setRolePermissions(role.getRoleId(),companyId,resourceName,scope,resourcePrimKey,actions.toArray(new String[actions.size()]));
      if (communityRole) {
        long[] groupIds={GetterUtil.getLong(resourcePrimKey)};
        GroupLocalServiceUtil.addRoleGroups(role.getRoleId(),groupIds);
      }
    }
  }
}
