{
  if (_log.isDebugEnabled()) {
    if (newLayoutIds.size() > 0) {
      _log.debug("Delete missing layouts");
    }
  }
  Group group=GroupLocalServiceUtil.getGroup(groupId);
  Set<Long> existLayoutIds=new HashSet<Long>();
  if (group.hasStagingGroup()) {
    Group stagingGroup=group.getStagingGroup();
    if (stagingGroup.hasPrivateLayouts() || stagingGroup.hasPublicLayouts()) {
      List<Layout> layouts=LayoutLocalServiceUtil.getLayouts(stagingGroup.getGroupId(),privateLayout);
      for (      Layout layout : layouts) {
        existLayoutIds.add(layout.getLayoutId());
      }
    }
  }
  for (  Layout layout : previousLayouts) {
    if (!existLayoutIds.contains(layout.getLayoutId())) {
      try {
        LayoutLocalServiceUtil.deleteLayout(layout,privateLayout,serviceContext);
      }
 catch (      NoSuchLayoutException nsle) {
      }
    }
  }
  LayoutSetLocalServiceUtil.updatePageCount(groupId,privateLayout);
}
