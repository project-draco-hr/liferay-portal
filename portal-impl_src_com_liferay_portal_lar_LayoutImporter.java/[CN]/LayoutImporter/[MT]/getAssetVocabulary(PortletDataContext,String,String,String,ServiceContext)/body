{
  AssetVocabulary assetVocabulary=null;
  try {
    if (context.getDataStrategy().equals(PortletDataHandlerKeys.DATA_STRATEGY_MIRROR)) {
      AssetVocabulary existingAssetVocabulary=AssetVocabularyUtil.fetchByUUID_G(vocabularyUuid,context.getGroupId());
      if (existingAssetVocabulary == null) {
        assetVocabulary=AssetVocabularyLocalServiceUtil.addVocabulary(vocabularyUuid,context.getUserId(userUuid),vocabularyName,serviceContext);
      }
 else {
        assetVocabulary=AssetVocabularyLocalServiceUtil.updateVocabulary(existingAssetVocabulary.getVocabularyId(),vocabularyName,serviceContext);
      }
    }
 else {
      assetVocabulary=AssetVocabularyLocalServiceUtil.addVocabulary(null,context.getUserId(userUuid),vocabularyName,serviceContext);
    }
  }
 catch (  DuplicateVocabularyException dve) {
    assetVocabulary=AssetVocabularyLocalServiceUtil.getGroupVocabulary(context.getGroupId(),vocabularyName);
  }
  return assetVocabulary;
}
