{
  AssetVocabulary assetVocabulary=null;
  try {
    if (context.getDataStrategy().equals(PortletDataHandlerKeys.DATA_STRATEGY_MIRROR)) {
      AssetVocabulary existingAssetVocabulary=AssetVocabularyUtil.fetchByUUID_G(vocabularyUuid,context.getGroupId());
      if (existingAssetVocabulary == null) {
        Locale locale=LocaleUtil.getDefault();
        Map<Locale,String> titleMap=new HashMap<Locale,String>();
        titleMap.put(locale,vocabularyName);
        assetVocabulary=AssetVocabularyLocalServiceUtil.addVocabulary(vocabularyUuid,context.getUserId(userUuid),titleMap,null,StringPool.BLANK,serviceContext);
      }
 else {
        assetVocabulary=AssetVocabularyLocalServiceUtil.updateVocabulary(existingAssetVocabulary.getVocabularyId(),existingAssetVocabulary.getTitleMap(),existingAssetVocabulary.getDescriptionMap(),existingAssetVocabulary.getSettings(),serviceContext);
      }
    }
 else {
      Locale locale=LocaleUtil.getDefault();
      Map<Locale,String> titleMap=new HashMap<Locale,String>();
      titleMap.put(locale,vocabularyName);
      assetVocabulary=AssetVocabularyLocalServiceUtil.addVocabulary(null,context.getUserId(userUuid),titleMap,null,StringPool.BLANK,serviceContext);
    }
  }
 catch (  DuplicateVocabularyException dve) {
    assetVocabulary=AssetVocabularyLocalServiceUtil.getGroupVocabulary(context.getGroupId(),vocabularyName);
  }
  return assetVocabulary;
}
