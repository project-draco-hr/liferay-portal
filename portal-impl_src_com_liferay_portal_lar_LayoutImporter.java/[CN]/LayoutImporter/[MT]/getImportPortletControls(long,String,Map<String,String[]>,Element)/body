{
  boolean importPortletConfiguration=MapUtil.getBoolean(parameterMap,PortletDataHandlerKeys.PORTLET_CONFIGURATION);
  boolean importPortletConfigurationAll=MapUtil.getBoolean(parameterMap,PortletDataHandlerKeys.PORTLET_CONFIGURATION_ALL);
  boolean importPortletData=MapUtil.getBoolean(parameterMap,PortletDataHandlerKeys.PORTLET_DATA);
  boolean importPortletDataAll=MapUtil.getBoolean(parameterMap,PortletDataHandlerKeys.PORTLET_DATA_ALL);
  if (_log.isDebugEnabled()) {
    _log.debug("Import portlet data " + importPortletData);
    _log.debug("Import all portlet data " + importPortletDataAll);
    _log.debug("Import portlet configuration " + importPortletConfiguration);
  }
  boolean importCurPortletData=importPortletData;
  String rootPortletId=ExportImportHelperUtil.getExportableRootPortletId(companyId,portletId);
  if (portletDataElement == null) {
    importCurPortletData=false;
  }
 else   if (importPortletDataAll) {
    importCurPortletData=true;
  }
 else   if (rootPortletId != null) {
    importCurPortletData=importPortletData && MapUtil.getBoolean(parameterMap,PortletDataHandlerKeys.PORTLET_DATA + StringPool.UNDERLINE + rootPortletId);
  }
  boolean importCurPortletArchivedSetups=importPortletConfiguration;
  boolean importCurPortletSetup=importPortletConfiguration;
  boolean importCurPortletUserPreferences=importPortletConfiguration;
  if (importPortletConfigurationAll) {
    importCurPortletArchivedSetups=MapUtil.getBoolean(parameterMap,PortletDataHandlerKeys.PORTLET_ARCHIVED_SETUPS_ALL);
    importCurPortletSetup=MapUtil.getBoolean(parameterMap,PortletDataHandlerKeys.PORTLET_SETUP_ALL);
    importCurPortletUserPreferences=MapUtil.getBoolean(parameterMap,PortletDataHandlerKeys.PORTLET_USER_PREFERENCES_ALL);
  }
 else   if (rootPortletId != null) {
    boolean importCurPortletConfiguration=importPortletConfiguration && MapUtil.getBoolean(parameterMap,PortletDataHandlerKeys.PORTLET_CONFIGURATION + StringPool.UNDERLINE + rootPortletId);
    importCurPortletArchivedSetups=importCurPortletConfiguration && MapUtil.getBoolean(parameterMap,PortletDataHandlerKeys.PORTLET_ARCHIVED_SETUPS + StringPool.UNDERLINE + rootPortletId);
    importCurPortletSetup=importCurPortletConfiguration && MapUtil.getBoolean(parameterMap,PortletDataHandlerKeys.PORTLET_SETUP + StringPool.UNDERLINE + rootPortletId);
    importCurPortletUserPreferences=importCurPortletConfiguration && MapUtil.getBoolean(parameterMap,PortletDataHandlerKeys.PORTLET_USER_PREFERENCES + StringPool.UNDERLINE + rootPortletId);
  }
  return new boolean[]{importCurPortletArchivedSetups,importCurPortletData,importCurPortletSetup,importCurPortletUserPreferences};
}
