{
  int x=friendlyURLPath.indexOf(StringPool.SLASH,1);
  String[] urlFragments=StringUtil.split(friendlyURLPath.substring(x + 1),StringPool.SLASH);
  if (urlFragments.length >= 2) {
    String instanceId=urlFragments[0];
    String type=urlFragments[1];
    String assetEntryId=null;
    long groupId=0;
    String urlTitle=null;
    String portletId=_PORTLET_ID + PortletConstants.INSTANCE_SEPARATOR + instanceId;
    String namespace=PortalUtil.getPortletNamespace(portletId);
    parameterMap.put("p_p_id",new String[]{portletId});
    if (friendlyURLPath.indexOf("maximized",x) != -1) {
      addParameter(parameterMap,"p_p_state",WindowState.MAXIMIZED);
    }
    parameterMap.put("p_p_mode",new String[]{PortletMode.VIEW.toString()});
    if (type.equals("rss")) {
      parameterMap.put(namespace + "struts_action",new String[]{"/asset_publisher/rss"});
      parameterMap.put("p_p_lifecycle",new String[]{"2"});
    }
 else {
      if ((urlFragments.length > 3) && urlFragments[2].equals("id")) {
        assetEntryId=urlFragments[3];
      }
 else       if (urlFragments.length > 3) {
        urlTitle=urlFragments[2];
        groupId=GetterUtil.getLong(urlFragments[3]);
      }
 else {
        urlTitle=urlFragments[2];
      }
      parameterMap.put("p_p_lifecycle",new String[]{"0"});
      parameterMap.put(namespace + "struts_action",new String[]{"/asset_publisher/view_content"});
      parameterMap.put(namespace + "type",new String[]{type});
      if (Validator.isNotNull(assetEntryId)) {
        parameterMap.put(namespace + "assetEntryId",new String[]{assetEntryId});
      }
 else {
        if (groupId > 0) {
          parameterMap.put(namespace + "groupId",new String[]{String.valueOf(groupId)});
        }
        parameterMap.put(namespace + "urlTitle",new String[]{urlTitle});
      }
    }
  }
}
