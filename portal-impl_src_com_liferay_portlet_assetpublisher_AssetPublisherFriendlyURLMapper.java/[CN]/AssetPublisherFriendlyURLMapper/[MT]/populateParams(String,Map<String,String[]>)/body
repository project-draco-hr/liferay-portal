{
  int x=friendlyURLPath.indexOf(StringPool.SLASH,1);
  String[] urlFragments=StringUtil.split(friendlyURLPath.substring(x + 1),StringPool.SLASH);
  if (urlFragments.length > 2) {
    String instanceId=urlFragments[0];
    String type=urlFragments[1];
    String assetId=null;
    String urlTitle=null;
    if (urlFragments.length > 3) {
      assetId=urlFragments[3];
    }
 else {
      urlTitle=urlFragments[2];
    }
    String portletId=_PORTLET_ID + "_INSTANCE_" + instanceId;
    if (Validator.equals(portletId,_PORTLET_ID)) {
      portletId=_PORTLET_DEFAULT_INSTANCE;
      params.put("p_p_id",new String[]{portletId});
      params.put("p_p_state",new String[]{WindowState.MAXIMIZED.toString()});
    }
 else {
      params.put("p_p_id",new String[]{portletId});
      params.put("p_p_state",new String[]{WindowState.NORMAL.toString()});
    }
    params.put("p_p_lifecycle",new String[]{"0"});
    params.put("p_p_mode",new String[]{PortletMode.VIEW.toString()});
    String namespace=StringPool.UNDERLINE + portletId + StringPool.UNDERLINE;
    params.put(namespace + "struts_action",new String[]{"/asset_publisher/view_content"});
    if (Validator.isNotNull(assetId)) {
      params.put(namespace + "assetId",new String[]{assetId});
    }
 else {
      params.put(namespace + "type",new String[]{type});
      params.put(namespace + "urlTitle",new String[]{urlTitle});
    }
  }
}
