{
  int initialBaseModelsCount=WikiPageTrashHandlerTestUtil.getNotInTrashBaseModelsCount(_node);
  int initialTrashEntriesCount=TrashEntryLocalServiceUtil.getEntriesCount(_group.getGroupId());
  RelatedPages relatedPages=buildRelatedPages();
  movePageToTrash(relatedPages.getRedirectorPage());
  restoreFromTrash(relatedPages.getRedirectorPage());
  WikiPage page=WikiPageLocalServiceUtil.getPage(relatedPages.getPageResourcePrimKey());
  WikiPage childPage=WikiPageLocalServiceUtil.getPage(relatedPages.getChildPageResourcePrimKey());
  WikiPage grandchildPage=WikiPageLocalServiceUtil.getPage(relatedPages.getGrandchildPageResourcePrimKey());
  WikiPage redirectorPage=WikiPageLocalServiceUtil.getPage(relatedPages.getRedirectorPageResourcePrimKey());
  Assert.assertFalse(page.isInTrash());
  Assert.assertFalse(childPage.isInTrash());
  Assert.assertFalse(grandchildPage.isInTrash());
  Assert.assertFalse(redirectorPage.isInTrashExplicitly());
  Assert.assertEquals(page.getTitle(),childPage.getParentTitle());
  Assert.assertEquals(childPage.getTitle(),grandchildPage.getParentTitle());
  Assert.assertEquals(page.getTitle(),redirectorPage.getRedirectTitle());
  Assert.assertEquals(initialTrashEntriesCount,TrashEntryLocalServiceUtil.getEntriesCount(_group.getGroupId()));
  Assert.assertEquals(initialBaseModelsCount + 5,WikiPageTrashHandlerTestUtil.getNotInTrashBaseModelsCount(_node));
}
