{
  RelatedPages relatedPages=buildRelatedPages();
  movePageToTrash(relatedPages.getChildPage());
  movePageToTrash(relatedPages.getRedirectorPage());
  movePageToTrash(relatedPages.getPage());
  restoreFromTrash(relatedPages.getPage());
  restoreFromTrash(relatedPages.getChildPage());
  restoreFromTrash(relatedPages.getRedirectorPage());
  WikiPage page=WikiPageLocalServiceUtil.getPage(relatedPages.getPageResourcePrimKey());
  WikiPage childPage=WikiPageLocalServiceUtil.getPage(relatedPages.getChildPageResourcePrimKey());
  WikiPage redirectorPage=WikiPageLocalServiceUtil.getPage(relatedPages.getRedirectorPageResourcePrimKey());
  Assert.assertFalse(page.isInTrash());
  Assert.assertEquals(_PAGE,page.getTitle());
  Assert.assertFalse(childPage.isInTrash());
  Assert.assertEquals(_CHILD_PAGE,childPage.getTitle());
  Assert.assertFalse(redirectorPage.isInTrash());
  Assert.assertEquals(_REDIRECTOR_PAGE,redirectorPage.getTitle());
  Assert.assertEquals(page.getTitle(),childPage.getParentTitle());
  Assert.assertEquals(page.getTitle(),redirectorPage.getRedirectTitle());
}
