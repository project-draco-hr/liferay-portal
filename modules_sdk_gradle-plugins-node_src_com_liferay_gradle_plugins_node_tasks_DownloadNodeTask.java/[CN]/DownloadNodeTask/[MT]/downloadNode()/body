{
  final File nodeDir=getNodeDir();
  final String nodeUrl=getNodeUrl();
  final Project project=getProject();
  final File nodeFile=FileUtil.get(project,nodeUrl);
  project.copy(new Action<CopySpec>(){
    @Override public void execute(    CopySpec copySpec){
      if (nodeUrl.endsWith(".tar.gz")) {
        copySpec.eachFile(new StripPathSegmentsAction(1));
        copySpec.from(project.tarTree(nodeFile));
        copySpec.setIncludeEmptyDirs(false);
      }
 else {
        copySpec.from(nodeFile);
      }
      copySpec.into(nodeDir);
    }
  }
);
  if (OSDetector.isWindows()) {
    final File npmFile=FileUtil.get(project,getNpmUrl());
    project.copy(new Action<CopySpec>(){
      @Override public void execute(      CopySpec copySpec){
        copySpec.from(project.zipTree(npmFile));
        copySpec.into(nodeDir);
      }
    }
);
  }
  _nodeExecutor.setArgs("config","set","cache",getCacheDir(),"--global");
  _nodeExecutor.setCommand("npm");
  _nodeExecutor.setWorkingDir(getNodeDir());
  _nodeExecutor.execute();
}
