{
  super.updateFile(companyId,repositoryId,fileName,newFileName);
  File newFileNameDir=getFileNameDir(companyId,repositoryId,newFileName);
  String[] fileNameVersions=FileUtil.listFiles(newFileNameDir);
  for (  String fileNameVersion : fileNameVersions) {
    String ext=FileUtil.getExtension(fileNameVersion);
    String newFileNameVersion=newFileName;
    if (ext.equals(_HOOK_EXTENSION)) {
      int pos=fileNameVersion.lastIndexOf(CharPool.UNDERLINE);
      newFileNameVersion+=fileNameVersion.substring(pos);
    }
    File fileNameVersionFile=new File(newFileNameDir + StringPool.SLASH + fileNameVersion);
    if (!fileNameVersionFile.exists()) {
      throw new NoSuchFileException(companyId,repositoryId,fileName,fileNameVersion);
    }
    File newFileNameVersionFile=new File(newFileNameDir + StringPool.SLASH + newFileNameVersion);
    boolean renamed=FileUtil.move(fileNameVersionFile,newFileNameVersionFile);
    if (!renamed) {
      throw new SystemException("File name version file was not renamed from " + fileNameVersionFile.getPath() + " to "+ newFileNameVersionFile.getPath());
    }
  }
}
