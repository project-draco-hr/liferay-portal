{
  String regex=escapeRegex(pattern);
  Matcher matcher=_fragmentPattern.matcher(pattern);
  _stringParserFragments=new ArrayList<>(matcher.groupCount());
  while (matcher.find()) {
    String chunk=matcher.group();
    StringParserFragment stringParserFragment=StringParserFragment.create(chunk);
    _stringParserFragments.add(stringParserFragment);
    pattern=StringUtil.replace(pattern,chunk,stringParserFragment.getToken());
    regex=StringUtil.replace(regex,escapeRegex(chunk),StringPool.OPEN_PARENTHESIS.concat(stringParserFragment.getPattern().concat(StringPool.CLOSE_PARENTHESIS)));
  }
  _builder=pattern;
  _pattern=Pattern.compile(regex);
}
