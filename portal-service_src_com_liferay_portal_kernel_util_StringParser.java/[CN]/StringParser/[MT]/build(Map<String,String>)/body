{
  String s=_builder;
  for (  StringParserFragment fragment : _fragments) {
    String value=parameters.get(fragment.getName());
    if (value == null) {
      return null;
    }
    if (_encoder != null) {
      value=_encoder.encode(value);
    }
    if (!fragment.matches(value)) {
      return null;
    }
    s=s.replace(fragment.getToken(),value);
  }
  for (  StringParserFragment fragment : _fragments) {
    parameters.remove(fragment.getName());
  }
  return s;
}
