{
  Timestamp now=new Timestamp(System.currentTimeMillis());
  Connection con=null;
  PreparedStatement ps=null;
  try {
    con=DataAccess.getUpgradeOptimizedConnection();
    StringBundler sb=new StringBundler(7);
    sb.append("insert into DDMTemplate (uuid_, templateId, groupId, ");
    sb.append("companyId, userId, userName, createDate, modifiedDate,");
    sb.append("classNameId, classPK, templateKey, version, name, ");
    sb.append("description, type_, mode_, language, script, ");
    sb.append("cacheable, smallImage, smallImageId, smallImageURL) ");
    sb.append("values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ");
    sb.append("?, ?, ?, ?, ?, ?, ?)");
    String sql=sb.toString();
    ps=con.prepareStatement(sql);
    ps.setString(1,uuid);
    ps.setLong(2,ddmTemplateId);
    ps.setLong(3,groupId);
    ps.setLong(4,companyId);
    ps.setLong(5,getDefaultUserId(companyId));
    ps.setString(6,StringPool.BLANK);
    ps.setTimestamp(7,now);
    ps.setTimestamp(8,now);
    ps.setLong(9,PortalUtil.getClassNameId(_CLASS_NAME_DDM_STRUCTURE));
    ps.setLong(10,ddmStructureId);
    ps.setString(11,templateKey);
    ps.setString(12,DDMTemplateManager.TEMPLATE_VERSION_DEFAULT);
    ps.setString(13,localizedName);
    ps.setString(14,localizedDescription);
    ps.setString(15,DDMTemplateManager.TEMPLATE_TYPE_DISPLAY);
    ps.setString(16,DDMTemplateManager.TEMPLATE_MODE_CREATE);
    ps.setString(17,TemplateConstants.LANG_TYPE_FTL);
    ps.setString(18,script);
    ps.setBoolean(19,cacheable);
    ps.setBoolean(20,false);
    ps.setLong(21,0);
    ps.setString(22,StringPool.BLANK);
    ps.executeUpdate();
    addDDMTemplateVersion(increment(),groupId,companyId,getDefaultUserId(companyId),StringPool.BLANK,now,PortalUtil.getClassNameId(_CLASS_NAME_DDM_STRUCTURE),ddmStructureId,ddmTemplateId,localizedName,localizedDescription,TemplateConstants.LANG_TYPE_FTL,script,WorkflowConstants.STATUS_APPROVED,getDefaultUserId(companyId),StringPool.BLANK,now);
    Map<String,Long> bitwiseValues=getBitwiseValues(_CLASS_NAME_DDM_TEMPLATE);
    List<String> actionIds=new ArrayList<>();
    actionIds.add(ActionKeys.VIEW);
    long bitwiseValue=getBitwiseValue(bitwiseValues,actionIds);
    addResourcePermission(companyId,_CLASS_NAME_DDM_TEMPLATE,ddmTemplateId,getRoleId(companyId,RoleConstants.GUEST),bitwiseValue);
    addResourcePermission(companyId,_CLASS_NAME_DDM_TEMPLATE,ddmTemplateId,getRoleId(companyId,RoleConstants.SITE_MEMBER),bitwiseValue);
  }
 catch (  Exception e) {
    _log.error("Unable to create the basic web content template");
    throw e;
  }
 finally {
    DataAccess.cleanUp(con,ps);
  }
  return ddmTemplateId;
}
