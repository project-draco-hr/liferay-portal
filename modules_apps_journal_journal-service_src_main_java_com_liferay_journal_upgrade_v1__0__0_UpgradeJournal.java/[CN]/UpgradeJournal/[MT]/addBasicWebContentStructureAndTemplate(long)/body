{
  long groupId=getCompanyGroupId(companyId);
  String defaultLanguageId=UpgradeProcessUtil.getDefaultLanguageId(companyId);
  Locale defaultLocale=LocaleUtil.fromLanguageId(defaultLanguageId);
  List<Element> structureElements=getDDMStructures(defaultLocale);
  Element structureElement=structureElements.get(0);
  String name=structureElement.elementText("name");
  String description=structureElement.elementText("description");
  String localizedName=localize(groupId,name,defaultLanguageId);
  String localizedDescription=localize(groupId,description,defaultLanguageId);
  Element structureElementDefinitionElement=structureElement.element("definition");
  String definition=structureElementDefinitionElement.getTextTrim();
  Element structureElementLayoutElement=structureElement.element("layout");
  String layout=structureElementLayoutElement.getTextTrim();
  if (hasDDMStructure(groupId,name) > 0) {
    return name;
  }
  String ddmStructureUUID=PortalUUIDUtil.generate();
  long ddmStructureId=addDDMStructure(ddmStructureUUID,increment(),groupId,companyId,name,localizedName,localizedDescription,definition,layout,StorageEngineManager.STORAGE_TYPE_DEFAULT);
  String ddmTemplateUUID=PortalUUIDUtil.generate();
  Element templateElement=structureElement.element("template");
  String fileName=templateElement.elementText("file-name");
  boolean cacheable=GetterUtil.getBoolean(templateElement.elementText("cacheable"));
  addDDMTemplate(ddmTemplateUUID,increment(),groupId,companyId,ddmStructureId,name,localizedName,localizedDescription,getContent(fileName),cacheable);
  long stagingGroupId=getStagingGroupId(groupId);
  if (stagingGroupId > 0) {
    ddmStructureId=addDDMStructure(ddmStructureUUID,increment(),stagingGroupId,companyId,name,localizedName,localizedDescription,definition,layout,StorageEngineManager.STORAGE_TYPE_DEFAULT);
    addDDMTemplate(ddmTemplateUUID,increment(),stagingGroupId,companyId,ddmStructureId,name,localizedName,localizedDescription,getContent(fileName),cacheable);
  }
  return name;
}
