{
  String phase=GetterUtil.getString(backgroundTaskStatus.getAttribute("phase"));
  if (Validator.isNull(phase)) {
    clearBackgroundTaskStatus(backgroundTaskStatus);
    phase=Constants.EXPORT;
  }
 else {
    phase=Constants.IMPORT;
  }
  backgroundTaskStatus.setAttribute("phase",phase);
  if (phase.equals(Constants.EXPORT)) {
    long portletModelAdditionCountersTotal=GetterUtil.getLong(message.get("portletModelAdditionCountersTotal"));
    backgroundTaskStatus.setAttribute("allModelAdditionCountersTotal",portletModelAdditionCountersTotal);
  }
 else {
    backgroundTaskStatus.setAttribute("allPortletModelAdditionCounters",new HashMap<String,LongWrapper>());
    backgroundTaskStatus.setAttribute("currentPortletModelAdditionCounters",new HashMap<String,LongWrapper>());
    long allModelAdditionCountersTotal=GetterUtil.getLong(backgroundTaskStatus.getAttribute("allModelAdditionCountersTotal"));
    long currentModelAdditionCountersTotal=GetterUtil.getLong(backgroundTaskStatus.getAttribute("currentModelAdditionCountersTotal"));
    backgroundTaskStatus.setAttribute("allModelAdditionCountersTotal",allModelAdditionCountersTotal + currentModelAdditionCountersTotal);
  }
  super.translatePortletMessage(backgroundTaskStatus,message);
}
