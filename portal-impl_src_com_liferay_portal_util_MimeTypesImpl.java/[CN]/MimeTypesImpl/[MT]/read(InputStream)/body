{
  DocumentBuilderFactory documentBuilderFactory=SecureXMLFactoryProviderUtil.newDocumentBuilderFactory();
  DocumentBuilder documentBuilder=documentBuilderFactory.newDocumentBuilder();
  Document document=documentBuilder.parse(new InputSource(stream));
  Element element=document.getDocumentElement();
  if ((element == null) || !MIME_INFO_TAG.equals(element.getTagName())) {
    throw new SystemException("Invalid configuration file");
  }
  NodeList nodeList=element.getChildNodes();
  for (int i=0; i < nodeList.getLength(); i++) {
    Node node=nodeList.item(i);
    if (node.getNodeType() != Node.ELEMENT_NODE) {
      continue;
    }
    Element childElement=(Element)node;
    if (MIME_TYPE_TAG.equals(childElement.getTagName())) {
      readMimeType(childElement);
    }
  }
}
