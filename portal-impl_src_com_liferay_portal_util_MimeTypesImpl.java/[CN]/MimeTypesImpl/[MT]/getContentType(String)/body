{
  if (Validator.isNull(fileName)) {
    return ContentTypes.APPLICATION_OCTET_STREAM;
  }
  try {
    Tika tika=new Tika();
    String contentType=tika.detect(fileName);
    if (!contentType.contains("tika")) {
      return contentType;
    }
 else     if (_log.isDebugEnabled()) {
      _log.debug("Retrieved invalid content type " + contentType);
    }
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
  return ContentTypes.APPLICATION_OCTET_STREAM;
}
