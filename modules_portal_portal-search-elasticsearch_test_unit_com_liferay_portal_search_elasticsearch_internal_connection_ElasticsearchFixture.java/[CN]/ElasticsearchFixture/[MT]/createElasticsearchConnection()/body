{
  EmbeddedElasticsearchConnection embeddedElasticsearchConnection=new EmbeddedElasticsearchConnection();
  Props props=Mockito.mock(Props.class);
  Mockito.when(props.get(PropsKeys.LIFERAY_HOME)).thenReturn(_tmpDir);
  embeddedElasticsearchConnection.setProps(props);
  HashMap<String,Object> properties=new HashMap<>();
  properties.put("configurationPid",ElasticsearchConfiguration.class.getName());
  embeddedElasticsearchConnection.activate(properties);
  embeddedElasticsearchConnection.initialize();
  return embeddedElasticsearchConnection;
}
