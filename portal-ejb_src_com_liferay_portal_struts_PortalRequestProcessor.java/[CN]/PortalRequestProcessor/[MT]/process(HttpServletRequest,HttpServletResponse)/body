{
  String path=super.processPath(req,res);
  ActionMapping mapping=(ActionMapping)moduleConfig.findActionConfig(path);
  if ((mapping == null) && !path.startsWith(_PATH_WSRP)) {
    String lastPath=getLastPath(req);
    if (_log.isDebugEnabled()) {
      _log.debug("Last path " + lastPath);
    }
    res.sendRedirect(lastPath);
    return;
  }
  super.process(req,res);
  try {
    if (isPortletPath(path)) {
      cleanUp(req);
    }
  }
 catch (  Exception e) {
    _log.error(StackTraceUtil.getStackTrace(e));
  }
}
