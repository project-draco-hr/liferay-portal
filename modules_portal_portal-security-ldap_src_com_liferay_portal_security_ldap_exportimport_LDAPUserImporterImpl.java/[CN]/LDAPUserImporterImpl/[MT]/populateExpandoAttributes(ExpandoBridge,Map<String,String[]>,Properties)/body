{
  Map<String,Serializable> serializedExpandoAttributes=new HashMap<>();
  for (  Map.Entry<String,String[]> expandoAttribute : expandoAttributes.entrySet()) {
    String name=expandoAttribute.getKey();
    if (!expandoBridge.hasAttribute(name)) {
      continue;
    }
    if (expandoMappings.containsKey(name) && !_ldapUserIgnoreAttributes.contains(name)) {
      int type=expandoBridge.getAttributeType(name);
      Serializable value=ExpandoConverterUtil.getAttributeFromStringArray(type,expandoAttribute.getValue());
      serializedExpandoAttributes.put(name,value);
    }
  }
  if (serializedExpandoAttributes.isEmpty()) {
    return;
  }
  try {
    ExpandoValueLocalServiceUtil.addValues(expandoBridge.getCompanyId(),expandoBridge.getClassName(),ExpandoTableConstants.DEFAULT_TABLE_NAME,expandoBridge.getClassPK(),serializedExpandoAttributes);
  }
 catch (  Exception e) {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to populate expando attributes");
    }
    if (_log.isDebugEnabled()) {
      _log.debug(e,e);
    }
  }
}
