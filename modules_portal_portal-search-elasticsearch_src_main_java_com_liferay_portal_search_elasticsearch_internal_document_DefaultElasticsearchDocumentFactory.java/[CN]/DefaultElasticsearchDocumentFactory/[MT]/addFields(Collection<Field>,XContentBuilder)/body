{
  for (  Field field : fields) {
    if (!field.hasChildren()) {
      addField(xContentBuilder,field);
    }
 else {
      addNestedField(xContentBuilder,field);
    }
  }
}
