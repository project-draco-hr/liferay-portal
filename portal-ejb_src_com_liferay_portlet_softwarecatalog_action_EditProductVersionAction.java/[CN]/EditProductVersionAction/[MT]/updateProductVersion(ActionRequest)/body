{
  Layout layout=(Layout)req.getAttribute(WebKeys.LAYOUT);
  long productVersionId=ParamUtil.getLong(req,"productVersionId");
  long productEntryId=ParamUtil.getLong(req,"productEntryId");
  String version=ParamUtil.getString(req,"version");
  String changeLog=ParamUtil.getString(req,"changeLog");
  String downloadPageURL=ParamUtil.getString(req,"downloadPageURL");
  String directDownloadURL=ParamUtil.getString(req,"directDownloadURL");
  boolean repoStoreArtifact=ParamUtil.getBoolean(req,"repoStoreArtifact");
  long[] frameworkVersionIds=ParamUtil.getLongValues(req,"frameworkVersions");
  String[] communityPermissions=req.getParameterValues("communityPermissions");
  String[] guestPermissions=req.getParameterValues("guestPermissions");
  if (productVersionId <= 0) {
    SCProductVersionServiceUtil.addProductVersion(productEntryId,version,changeLog,downloadPageURL,directDownloadURL,repoStoreArtifact,frameworkVersionIds,communityPermissions,guestPermissions);
  }
 else {
    SCProductVersionServiceUtil.updateProductVersion(productVersionId,version,changeLog,downloadPageURL,directDownloadURL,repoStoreArtifact,frameworkVersionIds);
  }
}
