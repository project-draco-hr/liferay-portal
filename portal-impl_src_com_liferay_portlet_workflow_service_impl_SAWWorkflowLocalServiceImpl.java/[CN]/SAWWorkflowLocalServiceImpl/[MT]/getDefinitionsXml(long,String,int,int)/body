{
  Workflow workflow=null;
  try {
    workflow=_getWorkflowImpl();
  }
 catch (  WorkflowException e) {
    throw new WorkflowComponentException(e);
  }
  BusinessProcessVO businessProcessVO=new BusinessProcessVO();
  List<BusinessProcessVO> bpVOList=null;
  if (definitionId > 0) {
    businessProcessVO.setId(String.valueOf(definitionId));
    OutputVO outputVO=null;
    try {
      outputVO=workflow.getBusinessProcess(businessProcessVO);
    }
 catch (    WorkflowException e) {
      throw new WorkflowComponentException(e);
    }
    bpVOList=outputVO.getBusinessProcessVOList();
  }
 else {
    Map resultsMap=_invokeMethod(com.sun.lifray.saw.ext.SAWJbpmGraphSession.class,"findProcessDefinitionsByName",new Class[]{String.class,int.class,int.class},new Object[]{name,begin,end},workflow);
    bpVOList=(ArrayList<BusinessProcessVO>)resultsMap.get("invokeMethodResult");
  }
  Document doc=DocumentHelper.createDocument();
  Element root=doc.addElement("result");
  for (int i=0; i < bpVOList.size(); i++) {
    BusinessProcessVO bpVO=(BusinessProcessVO)bpVOList.get(i);
    _createElement(bpVO,root);
  }
  return doc.asXML();
}
