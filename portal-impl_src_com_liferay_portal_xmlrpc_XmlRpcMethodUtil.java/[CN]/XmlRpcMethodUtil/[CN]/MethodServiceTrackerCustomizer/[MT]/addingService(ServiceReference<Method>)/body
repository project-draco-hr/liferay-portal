{
  Registry registry=RegistryUtil.getRegistry();
  Method method=registry.getService(serviceReference);
  String token=method.getToken();
  String methodName=method.getMethodName();
  Map<String,Method> tokenMethods=_methodRegistry.get(token);
  if (tokenMethods == null) {
    tokenMethods=new HashMap<String,Method>();
    _methodRegistry.put(token,tokenMethods);
  }
  Method registeredMethod=tokenMethods.get(methodName);
  if (registeredMethod != null) {
    if (_log.isWarnEnabled()) {
      _log.warn("There is already an XML-RPC method registered with " + "name " + methodName + " at "+ token);
    }
  }
 else {
    tokenMethods.put(methodName,method);
  }
  return method;
}
