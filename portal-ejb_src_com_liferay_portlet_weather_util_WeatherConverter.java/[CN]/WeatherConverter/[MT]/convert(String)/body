{
  Weather weather=null;
  try {
    if (_DEFAULT_TYPE == _TYPE_NWS) {
      String text=Http.URLtoString("http://www.srh.noaa.gov/zipcity.php?inputstring=" + _zip);
      int pos=text.indexOf("currentconds.jpg");
      int x=text.indexOf("&deg;F",pos);
      int y=text.substring(0,x).lastIndexOf(">") + 1;
      weather=new Weather(_zip,Float.parseFloat(text.substring(y,x)));
    }
 else     if (_DEFAULT_TYPE == _TYPE_XMETHODS) {
      URL url=new URL("http://services.xmethods.com:80/soap/servlet/rpcrouter");
      Call call=new Call();
      call.setEncodingStyleURI(Constants.NS_URI_SOAP_ENC);
      call.setTargetObjectURI("urn:xmethods-Temperature");
      call.setMethodName("getTemp");
      Vector params=new Vector();
      params.addElement(new Parameter("zipcode",String.class,_zip,null));
      call.setParams(params);
      Response resp=call.invoke(url,StringPool.BLANK);
      if (resp.generatedFault()) {
        throw new Exception();
      }
 else {
        Parameter result=resp.getReturnValue();
        Float temperature=(Float)result.getValue();
        weather=new Weather(_zip,temperature.floatValue());
      }
    }
 else     if (_DEFAULT_TYPE == _TYPE_WEATHER_CHANNEL) {
      String text=Http.URLtoString("http://www.weather.com/search/search?where=" + Http.encodeURL(_zip));
      int x=text.indexOf("<!-- insert wx icon -->") + 23;
      String iconURL=text.substring(text.indexOf("http://",x),text.indexOf(".gif",x) + 4);
      iconURL=StringUtil.replace(iconURL,"/52/","/31/");
      x=text.indexOf("<!-- insert current temp -->") + 28;
      int y=text.indexOf("&deg;F",x);
      float temperature=Float.parseFloat(text.substring(x,y));
      weather=new Weather(_zip,iconURL,temperature);
    }
 else     if (_DEFAULT_TYPE == _TYPE_YAHOO) {
      String text=Html.stripComments(Http.URLtoString("http://search.weather.yahoo.com/search/weather2?p=" + Http.encodeURL(_zip)));
      int x=text.indexOf("<b>",text.indexOf("Currently:")) + 3;
      int y=text.indexOf("&deg;",x);
      float temperature=Float.parseFloat(text.substring(x,y).trim());
      String iconURL=text.substring(text.indexOf("http://",x),text.indexOf(".gif",x) + 4);
      iconURL=StringUtil.replace(iconURL,"/52/","/31/");
      weather=new Weather(_zip,iconURL,temperature);
    }
  }
 catch (  Exception e) {
    throw new ConverterException(_zip);
  }
  return weather;
}
