{
  UnsyncBufferedInputStream unsyncBufferedInputStream=new UnsyncBufferedInputStream(new ByteArrayInputStream(_BUFFER));
  assertEquals(-1,unsyncBufferedInputStream.markLimitIndex);
  unsyncBufferedInputStream.mark(0);
  assertEquals(-1,unsyncBufferedInputStream.markLimitIndex);
  unsyncBufferedInputStream.mark(-2);
  assertEquals(-1,unsyncBufferedInputStream.markLimitIndex);
  int markLimitIndex=10;
  unsyncBufferedInputStream.mark(markLimitIndex);
  assertEquals(markLimitIndex,unsyncBufferedInputStream.markLimitIndex);
  assertEquals(_SIZE,unsyncBufferedInputStream.available());
  assertEquals(0,unsyncBufferedInputStream.read());
  assertEquals(1,unsyncBufferedInputStream.read());
  assertEquals(2,unsyncBufferedInputStream.read());
  assertEquals(3,unsyncBufferedInputStream.index);
  unsyncBufferedInputStream.reset();
  assertEquals(_SIZE,unsyncBufferedInputStream.available());
  assertEquals(0,unsyncBufferedInputStream.read());
  assertEquals(1,unsyncBufferedInputStream.read());
  assertEquals(2,unsyncBufferedInputStream.read());
  assertEquals(3,unsyncBufferedInputStream.index);
  int bufferSize=20;
  unsyncBufferedInputStream=new UnsyncBufferedInputStream(new ByteArrayInputStream(_BUFFER),bufferSize);
  assertEquals(-1,unsyncBufferedInputStream.markLimitIndex);
  unsyncBufferedInputStream.mark(markLimitIndex);
  assertEquals(markLimitIndex,unsyncBufferedInputStream.markLimitIndex);
  for (int i=0; i < bufferSize * 2; i++) {
    assertEquals(i,unsyncBufferedInputStream.read());
  }
  assertEquals(bufferSize,unsyncBufferedInputStream.index);
  assertEquals(_SIZE - bufferSize * 2,unsyncBufferedInputStream.available());
  assertEquals(-1,unsyncBufferedInputStream.markLimitIndex);
  try {
    unsyncBufferedInputStream.reset();
    fail();
  }
 catch (  IOException ioe) {
  }
  unsyncBufferedInputStream=new UnsyncBufferedInputStream(new ByteArrayInputStream(_BUFFER));
  assertEquals(0,unsyncBufferedInputStream.read());
  assertEquals(1,unsyncBufferedInputStream.read());
  assertEquals(2,unsyncBufferedInputStream.read());
  assertEquals(3,unsyncBufferedInputStream.index);
  unsyncBufferedInputStream.mark(markLimitIndex);
  assertEquals(0,unsyncBufferedInputStream.index);
  assertEquals(3,unsyncBufferedInputStream.read());
  assertEquals(4,unsyncBufferedInputStream.read());
  assertEquals(5,unsyncBufferedInputStream.read());
  unsyncBufferedInputStream=new UnsyncBufferedInputStream(new ByteArrayInputStream(_BUFFER),_SIZE);
  byte[] tempBuffer=new byte[_SIZE / 2];
  assertEquals(_SIZE / 2,unsyncBufferedInputStream.read(tempBuffer));
  assertEquals(_SIZE / 2,unsyncBufferedInputStream.read(tempBuffer));
  assertEquals(_SIZE,unsyncBufferedInputStream.index);
  assertEquals(_SIZE,unsyncBufferedInputStream.firstInvalidIndex);
  unsyncBufferedInputStream.mark(markLimitIndex);
  assertEquals(0,unsyncBufferedInputStream.index);
  assertEquals(0,unsyncBufferedInputStream.firstInvalidIndex);
}
