{
  HttpServletRequest wrappedRequest=request;
  while (wrappedRequest instanceof HttpServletRequestWrapper) {
    if (wrappedRequest instanceof CompoundSessionIdServletRequest) {
      return request;
    }
    HttpServletRequestWrapper httpServletRequestWrapper=(HttpServletRequestWrapper)wrappedRequest;
    wrappedRequest=(HttpServletRequest)httpServletRequestWrapper.getRequest();
  }
  return new CompoundSessionIdServletRequest(request);
}
