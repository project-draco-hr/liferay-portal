{
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  try {
    if (cmd.equals(Constants.IMPORT)) {
      importLayouts(actionRequest,actionResponse);
      String redirect=ParamUtil.getString(actionRequest,"redirect");
      sendRedirect(actionRequest,actionResponse,redirect);
    }
 else     if (cmd.equals(Constants.ADD_TEMP)) {
      addTempFileEntry(actionRequest,actionResponse);
    }
 else     if (cmd.equals(Constants.DELETE_TEMP)) {
      deleteTempFileEntry(actionRequest,actionResponse);
    }
  }
 catch (  Exception e) {
    if (cmd.equals(Constants.ADD_TEMP) && (e instanceof DuplicateFileException || e instanceof FileExtensionException || e instanceof FileNameException|| e instanceof LARFileException|| e instanceof LARFileSizeException|| e instanceof LARTypeException|| e instanceof FileSizeException)) {
      HttpServletResponse response=PortalUtil.getHttpServletResponse(actionResponse);
      response.setContentType(ContentTypes.TEXT_HTML);
      response.setStatus(HttpServletResponse.SC_OK);
      int errorType=0;
      if (e instanceof DuplicateFileException) {
        errorType=ServletResponseConstants.SC_DUPLICATE_FILE_EXCEPTION;
      }
 else       if (e instanceof FileExtensionException || e instanceof LARTypeException) {
        errorType=ServletResponseConstants.SC_FILE_EXTENSION_EXCEPTION;
      }
 else       if (e instanceof FileNameException || e instanceof LARFileException) {
        errorType=ServletResponseConstants.SC_FILE_NAME_EXCEPTION;
      }
 else       if (e instanceof FileSizeException || e instanceof LARFileSizeException) {
        errorType=ServletResponseConstants.SC_FILE_SIZE_EXCEPTION;
      }
      ServletResponseUtil.write(response,String.valueOf(errorType));
    }
    if ((e instanceof LARFileException) || (e instanceof LARFileSizeException) || (e instanceof LARTypeException)) {
      SessionErrors.add(actionRequest,e.getClass());
    }
 else     if ((e instanceof LayoutPrototypeException) || (e instanceof LocaleException)) {
      SessionErrors.add(actionRequest,e.getClass(),e);
    }
 else {
      _log.error(e,e);
      SessionErrors.add(actionRequest,LayoutImportException.class.getName());
    }
  }
}
