{
  String cmd=ParamUtil.getString(req,Constants.CMD);
  if (!cmd.equals(Constants.UPDATE)) {
    return;
  }
  String sourceAddress=ParamUtil.getString(req,"sourceAddress");
  boolean sourceInputEnabled=ParamUtil.getBoolean(req,"sourceInputEnabled");
  String destinationAddress=ParamUtil.getString(req,"destinationAddress");
  boolean destinationInputEnabled=ParamUtil.getBoolean(req,"destinationInputEnabled");
  String portletResource=ParamUtil.getString(req,"portletResource");
  PortletPreferences prefs=PortletPreferencesFactory.getPortletSetup(req,portletResource,true,true);
  prefs.setValue("source-address",sourceAddress);
  prefs.setValue("source-input-enabled",String.valueOf(sourceInputEnabled));
  prefs.setValue("destination-address",destinationAddress);
  prefs.setValue("destination-input-enabled",String.valueOf(destinationInputEnabled));
  prefs.store();
  PortletSession ses=req.getPortletSession();
  ses.removeAttribute(PortalUtil.getPortletNamespace(portletResource) + "sourceAddress",PortletSession.APPLICATION_SCOPE);
  SessionMessages.add(req,config.getPortletName() + ".doConfigure");
}
