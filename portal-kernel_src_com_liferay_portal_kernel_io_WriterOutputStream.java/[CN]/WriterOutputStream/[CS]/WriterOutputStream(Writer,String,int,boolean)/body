{
  if (outputBufferSize <= 0) {
    if (autoFlush) {
      outputBufferSize=_DEFAULT_OUTPUT_BUFFER_SIZE;
    }
 else {
      throw new IllegalArgumentException("Output buffer size " + outputBufferSize + " must be a positive number");
    }
  }
  if (charsetName == null) {
    charsetName=StringPool.DEFAULT_CHARSET_NAME;
  }
  _writer=writer;
  _charsetName=charsetName;
  _charsetDecoder=CharsetDecoderUtil.getCharsetDecoder(charsetName);
  CharsetEncoder charsetEncoder=CharsetEncoderUtil.getCharsetEncoder(charsetName);
  _inputByteBuffer=ByteBuffer.allocate((int)Math.ceil(charsetEncoder.maxBytesPerChar()));
  _inputByteBuffer.limit(0);
  _outputCharBuffer=CharBuffer.allocate(outputBufferSize);
  _autoFlush=autoFlush;
}
