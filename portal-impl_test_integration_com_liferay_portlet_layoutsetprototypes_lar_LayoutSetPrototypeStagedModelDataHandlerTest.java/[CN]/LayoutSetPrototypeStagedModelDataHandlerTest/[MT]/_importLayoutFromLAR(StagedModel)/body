{
  LayoutSetPrototypeStagedModelDataHandler layoutSetPrototypeStagedModelDataHandler=new LayoutSetPrototypeStagedModelDataHandler();
  String fileName=layoutSetPrototypeStagedModelDataHandler.getLayoutSetPrototypeLARFileName((LayoutSetPrototype)stagedModel);
  String modelPath=ExportImportPathUtil.getModelPath(stagedModel,fileName);
  InputStream larFile=portletDataContext.getZipEntryAsInputStream(modelPath);
  ZipReader zipReader=ZipReaderFactoryUtil.getZipReader(larFile);
  String manifest=zipReader.getEntryAsString("manifest.xml");
  Document document=SAXReaderUtil.read(manifest);
  List<Element> layoutElements=document.getRootElement().element("Layout").elements();
  List<Layout> importedLayouts=new ArrayList<Layout>(layoutElements.size());
  for (  Element layoutElement : layoutElements) {
    String layoutPrototypeUuid=layoutElement.attributeValue("layout-prototype-uuid");
    if (Validator.isNotNull(layoutPrototypeUuid)) {
      String path=layoutElement.attributeValue("path");
      String entryString=zipReader.getEntryAsString(path);
      Layout layout=(Layout)portletDataContext.fromXML(entryString);
      importedLayouts.add(layout);
    }
  }
  Assert.assertEquals(1,importedLayouts.size());
  return importedLayouts.get(0);
}
