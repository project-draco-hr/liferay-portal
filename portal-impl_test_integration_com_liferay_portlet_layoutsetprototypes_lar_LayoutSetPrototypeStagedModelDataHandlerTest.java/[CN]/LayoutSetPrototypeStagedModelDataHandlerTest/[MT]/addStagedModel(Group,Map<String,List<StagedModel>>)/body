{
  LayoutSetPrototype layoutSetPrototype=LayoutTestUtil.addLayoutSetPrototype(ServiceTestUtil.randomString());
  List<Layout> layouts=LayoutLocalServiceUtil.getLayouts(layoutSetPrototype.getGroup().getGroupId(),true,LayoutConstants.DEFAULT_PARENT_LAYOUT_ID);
  Assert.assertEquals(1,layouts.size());
  Layout layout=layouts.get(0);
  _addDependentLayout(LayoutSetPrototype.class,layout);
  _addDependentLayoutFriendlyURLs(LayoutSetPrototype.class,layout.getPlid());
  LayoutPrototype layoutPrototype=_addLayoutPrototype(dependentStagedModelsMap);
  Layout layoutPrototypeBasedLayout=LayoutTestUtil.addLayout(layoutSetPrototype.getGroup().getGroupId(),ServiceTestUtil.randomString(),true,layoutPrototype,true);
  _addDependentLayout(LayoutSetPrototype.class,layoutPrototypeBasedLayout);
  _addDependentLayoutFriendlyURLs(LayoutSetPrototype.class,layoutPrototypeBasedLayout.getPlid());
  return layoutSetPrototype;
}
