{
  LayoutSetPrototype layoutSetPrototype=LayoutTestUtil.addLayoutSetPrototype(ServiceTestUtil.randomString());
  List<Layout> layouts=LayoutLocalServiceUtil.getLayouts(layoutSetPrototype.getGroupId(),true,LayoutConstants.DEFAULT_PARENT_LAYOUT_ID);
  Assert.assertEquals(1,layouts.size());
  Layout layout=layouts.get(0);
  addLayout(LayoutSetPrototype.class,layout);
  addLayoutFriendlyURLs(LayoutSetPrototype.class,layout.getPlid());
  LayoutPrototype layoutPrototype=addLayoutPrototype(dependentStagedModelsMap);
  Layout prototypedLayout=LayoutTestUtil.addLayout(layoutSetPrototype.getGroupId(),ServiceTestUtil.randomString(),true,layoutPrototype,true);
  addLayout(LayoutSetPrototype.class,prototypedLayout);
  addLayoutFriendlyURLs(LayoutSetPrototype.class,prototypedLayout.getPlid());
  return layoutSetPrototype;
}
