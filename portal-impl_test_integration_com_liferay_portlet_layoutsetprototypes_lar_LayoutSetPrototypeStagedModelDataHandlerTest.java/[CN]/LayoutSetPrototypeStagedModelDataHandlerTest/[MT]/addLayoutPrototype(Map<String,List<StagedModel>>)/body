{
  LayoutPrototype layoutPrototype=LayoutTestUtil.addLayoutPrototype(ServiceTestUtil.randomString());
  addDependentStagedModel(dependentStagedModelsMap,LayoutPrototype.class,layoutPrototype);
  List<Layout> layouts=LayoutLocalServiceUtil.getLayouts(layoutPrototype.getGroupId(),true,LayoutConstants.DEFAULT_PARENT_LAYOUT_ID);
  Assert.assertEquals(1,layouts.size());
  Layout layout=layouts.get(0);
  addDependentStagedModel(dependentStagedModelsMap,Layout.class,layout);
  addLayout(LayoutPrototype.class,layout);
  List<LayoutFriendlyURL> layoutFriendlyURLs=LayoutFriendlyURLLocalServiceUtil.getLayoutFriendlyURLs(layout.getPlid());
  Assert.assertEquals(1,layoutFriendlyURLs.size());
  addDependentStagedModel(dependentStagedModelsMap,LayoutFriendlyURL.class,layoutFriendlyURLs.get(0));
  addLayoutFriendlyURLs(LayoutPrototype.class,layout.getPlid());
  return layoutPrototype;
}
