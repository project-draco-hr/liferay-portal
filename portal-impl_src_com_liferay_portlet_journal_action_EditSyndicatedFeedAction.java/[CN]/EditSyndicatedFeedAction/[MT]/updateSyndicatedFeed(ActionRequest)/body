{
  String cmd=ParamUtil.getString(req,Constants.CMD);
  Layout layout=(Layout)req.getAttribute(WebKeys.LAYOUT);
  long groupId=ParamUtil.getLong(req,"groupId");
  String feedId=ParamUtil.getString(req,"feedId");
  boolean autoFeedId=ParamUtil.getBoolean(req,"autoFeedId");
  String name=ParamUtil.getString(req,"name");
  String description=ParamUtil.getString(req,"description");
  String type=ParamUtil.getString(req,"type");
  String structureId=ParamUtil.getString(req,"structureId");
  String templateId=ParamUtil.getString(req,"templateId");
  String rendererTemplateId=ParamUtil.getString(req,"rendererTemplateId");
  int delta=ParamUtil.getInteger(req,"delta");
  String orderByCol=ParamUtil.getString(req,"orderByCol");
  String orderByType=ParamUtil.getString(req,"orderByType");
  String targetLayoutFriendlyUrl=ParamUtil.getString(req,"targetLayoutFriendlyUrl");
  String targetPortletId=ParamUtil.getString(req,"targetPortletId");
  String contentField=ParamUtil.getString(req,"contentField");
  String feedType=RSSUtil.DEFAULT_TYPE;
  double feedVersion=RSSUtil.DEFAULT_VERSION;
  String feedTypeAndVersion=ParamUtil.getString(req,"feedTypeAndVersion");
  if (Validator.isNotNull(feedTypeAndVersion)) {
    String[] parts=feedTypeAndVersion.split(":");
    try {
      feedType=parts[0];
      feedVersion=Double.parseDouble(parts[1]);
    }
 catch (    IndexOutOfBoundsException iobe) {
    }
catch (    NumberFormatException nfe) {
    }
  }
 else {
    feedType=ParamUtil.getString(req,"feedType",RSSUtil.DEFAULT_TYPE);
    feedVersion=ParamUtil.getDouble(req,"feedVersion",RSSUtil.DEFAULT_VERSION);
  }
  String[] communityPermissions=req.getParameterValues("communityPermissions");
  String[] guestPermissions=req.getParameterValues("guestPermissions");
  if (cmd.equals(Constants.ADD)) {
    JournalSyndicatedFeedServiceUtil.addSyndicatedFeed(layout.getPlid(),feedId,autoFeedId,name,description,type,structureId,templateId,rendererTemplateId,delta,orderByCol,orderByType,targetLayoutFriendlyUrl,targetPortletId,contentField,feedType,feedVersion,communityPermissions,guestPermissions);
  }
 else {
    JournalSyndicatedFeedServiceUtil.updateSyndicatedFeed(groupId,feedId,name,description,type,structureId,templateId,rendererTemplateId,delta,orderByCol,orderByType,targetLayoutFriendlyUrl,targetPortletId,contentField,feedType,feedVersion);
  }
}
