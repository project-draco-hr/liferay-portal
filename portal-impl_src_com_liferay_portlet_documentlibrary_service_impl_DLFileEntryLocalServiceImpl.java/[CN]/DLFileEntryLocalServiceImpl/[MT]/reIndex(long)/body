{
  if (SearchEngineUtil.isIndexReadOnly()) {
    return;
  }
  DLFileEntry fileEntry=dlFileEntryPersistence.fetchByPrimaryKey(fileEntryId);
  if (fileEntry == null) {
    return;
  }
  DLFolder folder=fileEntry.getFolder();
  long companyId=fileEntry.getCompanyId();
  String portletId=PortletKeys.DOCUMENT_LIBRARY;
  long groupId=folder.getGroupId();
  long repositoryId=fileEntry.getRepositoryId();
  String fileName=fileEntry.getName();
  String properties=fileEntry.getLuceneProperties();
  Date modifiedDate=fileEntry.getModifiedDate();
  long[] assetCategoryIds=assetCategoryLocalService.getCategoryIds(DLFileEntry.class.getName(),fileEntryId);
  String[] assetTagNames=assetTagLocalService.getTagNames(DLFileEntry.class.getName(),fileEntryId);
  try {
    if (fileEntry.getVersion() > 0) {
      DLIndexerUtil.updateFile(companyId,portletId,groupId,repositoryId,fileName,fileEntryId,properties,modifiedDate,assetCategoryIds,assetTagNames);
    }
 else {
      DLIndexerUtil.deleteFile(companyId,portletId,repositoryId,fileName);
    }
  }
 catch (  SearchException se) {
    _log.error("Reindexing " + fileEntryId,se);
  }
}
