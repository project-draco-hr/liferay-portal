{
  boolean addDraftAssetEntry=false;
  if ((dlFileVersion != null) && !dlFileVersion.isApproved()) {
    String version=dlFileVersion.getVersion();
    if (!version.equals(DLFileEntryConstants.DEFAULT_VERSION)) {
      int approvedArticlesCount=dlFileVersionPersistence.countByF_S(dlFileEntry.getFileEntryId(),WorkflowConstants.STATUS_APPROVED);
      if (approvedArticlesCount > 0) {
        addDraftAssetEntry=true;
      }
    }
  }
  boolean visible=true;
  if ((dlFileVersion != null) && !dlFileVersion.isApproved()) {
    visible=false;
  }
  return dlAppHelperLocalService.updateAsset(userId,new LiferayFileEntry(dlFileEntry),new LiferayFileVersion(dlFileVersion),assetCategoryIds,assetTagNames,assetLinkEntryIds,dlFileEntry.getMimeType(),addDraftAssetEntry,visible);
}
