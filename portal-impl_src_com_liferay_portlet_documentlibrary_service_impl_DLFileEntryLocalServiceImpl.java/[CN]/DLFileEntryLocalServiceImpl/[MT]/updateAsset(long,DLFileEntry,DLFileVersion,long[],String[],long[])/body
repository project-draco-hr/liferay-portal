{
  boolean addDraftAssetEntry=false;
  if ((dlFileVersion != null) && !dlFileVersion.isApproved()) {
    String version=dlFileVersion.getVersion();
    if (!version.equals(DLFileEntryConstants.VERSION_DEFAULT)) {
      addDraftAssetEntry=true;
    }
  }
  boolean visible=true;
  if ((dlFileVersion != null) && !dlFileVersion.isApproved()) {
    visible=false;
  }
  long largeImageId=dlFileEntry.getLargeImageId();
  if (dlFileVersion != null) {
    largeImageId=dlFileVersion.getLargeImageId();
  }
  Image largeImage=imageLocalService.getImage(largeImageId);
  int height=0;
  int width=0;
  if (largeImage != null) {
    height=largeImage.getHeight();
    width=largeImage.getWidth();
  }
  return dlAppHelperLocalService.updateAsset(userId,new LiferayFileEntry(dlFileEntry),new LiferayFileVersion(dlFileVersion),assetCategoryIds,assetTagNames,assetLinkEntryIds,dlFileEntry.getMimeType(),addDraftAssetEntry,visible,height,width);
}
