{
  if (hasFileEntryLock(userId,fileEntryId)) {
    return lockLocalService.getLock(DLFileEntry.class.getName(),fileEntryId);
  }
  if ((expirationTime <= 0) || (expirationTime > DLFileEntryImpl.LOCK_EXPIRATION_TIME)) {
    expirationTime=DLFileEntryImpl.LOCK_EXPIRATION_TIME;
  }
  return lockLocalService.lock(userId,DLFileEntry.class.getName(),fileEntryId,owner,false,expirationTime);
}
