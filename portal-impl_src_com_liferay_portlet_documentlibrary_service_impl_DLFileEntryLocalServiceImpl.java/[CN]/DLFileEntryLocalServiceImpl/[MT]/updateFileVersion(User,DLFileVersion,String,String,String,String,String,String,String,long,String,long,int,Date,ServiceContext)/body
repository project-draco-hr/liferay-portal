{
  if (Validator.isNotNull(sourceFileName)) {
    dlFileVersion.setExtension(extension);
    dlFileVersion.setMimeType(mimeType);
  }
  dlFileVersion.setTitle(title);
  dlFileVersion.setDescription(description);
  dlFileVersion.setChangeLog(changeLog);
  dlFileVersion.setExtraSettings(extraSettings);
  dlFileVersion.setVersion(version);
  dlFileVersion.setSize(size);
  dlFileVersion.setStatus(status);
  dlFileVersion.setStatusByUserId(user.getUserId());
  dlFileVersion.setStatusByUserName(user.getFullName());
  dlFileVersion.setStatusDate(statusDate);
  dlFileVersion.setExpandoBridgeAttributes(serviceContext);
  dlFileVersion.setDocumentTypeId(documentTypeId);
  dlFileVersionPersistence.update(dlFileVersion,false);
  Map<Long,Fields> fieldsMap=(Map<Long,Fields>)serviceContext.getAttribute("fieldsMap");
  if (documentTypeId > 0) {
    dlDocumentMetadataSetLocalService.updateMetadataSets(dlFileVersion.getFileVersionId(),documentTypeId,fieldsMap,serviceContext);
  }
}
