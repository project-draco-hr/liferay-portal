{
  dlFileVersion.setUserId(user.getUserId());
  dlFileVersion.setUserName(user.getFullName());
  dlFileVersion.setModifiedDate(statusDate);
  dlFileVersion.setFileName(fileName);
  if (Validator.isNotNull(sourceFileName)) {
    dlFileVersion.setExtension(extension);
    dlFileVersion.setMimeType(mimeType);
  }
  dlFileVersion.setTitle(title);
  dlFileVersion.setDescription(description);
  dlFileVersion.setChangeLog(changeLog);
  dlFileVersion.setExtraSettings(extraSettings);
  dlFileVersion.setFileEntryTypeId(fileEntryTypeId);
  dlFileVersion.setVersion(version);
  dlFileVersion.setSize(size);
  dlFileVersion.setStatus(status);
  dlFileVersion.setStatusByUserId(user.getUserId());
  dlFileVersion.setStatusByUserName(user.getFullName());
  dlFileVersion.setStatusDate(statusDate);
  ExpandoBridgeUtil.setExpandoBridgeAttributes(dlFileVersion.getExpandoBridge(),dlFileVersion.getExpandoBridge(),serviceContext);
  dlFileVersion=dlFileVersionPersistence.update(dlFileVersion);
  if ((fileEntryTypeId > 0) && (ddmFormValuesMap != null)) {
    dlFileEntryMetadataLocalService.updateFileEntryMetadata(fileEntryTypeId,dlFileVersion.getFileEntryId(),dlFileVersion.getFileVersionId(),ddmFormValuesMap,serviceContext);
  }
  return dlFileVersion;
}
