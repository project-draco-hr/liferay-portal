{
  DLFileEntry dlFileEntry=dlFileEntryPersistence.findByPrimaryKey(fileEntryId);
  if (incrementCounter) {
    dlFileEntryLocalService.incrementViewCounter(dlFileEntry,increment);
  }
  dlAppHelperLocalService.getFileAsStream(userId,new LiferayFileEntry(dlFileEntry),incrementCounter);
  return DLStoreUtil.getFileAsStream(dlFileEntry.getCompanyId(),dlFileEntry.getDataRepositoryId(),dlFileEntry.getName(),version);
}
