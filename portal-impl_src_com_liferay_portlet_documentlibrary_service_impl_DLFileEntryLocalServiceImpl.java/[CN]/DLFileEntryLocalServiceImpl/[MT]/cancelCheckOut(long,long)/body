{
  if (!isFileEntryCheckedOut(fileEntryId)) {
    return null;
  }
  if (!hasFileEntryLock(userId,fileEntryId)) {
    lockFileEntry(userId,fileEntryId);
  }
  DLFileEntry dlFileEntry=dlFileEntryPersistence.findByPrimaryKey(fileEntryId);
  DLFileVersion dlFileVersion=dlFileVersionLocalService.getLatestFileVersion(fileEntryId,false);
  removeFileVersion(dlFileEntry,dlFileVersion);
  return dlFileVersion;
}
