{
  DLFileEntry dlFileEntry=dlFileEntryPersistence.findByPrimaryKey(fileEntryId);
  DLFileVersion dlFileVersion=getLatestFileVersion(fileEntryId);
  dlFileVersionPersistence.remove(dlFileVersion);
  try {
    dlLocalService.deleteFile(dlFileEntry.getCompanyId(),PortletKeys.DOCUMENT_LIBRARY,dlFileEntry.getDataRepositoryId(),dlFileEntry.getName(),DLFileEntryConstants.PRIVATE_WORKING_COPY_VERSION);
  }
 catch (  NoSuchFileException nsfe) {
  }
  lockLocalService.unlock(DLFileEntry.class.getName(),fileEntryId);
}
