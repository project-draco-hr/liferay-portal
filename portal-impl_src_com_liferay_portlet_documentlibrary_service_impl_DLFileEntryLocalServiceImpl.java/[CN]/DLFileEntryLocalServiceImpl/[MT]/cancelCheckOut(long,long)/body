{
  DLFileEntry dlFileEntry=dlFileEntryPersistence.findByPrimaryKey(fileEntryId);
  DLFileVersion dlFileVersion=getLatestFileVersion(fileEntryId);
  dlFileVersionPersistence.remove(dlFileVersion);
  try {
    dlLocalService.deleteFile(dlFileEntry.getCompanyId(),PortletKeys.DOCUMENT_LIBRARY,dlFileEntry.getDataRepositoryId(),dlFileEntry.getName(),DLFileEntryConstants.PRIVATE_WORKING_COPY_VERSION);
  }
 catch (  NoSuchFileException nsfe) {
  }
  dlFileEntry.setCheckedOut(false);
  dlFileEntry.setCheckoutDate(null);
  dlFileEntry.setCheckoutExpirationDate(null);
  dlFileEntry.setCheckoutOwner(null);
  dlFileEntry.setCheckoutUserId(0);
  dlFileEntry.setCheckoutUserName(StringPool.BLANK);
  dlFileEntry.setCheckoutUserUuid(StringPool.BLANK);
  dlFileEntryPersistence.update(dlFileEntry,false);
}
