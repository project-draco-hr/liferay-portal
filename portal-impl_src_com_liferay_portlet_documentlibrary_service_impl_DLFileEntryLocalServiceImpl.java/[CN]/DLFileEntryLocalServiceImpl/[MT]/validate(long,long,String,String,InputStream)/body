{
  dlLocalService.validate(name,is);
  String extension=FileUtil.getExtension(name);
  try {
    String titleWithException=title;
    if (Validator.isNotNull(extension)) {
      titleWithException+=StringPool.PERIOD + extension;
    }
    dlFolderLocalService.getFolder(groupId,folderId,titleWithException);
    throw new DuplicateFolderNameException();
  }
 catch (  NoSuchFolderException nsfe) {
  }
  Iterator itr=dlFileEntryPersistence.findByF_T(folderId,title).iterator();
  while (itr.hasNext()) {
    DLFileEntry fileEntry=(DLFileEntry)itr.next();
    String curExtension=FileUtil.getExtension(fileEntry.getName());
    if (PropsValues.WEBDAV_LITMUS && Validator.isNull(extension)) {
      if (Validator.isNull(curExtension)) {
        throw new DuplicateFileException(fileEntry.getTitleWithExtension());
      }
    }
 else     if (extension.equals(curExtension)) {
      throw new DuplicateFileException(fileEntry.getTitleWithExtension());
    }
  }
}
