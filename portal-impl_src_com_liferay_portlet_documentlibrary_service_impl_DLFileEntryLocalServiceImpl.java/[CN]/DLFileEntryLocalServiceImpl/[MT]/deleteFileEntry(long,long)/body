{
  if (!hasFileEntryLock(userId,fileEntryId)) {
    lockFileEntry(userId,fileEntryId);
  }
  try {
    return deleteFileEntry(fileEntryId);
  }
  finally {
    unlockFileEntry(fileEntryId);
  }
}
