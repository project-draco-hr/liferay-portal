{
  Indexer indexer=IndexerRegistryUtil.getIndexer(DLFileEntryConstants.getClassName());
  SearchContext searchContext=new SearchContext();
  if (Validator.isNotNull(mimeTypes)) {
    searchContext.setAttribute("mimeTypes",mimeTypes);
  }
  searchContext.setAttribute("paginationType","none");
  searchContext.setAttribute(Field.STATUS,status);
  if (creatorUserId > 0) {
    searchContext.setAttribute(Field.USER_ID,String.valueOf(creatorUserId));
  }
  Group group=groupLocalService.getGroup(groupId);
  searchContext.setCompanyId(group.getCompanyId());
  searchContext.setEnd(end);
  if (folderId != DLFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
    List<Long> folderIds=dlFolderService.getFolderIds(groupId,folderId);
    searchContext.setFolderIds(folderIds);
  }
  searchContext.setGroupIds(new long[]{groupId});
  Sort sort=new Sort("modified",true);
  searchContext.setSorts(new Sort[]{sort});
  searchContext.setStart(start);
  searchContext.setUserId(userId);
  return indexer.search(searchContext);
}
