{
  DLFileEntry dlFileEntry=dlFileEntryPersistence.findByPrimaryKey(fileEntryId);
  if (PropsValues.DL_FILE_ENTRY_READ_COUNT_ENABLED && incrementCounter) {
    dlFileEntry.setReadCount(dlFileEntry.getReadCount() + 1);
    dlFileEntryPersistence.update(dlFileEntry,false);
  }
  dlAppHelperLocalService.getFileAsStream(userId,new LiferayFileEntry(dlFileEntry),incrementCounter);
  return DLStoreUtil.getFile(dlFileEntry.getCompanyId(),dlFileEntry.getDataRepositoryId(),dlFileEntry.getName(),version);
}
