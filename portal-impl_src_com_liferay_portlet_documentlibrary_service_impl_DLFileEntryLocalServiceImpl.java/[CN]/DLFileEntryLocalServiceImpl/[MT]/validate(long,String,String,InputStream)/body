{
  dlLocalService.validate(name,is);
  String extension=FileUtil.getExtension(name);
  Iterator itr=dlFileEntryPersistence.findByF_T(folderId,title).iterator();
  while (itr.hasNext()) {
    DLFileEntry fileEntry=(DLFileEntry)itr.next();
    String currExtension=FileUtil.getExtension(fileEntry.getName());
    if (extension.equals(currExtension)) {
      throw new DuplicateFileException(fileEntry.getTitleWithExtension());
    }
  }
}
