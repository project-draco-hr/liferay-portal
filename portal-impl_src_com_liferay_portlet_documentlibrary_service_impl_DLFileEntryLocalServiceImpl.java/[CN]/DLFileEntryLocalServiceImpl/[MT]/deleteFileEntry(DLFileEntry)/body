{
  dlFileEntryPersistence.remove(dlFileEntry);
  resourceLocalService.deleteResource(dlFileEntry.getCompanyId(),DLFileEntry.class.getName(),ResourceConstants.SCOPE_INDIVIDUAL,dlFileEntry.getFileEntryId());
  webDAVPropsLocalService.deleteWebDAVProps(DLFileEntry.class.getName(),dlFileEntry.getFileEntryId());
  dlFileEntryMetadataLocalService.deleteFileEntryMetadata(dlFileEntry.getFileEntryId());
  List<DLFileVersion> dlFileVersions=dlFileVersionPersistence.findByFileEntryId(dlFileEntry.getFileEntryId());
  for (  DLFileVersion dlFileVersion : dlFileVersions) {
    dlFileVersionPersistence.remove(dlFileVersion);
    expandoRowLocalService.deleteRows(dlFileVersion.getFileVersionId());
    workflowInstanceLinkLocalService.deleteWorkflowInstanceLinks(dlFileEntry.getCompanyId(),dlFileEntry.getGroupId(),DLFileEntry.class.getName(),dlFileVersion.getFileVersionId());
  }
  expandoRowLocalService.deleteRows(dlFileEntry.getFileEntryId());
  ratingsStatsLocalService.deleteStats(DLFileEntry.class.getName(),dlFileEntry.getFileEntryId());
  unlockFileEntry(dlFileEntry.getFileEntryId());
  try {
    DLStoreUtil.deleteFile(dlFileEntry.getCompanyId(),dlFileEntry.getDataRepositoryId(),dlFileEntry.getName());
  }
 catch (  Exception e) {
    if (_log.isWarnEnabled()) {
      _log.warn(e,e);
    }
  }
  return dlFileEntry;
}
