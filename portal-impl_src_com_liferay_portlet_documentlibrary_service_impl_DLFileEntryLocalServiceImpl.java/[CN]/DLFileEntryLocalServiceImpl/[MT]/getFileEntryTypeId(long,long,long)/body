{
  if (fileEntryTypeId == -1) {
    fileEntryTypeId=dlFileEntryTypeLocalService.getDefaultFileEntryType(folderId);
  }
 else {
    List<DLFileEntryType> dlFileEntryTypes=dlFileEntryTypeLocalService.getFolderFileEntryTypes(groupId,folderId,true);
    boolean found=false;
    for (    DLFileEntryType dlFileEntryType : dlFileEntryTypes) {
      if (dlFileEntryType.getFileEntryTypeId() == fileEntryTypeId) {
        found=true;
        break;
      }
    }
    if (!found) {
      throw new InvalidFileEntryTypeException("Invalid file entry type " + fileEntryTypeId + " for folder "+ folderId);
    }
  }
  return fileEntryTypeId;
}
