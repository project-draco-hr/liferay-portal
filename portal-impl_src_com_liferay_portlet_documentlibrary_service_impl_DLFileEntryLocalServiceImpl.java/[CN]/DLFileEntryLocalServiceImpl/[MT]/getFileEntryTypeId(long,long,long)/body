{
  if (fileEntryTypeId == -1) {
    fileEntryTypeId=dlFileEntryTypeLocalService.getDefaultFileEntryType(groupId,folderId);
  }
 else {
    List<DLFileEntryType> fileEntryTypes=dlFileEntryTypeLocalService.getFileEntryTypesByFolder(groupId,folderId,true);
    boolean found=false;
    for (    DLFileEntryType fileEntryType : fileEntryTypes) {
      if (fileEntryType.getFileEntryTypeId() == fileEntryTypeId) {
        found=true;
        break;
      }
    }
    if (!found) {
      throw new InvalidFileEntryTypeException("FileEntryType " + fileEntryTypeId + " invalid for folder "+ folderId);
    }
  }
  return fileEntryTypeId;
}
