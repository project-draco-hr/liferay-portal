{
  boolean update=false;
  String extension=FileUtil.getExtension(name);
  List<DLFileEntry> fileEntries=dlFileEntryPersistence.findByF_T(folderId,title);
  for (  DLFileEntry fileEntry : fileEntries) {
    String curExtension=FileUtil.getExtension(fileEntry.getName());
    if (PropsValues.WEBDAV_LITMUS && Validator.isNull(extension)) {
      if (Validator.isNull(curExtension)) {
        update=true;
        name=fileEntry.getName();
        break;
      }
    }
 else     if (extension.equals(curExtension)) {
      update=true;
      break;
    }
  }
  if (update) {
    return updateFileEntry(userId,folderId,folderId,name,sourceName,title,description,extraSettings,file,serviceContext);
  }
 else {
    return addFileEntry(userId,folderId,name,title,description,extraSettings,file,serviceContext);
  }
}
