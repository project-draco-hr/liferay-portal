{
  List<Long> folderIds=null;
  if (repositoryId != 0) {
    folderIds=dlFolderLocalService.getRepositoryFolderIds(repositoryId,rootFolderId);
  }
 else {
    folderIds=dlFolderLocalService.getGroupFolderIds(groupId,rootFolderId);
  }
  if (folderIds.isEmpty()) {
    return Collections.emptyList();
  }
  QueryDefinition<DLFileEntry> queryDefinition=new QueryDefinition<>(WorkflowConstants.STATUS_ANY,start,end,obc);
  if (repositoryId == 0) {
    if (userId <= 0) {
      return dlFileEntryFinder.findByG_F(groupId,folderIds,queryDefinition);
    }
 else {
      return dlFileEntryFinder.findByG_U_F(groupId,userId,folderIds,queryDefinition);
    }
  }
 else {
    List<Long> repositoryIds=new ArrayList<>();
    repositoryIds.add(repositoryId);
    if (userId <= 0) {
      return dlFileEntryFinder.findByG_R_F(groupId,repositoryIds,folderIds,queryDefinition);
    }
 else {
      return dlFileEntryFinder.findByG_U_R_F(groupId,userId,repositoryIds,folderIds,queryDefinition);
    }
  }
}
