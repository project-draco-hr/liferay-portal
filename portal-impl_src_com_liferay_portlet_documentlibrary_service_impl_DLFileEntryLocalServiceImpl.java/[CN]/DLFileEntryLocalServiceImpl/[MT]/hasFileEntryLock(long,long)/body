{
  boolean checkedOut=isFileEntryCheckedOut(fileEntryId);
  DLFileEntry dlFileEntry=getFileEntry(fileEntryId);
  long folderId=dlFileEntry.getFolderId();
  boolean hasLock=lockLocalService.hasLock(userId,DLFileEntry.class.getName(),fileEntryId);
  if (!hasLock && (folderId != DLFolderConstants.DEFAULT_PARENT_FOLDER_ID)) {
    hasLock=dlFolderService.hasInheritableLock(folderId);
  }
  if (checkedOut != hasLock) {
    dlAppHelperLocalService.registerDLSyncEventCallback(DLSyncConstants.EVENT_UPDATE,DLSyncConstants.TYPE_FILE,fileEntryId);
  }
  return hasLock;
}
