{
  ChannelHub channelHub=fetchChannelHub(companyId);
  if (channelHub != null) {
    channelHub.sendNotificationEvent(userId,notificationEvent);
  }
  if (!ClusterInvokeThreadLocal.isEnabled()) {
    return;
  }
  MethodHandler methodHandler=new MethodHandler(_storeNotificationEventMethodKey,companyId,userId,notificationEvent);
  ClusterRequest clusterRequest=ClusterRequest.createMulticastRequest(methodHandler,true);
  try {
    ClusterExecutorUtil.execute(clusterRequest);
  }
 catch (  Exception e) {
    throw new ChannelException("Unable to notify cluster of event",e);
  }
}
