{
  Properties transportProperties=PropsUtil.getProperties(PropsKeys.CLUSTER_LINK_CHANNEL_PROPERTIES_TRANSPORT,true);
  _channelCount=transportProperties.size();
  if ((_channelCount <= 0) || (_channelCount > MAX_CHANNEL_COUNT)) {
    throw new IllegalArgumentException("Channel count must be between 1 and " + MAX_CHANNEL_COUNT);
  }
  _localTransportAddresses=new ArrayList<>(_channelCount);
  _transportChannels=new ArrayList<>(_channelCount);
  _clusterReceivers=new ArrayList<>(_channelCount);
  List<String> keys=new ArrayList<>(_channelCount);
  for (  Object key : transportProperties.keySet()) {
    keys.add((String)key);
  }
  Collections.sort(keys);
  for (int i=0; i < keys.size(); i++) {
    String customName=keys.get(i);
    String value=transportProperties.getProperty(customName);
    ClusterReceiver clusterReceiver=new ClusterForwardReceiver(this);
    ClusterChannel clusterChannel=new JGroupsClusterChannel(value,_LIFERAY_TRANSPORT_CHANNEL + i,clusterReceiver);
    _clusterReceivers.add(clusterReceiver);
    _localTransportAddresses.add(clusterChannel.getLocalAddress());
    _transportChannels.add(clusterChannel);
  }
}
