{
  List<EmailAddress> emailAddresses=new ArrayList<EmailAddress>();
  int[] emailAddressesIndexes=StringUtil.split(ParamUtil.getString(actionRequest,"emailAddressesIndexes"),0);
  int emailAddressPrimary=ParamUtil.getInteger(actionRequest,"emailAddressPrimary");
  for (  int emailAddressesIndex : emailAddressesIndexes) {
    long emailAddressId=ParamUtil.getLong(actionRequest,"emailAddressId" + emailAddressesIndex);
    String address=ParamUtil.getString(actionRequest,"emailAddressAddress" + emailAddressesIndex);
    if (Validator.isNull(address)) {
      continue;
    }
    int typeId=ParamUtil.getInteger(actionRequest,"emailAddressTypeId" + emailAddressesIndex);
    boolean primary=false;
    if (emailAddressesIndex == emailAddressPrimary) {
      primary=true;
    }
    EmailAddress emailAddress=new EmailAddressImpl();
    emailAddress.setEmailAddressId(emailAddressId);
    emailAddress.setAddress(address);
    emailAddress.setTypeId(typeId);
    emailAddress.setPrimary(primary);
    emailAddresses.add(emailAddress);
  }
  return emailAddresses;
}
