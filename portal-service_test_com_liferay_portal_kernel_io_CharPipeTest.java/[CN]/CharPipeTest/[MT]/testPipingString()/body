{
  CharPipe charPipe=new CharPipe(4);
  Reader reader=charPipe.getReader();
  Writer writer=charPipe.getWriter();
  String string="abcd";
  char[] readBuffer=new char[4];
  writer.write(string);
  int result=reader.read(readBuffer);
  assertEquals(4,result);
  assertEquals(string,new String(readBuffer));
  charPipe.close();
}
