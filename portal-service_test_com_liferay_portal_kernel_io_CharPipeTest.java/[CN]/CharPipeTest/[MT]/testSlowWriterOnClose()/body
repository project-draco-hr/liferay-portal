{
  CharPipe charPipe=new CharPipe(4);
  Reader reader=charPipe.getReader();
  Writer writer=charPipe.getWriter();
  char[] readBuffer=new char[8];
  SlowWriterJob slowWriterJob=new SlowWriterJob(writer,4,true);
  Thread writerThread=new Thread(slowWriterJob);
  writerThread.start();
  for (int i=0; i < 5; i++) {
    assertTrue(timedRead(reader,readBuffer) > 50);
  }
  charPipe.close();
  writerThread.join();
  assertFalse(slowWriterJob.isFailed());
}
