{
  Document doc=getAddFileDocument(companyId,portletId,groupId,repositoryId,fileName,properties,tagsEntries);
  if (!LuceneUtil.INDEX_READ_ONLY) {
    IndexWriter writer=null;
    try {
      writer=LuceneUtil.getWriter(companyId);
      writer.addDocument(doc);
    }
  finally {
      if (writer != null) {
        LuceneUtil.write(companyId);
      }
    }
  }
}
