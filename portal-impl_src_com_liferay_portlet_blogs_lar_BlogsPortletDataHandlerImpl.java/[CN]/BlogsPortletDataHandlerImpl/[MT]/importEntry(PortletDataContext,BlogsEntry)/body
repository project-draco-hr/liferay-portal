{
  long userId=context.getUserId(entry.getUserUuid());
  Calendar displayDateCal=CalendarFactoryUtil.getCalendar();
  displayDateCal.setTime(entry.getDisplayDate());
  int displayDateMonth=displayDateCal.get(Calendar.MONTH);
  int displayDateDay=displayDateCal.get(Calendar.DATE);
  int displayDateYear=displayDateCal.get(Calendar.YEAR);
  int displayDateHour=displayDateCal.get(Calendar.HOUR);
  int displayDateMinute=displayDateCal.get(Calendar.MINUTE);
  if (displayDateCal.get(Calendar.AM_PM) == Calendar.PM) {
    displayDateHour+=12;
  }
  boolean draft=entry.isDraft();
  boolean allowTrackbacks=entry.isAllowTrackbacks();
  String[] trackbacks=StringUtil.split(entry.getTrackbacks());
  String[] tagsEntries=null;
  if (context.getBooleanParameter(_NAMESPACE,"tags")) {
    tagsEntries=context.getTagsEntries(BlogsEntry.class,entry.getEntryId());
  }
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setAddCommunityPermissions(true);
  serviceContext.setAddGuestPermissions(true);
  serviceContext.setPlid(context.getPlid());
  serviceContext.setScopeGroupId(context.getGroupId());
  serviceContext.setTagsEntries(tagsEntries);
  BlogsEntry existingEntry=null;
  if (context.getDataStrategy().equals(PortletDataHandlerKeys.DATA_STRATEGY_MIRROR)) {
    existingEntry=BlogsEntryUtil.fetchByUUID_G(entry.getUuid(),context.getGroupId());
    if (existingEntry == null) {
      existingEntry=BlogsEntryLocalServiceUtil.addEntry(entry.getUuid(),userId,entry.getTitle(),entry.getContent(),displayDateMonth,displayDateDay,displayDateYear,displayDateHour,displayDateMinute,draft,allowTrackbacks,trackbacks,serviceContext);
    }
 else {
      existingEntry=BlogsEntryLocalServiceUtil.updateEntry(userId,existingEntry.getEntryId(),entry.getTitle(),entry.getContent(),displayDateMonth,displayDateDay,displayDateYear,displayDateHour,displayDateMinute,draft,allowTrackbacks,trackbacks,serviceContext);
    }
  }
 else {
    existingEntry=BlogsEntryLocalServiceUtil.addEntry(userId,entry.getTitle(),entry.getContent(),displayDateMonth,displayDateDay,displayDateYear,displayDateHour,displayDateMinute,draft,allowTrackbacks,trackbacks,serviceContext);
  }
  if (context.getBooleanParameter(_NAMESPACE,"comments")) {
    context.importComments(BlogsEntry.class,entry.getEntryId(),existingEntry.getEntryId(),context.getGroupId());
  }
  if (context.getBooleanParameter(_NAMESPACE,"ratings")) {
    context.importRatingsEntries(BlogsEntry.class,entry.getEntryId(),existingEntry.getEntryId());
  }
}
