{
  UpgradeColumn upgradeCompanyIdColumn=new SwapUpgradeColumnImpl("companyId",new Integer(Types.VARCHAR),AvailableMappersUtil.getCompanyIdMapper());
  UpgradeColumn upgradeGroupIdColumn=new SwapUpgradeColumnImpl("groupId",AvailableMappersUtil.getGroupIdMapper());
  UpgradeColumn upgradeUserIdColumn=new SwapUpgradeColumnImpl("userId",new Integer(Types.VARCHAR),AvailableMappersUtil.getUserIdMapper());
  UpgradeColumn upgradeApprovedByUserIdColumn=new SwapUpgradeColumnImpl("approvedByUserId",new Integer(Types.VARCHAR),AvailableMappersUtil.getUserIdMapper());
  JournalArticlePKUpgradeColumnImpl upgradeArticlePKColumn=new JournalArticlePKUpgradeColumnImpl(upgradeCompanyIdColumn,upgradeGroupIdColumn);
  UpgradeColumn upgradeArticleResourcePrimKeyColumn=new JournalArticleResourcePrimKeyUpgradeColumnImpl(upgradeArticlePKColumn);
  UpgradeColumn upgradeArticleIdColumn=new TempUpgradeColumnImpl("articleId");
  UpgradeColumn upgradeVersionColumn=new TempUpgradeColumnImpl("version",new Integer(Types.DOUBLE));
  UpgradeColumn upgradeStructureIdColumn=new TempUpgradeColumnImpl("structureId");
  UpgradeColumn upgradeContentColumn=new JournalArticleContentUpgradeColumnImpl(upgradeCompanyIdColumn,upgradeGroupIdColumn,upgradeArticleIdColumn,upgradeVersionColumn,upgradeStructureIdColumn,AvailableMappersUtil.getImageIdMapper());
  UpgradeTable upgradeTable=new DefaultUpgradeTableImpl(JournalArticleImpl.TABLE_NAME,JournalArticleImpl.TABLE_COLUMNS,upgradeCompanyIdColumn,upgradeGroupIdColumn,upgradeUserIdColumn,upgradeApprovedByUserIdColumn,upgradeArticlePKColumn,upgradeArticleResourcePrimKeyColumn,upgradeArticleIdColumn,upgradeVersionColumn,upgradeStructureIdColumn,upgradeContentColumn);
  upgradeTable.setCreateSQL(JournalArticleImpl.TABLE_SQL_CREATE);
  upgradeTable.updateTable();
  ValueMapper articleIdMapper=new DefaultPKMapper(upgradeArticlePKColumn.getValueMapper());
  AvailableMappersUtil.setJournalArticleIdMapper(articleIdMapper);
  PKUpgradeColumnImpl upgradeStructurePKColumn=new JournalStructurePKUpgradeColumnImpl(upgradeCompanyIdColumn,upgradeGroupIdColumn);
  UpgradeColumn upgradeXSDColumn=new JournalStructureXSDUpgradeColumnImpl();
  upgradeTable=new DefaultUpgradeTableImpl(JournalStructureImpl.TABLE_NAME,JournalStructureImpl.TABLE_COLUMNS,upgradeCompanyIdColumn,upgradeGroupIdColumn,upgradeStructurePKColumn,upgradeUserIdColumn,upgradeXSDColumn);
  upgradeTable.setCreateSQL(JournalStructureImpl.TABLE_SQL_CREATE);
  upgradeTable.updateTable();
  ValueMapper structureIdMapper=new DefaultPKMapper(upgradeStructurePKColumn.getValueMapper());
  AvailableMappersUtil.setJournalStructureIdMapper(structureIdMapper);
  PKUpgradeColumnImpl upgradeTemplatePKColumn=new JournalTemplatePKUpgradeColumnImpl(upgradeCompanyIdColumn,upgradeGroupIdColumn);
  UpgradeColumn upgradeTemplateIdColumn=new TempUpgradeColumnImpl("templateId");
  UpgradeColumn upgradeXSLColumn=new JournalTemplateXSLUpgradeColumnImpl(upgradeTemplateIdColumn);
  UpgradeColumn upgradeSmallImageIdColumn=new JournalTemplateSmallImageIdUpgradeColumnImpl(upgradeCompanyIdColumn,upgradeGroupIdColumn,upgradeTemplatePKColumn,AvailableMappersUtil.getImageIdMapper());
  upgradeTable=new DefaultUpgradeTableImpl(JournalTemplateImpl.TABLE_NAME,JournalTemplateImpl.TABLE_COLUMNS,upgradeCompanyIdColumn,upgradeGroupIdColumn,upgradeTemplatePKColumn,upgradeUserIdColumn,upgradeTemplateIdColumn,upgradeXSLColumn,upgradeSmallImageIdColumn);
  upgradeTable.setCreateSQL(JournalTemplateImpl.TABLE_SQL_CREATE);
  upgradeTable.updateTable();
  ValueMapper templateIdMapper=new DefaultPKMapper(upgradeTemplatePKColumn.getValueMapper());
  AvailableMappersUtil.setJournalTemplateIdMapper(templateIdMapper);
  PropsUtil.set(CompanyConstants.SYSTEM,PropsUtil.JOURNAL_SYNC_CONTENT_SEARCH_ON_STARTUP,"true");
}
