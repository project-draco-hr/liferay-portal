{
  UpgradeColumn upgradeCompanyIdColumn=new SwapUpgradeColumnImpl("companyId",new Integer(Types.VARCHAR),AvailableMappersUtil.getCompanyIdMapper());
  UpgradeColumn upgradeGroupIdColumn=new SwapUpgradeColumnImpl("groupId",AvailableMappersUtil.getGroupIdMapper());
  UpgradeColumn upgradeUserIdColumn=new SwapUpgradeColumnImpl("userId",new Integer(Types.VARCHAR),AvailableMappersUtil.getUserIdMapper());
  UpgradeColumn upgradeApprovedByUserIdColumn=new SwapUpgradeColumnImpl("approvedByUserId",new Integer(Types.VARCHAR),AvailableMappersUtil.getUserIdMapper());
  JournalArticlePKUpgradeColumnImpl articlePKUpgradeColumn=new JournalArticlePKUpgradeColumnImpl(upgradeCompanyIdColumn,upgradeGroupIdColumn);
  UpgradeColumn articleResourcePrimKeyUpgradeColumn=new JournalArticleResourcePrimKeyUpgradeColumnImpl(articlePKUpgradeColumn);
  UpgradeTable upgradeTable=new DefaultUpgradeTableImpl(JournalArticleImpl.TABLE_NAME,JournalArticleImpl.TABLE_COLUMNS,upgradeCompanyIdColumn,upgradeGroupIdColumn,articlePKUpgradeColumn,articleResourcePrimKeyUpgradeColumn,upgradeUserIdColumn,upgradeApprovedByUserIdColumn);
  upgradeTable.updateTable();
  ValueMapper articleIdMapper=new DefaultPKMapper(articlePKUpgradeColumn.getValueMapper());
  AvailableMappersUtil.setJournalArticleIdMapper(articleIdMapper);
  PKUpgradeColumnImpl structurePKUpgradeColumn=new JournalStructurePKUpgradeColumnImpl(upgradeCompanyIdColumn,upgradeGroupIdColumn);
  upgradeTable=new DefaultUpgradeTableImpl(JournalStructureImpl.TABLE_NAME,JournalStructureImpl.TABLE_COLUMNS,upgradeCompanyIdColumn,upgradeGroupIdColumn,structurePKUpgradeColumn,upgradeUserIdColumn);
  upgradeTable.updateTable();
  ValueMapper structureIdMapper=new DefaultPKMapper(structurePKUpgradeColumn.getValueMapper());
  AvailableMappersUtil.setJournalStructureIdMapper(structureIdMapper);
  PKUpgradeColumnImpl templatePKUpgradeColumn=new JournalTemplatePKUpgradeColumnImpl(upgradeCompanyIdColumn,upgradeGroupIdColumn);
  upgradeTable=new DefaultUpgradeTableImpl(JournalTemplateImpl.TABLE_NAME,JournalTemplateImpl.TABLE_COLUMNS,upgradeCompanyIdColumn,upgradeGroupIdColumn,templatePKUpgradeColumn,upgradeUserIdColumn);
  upgradeTable.updateTable();
  ValueMapper templateIdMapper=new DefaultPKMapper(templatePKUpgradeColumn.getValueMapper());
  AvailableMappersUtil.setJournalTemplateIdMapper(templateIdMapper);
  PropsUtil.set(CompanyImpl.SYSTEM,PropsUtil.JOURNAL_SYNC_CONTENT_SEARCH_ON_STARTUP,"true");
  runSQL(_UPGRADE_SCHEMA);
}
