{
  org.hibernate.Session session=null;
  if (PropsValues.SPRING_HIBERNATE_SESSION_DELEGATED) {
    session=_sessionFactoryImplementor.getCurrentSession();
  }
 else {
    session=_sessionFactoryImplementor.openSession();
  }
  if (_log.isDebugEnabled()) {
    LiferayClassicSession classicSession=(LiferayClassicSession)session;
    org.hibernate.impl.SessionImpl sessionImpl=(org.hibernate.impl.SessionImpl)classicSession.getHibernateClassicSession();
    _log.debug("Session is using connection release mode " + sessionImpl.getConnectionReleaseMode());
  }
  return new SessionImpl(session);
}
