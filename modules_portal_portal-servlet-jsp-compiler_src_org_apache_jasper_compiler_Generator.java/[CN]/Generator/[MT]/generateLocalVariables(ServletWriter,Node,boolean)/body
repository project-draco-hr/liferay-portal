{
  Node.ChildInfo ci;
  if (n instanceof Node.CustomTag) {
    ci=((Node.CustomTag)n).getChildInfo();
  }
 else   if (n instanceof Node.JspBody) {
    ci=((Node.JspBody)n).getChildInfo();
  }
 else   if (n instanceof Node.NamedAttribute) {
    ci=((Node.NamedAttribute)n).getChildInfo();
  }
 else {
    throw new JasperException("Unexpected Node Type");
  }
  if (ci.hasUseBean()) {
    out.printil("HttpSession session = _jspx_page_context.getSession();");
    out.printil("ServletContext application = _jspx_page_context.getServletContext();");
  }
  if (ci.hasUseBean() || ci.hasIncludeAction() || ci.hasSetProperty()|| ci.hasParamAction()) {
    out.printil("HttpServletRequest request = (HttpServletRequest)_jspx_page_context.getRequest();");
  }
  if (ci.hasIncludeAction() || genBytes) {
    out.printil("HttpServletResponse response = (HttpServletResponse)_jspx_page_context.getResponse();");
  }
}
