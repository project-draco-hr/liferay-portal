{
  boolean nestedSeen=false;
  boolean atBeginSeen=false;
  boolean atEndSeen=false;
  boolean aliasSeen=false;
  TagVariableInfo[] tagVars=tagInfo.getTagVariableInfos();
  for (int i=0; i < tagVars.length; i++) {
    if (tagVars[i].getNameFromAttribute() != null && tagVars[i].getNameGiven() != null) {
      aliasSeen=true;
      break;
    }
  }
  if (aliasSeen) {
    out.printil("public void setJspContext(JspContext ctx, java.util.Map aliasMap) {");
  }
 else {
    out.printil("public void setJspContext(JspContext ctx) {");
  }
  out.pushIndent();
  out.printil("super.setJspContext(ctx);");
  out.printil("java.util.ArrayList _jspx_nested = null;");
  out.printil("java.util.ArrayList _jspx_at_begin = null;");
  out.printil("java.util.ArrayList _jspx_at_end = null;");
  for (int i=0; i < tagVars.length; i++) {
switch (tagVars[i].getScope()) {
case VariableInfo.NESTED:
      if (!nestedSeen) {
        out.printil("_jspx_nested = new java.util.ArrayList();");
        nestedSeen=true;
      }
    out.printin("_jspx_nested.add(");
  break;
case VariableInfo.AT_BEGIN:
if (!atBeginSeen) {
  out.printil("_jspx_at_begin = new java.util.ArrayList();");
  atBeginSeen=true;
}
out.printin("_jspx_at_begin.add(");
break;
case VariableInfo.AT_END:
if (!atEndSeen) {
out.printil("_jspx_at_end = new java.util.ArrayList();");
atEndSeen=true;
}
out.printin("_jspx_at_end.add(");
break;
}
out.print(quote(tagVars[i].getNameGiven()));
out.println(");");
}
if (aliasSeen) {
out.printil("this.jspContext = new org.apache.jasper.runtime.JspContextWrapper(ctx, _jspx_nested, _jspx_at_begin, _jspx_at_end, aliasMap);");
}
 else {
out.printil("this.jspContext = new org.apache.jasper.runtime.JspContextWrapper(ctx, _jspx_nested, _jspx_at_begin, _jspx_at_end, null);");
}
out.popIndent();
out.printil("}");
out.println();
out.printil("public JspContext getJspContext() {");
out.pushIndent();
out.printil("return this.jspContext;");
out.popIndent();
out.printil("}");
}
