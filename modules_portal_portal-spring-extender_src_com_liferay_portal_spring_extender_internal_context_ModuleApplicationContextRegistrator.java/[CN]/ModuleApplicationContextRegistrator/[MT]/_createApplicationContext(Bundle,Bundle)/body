{
  SpringContextHeaderParser springContextHeaderParser=new SpringContextHeaderParser(extendee);
  String[] beanDefinitionFiles=springContextHeaderParser.getBeanDefinitionFiles();
  if (ArrayUtil.isEmpty(beanDefinitionFiles)) {
    return null;
  }
  ClassLoader classLoader=new BundleResolverClassLoader(extendee,extender);
  Bundle compositeResourceLoaderBundle=new CompositeResourceLoaderBundle(extendee,extender);
  ModuleApplicationContext moduleApplicationContext=new ModuleApplicationContext(compositeResourceLoaderBundle,classLoader,beanDefinitionFiles);
  moduleApplicationContext.addBeanFactoryPostProcessor(new ModuleBeanFactoryPostProcessor(classLoader,extendee.getBundleContext()));
  moduleApplicationContext.refresh();
  return moduleApplicationContext;
}
