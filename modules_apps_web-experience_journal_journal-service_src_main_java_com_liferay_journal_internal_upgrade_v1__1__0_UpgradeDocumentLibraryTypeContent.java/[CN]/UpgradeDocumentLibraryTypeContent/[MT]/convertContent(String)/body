{
  Document contentDocument=SAXReaderUtil.read(content);
  contentDocument=contentDocument.clone();
  XPath xPathSelector=SAXReaderUtil.createXPath("//dynamic-element[@type='document_library']");
  List<Node> imageNodes=xPathSelector.selectNodes(contentDocument);
  for (  Node imageNode : imageNodes) {
    Element imageEl=(Element)imageNode;
    List<Element> dynamicContentEls=imageEl.elements("dynamic-content");
    for (    Element dynamicContentEl : dynamicContentEls) {
      String data=getDocumentLibraryValue(dynamicContentEl.getText());
      dynamicContentEl.clearContent();
      dynamicContentEl.addCDATA(data);
    }
  }
  return contentDocument.formattedString();
}
