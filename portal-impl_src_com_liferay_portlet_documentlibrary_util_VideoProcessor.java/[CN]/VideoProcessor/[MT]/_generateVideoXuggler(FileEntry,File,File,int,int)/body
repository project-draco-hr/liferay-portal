{
  try {
    IMediaReader iMediaReader=ToolFactory.makeReader(srcFile.getCanonicalPath());
    VideoResizer videoResizer=new VideoResizer(height,width);
    iMediaReader.addListener(videoResizer);
    AudioListener audioListener=new AudioListener();
    videoResizer.addListener(audioListener);
    IMediaWriter iMediaWriter=ToolFactory.makeWriter(destFile.getCanonicalPath(),iMediaReader);
    audioListener.addListener(iMediaWriter);
    VideoListener videoListener=new VideoListener(height,width);
    iMediaWriter.addListener(videoListener);
    while (iMediaReader.readPacket() == null) {
    }
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
