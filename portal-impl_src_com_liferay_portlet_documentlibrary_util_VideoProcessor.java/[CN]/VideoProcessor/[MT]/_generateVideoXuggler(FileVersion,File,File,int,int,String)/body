{
  if (_isGeneratePreview(fileVersion,containerType)) {
    long startTime=0;
    if (_log.isInfoEnabled()) {
      startTime=System.currentTimeMillis();
    }
    LiferayVideoConverter liferayVideoConverter=new LiferayVideoConverter(srcFile.getCanonicalPath(),destFile.getCanonicalPath(),height,width,_SAMPLE_RATE);
    liferayVideoConverter.convert();
    addFileToStore(fileVersion.getCompanyId(),PREVIEW_PATH,getPreviewFilePath(fileVersion,containerType),destFile);
    if (_log.isInfoEnabled()) {
      long totalTime=System.currentTimeMillis() - startTime;
      _log.info("Xuggler generated a " + containerType + " preview"+ " video for "+ fileVersion.getFileVersionId()+ " in "+ totalTime+ "ms");
    }
  }
}
