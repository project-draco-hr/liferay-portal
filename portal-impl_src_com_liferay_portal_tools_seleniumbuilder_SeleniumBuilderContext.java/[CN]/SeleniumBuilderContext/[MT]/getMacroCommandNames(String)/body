{
  Element currentRootElement=getMacroRootElement(macroName);
  String parentMacroName=currentRootElement.attributeValue("extends");
  List<Element> currentCommandElements=currentRootElement.elements("command");
  Set<String> commandNames=new HashSet<String>();
  if (parentMacroName != null) {
    Element parentRootElement=getMacroRootElement(parentMacroName);
    List<Element> parentCommandElements=parentRootElement.elements("command");
    for (    Element parentCommandElement : parentCommandElements) {
      String parentCommandName=parentCommandElement.attributeValue("name");
      commandNames.add(parentCommandName);
    }
    for (    Element currentCommandElement : currentCommandElements) {
      String currentCommandName=currentCommandElement.attributeValue("name");
      commandNames.add(currentCommandName);
    }
  }
 else {
    for (    Element commandElement : currentCommandElements) {
      String commandName=commandElement.attributeValue("name");
      commandNames.add(commandName);
    }
  }
  return commandNames;
}
