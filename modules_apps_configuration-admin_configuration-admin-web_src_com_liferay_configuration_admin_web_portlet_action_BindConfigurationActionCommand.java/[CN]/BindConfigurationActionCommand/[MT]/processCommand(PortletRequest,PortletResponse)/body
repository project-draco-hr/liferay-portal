{
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  String factoryPid=ParamUtil.getString(portletRequest,"factoryPid");
  String pid=ParamUtil.getString(portletRequest,"pid",factoryPid);
  if (_log.isDebugEnabled()) {
    _log.debug("Binding attributes for service " + pid);
  }
  ConfigurationHelper configurationHelper=new ConfigurationHelper(_bundleContext,_configurationAdmin,_metaTypeService,themeDisplay.getLanguageId());
  ConfigurationModel configurationModel=configurationHelper.getConfigurationModel(pid);
  Configuration configuration=configurationHelper.getConfiguration(pid);
  ConfigurationModelToDDMFormConverter configurationModelToDDMFormConverter=new ConfigurationModelToDDMFormConverter(configurationModel,themeDisplay.getLocale());
  DDMForm ddmForm=configurationModelToDDMFormConverter.getDDMForm();
  DDMFormValues ddmFormValues=getDDMFormValues(portletRequest,ddmForm);
  DDMFormValuesToPropertiesConverter ddmFormValuesToPropertiesConverter=new DDMFormValuesToPropertiesConverter(configurationModel,ddmFormValues,_jsonFactory,themeDisplay.getLocale());
  Dictionary<String,Object> properties=ddmFormValuesToPropertiesConverter.getProperties();
  properties.put(Constants.SERVICE_PID,pid);
  if (Validator.isNotNull(factoryPid)) {
    properties.put(ConfigurationAdmin.SERVICE_FACTORYPID,factoryPid);
  }
  configureTargetService(configurationModel,configuration,properties);
  return true;
}
