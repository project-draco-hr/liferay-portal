{
  String storeType=_store.getType();
  if (!(storeType.endsWith("DBStore"))) {
    return _store;
  }
  DB db=DBFactoryUtil.getDB();
  String dbType=db.getType();
  if (dbType.equals(DB.TYPE_POSTGRESQL)) {
    ClassLoader classLoader=ClassLoaderUtil.getPortalClassLoader();
    MethodInterceptor transactionAdviceMethodInterceptor=(MethodInterceptor)PortalBeanLocatorUtil.locate("transactionAdvice");
    MethodInterceptor tempFileMethodInterceptor=new TempFileMethodInterceptor();
    List<MethodInterceptor> methodInterceptors=Arrays.asList(transactionAdviceMethodInterceptor,tempFileMethodInterceptor);
    _store=(Store)ProxyUtil.newProxyInstance(classLoader,new Class<?>[]{Store.class},new MethodInterceptorInvocationHandler(_store,methodInterceptors));
  }
  return _store;
}
