{
  ClassLoader classLoader=PACLClassLoaderUtil.getPortalClassLoader();
  Store store=(Store)InstanceFactory.newInstance(classLoader,PropsValues.DL_STORE_IMPL);
  if (store instanceof DBStore) {
    DB db=DBFactoryUtil.getDB();
    String dbType=db.getType();
    if (dbType.equals(DB.TYPE_POSTGRESQL)) {
      MethodInterceptor transactionAdviceMethodInterceptor=(MethodInterceptor)PortalBeanLocatorUtil.locate("transactionAdvice");
      MethodInterceptor tempFileMethodInterceptor=new TempFileMethodInterceptor();
      List<MethodInterceptor> methodInterceptors=Arrays.asList(transactionAdviceMethodInterceptor,tempFileMethodInterceptor);
      store=(Store)ProxyUtil.newProxyInstance(classLoader,new Class<?>[]{Store.class},new MethodInterceptorInvocationHandler(store,methodInterceptors));
    }
  }
  return store;
}
