{
  JSONArray ddmFormFieldsJSONArray=null;
  if (ddmForm != null) {
    ddmFormFieldsJSONArray=getDDMFormFieldsJSONArray(ddmForm.getDDMFormFields(),ddmForm.getAvailableLocales(),ddmForm.getDefaultLocale());
  }
 else   if (Validator.isNotNull(script)) {
    try {
      DDMForm scriptDDMForm=_ddmFormJSONDeserializer.deserialize(script);
      ddmFormFieldsJSONArray=getDDMFormFieldsJSONArray(scriptDDMForm.getDDMFormFields(),scriptDDMForm.getAvailableLocales(),scriptDDMForm.getDefaultLocale());
    }
 catch (    PortalException pe) {
      if (_log.isWarnEnabled()) {
        _log.warn("Unable to deserialize script",pe);
      }
    }
  }
  return ddmFormFieldsJSONArray;
}
