{
  Element filesEl=doc.createElement("Files");
  root.appendChild(filesEl);
  if (!arg.getCurrentGroupName().equals("")) {
    Group group=GroupLocalServiceUtil.getGroup(arg.getCompanyId(),arg.getCurrentGroupName());
    DLFolder folder=_getFolder(group.getGroupId(),arg.getCurrentFolder());
    List files=DLFileEntryLocalServiceUtil.getFileEntries(folder.getFolderId());
    for (int i=0; i < files.size(); i++) {
      DLFileEntry fileEntry=(DLFileEntry)files.get(i);
      Element fileEl=doc.createElement("File");
      filesEl.appendChild(fileEl);
      fileEl.setAttribute("name",fileEntry.getTitleWithExtension());
      fileEl.setAttribute("desc",fileEntry.getTitle());
      fileEl.setAttribute("size",getSize(fileEntry.getSize()));
      StringMaker url=new StringMaker();
      ThemeDisplay themeDisplay=arg.getThemeDisplay();
      url.append(themeDisplay.getPathMain());
      url.append("/document_library/get_file?folderId=");
      url.append(fileEntry.getFolderId());
      url.append("&name=");
      url.append(Http.encodeURL(fileEntry.getName()));
      fileEl.setAttribute("url",url.toString());
    }
  }
}
