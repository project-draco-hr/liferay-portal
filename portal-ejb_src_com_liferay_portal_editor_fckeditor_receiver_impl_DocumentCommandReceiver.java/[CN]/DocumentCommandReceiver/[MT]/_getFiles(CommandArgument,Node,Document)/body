{
  Element filesEl=doc.createElement("Files");
  root.appendChild(filesEl);
  DLFolder folder=_getFolder(arg.getGroupId(),arg.getCurrentFolder());
  List files=DLFileEntryLocalServiceUtil.getFileEntries(folder.getFolderId());
  for (int i=0; i < files.size(); i++) {
    DLFileEntry fileEntry=(DLFileEntry)files.get(i);
    Element fileEl=doc.createElement("File");
    filesEl.appendChild(fileEl);
    fileEl.setAttribute("name",fileEntry.getName());
    fileEl.setAttribute("desc",fileEntry.getName());
    fileEl.setAttribute("size",getSize(fileEntry.getSize()));
    PortletURLImpl portletURL=new PortletURLImpl(arg.getHttpServletRequest(),PortletKeys.DOCUMENT_LIBRARY,arg.getPlid(),true);
    portletURL.setWindowState(LiferayWindowState.EXCLUSIVE);
    portletURL.setParameter("struts_action","/document_library/get_file");
    portletURL.setParameter("folderId",fileEntry.getFolderId());
    portletURL.setParameter("name",fileEntry.getName());
    fileEl.setAttribute("url",portletURL.toString());
  }
}
