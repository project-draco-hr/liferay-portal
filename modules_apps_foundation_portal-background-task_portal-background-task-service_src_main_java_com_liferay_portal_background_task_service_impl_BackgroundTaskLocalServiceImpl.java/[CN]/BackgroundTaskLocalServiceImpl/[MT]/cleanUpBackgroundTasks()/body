{
  List<BackgroundTask> backgroundTasks=backgroundTaskPersistence.findByCompleted(false);
  for (  BackgroundTask backgroundTask : backgroundTasks) {
    if (backgroundTask.getStatus() == BackgroundTaskConstants.STATUS_IN_PROGRESS) {
      backgroundTask.setCompleted(true);
      backgroundTask.setStatus(BackgroundTaskConstants.STATUS_FAILED);
      backgroundTaskPersistence.update(backgroundTask);
    }
    cleanUpBackgroundTask(backgroundTask.getBackgroundTaskId(),backgroundTask.getStatus());
  }
}
