{
  Set<Locale> availableLocales=DDMFormTestUtil.createAvailableLocales(LocaleUtil.US,LocaleUtil.BRAZIL,LocaleUtil.ITALY,LocaleUtil.FRENCH);
  DDMForm ddmForm=DDMFormTestUtil.createDDMForm(availableLocales,LocaleUtil.US);
  DDMFormField ddmFormField=DDMFormTestUtil.createLocalizableTextDDMFormField("name");
  LocalizedValue label=new LocalizedValue(LocaleUtil.US);
  label.addString(LocaleUtil.US,"label us");
  label.addString(LocaleUtil.BRAZIL,"label br");
  label.addString(LocaleUtil.ITALY,"label es");
  label.addString(LocaleUtil.FRENCH,"label fr");
  ddmFormField.setLabel(label);
  LocalizedValue predefinedValue=new LocalizedValue(LocaleUtil.US);
  predefinedValue.addString(LocaleUtil.US,"Test1 us");
  predefinedValue.addString(LocaleUtil.BRAZIL,"Test1 br");
  predefinedValue.addString(LocaleUtil.ITALY,"Test1 es");
  predefinedValue.addString(LocaleUtil.FRENCH,"Test1 fr");
  ddmFormField.setPredefinedValue(predefinedValue);
  ddmForm.addDDMFormField(ddmFormField);
  DDMStructure ddmStructure=DDMStructureTestUtil.addStructure(_group.getGroupId(),JournalArticle.class.getName(),ddmForm);
  DDMTemplate ddmTemplate=DDMTemplateTestUtil.addTemplate(_group.getGroupId(),ddmStructure.getStructureId(),PortalUtil.getClassNameId(JournalArticle.class),TemplateConstants.LANG_TYPE_VM,JournalTestUtil.getSampleTemplateXSL(),LocaleUtil.US);
  Map<Locale,String> values=new HashMap<>();
  values.put(LocaleUtil.US,"Test2 us");
  values.put(LocaleUtil.BRAZIL,"Test2 br");
  values.put(LocaleUtil.ITALY,"Test2 es");
  values.put(LocaleUtil.FRENCH,"Test2 fr");
  String content=DDMStructureTestUtil.getSampleStructuredContent(values,LocaleUtil.US.toString());
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(_group.getGroupId());
  Map<Locale,String> titleMap=new HashMap<>();
  titleMap.put(LocaleUtil.US,"Test Article");
  JournalArticle journalArticle=JournalArticleLocalServiceUtil.addArticle(serviceContext.getUserId(),serviceContext.getScopeGroupId(),JournalFolderConstants.DEFAULT_PARENT_FOLDER_ID,ClassNameLocalServiceUtil.getClassNameId(DDMStructure.class),ddmStructure.getStructureId(),StringPool.BLANK,true,0,titleMap,null,content,ddmStructure.getStructureKey(),ddmTemplate.getTemplateKey(),null,1,1,1965,0,0,0,0,0,0,0,true,0,0,0,0,0,true,true,false,null,null,null,null,serviceContext);
  DDMStructure actualDDMStrucure=journalArticle.getDDMStructure();
  Assert.assertEquals(actualDDMStrucure.getStructureId(),ddmStructure.getStructureId());
  DDMFormField actualDDMFormField=actualDDMStrucure.getDDMFormField("name");
  Assert.assertNotNull(actualDDMFormField);
  LocalizedValue actualDDMFormFieldPredefinedValue=actualDDMFormField.getPredefinedValue();
  Assert.assertEquals("Test2 us",actualDDMFormFieldPredefinedValue.getString(LocaleUtil.US));
  Assert.assertEquals("Test2 br",actualDDMFormFieldPredefinedValue.getString(LocaleUtil.BRAZIL));
  Assert.assertEquals("Test2 es",actualDDMFormFieldPredefinedValue.getString(LocaleUtil.ITALY));
  Assert.assertEquals("Test2 fr",actualDDMFormFieldPredefinedValue.getString(LocaleUtil.FRENCH));
}
