{
  DDMForm ddmForm=DDMFormTestUtil.createDDMForm();
  DDMFormField ddmFormField=DDMFormTestUtil.createLocalizableTextDDMFormField("name");
  LocalizedValue predefinedValue=new LocalizedValue(LocaleUtil.US);
  predefinedValue.addString(LocaleUtil.US,"Test1");
  predefinedValue.getAvailableLocales();
  ddmFormField.setPredefinedValue(predefinedValue);
  ddmForm.addDDMFormField(ddmFormField);
  DDMStructure ddmStructure=DDMStructureTestUtil.addStructure(_group.getGroupId(),JournalArticle.class.getName(),ddmForm);
  DDMTemplate ddmTemplate=DDMTemplateTestUtil.addTemplate(_group.getGroupId(),ddmStructure.getStructureId(),PortalUtil.getClassNameId(JournalArticle.class),TemplateConstants.LANG_TYPE_VM,JournalTestUtil.getSampleTemplateXSL(),LocaleUtil.US);
  Map<Locale,String> values=new HashMap<>();
  values.put(LocaleUtil.US,"Test2");
  String content=DDMStructureTestUtil.getSampleStructuredContent(values,LocaleUtil.US.toString());
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(_group.getGroupId());
  Map<Locale,String> titleMap=new HashMap<>();
  titleMap.put(LocaleUtil.US,"Test Article");
  JournalArticle journalArticle=JournalArticleLocalServiceUtil.addArticle(serviceContext.getUserId(),serviceContext.getScopeGroupId(),JournalFolderConstants.DEFAULT_PARENT_FOLDER_ID,ClassNameLocalServiceUtil.getClassNameId(DDMStructure.class),ddmStructure.getStructureId(),StringPool.BLANK,true,0,titleMap,null,content,ddmStructure.getStructureKey(),ddmTemplate.getTemplateKey(),null,1,1,1965,0,0,0,0,0,0,0,true,0,0,0,0,0,true,true,false,null,null,null,null,serviceContext);
  DDMStructure actualDDMStrucure=journalArticle.getDDMStructure();
  Assert.assertEquals(actualDDMStrucure.getStructureId(),ddmStructure.getStructureId());
  DDMFormField actualDDMFormField=actualDDMStrucure.getDDMFormField("name");
  Assert.assertNotNull(actualDDMFormField);
  LocalizedValue actualDDMFormFieldPredefinedValue=actualDDMFormField.getPredefinedValue();
  Assert.assertEquals("Test2",actualDDMFormFieldPredefinedValue.getString(LocaleUtil.US));
}
