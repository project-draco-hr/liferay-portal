{
  long folderId=_getFolderId(folder);
  boolean inherited=true;
  if ((folder != null) && (folder.getModel() instanceof DLFolder)) {
    DLFolder dlFolder=(DLFolder)folder.getModel();
    if (dlFolder.getRestrictionType() == DLFolderConstants.RESTRICTION_TYPE_FILE_ENTRY_TYPES_AND_WORKFLOW) {
      inherited=false;
    }
  }
  List<DLFileEntryType> fileEntryTypes=Collections.emptyList();
  if ((folder == null) || folder.isSupportsMetadata()) {
    try {
      fileEntryTypes=DLFileEntryTypeServiceUtil.getFolderFileEntryTypes(PortalUtil.getCurrentAndAncestorSiteGroupIds(groupId),folderId,inherited);
    }
 catch (    PortalException pe) {
      _log.error("Cannot obtain file entry types for group id " + groupId + " and folder "+ folderId,pe);
    }
  }
  return fileEntryTypes;
}
