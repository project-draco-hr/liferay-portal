{
  long folderId=_getFolderId(folder);
  if (!containsPermission(themeDisplay.getPermissionChecker(),themeDisplay.getScopeGroupId(),folderId,ActionKeys.ADD_DOCUMENT)) {
    return;
  }
  List<DLFileEntryType> fileEntryTypes=getFileEntryTypes(themeDisplay.getScopeGroupId(),folder);
  for (  DLFileEntryType fileEntryType : fileEntryTypes) {
    try {
      URLMenuItem urlMenuItem=getFileEntryTypeMenuItem(portletRequest,folder,fileEntryTypes,fileEntryType,themeDisplay);
      menuItems.add(urlMenuItem);
    }
 catch (    PortalException pe) {
      _log.error("Cannot add menu item for file entry type " + fileEntryType.getName(),pe);
    }
  }
}
