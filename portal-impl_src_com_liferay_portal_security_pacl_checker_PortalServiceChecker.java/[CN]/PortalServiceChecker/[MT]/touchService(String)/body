{
  String className=service;
  if (!className.contains(".service.")) {
    return;
  }
  String methodName=null;
  if (className.contains(".service.persistence.") && (className.endsWith("Persistence") || className.contains("Persistence#"))) {
    methodName="getPersistence";
  }
 else   if (className.endsWith("Service") || className.contains("Service#")) {
    methodName="getService";
  }
 else {
    _log.error("Invalid service " + service);
    return;
  }
  int pos=className.indexOf(StringPool.POUND);
  if (pos != -1) {
    className=className.substring(0,pos);
  }
  if (className.endsWith("Persistence")) {
    className=className.substring(0,className.length() - 11);
  }
  className+="Util";
  if (_log.isDebugEnabled()) {
    _log.debug("Invoking " + className + "#"+ methodName);
  }
  ClassLoader classLoader=getCommonClassLoader();
  if (ServerDetector.isJBoss()) {
    classLoader=getPortalClassLoader();
  }
  try {
    Class<?> clazz=classLoader.loadClass(className);
    Method method=clazz.getMethod(methodName);
    method.invoke(clazz);
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
}
