{
  String ldapServerName=properties.getProperty("ldap.server.name." + ldapServerId);
  if (Validator.isNull(ldapServerName)) {
    throw new LDAPServerNameException();
  }
  long[] existingLDAPServerIds=StringUtil.split(PrefsPropsUtil.getString(companyId,"ldap.server.ids"),0L);
  for (  long existingLDAPServerId : existingLDAPServerIds) {
    if (ldapServerId == existingLDAPServerId) {
      continue;
    }
    String existingLDAPServerName=PrefsPropsUtil.getString(companyId,"ldap.server.name." + existingLDAPServerId);
    if (ldapServerName.equals(existingLDAPServerName)) {
      throw new DuplicateLDAPServerNameException();
    }
  }
}
