{
  long fileEntryId=ParamUtil.getLong(actionRequest,"fileEntryId");
  if (fileEntryId == 0) {
    return;
  }
  String version=ParamUtil.getString(actionRequest,"version");
  if (Validator.isNotNull(version)) {
    DLAppServiceUtil.deleteFileVersion(fileEntryId,version);
    return;
  }
  if (!moveToTrash) {
    DLAppServiceUtil.deleteFileEntry(fileEntryId);
    return;
  }
  FileEntry fileEntry=DLAppServiceUtil.getFileEntry(fileEntryId);
  if (fileEntry.isRepositoryCapabilityProvided(TrashCapability.class)) {
    fileEntry=DLAppServiceUtil.moveFileEntryToTrash(fileEntryId);
    TrashUtil.addTrashSessionMessages(actionRequest,(TrashedModel)fileEntry.getModel());
  }
  hideDefaultSuccessMessage(actionRequest);
}
