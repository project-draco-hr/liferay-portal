{
  long fileEntryId=ParamUtil.getLong(actionRequest,"fileEntryId");
  if (fileEntryId == 0) {
    return;
  }
  String version=ParamUtil.getString(actionRequest,"version");
  if (Validator.isNotNull(version)) {
    DLAppServiceUtil.deleteFileVersion(fileEntryId,version);
    return;
  }
  if (!moveToTrash) {
    DLAppServiceUtil.deleteFileEntry(fileEntryId);
    return;
  }
  FileEntry fileEntry=DLAppServiceUtil.getFileEntry(fileEntryId);
  if (fileEntry.isCheckedOut()) {
    DLAppServiceUtil.cancelCheckOut(fileEntryId);
  }
  DLAppServiceUtil.moveFileEntryToTrash(fileEntryId);
  if (fileEntry.getModel() instanceof DLFileEntry) {
    TrashUtil.addTrashSessionMessages(actionRequest,(DLFileEntry)fileEntry.getModel());
  }
  hideDefaultSuccessMessage(actionRequest);
}
