{
  response.setContentType(Details.CONTENT_TYPE);
  PrintWriter printWriter=response.getWriter();
  printWriter.println("(function() {");
  printWriter.print(_details.globalJSVariable());
  printWriter.println(".PATHS = {");
  String delimiter="";
  Set<String> processedNames=new HashSet<>();
  Collection<JSLoaderModule> jsLoaderModules=_jsLoaderModules.values();
  for (  JSLoaderModule jsLoaderModule : jsLoaderModules) {
    printWriter.write(delimiter);
    printWriter.write("'");
    printWriter.write(jsLoaderModule.getName());
    printWriter.write('@');
    printWriter.write(jsLoaderModule.getVersion());
    printWriter.write("': '");
    printWriter.write(jsLoaderModule.getContextPath());
    printWriter.write("'");
    if (!processedNames.contains(jsLoaderModule.getName())) {
      processedNames.add(jsLoaderModule.getName());
      printWriter.println(",");
      printWriter.write("'");
      printWriter.write(jsLoaderModule.getName());
      printWriter.write("': '");
      printWriter.write(jsLoaderModule.getContextPath());
      printWriter.write("'");
    }
    delimiter=",\n";
  }
  printWriter.println("\n};");
  printWriter.print(_details.globalJSVariable());
  printWriter.println(".MODULES = {");
  delimiter="";
  processedNames.clear();
  for (  JSLoaderModule jsLoaderModule : jsLoaderModules) {
    String unversionedConfiguration=jsLoaderModule.getUnversionedConfiguration();
    if (unversionedConfiguration.length() == 0) {
      continue;
    }
    if (!processedNames.contains(jsLoaderModule.getName())) {
      processedNames.add(jsLoaderModule.getName());
      printWriter.write(delimiter);
      printWriter.write(unversionedConfiguration);
      delimiter=",\n";
    }
    String versionedConfiguration=jsLoaderModule.getVersionedConfiguration();
    if (versionedConfiguration.length() > 0) {
      printWriter.write(delimiter);
      printWriter.write(versionedConfiguration);
      delimiter=",\n";
    }
  }
  printWriter.println("\n};");
  printWriter.print(_details.globalJSVariable());
  printWriter.println(".MAPS = {");
  delimiter="";
  processedNames.clear();
  for (  JSLoaderModule jsLoaderModule : jsLoaderModules) {
    if (processedNames.contains(jsLoaderModule.getName())) {
      continue;
    }
    processedNames.add(jsLoaderModule.getName());
    printWriter.write(delimiter);
    printWriter.write("'");
    printWriter.write(jsLoaderModule.getName());
    printWriter.write("': '");
    printWriter.write(jsLoaderModule.getName());
    printWriter.write('@');
    printWriter.write(jsLoaderModule.getVersion());
    printWriter.write("'");
    delimiter=",\n";
  }
  printWriter.println("\n};");
  printWriter.println("}());");
  printWriter.close();
}
