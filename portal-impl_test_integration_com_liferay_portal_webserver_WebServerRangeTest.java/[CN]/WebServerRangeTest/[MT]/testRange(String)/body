{
  String fileName="Test Range.txt";
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(group.getGroupId(),TestPropsValues.getUserId());
  FileEntry fileEntry=DLAppLocalServiceUtil.addFileEntry(TestPropsValues.getUserId(),group.getGroupId(),parentFolder.getFolderId(),fileName,ContentTypes.TEXT_PLAIN,_SAMPLE_DATA.getBytes(),serviceContext);
  String path=fileEntry.getGroupId() + "/" + fileEntry.getFolderId()+ "/"+ fileEntry.getTitle();
  Map<String,String> headers=new HashMap<>();
  if (Validator.isNotNull(rangeHeader)) {
    headers.put(HttpHeaders.RANGE,rangeHeader);
  }
  MockHttpServletResponse mockHttpServletResponse=service(Method.GET,path,headers,null,null,null);
  int status=mockHttpServletResponse.getStatus();
  Assert.assertTrue(mockHttpServletResponse.containsHeader(HttpHeaders.ACCEPT_RANGES));
  if (Validator.isNotNull(rangeHeader)) {
    Assert.assertEquals(HttpServletResponse.SC_PARTIAL_CONTENT,status);
  }
 else {
    Assert.assertEquals(HttpServletResponse.SC_OK,status);
  }
  String contentType=mockHttpServletResponse.getContentType();
  if (Validator.isNotNull(rangeHeader) && rangeHeader.contains(StringPool.COMMA)) {
    Assert.assertTrue(contentType.startsWith("multipart/byteranges"));
  }
 else {
    Assert.assertEquals(ContentTypes.TEXT_PLAIN,contentType);
  }
  return mockHttpServletResponse;
}
