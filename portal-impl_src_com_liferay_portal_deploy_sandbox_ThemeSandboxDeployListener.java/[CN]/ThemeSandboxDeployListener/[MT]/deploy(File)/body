{
  String dirName=dir.getName();
  int ndx=dirName.lastIndexOf('-');
  if (ndx == -1) {
    return;
  }
  if (dirName.substring(ndx + 1).equals("theme") == false) {
    return;
  }
  String folderName=dirName.substring(0,ndx);
  String themeId=_createThemeId(folderName);
  String themeName=_createThemeName(folderName);
  if (_log.isDebugEnabled()) {
    _log.debug("Deploying sandbox theme: " + themeId);
  }
  try {
    _copyDefaultTheme(dir);
    _copyClassesLibAndTld(dir);
    _copyThemeDescriptors(dir);
    _resolveAllThemeProperties(dir,themeId,themeName);
    _createContextXml(dir,themeId);
  }
 catch (  IOException ie) {
    throw new SandboxDeployException(ie);
  }
}
