{
  String dirName=dir.getName();
  if (dirName.endsWith(THEME_SUFFIX) == false) {
    return;
  }
  if (_log.isInfoEnabled()) {
    _log.info("Deploying sandbox theme: " + dirName);
  }
  String displayName=_createDisplayName(dirName);
  String themeName=_createThemeName(dirName);
  try {
    _copyDefaultTheme(dir);
    _createPluginPackageProperties(dir,themeName);
    PluginPackage pp=readPluginPackage(dir);
    copyProperties(dir,pp);
    copyTlds(dir,pp);
    copyJars(dir,pp);
    copyXmls(dir,displayName,pp);
    updateWebXml(new File(dir,"WEB-INF/web.xml"),dir,displayName,pp);
    processPluginPackageProperties(dir,displayName,pp);
    _createContextXml(dir);
  }
 catch (  Exception ex) {
    throw new SandboxDeployException(ex);
  }
}
