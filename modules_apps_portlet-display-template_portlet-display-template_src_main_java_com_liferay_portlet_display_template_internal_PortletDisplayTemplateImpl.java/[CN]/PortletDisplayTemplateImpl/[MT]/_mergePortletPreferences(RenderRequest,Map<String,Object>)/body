{
  PortletPreferences portletPreferences=renderRequest.getPreferences();
  Map<String,String[]> map=portletPreferences.getMap();
  contextObjects.put(PortletDisplayTemplateConstants.PORTLET_PREFERENCES,map);
  for (  Map.Entry<String,String[]> entry : map.entrySet()) {
    if (contextObjects.containsKey(entry.getKey())) {
      continue;
    }
    String[] values=entry.getValue();
    if (ArrayUtil.isEmpty(values)) {
      continue;
    }
    String value=values[0];
    if (value == null) {
      continue;
    }
    contextObjects.put(entry.getKey(),value);
  }
  return contextObjects;
}
