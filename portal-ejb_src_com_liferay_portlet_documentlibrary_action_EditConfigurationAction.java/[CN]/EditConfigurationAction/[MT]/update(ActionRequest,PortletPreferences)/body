{
  String rootFolderId=ParamUtil.getString(req,"rootFolderId");
  String showSearch=ParamUtil.getString(req,"showSearch");
  String showBreadcrumbs=ParamUtil.getString(req,"showBreadcrumbs");
  String showSubfolders=ParamUtil.getString(req,"showSubfolders");
  String showColumnDownloads=ParamUtil.getString(req,"showColumnDownloads");
  String showColumnLocked=ParamUtil.getString(req,"showColumnLocked");
  String showColumnDate=ParamUtil.getString(req,"showColumnDate");
  String showColumnSize=ParamUtil.getString(req,"showColumnSize");
  String numberOfDocumentsPerPage=ParamUtil.getString(req,"numberOfDocumentsPerPage");
  if (Validator.isNull(rootFolderId)) {
    SessionErrors.add(req,"rootFolderIdInvalid");
    return;
  }
  try {
    if (!rootFolderId.equals(DLFolderImpl.DEFAULT_PARENT_FOLDER_ID)) {
      DLFolderLocalServiceUtil.getFolder(rootFolderId);
    }
    prefs.setValue("rootFolderId",rootFolderId);
    prefs.setValue("showSearch",showSearch);
    prefs.setValue("showBreadcrumbs",showBreadcrumbs);
    prefs.setValue("showSubfolders",showSubfolders);
    prefs.setValue("showColumnDownloads",showColumnDownloads);
    prefs.setValue("showColumnLocked",showColumnLocked);
    prefs.setValue("showColumnDate",showColumnDate);
    prefs.setValue("showColumnSize",showColumnSize);
    prefs.setValue("numberOfDocumentsPerPage",numberOfDocumentsPerPage);
  }
 catch (  NoSuchFolderException e) {
    SessionErrors.add(req,"rootFolderIdInvalid");
  }
}
