{
  long userId=0;
  try {
    userId=getUserId();
  }
 catch (  PrincipalException pe) {
    userId=counterLocalService.increment();
  }
  PollsQuestionPermissionChecker.check(getPermissionChecker(),questionId,ActionKeys.ADD_VOTE);
  return pollsVoteLocalService.addVote(userId,questionId,choiceId,serviceContext);
}
