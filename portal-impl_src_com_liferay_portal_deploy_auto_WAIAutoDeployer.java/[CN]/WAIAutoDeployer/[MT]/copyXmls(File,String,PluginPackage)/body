{
  super.copyXmls(srcFile,displayName,pluginPackage);
  String portletName=displayName;
  if (pluginPackage != null) {
    portletName=pluginPackage.getName();
  }
  Map<String,String> filterMap=new HashMap<String,String>();
  filterMap.put("portlet_name",displayName);
  filterMap.put("portlet_title",portletName);
  filterMap.put("restore_current_view","false");
  if (pluginPackage != null) {
    Properties settings=pluginPackage.getDeploymentSettings();
    filterMap.put("portlet_class",settings.getProperty("wai.portlet","com.liferay.util.bridges.wai.WAIPortlet"));
    filterMap.put("friendly_url_mapper_class",settings.getProperty("wai.friendly.url.mapper","com.liferay.util.bridges.wai.WAIFriendlyURLMapper"));
  }
 else {
    filterMap.put("portlet_class","com.liferay.util.bridges.wai.WAIPortlet");
    filterMap.put("friendly_url_mapper_class","com.liferay.util.bridges.wai.WAIFriendlyURLMapper");
  }
  _setInitParams(filterMap,pluginPackage);
  copyDependencyXml("liferay-display.xml",srcFile + "/WEB-INF",filterMap);
  copyDependencyXml("liferay-portlet.xml",srcFile + "/WEB-INF",filterMap);
  copyDependencyXml("portlet.xml",srcFile + "/WEB-INF",filterMap);
  copyDependencyXml("normal_window_state.jsp",srcFile + "/WEB-INF/jsp/liferay/wai");
  copyDependencyXml("iframe.jsp",srcFile + "/WEB-INF/jsp/liferay/wai");
}
