{
  if (assignments.isEmpty()) {
    return;
  }
  Element assignmentsElement=parentElement.addElement(assignmentsElementName);
  Element resourceActionsElement=null;
  Element rolesElement=null;
  for (  Assignment assignment : assignments) {
    AssignmentType assignmentType=assignment.getAssignmentType();
    if (assignmentType.equals(AssignmentType.RESOURCE_ACTION)) {
      if (resourceActionsElement == null) {
        resourceActionsElement=assignmentsElement.addElement("resource-actions");
      }
      ResourceActionAssignment resourceActionAssignment=(ResourceActionAssignment)assignment;
      addTextElement(resourceActionsElement,"resource-action",resourceActionAssignment.getActionId());
    }
 else     if (assignmentType.equals(AssignmentType.ROLE)) {
      if (rolesElement == null) {
        rolesElement=assignmentsElement.addElement("roles");
      }
      Element roleElement=rolesElement.addElement("role");
      RoleAssignment roleAssignment=(RoleAssignment)assignment;
      populateRoleElement(roleElement,roleAssignment.getRoleId(),roleAssignment.getRoleType(),roleAssignment.getRoleName(),roleAssignment.isAutoCreate());
    }
 else     if (assignmentType.equals(AssignmentType.SCRIPT)) {
      Element scriptedAssignmentElement=assignmentsElement.addElement("scripted-assignment");
      ScriptAssignment scriptAssignment=(ScriptAssignment)assignment;
      populateScriptingElement(scriptedAssignmentElement,scriptAssignment.getScript(),scriptAssignment.getScriptLanguage().getValue(),scriptAssignment.getScriptRequiredContexts());
    }
 else     if (assignmentType.equals(AssignmentType.USER)) {
      Element userElement=assignmentsElement.addElement("user");
      UserAssignment userAssignment=(UserAssignment)assignment;
      populateUserElement(userElement,userAssignment.getUserId(),userAssignment.getEmailAddress(),userAssignment.getScreenName());
    }
  }
}
