{
  Session session=null;
  try {
    if (company.isNew() || company.isModified()) {
      session=openSession();
      if (company.isNew()) {
        CompanyHBM companyHBM=new CompanyHBM();
        companyHBM.setCompanyId(company.getCompanyId());
        companyHBM.setKey(company.getKey());
        companyHBM.setPortalURL(company.getPortalURL());
        companyHBM.setHomeURL(company.getHomeURL());
        companyHBM.setMx(company.getMx());
        session.save(companyHBM);
        session.flush();
      }
 else {
        CompanyHBM companyHBM=(CompanyHBM)session.get(CompanyHBM.class,company.getPrimaryKey());
        if (companyHBM != null) {
          companyHBM.setKey(company.getKey());
          companyHBM.setPortalURL(company.getPortalURL());
          companyHBM.setHomeURL(company.getHomeURL());
          companyHBM.setMx(company.getMx());
          session.flush();
        }
 else {
          companyHBM=new CompanyHBM();
          companyHBM.setCompanyId(company.getCompanyId());
          companyHBM.setKey(company.getKey());
          companyHBM.setPortalURL(company.getPortalURL());
          companyHBM.setHomeURL(company.getHomeURL());
          companyHBM.setMx(company.getMx());
          session.save(companyHBM);
          session.flush();
        }
      }
      company.setNew(false);
      company.setModified(false);
    }
    return company;
  }
 catch (  HibernateException he) {
    throw new SystemException(he);
  }
 finally {
    closeSession(session);
  }
}
