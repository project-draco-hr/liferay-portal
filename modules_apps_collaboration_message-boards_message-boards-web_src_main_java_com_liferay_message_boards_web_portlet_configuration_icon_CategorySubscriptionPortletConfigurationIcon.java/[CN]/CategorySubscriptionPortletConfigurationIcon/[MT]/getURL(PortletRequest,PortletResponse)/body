{
  PortletURL portletURL=PortalUtil.getControlPanelPortletURL(portletRequest,MBPortletKeys.MESSAGE_BOARDS_ADMIN,PortletRequest.ACTION_PHASE);
  portletURL.setParameter(ActionRequest.ACTION_NAME,"/message_boards/edit_category");
  MBCategory category=null;
  try {
    category=ActionUtil.getCategory(portletRequest);
  }
 catch (  Exception e) {
    return null;
  }
  if (isSubscribed(portletRequest,category)) {
    portletURL.setParameter(Constants.CMD,Constants.UNSUBSCRIBE);
  }
 else {
    portletURL.setParameter(Constants.CMD,Constants.SUBSCRIBE);
  }
  portletURL.setParameter("redirect",PortalUtil.getCurrentURL(portletRequest));
  portletURL.setParameter("mbCategoryId",String.valueOf(category.getCategoryId()));
  return portletURL.toString();
}
