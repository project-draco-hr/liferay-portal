{
  try {
    if (_results == null) {
      _results=(List<R>)pageContext.getAttribute(_resultsVar);
      _total=(Integer)pageContext.getAttribute(_totalVar);
    }
    if (_results != null) {
      if (_total < _results.size()) {
        _total=_results.size();
      }
    }
    SearchContainerTag<R> searchContainerTag=(SearchContainerTag<R>)findAncestorWithClass(this,SearchContainerTag.class);
    SearchContainer<R> searchContainer=searchContainerTag.getSearchContainer();
    searchContainer.setResults(_results);
    searchContainer.setTotal(_total);
    searchContainerTag.setHasResults(true);
    pageContext.setAttribute(_resultsVar,_results);
    pageContext.setAttribute(_totalVar,_total);
    return EVAL_PAGE;
  }
 catch (  Exception e) {
    throw new JspException(e);
  }
 finally {
    if (!ServerDetector.isResin()) {
      _results=null;
      _resultsVar=DEFAULT_RESULTS_VAR;
      _total=0;
      _totalVar=DEFAULT_TOTAL_VAR;
    }
  }
}
