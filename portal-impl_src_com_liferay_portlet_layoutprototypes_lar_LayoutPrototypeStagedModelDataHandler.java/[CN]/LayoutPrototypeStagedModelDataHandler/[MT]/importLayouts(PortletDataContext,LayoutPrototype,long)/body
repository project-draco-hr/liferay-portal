{
  long groupId=portletDataContext.getGroupId();
  boolean privateLayout=portletDataContext.isPrivateLayout();
  long scopeGroupId=portletDataContext.getScopeGroupId();
  try {
    portletDataContext.setGroupId(importedGroupId);
    portletDataContext.setPrivateLayout(true);
    portletDataContext.setScopeGroupId(importedGroupId);
    List<Element> layoutElements=portletDataContext.getReferenceDataElements(layoutPrototype,Layout.class);
    for (    Element layoutElement : layoutElements) {
      StagedModelDataHandlerUtil.importReferenceStagedModel(portletDataContext,layoutElement);
    }
  }
  finally {
    portletDataContext.setGroupId(groupId);
    portletDataContext.setPrivateLayout(privateLayout);
    portletDataContext.setScopeGroupId(scopeGroupId);
  }
}
