{
  long userId=portletDataContext.getUserId(layoutPrototype.getUserUuid());
  ServiceContext serviceContext=portletDataContext.createServiceContext(layoutPrototype);
  serviceContext.setAttribute("addDefaultLayout",false);
  LayoutPrototype importedLayoutPrototype=null;
  if (portletDataContext.isDataStrategyMirror()) {
    LayoutPrototype existingLayoutPrototype=LayoutPrototypeLocalServiceUtil.fetchLayoutPrototypeByUuidAndCompanyId(layoutPrototype.getUuid(),portletDataContext.getCompanyId());
    if (existingLayoutPrototype == null) {
      serviceContext.setUuid(layoutPrototype.getUuid());
      importedLayoutPrototype=LayoutPrototypeLocalServiceUtil.addLayoutPrototype(userId,portletDataContext.getCompanyId(),layoutPrototype.getNameMap(),layoutPrototype.getDescriptionMap(),layoutPrototype.isActive(),serviceContext);
    }
 else {
      importedLayoutPrototype=LayoutPrototypeLocalServiceUtil.updateLayoutPrototype(existingLayoutPrototype.getLayoutPrototypeId(),layoutPrototype.getNameMap(),layoutPrototype.getDescriptionMap(),layoutPrototype.isActive(),serviceContext);
    }
  }
 else {
    importedLayoutPrototype=LayoutPrototypeLocalServiceUtil.addLayoutPrototype(userId,portletDataContext.getCompanyId(),layoutPrototype.getNameMap(),layoutPrototype.getDescriptionMap(),layoutPrototype.isActive(),serviceContext);
  }
  importLayouts(portletDataContext,layoutPrototype,importedLayoutPrototype.getGroupId());
  portletDataContext.importClassedModel(layoutPrototype,importedLayoutPrototype);
}
