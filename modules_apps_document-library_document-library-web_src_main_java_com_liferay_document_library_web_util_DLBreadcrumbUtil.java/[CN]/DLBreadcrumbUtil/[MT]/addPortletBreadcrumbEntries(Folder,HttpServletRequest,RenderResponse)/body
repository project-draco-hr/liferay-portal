{
  String mvcRenderCommandName=ParamUtil.getString(request,"mvcRenderCommandName");
  long groupId=ParamUtil.getLong(request,"groupId");
  boolean ignoreRootFolder=ParamUtil.getBoolean(request,"ignoreRootFolder");
  PortletURL portletURL=renderResponse.createRenderURL();
  if (mvcRenderCommandName.equals("/document_library/select_file_entry") || mvcRenderCommandName.equals("/document_library/select_folder")) {
    _addPortletBreadcrumbEntry(request,"mvcRenderCommandName",mvcRenderCommandName,groupId,ignoreRootFolder,portletURL);
  }
 else {
    long folderId=DLFolderConstants.DEFAULT_PARENT_FOLDER_ID;
    if (folder != null) {
      folderId=folder.getFolderId();
    }
    if (folderId != DLFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
      portletURL.setParameter("mvcRenderCommandName","/document_library/view_folder");
    }
 else {
      portletURL.setParameter("mvcRenderCommandName","/document_library/view");
    }
  }
  addPortletBreadcrumbEntries(folder,request,portletURL);
}
