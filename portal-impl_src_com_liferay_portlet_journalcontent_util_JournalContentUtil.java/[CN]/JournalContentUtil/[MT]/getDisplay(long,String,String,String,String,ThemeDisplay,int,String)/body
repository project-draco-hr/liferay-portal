{
  StopWatch stopWatch=null;
  if (_log.isDebugEnabled()) {
    stopWatch=new StopWatch();
    stopWatch.start();
  }
  articleId=GetterUtil.getString(articleId).toUpperCase();
  templateId=GetterUtil.getString(templateId).toUpperCase();
  String key=encodeKey(groupId,articleId,templateId,viewMode,languageId,page);
  JournalArticleDisplay articleDisplay=(JournalArticleDisplay)MultiVMPoolUtil.get(cache,key);
  if (_log.isDebugEnabled()) {
    StringBuilder sb=new StringBuilder();
    sb.append("Lifecycle {action=");
    sb.append(themeDisplay.isLifecycleAction());
    sb.append(", render=");
    sb.append(themeDisplay.isLifecycleRender());
    sb.append(", resource=");
    sb.append(themeDisplay.isLifecycleResource());
    sb.append("}");
    _log.debug(sb.toString());
  }
  if ((articleDisplay == null) || (themeDisplay.isLifecycleAction()) || (themeDisplay.isLifecycleResource())) {
    if (_log.isDebugEnabled()) {
      _log.debug("Not cached");
    }
    articleDisplay=getArticleDisplay(groupId,articleId,templateId,viewMode,languageId,page,xmlRequest,themeDisplay);
    if ((articleDisplay != null) && (articleDisplay.isCacheable()) && (!themeDisplay.isLifecycleAction())&& (!themeDisplay.isLifecycleResource())) {
      MultiVMPoolUtil.put(cache,key,articleDisplay);
    }
  }
  try {
    if ((PropsValues.JOURNAL_ARTICLE_VIEW_PERMISSION_CHECK_ENABLED) && (articleDisplay != null) && (themeDisplay != null)&& (!JournalArticlePermission.contains(themeDisplay.getPermissionChecker(),groupId,articleId,ActionKeys.VIEW))) {
      articleDisplay=null;
    }
  }
 catch (  Exception e) {
  }
  if (_log.isDebugEnabled()) {
    _log.debug("getDisplay for {" + groupId + ", "+ articleId+ ", "+ templateId+ ", "+ viewMode+ ", "+ languageId+ ", "+ page+ "} takes "+ stopWatch.getTime()+ " ms");
  }
  return articleDisplay;
}
