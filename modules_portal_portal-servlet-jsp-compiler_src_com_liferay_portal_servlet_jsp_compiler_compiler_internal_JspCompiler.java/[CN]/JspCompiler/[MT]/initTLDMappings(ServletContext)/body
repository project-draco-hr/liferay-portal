{
  Map<String,String[]> tldMappings=(Map<String,String[]>)servletContext.getAttribute(Constants.JSP_TLD_URI_TO_LOCATION_MAP);
  if (tldMappings != null) {
    return;
  }
  tldMappings=new HashMap<>();
  ServiceReference<SAXParserFactory> saxParserFactoryServiceReference=_bundleContext.getServiceReference(SAXParserFactory.class);
  SAXParserFactory saxParserFactory=_bundleContext.getService(saxParserFactoryServiceReference);
  saxParserFactory.setNamespaceAware(false);
  saxParserFactory.setValidating(false);
  saxParserFactory.setXIncludeAware(false);
  try {
    SAXParser saxParser=saxParserFactory.newSAXParser();
    collectTLDMappings(saxParser,tldMappings,_jspBundle);
    collectTLDMappings(saxParser,tldMappings,_bundle);
  }
 catch (  Exception e) {
    _logger.log(Logger.LOG_ERROR,e.getMessage(),e);
  }
  Map<String,String> map=(Map<String,String>)servletContext.getAttribute("jsp.taglib.mappings");
  if (map != null) {
    for (    Map.Entry<String,String> entry : map.entrySet()) {
      tldMappings.put(entry.getKey(),new String[]{entry.getValue(),null});
    }
  }
  servletContext.setAttribute(Constants.JSP_TLD_URI_TO_LOCATION_MAP,tldMappings);
}
