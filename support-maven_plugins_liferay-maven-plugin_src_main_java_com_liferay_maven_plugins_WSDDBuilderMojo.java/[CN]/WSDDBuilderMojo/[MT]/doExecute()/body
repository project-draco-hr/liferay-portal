{
  String _portletShortName=null;
  String _outputPath=resourcesDir;
  String _packagePath=null;
  if (!FileUtil.exists(serverConfigFileName)) {
    ClassLoader classLoader=getClass().getClassLoader();
    String serverConfigContent=StringUtil.read(classLoader,"com/liferay/portal/tools/dependencies/server-config.wsdd");
    FileUtil.write(serverConfigFileName,serverConfigContent);
  }
  Document doc=SAXReaderUtil.read(new File(serviceFileName),true);
  Element root=doc.getRootElement();
  String packagePath=root.attributeValue("package-path");
  Element portlet=root.element("portlet");
  Element namespace=root.element("namespace");
  if (portlet != null) {
    _portletShortName=portlet.attributeValue("short-name");
  }
 else {
    _portletShortName=namespace.getText();
  }
  _outputPath+="/" + StringUtil.replace(packagePath,".","/") + "/service/http";
  _packagePath=packagePath;
  List<Element> entities=root.elements("entity");
  Iterator<Element> itr=entities.iterator();
  while (itr.hasNext()) {
    Element entity=itr.next();
    String entityName=entity.attributeValue("name");
    boolean remoteService=GetterUtil.getBoolean(entity.attributeValue("remote-service"),true);
    if (remoteService) {
      String className=_packagePath + ".service.http." + entityName+ "ServiceSoap";
      String serviceName=StringUtil.replace(_portletShortName," ","_");
      if (!portalWsdd) {
        serviceName="Plugin_" + serviceName;
      }
 else {
        if (!_portletShortName.equals("Portal")) {
          serviceName="Portlet_" + serviceName;
        }
      }
      serviceName+=("_" + entityName + "Service");
      String[] wsdds=Java2WsddTask.generateWsdd(className,serviceName);
      FileUtil.write(new File(_outputPath + "/" + entityName+ "Service_deploy.wsdd"),wsdds[0],true);
      FileUtil.write(new File(_outputPath + "/" + entityName+ "Service_undeploy.wsdd"),wsdds[1],true);
      WSDDMerger.merge(_outputPath + "/" + entityName+ "Service_deploy.wsdd",serverConfigFileName);
    }
  }
}
