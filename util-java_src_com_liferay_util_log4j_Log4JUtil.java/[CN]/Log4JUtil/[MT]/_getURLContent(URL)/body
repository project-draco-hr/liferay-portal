{
  Map<String,String> variables=new HashMap<String,String>();
  variables.put("liferay.home",PropsUtil.get(PropsKeys.LIFERAY_HOME));
  String urlContent=null;
  InputStream inputStream=null;
  try {
    inputStream=url.openStream();
    byte[] bytes=FileUtil.getBytes(inputStream);
    urlContent=new String(bytes,StringPool.UTF8);
  }
 catch (  Exception e) {
    e.printStackTrace();
    return null;
  }
 finally {
    StreamUtil.cleanUp(inputStream);
  }
  for (  Map.Entry<String,String> variable : variables.entrySet()) {
    urlContent=urlContent.replaceAll("@" + variable.getKey() + "@",variable.getValue());
  }
  if (ServerDetector.getServerId() != null) {
    return urlContent;
  }
  int x=urlContent.indexOf("<appender name=\"FILE\"");
  int y=urlContent.indexOf("</appender>",x);
  if (y != -1) {
    y=urlContent.indexOf("<",y + 1);
  }
  if ((x != -1) && (y != -1)) {
    urlContent=urlContent.substring(0,x) + urlContent.substring(y);
  }
  urlContent=StringUtil.replace(urlContent,"<appender-ref ref=\"FILE\" />",StringPool.BLANK);
  return urlContent;
}
