{
  super(req);
  _config=config;
  _renderReq=renderReq;
  _renderRes=renderRes;
  _portletConfig=portletConfig;
  StringBuilder sb=new StringBuilder();
  int pos=phpURI.indexOf(StringPool.QUESTION);
  if (pos != -1) {
    _path=phpURI.substring(0,pos);
    sb.append(phpURI.substring(pos + 1));
  }
 else {
    _path=phpURI;
  }
  if (GetterUtil.getBoolean(portletConfig.getInitParameter("add-portlet-params"),true)) {
    sb.append(StringPool.AMPERSAND);
    sb.append("portlet_namespace");
    sb.append(StringPool.EQUAL);
    sb.append(_renderRes.getNamespace());
    sb.append(StringPool.AMPERSAND);
    sb.append("portlet_name");
    sb.append(StringPool.EQUAL);
    sb.append(_portletConfig.getPortletName());
  }
  _queryString=sb.toString();
  req.setAttribute(JavaConstants.JAVAX_SERVLET_INCLUDE_QUERY_STRING,getQueryString());
  req.setAttribute(JavaConstants.JAVAX_SERVLET_INCLUDE_PATH_INFO,getPathInfo());
  req.setAttribute(JavaConstants.JAVAX_SERVLET_INCLUDE_REQUEST_URI,getRequestURI());
  req.setAttribute(JavaConstants.JAVAX_SERVLET_INCLUDE_SERVLET_PATH,_path);
}
