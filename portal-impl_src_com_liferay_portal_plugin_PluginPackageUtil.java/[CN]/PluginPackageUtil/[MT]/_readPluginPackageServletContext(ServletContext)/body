{
  String servletContextName=servletContext.getServletContextName();
  if (_log.isInfoEnabled()) {
    if (servletContextName == null) {
      _log.info("Reading plugin package for the root context");
    }
 else {
      _log.info("Reading plugin package for " + servletContextName);
    }
  }
  PluginPackage pluginPackage=null;
  String xml=HttpUtil.URLtoString(servletContext.getResource("/WEB-INF/liferay-plugin-package.xml"));
  if (xml != null) {
    pluginPackage=_readPluginPackageXml(xml);
  }
 else {
    String propertiesString=HttpUtil.URLtoString(servletContext.getResource("/WEB-INF/liferay-plugin-package.properties"));
    if (propertiesString != null) {
      if (_log.isDebugEnabled()) {
        _log.debug("Reading plugin package from " + "liferay-plugin-package.properties");
      }
      Properties properties=PropertiesUtil.load(propertiesString);
      String displayName=servletContextName;
      if (displayName.startsWith(StringPool.SLASH)) {
        displayName=displayName.substring(1);
      }
      pluginPackage=_readPluginPackageProperties(displayName,properties);
    }
    if (pluginPackage == null) {
      if (_log.isDebugEnabled()) {
        _log.debug("Reading plugin package from MANIFEST.MF");
      }
      pluginPackage=_readPluginPackageServletManifest(servletContext);
    }
  }
  pluginPackage.setContext(servletContextName);
  return pluginPackage;
}
