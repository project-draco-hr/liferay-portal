{
  PluginPackage installedPluginPackage=_installedPluginPackages.getLatestPluginPackage(pluginPackage.getGroupId(),pluginPackage.getArtifactId());
  String status=null;
  String installedVersion=null;
  if (installedPluginPackage == null) {
    status=PluginPackageImpl.STATUS_NOT_INSTALLED;
  }
 else {
    installedVersion=installedPluginPackage.getVersion();
    if (installedPluginPackage.isLaterVersionThan(pluginPackage)) {
      status=PluginPackageImpl.STATUS_NEWER_VERSION_INSTALLED;
    }
 else     if (installedPluginPackage.isPreviousVersionThan(pluginPackage)) {
      status=PluginPackageImpl.STATUS_OLDER_VERSION_INSTALLED;
    }
 else {
      status=PluginPackageImpl.STATUS_SAME_VERSION_INSTALLED;
    }
  }
  try {
    PluginPackageIndexer.updatePluginPackage(pluginPackage.getModuleId(),pluginPackage.getName(),pluginPackage.getVersion(),pluginPackage.getAuthor(),pluginPackage.getTypes(),pluginPackage.getTags(),pluginPackage.getLicenses(),pluginPackage.getLiferayVersions(),pluginPackage.getShortDescription(),pluginPackage.getLongDescription(),pluginPackage.getChangeLog(),pluginPackage.getPageURL(),pluginPackage.getRepositoryURL(),status,installedVersion);
  }
 catch (  Exception e) {
    _log.error("Error reindexing " + pluginPackage.getModuleId(),e);
  }
}
