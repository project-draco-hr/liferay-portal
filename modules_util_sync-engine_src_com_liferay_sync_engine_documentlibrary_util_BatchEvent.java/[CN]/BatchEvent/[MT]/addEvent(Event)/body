{
  if (!PropsValues.SYNC_BATCH_EVENTS_ENABLED) {
    return false;
  }
  try {
    Map<String,Object> parameters=event.getParameters();
    SyncFile syncFile=(SyncFile)parameters.get("syncFile");
    String zipFileId=syncFile.getSyncFileId() + "_" + System.currentTimeMillis();
    Path deltaFilePath=(Path)parameters.get("deltaFilePath");
    Path filePath=(Path)parameters.get("filePath");
    if (deltaFilePath != null) {
      if (!addFile(deltaFilePath,zipFileId)) {
        return false;
      }
    }
 else     if (filePath != null) {
      if (!addFile(filePath,zipFileId)) {
        return false;
      }
    }
    parameters.put("urlPath",event.getURLPath());
    parameters.put("zipFileId",zipFileId);
    parameters=new HashMap<String,Object>(parameters);
    parameters.remove("deltaFilePath");
    parameters.remove("filePath");
    parameters.remove("syncFile");
    _batchParameters.add(parameters);
    _eventCount++;
    _handlers.put(zipFileId,event.getHandler());
    if ((_eventCount >= PropsValues.SYNC_BATCH_EVENTS_MAX_COUNT) || (_totalFileSize >= PropsValues.SYNC_BATCH_EVENTS_MAX_TOTAL_FILE_SIZE)) {
      fireBatchEvent();
    }
    return true;
  }
 catch (  IOException ioe) {
    _logger.debug(ioe.getMessage(),ioe);
    return false;
  }
}
