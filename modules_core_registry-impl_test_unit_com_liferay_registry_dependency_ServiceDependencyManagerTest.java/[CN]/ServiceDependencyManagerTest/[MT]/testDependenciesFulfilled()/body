{
  Registry registry=RegistryUtil.getRegistry();
  registry.registerService(TestInterface1.class,new TestInstance1());
  registry.registerService(TestInterface2.class,new TestInstance2());
  ServiceDependencyManager serviceDependencyManager=new ServiceDependencyManager();
  final Set<Boolean> completion=new HashSet<>();
  serviceDependencyManager.addServiceDependencyListener(new ServiceDependencyListener(){
    @Override public void dependenciesFulfilled(){
      completion.add(true);
    }
    @Override public void destroy(){
    }
  }
);
  serviceDependencyManager.registerDependencies(TestInterface2.class);
}
