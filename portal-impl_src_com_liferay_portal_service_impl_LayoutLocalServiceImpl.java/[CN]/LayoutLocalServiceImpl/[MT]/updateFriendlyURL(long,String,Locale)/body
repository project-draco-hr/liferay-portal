{
  Date now=new Date();
  Layout layout=layoutPersistence.findByPrimaryKey(plid);
  friendlyURL=layoutLocalServiceHelper.getFriendlyURL(layout.getGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),StringPool.BLANK,friendlyURL);
  layoutLocalServiceHelper.validateFriendlyURL(layout.getGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),friendlyURL);
  layoutFriendlyURLLocalService.updateLayoutFriendlyURL(layout.getCompanyId(),layout.getGroupId(),layout.getPlid(),layout.isPrivateLayout(),friendlyURL,LocaleUtil.toLanguageId(locale),new ServiceContext());
  layout.setModifiedDate(now);
  if (locale == LocaleUtil.getDefault()) {
    layout.setFriendlyURL(friendlyURL);
  }
  layoutPersistence.update(layout);
  return layout;
}
