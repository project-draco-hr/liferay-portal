{
  try {
    XStream xStream=new XStream();
    Map commentsMap=context.getComments();
    Iterator<String> itr=commentsMap.keySet().iterator();
    while (itr.hasNext()) {
      String key=itr.next();
      String[] comment=key.split(StringPool.POUND);
      Element el=root.addElement("comments");
      el.addAttribute("class-name",comment[0]);
      el.addAttribute("class-pk",comment[1]);
      List messages=(List)commentsMap.get(key);
      String xml=xStream.toXML(messages);
      Document tempDoc=PortalUtil.readDocumentFromXML(xml);
      el.content().add(tempDoc.getRootElement().createCopy());
    }
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
