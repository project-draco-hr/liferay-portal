{
  Layout parentLayout=null;
  if (layout instanceof VirtualLayout) {
    VirtualLayout virtualLayout=(VirtualLayout)layout;
    Layout sourceLayout=virtualLayout.getSourceLayout();
    parentLayout=getLayout(sourceLayout.getGroupId(),sourceLayout.isPrivateLayout(),sourceLayout.getParentLayoutId());
    parentLayout=new VirtualLayout(parentLayout,layout.getGroup());
  }
 else {
    parentLayout=getLayout(layout.getGroupId(),layout.isPrivateLayout(),layout.getParentLayoutId());
  }
  return parentLayout;
}
