{
  parentLayoutId=helper.getParentLayoutId(groupId,privateLayout,parentLayoutId);
  helper.validateParentLayoutId(groupId,privateLayout,layoutId,parentLayoutId);
  Date now=new Date();
  Layout layout=layoutPersistence.findByG_P_L(groupId,privateLayout,layoutId);
  if (parentLayoutId != layout.getParentLayoutId()) {
    int priority=helper.getNextPriority(groupId,privateLayout,parentLayoutId,layout.getSourcePrototypeLayoutUuid(),-1);
    layout.setPriority(priority);
  }
  layout.setModifiedDate(now);
  layout.setParentLayoutId(parentLayoutId);
  layoutPersistence.update(layout,false);
  return layout;
}
