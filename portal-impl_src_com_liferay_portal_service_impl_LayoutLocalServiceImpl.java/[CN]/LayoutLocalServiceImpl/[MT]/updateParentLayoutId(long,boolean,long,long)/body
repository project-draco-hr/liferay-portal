{
  parentLayoutId=getParentLayoutId(groupId,privateLayout,parentLayoutId);
  validateParentLayoutId(groupId,privateLayout,layoutId,parentLayoutId);
  Date now=new Date();
  Layout layout=layoutPersistence.findByG_P_L(groupId,privateLayout,layoutId);
  LayoutSet layoutSet=layoutSetLocalService.getLayoutSet(groupId,privateLayout);
  if (parentLayoutId != layout.getParentLayoutId()) {
    int priority=getNextPriority(layoutSet,parentLayoutId,layout.getSourcePrototypeLayoutUuid(),-1);
    layout.setPriority(priority);
  }
  layout.setModifiedDate(now);
  layout.setParentLayoutId(parentLayoutId);
  layoutPersistence.update(layout,false);
  return layout;
}
