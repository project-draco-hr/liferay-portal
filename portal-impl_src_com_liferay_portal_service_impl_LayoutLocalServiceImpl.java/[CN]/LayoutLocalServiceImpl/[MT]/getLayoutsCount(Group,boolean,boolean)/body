{
  LayoutSet layoutSet=layoutSetPersistence.findByG_P(group.getGroupId(),privateLayout);
  int count=layoutSet.getPageCount();
  if (!group.isUser() || !includeUserGroups) {
    return count;
  }
  long[] userGroupIds=userPersistence.getUserGroupPrimaryKeys(group.getClassPK());
  if (userGroupIds.length != 0) {
    long userGroupClassNameId=classNameLocalService.getClassNameId(UserGroup.class);
    for (    long userGroupId : userGroupIds) {
      Group userGroupGroup=groupPersistence.findByC_C_C(group.getCompanyId(),userGroupClassNameId,userGroupId);
      layoutSet=layoutSetPersistence.findByG_P(userGroupGroup.getGroupId(),privateLayout);
      count+=layoutSet.getPageCount();
    }
  }
  return count;
}
