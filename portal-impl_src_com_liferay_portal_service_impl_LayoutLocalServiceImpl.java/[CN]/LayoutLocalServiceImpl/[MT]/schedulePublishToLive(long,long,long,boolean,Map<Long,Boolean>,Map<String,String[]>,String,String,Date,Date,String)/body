{
  try {
    String command=StringPool.BLANK;
    if (scope.equals("all-pages")) {
      command=LayoutsPublisherRequest.COMMAND_ALL_PAGES;
    }
 else     if (scope.equals("selected-pages")) {
      command=LayoutsPublisherRequest.COMMAND_SELECTED_PAGES;
    }
    LayoutsPublisherRequest layoutsPublisherRequest=new LayoutsPublisherRequest(command,userId,stagingGroupId,liveGroupId,privateLayout,layoutIdMap,parameterMap);
    SchedulerRequest schedulerRequest=new SchedulerRequest(SchedulerRequest.COMMAND_REGISTER,null,getSchedulerGroupName(liveGroupId),cronText,startDate,endDate,description,DestinationNames.LAYOUTS_PUBLISHER,JSONUtil.serialize(layoutsPublisherRequest));
    MessageBusUtil.sendMessage(DestinationNames.SCHEDULER,JSONUtil.serialize(schedulerRequest));
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
