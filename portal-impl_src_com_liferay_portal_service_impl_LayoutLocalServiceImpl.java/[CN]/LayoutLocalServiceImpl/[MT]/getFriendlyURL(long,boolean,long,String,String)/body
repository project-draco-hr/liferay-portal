{
  friendlyURL=getFriendlyURL(friendlyURL);
  if (Validator.isNull(friendlyURL)) {
    friendlyURL=StringPool.SLASH + getFriendlyURL(friendlyName);
    String originalFriendlyURL=friendlyURL;
    for (int i=1; ; i++) {
      try {
        validateFriendlyURL(groupId,privateLayout,layoutId,friendlyURL);
        break;
      }
 catch (      LayoutFriendlyURLException lfurle) {
        int type=lfurle.getType();
        if (type == LayoutFriendlyURLException.DUPLICATE) {
          friendlyURL=originalFriendlyURL + i;
        }
 else {
          friendlyURL=StringPool.SLASH + layoutId;
          break;
        }
      }
    }
  }
  return friendlyURL;
}
