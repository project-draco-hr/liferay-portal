{
  if (PropsValues.LAYOUT_SCOPE_GROUP_FINDER_ENABLED) {
    return layoutFinder.findByScopeGroup(parentGroupId);
  }
  Group parentGroup=groupPersistence.findByPrimaryKey(parentGroupId);
  if (PropsValues.LAYOUT_SCOPE_GROUP_FINDER_THRESHOLD >= 0) {
    int count=groupLocalService.getGroupsCount(parentGroup.getCompanyId(),Layout.class.getName(),parentGroupId);
    if (count >= PropsValues.LAYOUT_SCOPE_GROUP_FINDER_THRESHOLD) {
      return layoutFinder.findByScopeGroup(parentGroupId);
    }
  }
  List<Group> groups=groupLocalService.getGroups(parentGroup.getCompanyId(),Layout.class.getName(),parentGroupId);
  List<Layout> layouts=new ArrayList<>(groups.size());
  for (  Group group : groups) {
    layouts.add(layoutPersistence.findByPrimaryKey(group.getClassPK()));
  }
  return layouts;
}
