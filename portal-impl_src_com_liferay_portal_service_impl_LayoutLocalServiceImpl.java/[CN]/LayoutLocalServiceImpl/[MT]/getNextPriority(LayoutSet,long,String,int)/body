{
  try {
    int priority=defaultValue;
    if (priority < 0) {
      Layout layout=layoutPersistence.findByG_P_P_First(layoutSet.getGroupId(),layoutSet.isPrivateLayout(),parentLayoutId,new LayoutPriorityComparator(false));
      priority=layout.getPriority() + 1;
    }
    if (Validator.isNotNull(layoutSet.getLayoutSetPrototypeUuid()) && Validator.isNull(sourcePrototypeLayoutUuid) && (priority < LayoutConstants.PRIORITY_BUFFER)) {
      priority=priority + LayoutConstants.PRIORITY_BUFFER;
    }
    return priority;
  }
 catch (  NoSuchLayoutException nsle) {
    return 0;
  }
}
