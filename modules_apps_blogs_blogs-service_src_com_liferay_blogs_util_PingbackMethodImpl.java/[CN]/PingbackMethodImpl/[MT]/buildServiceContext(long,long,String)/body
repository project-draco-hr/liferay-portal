{
  ServiceContext serviceContext=new ServiceContext();
  String pingbackUserName=LanguageUtil.get(LocaleUtil.getSiteDefault(),"pingback");
  serviceContext.setAttribute("pingbackUserName",pingbackUserName);
  StringBundler sb=new StringBundler(5);
  String layoutFullURL=PortalUtil.getLayoutFullURL(groupId,PortletKeys.BLOGS);
  sb.append(layoutFullURL);
  sb.append(Portal.FRIENDLY_URL_SEPARATOR);
  Portlet portlet=PortletLocalServiceUtil.getPortletById(companyId,PortletKeys.BLOGS);
  sb.append(portlet.getFriendlyURLMapping());
  sb.append(StringPool.SLASH);
  sb.append(urlTitle);
  serviceContext.setAttribute("redirect",sb.toString());
  serviceContext.setLayoutFullURL(layoutFullURL);
  return serviceContext;
}
