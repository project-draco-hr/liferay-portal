{
  ServiceContext serviceContext=new ServiceContext();
  String pingbackUserName=LanguageUtil.get(LocaleUtil.getSiteDefault(),"pingback");
  serviceContext.setAttribute("pingbackUserName",pingbackUserName);
  StringBundler sb=new StringBundler(5);
  String portletId=PortletProviderUtil.getPortletId(BlogsEntry.class.getName(),PortletProvider.Action.VIEW);
  if (Validator.isNull(portletId)) {
    return serviceContext;
  }
  String layoutFullURL=PortalUtil.getLayoutFullURL(groupId,portletId);
  sb.append(layoutFullURL);
  sb.append(Portal.FRIENDLY_URL_SEPARATOR);
  Portlet portlet=_portletLocalService.getPortletById(companyId,portletId);
  sb.append(portlet.getFriendlyURLMapping());
  sb.append(StringPool.SLASH);
  sb.append(urlTitle);
  serviceContext.setAttribute("redirect",sb.toString());
  serviceContext.setLayoutFullURL(layoutFullURL);
  return serviceContext;
}
