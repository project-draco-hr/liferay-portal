{
  SessionFactory sessionFactory=(SessionFactory)PortalBeanLocatorUtil.locate("liferaySessionFactory");
  Session session=null;
  try {
    session=sessionFactory.openSession();
    SQLQuery q=session.createSQLQuery(sql);
    List<?> result=QueryUtil.list(q,sessionFactory.getDialect(),offset,offset + limit);
    Assert.assertNotNull(result);
    Assert.assertEquals(limit,result.size());
  }
  finally {
    sessionFactory.closeSession(session);
  }
}
