{
  User user=PortalUtil.getUser(portletRequest);
  if (user == null) {
    return userName;
  }
  if (Validator.isNull(userName) || userName.equals("@user_id@")) {
    userName=portletRequest.getRemoteUser();
  }
 else   if (userName.equals("@email_address@")) {
    userName=user.getEmailAddress();
  }
 else   if (userName.equals("@screen_name@")) {
    userName=user.getScreenName();
  }
  return userName;
}
