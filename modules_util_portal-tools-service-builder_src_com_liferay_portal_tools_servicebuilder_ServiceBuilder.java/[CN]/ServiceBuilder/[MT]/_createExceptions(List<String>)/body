{
  for (int i=0; i < _ejbList.size(); i++) {
    Entity entity=_ejbList.get(i);
    if (!_isTargetEntity(entity)) {
      continue;
    }
    if (entity.hasColumns()) {
      exceptions.add(getNoSuchEntityException(entity));
    }
  }
  for (  String exception : exceptions) {
    String dirName=StringPool.BLANK;
    if (_osgiModule) {
      dirName="exception/";
    }
    File exceptionFile=new File(_serviceOutputPath + "/" + dirName+ exception+ "Exception.java");
    if (!exceptionFile.exists()) {
      Map<String,Object> context=_getContext();
      context.put("exception",exception);
      String content=_processTemplate(_tplException,context);
      if (exception.startsWith("NoSuch")) {
        content=StringUtil.replace(content,"PortalException","NoSuchModelException");
        content=StringUtil.replace(content,"kernel.exception.NoSuchModelException","NoSuchModelException");
      }
      content=StringUtil.replace(content,"\r\n","\n");
      writeFileRaw(exceptionFile,content);
    }
    if (exception.startsWith("NoSuch")) {
      String content=FileUtils.readFileToString(exceptionFile);
      if (!content.contains("NoSuchModelException")) {
        content=StringUtil.replace(content,"PortalException","NoSuchModelException");
        content=StringUtil.replace(content,"kernel.exception.NoSuchModelException","NoSuchModelException");
        writeFileRaw(exceptionFile,content);
      }
    }
  }
}
