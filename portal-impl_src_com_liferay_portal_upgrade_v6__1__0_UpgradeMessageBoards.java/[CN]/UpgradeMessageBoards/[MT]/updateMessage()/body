{
  try (LoggingTimer loggingTimer=new LoggingTimer()){
    try (PreparedStatement ps=connection.prepareStatement("select messageId, body from MBMessage where (body like " + "'%<3%') or (body like '%>_>%') or (body like '%<_<%'" + ")");ResultSet rs=ps.executeQuery()){
      while (rs.next()) {
        long messageId=rs.getLong("messageId");
        String body=rs.getString("body");
        body=StringUtil.replace(body,new String[]{"<3",">_>","<_<"},new String[]{":love:",":glare:",":dry:"});
        updateMessageBody(messageId,body);
      }
    }
     StringBundler sb=new StringBundler(4);
    sb.append("select messageFlag.messageId as messageId from ");
    sb.append("MBMessageFlag messageFlag inner join MBMessage ");
    sb.append("message on messageFlag.messageId = message.messageId ");
    sb.append("where message.parentMessageId != 0 and flag = 3");
    try (PreparedStatement ps=connection.prepareStatement(sb.toString());ResultSet rs=ps.executeQuery()){
      while (rs.next()) {
        long messageId=rs.getLong("messageId");
        updateMessageAnswer(messageId,true);
      }
    }
   }
 }
