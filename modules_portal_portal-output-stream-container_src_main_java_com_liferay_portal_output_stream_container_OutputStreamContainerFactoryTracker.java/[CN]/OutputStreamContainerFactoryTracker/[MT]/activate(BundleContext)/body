{
  _logger=new org.apache.felix.utils.log.Logger(bundleContext);
  try {
    Logger rootLogger=Logger.getRootLogger();
    _writerAppender=new WriterAppender(new SimpleLayout(),new ThreadLocalWriter());
    _writerAppender.setThreshold(Level.ALL);
    _writerAppender.activateOptions();
    rootLogger.addAppender(_writerAppender);
    _outputStreamContainerFactories=ServiceTrackerMapFactory.openSingleValueMap(bundleContext,OutputStreamContainerFactory.class,"name");
    OutputStreamContainerFactory consoleOutputStreamContainerFactory=new ConsoleOutputStreamContainerFactory();
    Dictionary<String,Object> properties=new Hashtable<>();
    properties.put("name","console");
    properties.put("service.ranking",100);
    _serviceRegistration=bundleContext.registerService(OutputStreamContainerFactory.class,consoleOutputStreamContainerFactory,properties);
  }
 catch (  InvalidSyntaxException ise) {
    throw new IllegalStateException(ise);
  }
}
