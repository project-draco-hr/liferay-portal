{
  if (PACLTestRuleThreadLocal.isDummyDataSourceEnabled()) {
    LazyConnectionDataSourceProxy lazyConnectionDataSourceProxy=(LazyConnectionDataSourceProxy)InfrastructureUtil.getDataSource();
    ReflectionTestUtil.setFieldValue(lazyConnectionDataSourceProxy.getTargetDataSource(),"_dataSource",_originalDataSource);
  }
  HotDeployUtil.fireUndeployEvent(hotDeployEvent);
  ClassLoaderPool.register(hotDeployEvent.getServletContextName(),hotDeployEvent.getContextClassLoader());
  PortletClassLoaderUtil.setServletContextName(hotDeployEvent.getServletContextName());
  try {
    portletContextLoaderListener.contextDestroyed(new ServletContextEvent(hotDeployEvent.getServletContext()));
  }
  finally {
    ClassLoaderPool.unregister(hotDeployEvent.getServletContextName());
    PortletClassLoaderUtil.setServletContextName(null);
  }
}
