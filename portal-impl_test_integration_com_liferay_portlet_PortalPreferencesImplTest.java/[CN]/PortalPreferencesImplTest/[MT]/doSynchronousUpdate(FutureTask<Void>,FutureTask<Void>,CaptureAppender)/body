{
  SynchronousInvocationHandler.synchronize(true);
  Thread thread1=new Thread(futureTask1);
  thread1.start();
  Thread thread2=new Thread(futureTask2);
  thread2.start();
  futureTask1.get();
  futureTask2.get();
  List<LoggingEvent> loggingEvents=captureAppender.getLoggingEvents();
  Assert.assertEquals(1,loggingEvents.size());
  LoggingEvent loggingEvent=loggingEvents.get(0);
  Assert.assertEquals("Application exception overridden by commit exception",loggingEvent.getMessage());
  FinderCacheUtil.clearLocalCache();
  EntityCacheUtil.clearLocalCache();
}
