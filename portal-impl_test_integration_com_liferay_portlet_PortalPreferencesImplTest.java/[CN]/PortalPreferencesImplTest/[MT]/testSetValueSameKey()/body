{
  FutureTask<Void> futureTask1=new FutureTask<>(new Callable<Void>(){
    @Override public Void call(){
      PortalPreferences portalPreferences=PortletPreferencesFactoryUtil.getPortalPreferences(PortletKeys.PREFS_OWNER_ID_DEFAULT,true);
      portalPreferences.setValue(_NAMESPACE,_KEY_1,_VALUE_1);
      return null;
    }
  }
);
  FutureTask<Void> futureTask2=new FutureTask<>(new Callable<Void>(){
    @Override public Void call(){
      PortalPreferences portalPreferences=PortletPreferencesFactoryUtil.getPortalPreferences(PortletKeys.PREFS_OWNER_ID_DEFAULT,true);
      portalPreferences.setValue(_NAMESPACE,_KEY_1,_VALUE_2);
      return null;
    }
  }
);
  try (CaptureAppender captureAppender=Log4JLoggerTestUtil.configureLog4JLogger(DefaultTransactionExecutor.class.getName(),Level.ERROR)){
    updateSynchronously(futureTask1,futureTask2,captureAppender);
    PortalPreferences portalPreferences=PortletPreferencesFactoryUtil.getPortalPreferences(PortletKeys.PREFS_OWNER_ID_DEFAULT,true);
    String value=portalPreferences.getValue(_NAMESPACE,_KEY_1);
    Assert.assertTrue(value.equals(_VALUE_1) || value.equals(_VALUE_2));
  }
 }
