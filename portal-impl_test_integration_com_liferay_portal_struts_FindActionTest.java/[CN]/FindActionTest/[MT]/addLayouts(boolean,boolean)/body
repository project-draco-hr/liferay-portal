{
  _group=GroupTestUtil.addGroup();
  _blogLayout=LayoutTestUtil.addLayout(_group);
  _assetLayout=LayoutTestUtil.addLayout(_group);
  if (portletExists) {
    String portletId=PortletProviderUtil.getPortletId(BlogsEntry.class.getName(),PortletProvider.Action.VIEW);
    LayoutTestUtil.addPortletToLayout(_blogLayout,portletId);
  }
  Map<String,String[]> preferenceMap=new HashMap<>();
  preferenceMap.put("assetLinkBehavior",new String[]{"viewInPortlet"});
  PortletInstance portletInstance=new PortletInstance(com.liferay.portlet.util.test.PortletKeys.TEST);
  _testPortletId=portletInstance.getPortletInstanceKey();
  LayoutTestUtil.addPortletToLayout(TestPropsValues.getUserId(),_assetLayout,_testPortletId,"column-1",preferenceMap);
  Group group=_group;
  if (blogEntryWithDifferentGroup) {
    group=GroupTestUtil.addGroup();
  }
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(group.getGroupId(),TestPropsValues.getUserId());
  _blogsEntry=BlogsEntryLocalServiceUtil.addEntry(TestPropsValues.getUserId(),RandomTestUtil.randomString(),RandomTestUtil.randomString(),serviceContext);
}
