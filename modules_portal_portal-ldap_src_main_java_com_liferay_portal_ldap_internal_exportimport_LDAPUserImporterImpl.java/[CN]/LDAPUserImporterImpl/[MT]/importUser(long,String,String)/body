{
  Collection<LDAPServerConfiguration> ldapServerConfigurations=_ldapServerConfigurationProvider.getConfigurations(companyId);
  for (  LDAPServerConfiguration ldapServerConfiguration : ldapServerConfigurations) {
    String providerUrl=ldapServerConfiguration.baseProviderURL();
    if (Validator.isNull(providerUrl)) {
      if (_log.isWarnEnabled()) {
        _log.warn("No providerUrl defined for: " + ldapServerConfiguration);
      }
      continue;
    }
    User user=importUser(ldapServerConfiguration.ldapServerId(),companyId,emailAddress,screenName);
    if (user != null) {
      return user;
    }
  }
  if (_log.isDebugEnabled()) {
    if (Validator.isNotNull(emailAddress)) {
      _log.debug("User with the email address " + emailAddress + " was not found in any LDAP servers");
    }
 else {
      _log.debug("User with the screen name " + screenName + " was not found in any LDAP servers");
    }
  }
  return null;
}
