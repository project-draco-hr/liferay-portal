{
  Map<String,Cookie> cookiesMap=new HashMap<>();
  HttpSession session=ServletUtil.getSession();
  Cookie[] sessionCookies=(Cookie[])session.getAttribute(WebKeys.COOKIES);
  if (sessionCookies != null) {
    for (    Cookie cookie : sessionCookies) {
      cookiesMap.put(cookie.getName(),cookie);
    }
  }
  HttpServletRequest request=ServletUtil.getRequest();
  Cookie[] forwardCookies=request.getCookies();
  if (forwardCookies != null) {
    for (    Cookie cookie : forwardCookies) {
      String cookieName=cookie.getName();
      if (!StringUtil.equalsIgnoreCase(cookieName,"cookie_support") && !StringUtil.equalsIgnoreCase(cookieName,"guest_language_id") && !StringUtil.equalsIgnoreCase(cookieName,"jsessionid")) {
        if (Validator.isNull(cookie.getDomain())) {
          cookie.setDomain(request.getServerName());
        }
        if (Validator.isNull(cookie.getPath())) {
          cookie.setPath(StringPool.SLASH);
        }
        cookiesMap.put(cookieName,cookie);
      }
    }
  }
  if (!cookiesMap.isEmpty()) {
    Collection<Cookie> cookiesCollection=cookiesMap.values();
    httpOptions.setCookies(cookiesCollection.toArray(new Cookie[0]));
  }
  String rawContent=HttpUtil.URLtoString(httpOptions);
  Cookie[] cookies=HttpUtil.getCookies();
  if (cookies != null) {
    session.setAttribute(WebKeys.COOKIES,cookies);
  }
  return rawContent;
}
