{
  List<Portlet> portlets=null;
  Layout layout=(Layout)_request.getAttribute(WebKeys.LAYOUT);
  if (layout.getType().equals(LayoutConstants.TYPE_PORTLET)) {
    LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
    try {
      portlets=layoutTypePortlet.getPortlets();
    }
 catch (    SystemException se) {
      throw new PortletWindowContextException(se);
    }
  }
  return portlets;
}
