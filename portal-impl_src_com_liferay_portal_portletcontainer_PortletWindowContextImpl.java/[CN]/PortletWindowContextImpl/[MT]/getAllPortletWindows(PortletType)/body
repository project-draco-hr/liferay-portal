{
  List<Portlet> portlets=null;
  List<Portlet> allPortlets=PortletLocalServiceUtil.getPortlets();
  if (allPortlets != null) {
    portlets=new ArrayList<Portlet>();
    for (    Portlet portlet : allPortlets) {
      if (portlet.getPortletApp().isWARFile() || portlet.isRemote()) {
        portlets.add(portlet);
      }
    }
  }
  return portlets;
}
