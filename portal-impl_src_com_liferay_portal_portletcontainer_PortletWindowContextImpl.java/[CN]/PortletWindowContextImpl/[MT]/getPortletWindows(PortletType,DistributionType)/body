{
  List<EntityID> entityIDs=new ArrayList<EntityID>();
  try {
    List<Portlet> portlets=null;
    if (distributionType.equals(DistributionType.ALL_PORTLETS)) {
      portlets=getAllPortletWindows(portletType);
    }
 else     if (distributionType.equals(DistributionType.ALL_PORTLETS_ON_PAGE)) {
      portlets=getAvailablePortletWindows(portletType);
    }
 else     if (distributionType.equals(DistributionType.VISIBLE_PORTLETS_ON_PAGE)) {
      portlets=getVisiblePortletWindows(portletType);
    }
    if (portlets != null) {
      for (      Portlet portlet : portlets) {
        EntityID entityID=WindowInvokerUtil.getEntityID(portlet);
        entityIDs.add(entityID);
      }
    }
  }
 catch (  PortletWindowContextException pre) {
    _log.error(pre);
  }
  return entityIDs;
}
