{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  if (!themeDisplay.isSignedIn() || !isTrashEnabled(themeDisplay.getScopeGroupId()) || !PortletPermissionUtil.hasControlPanelAccessPermission(themeDisplay.getPermissionChecker(),themeDisplay.getScopeGroupId(),PortletKeys.TRASH)) {
    return null;
  }
  Layout layout=themeDisplay.getLayout();
  PortletURL portletURL=PortalUtil.getControlPanelPortletURL(request,PortletKeys.TRASH,layout.getLayoutId(),PortletRequest.RENDER_PHASE);
  portletURL.setParameter("redirect",themeDisplay.getURLCurrent());
  return portletURL;
}
