{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  String portletId=PortletProviderUtil.getPortletId(TrashEntry.class.getName(),PortletProvider.Action.VIEW);
  if (!themeDisplay.isSignedIn() || !isTrashEnabled(themeDisplay.getScopeGroupId()) || !PortletPermissionUtil.hasControlPanelAccessPermission(themeDisplay.getPermissionChecker(),themeDisplay.getScopeGroupId(),portletId)) {
    return null;
  }
  Layout layout=themeDisplay.getLayout();
  PortletURL portletURL=PortalUtil.getControlPanelPortletURL(request,portletId,layout.getLayoutId(),PortletRequest.RENDER_PHASE);
  portletURL.setParameter("redirect",themeDisplay.getURLCurrent());
  return portletURL;
}
