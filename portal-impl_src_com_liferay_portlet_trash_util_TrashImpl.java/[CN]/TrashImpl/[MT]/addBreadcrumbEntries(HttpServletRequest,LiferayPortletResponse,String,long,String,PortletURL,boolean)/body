{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  PortletURL portletURL=PortletURLUtil.clone(containerModelURL,liferayPortletResponse);
  TrashHandler trashHandler=TrashHandlerRegistryUtil.getTrashHandler(className);
  List<ContainerModel> containerModels=trashHandler.getParentContainerModels(classPK);
  Collections.reverse(containerModels);
  for (  ContainerModel containerModel : containerModels) {
    TrashHandler containerModelTrashHandler=TrashHandlerRegistryUtil.getTrashHandler(containerModel.getModelClassName());
    if (checkInTrashContainers && !containerModelTrashHandler.isInTrash(containerModel.getContainerModelId())) {
      continue;
    }
    portletURL.setParameter(paramName,String.valueOf(containerModel.getContainerModelId()));
    String name=containerModel.getContainerModelName();
    if (containerModelTrashHandler.isInTrash(containerModel.getContainerModelId())) {
      name=TrashUtil.getOriginalTitle(name);
    }
    PortalUtil.addPortletBreadcrumbEntry(request,name,portletURL.toString());
  }
  TrashRenderer trashRenderer=trashHandler.getTrashRenderer(classPK);
  PortalUtil.addPortletBreadcrumbEntry(request,trashRenderer.getTitle(themeDisplay.getLocale()),null);
}
