{
  ThemeDisplay themeDisplay=(ThemeDisplay)_request.getAttribute(KBWebKeys.THEME_DISPLAY);
  PortletDisplay portletDisplay=themeDisplay.getPortletDisplay();
  String portletId=portletDisplay.getId();
  portletURL.setParameter("navItem",navItem);
  portletURL.setParameter("expanded",Boolean.TRUE.toString());
  if (_kbArticle == null) {
    portletURL.setParameter("mvcPath","/admin/view_suggestions.jsp");
  }
 else   if (Validator.isNull(_kbArticle.getUrlTitle()) || portletId.equals(KBPortletKeys.KNOWLEDGE_BASE_ADMIN)) {
    if (portletId.equals(KBPortletKeys.KNOWLEDGE_BASE_ADMIN)) {
      portletURL.setParameter("mvcPath",_templatePath + "/view_article.jsp");
    }
    portletURL.setParameter("resourceClassNameId",String.valueOf(_kbArticle.getClassNameId()));
    portletURL.setParameter("resourcePrimKey",String.valueOf(_kbArticle.getResourcePrimKey()));
  }
 else {
    portletURL.setParameter("urlTitle",_kbArticle.getUrlTitle());
    if (_kbArticle.getKbFolderId() != KBFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
      KBFolder kbFolder=KBFolderLocalServiceUtil.getKBFolder(_kbArticle.getKbFolderId());
      portletURL.setParameter("kbFolderUrlTitle",kbFolder.getUrlTitle());
    }
  }
  return portletURL.toString() + "#kbSuggestions";
}
