{
  ExpectedLogs expectedLogs=method.getAnnotation(ExpectedLogs.class);
  if (expectedLogs == null) {
    return;
  }
  try {
    loggingEvent:     for (    LoggingEvent loggingEvent : captureAppender.getLoggingEvents()) {
      String eventMessage=loggingEvent.getRenderedMessage();
      for (      ExpectedLog expectedLog : expectedLogs.expectedLogs()) {
        ExpectedType expectedType=expectedLog.expectedType();
        if (expectedType == ExpectedType.EXACT) {
          if (eventMessage.equals(expectedLog.expectedLog())) {
            continue loggingEvent;
          }
        }
 else         if (expectedType == ExpectedType.POSTFIX) {
          if (eventMessage.endsWith(expectedLog.expectedLog())) {
            continue loggingEvent;
          }
        }
 else         if (expectedType == ExpectedType.PREFIX) {
          if (eventMessage.startsWith(expectedLog.expectedLog())) {
            continue loggingEvent;
          }
        }
      }
      Assert.fail(eventMessage);
    }
  }
  finally {
    captureAppender.close();
  }
}
