{
  if (restrictionType != JournalFolderConstants.RESTRICTION_TYPE_DDM_STRUCTURES_AND_WORKFLOW) {
    ddmStructureIds=new long[0];
  }
  validateArticleDDMStructures(folderId,ddmStructureIds);
  JournalFolder folder=journalFolderPersistence.findByPrimaryKey(folderId);
  parentFolderId=getParentFolderId(folder,parentFolderId);
  if (mergeWithParentFolder && (folderId != parentFolderId)) {
    mergeFolders(folder,parentFolderId);
    return folder;
  }
  validateFolder(folderId,folder.getGroupId(),parentFolderId,name);
  folder.setModifiedDate(serviceContext.getModifiedDate(null));
  folder.setParentFolderId(parentFolderId);
  folder.setTreePath(folder.buildTreePath());
  folder.setName(name);
  folder.setDescription(description);
  folder.setRestrictionType(restrictionType);
  folder.setExpandoBridgeAttributes(serviceContext);
  journalFolderPersistence.update(folder);
  updateAsset(userId,folder,serviceContext.getAssetCategoryIds(),serviceContext.getAssetTagNames(),serviceContext.getAssetLinkEntryIds());
  if (ddmStructureIds != null) {
    updateFolderDDMStructures(folder,ddmStructureIds);
  }
  return folder;
}
