{
  JournalFolder folder=journalFolderPersistence.findByPrimaryKey(folderId);
  folder.setName(TrashUtil.getOriginalTitle(folder.getName()));
  journalFolderPersistence.update(folder);
  TrashEntry trashEntry=trashEntryLocalService.getEntry(JournalFolder.class.getName(),folderId);
  updateStatus(userId,folder,trashEntry.getStatus());
  List<Object> foldersAndArticles=journalFolderLocalService.getFoldersAndArticles(folder.getGroupId(),folder.getFolderId(),WorkflowConstants.STATUS_IN_TRASH);
  restoreDependentsFromTrash(foldersAndArticles,trashEntry.getEntryId());
  trashEntryLocalService.deleteEntry(JournalFolder.class.getName(),folder.getFolderId());
  JSONObject extraDataJSONObject=JSONFactoryUtil.createJSONObject();
  extraDataJSONObject.put("title",folder.getName());
  socialActivityLocalService.addActivity(userId,folder.getGroupId(),JournalFolder.class.getName(),folder.getFolderId(),SocialActivityConstants.TYPE_RESTORE_FROM_TRASH,extraDataJSONObject.toString(),0);
}
