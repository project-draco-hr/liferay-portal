{
  Set<Long> ddmStructureIds=SetUtil.fromArray(ddmStructureIdsArray);
  Set<Long> originalDDMStructureIds=getDDMStructureIds(ddmStructureRestrictionLocalService.getStructureRestrictions(JournalFolder.class.getName(),folder.getFolderId()));
  if (ddmStructureIds.equals(originalDDMStructureIds)) {
    return;
  }
  for (  Long ddmStructureId : ddmStructureIds) {
    if (!originalDDMStructureIds.contains(ddmStructureId)) {
      ddmStructureRestrictionLocalService.addStructureRestricion(JournalFolder.class.getName(),folder.getFolderId(),ddmStructureId);
    }
  }
  for (  Long originalDDMStructureId : originalDDMStructureIds) {
    if (!ddmStructureIds.contains(originalDDMStructureId)) {
      ddmStructureRestrictionLocalService.deleteStructureRestriction(JournalFolder.class.getName(),folder.getFolderId(),originalDDMStructureId);
    }
  }
}
