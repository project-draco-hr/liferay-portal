{
  try {
    Image image=new ImageImpl();
    image.setModifiedDate(fileEntry.getModifiedDate());
    InputStream is=null;
    if (smallImage) {
      is=ImageProcessor.getThumbnailAsStream(fileEntry.getFileVersion());
    }
 else {
      is=fileEntry.getContentStream();
    }
    byte[] bytes=FileUtil.getBytes(is);
    image.setTextObj(bytes);
    return image;
  }
 catch (  PortalException pe) {
    throw pe;
  }
catch (  SystemException se) {
    throw se;
  }
catch (  Exception e) {
    throw new SystemException(e);
  }
}
