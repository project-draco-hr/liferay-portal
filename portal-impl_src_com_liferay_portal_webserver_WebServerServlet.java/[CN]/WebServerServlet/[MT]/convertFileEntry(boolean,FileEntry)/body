{
  try {
    Image image=new ImageImpl();
    image.setModifiedDate(fileEntry.getModifiedDate());
    InputStream is=null;
    if (smallImage) {
      is=com.liferay.portlet.documentlibrary.util.ImageProcessorUtil.getThumbnailAsStream(fileEntry.getFileVersion(),ImageProcessorImpl.THUMBNAIL_INDEX_DEFAULT);
    }
 else {
      is=fileEntry.getContentStream();
    }
    byte[] bytes=FileUtil.getBytes(is);
    image.setTextObj(bytes);
    image.setType(fileEntry.getExtension());
    return image;
  }
 catch (  PortalException pe) {
    throw pe;
  }
catch (  SystemException se) {
    throw se;
  }
catch (  Exception e) {
    throw new SystemException(e);
  }
}
