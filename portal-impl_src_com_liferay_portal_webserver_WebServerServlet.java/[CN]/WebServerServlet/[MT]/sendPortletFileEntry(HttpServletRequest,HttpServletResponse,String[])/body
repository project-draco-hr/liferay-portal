{
  FileEntry fileEntry=getPortletFileEntry(request,pathArray);
  if (fileEntry == null) {
    return;
  }
  String fileName=HttpUtil.decodeURL(HtmlUtil.escape(pathArray[2]),true);
  if (fileEntry.isInTrash()) {
    fileName=TrashUtil.getOriginalTitle(fileName);
  }
  ServletResponseUtil.sendFile(request,response,fileName,fileEntry.getContentStream(),fileEntry.getSize(),fileEntry.getMimeType());
}
