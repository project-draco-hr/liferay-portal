{
  InjectionMetadata injectionMetadata=_injectionMetadataMap.get(clazz);
  if (injectionMetadata != null) {
    return injectionMetadata;
  }
synchronized (_injectionMetadataMap) {
    injectionMetadata=_injectionMetadataMap.get(clazz);
    if (injectionMetadata == null) {
      injectionMetadata=new InjectionMetadata(clazz);
      BeanReferenceCallback callback=new BeanReferenceCallback(_beanFactory,injectionMetadata,clazz);
      ReflectionUtils.doWithFields(clazz,callback);
      ReflectionUtils.doWithMethods(clazz,callback);
      _injectionMetadataMap.put(clazz,injectionMetadata);
    }
  }
  return injectionMetadata;
}
