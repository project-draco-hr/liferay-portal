{
  LinkedHashMap<String,Object> params=new LinkedHashMap<String,Object>();
  params.put("usersGroups",new Long(userId));
  List<Group> groups=GroupLocalServiceUtil.search(companyId,null,null,params,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  try {
    Group group=GroupLocalServiceUtil.getUserGroup(companyId,userId);
    groups.add(group);
  }
 catch (  NoSuchGroupException nsge) {
  }
  groups=ListUtil.sort(groups,new GroupFriendlyURLComparator());
  List<Tuple> entries=new ArrayList<Tuple>();
  for (  Group group : groups) {
    String name=HttpUtil.fixPath(group.getFriendlyURL());
    Tuple entry=buildEntry(fullPath,name + StringPool.SLASH,null,null,group.getDescription());
    entries.add(entry);
  }
  sendHTML(response,StringPool.SLASH,entries);
}
