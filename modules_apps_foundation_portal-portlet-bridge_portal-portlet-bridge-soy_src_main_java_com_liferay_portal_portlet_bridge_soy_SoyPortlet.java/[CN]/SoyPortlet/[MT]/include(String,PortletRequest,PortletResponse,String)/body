{
  try {
    String path=getPath(portletRequest,portletResponse);
    if (Validator.isNull(path)) {
      path=namespace;
    }
    template.put(TemplateConstants.NAMESPACE,getTemplateNamespaceFromPath(path));
    injectRequestParameters(portletRequest);
    Writer writer=null;
    if (portletResponse instanceof MimeResponse) {
      MimeResponse mimeResponse=(MimeResponse)portletResponse;
      writer=UnsyncPrintWriterPool.borrow(mimeResponse.getWriter());
    }
 else {
      writer=new UnsyncStringWriter();
    }
    template.processTemplate(writer);
    writePortletComponent(portletResponse,writer,path);
  }
 catch (  Exception e) {
    throw new PortletException(e);
  }
  if (clearRequestParameters) {
    if (lifecycle.equals(PortletRequest.RENDER_PHASE)) {
      portletResponse.setProperty("clear-request-parameters","true");
    }
  }
}
