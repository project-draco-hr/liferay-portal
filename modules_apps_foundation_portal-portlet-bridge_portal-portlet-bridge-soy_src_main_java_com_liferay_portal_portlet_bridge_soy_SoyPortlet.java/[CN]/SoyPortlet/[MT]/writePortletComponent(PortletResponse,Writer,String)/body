{
  JSONObject contextJSONObject=JSONFactoryUtil.createJSONObject();
  for (  String key : template.getKeys()) {
    if (Validator.equals(key,TemplateConstants.NAMESPACE)) {
      continue;
    }
    contextJSONObject.put(key,template.get(key));
  }
  String portletBoundaryId=getPortletBoundaryId(portletResponse);
  contextJSONObject.put("element",portletBoundaryId.concat(" .portlet-content-container"));
  StringBundler sb=new StringBundler(14);
  String portletNamespace=portletResponse.getNamespace();
  sb.append("<script>require('");
  sb.append(moduleName);
  sb.append(StringPool.SLASH);
  sb.append(getControllerName(path));
  sb.append("',function(Portlet){");
  sb.append("Liferay.component('");
  sb.append(portletNamespace);
  sb.append("', new Portlet.default(");
  sb.append(contextJSONObject.toJSONString());
  sb.append(").render());");
  sb.append("Liferay.once('beforeScreenFlip',function(){Liferay.component('");
  sb.append(portletNamespace);
  sb.append("').dispose();});");
  sb.append("});</script>");
  try {
    writer.write(sb.toString());
  }
 catch (  IOException ioe) {
    ioe.printStackTrace();
  }
}
