{
  while (true) {
    try {
      if (_destroy) {
        Object[] events=_eventQueue.takeSnapshot();
        for (        Object event : events) {
          dispatchEvent((PortalCacheClusterEvent)event);
          _sentEventCounter.incrementAndGet();
        }
        break;
      }
 else {
        try {
          PortalCacheClusterEvent event=_eventQueue.take();
          dispatchEvent(event);
          _sentEventCounter.incrementAndGet();
        }
 catch (        InterruptedException ignore) {
        }
      }
    }
 catch (    Throwable t) {
      if (_log.isWarnEnabled()) {
        _log.warn("Caught a throwable from dispatch thread, " + "has to swallow it to protect dispatch thread",t);
      }
    }
  }
}
