{
  JournalArticleContent articleContent=(JournalArticleContent)content;
  JournalArticle article=articleContent.getArticle();
  JournalArticleContent.CreationAttributes creationAttributes=articleContent.getCreationAttributes();
  try {
    if ((creationAttributes.getPrefs() != null) && !article.isApproved() && isLatestVersion(article.getGroupId(),article.getArticleId(),article.getVersion())) {
      sendEmail(article,creationAttributes.getArticleURL(),creationAttributes.getPrefs(),"denied");
    }
  }
 catch (  IOException ioe) {
    throw new CMSException(ioe.getMessage(),ioe);
  }
catch (  PortalException pe) {
    throw new CMSException(pe.getMessage(),pe);
  }
catch (  SystemException se) {
    throw new CMSException(se.getMessage(),se);
  }
  article.setExpirationDate(new Date());
  article.setApproved(false);
  article.setExpired(true);
  try {
    journalArticlePersistence.update(article,false);
  }
 catch (  SystemException se) {
    throw new CMSException(se.getMessage(),se);
  }
  articleContent.setArticle(article);
  try {
    if (article.isIndexable()) {
      Indexer.deleteArticle(article.getCompanyId(),article.getArticleId());
    }
  }
 catch (  SearchException se) {
    _log.error("Removing index " + article.getId(),se);
  }
}
