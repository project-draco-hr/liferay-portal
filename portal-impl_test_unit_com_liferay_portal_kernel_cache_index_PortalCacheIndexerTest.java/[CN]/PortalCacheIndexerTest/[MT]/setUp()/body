{
  _portalCache=new MemoryPortalCache<>(new MockPortalCacheManager<TestIndexedCacheKey,String>(RandomTestUtil.randomString()),RandomTestUtil.randomString(),10);
  _portalCacheIndexer=new PortalCacheIndexer<>(_portalCache);
  _cacheListener=ReflectionTestUtil.getFieldValue(_portalCache,"aggregatedCacheListener");
  ConcurrentMap<Long,TestIndexedCacheKey> map=ReflectionTestUtil.getFieldValue(_portalCacheIndexer,"_indexedCacheKeys");
  _mappedMethodNameCallableInvocationHandler=new MappedMethodNameCallableInvocationHandler(map,true);
  Object proxy=ProxyUtil.newProxyInstance(ClassLoader.getSystemClassLoader(),new Class<?>[]{ConcurrentMap.class},_mappedMethodNameCallableInvocationHandler);
  ReflectionTestUtil.setFieldValue(_portalCacheIndexer,"_indexedCacheKeys",proxy);
}
