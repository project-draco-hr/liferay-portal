{
  ToolDependencies.wireCaches();
  _portalCache=MultiVMPoolUtil.getPortalCache(RandomTestUtil.randomString());
  _portalCacheIndexer=new PortalCacheIndexer<>(_indexEncoder,_portalCache);
  List<PortalCacheListener<?,?>> portalCacheListeners=ReflectionTestUtil.getFieldValue(_portalCache,"_portalCacheListeners");
  _cacheListener=(PortalCacheListener<TestKey,String>)portalCacheListeners.get(0);
  _mappedMethodCallableInvocationHandler=new MappedMethodCallableInvocationHandler(ReflectionTestUtil.getFieldValue(_portalCacheIndexer,"_indexedCacheKeys"),true);
  ReflectionTestUtil.setFieldValue(_portalCacheIndexer,"_indexedCacheKeys",ProxyUtil.newProxyInstance(ClassLoader.getSystemClassLoader(),new Class<?>[]{ConcurrentMap.class},_mappedMethodCallableInvocationHandler));
}
