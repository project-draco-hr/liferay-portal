{
  if (!AssetUtil.isValidWord(name)) {
    throw new FolderNameException();
  }
  IGFolder folder=igFolderPersistence.fetchByG_P_N(groupId,parentFolderId,name);
  if ((folder != null) && (folder.getFolderId() != folderId)) {
    throw new DuplicateFolderNameException();
  }
  if (name.indexOf(CharPool.PERIOD) != -1) {
    String nameWithExtension=name;
    name=FileUtil.stripExtension(nameWithExtension);
    List<IGImage> images=igImagePersistence.findByG_F_N(groupId,parentFolderId,name);
    for (    IGImage image : images) {
      if (nameWithExtension.equals(image.getNameWithExtension())) {
        throw new DuplicateFolderNameException();
      }
    }
  }
}
