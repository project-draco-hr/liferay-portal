{
  List<IGFolder> folders=igFolderPersistence.findByG_P(fromFolder.getGroupId(),fromFolder.getFolderId());
  for (  IGFolder folder : folders) {
    mergeFolders(folder,toFolderId);
  }
  List<IGImage> images=igImagePersistence.findByG_F(fromFolder.getGroupId(),fromFolder.getFolderId());
  for (  IGImage image : images) {
    image.setFolderId(toFolderId);
    igImagePersistence.update(image,false);
    Indexer indexer=IndexerRegistryUtil.getIndexer(IGImage.class);
    indexer.reindex(image);
  }
  deleteFolder(fromFolder);
}
