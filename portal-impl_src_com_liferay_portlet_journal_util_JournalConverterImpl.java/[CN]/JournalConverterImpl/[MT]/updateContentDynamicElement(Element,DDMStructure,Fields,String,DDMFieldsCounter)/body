{
  String fieldType=ddmStructure.getFieldType(fieldName);
  String indexType=ddmStructure.getFieldProperty(fieldName,"indexType");
  String type=_ddmTypesToJournalTypes.get(fieldType);
  if (type == null) {
    type=fieldType;
  }
  dynamicElementElement.addAttribute("type",type);
  dynamicElementElement.addAttribute("index-type",indexType);
  if (!ddmStructure.isFieldTransient(fieldName)) {
    Field ddmField=ddmFields.get(fieldName);
    for (    Locale locale : ddmField.getAvailableLocales()) {
      Element dynamicContentElement=dynamicElementElement.addElement("dynamic-content");
      dynamicContentElement.addAttribute("language-id",LocaleUtil.toLanguageId(locale));
      for (      Map.Entry<String,String> entry : ddmField.getAttributes(locale).entrySet()) {
        dynamicContentElement.addAttribute(entry.getKey(),entry.getValue());
      }
      int count=ddmFieldsCounter.get(fieldName);
      Serializable fieldValue=ddmField.getValue(locale,count);
      if (fieldValue instanceof Date) {
        Date valueDate=(Date)fieldValue;
        fieldValue=valueDate.getTime();
      }
      String valueString=String.valueOf(fieldValue);
      updateDynamicContentValue(dynamicContentElement,fieldType,valueString.trim());
    }
  }
  ddmFieldsCounter.incrementKey(fieldName);
}
