{
  if (writer == null) {
    throw new IOException("Writer is null");
  }
  if (length >= size) {
    if (count > 0) {
      writer.write(buffer,0,count);
      count=0;
    }
    writer.write(charArray,offset,length);
    return;
  }
  if ((count > 0) && (length > (size - count))) {
    writer.write(buffer,0,count);
    count=0;
  }
  System.arraycopy(charArray,offset,buffer,count,length);
  count+=length;
}
