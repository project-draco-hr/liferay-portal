{
  DiskFileItemFactory diskFileItemFactory=new DiskFileItemFactory();
  ServletConfig servletConfig=getServletConfig();
  ServletContext servletContext=servletConfig.getServletContext();
  File file=(File)servletContext.getAttribute("javax.servlet.context.tempdir");
  diskFileItemFactory.setRepository(file);
  ServletFileUpload servletFileUpload=new ServletFileUpload(diskFileItemFactory);
  List<FileItem> fileItems=servletFileUpload.parseRequest(request);
  FileItem fileItem=fileItems.get(0);
  return fileItem.getInputStream();
}
