{
  List<BookmarksFolder> folders=bookmarksFolderPersistence.findByG_P(fromFolder.getGroupId(),fromFolder.getFolderId());
  for (  BookmarksFolder folder : folders) {
    mergeFolders(folder,toFolderId);
  }
  List<BookmarksEntry> entries=bookmarksEntryPersistence.findByG_F(fromFolder.getGroupId(),fromFolder.getFolderId());
  for (  BookmarksEntry entry : entries) {
    entry.setFolderId(toFolderId);
    entry.setTreePath(entry.buildTreePath());
    bookmarksEntryPersistence.update(entry);
    Indexer<BookmarksEntry> indexer=IndexerRegistryUtil.nullSafeGetIndexer(BookmarksEntry.class);
    indexer.reindex(entry);
  }
  bookmarksFolderLocalService.deleteFolder(fromFolder);
}
