{
  boolean importPermissions=MapUtil.getBoolean(portletDataContext.getParameterMap(),PortletDataHandlerKeys.PERMISSIONS);
  if (importPermissions) {
    if (userId > 0) {
      Indexer indexer=IndexerRegistryUtil.nullSafeGetIndexer(User.class);
      try {
        indexer.reindex(userId);
      }
 catch (      SearchException se) {
        if (_log.isDebugEnabled()) {
          _log.debug("Cannot reindex user with id " + userId,se);
        }
      }
    }
  }
  Indexer portletDataContextIndexer=IndexerRegistryUtil.getIndexer(PortletDataContext.class);
  try {
    portletDataContextIndexer.reindex(portletDataContext);
  }
 catch (  SearchException se) {
    if (_log.isDebugEnabled()) {
      _log.debug("An error occurred during running the portlet data " + "context indexer",se);
    }
  }
}
