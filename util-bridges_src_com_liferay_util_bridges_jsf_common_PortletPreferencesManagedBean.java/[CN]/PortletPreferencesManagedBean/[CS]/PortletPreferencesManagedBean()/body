{
  FacesContext facesContext=FacesContext.getCurrentInstance();
  _portletPreferences=JSFPortletUtil.getPortletPreferences(facesContext);
  _preferences=new HashMap();
  Enumeration enu=_portletPreferences.getNames();
  while (enu.hasMoreElements()) {
    String name=(String)enu.nextElement();
    String value=_portletPreferences.getValue(name,null);
    _preferences.put(name,value);
    if (_log.isDebugEnabled()) {
      _log.debug("{name=" + name + ", value="+ value+ "}");
    }
  }
  ExternalContext externalContext=facesContext.getExternalContext();
  _locale=externalContext.getRequestLocale();
}
