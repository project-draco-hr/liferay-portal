{
  _project=getProject();
  File buildGradleFile=_project.file("build.gradle");
  if (!isOverwrite() && buildGradleFile.exists() && (buildGradleFile.length() > 0)) {
    _logger.error("Unable to automatically upgrade build.gradle in \"" + _project.getPath() + "\"");
    return;
  }
  _liferayExtension=GradleUtil.getExtension(_project,LiferayExtension.class);
  _pluginPackageProperties=FileUtil.readProperties(_project,"docroot/WEB-INF/liferay-plugin-package.properties");
  XmlParser xmlParser=new XmlParser();
  xmlParser.setFeature("http://apache.org/xml/features/disallow-doctype-decl",false);
  _buildXmlNode=readXml(xmlParser,"build.xml");
  _ivyXmlNode=readXml(xmlParser,"ivy.xml");
  List<String> contents=new ArrayList<>();
  addContents(contents,getBuildGradleDependencies());
  addContents(contents,getBuildGradleLiferay());
  addContents(contents,getBuildGradleProperties());
  FileUtil.write(buildGradleFile,contents);
}
