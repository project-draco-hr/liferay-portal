{
  List results=new ArrayList();
  List sourceStringList=FileUtil.toList(source);
  List targetStringList=FileUtil.toList(target);
  Diff diff=new Diff(sourceStringList,targetStringList);
  List differences=diff.diff();
  Iterator itr=differences.iterator();
  while (itr.hasNext()) {
    Difference difference=(Difference)itr.next();
    if (difference.getAddedEnd() == Difference.NONE) {
      _highlight(sourceStringList,difference.getDeletedStart(),difference.getDeletedEnd(),deletedMarkerStart,deletedMarkerEnd);
      DiffResult diffResult=new DiffResult(DiffResult.SOURCE,difference.getDeletedStart(),sourceStringList.subList(difference.getDeletedStart(),difference.getDeletedEnd() + 1));
      results.add(diffResult);
    }
 else     if (difference.getDeletedEnd() == Difference.NONE) {
      _highlight(targetStringList,difference.getAddedStart(),difference.getAddedEnd(),addedMarkerStart,addedMarkerEnd);
      DiffResult diffResult=new DiffResult(DiffResult.TARGET,difference.getAddedStart(),targetStringList.subList(difference.getAddedStart(),difference.getAddedEnd() + 1));
      results.add(diffResult);
    }
 else {
      _checkCharDiffs(addedMarkerStart,addedMarkerEnd,deletedMarkerStart,deletedMarkerEnd,sourceStringList,targetStringList,difference,results);
    }
  }
  return results;
}
