{
  if (_allAssetCategoryIds == null) {
    _allAssetCategoryIds=new long[0];
    String selectionStyle=getSelectionStyle();
    long assetCategoryId=ParamUtil.getLong(_request,"categoryId");
    if (selectionStyle.equals("dynamic")) {
      _allAssetCategoryIds=AssetPublisherUtil.getAssetCategoryIds(_portletPreferences);
      if (assetCategoryId > 0 && !ArrayUtil.contains(_allAssetCategoryIds,assetCategoryId)) {
        _allAssetCategoryIds=ArrayUtil.append(_allAssetCategoryIds,assetCategoryId);
      }
    }
    if (assetCategoryId > 0) {
      if (selectionStyle.equals("manual")) {
        _allAssetCategoryIds=ArrayUtil.append(_allAssetCategoryIds,assetCategoryId);
      }
    }
  }
  return _allAssetCategoryIds;
}
