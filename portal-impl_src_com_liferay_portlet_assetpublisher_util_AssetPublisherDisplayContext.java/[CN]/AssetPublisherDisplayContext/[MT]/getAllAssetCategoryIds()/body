{
  if (_allAssetCategoryIds == null) {
    _allAssetCategoryIds=new long[0];
    long assetCategoryId=ParamUtil.getLong(_request,"categoryId");
    String selectionStyle=getSelectionStyle();
    if (selectionStyle.equals("dynamic")) {
      _allAssetCategoryIds=AssetPublisherUtil.getAssetCategoryIds(_portletPreferences);
      if ((assetCategoryId > 0) && !ArrayUtil.contains(_allAssetCategoryIds,assetCategoryId)) {
        _allAssetCategoryIds=ArrayUtil.append(_allAssetCategoryIds,assetCategoryId);
      }
    }
 else     if (selectionStyle.equals("manual") && (assetCategoryId > 0)) {
      _allAssetCategoryIds=new long[]{assetCategoryId};
    }
  }
  return _allAssetCategoryIds;
}
