{
  List<String> headerNames=new ArrayList<>();
  DDMForm ddmForm=ddmStructure.getDDMForm();
  List<DDMFormField> ddmFormfields=ddmForm.getDDMFormFields();
  int totalColumns=_MAX_COLUMNS;
  if (ddmFormfields.size() < totalColumns) {
    totalColumns=ddmFormfields.size();
  }
  for (int i=0; i < totalColumns; i++) {
    DDMFormField ddmFormField=ddmFormfields.get(i);
    _ddmFormFields.add(ddmFormField);
    LocalizedValue label=ddmFormField.getLabel();
    headerNames.add(label.getString(_liferayPortletRequest.getLocale()));
  }
  PortletURL portletURL=PortletURLUtil.getCurrent(_liferayPortletRequest,_liferayPortletResponse);
  _recordSearchContainer=new RecordSearch(_liferayPortletRequest,portletURL,headerNames);
  String orderByCol=ParamUtil.getString(_liferayPortletRequest,"orderByCol");
  String orderByType=ParamUtil.getString(_liferayPortletRequest,"orderByType");
  PortalPreferences portalPreferences=PortletPreferencesFactoryUtil.getPortalPreferences(_liferayPortletRequest);
  if (Validator.isNull(orderByCol)) {
    orderByCol=portalPreferences.getValue(DDLFormPortletKeys.DYNAMIC_DATA_LISTS_FORM_ADMIN,"view-entries-order-by-col","modified-date");
    orderByType=portalPreferences.getValue(DDLFormPortletKeys.DYNAMIC_DATA_LISTS_FORM_ADMIN,"view-entries-order-by-type","asc");
  }
 else {
    portalPreferences.setValue(DDLFormPortletKeys.DYNAMIC_DATA_LISTS_FORM_ADMIN,"view-entries-order-by-col",orderByCol);
    portalPreferences.setValue(DDLFormPortletKeys.DYNAMIC_DATA_LISTS_FORM_ADMIN,"view-entries-order-by-type",orderByType);
  }
  OrderByComparator<DDLRecord> orderByComparator=DDLFormAdminPortletUtil.getRecordOrderByComparator(orderByCol,orderByType);
  _recordSearchContainer.setOrderByCol(orderByCol);
  _recordSearchContainer.setOrderByComparator(orderByComparator);
  _recordSearchContainer.setOrderByType(orderByType);
  updateSearchContainerResults();
}
