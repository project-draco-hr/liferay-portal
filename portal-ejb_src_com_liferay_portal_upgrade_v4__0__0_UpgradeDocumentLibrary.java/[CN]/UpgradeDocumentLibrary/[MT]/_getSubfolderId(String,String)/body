{
  if (StringUtil.count(fileName,StringPool.SLASH) == 1) {
    return folderId;
  }
  DLFolder parentFolder=DLFolderLocalServiceUtil.getFolder(folderId);
  String[] folderNames=StringUtil.split(fileName,StringPool.SLASH);
  for (int i=1; i < (folderNames.length - 1); i++) {
    try {
      parentFolder=DLFolderLocalServiceUtil.getFolder(parentFolder.getFolderId(),folderNames[i]);
    }
 catch (    NoSuchFolderException nsfe) {
      String userId=parentFolder.getUserId();
      String plid=Layout.PUBLIC + parentFolder.getGroupId() + ".1";
      String parentFolderId=parentFolder.getFolderId();
      String name=_fixName(folderNames[i]);
      String description=name;
      boolean addCommunityPermissions=true;
      boolean addGuestPermissions=true;
      parentFolder=DLFolderLocalServiceUtil.addFolder(userId,plid,parentFolderId,name,description,addCommunityPermissions,addGuestPermissions);
    }
  }
  return parentFolder.getFolderId();
}
