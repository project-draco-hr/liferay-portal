{
  byte[] saltBytes=new byte[8];
  if (Validator.isNull(sshaString)) {
    Random random=new SecureRandom();
    random.nextBytes(saltBytes);
  }
 else {
    try {
      byte[] digestPlusSalt=Base64.decode(sshaString);
      byte[] digestBytes=new byte[digestPlusSalt.length - 8];
      System.arraycopy(digestPlusSalt,0,digestBytes,0,digestBytes.length);
      System.arraycopy(digestPlusSalt,digestBytes.length,saltBytes,0,saltBytes.length);
    }
 catch (    Exception e) {
      throw new PwdEncryptorException("Unable to extract salt from encrypted password: " + e.getMessage());
    }
  }
  return saltBytes;
}
