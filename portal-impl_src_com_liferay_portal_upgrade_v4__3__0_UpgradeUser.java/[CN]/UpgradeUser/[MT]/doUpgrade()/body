{
  PKUpgradeColumnImpl upgradePKColumn=new PKUpgradeColumnImpl("userId",new Integer(Types.VARCHAR),true);
  UpgradeColumn upgradeCompanyIdColumn=new TempUpgradeColumnImpl("companyId",new Integer(Types.VARCHAR));
  UpgradeColumn upgradeContactIdColumn=new TempUpgradeColumnImpl("contactId",new Integer(Types.VARCHAR));
  UpgradeColumn upgradeUserPortraitIdColumn=new UserPortraitIdUpgradeColumnImpl(upgradePKColumn,AvailableMappersUtil.getImageIdMapper());
  UpgradeTable upgradeTable=UpgradeTableFactoryUtil.getUpgradeTable(UserTable.TABLE_NAME,UserTable.TABLE_COLUMNS,upgradePKColumn,upgradeCompanyIdColumn,upgradeContactIdColumn,upgradeUserPortraitIdColumn);
  upgradeTable.updateTable();
  ValueMapper userIdMapper=new DefaultPKMapper(upgradePKColumn.getValueMapper());
  AvailableMappersUtil.setUserIdMapper(userIdMapper);
  UpgradeColumn upgradeUserIdColumn=new SwapUpgradeColumnImpl("userId",new Integer(Types.VARCHAR),userIdMapper);
  upgradeTable=UpgradeTableFactoryUtil.getUpgradeTable(AccountTable.TABLE_NAME,AccountTable.TABLE_COLUMNS,upgradeUserIdColumn);
  upgradeTable.setCreateSQL(AccountTable.TABLE_SQL_CREATE);
  upgradeTable.setIndexesSQL(AccountTable.TABLE_SQL_ADD_INDEXES);
  upgradeTable.updateTable();
  UpgradeColumn upgradeAccountIdColumn=new TempUpgradeColumnImpl("accountId",new Integer(Types.VARCHAR));
  UpgradeColumn upgradeParentContactIdColumn=new TempUpgradeColumnImpl("parentContactId",new Integer(Types.VARCHAR));
  UpgradeColumn upgradePrefixIdColumn=new TempUpgradeColumnImpl("prefixId",new Integer(Types.VARCHAR));
  UpgradeColumn upgradeSuffixIdColumn=new TempUpgradeColumnImpl("suffixId",new Integer(Types.VARCHAR));
  upgradeTable=UpgradeTableFactoryUtil.getUpgradeTable(ContactTable.TABLE_NAME,ContactTable.TABLE_COLUMNS,upgradeContactIdColumn,upgradeCompanyIdColumn,upgradeUserIdColumn,upgradeAccountIdColumn,upgradeParentContactIdColumn,upgradePrefixIdColumn,upgradeSuffixIdColumn);
  upgradeTable.updateTable();
  upgradeTable=UpgradeTableFactoryUtil.getUpgradeTable(CyrusUserTable.TABLE_NAME,CyrusUserTable.TABLE_COLUMNS,upgradeUserIdColumn);
  upgradeTable.updateTable();
  upgradeTable=UpgradeTableFactoryUtil.getUpgradeTable(CyrusVirtualTable.TABLE_NAME,CyrusVirtualTable.TABLE_COLUMNS,upgradeUserIdColumn);
  upgradeTable.updateTable();
  upgradeTable=UpgradeTableFactoryUtil.getUpgradeTable(PasswordTrackerTable.TABLE_NAME,PasswordTrackerTable.TABLE_COLUMNS,new PKUpgradeColumnImpl("passwordTrackerId",false),upgradeUserIdColumn);
  upgradeTable.setCreateSQL(PasswordTrackerTable.TABLE_SQL_CREATE);
  upgradeTable.setIndexesSQL(PasswordTrackerTable.TABLE_SQL_ADD_INDEXES);
  upgradeTable.updateTable();
}
