{
  try {
    JSONObject ruonPresenceJSON=JSONFactoryUtil.createJSONObject();
    JSONObject getPresenceStatusRequestJSON=JSONFactoryUtil.createJSONObject();
    getPresenceStatusRequestJSON.put("userId",_userId);
    ruonPresenceJSON.put("getPresenceStatusRequest",getPresenceStatusRequestJSON);
    Message message=new Message(MessageTypes.RUON_MESSAGE);
    message.setPayload(ruonPresenceJSON.toString());
    String ruonPresenceResponse=(String)MessageBusUtil.sendSynchronizedMessage(DestinationNames.RUON,message);
    String presenceStatus="";
    if (ruonPresenceResponse != null) {
      JSONObject ruonPresenceResponseJSON=JSONFactoryUtil.createJSONObject(ruonPresenceResponse);
      JSONObject presenceStatusResponseJSON=ruonPresenceResponseJSON.getJSONObject("getPresenceStatusResponse");
      if (presenceStatusResponseJSON != null) {
        presenceStatus=presenceStatusResponseJSON.getString("presenceStatus");
      }
    }
    pageContext.getOut().print(presenceStatus);
  }
 catch (  Exception e) {
    throw new JspException(e);
  }
  return SKIP_BODY;
}
