{
  Company company=PortalUtil.getCompany(resourceRequest);
  Role guestRole=_roleLocalService.getRole(company.getCompanyId(),RoleConstants.GUEST);
  ResourcePermission resourcePermission=_resourcePermissionLocalService.getResourcePermission(guestRole.getCompanyId(),DDLRecordSet.class.getName(),ResourceConstants.SCOPE_INDIVIDUAL,String.valueOf(recordSetId),guestRole.getRoleId());
  if (published) {
    resourcePermission.addResourceAction(DDLActionKeys.ADD_RECORD);
  }
 else {
    resourcePermission.removeResourceAction(DDLActionKeys.ADD_RECORD);
  }
  _resourcePermissionLocalService.updateResourcePermission(resourcePermission);
}
