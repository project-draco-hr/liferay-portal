{
  ThemeDisplay themeDisplay=serviceContext.getThemeDisplay();
  PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
  int activityType=activity.getType();
  JournalArticle article=JournalArticleLocalServiceUtil.getLatestArticle(activity.getClassPK());
  if ((activityType == JournalActivityKeys.ADD_ARTICLE) && !JournalPermission.contains(permissionChecker,activity.getGroupId(),ActionKeys.ADD_ARTICLE)) {
    return false;
  }
 else   if ((activityType == JournalActivityKeys.UPDATE_ARTICLE) && !JournalArticlePermission.contains(permissionChecker,article,ActionKeys.UPDATE)) {
    return false;
  }
  return hasPermissions(permissionChecker,activity,ActionKeys.VIEW,serviceContext);
}
