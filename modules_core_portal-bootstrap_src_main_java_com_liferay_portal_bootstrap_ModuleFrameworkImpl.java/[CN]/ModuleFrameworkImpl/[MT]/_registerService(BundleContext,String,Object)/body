{
  Set<Class<?>> interfaces=OSGiBeanProperties.Service.interfaces(bean);
  interfaces.add(bean.getClass());
  List<String> names=new ArrayList<>(interfaces.size());
  for (  Class<?> interfaceClass : interfaces) {
    String interfaceClassName=interfaceClass.getName();
    if (!_isIgnoredInterface(interfaceClassName)) {
      names.add(interfaceClassName);
    }
  }
  if (names.isEmpty()) {
    return null;
  }
  ServiceRegistration<?> serviceRegistration=bundleContext.registerService(names.toArray(new String[names.size()]),bean,_getProperties(bean,beanName));
  if (_log.isDebugEnabled()) {
    _log.debug("Registered service as " + serviceRegistration.getReference());
  }
  return serviceRegistration;
}
