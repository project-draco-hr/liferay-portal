{
  if (_framework == null) {
    return;
  }
  _framework.stop();
  FrameworkEvent frameworkEvent=_framework.waitForStop(timeout);
  if (frameworkEvent.getType() == FrameworkEvent.WAIT_TIMEDOUT) {
    _log.error("Module framework shutdown timeout after waiting " + timeout + "ms, "+ frameworkEvent);
  }
 else   if (_log.isInfoEnabled()) {
    _log.info(frameworkEvent);
  }
  RegistryUtil.setRegistry(null);
}
