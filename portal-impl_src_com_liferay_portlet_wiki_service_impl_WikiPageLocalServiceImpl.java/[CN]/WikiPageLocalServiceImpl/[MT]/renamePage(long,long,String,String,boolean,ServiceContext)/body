{
  validateTitle(newTitle);
  if (StringUtil.equalsIgnoreCase(title,newTitle)) {
    throw new DuplicatePageException(newTitle);
  }
  if (isUsedTitle(nodeId,newTitle)) {
    WikiPage page=getPage(nodeId,newTitle);
    if (((page.getVersion() == WikiPageConstants.VERSION_DEFAULT) && (page.getContent().length() < 200)) || !strict) {
      deletePage(nodeId,newTitle);
    }
 else {
      throw new DuplicatePageException(newTitle);
    }
  }
  WikiPage page=getPage(nodeId,title);
  serviceContext.setCommand(Constants.RENAME);
  updatePage(userId,page,newTitle,page.getContent(),page.getSummary(),page.getMinorEdit(),page.getFormat(),page.getParentTitle(),page.getRedirectTitle(),serviceContext);
}
