{
  WikiPage page=getPage(nodeId,title);
  if (page.isInTrashExplicitly()) {
    restorePageFromTrash(userId,page);
  }
 else   if (page.isInTrashImplicitly()) {
    TrashEntry trashEntry=page.getTrashEntry();
    restoreDependentFromTrash(page,trashEntry.getEntryId());
  }
 else {
    throw new PrincipalException();
  }
  changeParent(userId,nodeId,TrashUtil.getOriginalTitle(page.getTitle()),newParentTitle,serviceContext);
  return getPage(page.getResourcePrimKey());
}
