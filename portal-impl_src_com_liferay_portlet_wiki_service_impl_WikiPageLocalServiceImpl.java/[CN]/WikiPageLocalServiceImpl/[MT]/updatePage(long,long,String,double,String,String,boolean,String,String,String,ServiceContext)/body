{
  WikiPage oldPage=null;
  try {
    oldPage=wikiPagePersistence.findByN_T_First(nodeId,title,null);
    if ((version > 0) && (version != oldPage.getVersion())) {
      throw new PageVersionException();
    }
    return updatePage(userId,oldPage,0,StringPool.BLANK,content,summary,minorEdit,format,parentTitle,redirectTitle,serviceContext);
  }
 catch (  NoSuchPageException nspe) {
    return addPage(userId,nodeId,title,WikiPageConstants.VERSION_DEFAULT,content,summary,minorEdit,format,true,parentTitle,redirectTitle,serviceContext);
  }
}
