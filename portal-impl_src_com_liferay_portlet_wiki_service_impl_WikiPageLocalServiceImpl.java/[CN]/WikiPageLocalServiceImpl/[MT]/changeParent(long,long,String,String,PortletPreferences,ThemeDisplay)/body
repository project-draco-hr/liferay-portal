{
  WikiPage page=getPage(nodeId,title);
  String originalParentTitle=page.getParentTitle();
  double version=page.getVersion();
  String content=page.getContent();
  String summary=themeDisplay.translate("changed-parent-from-x",originalParentTitle);
  boolean minorEdit=false;
  String format=page.getFormat();
  String redirectTitle=page.getRedirectTitle();
  String[] tagsEntries=tagsEntryLocalService.getEntryNames(WikiPage.class.getName(),page.getResourcePrimKey());
  updatePage(userId,nodeId,title,version,content,summary,minorEdit,format,newParentTitle,redirectTitle,tagsEntries,preferences,themeDisplay);
  List<WikiPage> oldPages=wikiPagePersistence.findByN_T_H(nodeId,title,false);
  for (  WikiPage oldPage : oldPages) {
    oldPage.setParentTitle(originalParentTitle);
    wikiPagePersistence.update(oldPage,false);
  }
}
