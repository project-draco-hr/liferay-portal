{
  User user=userPersistence.findByPrimaryKey(userId);
  Date now=new Date();
  page.setStatus(status);
  page.setStatusByUserId(userId);
  page.setStatusByUserName(user.getFullName());
  page.setStatusDate(now);
  if (status == WorkflowConstants.STATUS_APPROVED) {
    page.setHead(true);
    assetEntryLocalService.updateVisible(WikiPage.class.getName(),page.getResourcePrimKey(),true);
    Indexer indexer=IndexerRegistryUtil.getIndexer(WikiPage.class);
    indexer.reindex(page);
  }
  return wikiPagePersistence.update(page,false);
}
