{
  String userId=User.getDefaultUserId(group.getCompanyId());
  String name=PropsUtil.get(PropsUtil.DEFAULT_GUEST_LAYOUT_NAME);
  Layout layout=LayoutLocalServiceUtil.addLayout(group.getGroupId(),userId,false,Layout.DEFAULT_PARENT_LAYOUT_ID,name,Layout.TYPE_PORTLET,false,null);
  LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
  String layoutTemplateId=PropsUtil.get(PropsUtil.DEFAULT_GUEST_LAYOUT_TEMPLATE_ID);
  layoutTypePortlet.setLayoutTemplateId(layoutTemplateId);
  for (int i=0; i < 10; i++) {
    String columnId="column-" + i;
    String portletIds=PropsUtil.get(PropsUtil.DEFAULT_GUEST_LAYOUT_COLUMN + i);
    if (portletIds != null) {
      layoutTypePortlet.setPortletIds(columnId,portletIds);
    }
  }
  LayoutLocalServiceUtil.updateLayout(layout.getLayoutId(),layout.getOwnerId(),layout.getTypeSettings());
}
