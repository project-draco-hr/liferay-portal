{
  List<FilterMapping> filterMappings=_filterMappingsMap.get(filterName);
  if (filterMappings == null) {
    filterMappings=new CopyOnWriteArrayList<>();
    List<FilterMapping> previousFilterMapping=_filterMappingsMap.putIfAbsent(filterName,filterMappings);
    if (previousFilterMapping != null) {
      filterMappings=previousFilterMapping;
    }
    _filterNames.add(filterName);
  }
  if (after) {
    filterMappings.add(filterMapping);
  }
 else {
    filterMappings.add(0,filterMapping);
  }
  for (  InvokerFilter invokerFilter : _invokerFilters) {
    invokerFilter.clearFilterChainsCache();
  }
}
