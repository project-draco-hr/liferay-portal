{
  Filter previousFilter=_filters.put(filterName,filter);
  if (previousFilter != null) {
    for (    FilterMapping filterMapping : _filterMappings) {
      if (filterMapping.getFilter() == previousFilter) {
        if (filter != null) {
          filterMapping.setFilter(filter);
        }
 else {
          _filterMappings.remove(filterMapping);
          _filterConfigs.remove(filterName);
        }
      }
    }
  }
  for (  InvokerFilter invokerFilter : _invokerFilters) {
    invokerFilter.clearFilterChainsCache();
  }
  return previousFilter;
}
