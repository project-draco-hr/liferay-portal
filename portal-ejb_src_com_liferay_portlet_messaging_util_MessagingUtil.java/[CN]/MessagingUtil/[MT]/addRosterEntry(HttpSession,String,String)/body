{
  JSONObject jo=new JSONObject();
  Roster roster=getRoster(ses);
  User user=UserLocalServiceUtil.getUserByEmailAddress(companyId,emailAddress);
  String smackId=getXmppId(user);
  String name=user.getFullName();
  try {
    XMPPConnection con=new XMPPConnection(SERVER_ADDRESS,SERVER_PORT);
    AccountManager accountManager=con.getAccountManager();
    try {
      accountManager.createAccount(user.getUserId(),USER_PASSWORD);
    }
 catch (    XMPPException xmppe) {
    }
    con.close();
  }
 catch (  XMPPException xmppe) {
  }
  roster.createEntry(smackId,name,null);
  jo.put("name",name);
  jo.put("user",user.getUserId());
  jo.put("status","success");
  return jo;
}
