{
  if (isJabberEnabled()) {
    JabberSession jabberSes=(JabberSession)ses.getAttribute(WebKeys.JABBER_XMPP_SESSION);
    if (jabberSes != null) {
      XMPPConnection connection=jabberSes.getConnection();
      Roster roster=jabberSes.getRoster();
      roster.removeRosterListener(jabberSes.getRosterListener());
      connection.removePacketListener(jabberSes.getMessageListener());
      connection.close();
      MessageWait msgWait=jabberSes.getMessageWait();
      if (msgWait != null) {
        msgWait.notifyWait();
      }
      ses.removeAttribute(WebKeys.JABBER_XMPP_SESSION);
    }
  }
}
