{
  LayoutSet layoutSet=DefaultLayoutSetPrototypesUtil.addLayoutSetPrototype(companyId,defaultUserId,"layout-set-prototype-community-site-title","layout-set-prototype-community-site-description",layoutSetPrototypes,AddLayoutSetPrototypeAction.class.getClassLoader());
  if (layoutSet == null) {
    return;
  }
  Layout layout=DefaultLayoutPrototypesUtil.addLayout(layoutSet,"home","/home","2_columns_iii");
  String portletId=PortletProviderUtil.getPortletId(MBMessage.class.getName(),PortletProvider.Action.EDIT);
  DefaultLayoutPrototypesUtil.addPortletId(layout,portletId,"column-1");
  try {
    DefaultLayoutPrototypesUtil.addPortletId(layout,PollsPortletKeys.POLLS_DISPLAY,"column-2");
    DefaultLayoutPrototypesUtil.addPortletId(layout,SocialUserStatisticsPortletKeys.SOCIAL_USER_STATISTICS,"column-2");
    DefaultLayoutPrototypesUtil.addLayout(layoutSet,"wiki","/wiki","2_columns_iii");
  }
 catch (  NoSuchResourceActionException e) {
    LayoutSetPrototype layoutSetPrototype=_layoutSetPrototypeLocalService.getLayoutSetPrototypeByUuidAndCompanyId(layoutSet.getLayoutSetPrototypeUuid(),companyId);
    _layoutSetLocalService.deleteLayoutSet(layoutSet);
    _layoutSetPrototypeLocalService.deleteLayoutSetPrototype(layoutSetPrototype);
  }
}
