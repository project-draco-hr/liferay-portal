{
  Map<String,Set<String>> classCommandNameMap=new HashMap<>();
  for (  String classCommandName : classCommandNames) {
    Set<String> classCommandProperties=new TreeSet<>();
    String className=PoshiRunnerGetterUtil.getClassNameFromClassCommandName(classCommandName);
    List<String> properties=new ArrayList<>();
    properties.addAll(_getTestCaseClassProperties(className));
    properties.addAll(_getTestCaseCommandProperties(classCommandName));
    List<String> ignoreProperties=Arrays.asList(PropsValues.TEST_BATCH_GROUP_IGNORE_PROPERTIES);
    for (    String property : properties) {
      boolean ignore=false;
      for (      String ignoreProperty : ignoreProperties) {
        if (property.contains(ignoreProperty)) {
          ignore=true;
          break;
        }
      }
      if (!ignore) {
        classCommandProperties.add(property);
      }
    }
    classCommandNameMap.put(classCommandName,classCommandProperties);
  }
  Multimap<Set<String>,String> multimap=HashMultimap.create();
  for (  Map.Entry<String,Set<String>> entry : classCommandNameMap.entrySet()) {
    multimap.put(entry.getValue(),entry.getKey());
  }
  Map<Integer,List<String>> classCommandNameGroups=new HashMap<>();
  int classCommandNameIndex=0;
  int maxGroupSize=PropsValues.TEST_BATCH_MAX_GROUP_SIZE;
  for (  Map.Entry<Set<String>,Collection<String>> entry : multimap.asMap().entrySet()) {
    List<String> classCommandNameGroup=new ArrayList(entry.getValue());
    Collections.sort(classCommandNameGroup);
    double groupTestCount=classCommandNameGroup.size();
    double groupCount=Math.ceil(groupTestCount / maxGroupSize);
    int groupSize=(int)Math.ceil(groupTestCount / groupCount);
    for (    List<String> partition : Lists.partition(classCommandNameGroup,groupSize)) {
      classCommandNameGroups.put(classCommandNameIndex,partition);
      classCommandNameIndex++;
    }
  }
  return classCommandNameGroups;
}
