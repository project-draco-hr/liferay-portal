{
  WikiPage page=WikiTestUtil.addPage(TestPropsValues.getUserId(),_group.getGroupId(),_node.getNodeId(),ServiceTestUtil.randomString(),true);
  ExpandoColumn column=null;
  ExpandoValue value=null;
  ExpandoBridge expandoBridge=null;
  if (hasExpandoValues) {
    ExpandoTable table=ExpandoTestUtil.addTable(PortalUtil.getClassNameId(WikiPage.class),ServiceTestUtil.randomString());
    column=ExpandoTestUtil.addColumn(table,ServiceTestUtil.randomString(),ExpandoColumnConstants.STRING);
    value=ExpandoTestUtil.addValue(table,column,page.getPrimaryKey(),ServiceTestUtil.randomString());
    expandoBridge=page.getExpandoBridge();
    expandoBridge.addAttribute(column.getName(),ExpandoColumnConstants.STRING,value.getString());
  }
  ServiceContext serviceContext=ServiceTestUtil.getServiceContext(_group.getGroupId());
  WikiPageLocalServiceUtil.movePage(TestPropsValues.getUserId(),_node.getNodeId(),page.getTitle(),"New Title",true,serviceContext);
  WikiPage movedPage=WikiPageLocalServiceUtil.getPage(_node.getNodeId(),"New Title");
  Assert.assertNotNull(movedPage);
  checkPopulatedServiceContext(serviceContext,movedPage,hasExpandoValues);
}
