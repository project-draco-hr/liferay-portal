{
  WikiPage page=WikiTestUtil.addPage(TestPropsValues.getUserId(),_group.getGroupId(),_node.getNodeId(),ServiceTestUtil.randomString(),true);
  if (hasExpandoValues) {
    addExpandoValueToPage(page);
  }
  WikiPageLocalServiceUtil.movePageToTrash(TestPropsValues.getUserId(),_node.getNodeId(),page.getTitle());
  WikiPageLocalServiceUtil.restorePageFromTrash(TestPropsValues.getUserId(),page);
  WikiPage restoredPage=WikiPageLocalServiceUtil.getPage(page.getResourcePrimKey());
  Assert.assertNotNull(restoredPage);
  if (hasExpandoValues) {
    ExpandoBridge expandoBridge=page.getExpandoBridge();
    ExpandoBridge restoredExpandoBridge=restoredPage.getExpandoBridge();
    AssertUtils.assertEquals(expandoBridge.getAttributes(),restoredExpandoBridge.getAttributes());
  }
}
