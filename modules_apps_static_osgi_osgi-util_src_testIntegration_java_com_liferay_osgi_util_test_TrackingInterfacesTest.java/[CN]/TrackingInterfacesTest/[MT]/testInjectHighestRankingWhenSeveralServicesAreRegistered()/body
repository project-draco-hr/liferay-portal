{
  TestInterface testInterface=new TestInterface();
  try (ReflectionServiceTracker reflectionServiceTracker=new ReflectionServiceTracker(testInterface)){
    TrackedOne trackedOne=new TrackedOne();
    ServiceRegistration<InterfaceOne> serviceRegistration1=ReflectionServiceTrackerTestUtil.registerServiceWithRanking(_bundleContext,InterfaceOne.class,trackedOne,2);
    TrackedTwo trackedTwo=new TrackedTwo();
    ServiceRegistration<InterfaceTwo> serviceRegistration2=ReflectionServiceTrackerTestUtil.registerServiceWithRanking(_bundleContext,InterfaceTwo.class,trackedTwo,2);
    TrackedOne trackedOne2=new TrackedOne();
    ServiceRegistration<InterfaceOne> serviceRegistration3=ReflectionServiceTrackerTestUtil.registerServiceWithRanking(_bundleContext,InterfaceOne.class,trackedOne2,1);
    TrackedTwo trackedTwo2=new TrackedTwo();
    ServiceRegistration<InterfaceTwo> serviceRegistration4=ReflectionServiceTrackerTestUtil.registerServiceWithRanking(_bundleContext,InterfaceTwo.class,trackedTwo2,1);
    Assert.assertEquals(trackedOne,testInterface.getTrackedOne());
    Assert.assertEquals(trackedTwo,testInterface.getTrackedTwo());
    serviceRegistration1.unregister();
    serviceRegistration2.unregister();
    serviceRegistration3.unregister();
    serviceRegistration4.unregister();
  }
 }
