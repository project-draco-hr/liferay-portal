{
  if (isRemoveNotificationEvent(notificationEvent,currentTime)) {
    return;
  }
  if (PropsValues.USER_NOTIFICATION_EVENT_CONFIRMATION_ENABLED && notificationEvent.isDeliveryRequired()) {
    _getUnconfirmedNotificationEvents().put(notificationEvent.getUuid(),notificationEvent);
  }
 else {
    TreeSet<NotificationEvent> notificationEvents=_getNotificationEvents();
    notificationEvents.add(notificationEvent);
    if (notificationEvents.size() > PropsValues.NOTIFICATIONS_MAX_EVENTS) {
      NotificationEvent firstNotificationEvent=notificationEvents.first();
      notificationEvents.remove(firstNotificationEvent);
    }
  }
}
