{
  Map parameterMap=context.getParameterMap();
  boolean exportData=MapUtil.getBoolean(parameterMap,_EXPORT_PAGE_RATINGS_DATA);
  boolean staging=MapUtil.getBoolean(parameterMap,PortletDataHandlerKeys.STAGING);
  if (_log.isDebugEnabled()) {
    if (exportData) {
      _log.debug("Exporting data is enabled");
    }
 else {
      _log.debug("Exporting data is disabled");
    }
  }
  if (!exportData && !staging) {
    return null;
  }
  try {
    context.addRatingsEntries(Layout.class,new Long(context.getPlid()));
    return String.valueOf(context.getPlid());
  }
 catch (  Exception e) {
    throw new PortletDataException(e);
  }
}
