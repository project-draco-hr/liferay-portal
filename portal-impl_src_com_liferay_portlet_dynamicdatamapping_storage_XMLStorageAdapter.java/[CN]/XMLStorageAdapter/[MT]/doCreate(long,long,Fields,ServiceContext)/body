{
  long classNameId=PortalUtil.getClassNameId(DDMContent.class.getName());
  Document document=SAXReaderUtil.createDocument();
  Element rootElement=document.addElement("root");
  Iterator<Field> itr=fields.iterator();
  while (itr.hasNext()) {
    Field field=itr.next();
    Object value=field.getValue();
    if (value instanceof Date) {
      Date valueDate=(Date)value;
      value=valueDate.getTime();
    }
    String valueString=String.valueOf(value);
    if (valueString != null) {
      valueString=valueString.trim();
    }
    _appendField(rootElement,field.getName(),valueString);
  }
  DDMContent ddmContent=DDMContentLocalServiceUtil.addContent(serviceContext.getUserId(),serviceContext.getScopeGroupId(),DDMStorageLink.class.getName(),null,document.formattedString(),serviceContext);
  DDMStorageLinkLocalServiceUtil.addStorageLink(classNameId,ddmContent.getPrimaryKey(),ddmStructureId,serviceContext);
  return ddmContent.getPrimaryKey();
}
