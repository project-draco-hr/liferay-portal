{
  long classNameId=PortalUtil.getClassNameId(DDMContent.class.getName());
  Document document=SAXReaderUtil.createDocument();
  Element rootElement=document.addElement("root");
  Iterator<Field> itr=fields.iterator();
  while (itr.hasNext()) {
    Field field=itr.next();
    Object value=field.getValue();
    if (value instanceof Date) {
      value=((Date)value).getTime();
    }
    _appendField(rootElement,field.getName(),String.valueOf(value));
  }
  DDMContent ddmContent=DDMContentLocalServiceUtil.addContent(serviceContext.getUserId(),serviceContext.getScopeGroupId(),DDMStorageLink.class.getName(),null,document.formattedString(),serviceContext);
  DDMStorageLinkLocalServiceUtil.addStorageLink(classNameId,ddmContent.getPrimaryKey(),ddmStructureId,serviceContext);
  return ddmContent.getPrimaryKey();
}
