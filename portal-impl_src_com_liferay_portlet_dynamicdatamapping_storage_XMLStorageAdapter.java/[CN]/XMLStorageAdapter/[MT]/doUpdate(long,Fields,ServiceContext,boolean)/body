{
  DDMContent ddmContent=DDMContentLocalServiceUtil.getContent(classPK);
  Document document=null;
  Element rootElement=null;
  if (merge) {
    document=SAXReaderUtil.read(ddmContent.getXml());
    rootElement=document.getRootElement();
  }
 else {
    document=SAXReaderUtil.createDocument();
    rootElement=document.addElement(_ROOT);
  }
  Iterator<Field> itr=fields.iterator();
  while (itr.hasNext()) {
    Field field=itr.next();
    String fieldName=field.getName();
    String fieldValue=String.valueOf(field.getValue());
    Element dynamicElement=_getElementByName(document,fieldName);
    if (dynamicElement == null) {
      _appendField(rootElement,fieldName,fieldValue);
    }
 else {
      _updateField(dynamicElement,fieldName,fieldValue);
    }
  }
  ddmContent.setModifiedDate(serviceContext.getModifiedDate(null));
  ddmContent.setXml(document.formattedString());
  DDMContentLocalServiceUtil.updateContent(ddmContent.getPrimaryKey(),ddmContent.getName(),ddmContent.getDescription(),ddmContent.getXml(),serviceContext);
}
