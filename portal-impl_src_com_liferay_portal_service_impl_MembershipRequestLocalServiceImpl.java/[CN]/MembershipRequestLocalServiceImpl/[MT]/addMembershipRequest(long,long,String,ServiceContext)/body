{
  User user=userPersistence.findByPrimaryKey(userId);
  validate(comments);
  long membershipRequestId=counterLocalService.increment();
  MembershipRequest membershipRequest=membershipRequestPersistence.create(membershipRequestId);
  membershipRequest.setCompanyId(user.getCompanyId());
  membershipRequest.setUserId(userId);
  membershipRequest.setCreateDate(new Date());
  membershipRequest.setGroupId(groupId);
  membershipRequest.setComments(comments);
  membershipRequest.setStatusId(MembershipRequestConstants.STATUS_PENDING);
  membershipRequestPersistence.update(membershipRequest);
  notifyGroupAdministrators(membershipRequest,serviceContext);
  return membershipRequest;
}
