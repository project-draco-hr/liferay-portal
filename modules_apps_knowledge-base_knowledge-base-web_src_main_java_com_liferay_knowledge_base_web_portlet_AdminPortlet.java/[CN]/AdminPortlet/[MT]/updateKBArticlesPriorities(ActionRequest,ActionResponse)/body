{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  Enumeration<String> enu=actionRequest.getParameterNames();
  Map<Long,Double> resourcePrimKeyToPriorityMap=new HashMap<>();
  while (enu.hasMoreElements()) {
    String name=enu.nextElement();
    if (!name.startsWith("priority")) {
      continue;
    }
    double priority=ParamUtil.getDouble(actionRequest,name);
    long resourcePrimKey=GetterUtil.getLong(name.substring(8));
    resourcePrimKeyToPriorityMap.put(resourcePrimKey,priority);
  }
  KBArticleServiceUtil.updateKBArticlesPriorities(themeDisplay.getScopeGroupId(),resourcePrimKeyToPriorityMap);
}
