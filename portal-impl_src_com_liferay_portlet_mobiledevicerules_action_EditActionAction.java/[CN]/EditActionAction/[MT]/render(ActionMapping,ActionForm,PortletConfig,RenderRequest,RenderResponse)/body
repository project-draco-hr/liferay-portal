{
  long ruleGroupInstanceId=ParamUtil.getLong(renderRequest,MDRPortletConstants.MDR_RULE_GROUP_INSTANCE_ID);
  long actionId=ParamUtil.getLong(renderRequest,MDRPortletConstants.MDR_ACTION_ID);
  MDRAction mdrAction=MDRActionServiceUtil.fetchAction(actionId);
  boolean isAddAction=Validator.isNull(mdrAction);
  String type=StringPool.BLANK;
  if (!isAddAction) {
    ruleGroupInstanceId=mdrAction.getRuleGroupInstanceId();
    type=mdrAction.getType();
  }
  MDRRuleGroupInstance ruleGroupInstance=MDRRuleGroupInstanceLocalServiceUtil.getMDRRuleGroupInstance(ruleGroupInstanceId);
  String editorJSP=getEditorJSP(type);
  renderRequest.setAttribute(MDRPortletConstants.MDR_RULE_GROUP_INSTANCE,ruleGroupInstance);
  renderRequest.setAttribute(MDRPortletConstants.MDR_ACTION,mdrAction);
  renderRequest.setAttribute(MDRPortletConstants.TYPE,type);
  renderRequest.setAttribute(MDRPortletConstants.EDITOR_JSP,editorJSP);
  return mapping.findForward("portlet.mobile_device_rules_admin.edit_action");
}
