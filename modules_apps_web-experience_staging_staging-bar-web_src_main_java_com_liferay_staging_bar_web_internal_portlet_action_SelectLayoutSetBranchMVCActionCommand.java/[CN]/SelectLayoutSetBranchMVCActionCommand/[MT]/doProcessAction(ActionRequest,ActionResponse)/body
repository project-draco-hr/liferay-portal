{
  try {
    HttpServletRequest request=PortalUtil.getHttpServletRequest(actionRequest);
    long groupId=ParamUtil.getLong(actionRequest,"groupId");
    boolean privateLayout=ParamUtil.getBoolean(actionRequest,"privateLayout");
    LayoutSet layoutSet=_layoutSetLocalService.getLayoutSet(groupId,privateLayout);
    long layoutSetBranchId=ParamUtil.getLong(actionRequest,"layoutSetBranchId");
    LayoutSetBranch layoutSetBranch=_layoutSetBranchLocalService.getLayoutSetBranch(layoutSetBranchId);
    StagingUtil.setRecentLayoutSetBranchId(request,layoutSet.getLayoutSetId(),layoutSetBranch.getLayoutSetBranchId());
    ActionUtil.addLayoutBranchSessionMessages(actionRequest,actionResponse);
  }
 catch (  Exception e) {
    SessionErrors.add(actionRequest,e.getClass(),e);
    actionResponse.setRenderParameter("mvcPath","/error.jsp");
  }
}
