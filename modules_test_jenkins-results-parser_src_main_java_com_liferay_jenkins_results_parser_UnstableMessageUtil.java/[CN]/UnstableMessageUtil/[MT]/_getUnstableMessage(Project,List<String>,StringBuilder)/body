{
  int failureCount=0;
  for (  String runBuildURL : runBuildURLs) {
    JSONObject runBuildURLJSONObject=JenkinsResultsParserUtil.toJSONObject(JenkinsResultsParserUtil.getLocalURL(runBuildURL + "api/json"));
    String result=runBuildURLJSONObject.getString("result");
    if (result.equals("FAILURE")) {
      if (failureCount == 3) {
        failureCount++;
        sb.append("<li>...</li>");
        return failureCount;
      }
      _getFailureMessage(runBuildURL,sb);
      failureCount++;
      continue;
    }
    JSONObject testReportJSONObject=JenkinsResultsParserUtil.toJSONObject(JenkinsResultsParserUtil.getLocalURL(runBuildURL + "testReport/api/json"));
    JSONArray suitesJSONArray=testReportJSONObject.getJSONArray("suites");
    for (int i=0; i < suitesJSONArray.length(); i++) {
      JSONObject suiteJSONObject=suitesJSONArray.getJSONObject(i);
      JSONArray casesJSONArray=suiteJSONObject.getJSONArray("cases");
      for (int j=0; j < casesJSONArray.length(); j++) {
        JSONObject caseJSONObject=casesJSONArray.getJSONObject(j);
        String status=caseJSONObject.getString("status");
        if (status.equals("FIXED") || status.equals("PASSED") || status.equals("SKIPPED")) {
          continue;
        }
        if (failureCount == 3) {
          failureCount++;
          sb.append("<li>...</li>");
          return failureCount;
        }
        sb.append("<li><a href=\"");
        String runBuildHREF=runBuildURL;
        runBuildHREF=runBuildHREF.replace("[","_");
        runBuildHREF=runBuildHREF.replace("]","_");
        runBuildHREF=runBuildHREF.replace("#","_");
        sb.append(runBuildHREF);
        sb.append("/testReport/");
        String testClassName=caseJSONObject.getString("className");
        int x=testClassName.lastIndexOf(".");
        String testPackageName=testClassName.substring(0,x);
        sb.append(testPackageName);
        sb.append("/");
        String testSimpleClassName=testClassName.substring(x + 1);
        sb.append(testSimpleClassName);
        sb.append("/");
        String testMethodName=caseJSONObject.getString("name");
        String testMethodNameURL=testMethodName;
        testMethodNameURL=testMethodNameURL.replace("[","_");
        testMethodNameURL=testMethodNameURL.replace("]","_");
        testMethodNameURL=testMethodNameURL.replace("#","_");
        if (testPackageName.equals("junit.framework")) {
          testMethodNameURL=testMethodNameURL.replace(".","_");
        }
        sb.append(testMethodNameURL);
        sb.append("\">");
        String jobVariant=JenkinsResultsParserUtil.getJobVariant(runBuildURLJSONObject);
        if (jobVariant.contains("functional")) {
          String testName=testMethodName.substring(5,testMethodName.length() - 1);
          sb.append(testName);
          sb.append("</a> - ");
          String logURL=_getLogURL(jobVariant,project,runBuildURLJSONObject);
          sb.append("<a href=\"");
          sb.append(logURL);
          sb.append("/");
          sb.append(testName.replace("#","_"));
          sb.append("/index.html.gz\">Poshi Report</a> - ");
          sb.append("<a href=\"");
          sb.append(logURL);
          sb.append("/");
          sb.append(testName.replace("#","_"));
          sb.append("/summary.html.gz\">Poshi Summary</a> - ");
          sb.append("<a href=\"");
          sb.append(logURL);
          sb.append("/jenkins-console.txt.gz\">Console Output</a>");
          if (Boolean.parseBoolean(project.getProperty("record.liferay.log"))) {
            sb.append(" - ");
            sb.append("<a href=\"");
            sb.append(logURL);
            sb.append("/liferay-log.txt.gz\">Liferay Log</a>");
          }
        }
 else {
          sb.append(testSimpleClassName);
          sb.append(".");
          sb.append(testMethodName);
          sb.append("</a>");
        }
        sb.append("</li>");
        failureCount++;
      }
    }
  }
  return failureCount;
}
