{
  portletId=PortalUtil.getJsSafePortletName(portletId);
  PortletPK pk=new PortletPK(portletId,companyId);
  Portlet portlet=null;
  try {
    portlet=PortletUtil.findByPrimaryKey(pk);
  }
 catch (  NoSuchPortletException nspe) {
    portlet=PortletUtil.create(pk);
  }
  portlet.setRoles(roles);
  portlet.setActive(active);
  PortletUtil.update(portlet);
  portlet=getPortletById(companyId,portletId);
  portlet.setRoles(roles);
  portlet.setActive(active);
  return portlet;
}
