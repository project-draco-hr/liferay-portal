{
  ServiceTrackerMap<String,TrackedOne> serviceTrackerMap=ServiceTrackerMapFactory.createObjectServiceTrackerMap(TrackedOne.class,"(&(target=*)(other=*))",new ServiceReferenceMapper<String>(){
    @Override public void map(    ServiceReference<?> serviceReference,    Emitter<String> keys){
      keys.emit(serviceReference.getProperty("target") + " - " + serviceReference.getProperty("other"));
    }
  }
);
  serviceTrackerMap.open();
  Dictionary<String,String> properties=new Hashtable<String,String>();
  properties.put("other","aProperty");
  properties.put("target","aTarget");
  _bundleContext.registerService(TrackedOne.class,new TrackedOne(),properties);
  Assert.assertNotNull(serviceTrackerMap.getService("aTarget - aProperty"));
}
