{
  ServiceTrackerMap<String,TrackedOne> ServiceTrackerMap=ServiceTrackerMapFactory.createObjectServiceTrackerMap(TrackedOne.class,"(&(target=*)(other=*))",new ServiceReferenceMapper<String>(){
    @Override public void map(    ServiceReference<?> serviceReference,    Emitter<String> keys){
      keys.emit(serviceReference.getProperty("target") + " - " + serviceReference.getProperty("other"));
    }
  }
);
  ServiceTrackerMap.open();
  Dictionary<String,String> properties=new Hashtable<String,String>();
  properties.put("target","aTarget");
  properties.put("other","aProperty");
  _bundleContext.registerService(TrackedOne.class,new TrackedOne(),properties);
  Assert.assertNotNull(ServiceTrackerMap.getService("aTarget - aProperty"));
}
