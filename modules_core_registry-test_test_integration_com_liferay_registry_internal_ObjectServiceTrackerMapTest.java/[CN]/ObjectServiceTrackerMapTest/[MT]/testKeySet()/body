{
  try (ServiceTrackerMap<String,TrackedOne> serviceTrackerMap=createServiceTrackerMap()){
    ServiceRegistration<TrackedOne> sr1=registerService(new TrackedOne(),"aTarget");
    ServiceRegistration<TrackedOne> sr2=registerService(new TrackedOne(),"aTarget");
    ServiceRegistration<TrackedOne> sr3=registerService(new TrackedOne(),"aTarget2");
    ServiceRegistration<TrackedOne> sr4=registerService(new TrackedOne(),"aTarget2");
    Set<String> keySet=serviceTrackerMap.keySet();
    Assert.assertEquals(keySet,new HashSet<String>(){
{
        add("aTarget");
        add("aTarget2");
      }
    }
);
    sr1.unregister();
    sr2.unregister();
    sr3.unregister();
    sr4.unregister();
  }
 }
