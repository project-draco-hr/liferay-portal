{
  DynamicQuery dynamicQuery=UserGroupGroupRoleLocalServiceUtil.dynamicQuery();
  dynamicQuery.add(RestrictionsFactoryUtil.eq("id.groupId",stagingGroup.getGroupId()));
  List<UserGroupGroupRole> staged=UserGroupGroupRoleLocalServiceUtil.dynamicQuery(dynamicQuery);
  if (staged.isEmpty()) {
    return;
  }
  dynamicQuery=UserGroupGroupRoleLocalServiceUtil.dynamicQuery();
  dynamicQuery.add(RestrictionsFactoryUtil.eq("id.groupId",stagingGroup.getLiveGroupId()));
  List<UserGroupGroupRole> live=UserGroupGroupRoleLocalServiceUtil.dynamicQuery(dynamicQuery);
  for (  UserGroupGroupRole userGroupGroupRole : staged) {
    userGroupGroupRole.setGroupId(stagingGroup.getLiveGroupId());
    if (!live.contains(userGroupGroupRole)) {
      UserGroupGroupRoleLocalServiceUtil.updateUserGroupGroupRole(userGroupGroupRole);
    }
  }
  UserGroupGroupRoleLocalServiceUtil.deleteUserGroupGroupRolesByGroupId(stagingGroup.getGroupId());
}
