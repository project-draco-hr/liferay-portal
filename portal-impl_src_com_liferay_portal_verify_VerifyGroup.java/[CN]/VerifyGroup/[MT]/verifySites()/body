{
  try (LoggingTimer loggingTimer=new LoggingTimer()){
    DynamicQuery dynamicQuery=DynamicQueryFactoryUtil.forClass(Group.class);
    dynamicQuery.add(RestrictionsFactoryUtil.eq("classNameId",PortalUtil.getClassNameId(Organization.class)));
    dynamicQuery.add(RestrictionsFactoryUtil.eq("site",false));
    List<Group> groups=GroupLocalServiceUtil.dynamicQuery(dynamicQuery);
    for (    Group group : groups) {
      if ((group.getPrivateLayoutsPageCount() > 0) || (group.getPublicLayoutsPageCount() > 0)) {
        group.setSite(true);
        GroupLocalServiceUtil.updateGroup(group);
      }
    }
  }
 }
