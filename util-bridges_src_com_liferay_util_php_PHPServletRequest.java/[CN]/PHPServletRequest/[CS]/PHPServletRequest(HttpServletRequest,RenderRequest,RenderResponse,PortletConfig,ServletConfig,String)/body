{
  super(req);
  _renderReq=renderReq;
  _renderRes=renderRes;
  _portletConfig=portletConfig;
  _config=config;
  StringBuffer queryStringBuffer=new StringBuffer();
  int index=phpURI.indexOf(StringPool.QUESTION);
  if (index != -1) {
    _path=phpURI.substring(0,index);
    queryStringBuffer.append(phpURI.substring(index + 1));
  }
 else {
    _path=phpURI;
  }
  if (GetterUtil.getBoolean(portletConfig.getInitParameter("add-portlet-params"),true)) {
    queryStringBuffer.append(StringPool.AMPERSAND);
    queryStringBuffer.append("portlet_namespace");
    queryStringBuffer.append(StringPool.EQUAL);
    queryStringBuffer.append(_renderRes.getNamespace());
    queryStringBuffer.append(StringPool.AMPERSAND);
    queryStringBuffer.append("portlet_name");
    queryStringBuffer.append(StringPool.EQUAL);
    queryStringBuffer.append(_portletConfig.getPortletName());
  }
  _queryString=queryStringBuffer.toString();
  req.setAttribute(QUERY_STRING,getQueryString());
  req.setAttribute(PATH_INFO,getPathInfo());
  req.setAttribute(REQUEST_URI,getRequestURI());
  req.setAttribute(SERVLET_PATH,_path);
}
