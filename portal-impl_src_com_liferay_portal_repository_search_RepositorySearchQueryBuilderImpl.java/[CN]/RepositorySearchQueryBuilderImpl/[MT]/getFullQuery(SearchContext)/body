{
  try {
    BooleanQuery contextQuery=new BooleanQueryImpl();
    addContext(contextQuery,searchContext);
    BooleanQuery searchQuery=new BooleanQueryImpl();
    addSearchKeywords(searchQuery,searchContext);
    BooleanQuery fullQuery=new BooleanQueryImpl();
    if (contextQuery.hasClauses()) {
      fullQuery.add(contextQuery,BooleanClauseOccur.MUST);
    }
    if (searchQuery.hasClauses()) {
      fullQuery.add(searchQuery,BooleanClauseOccur.MUST);
    }
    BooleanClause<Query>[] booleanClauses=searchContext.getBooleanClauses();
    if (booleanClauses != null) {
      for (      BooleanClause<Query> booleanClause : booleanClauses) {
        fullQuery.add(booleanClause.getClause(),booleanClause.getBooleanClauseOccur());
      }
    }
    fullQuery.setQueryConfig(searchContext.getQueryConfig());
    return fullQuery;
  }
 catch (  Exception e) {
    throw new SearchException(e);
  }
}
