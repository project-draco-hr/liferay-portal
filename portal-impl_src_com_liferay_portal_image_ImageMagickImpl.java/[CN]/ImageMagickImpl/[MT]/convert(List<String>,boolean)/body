{
  if (!isEnabled()) {
    throw new IllegalStateException("Cannot call \"convert\" when ImageMagick is disabled");
  }
  if (fork) {
    ProcessCallable<String[]> processCallable=new ImageMagickProcessCallable(ServerDetector.getServerId(),PropsUtil.get(PropsKeys.LIFERAY_HOME),Log4JUtil.getCustomLogSettings(),_globalSearchPath,getResourceLimits(),arguments,true);
    Future<String[]> future=ProcessExecutor.execute(ClassPathUtil.getPortalClassPath(),processCallable);
    future.get();
  }
 else {
    LiferayConvertCmd.run(_globalSearchPath,getResourceLimits(),arguments);
  }
}
