{
  ThemeDisplay themeDisplay=(ThemeDisplay)_request.getAttribute(WebKeys.THEME_DISPLAY);
  if (Validator.isNotNull(viewURL) && viewURL.startsWith(themeDisplay.getURLPortal())) {
    viewURL=HttpUtil.setParameter(viewURL,"inheritRedirect",isViewInContext());
    if (!isViewInContext()) {
      viewURL=HttpUtil.setParameter(viewURL,"redirect",currentURL);
    }
  }
  return viewURL;
}
