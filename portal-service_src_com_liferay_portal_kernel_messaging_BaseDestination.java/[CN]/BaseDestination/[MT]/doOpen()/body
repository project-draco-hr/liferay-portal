{
  if ((_threadPoolExecutor == null) || _threadPoolExecutor.isShutdown()) {
    ClassLoader classLoader=PortalClassLoaderUtil.getClassLoader();
    _threadPoolExecutor=new ThreadPoolExecutor(_workersCoreSize,_workersMaxSize,0L,TimeUnit.MILLISECONDS,new LinkedBlockingQueue<Runnable>(_maximumQueueSize),new NamedThreadFactory(getName(),Thread.NORM_PRIORITY,classLoader));
    if (_rejectedExecutionHandler == null) {
      _rejectedExecutionHandler=new RejectedExecutionHandler(){
        public void rejectedExecution(        Runnable r,        ThreadPoolExecutor executor){
          if (_log.isWarnEnabled()) {
            MessageRunnable messageRunnable=(MessageRunnable)r;
            _log.warn("Discard message : " + messageRunnable.getMessage() + ", exceeding the maximum queue size : "+ _maximumQueueSize);
          }
        }
      }
;
    }
    _threadPoolExecutor.setRejectedExecutionHandler(_rejectedExecutionHandler);
  }
}
