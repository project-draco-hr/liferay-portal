{
  if (hasFile(companyId,repositoryId,fileName)) {
    throw new DuplicateFileException(companyId,repositoryId,fileName);
  }
  try {
    S3Object s3Object=new S3Object(_s3Bucket,getKey(companyId,repositoryId,fileName,VERSION_DEFAULT));
    s3Object.setDataInputStream(is);
    _s3Service.putObject(_s3Bucket,s3Object);
  }
 catch (  S3ServiceException s3se) {
    throw new SystemException(s3se);
  }
 finally {
    StreamUtil.cleanUp(is);
  }
}
