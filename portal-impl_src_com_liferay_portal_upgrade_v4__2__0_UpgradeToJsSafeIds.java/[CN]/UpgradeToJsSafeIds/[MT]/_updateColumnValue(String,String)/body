{
  Connection con=null;
  PreparedStatement ps1=null;
  PreparedStatement ps2=null;
  ResultSet rs=null;
  try {
    con=DataAccess.getConnection();
    ps1=con.prepareStatement("SELECT " + column + " FROM "+ table+ " WHERE ("+ column+ " LIKE '%-%' OR "+ column+ " LIKE '% %') GROUP BY "+ column);
    ps2=con.prepareStatement("UPDATE " + table + " SET "+ column+ " = ? WHERE "+ column+ " = ?");
    rs=ps1.executeQuery();
    while (rs.next()) {
      String columnValue=rs.getString(column);
      String safeColumnValue=PortalUtil.getJsSafePortletId(columnValue);
      if (!columnValue.equals(safeColumnValue)) {
        ps2.setString(1,safeColumnValue);
        ps2.setString(2,columnValue);
        _log.info("Upgrading column value " + columnValue);
        int rowsUpdated=ps2.executeUpdate();
        if (rowsUpdated != 1) {
          _log.info("Column value " + columnValue + " not updated");
        }
      }
    }
  }
  finally {
    try {
      ps2.close();
    }
 catch (    Exception e) {
    }
    DataAccess.cleanUp(con,ps1,rs);
  }
}
