{
  long parentGroupId=GroupConstants.DEFAULT_PARENT_GROUP_ID;
  if (liveGroup.getParentGroupId() != GroupConstants.DEFAULT_PARENT_GROUP_ID) {
    Group parentGroup=liveGroup.getParentGroup();
    if (parentGroup.hasStagingGroup()) {
      parentGroup=parentGroup.getStagingGroup();
    }
    parentGroupId=parentGroup.getGroupId();
  }
  Group stagingGroup=groupLocalService.addGroup(userId,parentGroupId,liveGroup.getClassName(),liveGroup.getClassPK(),liveGroup.getGroupId(),liveGroup.getDescriptiveName(),liveGroup.getDescription(),liveGroup.getType(),liveGroup.isManualMembership(),liveGroup.getMembershipRestriction(),liveGroup.getFriendlyURL(),false,liveGroup.isActive(),serviceContext);
  if (!LanguageUtil.isInheritLocales(liveGroup.getGroupId())) {
    UnicodeProperties liveTypeSettingsProperties=liveGroup.getTypeSettingsProperties();
    String defaultLanguageId=liveTypeSettingsProperties.getProperty("languageId",LocaleUtil.toLanguageId(LocaleUtil.getDefault()));
    String locales=liveTypeSettingsProperties.getProperty(PropsKeys.LOCALES);
    UnicodeProperties stageTypeSettingsProperties=stagingGroup.getTypeSettingsProperties();
    stageTypeSettingsProperties.setProperty("inheritLocales",Boolean.FALSE.toString());
    stageTypeSettingsProperties.setProperty("languageId",defaultLanguageId);
    stageTypeSettingsProperties.setProperty(PropsKeys.LOCALES,locales);
    stagingGroup=groupLocalService.updateGroup(stagingGroup.getGroupId(),stageTypeSettingsProperties.toString());
  }
  return stagingGroup;
}
