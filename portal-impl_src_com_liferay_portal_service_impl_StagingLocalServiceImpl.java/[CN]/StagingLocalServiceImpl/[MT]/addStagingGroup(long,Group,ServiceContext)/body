{
  long parentGroupId=GroupConstants.DEFAULT_PARENT_GROUP_ID;
  if (liveGroup.getParentGroupId() != GroupConstants.DEFAULT_PARENT_GROUP_ID) {
    Group parentGroup=liveGroup.getParentGroup();
    if (parentGroup.hasStagingGroup()) {
      parentGroup=parentGroup.getStagingGroup();
    }
    parentGroupId=parentGroup.getGroupId();
  }
  Group stagingGroup=groupLocalService.addGroup(userId,parentGroupId,liveGroup.getClassName(),liveGroup.getClassPK(),liveGroup.getGroupId(),liveGroup.getNameMap(),liveGroup.getDescriptionMap(),liveGroup.getType(),liveGroup.isManualMembership(),liveGroup.getMembershipRestriction(),liveGroup.getFriendlyURL(),false,liveGroup.isActive(),serviceContext);
  if (LanguageUtil.isInheritLocales(liveGroup.getGroupId())) {
    return stagingGroup;
  }
  UnicodeProperties liveTypeSettingsProperties=liveGroup.getTypeSettingsProperties();
  UnicodeProperties stagingTypeSettingsProperties=stagingGroup.getTypeSettingsProperties();
  stagingTypeSettingsProperties.setProperty(PropsKeys.LOCALES,liveTypeSettingsProperties.getProperty(PropsKeys.LOCALES));
  stagingTypeSettingsProperties.setProperty(GroupConstants.INHERIT_LOCALES,Boolean.FALSE.toString());
  stagingTypeSettingsProperties.setProperty("languageId",liveTypeSettingsProperties.getProperty("languageId",LocaleUtil.toLanguageId(LocaleUtil.getDefault())));
  return groupLocalService.updateGroup(stagingGroup.getGroupId(),stagingTypeSettingsProperties.toString());
}
