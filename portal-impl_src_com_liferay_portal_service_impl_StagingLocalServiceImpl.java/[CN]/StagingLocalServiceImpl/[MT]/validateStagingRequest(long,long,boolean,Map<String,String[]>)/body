{
  try {
    ExportImportThreadLocal.setLayoutValidationInProcess(true);
    Folder folder=PortletFileRepositoryUtil.getPortletFolder(stagingRequestId);
    FileEntry fileEntry=getStagingRequestFileEntry(userId,stagingRequestId,folder);
    return layoutLocalService.validateImportLayoutsFile(userId,folder.getGroupId(),privateLayout,parameterMap,fileEntry.getContentStream());
  }
  finally {
    ExportImportThreadLocal.setLayoutValidationInProcess(false);
  }
}
