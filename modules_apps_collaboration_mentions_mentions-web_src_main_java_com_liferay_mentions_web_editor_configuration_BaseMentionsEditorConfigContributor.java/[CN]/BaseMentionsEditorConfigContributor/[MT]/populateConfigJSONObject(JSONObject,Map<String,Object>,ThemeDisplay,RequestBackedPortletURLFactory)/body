{
  JSONObject autoCompleteConfigJSONObject=JSONFactoryUtil.createJSONObject();
  autoCompleteConfigJSONObject.put("requestTemplate","query={query}");
  JSONArray triggerJSONArray=JSONFactoryUtil.createJSONArray();
  JSONObject triggerJSONObject=JSONFactoryUtil.createJSONObject();
  triggerJSONObject.put("resultFilters","function(query, results) {return results;}");
  triggerJSONObject.put("resultTextLocator","screenName");
  triggerJSONObject.put("term","@");
  triggerJSONObject.put("tplReplace","{mention}");
  StringBundler sb=new StringBundler(5);
  sb.append("<div class=\"nameplate\"><div class=\"nameplate-field\">");
  sb.append("<div class=\"user-icon\"><img class=\"img-circle\" ");
  sb.append("src=\"{portraitURL}\" height=\"32px\" width=\"32px\">");
  sb.append("</img></div></div><div class=\"nameplate-content\"><h4>");
  sb.append("{fullName}<small>@{screenName}</small></h4></div></div>");
  triggerJSONObject.put("tplResults",sb.toString());
  PortletURL autoCompleteUserURL=requestBackedPortletURLFactory.createResourceURL(MentionsPortletKeys.MENTIONS);
  String source=autoCompleteUserURL.toString() + "&" + PortalUtil.getPortletNamespace(MentionsPortletKeys.MENTIONS);
  triggerJSONObject.put("source",source);
  triggerJSONArray.put(triggerJSONObject);
  autoCompleteConfigJSONObject.put("regExp","(?:\\strigger|^trigger)(\\w[\\s\\w]*)");
  autoCompleteConfigJSONObject.put("trigger",triggerJSONArray);
  jsonObject.put("autocomplete",autoCompleteConfigJSONObject);
  String extraPlugins=jsonObject.getString("extraPlugins");
  if (Validator.isNotNull(extraPlugins)) {
    extraPlugins+=",autocomplete";
  }
 else {
    extraPlugins="autocomplete,ae_placeholder,ae_selectionregion,ae_uicore";
  }
  jsonObject.put("extraPlugins",extraPlugins);
}
