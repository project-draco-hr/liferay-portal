{
  KBFolder kbFolder=null;
  int kbArticlesCount=_kbArticleLocalService.getKBArticlesCount(groupId,ancestorKBFolder.getKbFolderId(),WorkflowConstants.STATUS_APPROVED);
  if (Validator.isNotNull(preferredKBFolderUrlTitle) && (kbArticlesCount == 0)) {
    kbFolder=_kbFolderLocalService.fetchKBFolderByUrlTitle(groupId,ancestorKBFolder.getKbFolderId(),preferredKBFolderUrlTitle);
  }
  if ((kbFolder == null) && (kbArticlesCount == 0)) {
    kbFolder=_kbFolderLocalService.fetchFirstChildKBFolder(groupId,ancestorKBFolder.getKbFolderId());
  }
  if (kbFolder == null) {
    kbFolder=ancestorKBFolder;
  }
  KBArticle kbArticle=_kbArticleLocalService.fetchFirstChildKBArticle(groupId,kbFolder.getKbFolderId());
  return new KBArticleSelection(kbArticle,true);
}
