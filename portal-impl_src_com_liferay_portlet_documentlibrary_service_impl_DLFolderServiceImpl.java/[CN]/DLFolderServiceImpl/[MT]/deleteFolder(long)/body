{
  DLFolder dlFolder=dlFolderLocalService.getFolder(folderId);
  DLFolderPermission.check(getPermissionChecker(),dlFolder,ActionKeys.DELETE);
  boolean hasLock=hasFolderLock(folderId);
  Lock lock=null;
  if (!hasLock) {
    lock=_lockFolder(folderId,null,false,DLFolderImpl.LOCK_EXPIRATION_TIME);
  }
  try {
    dlFolderLocalService.deleteFolder(folderId);
  }
  finally {
    if (!hasLock) {
      _unlockFolder(dlFolder.getGroupId(),folderId,lock.getUuid());
    }
  }
}
