{
  String value=_portalUpgradeDatabaseProperties.getProperty("jdbc.default.driverClassName");
  if ((value == null) || value.isEmpty()) {
    String response=null;
    Database dataSource=null;
    while (dataSource == null) {
      System.out.print("[ ");
      for (      String database : _databases.keySet()) {
        System.out.print(database + " ");
      }
      System.out.println("]");
      System.out.println("Please enter your database (mysql): ");
      response=_consoleReader.readLine();
      if (response.isEmpty()) {
        response="mysql";
      }
      dataSource=_databases.get(response);
      if (dataSource == null) {
        System.err.println(response + " is an unsupported database.");
      }
    }
    System.out.println("Please enter your database JDBC driver protocol (" + dataSource.getProtocol() + "): ");
    response=_consoleReader.readLine();
    if (!response.isEmpty()) {
      dataSource.setProtocol(response);
    }
    System.out.println("Please enter your database JDBC driver class name(" + dataSource.getClassName() + "): ");
    response=_consoleReader.readLine();
    if (!response.isEmpty()) {
      dataSource.setClassName(response);
    }
    System.out.println("Please enter your database host (" + dataSource.getHost() + "): ");
    response=_consoleReader.readLine();
    if (!response.isEmpty()) {
      dataSource.setHost(response);
    }
    String portString;
    if (dataSource.getPort() > 0) {
      portString=String.valueOf(dataSource.getPort());
    }
 else {
      portString="none";
    }
    System.out.println("Please enter your database port (" + portString + "): ");
    response=_consoleReader.readLine();
    if (!response.isEmpty()) {
      if (response.equals("none")) {
        dataSource.setPort(0);
      }
 else {
        dataSource.setPort(Integer.parseInt(response));
      }
    }
    System.out.println("Please enter your database name (" + dataSource.getDatabaseName() + "): ");
    response=_consoleReader.readLine();
    if (!response.isEmpty()) {
      dataSource.setDatabaseName(response);
    }
    System.out.println("Please enter your database username: ");
    String username=_consoleReader.readLine();
    System.out.println("Please enter your database password: ");
    String password=_consoleReader.readLine();
    _portalUpgradeDatabaseProperties.setProperty("jdbc.default.driverClassName",dataSource.getClassName());
    _portalUpgradeDatabaseProperties.setProperty("jdbc.default.url",dataSource.getURL());
    _portalUpgradeDatabaseProperties.setProperty("jdbc.default.username",username);
    _portalUpgradeDatabaseProperties.setProperty("jdbc.default.password",password);
  }
}
