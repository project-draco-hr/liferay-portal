{
  try {
    Options options=_getOptions();
    CommandLineParser commandLineParser=new DefaultParser();
    CommandLine commandLine=commandLineParser.parse(options,args);
    if (commandLine.hasOption("help")) {
      HelpFormatter helpFormatter=new HelpFormatter();
      helpFormatter.printHelp("Liferay Portal Tools Database Upgrade Client",options);
      return;
    }
    String jvmOpts=null;
    if (commandLine.hasOption("jvmOpts")) {
      jvmOpts=commandLine.getOptionValue("jvmOpts");
    }
 else {
      jvmOpts="-Dfile.encoding=UTF8 -Duser.country=US " + "-Duser.language=en -Duser.timezone=GMT -Xmx2048m ";
    }
    File logFile=null;
    if (commandLine.hasOption("logFile")) {
      logFile=new File(commandLine.getOptionValue("logFile"));
    }
 else {
      logFile=new File("upgrade.log");
    }
    if (logFile.exists()) {
      String logFileName=logFile.getName();
      logFile.renameTo(new File(logFileName + "." + logFile.lastModified()));
      logFile=new File(logFileName);
    }
    boolean noShell=false;
    if (commandLine.hasOption("noShell")) {
      noShell=true;
    }
    UpgradeClient upgradeClient=new UpgradeClient(jvmOpts,logFile,noShell);
    upgradeClient.upgrade();
  }
 catch (  ParseException pe) {
    System.err.println("Unable to parse command line properties");
    pe.printStackTrace();
  }
catch (  Exception e) {
    System.err.println("Error running upgrade");
    e.printStackTrace();
  }
}
