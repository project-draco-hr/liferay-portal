{
  try {
    ClassLoader classLoader=getClass().getClassLoader();
    SAXReader reader=new SAXReader();
    Document doc=reader.read(classLoader.getResourceAsStream("com/liferay/portlet/themegallery/dependencies/gallery.xml"));
    Element root=doc.getRootElement();
    _categories=StringUtil.split(root.elementText("available-categories"));
    for (int i=0; i < _categories.length; i++) {
      _entriesByCategory.put(_categories[i],new ArrayList());
    }
    List allEntries=new ArrayList();
    _entriesByCategory.put("ALL",allEntries);
    Iterator itr=root.elements("entry").iterator();
    while (itr.hasNext()) {
      Element entryEl=(Element)itr.next();
      String download=entryEl.elementText("download");
      String version=ReleaseInfo.getVersion();
      version=StringUtil.replace(version," ","");
      version=version.toLowerCase();
      download=StringUtil.replace(download,".war","-" + version + ".war");
      ThemeEntry entry=new ThemeEntry(entryEl.attributeValue("name"),entryEl.elementText("description"),download,entryEl.elementText("image-large"),entryEl.elementText("image-medium"),entryEl.elementText("image-small"));
      String[] categories=StringUtil.split(entryEl.elementText("categories"));
      for (int i=0; i < categories.length; i++) {
        List entries=(List)_entriesByCategory.get(categories[i]);
        entries.add(entry);
      }
      allEntries.add(entry);
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}
