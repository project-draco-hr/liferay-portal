{
  boolean found=false;
  try {
    String text=_doc.getText(0);
    String searchText=getText(_findField.getDocument());
    if (!_caseSensitive.isSelected()) {
      text=text.toLowerCase();
      searchText=searchText.toLowerCase();
    }
    int index=-1;
    if (direction == SEARCH_BWD) {
      int last=_textPane.getCaretPosition() - searchText.length();
      if (last < 0)       last=text.length() - 1;
      index=text.substring(0,last).lastIndexOf(searchText);
      if (index == -1) {
        index=text.lastIndexOf(searchText);
      }
    }
 else {
      int start=_textPane.getCaretPosition();
      if (direction == SEARCH_HERE && _textPane.getSelectedText() != null) {
        start=_textPane.getSelectionStart();
      }
      index=text.indexOf(searchText,start);
      if (index == -1) {
        index=text.indexOf(searchText);
      }
    }
    if (index != -1) {
      _textPane.setSelectionStart(index);
      _textPane.setSelectionEnd(index + searchText.length());
      found=true;
    }
  }
 catch (  BadLocationException ex) {
    ex.printStackTrace();
  }
  if (atomicCall) {
    if (found) {
      _textPane.requestFocus();
    }
 else {
      _findField.requestFocus();
      getToolkit().beep();
    }
  }
  return found;
}
