{
  String basedir="./util-taglib/src/META-INF/";
  if (!FileUtil.exists(basedir)) {
    return;
  }
  List<File> list=new ArrayList<File>();
  DirectoryScanner ds=new DirectoryScanner();
  ds.setBasedir(basedir);
  ds.setIncludes(new String[]{"**\\*.tld"});
  ds.scan();
  list.addAll(ListUtil.fromArray(ds.getIncludedFiles()));
  String[] files=list.toArray(new String[list.size()]);
  for (int i=0; i < files.length; i++) {
    File file=new File(basedir + files[i]);
    String content=FileUtil.read(file);
    Document document=SAXReaderUtil.read(new StringReader(StringUtil.replace(content,"xml/ns/j2ee/web-jsptaglibrary_2_0.xsd","dtd/web-jsptaglibrary_1_2.dtd")));
    Element root=document.getRootElement();
    _sortElements(root,"tag","name");
    List<Element> tagEls=root.elements("tag");
    for (    Element tagEl : tagEls) {
      _sortElements(tagEl,"attribute","name");
      Element dynamicAttributesEl=tagEl.element("dynamic-attributes");
      if (dynamicAttributesEl != null) {
        dynamicAttributesEl.detach();
        tagEl.add(dynamicAttributesEl);
      }
    }
    String newContent=document.formattedString();
    int x=newContent.indexOf("<tlib-version");
    int y=newContent.indexOf("</taglib>");
    newContent=newContent.substring(x,y);
    x=content.indexOf("<tlib-version");
    y=content.indexOf("</taglib>");
    newContent=content.substring(0,x) + newContent + content.substring(y);
    if (!content.equals(newContent)) {
      FileUtil.write(file,newContent);
      System.out.println(file);
    }
  }
}
