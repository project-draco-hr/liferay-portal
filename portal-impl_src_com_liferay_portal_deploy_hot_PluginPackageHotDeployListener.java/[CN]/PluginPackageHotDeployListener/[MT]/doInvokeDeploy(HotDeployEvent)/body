{
  ServletContext servletContext=event.getServletContext();
  String servletContextName=servletContext.getServletContextName();
  ClassLoader pluginClassLoader=event.getContextClassLoader();
  if (_log.isDebugEnabled()) {
    _log.debug("Invoking deploy for " + servletContextName);
  }
  if (servletContext.getResource("/WEB-INF/liferay-theme-loader.xml") != null) {
    return;
  }
  PluginPackage pluginPackage=readPluginPackage(servletContext);
  if (pluginPackage == null) {
    return;
  }
  pluginPackage.setContext(servletContextName);
  event.setPluginPackage(pluginPackage);
  PluginPackageUtil.registerInstalledPluginPackage(pluginPackage);
  if (_log.isInfoEnabled()) {
    _log.info("Plugin package " + pluginPackage.getModuleId() + " registered successfully");
  }
  _processServiceBuilderProperties=false;
  String serviceXml=HttpUtil.URLtoString(servletContext.getResource("/WEB-INF/" + Portal.SERVICE_XML_FILE_NAME_STANDARD));
  if (serviceXml != null) {
    processServiceBuilderProperties(servletContext,pluginClassLoader);
  }
}
