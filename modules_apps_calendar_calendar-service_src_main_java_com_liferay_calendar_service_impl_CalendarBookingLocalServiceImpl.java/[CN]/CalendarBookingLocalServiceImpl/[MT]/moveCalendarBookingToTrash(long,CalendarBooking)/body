{
  if (!calendarBooking.isMasterBooking()) {
    return calendarBooking;
  }
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setUserId(userId);
  calendarBookingLocalService.updateStatus(userId,calendarBooking,CalendarBookingWorkflowConstants.STATUS_IN_TRASH,serviceContext);
  socialActivityCounterLocalService.disableActivityCounters(CalendarBooking.class.getName(),calendarBooking.getCalendarBookingId());
  socialActivityLocalService.addActivity(userId,calendarBooking.getGroupId(),CalendarBooking.class.getName(),calendarBooking.getCalendarBookingId(),SocialActivityConstants.TYPE_MOVE_TO_TRASH,getExtraDataJSON(calendarBooking),0);
  workflowInstanceLinkLocalService.deleteWorkflowInstanceLinks(calendarBooking.getCompanyId(),calendarBooking.getGroupId(),CalendarBooking.class.getName(),calendarBooking.getCalendarBookingId());
  return calendarBooking;
}
