{
  Map<Long,String> indexNames=new HashMap<Long,String>();
  for (  long companyId : PortalInstances.getCompanyIds()) {
    String backupName=null;
    backupName="search-" + companyId + "-"+ System.currentTimeMillis();
    SearchEngineUtil.backup(companyId,SearchEngineUtil.SYSTEM_ENGINE_ID,backupName);
    indexNames.put(companyId,backupName);
  }
  GroupTestUtil.addGroup();
  for (  Map.Entry<Long,String> entry : indexNames.entrySet()) {
    String backupFileName=entry.getValue();
    SearchEngineUtil.restore(entry.getKey(),backupFileName);
    SearchEngineUtil.removeBackup(entry.getKey(),backupFileName);
  }
}
