{
  DLFolder dlFolder=getDLFolder(entry.getClassPK());
  String restoredTitle=dlFolder.getName();
  if (Validator.isNotNull(newName)) {
    restoredTitle=newName;
  }
  String originalTitle=restoredTitle;
  if (restoredTitle.indexOf(StringPool.FORWARD_SLASH) > 0) {
    originalTitle=restoredTitle.substring(0,restoredTitle.indexOf(StringPool.FORWARD_SLASH));
  }
  DLFolder duplicatedFolder=DLFolderLocalServiceUtil.fetchFolder(dlFolder.getGroupId(),dlFolder.getParentFolderId(),originalTitle);
  if (duplicatedFolder != null) {
    DuplicateTrashEntryException dtee=new DuplicateTrashEntryException();
    dtee.setDuplicateEntryId(duplicatedFolder.getFolderId());
    dtee.setOldName(duplicatedFolder.getName());
    dtee.setTrashEntryId(entry.getEntryId());
    throw dtee;
  }
}
