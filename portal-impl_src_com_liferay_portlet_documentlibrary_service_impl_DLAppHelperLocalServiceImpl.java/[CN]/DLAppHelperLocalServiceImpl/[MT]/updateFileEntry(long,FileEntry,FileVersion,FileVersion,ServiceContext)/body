{
  if (!DLAppHelperThreadLocal.isEnabled()) {
    return;
  }
  if (Validator.equals(serviceContext.getCommand(),Constants.REVERT)) {
    List<AssetCategory> assetCategories=assetCategoryLocalService.getCategories(DLFileEntryConstants.getClassName(),fileEntry.getFileEntryId());
    List<Long> assetCategoryIds=ListUtil.toList(assetCategories,AssetCategory.CATEGORY_ID_ACCESSOR);
    serviceContext.setAssetCategoryIds(ArrayUtil.toLongArray(assetCategoryIds));
  }
  updateAsset(userId,fileEntry,destinationFileVersion,serviceContext.getAssetCategoryIds(),serviceContext.getAssetTagNames(),serviceContext.getAssetLinkEntryIds());
}
