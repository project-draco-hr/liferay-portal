{
  DLFileShortcut dlFileShortcut=(DLFileShortcut)fileShortcut.getModel();
  if (dlFileShortcut.isInTrash()) {
    throw new TrashEntryException();
  }
  int oldStatus=dlFileShortcut.getStatus();
  dlFileShortcutLocalService.updateStatus(userId,fileShortcut.getFileShortcutId(),WorkflowConstants.STATUS_IN_TRASH,new ServiceContext());
  JSONObject extraDataJSONObject=JSONFactoryUtil.createJSONObject();
  extraDataJSONObject.put("title",TrashUtil.getOriginalTitle(fileShortcut.getToTitle()));
  SocialActivityManagerUtil.addActivity(userId,fileShortcut,SocialActivityConstants.TYPE_MOVE_TO_TRASH,extraDataJSONObject.toString(),0);
  trashEntryLocalService.addTrashEntry(userId,fileShortcut.getGroupId(),DLFileShortcutConstants.getClassName(),fileShortcut.getFileShortcutId(),fileShortcut.getUuid(),null,oldStatus,null,null);
  return fileShortcut;
}
