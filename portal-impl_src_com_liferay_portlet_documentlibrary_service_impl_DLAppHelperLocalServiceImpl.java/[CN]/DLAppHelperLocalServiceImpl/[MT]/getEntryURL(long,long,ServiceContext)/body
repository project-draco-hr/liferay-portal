{
  HttpServletRequest request=serviceContext.getRequest();
  if (request == null) {
    return StringPool.BLANK;
  }
  String portletId=PortletKeys.DOCUMENT_LIBRARY;
  long plid=serviceContext.getPlid();
  long controlPanelPlid=PortalUtil.getControlPanelPlid(serviceContext.getCompanyId());
  if (plid == controlPanelPlid) {
    plid=PortalUtil.getPlidFromPortletId(groupId,PortletKeys.DOCUMENT_LIBRARY);
  }
  if (plid == LayoutConstants.DEFAULT_PLID) {
    portletId=PortletKeys.DOCUMENT_LIBRARY_ADMIN;
    plid=controlPanelPlid;
  }
  PortletURL portletURL=PortletURLFactoryUtil.create(request,portletId,plid,PortletRequest.RENDER_PHASE);
  portletURL.setParameter("struts_action","/document_library/view_file_entry");
  portletURL.setParameter("fileEntryId",String.valueOf(fileEntryId));
  return portletURL.toString();
}
