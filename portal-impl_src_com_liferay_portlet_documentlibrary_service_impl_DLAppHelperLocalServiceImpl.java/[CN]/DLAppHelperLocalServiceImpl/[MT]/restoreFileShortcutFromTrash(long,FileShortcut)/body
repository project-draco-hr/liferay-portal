{
  DLFileShortcut dlFileShortcut=(DLFileShortcut)fileShortcut.getModel();
  if (!dlFileShortcut.isInTrash()) {
    throw new RestoreEntryException(RestoreEntryException.INVALID_STATUS);
  }
  TrashEntry trashEntry=trashEntryLocalService.getEntry(DLFileShortcutConstants.getClassName(),fileShortcut.getFileShortcutId());
  dlFileShortcutLocalService.updateStatus(userId,fileShortcut.getFileShortcutId(),trashEntry.getStatus(),new ServiceContext());
  JSONObject extraDataJSONObject=JSONFactoryUtil.createJSONObject();
  extraDataJSONObject.put("title",fileShortcut.getToTitle());
  SocialActivityManagerUtil.addActivity(userId,fileShortcut,SocialActivityConstants.TYPE_RESTORE_FROM_TRASH,extraDataJSONObject.toString(),0);
  trashEntryLocalService.deleteEntry(trashEntry.getEntryId());
}
