{
  if (DLAppHelperThreadLocal.isEnabled()) {
    subscriptionLocalService.deleteSubscriptions(fileEntry.getCompanyId(),DLFileEntryConstants.getClassName(),fileEntry.getFileEntryId());
    DLProcessorRegistryUtil.cleanUp(fileEntry);
    dlFileRankLocalService.deleteFileRanksByFileEntryId(fileEntry.getFileEntryId());
    dlFileShortcutLocalService.deleteFileShortcuts(fileEntry.getFileEntryId());
    registerDLSyncEventCallback(DLSyncConstants.EVENT_DELETE,fileEntry);
    assetEntryLocalService.deleteEntry(DLFileEntryConstants.getClassName(),fileEntry.getFileEntryId());
    mbMessageLocalService.deleteDiscussionMessages(DLFileEntryConstants.getClassName(),fileEntry.getFileEntryId());
    ratingsStatsLocalService.deleteStats(DLFileEntryConstants.getClassName(),fileEntry.getFileEntryId());
  }
  if (fileEntry.getModel() instanceof DLFileEntry) {
    DLFileEntry dlFileEntry=(DLFileEntry)fileEntry.getModel();
    if (dlFileEntry.isInTrashExplicitly()) {
      trashEntryLocalService.deleteEntry(DLFileEntryConstants.getClassName(),fileEntry.getFileEntryId());
    }
 else {
      List<DLFileVersion> dlFileVersions=dlFileEntry.getFileVersions(WorkflowConstants.STATUS_ANY);
      for (      DLFileVersion dlFileVersion : dlFileVersions) {
        trashVersionLocalService.deleteTrashVersion(DLFileVersion.class.getName(),dlFileVersion.getFileVersionId());
      }
    }
  }
}
