{
  long fileEntryId=fileEntry.getFileEntryId();
  boolean hasLock=dlFileEntryLocalService.hasFileEntryLock(userId,fileEntryId);
  if (!hasLock) {
    dlFileEntryLocalService.lockFileEntry(userId,fileEntryId);
  }
  try {
    return moveFileEntryFromTrashImpl(userId,fileEntry,newFolderId,serviceContext);
  }
  finally {
    if (!hasLock) {
      dlFileEntryLocalService.unlockFileEntry(fileEntryId);
    }
  }
}
