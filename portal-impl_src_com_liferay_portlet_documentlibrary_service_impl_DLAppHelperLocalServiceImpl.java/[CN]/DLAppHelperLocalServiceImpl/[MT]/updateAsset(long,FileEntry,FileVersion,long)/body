{
  long[] assetCategoryIds=assetCategoryLocalService.getCategoryIds(DLFileEntryConstants.getClassName(),assetClassPk);
  String[] assetTagNames=assetTagLocalService.getTagNames(DLFileEntryConstants.getClassName(),assetClassPk);
  AssetEntry assetEntry=assetEntryLocalService.fetchEntry(DLFileEntryConstants.getClassName(),assetClassPk);
  List<AssetLink> assetLinks=null;
  if (assetEntry != null) {
    assetLinks=assetLinkLocalService.getDirectLinks(assetEntry.getEntryId(),false);
  }
  long[] assetLinkIds=ListUtil.toLongArray(assetLinks,AssetLink.ENTRY_ID2_ACCESSOR);
  return updateAsset(userId,fileEntry,fileVersion,assetCategoryIds,assetTagNames,assetLinkIds);
}
