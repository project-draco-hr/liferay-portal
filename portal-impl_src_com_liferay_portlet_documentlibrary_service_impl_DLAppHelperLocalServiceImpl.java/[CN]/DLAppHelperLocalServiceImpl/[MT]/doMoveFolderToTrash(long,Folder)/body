{
  DLFolder dlFolder=dlFolderLocalService.updateStatus(userId,folder.getFolderId(),WorkflowConstants.STATUS_IN_TRASH,new HashMap<String,Serializable>(),new ServiceContext());
  TrashEntry trashEntry=trashEntryLocalService.getEntry(DLFolderConstants.getClassName(),dlFolder.getFolderId());
  String trashTitle=TrashUtil.getTrashTitle(trashEntry.getEntryId());
  dlFolder.setName(trashTitle);
  dlFolderPersistence.update(dlFolder);
  dlFileRankLocalService.disableFileRanksByFolderId(folder.getFolderId());
  registerDLSyncCallback(DLSyncConstants.EVENT_DELETE,DLSyncConstants.TYPE_FOLDER,folder.getFolderId());
  socialActivityCounterLocalService.disableActivityCounters(DLFolderConstants.class.getName(),folder.getFolderId());
  socialActivityLocalService.addActivity(userId,folder.getGroupId(),DLFolderConstants.getClassName(),folder.getFolderId(),SocialActivityConstants.TYPE_MOVE_TO_TRASH,StringPool.BLANK,0);
  return new LiferayFolder(dlFolder);
}
