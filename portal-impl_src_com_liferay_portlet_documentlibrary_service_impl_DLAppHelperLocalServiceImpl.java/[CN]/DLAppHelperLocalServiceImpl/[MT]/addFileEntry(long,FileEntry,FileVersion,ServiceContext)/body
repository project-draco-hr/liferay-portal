{
  updateAsset(userId,fileEntry,fileVersion,serviceContext.getAssetCategoryIds(),serviceContext.getAssetTagNames(),serviceContext.getAssetLinkEntryIds());
  if (PropsValues.DL_FILE_ENTRY_COMMENTS_ENABLED) {
    mbMessageLocalService.addDiscussionMessage(fileEntry.getUserId(),fileEntry.getUserName(),fileEntry.getGroupId(),DLFileEntryConstants.getClassName(),fileEntry.getFileEntryId(),WorkflowConstants.ACTION_PUBLISH);
  }
  if (fileVersion instanceof LiferayFileVersion) {
    DLFileVersion dlFileVersion=(DLFileVersion)fileVersion.getModel();
    Map<String,Serializable> workflowContext=new HashMap<String,Serializable>();
    workflowContext.put("event",DLSyncConstants.EVENT_ADD);
    WorkflowHandlerRegistryUtil.startWorkflowInstance(dlFileVersion.getCompanyId(),dlFileVersion.getGroupId(),userId,DLFileEntry.class.getName(),dlFileVersion.getFileVersionId(),dlFileVersion,serviceContext,workflowContext);
  }
  registerDLProcessorCallback(fileEntry);
}
