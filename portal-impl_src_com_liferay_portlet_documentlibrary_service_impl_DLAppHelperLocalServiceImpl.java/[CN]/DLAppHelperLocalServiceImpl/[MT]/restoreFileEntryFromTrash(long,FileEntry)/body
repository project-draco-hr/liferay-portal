{
  DLFileEntry dlFileEntry=(DLFileEntry)fileEntry.getModel();
  FileVersion fileVersion=new LiferayFileVersion(dlFileEntry.getLatestFileVersion(true));
  TrashEntry trashEntry=trashEntryLocalService.getEntry(DLFileEntryConstants.getClassName(),fileEntry.getFileEntryId());
  dlFileEntryLocalService.updateStatus(userId,fileVersion.getFileVersionId(),trashEntry.getStatus(),new HashMap<String,Serializable>(),new ServiceContext());
  socialActivityCounterLocalService.enableActivityCounters(DLFileEntryConstants.getClassName(),fileEntry.getFileEntryId());
  socialActivityLocalService.addActivity(userId,fileEntry.getGroupId(),DLFileEntryConstants.getClassName(),fileEntry.getFileEntryId(),SocialActivityConstants.TYPE_RESTORE_FROM_TRASH,StringPool.BLANK,0);
  trashEntryLocalService.deleteTrashEntry(trashEntry.getEntryId());
}
