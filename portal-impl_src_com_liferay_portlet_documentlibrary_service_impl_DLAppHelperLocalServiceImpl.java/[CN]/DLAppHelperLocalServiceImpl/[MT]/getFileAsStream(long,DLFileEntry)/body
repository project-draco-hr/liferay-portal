{
  long groupId=fileEntry.getGroupId();
  long companyId=fileEntry.getCompanyId();
  long fileEntryId=fileEntry.getFileEntryId();
  if (userId > 0) {
    dlFileRankLocalService.updateFileRank(groupId,companyId,userId,fileEntryId,new ServiceContext());
  }
  if (PropsValues.DL_FILE_ENTRY_READ_COUNT_ENABLED) {
    assetEntryLocalService.incrementViewCounter(userId,DLFileEntry.class.getName(),fileEntryId);
    List<DLFileShortcut> fileShortcuts=dlFileShortcutPersistence.findByToFileEntryId(fileEntryId);
    for (    DLFileShortcut fileShortcut : fileShortcuts) {
      assetEntryLocalService.incrementViewCounter(userId,DLFileShortcut.class.getName(),fileShortcut.getFileShortcutId());
    }
  }
}
