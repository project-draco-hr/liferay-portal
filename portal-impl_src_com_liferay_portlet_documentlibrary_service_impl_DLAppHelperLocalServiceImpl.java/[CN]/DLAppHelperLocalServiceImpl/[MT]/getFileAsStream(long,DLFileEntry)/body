{
  long groupId=fileEntry.getGroupId();
  long companyId=fileEntry.getCompanyId();
  long folderId=fileEntry.getFolderId();
  String name=fileEntry.getName();
  if (userId > 0) {
    dlFileRankLocalService.updateFileRank(groupId,companyId,userId,folderId,name,new ServiceContext());
  }
  if (PropsValues.DL_FILE_ENTRY_READ_COUNT_ENABLED) {
    assetEntryLocalService.incrementViewCounter(userId,DLFileEntry.class.getName(),fileEntry.getFileEntryId());
    List<DLFileShortcut> fileShortcuts=dlFileShortcutPersistence.findByTG_TF_TN(groupId,folderId,name);
    for (    DLFileShortcut fileShortcut : fileShortcuts) {
      assetEntryLocalService.incrementViewCounter(userId,DLFileShortcut.class.getName(),fileShortcut.getFileShortcutId());
    }
  }
}
