{
  dlFileShortcutLocalService.updateFileShortcuts(oldFileEntryId,newFileEntryId);
  assetEntryLocalService.deleteEntry(DLFileEntryConstants.getClassName(),oldFileEntryId);
  List<DLFileShortcut> fileShortcuts=dlFileShortcutPersistence.findByToFileEntryId(oldFileEntryId);
  for (  DLFileShortcut fileShortcut : fileShortcuts) {
    assetEntryLocalService.deleteEntry(DLFileShortcut.class.getName(),fileShortcut.getFileShortcutId());
  }
  RatingsStats stats=ratingsStatsLocalService.getStats(DLFileEntryConstants.getClassName(),oldFileEntryId);
  stats.setClassPK(newFileEntryId);
  ratingsStatsPersistence.update(stats,false);
  long classNameId=PortalUtil.getClassNameId(DLFileEntryConstants.getClassName());
  List<RatingsEntry> entries=ratingsEntryPersistence.findByC_C(classNameId,oldFileEntryId);
  for (  RatingsEntry entry : entries) {
    entry.setClassPK(newFileEntryId);
    ratingsEntryPersistence.update(entry,false);
  }
  MBDiscussion discussion=mbDiscussionPersistence.fetchByC_C(classNameId,oldFileEntryId);
  if (discussion != null) {
    discussion.setClassPK(newFileEntryId);
    mbDiscussionPersistence.update(discussion,false);
  }
  socialActivityLocalService.deleteActivities(DLFileEntryConstants.getClassName(),oldFileEntryId);
}
