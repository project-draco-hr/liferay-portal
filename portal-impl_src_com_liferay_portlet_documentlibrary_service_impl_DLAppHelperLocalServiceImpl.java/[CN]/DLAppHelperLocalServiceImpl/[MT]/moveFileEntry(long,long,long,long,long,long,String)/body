{
  dlFileShortcutLocalService.updateFileShortcuts(groupId,folderId,name,newFolderId,name);
  assetEntryLocalService.deleteEntry(DLFileEntry.class.getName(),oldFileEntryId);
  List<DLFileShortcut> fileShortcuts=dlFileShortcutPersistence.findByTG_TF_TN(groupId,folderId,name);
  for (  DLFileShortcut fileShortcut : fileShortcuts) {
    assetEntryLocalService.deleteEntry(DLFileShortcut.class.getName(),fileShortcut.getFileShortcutId());
  }
  RatingsStats stats=ratingsStatsLocalService.getStats(DLFileEntry.class.getName(),oldFileEntryId);
  stats.setClassPK(newFileEntryId);
  ratingsStatsPersistence.update(stats,false);
  long classNameId=PortalUtil.getClassNameId(DLFileEntry.class.getName());
  List<RatingsEntry> entries=ratingsEntryPersistence.findByC_C(classNameId,oldFileEntryId);
  for (  RatingsEntry entry : entries) {
    entry.setClassPK(newFileEntryId);
    ratingsEntryPersistence.update(entry,false);
  }
  MBDiscussion discussion=mbDiscussionPersistence.fetchByC_C(classNameId,oldFileEntryId);
  if (discussion != null) {
    discussion.setClassPK(newFileEntryId);
    mbDiscussionPersistence.update(discussion,false);
  }
  socialActivityLocalService.deleteActivities(DLFileEntry.class.getName(),oldFileEntryId);
}
