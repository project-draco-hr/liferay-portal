{
  AssetEntry assetEntry=null;
  boolean visible=false;
  if (folder instanceof LiferayFolder) {
    DLFolder dlFolder=(DLFolder)folder.getModel();
    if (dlFolder.isApproved() && !dlFolder.isHidden() && !dlFolder.isInHiddenFolder()) {
      visible=true;
    }
  }
 else {
    visible=true;
  }
  assetEntry=assetEntryLocalService.updateEntry(userId,folder.getGroupId(),folder.getCreateDate(),folder.getModifiedDate(),DLFolderConstants.getClassName(),folder.getFolderId(),folder.getUuid(),0,assetCategoryIds,assetTagNames,true,visible,null,null,null,null,folder.getName(),folder.getDescription(),null,null,null,0,0,null);
  assetLinkLocalService.updateLinks(userId,assetEntry.getEntryId(),assetLinkEntryIds,AssetLinkConstants.TYPE_RELATED);
  return assetEntry;
}
