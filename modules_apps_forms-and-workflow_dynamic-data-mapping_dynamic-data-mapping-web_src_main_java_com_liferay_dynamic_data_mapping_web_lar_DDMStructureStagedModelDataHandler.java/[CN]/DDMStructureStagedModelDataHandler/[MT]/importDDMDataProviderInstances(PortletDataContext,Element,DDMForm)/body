{
  String[] ddmDataProviderInstanceIds=StringUtil.split(structureElement.attributeValue(_DDM_DATA_PROVIDER_INSTANCE_IDS));
  if (ArrayUtil.isEmpty(ddmDataProviderInstanceIds)) {
    return;
  }
  Map<Long,Long> dataProviderInstanceIdMap=(Map<Long,Long>)portletDataContext.getNewPrimaryKeysMap(DDMDataProviderInstance.class);
  for (  String ddmDataProviderInstanceId : ddmDataProviderInstanceIds) {
    long oldProviderId=Long.parseLong(ddmDataProviderInstanceId);
    long newProviderId=MapUtil.getLong(dataProviderInstanceIdMap,oldProviderId);
    StagedModelDataHandlerUtil.importReferenceStagedModel(portletDataContext,DDMDataProviderInstance.class,newProviderId);
  }
  List<DDMFormField> ddmFormFields=ddmForm.getDDMFormFields();
  for (  DDMFormField ddmFormField : ddmFormFields) {
    if (!ddmFormField.getType().equals(DDMFormFieldType.SELECT)) {
      continue;
    }
    long oldProviderId=Long.valueOf(String.valueOf(ddmFormField.getProperty("ddmDataProviderInstanceId")));
    long newProviderId=MapUtil.getLong(dataProviderInstanceIdMap,oldProviderId);
    ddmFormField.setProperty("ddmDataProviderInstanceId",newProviderId);
  }
}
