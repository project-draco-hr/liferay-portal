{
  PortletToolbar portletToolbar=new PortletToolbar();
  ServiceDependencyManager serviceDependencyManager=new ServiceDependencyManager();
  serviceDependencyManager.registerDependencies(PortletToolbarContributorLocator.class);
  serviceDependencyManager.waitForDependencies(1000);
  List<Menu> menus=portletToolbar.getPortletTitleMenus(RandomTestUtil.randomString(),Mockito.mock(PortletRequest.class));
  for (  Menu menu : menus) {
    String label=menu.getLabel();
    if ((label != null) && label.equals(TestPortletToolbarContributor.LABEL)) {
      return;
    }
  }
  Assert.fail("Unable to retrieve menu with label " + TestPortletToolbarContributor.LABEL);
}
