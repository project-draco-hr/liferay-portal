{
  Layout layout=themeDisplay.getLayout();
  String articleId=result.get("articleId");
  String version=result.get("version");
  List<Long> hitLayoutIds=JournalContentSearchLocalServiceUtil.getLayoutIds(layout.getGroupId(),layout.isPrivateLayout(),articleId);
  if (hitLayoutIds.size() > 0) {
    Long hitLayoutId=hitLayoutIds.get(0);
    Layout hitLayout=LayoutLocalServiceUtil.getLayout(layout.getGroupId(),layout.isPrivateLayout(),hitLayoutId.longValue());
    return PortalUtil.getLayoutURL(hitLayout,themeDisplay);
  }
 else {
    StringMaker sm=new StringMaker();
    sm.append(themeDisplay.getPathMain());
    sm.append("/journal/view_article_content?groupId=");
    sm.append(groupId);
    sm.append("&articleId=");
    sm.append(articleId);
    sm.append("&version=");
    sm.append(version);
    return sm.toString();
  }
}
