{
  _elasticsearchConfiguration=Configurable.createConfigurable(ElasticsearchConfiguration.class,properties);
  OperationMode newOperationMode=_elasticsearchConfiguration.operationMode();
  if (Validator.equals(_elasticsearchConfiguration.clusterName(),_clusterName) && Validator.equals(_elasticsearchConfiguration.operationMode(),_operationMode)) {
    return;
  }
  if (!_elasticsearchConnections.containsKey(newOperationMode)) {
    throw new IllegalArgumentException("No connection available for: " + newOperationMode);
  }
  ElasticsearchConnection elasticsearchConnection=_elasticsearchConnections.get(_operationMode);
  boolean closed=elasticsearchConnection.close();
  _clusterName=_elasticsearchConfiguration.clusterName();
  _operationMode=newOperationMode;
  if (closed) {
    getClient();
  }
}
