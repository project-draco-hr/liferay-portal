{
  if (!node.isInTrash()) {
    throw new RestoreEntryException(RestoreEntryException.INVALID_STATUS);
  }
  node.setName(TrashUtil.getOriginalTitle(node.getName()));
  wikiNodePersistence.update(node);
  TrashEntry trashEntry=trashEntryLocalService.getEntry(WikiNode.class.getName(),node.getNodeId());
  updateStatus(userId,node,trashEntry.getStatus(),new ServiceContext());
  restoreDependentsFromTrash(userId,node.getNodeId());
  trashEntryLocalService.deleteEntry(trashEntry);
}
