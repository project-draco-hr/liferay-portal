{
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  Group group=themeDisplay.getSiteGroup();
  if (group.isStagedRemotely() || group.hasLocalOrRemoteStagingGroup()) {
    return false;
  }
  PortletDisplay portletDisplay=themeDisplay.getPortletDisplay();
  String rootPortletId=portletDisplay.getRootPortletId();
  if (rootPortletId.equals(ExportImportPortletKeys.EXPORT) || rootPortletId.equals(ExportImportPortletKeys.EXPORT_IMPORT) || rootPortletId.equals(ExportImportPortletKeys.IMPORT)|| rootPortletId.equals(StagingConfigurationPortletKeys.STAGING_CONFIGURATION)|| rootPortletId.equals(StagingProcessesPortletKeys.STAGING_PROCESSES)) {
    return false;
  }
  if (!portletDisplay.isShowStagingIcon()) {
    return false;
  }
  try {
    return GroupPermissionUtil.contains(themeDisplay.getPermissionChecker(),themeDisplay.getScopeGroup(),ActionKeys.PUBLISH_PORTLET_INFO);
  }
 catch (  PortalException pe) {
    return false;
  }
}
