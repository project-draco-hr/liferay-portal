{
  JournalArticle article=(JournalArticle)obj;
  long companyId=article.getCompanyId();
  long groupId=getParentGroupId(article.getGroupId());
  long scopeGroupId=article.getGroupId();
  long userId=article.getUserId();
  Date modifiedDate=article.getModifiedDate();
  long resourcePrimKey=article.getResourcePrimKey();
  String articleId=article.getArticleId();
  double version=article.getVersion();
  Map<Locale,String> titleMap=article.getTitleMap();
  Map<Locale,String> descriptionMap=article.getDescriptionMap();
  String[] availableLocales=LocalizationUtil.getAvailableLocales(article.getContent());
  if (availableLocales.length == 0) {
    availableLocales=new String[]{LocaleUtil.getDefault().toString()};
  }
  String type=article.getType();
  String structureId=article.getStructureId();
  JournalStructure structure=null;
  if (Validator.isNotNull(structureId)) {
    try {
      structure=JournalStructureLocalServiceUtil.getStructure(groupId,structureId);
    }
 catch (    NoSuchStructureException nsse1) {
      Group group=GroupLocalServiceUtil.getCompanyGroup(companyId);
      try {
        structure=JournalStructureLocalServiceUtil.getStructure(group.getGroupId(),structureId);
      }
 catch (      NoSuchStructureException nsse2) {
      }
    }
  }
  String templateId=article.getTemplateId();
  Date displayDate=article.getDisplayDate();
  long[] assetCategoryIds=AssetCategoryLocalServiceUtil.getCategoryIds(JournalArticle.class.getName(),resourcePrimKey);
  String[] assetCategoryNames=AssetCategoryLocalServiceUtil.getCategoryNames(JournalArticle.class.getName(),resourcePrimKey);
  String[] assetTagNames=AssetTagLocalServiceUtil.getTagNames(JournalArticle.class.getName(),resourcePrimKey);
  ExpandoBridge expandoBridge=article.getExpandoBridge();
  Document document=new DocumentImpl();
  document.addUID(PORTLET_ID,groupId,articleId);
  document.addModifiedDate(modifiedDate);
  document.addKeyword(Field.COMPANY_ID,companyId);
  document.addKeyword(Field.PORTLET_ID,PORTLET_ID);
  document.addKeyword(Field.GROUP_ID,groupId);
  document.addKeyword(Field.SCOPE_GROUP_ID,scopeGroupId);
  document.addKeyword(Field.USER_ID,userId);
  document.addKeyword(Field.ASSET_CATEGORY_IDS,assetCategoryIds);
  document.addLocalizedText(Field.TITLE,titleMap);
  processStructureFields(structure,document,article.getContent());
  for (  String languageId : availableLocales) {
    String content=extractContent(article.getContentByLocale(languageId));
    if (LocaleUtil.getDefault().toString().equals(languageId)) {
      document.addText(Field.CONTENT,content);
    }
    document.addText(Field.CONTENT.concat(StringPool.UNDERLINE).concat(languageId),content);
  }
  document.addLocalizedText(Field.DESCRIPTION,descriptionMap);
  document.addKeyword(Field.ASSET_CATEGORY_IDS,assetCategoryIds);
  document.addKeyword(Field.ASSET_CATEGORY_NAMES,assetCategoryNames);
  document.addKeyword(Field.ASSET_TAG_NAMES,assetTagNames);
  document.addKeyword(Field.ENTRY_CLASS_NAME,JournalArticle.class.getName());
  document.addKeyword(Field.ENTRY_CLASS_PK,articleId);
  document.addKeyword(Field.ROOT_ENTRY_CLASS_PK,resourcePrimKey);
  document.addKeyword(Field.VERSION,version);
  document.addKeyword(Field.TYPE,type);
  document.addKeyword("structureId",structureId);
  document.addKeyword("templateId",templateId);
  document.addDate("displayDate",displayDate);
  ExpandoBridgeIndexerUtil.addAttributes(document,expandoBridge);
  return document;
}
