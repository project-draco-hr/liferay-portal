{
  List<JournalArticle> articles=new ArrayList<JournalArticle>();
  articles.addAll(getReindexApprovedArticles(companyId,startId,endId));
  articles.addAll(getReindexDraftArticles(companyId,startId,endId));
  if (articles.isEmpty()) {
    return;
  }
  Collection<Document> documents=new ArrayList<Document>(articles.size());
  for (  JournalArticle article : articles) {
    if (!article.isIndexable()) {
      continue;
    }
    if (article.isApproved()) {
      JournalArticle latestArticle=JournalArticleLocalServiceUtil.getLatestArticle(article.getResourcePrimKey(),WorkflowConstants.STATUS_APPROVED);
      if (!latestArticle.isIndexable()) {
        continue;
      }
    }
    Document document=getDocument(article);
    documents.add(document);
  }
  SearchEngineUtil.updateDocuments(getSearchEngineId(),companyId,documents);
}
