{
  String servletClass=filterConfig.getInitParameter("servlet-class");
  _subContext=filterConfig.getInitParameter("sub-context");
  if (_subContext == null) {
    _subContext=getServletName();
  }
  try {
    ClassLoader contextClassLoader=Thread.currentThread().getContextClassLoader();
    HttpServlet servlet=(HttpServlet)contextClassLoader.loadClass(servletClass).newInstance();
    servlet.init(filterConfig);
    PortalDelegatorServlet.addDelegate(_subContext,servlet);
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
}
