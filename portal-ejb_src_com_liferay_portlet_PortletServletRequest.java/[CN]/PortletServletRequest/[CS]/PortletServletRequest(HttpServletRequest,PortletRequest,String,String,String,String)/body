{
  super(req);
  _req=req;
  _portletRequest=portletRequest;
  _pathInfo=GetterUtil.getString(pathInfo);
  _queryString=GetterUtil.getString(queryString);
  _requestURI=GetterUtil.getString(requestURI);
  _servletPath=GetterUtil.getString(servletPath);
  String userId=PortalUtil.getUserId(req);
  String remoteUser=req.getRemoteUser();
  if ((userId != null) && (remoteUser == null)) {
    _remoteUser=userId;
    _userPrincipal=new ProtectedPrincipal(userId);
  }
 else {
    _remoteUser=remoteUser;
    _userPrincipal=req.getUserPrincipal();
  }
}
