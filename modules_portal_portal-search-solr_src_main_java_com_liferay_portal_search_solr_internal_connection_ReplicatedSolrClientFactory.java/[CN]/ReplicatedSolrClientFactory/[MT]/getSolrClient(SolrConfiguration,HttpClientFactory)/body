{
  String[] readURLs=solrConfiguration.readURL();
  String[] writeURLs=solrConfiguration.writeURL();
  if (ArrayUtil.isEmpty(writeURLs)) {
    throw new IllegalArgumentException("Must configure at least one write URL");
  }
 else   if (ArrayUtil.isEmpty(readURLs)) {
    if (_log.isInfoEnabled()) {
      _log.info("No read URLs configured, using write URLs for read");
    }
    readURLs=writeURLs;
  }
  HttpClient readerHttpClient=httpClientFactory.createInstance();
  LBHttpSolrClient readerLBHttpSolrClient=new LBHttpSolrClient(readerHttpClient,readURLs);
  HttpClient writerHttpClient=httpClientFactory.createInstance();
  LBHttpSolrClient writerLBHttpSolrClient=new LBHttpSolrClient(writerHttpClient,writeURLs);
  ReadWriteSolrClient readWriteSolrClient=new ReadWriteSolrClient(readerLBHttpSolrClient,writerLBHttpSolrClient);
  return readWriteSolrClient;
}
