{
  DLFileVersion dlFileVersion=dlFileEntryLocalService.getFileVersion(fileEntryId,version);
  if (dlFileVersion.getStatus() != WorkflowConstants.STATUS_APPROVED) {
    return;
  }
  String sourceFileName=dlFileVersion.getTitle();
  String extension=dlFileVersion.getExtension();
  String mimeType=dlFileVersion.getMimeType();
  String title=dlFileVersion.getTitle();
  String description=dlFileVersion.getDescription();
  String changeLog="Reverted to " + version;
  boolean majorVersion=true;
  String extraSettings=dlFileVersion.getExtraSettings();
  InputStream is=getFileAsStream(userId,fileEntryId,version);
  long size=dlFileVersion.getSize();
  updateFileEntry(userId,fileEntryId,sourceFileName,extension,mimeType,title,description,changeLog,majorVersion,extraSettings,is,size,serviceContext);
}
