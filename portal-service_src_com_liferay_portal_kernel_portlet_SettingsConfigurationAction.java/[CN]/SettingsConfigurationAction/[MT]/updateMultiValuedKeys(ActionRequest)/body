{
  String settingsId=getSettingsId(actionRequest);
  SettingsFactory settingsFactory=SettingsFactoryUtil.getSettingsFactory();
  List<String> multiValuedKeys=settingsFactory.getMultiValuedKeys(settingsId);
  if (multiValuedKeys == null) {
    throw new IllegalStateException("No multi valued keys found for settings ID " + settingsId);
  }
  for (  String multiValuedKey : multiValuedKeys) {
    String multiValuedValue=getParameter(actionRequest,multiValuedKey);
    if (multiValuedValue != null) {
      setPreference(actionRequest,multiValuedKey,StringUtil.split(multiValuedValue));
    }
  }
}
