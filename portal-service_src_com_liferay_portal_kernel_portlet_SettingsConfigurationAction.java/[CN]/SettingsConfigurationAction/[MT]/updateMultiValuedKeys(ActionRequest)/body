{
  String settingsId=getSettingsId(actionRequest);
  SettingsFactory settingsFactory=SettingsFactoryUtil.getSettingsFactory();
  List<String> multiValuedKeys=settingsFactory.getMultiValuedKeys(settingsId);
  if (multiValuedKeys == null) {
    throw new IllegalStateException("Multi valued keys list for settings id '" + settingsId + "' is "+ "null: please register a valid list of multi valued keys "+ "with SettingsConfigurationAction");
  }
  for (  String multiValuedKey : multiValuedKeys) {
    String multiValuedValue=getParameter(actionRequest,multiValuedKey);
    if (multiValuedValue != null) {
      setPreference(actionRequest,multiValuedKey,StringUtil.split(multiValuedValue));
    }
  }
}
