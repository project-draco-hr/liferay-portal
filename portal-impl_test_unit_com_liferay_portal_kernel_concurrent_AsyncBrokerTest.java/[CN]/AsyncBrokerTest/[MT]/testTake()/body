{
  AsyncBroker<String,String> asyncBroker=new AsyncBroker<>();
  Map<String,DefaultNoticeableFuture<String>> defaultNoticeableFutures=ReflectionTestUtil.getFieldValue(asyncBroker,"_defaultNoticeableFutures");
  Assert.assertTrue(defaultNoticeableFutures.isEmpty());
  Assert.assertNull(asyncBroker.take(_KEY));
  NoticeableFuture<String> noticeableFuture=asyncBroker.post(_KEY);
  Assert.assertEquals(1,defaultNoticeableFutures.size());
  Assert.assertSame(noticeableFuture,defaultNoticeableFutures.get(_KEY));
  Assert.assertSame(noticeableFuture,asyncBroker.take(_KEY));
  Assert.assertTrue(defaultNoticeableFutures.isEmpty());
  Assert.assertNull(asyncBroker.take(_KEY));
  Assert.assertTrue(noticeableFuture.cancel(true));
}
