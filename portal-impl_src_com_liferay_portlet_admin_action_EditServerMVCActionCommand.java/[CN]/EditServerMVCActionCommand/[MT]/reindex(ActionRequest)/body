{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  Map<String,Serializable> taskContextMap=new HashMap<>();
  String className=ParamUtil.getString(actionRequest,"className");
  taskContextMap.put("className",className);
  long[] companyIds=PortalInstances.getCompanyIds();
  taskContextMap.put("companyIds",companyIds);
  String taskExecutorClassName=_REINDEX_PORTAL_BACKGROUND_TASK_EXECUTOR;
  if (Validator.isNotNull(className)) {
    taskExecutorClassName=_REINDEX_SINGLE_INDEXER_BACKGROUND_TASK_EXECUTOR;
  }
  BackgroundTaskManagerUtil.addBackgroundTask(themeDisplay.getUserId(),CompanyConstants.SYSTEM,"reindex",taskExecutorClassName,taskContextMap,new ServiceContext());
}
