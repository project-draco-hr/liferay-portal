{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  String className=ParamUtil.getString(actionRequest,"className");
  Map<String,Serializable> taskContextMap=new HashMap<>();
  long[] companyIds=PortalInstances.getCompanyIds();
  taskContextMap.put("companyIds",companyIds);
  taskContextMap.put("className",className);
  Class taskExecutorClass=ReindexPortalBackgroundTaskExecutor.class;
  if (Validator.isNotNull(className)) {
    taskExecutorClass=ReindexIndexerBackgroundTaskExecutor.class;
  }
  BackgroundTaskManagerUtil.addBackgroundTask(themeDisplay.getUserId(),themeDisplay.getScopeGroupId(),"reindex",null,taskExecutorClass,taskContextMap,new ServiceContext());
}
