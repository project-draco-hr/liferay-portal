{
  Registry registry=RegistryUtil.getRegistry();
  _serviceReferences.remove(serviceReference);
  ServiceReference<S> peekServiceReference=_serviceReferences.peek();
  if (peekServiceReference != null) {
    try {
      _service=registry.getService(peekServiceReference);
    }
 catch (    IllegalStateException ise) {
      _service=null;
      _serviceReferences.clear();
    }
  }
 else {
    _service=null;
  }
}
