{
  Registry registry=RegistryUtil.getRegistry();
  _queue.remove(serviceReference);
  ServiceReference<S> peek=_queue.peek();
  if (peek != null) {
    try {
      _service=registry.getService(peek);
    }
 catch (    IllegalStateException e) {
      _service=null;
      _queue.clear();
    }
  }
 else {
    _service=null;
  }
}
