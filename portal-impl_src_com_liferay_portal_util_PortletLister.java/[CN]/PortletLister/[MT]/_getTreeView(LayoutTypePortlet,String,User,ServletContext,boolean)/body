{
  _layoutTypePortlet=layoutTypePortlet;
  _user=user;
  _servletContext=servletContext;
  _nodeId=1;
  _list=new ArrayList<TreeNodeView>();
  if (rootNodeName != null) {
    TreeNodeView rootNodeView=new TreeNodeView(_nodeId);
    rootNodeView.setLeaf(false);
    rootNodeView.setName(rootNodeName);
    _list.add(rootNodeView);
  }
  PortletCategory portletCategory=(PortletCategory)WebAppPool.get(String.valueOf(user.getCompanyId()),WebKeys.PORTLET_CATEGORY);
  List<PortletCategory> categories=ListUtil.fromCollection(portletCategory.getCategories());
  _iterateCategories(categories,_nodeId,0,iteratePortlets);
  return new TreeView(_list,_depth);
}
