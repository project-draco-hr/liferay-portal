{
  List<MBMessage> mbMessages=MBMessageLocalServiceUtil.getThreadMessages(mbThreadId,WorkflowConstants.STATUS_ANY,new MessageCreateDateComparator(false));
  for (  MBMessage mbMessage : mbMessages) {
    if (userId != mbMessage.getUserId()) {
      return mbMessage.getUserId();
    }
  }
  List<UserThread> userThreads=UserThreadLocalServiceUtil.getMBThreadUserThreads(mbThreadId);
  for (  UserThread userThread : userThreads) {
    if (userId != userThread.getUserId()) {
      return userThread.getUserId();
    }
  }
  return userId;
}
