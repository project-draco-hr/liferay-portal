{
  _request=request;
  _liferayPortletResponse=liferayPortletResponse;
  _groupDisplayContextHelper=new GroupDisplayContextHelper(request);
  boolean privateLayout=ParamUtil.getBoolean(request,"privateLayout");
  String tabs1=ParamUtil.getString(request,"tabs1");
  _themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  if (Validator.isNull(tabs1)) {
    Group group=_themeDisplay.getScopeGroup();
    if (group.isUser()) {
      tabs1="my-profile";
    }
 else {
      tabs1="public-pages";
    }
    if (!group.isControlPanel() && privateLayout) {
      if (group.isUser()) {
        tabs1="my-dashboard";
      }
 else {
        tabs1="private-pages";
      }
    }
  }
  if (tabs1.equals("my-dashboard") || tabs1.equals("private-pages")) {
    privateLayout=true;
  }
  Layout selLayout=getSelLayout();
  if (selLayout != null) {
    privateLayout=selLayout.isPrivateLayout();
  }
  Group liveGroup=getLiveGroup();
  if (liveGroup.isUser() && !isPublicLayoutsModifiable() && isPrivateLayoutsModifiable()&& !privateLayout) {
    privateLayout=true;
    tabs1="my-dashboard";
  }
  Group selGroup=getSelGroup();
  if (selGroup.isLayoutSetPrototype()) {
    privateLayout=true;
  }
  _privateLayout=privateLayout;
  _tabs1=tabs1;
  _request.setAttribute(com.liferay.portal.util.WebKeys.LAYOUT_DESCRIPTIONS,getLayoutDescriptions());
}
