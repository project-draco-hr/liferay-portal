{
  PermissionChecker permissionChecker=getPermissionChecker();
  if (Validator.isNull(actionId) || permissionChecker.isCompanyAdmin()) {
    return organizationLocalService.getManageableOrganizations(userId);
  }
  List<Organization> manageableOrganizations=new UniqueList<Organization>();
  List<Organization> userOrganizations=userPersistence.getOrganizations(userId);
  for (  Organization userOrganization : userOrganizations) {
    if (OrganizationPermissionUtil.contains(permissionChecker,userOrganization.getOrganizationId(),actionId)) {
      manageableOrganizations.add(userOrganization);
      manageableOrganizations.addAll(userOrganization.getSuborganizations());
    }
  }
  return manageableOrganizations;
}
