{
  if ((actionId == null) || getPermissionChecker().isCompanyAdmin()) {
    return organizationLocalService.getManageableOrganizations(userId);
  }
  List<Organization> manageableOrganizations=new UniqueList<Organization>();
  List<Organization> userOrganizations=userPersistence.getOrganizations(userId);
  for (  Organization userOrganization : userOrganizations) {
    if (OrganizationPermissionUtil.contains(getPermissionChecker(),userOrganization.getOrganizationId(),actionId)) {
      manageableOrganizations.add(userOrganization);
      manageableOrganizations.addAll(userOrganization.getSuborganizations());
    }
  }
  return manageableOrganizations;
}
