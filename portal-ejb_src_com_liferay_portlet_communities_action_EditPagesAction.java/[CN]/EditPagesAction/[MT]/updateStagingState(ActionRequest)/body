{
  long liveGroupId=ParamUtil.getLong(req,"liveGroupId");
  long stagingGroupId=ParamUtil.getLong(req,"stagingGroupId");
  boolean activateStaging=ParamUtil.getBoolean(req,"activateStaging");
  User user=PortalUtil.getUser(req);
  if (stagingGroupId > 0 && !activateStaging) {
    GroupServiceUtil.deleteGroup(stagingGroupId);
  }
 else   if (stagingGroupId == 0 && activateStaging) {
    Group group=GroupServiceUtil.getGroup(liveGroupId);
    Group stagingGroup=GroupServiceUtil.addGroup(group.getName() + " (Staging)",group.getDescription(),GroupImpl.TYPE_COMMUNITY_CLOSED,null,group.isActive(),group.getGroupId());
    if (group.hasPrivateLayouts()) {
      _copyLayouts(user.getUserId(),LayoutImpl.PRIVATE + group.getGroupId(),LayoutImpl.PRIVATE + stagingGroup.getGroupId());
    }
    if (group.hasPublicLayouts()) {
      _copyLayouts(user.getUserId(),LayoutImpl.PUBLIC + group.getGroupId(),LayoutImpl.PUBLIC + stagingGroup.getGroupId());
    }
  }
}
