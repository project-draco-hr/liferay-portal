{
  long calendarNotificationTemplateId=ParamUtil.getLong(actionRequest,"calendarNotificationTemplateId");
  long calendarId=ParamUtil.getLong(actionRequest,"calendarId");
  NotificationType notificationType=NotificationType.parse(ParamUtil.getString(actionRequest,"notificationType"));
  NotificationTemplateType notificationTemplateType=NotificationTemplateType.parse(ParamUtil.getString(actionRequest,"notificationTemplateType"));
  String subject=ParamUtil.getString(actionRequest,"subject");
  String body=ParamUtil.getString(actionRequest,"body");
  ServiceContext serviceContext=ServiceContextFactory.getInstance(CalendarNotificationTemplate.class.getName(),actionRequest);
  if (calendarNotificationTemplateId <= 0) {
    _calendarNotificationTemplateService.addCalendarNotificationTemplate(calendarId,notificationType,getNotificationTypeSettings(actionRequest,notificationType),notificationTemplateType,subject,body,serviceContext);
  }
 else {
    _calendarNotificationTemplateService.updateCalendarNotificationTemplate(calendarNotificationTemplateId,getNotificationTypeSettings(actionRequest,notificationType),subject,body,serviceContext);
  }
}
