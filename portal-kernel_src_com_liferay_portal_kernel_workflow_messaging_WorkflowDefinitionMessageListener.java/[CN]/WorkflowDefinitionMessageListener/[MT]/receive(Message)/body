{
  Object payload=message.getPayload();
  if (payload == null) {
    _log.error("Missing WorkflowDefinitionRequest.");
  }
 else   if (!(payload instanceof WorkflowDefinitionRequest)) {
    _log.error("Payload type is not WorkflowDefinitionRequest:" + payload.getClass().getName());
  }
 else {
    WorkflowDefinitionRequest request=(WorkflowDefinitionRequest)payload;
    String responseDestination=message.getResponseDestination();
    WorkflowResultContainer resultContainer=new WorkflowResultContainer();
    try {
      Object result=request.execute(_workflowDefinitionManager);
      if (request.hasReturnValue() == false) {
        resultContainer.setResult(result);
      }
    }
 catch (    WorkflowException ex) {
      resultContainer.setException(ex);
      _log.error("Unable to execute request.",ex);
    }
 finally {
      if (Validator.isNotNull(responseDestination)) {
        Message responseMessage=MessageBusUtil.createResponseMessage(message);
        responseMessage.setPayload(resultContainer);
        MessageBusUtil.sendMessage(responseDestination,responseMessage);
      }
    }
  }
}
