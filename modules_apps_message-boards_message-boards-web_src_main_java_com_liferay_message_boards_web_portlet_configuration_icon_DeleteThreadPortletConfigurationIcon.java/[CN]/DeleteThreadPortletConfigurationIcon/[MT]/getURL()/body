{
  try {
    MBMessageDisplay messageDisplay=ActionUtil.getMessageDisplay(portletRequest);
    MBCategory category=messageDisplay.getCategory();
    PortletURL parentCategoryURL=PortletURLFactoryUtil.create(portletRequest,MBPortletKeys.MESSAGE_BOARDS_ADMIN,themeDisplay.getPlid(),PortletRequest.RENDER_PHASE);
    parentCategoryURL.setParameter("mvcRenderCommandName","/message_boards/view");
    parentCategoryURL.setParameter("mbCategoryId",String.valueOf(getCategoryId(category)));
    PortletURL deleteURL=PortletURLFactoryUtil.create(portletRequest,MBPortletKeys.MESSAGE_BOARDS_ADMIN,themeDisplay.getPlid(),PortletRequest.ACTION_PHASE);
    String cmd=Constants.DELETE;
    if (isTrashEnabled(themeDisplay.getScopeGroupId())) {
      cmd=Constants.MOVE_TO_TRASH;
    }
    MBThread thread=messageDisplay.getThread();
    deleteURL.setParameter(ActionRequest.ACTION_NAME,"/message_boards/delete_thread");
    deleteURL.setParameter(Constants.CMD,cmd);
    deleteURL.setParameter("redirect",parentCategoryURL.toString());
    deleteURL.setParameter("threadId",String.valueOf(thread.getThreadId()));
    return deleteURL.toString();
  }
 catch (  Exception e) {
  }
  return StringPool.BLANK;
}
