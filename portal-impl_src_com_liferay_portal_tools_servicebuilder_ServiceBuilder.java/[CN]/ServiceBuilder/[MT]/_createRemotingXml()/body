{
  StringBundler sb=new StringBundler();
  Document document=SAXReaderUtil.read(new File(_springFileName));
  Element rootElement=document.getRootElement();
  List<Element> beanElements=rootElement.elements("bean");
  for (  Element beanElement : beanElements) {
    String beanId=beanElement.attributeValue("id");
    if (beanId.endsWith("Service") && !beanId.endsWith("LocalService")) {
      String entityName=beanId;
      entityName=StringUtil.replaceLast(entityName,".service.",".");
      int pos=entityName.lastIndexOf("Service");
      entityName=entityName.substring(0,pos);
      Entity entity=getEntity(entityName);
      String serviceName=beanId;
      String serviceMapping=serviceName;
      serviceMapping=StringUtil.replaceLast(serviceMapping,".service.",".service.spring.");
      serviceMapping=StringUtil.replace(serviceMapping,StringPool.PERIOD,StringPool.UNDERLINE);
      Map<String,Object> context=_getContext();
      context.put("entity",entity);
      context.put("serviceName",serviceName);
      context.put("serviceMapping",serviceMapping);
      sb.append(_processTemplate(_tplRemotingXml,context));
    }
  }
  File outputFile=new File(_remotingFileName);
  if (!outputFile.exists()) {
    return;
  }
  String content=FileUtil.read(outputFile);
  String newContent=content;
  int x=content.indexOf("<bean ");
  int y=content.lastIndexOf("</bean>") + 8;
  if (x != -1) {
    newContent=content.substring(0,x - 1) + sb.toString() + content.substring(y,content.length());
  }
 else {
    x=content.indexOf("</beans>");
    if (x != -1) {
      newContent=content.substring(0,x) + sb.toString() + content.substring(x,content.length());
    }
 else {
      x=content.indexOf("<beans/>");
      y=x + 8;
      newContent=content.substring(0,x) + "<beans>" + sb.toString()+ "</beans>"+ content.substring(y);
    }
  }
  newContent=_formatXml(newContent);
  if (!content.equals(newContent)) {
    FileUtil.write(outputFile,newContent);
    System.out.println(outputFile.toString());
  }
}
