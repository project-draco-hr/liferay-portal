{
  String packagePath=_getPackagePath(file);
  String className=file.getName();
  className=className.substring(0,className.length() - 5);
  content=SourceFormatter.stripImports(content,packagePath,className);
  File tempFile=new File("ServiceBuilder.temp");
  FileUtil.write(tempFile,content);
  StringBuffer sb=new StringBuffer();
  Jalopy jalopy=new Jalopy();
  jalopy.setFileFormat(FileFormat.UNIX);
  jalopy.setInput(tempFile);
  jalopy.setOutput(sb);
  try {
    Jalopy.setConvention("../tools/jalopy.xml");
  }
 catch (  FileNotFoundException fnne) {
  }
  try {
    Jalopy.setConvention("../../misc/jalopy.xml");
  }
 catch (  FileNotFoundException fnne) {
  }
  jalopy.format();
  String newContent=sb.toString();
  String oldContent=null;
  if (file.exists()) {
    oldContent=FileUtil.read(file);
  }
  if ((oldContent == null) || !oldContent.equals(newContent)) {
    FileUtil.write(file,newContent);
    System.out.println("Writing " + file);
  }
  tempFile.deleteOnExit();
}
