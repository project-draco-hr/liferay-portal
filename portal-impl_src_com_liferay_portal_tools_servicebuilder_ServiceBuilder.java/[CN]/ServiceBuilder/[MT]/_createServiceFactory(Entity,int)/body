{
  if (!_propsUtil.equals("com.liferay.portal.util.PropsUtil")) {
    FileUtil.delete(_serviceOutputPath + "/service/" + entity.getName()+ _getSessionTypeName(sessionType)+ "ServiceFactory.java");
    FileUtil.delete(_outputPath + "/service/" + entity.getName()+ _getSessionTypeName(sessionType)+ "ServiceFactory.java");
    return;
  }
  Map<String,Object> context=_getContext();
  context.put("entity",entity);
  context.put("sessionTypeName",_getSessionTypeName(sessionType));
  String content=_processTemplate(_tplServiceFactory,context);
  File ejbFile=new File(_serviceOutputPath + "/service/" + entity.getName()+ _getSessionTypeName(sessionType)+ "ServiceFactory.java");
  Map<String,Object> jalopySettings=new HashMap<String,Object>();
  jalopySettings.put("keepJavadoc",Boolean.TRUE);
  writeFile(ejbFile,content,_author,jalopySettings);
  if (!_serviceOutputPath.equals(_outputPath)) {
    ejbFile=new File(_outputPath + "/service/" + entity.getName()+ _getSessionTypeName(sessionType)+ "ServiceFactory.java");
    if (ejbFile.exists()) {
      System.out.println("Relocating " + ejbFile);
      ejbFile.delete();
    }
  }
}
