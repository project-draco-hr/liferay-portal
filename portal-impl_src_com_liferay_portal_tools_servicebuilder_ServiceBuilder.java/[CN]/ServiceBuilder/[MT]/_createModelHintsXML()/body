{
  Map<String,Object> context=_getContext();
  context.put("entities",_ejbList);
  String content=_processTemplate(_tplModelHintsXml,context);
  File xmlFile=new File(_modelHintsFileName);
  if (!xmlFile.exists()) {
    String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "\n" + "<model-hints>\n"+ "</model-hints>";
    FileUtil.write(xmlFile,xml);
  }
  String oldContent=FileUtil.read(xmlFile);
  String newContent=new String(oldContent);
  int firstModel=newContent.indexOf("<model name=\"" + _packagePath + ".model.");
  int lastModel=newContent.lastIndexOf("<model name=\"" + _packagePath + ".model.");
  if (firstModel == -1) {
    int x=newContent.indexOf("</model-hints>");
    newContent=newContent.substring(0,x) + content + newContent.substring(x,newContent.length());
  }
 else {
    firstModel=newContent.lastIndexOf("<model",firstModel) - 1;
    lastModel=newContent.indexOf("</model>",lastModel) + 9;
    newContent=newContent.substring(0,firstModel) + content + newContent.substring(lastModel,newContent.length());
  }
  newContent=_formatXML(newContent);
  if (!oldContent.equals(newContent)) {
    FileUtil.write(xmlFile,newContent);
  }
}
