{
  Map<String,Fields> fieldsMap=new HashMap<String,Fields>();
  DLFileVersion dlFileVersion=DLFileVersionServiceUtil.getFileVersion(fileVersionId);
  long fileEntryTypeId=dlFileVersion.getFileEntryTypeId();
  if (fileEntryTypeId > 0) {
    DLFileEntryType dlFileEntryType=DLFileEntryTypeServiceUtil.getFileEntryType(fileEntryTypeId);
    List<DDMStructure> ddmStructures=dlFileEntryType.getDDMStructures();
    for (    DDMStructure ddmStructure : ddmStructures) {
      DLFileEntryMetadata dlFileEntryMetadata=DLFileEntryMetadataLocalServiceUtil.getFileEntryMetadata(ddmStructure.getStructureId(),fileVersionId);
      Fields fields=StorageEngineUtil.getFields(dlFileEntryMetadata.getDDMStorageId());
      fieldsMap.put(ddmStructure.getStructureKey(),fields);
    }
  }
  return fieldsMap;
}
