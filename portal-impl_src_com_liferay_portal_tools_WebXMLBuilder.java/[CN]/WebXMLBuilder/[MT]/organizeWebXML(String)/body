{
  Html html=new HtmlImpl();
  webXML=html.stripComments(webXML);
  double version=2.3;
  Document doc=SAXReaderUtil.read(webXML);
  Element root=doc.getRootElement();
  version=GetterUtil.getDouble(root.attributeValue("version"),version);
  XMLMerger merger=null;
  if (version == 2.3) {
    merger=new XMLMerger(new WebXML23Descriptor());
  }
 else {
    merger=new XMLMerger(new WebXML24Descriptor());
  }
  DocumentImpl docImpl=(DocumentImpl)doc;
  merger.organizeXML(docImpl.getWrappedDocument());
  webXML=doc.formattedString();
  return webXML;
}
