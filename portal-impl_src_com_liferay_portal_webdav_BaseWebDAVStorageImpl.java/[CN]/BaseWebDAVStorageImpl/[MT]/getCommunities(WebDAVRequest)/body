{
  try {
    LinkedHashMap groupParams=new LinkedHashMap();
    groupParams.put("usersGroups",new Long(webDavReq.getUserId()));
    List communities=new ArrayList();
    Iterator itr=GroupLocalServiceUtil.search(webDavReq.getCompanyId(),null,null,groupParams,QueryUtil.ALL_POS,QueryUtil.ALL_POS).iterator();
    while (itr.hasNext()) {
      Group group=(Group)itr.next();
      Resource resource=getResource(group);
      communities.add(resource);
    }
    Group group=GroupLocalServiceUtil.getUserGroup(webDavReq.getCompanyId(),webDavReq.getUserId());
    Resource resource=getResource(group);
    communities.add(resource);
    return communities;
  }
 catch (  Exception e) {
    throw new WebDAVException(e);
  }
}
