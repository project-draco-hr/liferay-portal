{
  UnicodeProperties typeSettingsProperties=layout.getTypeSettingsProperties();
  String articleId=typeSettingsProperties.getProperty("article-id",StringPool.BLANK);
  long articleGroupId=layout.getGroupId();
  if (Validator.isNull(articleId)) {
    if (_log.isWarnEnabled()) {
      _log.warn("No article id found in typeSettings of layout " + layout.getPlid());
    }
  }
  JournalArticle article=null;
  try {
    article=JournalArticleLocalServiceUtil.getLatestArticle(articleGroupId,articleId,WorkflowConstants.STATUS_APPROVED);
  }
 catch (  NoSuchArticleException nsae) {
    if (_log.isWarnEnabled()) {
      _log.warn("No approved article found with group id " + articleGroupId + " and article id "+ articleId);
    }
  }
  if (article == null) {
    return;
  }
  String path=JournalPortletDataHandlerImpl.getArticlePath(portletDataContext,article);
  Element articleElement=layoutElement.addElement("article");
  articleElement.addAttribute("path",path);
  Element dlFileEntryTypesElement=layoutElement.addElement("dl-file-entry-types");
  Element dlFoldersElement=layoutElement.addElement("dl-folders");
  Element dlFilesElement=layoutElement.addElement("dl-file-entries");
  Element dlFileRanksElement=layoutElement.addElement("dl-file-ranks");
  Element dlRepositoriesElement=layoutElement.addElement("dl-repositories");
  Element dlRepositoryEntriesElement=layoutElement.addElement("dl-repository-entries");
  JournalPortletDataHandlerImpl.exportArticle(portletDataContext,layoutElement,layoutElement,layoutElement,dlFileEntryTypesElement,dlFoldersElement,dlFilesElement,dlFileRanksElement,dlRepositoriesElement,dlRepositoryEntriesElement,article,false);
}
