{
  List<AssetCategory> parentCategories=new ArrayList<AssetCategory>();
  Iterator<AssetCategory> itr=assetCategories.iterator();
  while (itr.hasNext()) {
    AssetCategory assetCategory=itr.next();
    if (assetCategory.getParentCategoryId() == parentCategoryId) {
      Element categoryEl=parentEl.addElement("category");
      categoryEl.addAttribute("uuid",assetCategory.getUuid());
      categoryEl.addAttribute("name",assetCategory.getName());
      categoryEl.addAttribute("userUuid",assetCategory.getUserUuid());
      if (parentCategoryId > 0) {
        AssetCategory parentCategory=AssetCategoryLocalServiceUtil.getCategory(parentCategoryId);
        categoryEl.addAttribute("parentCategoryUuid",parentCategory.getUuid());
      }
      parentCategories.add(assetCategory);
      itr.remove();
    }
  }
  for (  AssetCategory parentCategory : parentCategories) {
    orderCategories(assetCategories,parentEl,parentCategory.getCategoryId());
  }
}
