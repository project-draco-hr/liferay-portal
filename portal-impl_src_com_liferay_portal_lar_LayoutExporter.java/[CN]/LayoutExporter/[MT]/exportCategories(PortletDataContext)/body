{
  try {
    Document doc=SAXReaderUtil.createDocument();
    Element root=doc.addElement("categories-hierarchy");
    Element vocabulariesEl=root.addElement("vocabularies");
    List<AssetVocabulary> assetVocabularies=AssetVocabularyLocalServiceUtil.getGroupVocabularies(context.getGroupId());
    for (    AssetVocabulary assetVocabulary : assetVocabularies) {
      _portletExporter.exportVocabulary(context,vocabulariesEl,assetVocabulary);
    }
    Element categoriesEl=root.addElement("categories");
    List<AssetCategory> assetCategories=AssetCategoryUtil.findByGroupId(context.getGroupId());
    for (    AssetCategory assetCategory : assetCategories) {
      _portletExporter.exportCategory(context,vocabulariesEl,categoriesEl,assetCategory);
    }
    _portletExporter.exportCategories(context,root);
    context.addZipEntry(context.getRootPath() + "/categories-hierarchy.xml",doc.formattedString());
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
