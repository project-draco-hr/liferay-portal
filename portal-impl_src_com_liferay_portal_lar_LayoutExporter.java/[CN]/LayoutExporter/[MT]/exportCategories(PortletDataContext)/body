{
  try {
    Document doc=SAXReaderUtil.createDocument();
    Element root=doc.addElement("categories-hierarchy");
    List<TagsVocabulary> tagsVocabularies=TagsVocabularyLocalServiceUtil.getGroupVocabularies(context.getGroupId(),TagsEntryConstants.FOLKSONOMY_CATEGORY);
    for (    TagsVocabulary tagsVocabulary : tagsVocabularies) {
      Element vocabularyEl=root.addElement("vocabulary");
      String name=tagsVocabulary.getName();
      vocabularyEl.addAttribute("name",name);
      vocabularyEl.addAttribute("userUuid",tagsVocabulary.getUserUuid());
      List<TagsEntry> tagsCategories=TagsEntryLocalServiceUtil.getGroupVocabularyEntries(context.getGroupId(),name);
      tagsCategories=ListUtil.copy(tagsCategories);
      orderCategories(tagsCategories,vocabularyEl,TagsEntryConstants.DEFAULT_PARENT_ENTRY_ID);
    }
    context.addZipEntry(context.getRootPath() + "/categories-hierarchy.xml",doc.formattedString());
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
