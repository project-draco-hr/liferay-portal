{
  try {
    Document doc=SAXReaderUtil.createDocument();
    Element root=doc.addElement("categories-hierarchy");
    List<AssetVocabulary> assetVocabularies=AssetVocabularyLocalServiceUtil.getGroupVocabularies(context.getGroupId());
    for (    AssetVocabulary assetVocabulary : assetVocabularies) {
      Element vocabularyEl=root.addElement("vocabulary");
      long vocabularyId=assetVocabulary.getVocabularyId();
      vocabularyEl.addAttribute("uuid",assetVocabulary.getUuid());
      vocabularyEl.addAttribute("id",String.valueOf(vocabularyId));
      vocabularyEl.addAttribute("name",assetVocabulary.getName());
      vocabularyEl.addAttribute("userUuid",assetVocabulary.getUserUuid());
      List<AssetCategory> assetCategories=AssetCategoryLocalServiceUtil.getVocabularyCategories(assetVocabulary.getVocabularyId(),QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
      assetCategories=ListUtil.copy(assetCategories);
      orderCategories(assetCategories,vocabularyEl,AssetCategoryConstants.DEFAULT_PARENT_CATEGORY_ID);
    }
    context.addZipEntry(context.getRootPath() + "/categories-hierarchy.xml",doc.formattedString());
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
