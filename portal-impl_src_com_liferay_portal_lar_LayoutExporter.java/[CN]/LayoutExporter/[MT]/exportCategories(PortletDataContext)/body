{
  try {
    Document doc=SAXReaderUtil.createDocument();
    Element root=doc.addElement("categories-hierarchy");
    List<AssetVocabulary> vocabularies=AssetVocabularyLocalServiceUtil.getGroupVocabularies(context.getGroupId());
    for (    AssetVocabulary vocabulary : vocabularies) {
      Element vocabularyEl=root.addElement("vocabulary");
      long vocabularyId=vocabulary.getVocabularyId();
      vocabularyEl.addAttribute("id",String.valueOf(vocabularyId));
      vocabularyEl.addAttribute("name",vocabulary.getName());
      vocabularyEl.addAttribute("userUuid",vocabulary.getUserUuid());
      List<AssetCategory> assetCategories=AssetCategoryLocalServiceUtil.getVocabularyCategories(vocabulary.getVocabularyId());
      assetCategories=ListUtil.copy(assetCategories);
      orderCategories(assetCategories,vocabularyEl,AssetCategoryConstants.DEFAULT_PARENT_CATEGORY_ID);
    }
    context.addZipEntry(context.getRootPath() + "/categories-hierarchy.xml",doc.formattedString());
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
