{
  try {
    Document doc=SAXReaderUtil.createDocument();
    Element root=doc.addElement("categories-hierarchy");
    List<TagsVocabulary> vocabularies=TagsVocabularyLocalServiceUtil.getGroupVocabularies(context.getGroupId(),TagsEntryConstants.FOLKSONOMY_CATEGORY);
    for (    TagsVocabulary vocabulary : vocabularies) {
      Element vocabularyEl=root.addElement("vocabulary");
      String name=vocabulary.getName();
      vocabularyEl.addAttribute("name",name);
      vocabularyEl.addAttribute("userUuid",vocabulary.getUserUuid());
      List<TagsEntry> categories=TagsEntryLocalServiceUtil.getGroupVocabularyEntries(context.getGroupId(),name);
      orderCategories(categories,vocabularyEl,TagsEntryConstants.DEFAULT_PARENT_ENTRY_ID);
    }
    context.addZipEntry(context.getRootPath() + "/categories-hierarchy.xml",doc.formattedString());
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
