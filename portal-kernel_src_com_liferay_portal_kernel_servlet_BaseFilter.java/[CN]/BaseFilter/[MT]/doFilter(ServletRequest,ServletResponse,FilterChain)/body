{
  Log log=getLog();
  if (log.isDebugEnabled()) {
    if (isFilterEnabled()) {
      log.debug(_filterClass + " is enabled");
    }
 else {
      log.debug(_filterClass + " is disabled");
    }
  }
  HttpServletRequest request=(HttpServletRequest)servletRequest;
  HttpServletResponse response=(HttpServletResponse)servletResponse;
  StringBuffer requestUrl=request.getRequestURL();
  boolean filterEnabled=isFilterEnabled();
  if (filterEnabled && _isServlet24Dispatcher && requestUrl == null) {
    filterEnabled=false;
  }
  if (filterEnabled && (_urlRegexPattern != null)) {
    String url=requestUrl.toString();
    String queryString=request.getQueryString();
    if (Validator.isNotNull(queryString)) {
      url=url.concat(StringPool.QUESTION).concat(queryString);
    }
    Matcher matcher=_urlRegexPattern.matcher(url);
    filterEnabled=matcher.find();
  }
  try {
    if (filterEnabled) {
      processFilter(request,response,filterChain);
    }
 else {
      processFilter(_filterClass,request,response,filterChain);
    }
  }
 catch (  IOException ioe) {
    throw ioe;
  }
catch (  ServletException se) {
    throw se;
  }
catch (  Exception e) {
    getLog().error(e,e);
  }
}
