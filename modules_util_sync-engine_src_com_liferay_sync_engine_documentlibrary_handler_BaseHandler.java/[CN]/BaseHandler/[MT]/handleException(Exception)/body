{
  SyncAccount syncAccount=SyncAccountService.fetchSyncAccount(getSyncAccountId());
  if (!ConnectionRetryUtil.retryInProgress(getSyncAccountId()) && _logger.isDebugEnabled()) {
    _logger.debug("Handling exception {}",e.toString());
  }
  if (e instanceof FileNotFoundException) {
    SyncFile syncFile=(SyncFile)getParameterValue("syncFile");
    if (syncFile.getVersion() == null) {
      SyncFileService.deleteSyncFile(syncFile);
    }
  }
 else   if ((e instanceof HttpHostConnectException) || (e instanceof NoHttpResponseException) || (e instanceof SocketException)|| (e instanceof UnknownHostException)) {
    retryServerConnection(SyncAccount.UI_EVENT_CONNECTION_EXCEPTION);
  }
 else   if (e instanceof HttpResponseException) {
    HttpResponseException hre=(HttpResponseException)e;
    int statusCode=hre.getStatusCode();
    if (statusCode == HttpStatus.SC_UNAUTHORIZED) {
      syncAccount.setState(SyncAccount.STATE_DISCONNECTED);
      syncAccount.setUiEvent(SyncAccount.UI_EVENT_AUTHENTICATION_EXCEPTION);
      SyncAccountService.update(syncAccount);
    }
 else {
      retryServerConnection(SyncAccount.UI_EVENT_CONNECTION_EXCEPTION);
    }
  }
 else {
    _logger.error(e.getMessage(),e);
  }
}
