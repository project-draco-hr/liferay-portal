{
  PQLEntity pqlEntity=PQLEntityFactory.newPQLEntity(query);
  Object actual=pqlEntity.getValue(properties);
  if (!actual.equals(expected)) {
    StringBuilder sb=new StringBuilder();
    sb.append("Mismatched result within the following query:\n");
    sb.append(query);
    sb.append("\n* Actual:   ");
    sb.append(actual);
    sb.append("\n* Expected: ");
    sb.append(expected);
    throw new Exception(sb.toString());
  }
}
