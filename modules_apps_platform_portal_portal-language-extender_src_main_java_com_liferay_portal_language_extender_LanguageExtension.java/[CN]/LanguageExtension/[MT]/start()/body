{
  BundleWiring bundleWiring=_bundle.adapt(BundleWiring.class);
  for (  BundleCapability capability : _capabilities) {
    Map<String,Object> attributes=capability.getAttributes();
    Object baseName=attributes.get("resource.bundle.base.name");
    Object aggregate=attributes.get("aggregate");
    ResourceBundleLoader resourceBundleLoader=null;
    if (aggregate instanceof String) {
      resourceBundleLoader=processAggregate((String)aggregate);
    }
 else     if (baseName instanceof String) {
      resourceBundleLoader=processBasename(bundleWiring.getClassLoader(),(String)baseName);
    }
    if (resourceBundleLoader != null) {
      registerResourceBundleLoader(attributes,resourceBundleLoader);
    }
 else {
      _logger.log(Logger.LOG_WARNING,"Could not handle " + capability + " in "+ _bundle.getSymbolicName());
    }
  }
}
