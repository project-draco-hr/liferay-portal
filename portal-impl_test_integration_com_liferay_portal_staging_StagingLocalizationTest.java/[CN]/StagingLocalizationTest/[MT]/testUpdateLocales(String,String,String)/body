{
  GroupTestUtil.enableLocalStaging(_sourceGroup);
  JournalArticle article=JournalTestUtil.addArticle(_sourceGroup.getGroupId(),"Title","content",LocaleUtil.fromLanguageId(defaultContentLanguageId));
  Map<String,String[]> parameterMap=ExportImportConfigurationParameterMapFactory.buildParameterMap();
  User user=TestPropsValues.getUser();
  Map<String,Serializable> settingsMap=ExportImportConfigurationSettingsMapFactory.buildSettingsMap(user.getUserId(),_sourceGroup.getGroupId(),false,null,parameterMap,user.getLocale(),user.getTimeZone());
  ExportImportConfiguration exportImportConfiguration=ExportImportConfigurationLocalServiceUtil.addExportImportConfiguration(user.getUserId(),_sourceGroup.getGroupId(),StringPool.BLANK,StringPool.BLANK,ExportImportConfigurationConstants.TYPE_EXPORT_LAYOUT,settingsMap,WorkflowConstants.STATUS_DRAFT,new ServiceContext());
  File file=LayoutLocalServiceUtil.exportLayoutsAsFile(exportImportConfiguration);
  CompanyTestUtil.resetCompanyLocales(TestPropsValues.getCompanyId(),languageIds,defaultLanguageId);
  LayoutLocalServiceUtil.importLayouts(TestPropsValues.getUserId(),_targetGroup.getGroupId(),false,parameterMap,file);
  JournalArticleResource articleResource=JournalArticleResourceLocalServiceUtil.fetchJournalArticleResourceByUuidAndGroupId(article.getArticleResourceUuid(),_targetGroup.getGroupId());
  Assert.assertNotNull(articleResource);
  JournalArticle stagingArticle=JournalArticleLocalServiceUtil.getLatestArticle(articleResource.getResourcePrimKey(),WorkflowConstants.STATUS_ANY,false);
  if (languageIds.contains(defaultContentLanguageId)) {
    Assert.assertEquals(article.getDefaultLanguageId(),stagingArticle.getDefaultLanguageId());
  }
 else {
    Assert.assertEquals(defaultLanguageId,stagingArticle.getDefaultLanguageId());
  }
  for (  Locale locale : _locales) {
    if (languageIds.contains(LocaleUtil.toLanguageId(locale)) || languageIds.contains(defaultContentLanguageId)) {
      Assert.assertEquals(article.getTitle(locale),stagingArticle.getTitle(locale));
    }
 else {
      Assert.assertEquals(article.getTitle(defaultLanguageId),stagingArticle.getTitle(locale));
    }
  }
}
