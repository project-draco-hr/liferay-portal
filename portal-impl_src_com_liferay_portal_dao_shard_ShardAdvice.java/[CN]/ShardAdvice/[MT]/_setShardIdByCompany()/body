{
  Stack<String> companyServiceStack=_getCompanyServiceStack();
  if (companyServiceStack.isEmpty()) {
    long companyId=CompanyThreadLocal.getCompanyId();
    _setShardIdByCompanyId(companyId);
  }
 else {
    String shardId=companyServiceStack.peek();
    _setShardId(shardId);
  }
}
