{
  HttpServletRequest request=(HttpServletRequest)pageContext.getRequest();
  HttpServletResponse response=(HttpServletResponse)pageContext.getResponse();
  CustomizationSettingsProcessor processor=new CustomizationSettingsProcessor(pageContext);
  Template template=TemplateManagerUtil.getTemplate(TemplateManager.VELOCITY,templateResource,templateContextType);
  template.put("processor",processor);
  template.prepare(request);
  VelocityTaglib velocityTaglib=new VelocityTaglib(pageContext.getServletContext(),request,response,pageContext,template);
  template.put("taglibLiferay",velocityTaglib);
  template.put("theme",velocityTaglib);
  try {
    template.processTemplate(pageContext.getOut());
  }
 catch (  Exception e) {
    _log.error(e,e);
    throw e;
  }
}
