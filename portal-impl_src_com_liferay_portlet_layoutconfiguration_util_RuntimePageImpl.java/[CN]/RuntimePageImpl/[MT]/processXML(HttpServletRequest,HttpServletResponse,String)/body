{
  PortletResponse portletResponse=(PortletResponse)request.getAttribute(JavaConstants.JAVAX_PORTLET_RESPONSE);
  if (!(portletResponse instanceof RenderResponse)) {
    throw new IllegalArgumentException("processXML can only be invoked in the render phase");
  }
  RenderResponse renderResponse=(RenderResponse)portletResponse;
  RuntimeLogic portletLogic=new PortletLogic(request,response);
  RuntimeLogic actionURLLogic=new ActionURLLogic(renderResponse);
  RuntimeLogic renderURLLogic=new RenderURLLogic(renderResponse);
  content=RuntimePageUtil.processXML(request,content,portletLogic);
  content=RuntimePageUtil.processXML(request,content,actionURLLogic);
  content=RuntimePageUtil.processXML(request,content,renderURLLogic);
  return content;
}
