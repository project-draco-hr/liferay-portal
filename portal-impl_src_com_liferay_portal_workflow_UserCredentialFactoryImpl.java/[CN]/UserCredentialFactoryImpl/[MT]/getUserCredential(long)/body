{
  if (userId <= 0) {
    return null;
  }
  try {
    User user=UserLocalServiceUtil.getUserById(userId);
    UserCredential userCredential=new UserCredential();
    userCredential.setCompanyId(user.getCompanyId());
    userCredential.setEmailAddress(user.getEmailAddress());
    userCredential.setLocale(user.getLocale());
    userCredential.setLogin(user.getLogin());
    userCredential.setRoleIds(SetUtil.fromArray(user.getRoleIds()));
    userCredential.setScreenName(user.getScreenName());
    userCredential.setUserId(user.getUserId());
    return userCredential;
  }
 catch (  Exception e) {
    throw new WorkflowException("Error requesting user credentials for user id " + userId,e);
  }
}
