{
  if (!containsPermission(themeDisplay.getPermissionChecker(),themeDisplay.getScopeGroupId(),categoryId,ActionKeys.ADD_CATEGORY)) {
    return;
  }
  URLMenuItem urlMenuItem=new URLMenuItem();
  String key="category[message-board]";
  if (categoryId != MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID) {
    key="subcategory[message-board]";
  }
  urlMenuItem.setLabel(LanguageUtil.get(PortalUtil.getHttpServletRequest(portletRequest),key));
  PortletDisplay portletDisplay=themeDisplay.getPortletDisplay();
  PortletURL portletURL=PortletURLFactoryUtil.create(portletRequest,portletDisplay.getId(),themeDisplay.getPlid(),PortletRequest.RENDER_PHASE);
  portletURL.setParameter("mvcRenderCommandName","/message_boards/edit_category");
  portletURL.setParameter("redirect",PortalUtil.getCurrentURL(portletRequest));
  portletURL.setParameter("parentCategoryId",String.valueOf(categoryId));
  urlMenuItem.setURL(portletURL.toString());
  menuItems.add(urlMenuItem);
}
