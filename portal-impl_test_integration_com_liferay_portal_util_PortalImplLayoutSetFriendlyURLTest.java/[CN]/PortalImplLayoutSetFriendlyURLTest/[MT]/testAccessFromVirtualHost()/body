{
  Field field=ReflectionUtil.getDeclaredField(PropsValues.class,"VIRTUAL_HOSTS_DEFAULT_SITE_NAME");
  Object value=field.get(null);
  try {
    Group defaultGroup=GroupTestUtil.addGroup();
    field.set(null,defaultGroup.getName());
    ThemeDisplay themeDisplay=initThemeDisplay(company,group,layout,VIRTUAL_HOSTNAME);
    company.setVirtualHostname(LOCALHOST);
    Layout layout=LayoutTestUtil.addLayout(defaultGroup.getGroupId(),ServiceTestUtil.randomString());
    String friendlyURL=PortalUtil.getLayoutSetFriendlyURL(layout.getLayoutSet(),themeDisplay);
    Assert.assertFalse(friendlyURL.contains(LOCALHOST));
  }
  finally {
    field.set(null,value);
  }
}
