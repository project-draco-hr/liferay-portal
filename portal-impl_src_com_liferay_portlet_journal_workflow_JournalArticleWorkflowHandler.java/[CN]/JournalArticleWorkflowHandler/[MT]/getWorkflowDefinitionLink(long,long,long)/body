{
  JournalArticle article=JournalArticleLocalServiceUtil.getArticle(classPK);
  long folderId=JournalFolderLocalServiceUtil.getInheritedWorkflowFolderId(article.getFolderId());
  DDMStructure ddmStructure=DDMStructureLocalServiceUtil.getStructure(article.getGroupId(),PortalUtil.getClassNameId(JournalArticle.class),article.getStructureId(),true);
  WorkflowDefinitionLink workflowDefinitionLink=WorkflowDefinitionLinkLocalServiceUtil.fetchWorkflowDefinitionLink(companyId,groupId,JournalFolder.class.getName(),folderId,ddmStructure.getStructureId(),true);
  if (workflowDefinitionLink == null) {
    workflowDefinitionLink=WorkflowDefinitionLinkLocalServiceUtil.fetchWorkflowDefinitionLink(companyId,groupId,JournalFolder.class.getName(),folderId,JournalArticleConstants.DDM_STRUCTURE_ID_ALL,true);
  }
  return workflowDefinitionLink;
}
