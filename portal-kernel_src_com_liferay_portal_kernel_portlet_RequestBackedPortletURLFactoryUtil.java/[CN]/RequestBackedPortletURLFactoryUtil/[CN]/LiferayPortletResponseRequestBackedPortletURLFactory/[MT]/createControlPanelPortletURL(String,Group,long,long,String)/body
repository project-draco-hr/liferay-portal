{
  ThemeDisplay themeDisplay=(ThemeDisplay)_liferayPortletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  if (group == null) {
    group=themeDisplay.getScopeGroup();
  }
  LiferayPortletURL liferayPortletURL=PortletURLFactoryUtil.create(_liferayPortletRequest,portletId,_getControlPanelLayout(themeDisplay.getCompanyId(),group),lifecycle);
  return _populateControlPanelPortletURL(liferayPortletURL,refererGroupId,refererPlid);
}
