{
  UploadPortletRequest uploadRequest=PortalUtil.getUploadPortletRequest(actionRequest);
  boolean useLogo=ParamUtil.getBoolean(actionRequest,"useLogo");
  File file=uploadRequest.getFile("logoFileName");
  byte[] bytes=FileUtil.getBytes(file);
  if (useLogo && ((bytes == null) || (bytes.length == 0))) {
    LayoutSet layoutSet=LayoutSetLocalServiceUtil.getLayoutSet(layoutSetId);
    if (layoutSet.isLogo()) {
      return;
    }
    throw new UploadException();
  }
  LayoutSetServiceUtil.updateLogo(liveGroupId,privateLayout,useLogo,file);
  if (stagingGroupId > 0) {
    LayoutSetServiceUtil.updateLogo(stagingGroupId,privateLayout,useLogo,file);
  }
}
