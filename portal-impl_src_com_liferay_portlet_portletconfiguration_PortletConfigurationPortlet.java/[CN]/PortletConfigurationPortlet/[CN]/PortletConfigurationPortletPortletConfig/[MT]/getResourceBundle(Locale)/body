{
  try {
    PortletRequest portletRequest=_portletRequestThreadLocal.get();
    String portletResource=ParamUtil.getString(portletRequest,"portletResource");
    long companyId=PortalUtil.getCompanyId(portletRequest);
    Portlet portlet=PortletLocalServiceUtil.getPortletById(companyId,portletResource);
    HttpServletRequest httpServletRequest=PortalUtil.getHttpServletRequest(portletRequest);
    PortletConfig portletConfig=PortletConfigFactoryUtil.create(portlet,httpServletRequest.getServletContext());
    return new CompositeResourceBundle(super.getResourceBundle(locale),portletConfig.getResourceBundle(locale));
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
  return super.getResourceBundle(locale);
}
