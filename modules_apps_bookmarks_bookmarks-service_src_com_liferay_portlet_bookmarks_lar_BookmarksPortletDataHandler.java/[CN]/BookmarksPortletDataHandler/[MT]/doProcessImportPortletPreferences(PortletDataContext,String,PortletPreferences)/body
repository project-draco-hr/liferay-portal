{
  long rootFolderId=GetterUtil.getLong(portletPreferences.getValue("rootFolderId",null));
  if (rootFolderId > 0) {
    String rootFolderPath=ExportImportPathUtil.getModelPath(portletDataContext,BookmarksFolder.class.getName(),rootFolderId);
    BookmarksFolder folder=(BookmarksFolder)portletDataContext.getZipEntryAsObject(rootFolderPath);
    StagedModelDataHandlerUtil.importStagedModel(portletDataContext,folder);
    Map<Long,Long> folderIds=(Map<Long,Long>)portletDataContext.getNewPrimaryKeysMap(BookmarksFolder.class);
    rootFolderId=MapUtil.getLong(folderIds,rootFolderId,rootFolderId);
    portletPreferences.setValue("rootFolderId",String.valueOf(rootFolderId));
  }
  return portletPreferences;
}
