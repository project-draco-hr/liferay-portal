{
  if (!_isGeneratePreview(fileVersion,containerType)) {
    return;
  }
  StopWatch stopWatch=null;
  if (_log.isInfoEnabled()) {
    stopWatch=new StopWatch();
    stopWatch.start();
  }
  ProcessCallable<String> processCallable=new LiferayVideoProcessCallable(ServerDetector.getServerId(),PropsUtil.get(PropsKeys.LIFERAY_HOME),Log4JUtil.getCustomLogSettings(),srcFile.getCanonicalPath(),destFile.getCanonicalPath(),FileUtil.createTempFileName(),PropsUtil.getProperties(PropsKeys.DL_FILE_ENTRY_PREVIEW_VIDEO,false),PropsUtil.getProperties(PropsKeys.XUGGLER_FFPRESET,true));
  ProcessExecutor.execute(processCallable,ClassPathUtil.getPortalClassPath());
  addFileToStore(fileVersion.getCompanyId(),PREVIEW_PATH,getPreviewFilePath(fileVersion,containerType),destFile);
  if (_log.isInfoEnabled()) {
    _log.info("Xuggler generated a " + containerType + " preview video for "+ fileVersion.getTitle()+ " in "+ stopWatch);
  }
}
