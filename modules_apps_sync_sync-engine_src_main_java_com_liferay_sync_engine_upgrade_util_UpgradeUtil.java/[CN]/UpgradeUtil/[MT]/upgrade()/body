{
  int buildNumber=SyncPropService.getInteger(SyncProp.KEY_BUILD_NUMBER);
  if (buildNumber == 0) {
    createTables();
    Path configurationFilePath=Paths.get(PropsValues.SYNC_CONFIGURATION_DIRECTORY);
    Files.createDirectories(configurationFilePath.resolve("files"));
    Path loggerConfigurationFilePath=configurationFilePath.resolve(PropsValues.SYNC_LOGGER_CONFIGURATION_FILE);
    if (!FileUtil.exists(loggerConfigurationFilePath)) {
      copyLoggerConfiguration();
    }
    SyncPropService.updateSyncProp("buildNumber",ReleaseInfo.getBuildNumber());
    return;
  }
 else   if (buildNumber >= ReleaseInfo.getBuildNumber()) {
    return;
  }
  List<UpgradeProcess> upgradeProcesses=new ArrayList<>();
  upgradeProcesses.add(new UpgradeProcess_3_0_4());
  upgradeProcesses.add(new UpgradeProcess_3_0_5());
  upgradeProcesses.add(new UpgradeProcess_3_0_8());
  upgradeProcesses.add(new UpgradeProcess_3_0_9());
  upgradeProcesses.add(new UpgradeProcess_3_0_10());
  upgradeProcesses.add(new UpgradeProcess_3_0_11());
  upgradeProcesses.add(new UpgradeProcess_3_1_0());
  upgradeProcesses.add(new UpgradeProcess_3_2_1());
  upgradeProcesses.add(new UpgradeProcess_3_3_0());
  for (  UpgradeProcess upgradeProcess : upgradeProcesses) {
    if (buildNumber < upgradeProcess.getThreshold()) {
      _logger.info("Upgrading database schema to {}",upgradeProcess.getThreshold());
      upgradeProcess.upgradeSchema();
    }
  }
  for (  UpgradeProcess upgradeProcess : upgradeProcesses) {
    if (buildNumber < upgradeProcess.getThreshold()) {
      _logger.info("Upgrading to {}",upgradeProcess.getThreshold());
      upgradeProcess.upgrade();
    }
  }
  SyncPropService.updateSyncProp(SyncProp.KEY_BUILD_NUMBER,ReleaseInfo.getBuildNumber());
}
