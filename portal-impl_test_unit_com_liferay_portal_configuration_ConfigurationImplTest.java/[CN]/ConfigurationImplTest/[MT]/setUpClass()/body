{
  URL.setURLStreamHandlerFactory(new URLStreamHandlerFactory(){
    @Override public URLStreamHandler createURLStreamHandler(    String protocol){
      if (!protocol.equals("test")) {
        return null;
      }
      return new URLStreamHandler(){
        @Override protected URLConnection openConnection(        URL url){
          return new URLConnection(url){
            @Override public void connect(){
            }
            @Override public InputStream getInputStream() throws IOException {
              byte[] data=_testURLResources.get(url);
              if (data == null) {
                throw new IOException("Unable to open " + url);
              }
              return new UnsyncByteArrayInputStream(data);
            }
          }
;
        }
      }
;
    }
  }
);
}
