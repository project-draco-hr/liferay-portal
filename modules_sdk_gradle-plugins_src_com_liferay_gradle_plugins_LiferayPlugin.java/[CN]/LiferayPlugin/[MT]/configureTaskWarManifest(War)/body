{
  File manifestFile=null;
  if (_liferayExtension.isOsgiPlugin()) {
    manifestFile=project.file("src/META-INF/MANIFEST.MF");
  }
 else {
    manifestFile=project.file("docroot/META-INF/MANIFEST.MF");
  }
  Manifest manifest=warTask.getManifest();
  if (manifestFile.exists()) {
    manifest.from(manifestFile);
  }
 else {
    CopySpecInternal copySpecInternal=warTask.getRootSpec();
    for (    CopySpecInternal childCopySpecInternal : copySpecInternal.getChildren()) {
      CopySpecResolver copySpecResolver=childCopySpecInternal.buildRootResolver();
      RelativePath destRelativePath=copySpecResolver.getDestPath();
      String destRelativePathString=destRelativePath.getPathString();
      if (destRelativePathString.equals("META-INF")) {
        childCopySpecInternal.exclude("**");
      }
    }
  }
}
