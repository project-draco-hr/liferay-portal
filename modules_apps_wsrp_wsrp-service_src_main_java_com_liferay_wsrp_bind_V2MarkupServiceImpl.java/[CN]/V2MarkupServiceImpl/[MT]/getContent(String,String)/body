{
  if (windowState.equals(LiferayWindowState.EXCLUSIVE.toString())) {
    return rawContent;
  }
  String beginPortletContent="<liferay-wsrp-portlet>";
  String endPortletContent="</liferay-wsrp-portlet>";
  int x=rawContent.indexOf(beginPortletContent);
  if (x == -1) {
    throw new SystemException("Unable to find <liferay-wsrp-portlet>");
  }
  int offset=beginPortletContent.length();
  int y=rawContent.indexOf(endPortletContent,x);
  if (y == -1) {
    throw new SystemException("Unable to find </liferay-wsrp-portlet>");
  }
  return rawContent.substring(x + offset,y);
}
