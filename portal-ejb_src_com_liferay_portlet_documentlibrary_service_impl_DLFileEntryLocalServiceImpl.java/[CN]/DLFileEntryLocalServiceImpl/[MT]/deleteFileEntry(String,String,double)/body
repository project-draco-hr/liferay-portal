{
  DLFileEntry fileEntry=DLFileEntryUtil.findByPrimaryKey(new DLFileEntryPK(folderId,name));
  if (version > 0) {
    try {
      DLServiceUtil.deleteFile(fileEntry.getCompanyId(),PortletKeys.DOCUMENT_LIBRARY,fileEntry.getFolderId(),fileEntry.getName(),version);
    }
 catch (    RemoteException re) {
      throw new SystemException(re);
    }
    DLFileVersionUtil.remove(new DLFileVersionPK(folderId,name,version));
  }
 else {
    deleteFileEntry(fileEntry);
  }
}
