{
  List<AssetVocabulary> vocabularies=new ArrayList<AssetVocabulary>();
  for (  long groupId : groupIds) {
    List<AssetVocabulary> groupVocabularies=getGroupVocabularies(groupId);
    if (Validator.isNull(className)) {
      vocabularies.addAll(groupVocabularies);
    }
 else {
      for (      AssetVocabulary groupVocabulary : groupVocabularies) {
        UnicodeProperties settingsProperties=groupVocabulary.getSettingsProperties();
        long classNameId=PortalUtil.getClassNameId(className);
        long[] selectedClassNameIds=StringUtil.split(settingsProperties.getProperty("selectedClassNameIds"),0L);
        if (selectedClassNameIds.length == 0 || (selectedClassNameIds[0] == 0) || ArrayUtil.contains(selectedClassNameIds,classNameId)) {
          vocabularies.add(groupVocabulary);
        }
      }
    }
  }
  return vocabularies;
}
