{
  HttpServletResponse httpRes=(HttpServletResponse)res;
  Enumeration<String> enu=_config.getInitParameterNames();
  while (enu.hasMoreElements()) {
    String name=enu.nextElement();
    String value=_config.getInitParameter(name);
    if (name.equals(_EXPIRES) && Validator.isNumber(value)) {
      int seconds=GetterUtil.getInteger(value);
      Calendar cal=new GregorianCalendar();
      cal.add(Calendar.SECOND,seconds);
      DateFormat dateFormat=new SimpleDateFormat(_DATE_FORMAT,Locale.US);
      dateFormat.setTimeZone(_timeZone);
      value=dateFormat.format(cal.getTime());
    }
    boolean setHeader=true;
    if (name.toLowerCase().equals("cache-control")) {
      HttpServletRequest httpReq=(HttpServletRequest)req;
      HttpSession session=httpReq.getSession(false);
      if (session == null || session.isNew())       setHeader=false;
    }
    if (setHeader) {
      httpRes.addHeader(name,value);
    }
  }
  doFilter(HeaderFilter.class,req,res,chain);
}
