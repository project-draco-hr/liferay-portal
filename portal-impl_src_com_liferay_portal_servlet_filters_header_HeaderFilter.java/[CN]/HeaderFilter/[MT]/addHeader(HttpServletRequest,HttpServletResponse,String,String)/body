{
  if (StringUtil.equalsIgnoreCase(name,HttpHeaders.CACHE_CONTROL)) {
    if (PropsValues.WEB_SERVER_PROXY_LEGACY_MODE) {
      HttpSession session=request.getSession(false);
      if ((session == null) || session.isNew()) {
        String contextPath=request.getContextPath();
        if (contextPath.equals(PortalUtil.getPathContext())) {
          return;
        }
      }
    }
  }
 else   if (StringUtil.equalsIgnoreCase(name,HttpHeaders.EXPIRES)) {
    HttpSession session=request.getSession(false);
    if ((session == null) || session.isNew()) {
      return;
    }
    if (Validator.isNumber(value)) {
      int seconds=GetterUtil.getInteger(value);
      value=_dateFormat.format(System.currentTimeMillis() + (seconds * Time.SECOND));
    }
  }
  response.addHeader(name,value);
}
