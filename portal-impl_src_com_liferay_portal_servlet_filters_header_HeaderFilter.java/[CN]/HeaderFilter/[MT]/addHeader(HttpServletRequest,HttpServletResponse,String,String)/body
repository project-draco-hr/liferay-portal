{
  if (StringUtil.equalsIgnoreCase(name,HttpHeaders.CACHE_CONTROL)) {
    if (PropsValues.WEB_SERVER_PROXY_LEGACY_MODE) {
      HttpSession session=request.getSession(false);
      if ((session == null) || session.isNew()) {
        String contextPath=request.getContextPath();
        if (contextPath.equals(PortalUtil.getPathContext())) {
          return;
        }
      }
    }
  }
 else   if (StringUtil.equalsIgnoreCase(name,HttpHeaders.EXPIRES)) {
    HttpSession session=request.getSession(false);
    if ((session == null) || session.isNew()) {
      return;
    }
    if (Validator.isNumber(value)) {
      int seconds=GetterUtil.getInteger(value);
      Calendar cal=new GregorianCalendar();
      cal.add(Calendar.SECOND,seconds);
      value=_dateFormat.format(cal.getTime());
    }
  }
  response.addHeader(name,value);
}
