{
  Serializable value=event.getValue();
  if (value == null) {
    return event;
  }
  Class<?> valueClass=value.getClass();
  String valueClassName=valueClass.getName();
  try {
    Class<?> loadedValueClass=portletClassLoader.loadClass(valueClassName);
    if (loadedValueClass.equals(valueClass)) {
      return event;
    }
  }
 catch (  ClassNotFoundException cnfe) {
    throw new RuntimeException(cnfe);
  }
  byte[] serializedValue=SerializableUtil.serialize(value);
  value=(Serializable)SerializableUtil.deserialize(serializedValue,portletClassLoader);
  return new EventImpl(event.getName(),event.getQName(),value);
}
