{
  Layout layout=(Layout)request.getAttribute(WebKeys.LAYOUT);
  for (  LayoutTypePortlet layoutTypePortlet : getLayoutTypePortlets(layout)) {
    List<Portlet> portlets=layoutTypePortlet.getAllPortlets();
    for (    Portlet portlet : portlets) {
      for (      Event event : events) {
        javax.xml.namespace.QName qName=event.getQName();
        QName processingQName=portlet.getProcessingEvent(qName.getNamespaceURI(),qName.getLocalPart());
        if (processingQName != null) {
          _doProcessEvent(request,response,portlet,layoutTypePortlet.getLayout(),event);
        }
      }
    }
  }
}
