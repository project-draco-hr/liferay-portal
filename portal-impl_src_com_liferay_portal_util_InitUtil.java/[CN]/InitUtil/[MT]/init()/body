{
  if (_initialized) {
    return;
  }
  try {
    StopWatch stopWatch=null;
    if (_PRINT_TIME) {
      stopWatch=new StopWatch();
      stopWatch.start();
    }
    String userLanguage=SystemProperties.get("user.language");
    String userCountry=SystemProperties.get("user.country");
    String userVariant=SystemProperties.get("user.variant");
    LocaleUtil.setDefault(userLanguage,userCountry,userVariant);
    String userTimeZone=SystemProperties.get("user.timezone");
    TimeZoneUtil.setDefault(userTimeZone);
    try {
      PortalClassLoaderUtil.setClassLoader(Thread.currentThread().getContextClassLoader());
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
    if (GetterUtil.getBoolean(SystemProperties.get("log4j.configure.on.startup"),true)) {
      ClassLoader classLoader=InitUtil.class.getClassLoader();
      Log4JUtil.configureLog4J(classLoader.getResource("META-INF/portal-log4j.xml"));
      Log4JUtil.configureLog4J(classLoader.getResource("META-INF/portal-log4j-ext.xml"));
    }
    try {
      LogFactoryUtil.setLogFactory(new CommonsLogFactoryImpl());
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
    ConfigurationFactoryUtil.setConfigurationFactory(new ConfigurationFactoryImpl());
    JavaProps.isJDK5();
    _initialized=true;
    if (_PRINT_TIME) {
      System.out.println("InitAction takes " + stopWatch.getTime() + " ms");
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}
