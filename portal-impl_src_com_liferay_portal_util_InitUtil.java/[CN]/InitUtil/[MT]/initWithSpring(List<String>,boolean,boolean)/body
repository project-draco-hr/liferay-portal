{
  if (_initialized) {
    return;
  }
  if (!_neverInitialized) {
    PropsUtil.reload();
  }
 else {
    _neverInitialized=false;
  }
  init();
  try {
    if (initModuleFramework) {
      PropsValues.LIFERAY_WEB_PORTAL_CONTEXT_TEMPDIR=System.getProperty(SystemProperties.TMP_DIR);
      ModuleFrameworkUtilAdapter.initFramework();
    }
    ApplicationContext infrastructureApplicationContext=new ArrayApplicationContext(PropsValues.SPRING_INFRASTRUCTURE_CONFIGS);
    if (initModuleFramework) {
      ModuleFrameworkUtilAdapter.registerContext(infrastructureApplicationContext);
      ModuleFrameworkUtilAdapter.startFramework();
    }
    ApplicationContext appApplicationContext=new ClassPathXmlApplicationContext(configLocations.toArray(new String[configLocations.size()]),infrastructureApplicationContext);
    BeanLocator beanLocator=new BeanLocatorImpl(ClassLoaderUtil.getPortalClassLoader(),appApplicationContext);
    PortalBeanLocatorUtil.setBeanLocator(beanLocator);
    if (initModuleFramework) {
      ModuleFrameworkUtilAdapter.startRuntime();
    }
    _appApplicationContext=appApplicationContext;
    if (initModuleFramework && registerContext) {
      registerContext();
    }
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  _initialized=true;
}
