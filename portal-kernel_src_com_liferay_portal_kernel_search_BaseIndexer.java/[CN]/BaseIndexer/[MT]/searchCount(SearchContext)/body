{
  PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
  if ((permissionChecker != null) && isUseSearchResultPermissionFilter(searchContext)) {
    Hits hits=search(searchContext);
    return hits.getLength();
  }
  QueryConfig queryConfig=searchContext.getQueryConfig();
  queryConfig.setHighlightEnabled(false);
  queryConfig.setHitsProcessingEnabled(false);
  queryConfig.setScoreEnabled(false);
  queryConfig.setQueryIndexingEnabled(false);
  queryConfig.setQuerySuggestionEnabled(false);
  searchContext.setSearchEngineId(getSearchEngineId());
  BooleanQuery fullQuery=getFullQuery(searchContext);
  fullQuery.setQueryConfig(queryConfig);
  return IndexSearcherHelperUtil.searchCount(searchContext,fullQuery);
}
