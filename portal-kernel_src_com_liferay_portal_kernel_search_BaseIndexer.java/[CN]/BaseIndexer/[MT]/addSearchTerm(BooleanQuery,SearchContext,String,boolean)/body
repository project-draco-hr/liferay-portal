{
  if (Validator.isNull(field)) {
    return null;
  }
  String value=null;
  Serializable serializable=searchContext.getAttribute(field);
  if (serializable != null) {
    Class<?> clazz=serializable.getClass();
    if (clazz.isArray()) {
      value=StringUtil.merge((Object[])serializable);
    }
 else {
      value=GetterUtil.getString(serializable);
    }
  }
 else {
    value=GetterUtil.getString(serializable);
  }
  if (Validator.isNotNull(value) && (searchContext.getFacet(field) != null)) {
    return null;
  }
  if (Validator.isNull(value)) {
    value=searchContext.getKeywords();
  }
  if (Validator.isNull(value)) {
    return null;
  }
  Query query=null;
  if (searchContext.isAndSearch()) {
    query=searchQuery.addRequiredTerm(field,value,like);
  }
 else {
    query=searchQuery.addTerm(field,value,like);
  }
  return query;
}
