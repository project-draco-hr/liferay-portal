{
  String isbn=_isbn;
  AmazonRankings amazonRankings=null;
  AmazonA2S a2service=new AmazonA2SClient(AmazonRankingsUtil.getAmazonAccessKeyId(),AmazonRankingsUtil.getAmazonAssociateTag(),AmazonA2SLocale.US);
  ItemLookupRequest itemLookupRequest=getItemLookupRequest(isbn);
  try {
    ItemLookupResponse itemLookupResponse=a2service.itemLookup(itemLookupRequest);
    Item item=getItem(itemLookupResponse);
    if (!item.isSetItemAttributes()) {
      throw new AmazonA2SException("Item attributes not set");
    }
    ItemAttributes itemAttributes=item.getItemAttributes();
    String[] authors=null;
    if (itemAttributes.isSetAuthor()) {
      List<String> authorsList=itemAttributes.getAuthor();
      authorsList.toArray(new String[authorsList.size()]);
    }
    String releaseDateAsString=null;
    Date releaseDate=null;
    if (itemAttributes.isSetPublicationDate()) {
      releaseDateAsString=itemAttributes.getPublicationDate();
      SimpleDateFormat df=null;
      if (releaseDateAsString.length() > 7) {
        df=new SimpleDateFormat("yyyy-MM-dd",Locale.US);
      }
 else {
        df=new SimpleDateFormat("yyyy-MM",Locale.US);
      }
      releaseDate=GetterUtil.getDate(releaseDateAsString,df);
    }
    String smallImageURL=null;
    String mediumImageURL=null;
    String largeImageURL=null;
    if (item.isSetSmallImage()) {
      smallImageURL=item.getSmallImage().getURL();
    }
    if (item.isSetMediumImage()) {
      mediumImageURL=item.getMediumImage().getURL();
    }
    if (item.isSetLargeImage()) {
      largeImageURL=item.getLargeImage().getURL();
    }
    double listPrice=0;
    double ourPrice=0;
    double usedPrice=0;
    double collectiblePrice=0;
    double thirdPartyNewPrice=0;
    listPrice=getPrice(itemAttributes.getListPrice());
    OfferListing offerListing=getOfferListing(item);
    if (offerListing != null) {
      ourPrice=getPrice(offerListing.getPrice());
    }
    if (item.isSetOfferSummary()) {
      OfferSummary offerSummary=item.getOfferSummary();
      usedPrice=getPrice(offerSummary.getLowestUsedPrice());
      collectiblePrice=getPrice(offerSummary.getLowestCollectiblePrice());
      thirdPartyNewPrice=getPrice(offerSummary.getLowestNewPrice());
    }
    String availability=null;
    if (offerListing != null) {
      availability=offerListing.getAvailability();
    }
    String productName=itemAttributes.getTitle();
    String catalog=StringPool.BLANK;
    String manufacturer=itemAttributes.getManufacturer();
    int salesRank=GetterUtil.getInteger(item.getSalesRank());
    String media=StringPool.BLANK;
    amazonRankings=new AmazonRankings(isbn,productName,catalog,authors,releaseDate,releaseDateAsString,manufacturer,smallImageURL,mediumImageURL,largeImageURL,listPrice,ourPrice,usedPrice,collectiblePrice,thirdPartyNewPrice,salesRank,media,availability);
  }
 catch (  AmazonA2SException ae) {
    throw new WebCacheException(isbn + " " + ae.toString());
  }
  return amazonRankings;
}
