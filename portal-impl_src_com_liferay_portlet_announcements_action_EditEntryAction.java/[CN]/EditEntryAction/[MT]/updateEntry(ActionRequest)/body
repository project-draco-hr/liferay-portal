{
  ThemeDisplay themeDisplay=(ThemeDisplay)req.getAttribute(WebKeys.THEME_DISPLAY);
  long entryId=ParamUtil.getLong(req,"entryId");
  String[] distributionScopeParts=StringUtil.split(ParamUtil.getString(req,"distributionScope"));
  long classNameId=0;
  long classPK=0;
  if (distributionScopeParts.length == 2) {
    classNameId=GetterUtil.getLong(distributionScopeParts[0]);
    if (classNameId > 0) {
      classPK=GetterUtil.getLong(distributionScopeParts[1]);
    }
  }
  String title=ParamUtil.getString(req,"title");
  String content=ParamUtil.getString(req,"content");
  String url=ParamUtil.getString(req,"url");
  String type=ParamUtil.getString(req,"type");
  int displayDateMonth=ParamUtil.getInteger(req,"displayDateMonth");
  int displayDateDay=ParamUtil.getInteger(req,"displayDateDay");
  int displayDateYear=ParamUtil.getInteger(req,"displayDateYear");
  int displayDateHour=ParamUtil.getInteger(req,"displayDateHour");
  int displayDateMinute=ParamUtil.getInteger(req,"displayDateMinute");
  int displayDateAmPm=ParamUtil.getInteger(req,"displayDateAmPm");
  if (displayDateAmPm == Calendar.PM) {
    displayDateHour+=12;
  }
  int expirationDateMonth=ParamUtil.getInteger(req,"expirationDateMonth");
  int expirationDateDay=ParamUtil.getInteger(req,"expirationDateDay");
  int expirationDateYear=ParamUtil.getInteger(req,"expirationDateYear");
  int expirationDateHour=ParamUtil.getInteger(req,"expirationDateHour");
  int expirationDateMinute=ParamUtil.getInteger(req,"expirationDateMinute");
  int expirationDateAmPm=ParamUtil.getInteger(req,"expirationDateAmPm");
  if (expirationDateAmPm == Calendar.PM) {
    expirationDateHour+=12;
  }
  int priority=ParamUtil.getInteger(req,"priority");
  boolean alert=ParamUtil.getBoolean(req,"alert");
  if (entryId <= 0) {
    AnnouncementsEntryServiceUtil.addEntry(themeDisplay.getPlid(),classNameId,classPK,title,content,url,type,displayDateMonth,displayDateDay,displayDateYear,displayDateHour,displayDateMinute,expirationDateMonth,expirationDateDay,expirationDateYear,expirationDateHour,expirationDateMinute,priority,alert);
  }
 else {
    AnnouncementsEntryServiceUtil.updateEntry(entryId,title,content,url,type,displayDateMonth,displayDateDay,displayDateYear,displayDateHour,displayDateMinute,expirationDateMonth,expirationDateDay,expirationDateYear,expirationDateHour,expirationDateMinute,priority);
  }
}
