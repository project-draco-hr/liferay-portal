{
  ThemeDisplay themeDisplay=(ThemeDisplay)req.getAttribute(WebKeys.THEME_DISPLAY);
  long entryId=ParamUtil.getLong(req,"entryId");
  String[] distributionScopeParts=StringUtil.split(ParamUtil.getString(req,"distributionScope"));
  long classNameId=0;
  long classPK=0;
  if (distributionScopeParts.length == 2) {
    classNameId=GetterUtil.getLong(distributionScopeParts[0]);
    if (classNameId > 0) {
      classPK=GetterUtil.getLong(distributionScopeParts[1]);
    }
  }
  String type=ParamUtil.getString(req,"type");
  String title=ParamUtil.getString(req,"title");
  String content=ParamUtil.getString(req,"content");
  String url=ParamUtil.getString(req,"url");
  int priority=ParamUtil.getInteger(req,"priority");
  boolean alert=ParamUtil.getBoolean(req,"alert");
  int displayMonth=ParamUtil.getInteger(req,"displayMonth");
  int displayDay=ParamUtil.getInteger(req,"displayDay");
  int displayYear=ParamUtil.getInteger(req,"displayYear");
  int expirationMonth=ParamUtil.getInteger(req,"expirationMonth");
  int expirationDay=ParamUtil.getInteger(req,"expirationDay");
  int expirationYear=ParamUtil.getInteger(req,"expirationYear");
  String cmd=ParamUtil.getString(req,Constants.CMD);
  if (cmd.equals(Constants.ADD)) {
    AnnouncementEntryServiceUtil.addEntry(themeDisplay.getUserId(),themeDisplay.getPlid(),classNameId,classPK,title,content,url,type,displayMonth,displayDay,displayYear,expirationMonth,expirationDay,expirationYear,priority,alert);
  }
 else {
    AnnouncementEntryServiceUtil.updateEntry(entryId,title,content,url,type,displayMonth,displayDay,displayYear,expirationMonth,expirationDay,expirationYear,priority);
  }
}
