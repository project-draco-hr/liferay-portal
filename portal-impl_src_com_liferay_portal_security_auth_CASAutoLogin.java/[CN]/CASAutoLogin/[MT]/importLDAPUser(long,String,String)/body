{
  long[] ldapServerIds=StringUtil.split(PrefsPropsUtil.getString(companyId,"ldap.server.ids"),0L);
  if (ldapServerIds.length <= 0) {
    ldapServerIds=new long[]{0};
  }
  for (  long ldapServerId : ldapServerIds) {
    User user=importLDAPUser(companyId,ldapServerId,emailAddress,screenName);
    if (user != null) {
      return user;
    }
  }
  if (_log.isDebugEnabled()) {
    String login=emailAddress;
    if (Validator.isNull(login)) {
      login=screenName;
    }
    _log.debug("User " + login + " was not found in any LDAP servers");
  }
  return null;
}
