{
  Set<ItemSelectorReturnType> desiredItemSelectorReturnTypes=new LinkedHashSet<>();
  String[] desiredItemSelectorReturnTypeNames=StringUtil.split((String)map.get("desiredItemSelectorReturnTypes"));
  for (  String desiredItemSelectorReturnTypeName : desiredItemSelectorReturnTypeNames) {
    List<ItemSelectorReturnType> itemSelectorReturnTypes=_itemSelectorReturnTypes.get(desiredItemSelectorReturnTypeName);
    if (itemSelectorReturnTypes.isEmpty()) {
      if (_log.isWarnEnabled()) {
        _log.warn("No return types are registered for " + desiredItemSelectorReturnTypeName);
      }
      continue;
    }
    Iterator<ItemSelectorReturnType> iterator=itemSelectorReturnTypes.iterator();
    if (iterator.hasNext()) {
      desiredItemSelectorReturnTypes.add(iterator.next());
    }
  }
  if (desiredItemSelectorReturnTypes.isEmpty()) {
    if (_log.isWarnEnabled()) {
      _log.warn("No valid desired item selector return types found");
    }
  }
  itemSelectorCriterion.setDesiredItemSelectorReturnTypes(desiredItemSelectorReturnTypes);
}
