{
  UpgradeColumn upgradeCompanyIdColumn=new SwapUpgradeColumnImpl("companyId",new Integer(Types.VARCHAR),AvailableMappersUtil.getCompanyIdMapper());
  UpgradeColumn upgradeGroupIdColumn=new SwapUpgradeColumnImpl("groupId",AvailableMappersUtil.getGroupIdMapper());
  UpgradeColumn upgradeUserIdColumn=new SwapUpgradeColumnImpl("userId",new Integer(Types.VARCHAR),AvailableMappersUtil.getUserIdMapper());
  UpgradeColumn upgradeApprovedByUserIdColumn=new SwapUpgradeColumnImpl("approvedByUserId",new Integer(Types.VARCHAR),AvailableMappersUtil.getUserIdMapper());
  JournalArticlePKUpgradeColumnImpl upgradeArticlePKColumn=new JournalArticlePKUpgradeColumnImpl(upgradeCompanyIdColumn,upgradeGroupIdColumn);
  UpgradeColumn upgradeArticleResourcePrimKeyColumn=new JournalArticleResourcePrimKeyUpgradeColumnImpl(upgradeArticlePKColumn);
  UpgradeColumn upgradeArticleIdColumn=new TempUpgradeColumnImpl("articleId");
  UpgradeColumn upgradeVersionColumn=new TempUpgradeColumnImpl("version",new Integer(Types.DOUBLE));
  UpgradeColumn upgradeStructureIdColumn=new TempUpgradeColumnImpl("structureId");
  UpgradeColumn upgradeContentColumn=new JournalArticleContentUpgradeColumnImpl(upgradeCompanyIdColumn,upgradeGroupIdColumn,upgradeArticleIdColumn,upgradeVersionColumn,upgradeStructureIdColumn,AvailableMappersUtil.getImageIdMapper());
  UpgradeTable upgradeTable=UpgradeTableFactoryUtil.getUpgradeTable(JournalArticleTable.TABLE_NAME,JournalArticleTable.TABLE_COLUMNS,upgradeCompanyIdColumn,upgradeGroupIdColumn,upgradeUserIdColumn,upgradeApprovedByUserIdColumn,upgradeArticlePKColumn,upgradeArticleResourcePrimKeyColumn,upgradeArticleIdColumn,upgradeVersionColumn,upgradeStructureIdColumn,upgradeContentColumn);
  upgradeTable.setCreateSQL(JournalArticleTable.TABLE_SQL_CREATE);
  upgradeTable.setIndexesSQL(JournalArticleTable.TABLE_SQL_ADD_INDEXES);
  upgradeTable.updateTable();
  ValueMapper articleIdMapper=new DefaultPKMapper(upgradeArticlePKColumn.getValueMapper());
  AvailableMappersUtil.setJournalArticleIdMapper(articleIdMapper);
  PKUpgradeColumnImpl upgradeStructurePKColumn=new JournalStructurePKUpgradeColumnImpl(upgradeCompanyIdColumn,upgradeGroupIdColumn);
  UpgradeColumn upgradeXSDColumn=new JournalStructureXSDUpgradeColumnImpl();
  upgradeTable=UpgradeTableFactoryUtil.getUpgradeTable(JournalStructureTable.TABLE_NAME,JournalStructureTable.TABLE_COLUMNS,upgradeCompanyIdColumn,upgradeGroupIdColumn,upgradeStructurePKColumn,upgradeUserIdColumn,upgradeXSDColumn);
  upgradeTable.setCreateSQL(JournalStructureTable.TABLE_SQL_CREATE);
  upgradeTable.setIndexesSQL(JournalStructureTable.TABLE_SQL_ADD_INDEXES);
  upgradeTable.updateTable();
  ValueMapper structureIdMapper=new DefaultPKMapper(upgradeStructurePKColumn.getValueMapper());
  AvailableMappersUtil.setJournalStructureIdMapper(structureIdMapper);
  PKUpgradeColumnImpl upgradeTemplatePKColumn=new JournalTemplatePKUpgradeColumnImpl(upgradeCompanyIdColumn,upgradeGroupIdColumn);
  UpgradeColumn upgradeTemplateIdColumn=new TempUpgradeColumnImpl("templateId");
  UpgradeColumn upgradeXSLColumn=new JournalTemplateXSLUpgradeColumnImpl(upgradeTemplateIdColumn);
  UpgradeColumn upgradeSmallImageIdColumn=new JournalTemplateSmallImageIdUpgradeColumnImpl(upgradeCompanyIdColumn,upgradeGroupIdColumn,upgradeTemplatePKColumn,AvailableMappersUtil.getImageIdMapper());
  upgradeTable=UpgradeTableFactoryUtil.getUpgradeTable(JournalTemplateTable.TABLE_NAME,JournalTemplateTable.TABLE_COLUMNS,upgradeCompanyIdColumn,upgradeGroupIdColumn,upgradeTemplatePKColumn,upgradeUserIdColumn,upgradeTemplateIdColumn,upgradeXSLColumn,upgradeSmallImageIdColumn);
  upgradeTable.setCreateSQL(JournalTemplateTable.TABLE_SQL_CREATE);
  upgradeTable.setIndexesSQL(JournalTemplateTable.TABLE_SQL_ADD_INDEXES);
  upgradeTable.updateTable();
  ValueMapper templateIdMapper=new DefaultPKMapper(upgradeTemplatePKColumn.getValueMapper());
  AvailableMappersUtil.setJournalTemplateIdMapper(templateIdMapper);
  PropsUtil.set(PropsKeys.JOURNAL_SYNC_CONTENT_SEARCH_ON_STARTUP,"true");
}
