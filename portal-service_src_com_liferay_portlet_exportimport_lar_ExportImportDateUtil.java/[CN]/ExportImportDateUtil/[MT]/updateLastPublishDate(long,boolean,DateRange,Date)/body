{
  LayoutSet layoutSet=LayoutSetLocalServiceUtil.getLayoutSet(groupId,privateLayout);
  Date originalLastPublishDate=getLastPublishDate(layoutSet);
  if (!isValidDateRange(dateRange,originalLastPublishDate)) {
    return;
  }
  if (lastPublishDate == null) {
    lastPublishDate=new Date();
  }
  UnicodeProperties settingsProperties=layoutSet.getSettingsProperties();
  settingsProperties.setProperty(_LAST_PUBLISH_DATE,String.valueOf(lastPublishDate.getTime()));
  LayoutSetLocalServiceUtil.updateSettings(layoutSet.getGroupId(),layoutSet.isPrivateLayout(),settingsProperties.toString());
}
