{
  for (  String portletId : newPortletIds) {
    if (ArrayUtil.contains(portletIds,portletId)) {
      continue;
    }
    if (portletsMergeMode.equals(PortletDataHandlerKeys.PORTLETS_MERGE_MODE_ADD_TO_BOTTOM)) {
      portletIds=ArrayUtil.append(portletIds,portletId);
    }
 else {
      portletIds=ArrayUtil.append(new String[]{portletId},portletIds);
    }
  }
  return portletIds;
}
