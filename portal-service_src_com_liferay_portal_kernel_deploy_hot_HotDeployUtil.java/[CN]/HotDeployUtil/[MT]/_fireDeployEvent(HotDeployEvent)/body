{
  if (_capturePrematureEvents) {
    PortalLifecycle portalLifecycle=new BasePortalLifecycle(){
      protected void doPortalDestroy(){
      }
      protected void doPortalInit(){
        HotDeployUtil.fireDeployEvent(event);
      }
    }
;
    PortalLifecycleUtil.register(portalLifecycle,PortalLifecycle.METHOD_INIT);
  }
 else {
    try {
      _doFireDeployEvent(event);
    }
  finally {
      String lockKey=PortletContextLoaderListener.getLockKey(event.getServletContext());
      LockRegistry.finallyFreeLock(lockKey,lockKey,true);
    }
  }
}
