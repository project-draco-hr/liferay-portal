{
  StringBundler oldTemplateScriptSB=new StringBundler(6);
  StringBundler newTemplateScriptSB=new StringBundler(5);
  if (language.equals("ftl")) {
    oldTemplateScriptSB.append("<#assign\\s+");
    oldTemplateScriptSB.append(dateFieldName);
    oldTemplateScriptSB.append("_DateObj\\s*=\\s*dateUtil\\s*");
    oldTemplateScriptSB.append(".\\s*newDate\\(\\s*");
    oldTemplateScriptSB.append(dateFieldName);
    oldTemplateScriptSB.append("_Data\\s*\\)\\s*>");
    newTemplateScriptSB.append("<#assign ");
    newTemplateScriptSB.append(dateFieldName);
    newTemplateScriptSB.append("_DateObj = dateUtil.parseDate(\"yyyy-MM-dd\", ");
    newTemplateScriptSB.append(dateFieldName);
    newTemplateScriptSB.append("_Data, locale)>");
  }
 else   if (language.equals("vm")) {
    dateFieldName=StringPool.BACK_SLASH + StringPool.DOLLAR + dateFieldName;
    oldTemplateScriptSB.append("#set\\s*\\(");
    oldTemplateScriptSB.append(dateFieldName);
    oldTemplateScriptSB.append("_DateObj\\s*=\\s*\\$dateUtil");
    oldTemplateScriptSB.append(".newDate\\(\\s*");
    oldTemplateScriptSB.append(dateFieldName);
    oldTemplateScriptSB.append("_Data\\s*\\)\\s*\\)");
    newTemplateScriptSB.append("#set (");
    newTemplateScriptSB.append(dateFieldName);
    newTemplateScriptSB.append("_DateObj = \\$dateUtil.parseDate(\"yyyy-MM-dd\", ");
    newTemplateScriptSB.append(dateFieldName);
    newTemplateScriptSB.append("_Data, \\$locale))");
  }
  return script.replaceAll(oldTemplateScriptSB.toString(),newTemplateScriptSB.toString());
}
