{
  try {
    long plid=ParamUtil.getLong(request,"p_l_id");
    long pageResourcePrimKey=ParamUtil.getLong(request,"pageResourcePrimKey");
    plid=getPlid(plid,pageResourcePrimKey);
    WikiPageResource pageResource=WikiPageResourceLocalServiceUtil.getPageResource(pageResourcePrimKey);
    WikiNode node=WikiNodeLocalServiceUtil.getNode(pageResource.getNodeId());
    Layout layout=LayoutLocalServiceUtil.getLayout(plid);
    LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
    String portletId=null;
    for (    String curPortletId : layoutTypePortlet.getPortletIds()) {
      if (curPortletId.startsWith(PortletKeys.WIKI) || curPortletId.startsWith(PortletKeys.WIKI_DISPLAY)) {
        portletId=curPortletId;
        break;
      }
    }
    PortletURL portletURL=new PortletURLImpl(request,portletId,plid,PortletRequest.RENDER_PHASE);
    portletURL.setWindowState(WindowState.NORMAL);
    portletURL.setPortletMode(PortletMode.VIEW);
    portletURL.setParameter("struts_action","/wiki/view");
    portletURL.setParameter("nodeName",node.getName());
    portletURL.setParameter("title",pageResource.getTitle());
    response.sendRedirect(portletURL.toString());
    return null;
  }
 catch (  Exception e) {
    PortalUtil.sendError(e,request,response);
    return null;
  }
}
