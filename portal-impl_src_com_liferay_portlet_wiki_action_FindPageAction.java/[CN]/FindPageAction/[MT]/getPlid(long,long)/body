{
  if (plid != LayoutConstants.DEFAULT_PLID) {
    try {
      Layout layout=LayoutLocalServiceUtil.getLayout(plid);
      LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
      if (layoutTypePortlet.hasPortletId(PortletKeys.WIKI)) {
        return plid;
      }
    }
 catch (    NoSuchLayoutException nsle) {
    }
  }
  WikiPageResource pageResource=WikiPageResourceLocalServiceUtil.getPageResource(pageResourcePrimKey);
  WikiNode node=WikiNodeLocalServiceUtil.getNode(pageResource.getNodeId());
  plid=PortalUtil.getPlidFromPortletId(node.getGroupId(),false,PortletKeys.WIKI);
  if (plid != LayoutConstants.DEFAULT_PLID) {
    return plid;
  }
  plid=PortalUtil.getPlidFromPortletId(node.getGroupId(),true,PortletKeys.WIKI);
  if (plid != LayoutConstants.DEFAULT_PLID) {
    return plid;
  }
 else {
    throw new NoSuchLayoutException("No page was found with the Wiki portlet.");
  }
}
