{
  ThemeDisplay themeDisplay=(ThemeDisplay)req.getAttribute(WebKeys.THEME_DISPLAY);
  long entryId=ParamUtil.getLong(req,"entryId");
  String urlTitle=ParamUtil.getString(req,"urlTitle");
  BlogsEntry entry=null;
  if (entryId > 0) {
    entry=BlogsEntryServiceUtil.getEntry(entryId);
  }
 else   if (Validator.isNotNull(urlTitle)) {
    try {
      entry=BlogsEntryServiceUtil.getEntry(themeDisplay.getPortletGroupId(),urlTitle);
    }
 catch (    NoSuchEntryException nsee) {
      if (urlTitle.indexOf(StringPool.UNDERLINE) != -1) {
        urlTitle=StringUtil.replace(urlTitle,StringPool.UNDERLINE,StringPool.DASH);
        entry=BlogsEntryServiceUtil.getEntry(themeDisplay.getPortletGroupId(),urlTitle);
      }
 else {
        throw nsee;
      }
    }
  }
  req.setAttribute(WebKeys.BLOGS_ENTRY,entry);
}
