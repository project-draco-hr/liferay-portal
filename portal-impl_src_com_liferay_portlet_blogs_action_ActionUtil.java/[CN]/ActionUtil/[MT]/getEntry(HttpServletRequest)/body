{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  long entryId=ParamUtil.getLong(request,"entryId");
  String urlTitle=ParamUtil.getString(request,"urlTitle");
  BlogsEntry entry=null;
  if (entryId > 0) {
    entry=BlogsEntryServiceUtil.getEntry(entryId);
  }
 else   if (Validator.isNotNull(urlTitle)) {
    try {
      entry=BlogsEntryServiceUtil.getEntry(themeDisplay.getScopeGroupId(),urlTitle);
    }
 catch (    NoSuchEntryException nsee) {
      if (urlTitle.indexOf(CharPool.UNDERLINE) != -1) {
        urlTitle=StringUtil.replace(urlTitle,CharPool.UNDERLINE,CharPool.DASH);
        entry=BlogsEntryServiceUtil.getEntry(themeDisplay.getScopeGroupId(),urlTitle);
      }
 else {
        throw nsee;
      }
    }
  }
  if ((entry != null) && entry.isInTrash()) {
    throw new NoSuchEntryException("{entryId=" + entryId + "}");
  }
  request.setAttribute(WebKeys.BLOGS_ENTRY,entry);
}
