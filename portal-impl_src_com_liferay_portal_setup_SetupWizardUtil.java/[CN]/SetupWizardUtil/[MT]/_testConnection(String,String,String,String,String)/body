{
  if (Validator.isNull(jndiName)) {
    Class.forName(driverClassName);
  }
  DataSource dataSource=null;
  Connection connection=null;
  try {
    dataSource=DataSourceFactoryUtil.initDataSource(driverClassName,url,userName,password,jndiName);
    connection=dataSource.getConnection();
  }
  finally {
    DataAccess.cleanUp(connection);
    DataSourceFactoryUtil.destroyDataSource(dataSource);
  }
}
