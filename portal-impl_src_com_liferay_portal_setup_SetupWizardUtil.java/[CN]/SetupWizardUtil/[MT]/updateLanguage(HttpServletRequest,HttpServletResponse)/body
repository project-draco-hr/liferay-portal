{
  String languageId=ParamUtil.getString(request,"companyLocale",getDefaultLanguageId());
  Locale locale=LocaleUtil.fromLanguageId(languageId);
  if (!LanguageUtil.isAvailableLocale(locale)) {
    return;
  }
  HttpSession session=request.getSession();
  session.setAttribute(Globals.LOCALE_KEY,locale);
  session.setAttribute(WebKeys.SETUP_WIZARD_DEFAULT_LOCALE,languageId);
  LanguageUtil.updateCookie(request,response,locale);
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  themeDisplay.setLanguageId(languageId);
  themeDisplay.setLocale(locale);
}
