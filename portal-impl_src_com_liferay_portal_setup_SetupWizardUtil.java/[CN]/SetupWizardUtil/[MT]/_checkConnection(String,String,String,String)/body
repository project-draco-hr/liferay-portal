{
  Class.forName(driverClassName);
  Connection connection=null;
  try {
    DataSource dataSource=DataSourceFactoryUtil.initDataSource(driverClassName,url,userName,password);
    connection=dataSource.getConnection();
  }
 catch (  Exception e) {
    if (e instanceof SQLException) {
      throw (SQLException)e;
    }
  }
 finally {
    DataAccess.cleanUp(connection);
  }
}
