{
  UnicodeProperties unicodeProperties=PropertiesParamUtil.getProperties(request,_PROPERTIES_PREFIX);
  Properties properties=new Properties();
  properties.putAll(unicodeProperties);
  PropsUtil.addProperties(properties);
  unicodeProperties.setProperty(PropsKeys.LIFERAY_HOME,SystemProperties.get(PropsKeys.LIFERAY_HOME));
  boolean databaseConfigured=_isDatabaseConfigured(unicodeProperties);
  _processAdminProperties(request,unicodeProperties);
  _processDatabaseProperties(request,unicodeProperties,databaseConfigured);
  updateLanguage(request,response);
  unicodeProperties.put(PropsKeys.SETUP_WIZARD_ENABLED,String.valueOf(false));
  HttpSession session=request.getSession();
  session.setAttribute(WebKeys.SETUP_WIZARD_PROPERTIES,unicodeProperties);
  boolean propertiesFileUpdated=_writePropertiesFile(unicodeProperties);
  session.setAttribute(WebKeys.SETUP_WIZARD_PROPERTIES_UPDATED,propertiesFileUpdated);
  if (!databaseConfigured) {
    _reloadServletContext(request,unicodeProperties);
  }
  _updateCompany();
  _updateAdminUser(request);
  _initPlugins();
}
