{
  Company company=CompanyLocalServiceUtil.getCompanyById(PortalInstances.getDefaultCompanyId());
  Account account=company.getAccount();
  String currentName=account.getName();
  String newName=ParamUtil.getString(request,"companyName",PropsValues.COMPANY_DEFAULT_NAME);
  if (!currentName.equals(newName)) {
    account.setName(newName);
    AccountLocalServiceUtil.updateAccount(account);
  }
  String defaultLangaugeId=LocaleUtil.getDefault().toString();
  String languageId=ParamUtil.getString(request,"companyLocale",defaultLangaugeId);
  User defaultUser=company.getDefaultUser();
  defaultUser.setLanguageId(languageId);
  UserLocalServiceUtil.updateUser(defaultUser);
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  themeDisplay.setCompany(company);
}
