{
  injector=(Injector)servletContext.getAttribute(GuiceServletContextListener.INJECTOR_ATTRIBUTE);
  if (injector == null) {
    injector=(Injector)servletContext.getAttribute(GuiceServletContextListener.INJECTOR_NAME);
    if (injector == null) {
      throw new UnavailableException("Guice injector is not available. Please register " + GuiceServletContextListener.class.getName() + ".");
    }
  }
  injector.injectMembers(this);
}
