{
  if (templateContextType.equals(TemplateContextType.EMPTY)) {
    return new VelocityTemplate(templateId,templateContent,errorTemplateId,errorTemplateContent,null,_velocityEngine,_templateContextHelper);
  }
 else   if (templateContextType.equals(TemplateContextType.RESTRICTED)) {
    return new RestrictedTemplate(new VelocityTemplate(templateId,templateContent,errorTemplateId,errorTemplateContent,_restrictedVelocityContext,_velocityEngine,_templateContextHelper),_templateContextHelper.getRestrictedVariables());
  }
 else   if (templateContextType.equals(TemplateContextType.STANDARD)) {
    return new VelocityTemplate(templateId,templateContent,errorTemplateId,errorTemplateContent,_standardVelocityContext,_velocityEngine,_templateContextHelper);
  }
  return null;
}
