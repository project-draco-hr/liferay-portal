{
  addParameter(parameterMap,"p_p_id",_PORTLET_ID);
  if (!parameterMap.containsKey("p_p_lifecycle")) {
    addParameter(parameterMap,"p_p_lifecycle","0");
  }
  addParameter(parameterMap,"p_p_mode",PortletMode.VIEW);
  int x=friendlyURLPath.indexOf(StringPool.SLASH,1);
  String[] urlFragments=StringUtil.split(friendlyURLPath.substring(x + 1),StringPool.SLASH);
  if (friendlyURLPath.indexOf("maximized",x) != -1) {
    urlFragments=ArrayUtil.remove(urlFragments,"maximized");
    addParameter(parameterMap,"p_p_state",WindowState.MAXIMIZED);
  }
  String resourceIdParam=getResourceIdParam(urlFragments[0]);
  if (urlFragments.length == 1) {
    addParameter(parameterMap,"struts_action","/software_catalog/view");
    addParameter(parameterMap,"tabs1",urlFragments[0]);
  }
 else   if (urlFragments.length == 2) {
    if (urlFragments[1].equals("new")) {
      addParameter(parameterMap,"struts_action",getEditAction(urlFragments[0]));
      addParameter(parameterMap,"tabs1",urlFragments[0]);
    }
 else     if (urlFragments[0].equals("products")) {
      addParameter(parameterMap,"struts_action","/software_catalog/view_product_entry");
      addParameter(parameterMap,"tabs1",urlFragments[0]);
      addParameter(parameterMap,resourceIdParam,urlFragments[1]);
    }
  }
 else   if (urlFragments.length == 3) {
    if (urlFragments[2].equals("edit")) {
      addParameter(parameterMap,"struts_action",getEditAction(urlFragments[0]));
      addParameter(parameterMap,"tabs1",urlFragments[0]);
      addParameter(parameterMap,resourceIdParam,urlFragments[1]);
    }
  }
 else   if (urlFragments.length == 4) {
    if (urlFragments[3].equals("new")) {
      addParameter(parameterMap,"struts_action",getEditAction(urlFragments[2]));
      addParameter(parameterMap,"tabs1",urlFragments[0]);
      addParameter(parameterMap,resourceIdParam,urlFragments[1]);
    }
  }
 else   if (urlFragments.length == 5) {
    if (urlFragments[0].equals("products") && urlFragments[4].equals("edit")) {
      addParameter(parameterMap,"struts_action",getEditAction(urlFragments[2]));
      addParameter(parameterMap,"tabs1",urlFragments[0]);
      addParameter(parameterMap,resourceIdParam,urlFragments[1]);
      addParameter(parameterMap,getResourceIdParam(urlFragments[2]),urlFragments[3]);
    }
  }
}
