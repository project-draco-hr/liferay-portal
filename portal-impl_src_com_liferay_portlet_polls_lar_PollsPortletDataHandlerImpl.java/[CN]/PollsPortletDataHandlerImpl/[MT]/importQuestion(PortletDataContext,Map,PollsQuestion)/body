{
  long userId=context.getUserId(question.getUserUuid());
  long plid=context.getPlid();
  Date expirationDate=question.getExpirationDate();
  int expirationMonth=0;
  int expirationDay=0;
  int expirationYear=0;
  int expirationHour=0;
  int expirationMinute=0;
  boolean neverExpire=true;
  if (expirationDate != null) {
    Calendar expirationCal=CalendarFactoryUtil.getCalendar();
    expirationCal.setTime(expirationDate);
    expirationMonth=expirationCal.get(Calendar.MONTH);
    expirationDay=expirationCal.get(Calendar.DATE);
    expirationYear=expirationCal.get(Calendar.YEAR);
    expirationHour=expirationCal.get(Calendar.HOUR);
    expirationMinute=expirationCal.get(Calendar.MINUTE);
    neverExpire=false;
  }
  boolean addCommunityPermissions=true;
  boolean addGuestPermissions=true;
  PollsQuestion existingQuestion=null;
  if (context.getDataStrategy().equals(PortletDataHandlerKeys.DATA_STRATEGY_MIRROR)) {
    existingQuestion=PollsQuestionUtil.fetchByUUID_G(question.getUuid(),context.getGroupId());
    if (existingQuestion == null) {
      existingQuestion=PollsQuestionLocalServiceUtil.addQuestion(question.getUuid(),userId,plid,question.getTitle(),question.getDescription(),expirationMonth,expirationDay,expirationYear,expirationHour,expirationMinute,neverExpire,addCommunityPermissions,addGuestPermissions);
    }
 else {
      existingQuestion=PollsQuestionLocalServiceUtil.updateQuestion(userId,existingQuestion.getQuestionId(),question.getTitle(),question.getDescription(),expirationMonth,expirationDay,expirationYear,expirationHour,expirationMinute,neverExpire);
    }
  }
 else {
    existingQuestion=PollsQuestionLocalServiceUtil.addQuestion(userId,plid,question.getTitle(),question.getDescription(),expirationMonth,expirationDay,expirationYear,expirationHour,expirationMinute,neverExpire,addCommunityPermissions,addGuestPermissions);
  }
  questionPKs.put(question.getPrimaryKeyObj(),existingQuestion.getPrimaryKeyObj());
}
