{
  modify(OperationMode.EMBEDDED);
  verifyConnectNotClose(_embeddedElasticsearchConnection);
  verifyNeitherCloseNorConnect(_remoteElasticsearchConnection);
  resetMockConnections();
  modify(OperationMode.REMOTE);
  verifyCloseNotConnect(_embeddedElasticsearchConnection);
  verifyConnectNotClose(_remoteElasticsearchConnection);
  resetMockConnections();
  modify(OperationMode.EMBEDDED);
  verifyCloseNotConnect(_remoteElasticsearchConnection);
  verifyConnectNotClose(_embeddedElasticsearchConnection);
}
