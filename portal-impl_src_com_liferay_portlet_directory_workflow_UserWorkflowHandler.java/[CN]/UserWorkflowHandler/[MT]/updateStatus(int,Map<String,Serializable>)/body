{
  long userId=GetterUtil.getLong((String)workflowContext.get(WorkflowConstants.CONTEXT_ENTRY_CLASS_PK));
  User user=UserLocalServiceUtil.getUser(userId);
  ServiceContext serviceContext=(ServiceContext)workflowContext.get(WorkflowConstants.CONTEXT_SERVICE_CONTEXT);
  if (((user.getStatus() == WorkflowConstants.STATUS_DRAFT) || (user.getStatus() == WorkflowConstants.STATUS_PENDING)) && (status == WorkflowConstants.STATUS_APPROVED)) {
    UserLocalServiceUtil.completeUserRegistration(user,serviceContext);
  }
  return UserLocalServiceUtil.updateStatus(userId,status,serviceContext);
}
