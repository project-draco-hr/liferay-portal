{
  ThemeDisplay themeDisplay=(ThemeDisplay)renderRequest.getAttribute(WebKeys.THEME_DISPLAY);
  String factoryPid=ParamUtil.getString(renderRequest,"factoryPid");
  String pid=ParamUtil.getString(renderRequest,"pid",factoryPid);
  Map<String,ConfigurationModel> configurationModels=_configurationModelRetriever.getConfigurationModels(themeDisplay.getLanguageId());
  ConfigurationModel configurationModel=configurationModels.get(pid);
  if ((configurationModel == null) && Validator.isNotNull(factoryPid)) {
    configurationModel=configurationModels.get(factoryPid);
  }
  if (configurationModel != null) {
    configurationModel=new ConfigurationModel(configurationModel.getExtendedObjectClassDefinition(),_configurationModelRetriever.getConfiguration(pid),configurationModel.getBundleLocation(),configurationModel.isFactory());
  }
  renderRequest.setAttribute(ConfigurationAdminWebKeys.CONFIGURATION_MODEL,configurationModel);
  DDMFormRendererHelper ddmFormRendererHelper=new DDMFormRendererHelper(renderRequest,renderResponse,configurationModel,_ddmFormRenderer);
  renderRequest.setAttribute(DDMWebKeys.DYNAMIC_DATA_MAPPING_FORM_HTML,ddmFormRendererHelper.getDDMFormHTML());
  return "/edit_configuration.jsp";
}
