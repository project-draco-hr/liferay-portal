{
  BundleWiring bundleWiring=mock(BundleWiring.class);
  BundleCapability bundleCapability=mock(BundleCapability.class);
  BundleWire bundleWire=mock(BundleWire.class);
  BundleCapability bundleCapabilityJquery=mock(BundleCapability.class);
  doReturn(Collections.<String,Object>singletonMap(Details.OSGI_WEBRESOURCE,bsn)).when(bundleCapability).getAttributes();
  Map<String,Object> jQueryProperties=new HashMap<>();
  jQueryProperties.put(Details.OSGI_WEBRESOURCE,"jquery");
  jQueryProperties.put(Constants.VERSION_ATTRIBUTE,new Version("2.15.3"));
  doReturn(jQueryProperties).when(bundleCapabilityJquery).getAttributes();
  doReturn(capability ? Arrays.asList(bundleCapability) : Collections.emptyList()).when(bundleWiring).getCapabilities(Details.OSGI_WEBRESOURCE);
  doReturn(capability ? Arrays.asList(bundleWire) : Collections.emptyList()).when(bundleWiring).getRequiredWires(Details.OSGI_WEBRESOURCE);
  doReturn(bundleCapabilityJquery).when(bundleWire).getCapability();
  doReturn(bundleWiring).when(bundle).adapt(BundleWiring.class);
  doReturn(url).when(bundle).getEntry(Details.CONFIG_JSON);
  doReturn(bsn).when(bundle).getSymbolicName();
  doReturn(version).when(bundle).getVersion();
}
