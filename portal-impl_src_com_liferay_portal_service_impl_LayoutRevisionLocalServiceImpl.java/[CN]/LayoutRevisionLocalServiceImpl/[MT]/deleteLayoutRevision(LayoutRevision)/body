{
  if (layoutRevision.hasChildren()) {
    for (    LayoutRevision curLayoutRevision : layoutRevision.getChildren()) {
      curLayoutRevision.setParentLayoutRevisionId(layoutRevision.getParentLayoutRevisionId());
      layoutRevisionPersistence.update(curLayoutRevision);
    }
  }
  List<PortletPreferences> portletPreferencesList=portletPreferencesLocalService.getPortletPreferencesByPlid(layoutRevision.getLayoutRevisionId());
  for (  PortletPreferences portletPreferences : portletPreferencesList) {
    try {
      portletPreferencesLocalService.deletePortletPreferences(portletPreferences.getPortletPreferencesId());
    }
 catch (    NoSuchPortletPreferencesException nsppe) {
    }
  }
  recentLayoutRevisionLocalService.deleteRecentLayoutRevisions(layoutRevision.getLayoutRevisionId());
  workflowInstanceLinkLocalService.deleteWorkflowInstanceLink(layoutRevision.getCompanyId(),layoutRevision.getGroupId(),LayoutRevision.class.getName(),layoutRevision.getLayoutRevisionId());
  return layoutRevisionPersistence.remove(layoutRevision);
}
