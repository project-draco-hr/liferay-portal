{
  if (layoutRevision.hasChildren()) {
    for (    LayoutRevision curLayoutRevision : layoutRevision.getChildren()) {
      curLayoutRevision.setParentLayoutRevisionId(layoutRevision.getParentLayoutRevisionId());
      layoutRevisionPersistence.update(curLayoutRevision,false);
    }
  }
  List<PortletPreferences> portletPreferencesList=portletPreferencesLocalService.getPortletPreferencesByPlid(layoutRevision.getLayoutRevisionId());
  for (  PortletPreferences portletPreferences : portletPreferencesList) {
    try {
      portletPreferencesLocalService.deletePortletPreferences(portletPreferences.getPortletPreferencesId());
    }
 catch (    NoSuchPortletPreferencesException nsppe) {
    }
  }
  return layoutRevisionPersistence.remove(layoutRevision);
}
