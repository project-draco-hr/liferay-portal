{
  Document contentDocument=SAXReaderUtil.read(content);
  contentDocument=contentDocument.clone();
  XPath xPathSelector=SAXReaderUtil.createXPath("//dynamic-element[@type='image']");
  List<Node> imageNodes=xPathSelector.selectNodes(contentDocument);
  for (  Node imageNode : imageNodes) {
    Element imageEl=(Element)imageNode;
    List<Element> dynamicContentEls=imageEl.elements("dynamic-content");
    for (    Element dynamicContentEl : dynamicContentEls) {
      String id=dynamicContentEl.attributeValue("id");
      long folderId=getFolderId(userId,groupId,resourcePrimKey);
      FileEntry fileEntry=getFileEntry(groupId,folderId,id);
      if (fileEntry == null) {
        continue;
      }
      JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
      jsonObject.put("alt",StringPool.BLANK);
      jsonObject.put("groupId",fileEntry.getGroupId());
      jsonObject.put("name",fileEntry.getFileName());
      jsonObject.put("resourcePrimKey",resourcePrimKey);
      jsonObject.put("title",fileEntry.getTitle());
      jsonObject.put("type","journal");
      jsonObject.put("uuid",fileEntry.getUuid());
      dynamicContentEl.clearContent();
      dynamicContentEl.addCDATA(jsonObject.toString());
    }
  }
  return contentDocument.formattedString();
}
