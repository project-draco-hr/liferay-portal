{
  Document contentDocument=SAXReaderUtil.read(content);
  contentDocument=contentDocument.clone();
  XPath xPathSelector=SAXReaderUtil.createXPath("//dynamic-element[@type='image']");
  List<Node> imageNodes=xPathSelector.selectNodes(contentDocument);
  for (  Node imageNode : imageNodes) {
    Element imageEl=(Element)imageNode;
    List<Element> dynamicContentEls=imageEl.elements("dynamic-content");
    for (    Element dynamicContentEl : dynamicContentEls) {
      String id=dynamicContentEl.attributeValue("id");
      long folderId=getFolderId(userId,groupId,resourcePrimKey);
      FileEntry fileEntry=getFileEntry(groupId,folderId,id);
      String previewURL=StringPool.BLANK;
      if (fileEntry != null) {
        previewURL=DLUtil.getPreviewURL(fileEntry,fileEntry.getFileVersion(),null,StringPool.BLANK,false,true);
      }
      dynamicContentEl.addAttribute("resourcePrimKey",String.valueOf(resourcePrimKey));
      dynamicContentEl.addAttribute("type","journal");
      dynamicContentEl.clearContent();
      dynamicContentEl.addCDATA(previewURL);
    }
  }
  return contentDocument.formattedString();
}
