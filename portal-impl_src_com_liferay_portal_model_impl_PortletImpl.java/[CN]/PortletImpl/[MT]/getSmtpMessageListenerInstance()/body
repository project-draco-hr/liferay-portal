{
  if (Validator.isNotNull(getSmtpMessageListenerClass())) {
    if (isWARFile()) {
      PortletContextWrapper pcw=PortletContextPool.get(getRootPortletId());
      return pcw.getSmtpMessageListenerInstance();
    }
 else {
      return (MessageListener)InstancePool.get(getSmtpMessageListenerClass());
    }
  }
  return null;
}
