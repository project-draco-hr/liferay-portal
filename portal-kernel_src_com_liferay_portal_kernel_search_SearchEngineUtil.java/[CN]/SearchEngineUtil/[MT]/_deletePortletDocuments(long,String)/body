{
  ClassLoader contextClassLoader=_getContextClassLoader();
  try {
    if (_currentSearchEngine.isMessageBusListener()) {
      _messageBusIndexWriter.deletePortletDocuments(companyId,portletId);
    }
 else {
      _getWriter().deletePortletDocuments(companyId,portletId);
    }
  }
  finally {
    _setContextClassLoader(contextClassLoader);
  }
}
