{
  ClassLoader contextClassLoader=_getContextClassLoader();
  try {
    if (_currentSearchEngine.isMessageBusListener()) {
      _messageBusIndexWriter.deleteDocument(companyId,uid);
    }
 else {
      _getWriter().deleteDocument(companyId,uid);
    }
  }
  finally {
    _setContextClassLoader(contextClassLoader);
  }
}
