{
  if (isMessageBusListener()) {
    _instance._messageBusIndexWriter.updateDocument(companyId,uid,doc);
  }
 else {
    ClassLoader contextClassLoader=_setSearchEngineClassLoader();
    try {
      _instance._getWriter().updateDocument(companyId,uid,doc);
    }
  finally {
      _setContextClassLoader(contextClassLoader);
    }
  }
}
