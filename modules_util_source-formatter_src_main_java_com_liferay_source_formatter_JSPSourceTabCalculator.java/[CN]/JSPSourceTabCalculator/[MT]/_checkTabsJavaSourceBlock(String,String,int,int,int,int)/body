{
  int minLeadingTabCount=-1;
  for (int i=startLine; i <= endLine; i++) {
    String line=_jspSourceProcessor.getLine(content,i);
    if (Validator.isNull(line)) {
      continue;
    }
    int leadingTabCount=_jspSourceProcessor.getLeadingTabCount(line);
    if (minLeadingTabCount == -1) {
      minLeadingTabCount=leadingTabCount;
    }
 else {
      minLeadingTabCount=Math.min(minLeadingTabCount,leadingTabCount);
    }
  }
  if (tabCount != minLeadingTabCount) {
    return _fixTabs(content,startLine,endLine,minLeadingTabCount - tabCount);
  }
  int startPos=_jspSourceProcessor.getLineStartPos(content,startLine);
  int endPos=_jspSourceProcessor.getLineStartPos(content,endLine + 1);
  JavaSourceTabCalculator javaSourceTabCalculator=new JavaSourceTabCalculator();
  javaSourceTabCalculator.calculateTabs(fileName,content.substring(startPos,endPos),startLine - 1,tabLevel,_jspSourceProcessor);
  return content;
}
