{
  Modifications modifications=Modifications.getInstance();
  Properties groupMappings=LDAPSettingsUtil.getGroupMappings(ldapServerId,user.getCompanyId());
  String userDN=getUserDNName(ldapServerId,user,userMappings);
  for (  UserGroup userGroup : userGroups) {
    String groupDN=getGroupDNName(ldapServerId,userGroup,groupMappings);
    if (PortalLDAPUtil.isUserGroupMember(ldapServerId,user.getCompanyId(),groupDN,userDN)) {
      continue;
    }
    modifications.addItem(DirContext.ADD_ATTRIBUTE,userMappings.getProperty(UserConverterKeys.GROUP),groupDN);
  }
  return modifications;
}
