{
  String className=properties.getProperty(EhcacheConstants.CACHE_MANAGER_LISTENER_FACTORY_CLASS_NAME);
  if (Validator.isNull(className)) {
    return null;
  }
  try {
    CacheManagerEventListenerFactory cacheManagerEventListenerFactory=(CacheManagerEventListenerFactory)InstanceFactory.newInstance(getClassLoader(),className);
    return new EhcachePortalCacheManagerListenerAdapter(cacheManagerEventListenerFactory.createCacheManagerEventListener(ehcachePortalCacheManager.getEhcacheManager(),properties));
  }
 catch (  Exception e) {
    throw new SystemException("Unable to instantiate cache manager event listener " + className,e);
  }
}
