{
  try {
    String redirect=ParamUtil.getString(portletRequest,"redirect");
    String returnToFullPageURL=ParamUtil.getString(portletRequest,"returnToFullPageURL");
    PortletURL portletURL=PortletProviderUtil.getPortletURL(portletRequest,PortletConfigurationApplicationType.PortletConfiguration.CLASS_NAME,PortletProvider.Action.VIEW);
    portletURL.setParameter("mvcPath","/edit_configuration_templates.jsp");
    portletURL.setParameter("redirect",redirect);
    portletURL.setParameter("returnToFullPageURL",returnToFullPageURL);
    portletURL.setParameter("portletConfiguration",Boolean.TRUE.toString());
    ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
    PortletDisplay portletDisplay=themeDisplay.getPortletDisplay();
    portletURL.setParameter("portletResource",portletDisplay.getId());
    portletURL.setWindowState(LiferayWindowState.POP_UP);
    return portletURL.toString();
  }
 catch (  Exception e) {
  }
  return StringPool.BLANK;
}
