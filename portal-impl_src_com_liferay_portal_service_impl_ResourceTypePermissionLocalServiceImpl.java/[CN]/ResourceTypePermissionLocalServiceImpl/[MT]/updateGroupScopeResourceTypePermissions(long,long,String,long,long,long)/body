{
  ResourceTypePermission resourceTypePermission=resourceTypePermissionPersistence.fetchByC_G_N_R(companyId,groupId,name,roleId);
  if (resourceTypePermission == null) {
    if (actionIdsLong == 0) {
      return;
    }
    long resourceTypePermissionId=counterLocalService.increment();
    resourceTypePermission=resourceTypePermissionPersistence.create(resourceTypePermissionId);
    resourceTypePermission.setCompanyId(companyId);
    resourceTypePermission.setGroupId(groupId);
    resourceTypePermission.setName(name);
    resourceTypePermission.setRoleId(roleId);
  }
  if (operator == ResourceBlockConstants.OPERATOR_ADD) {
    actionIdsLong|=resourceTypePermission.getActionIds();
  }
 else   if (operator == ResourceBlockConstants.OPERATOR_REMOVE) {
    actionIdsLong=resourceTypePermission.getActionIds() & (~actionIdsLong);
  }
  if (actionIdsLong == 0) {
    deleteResourceTypePermission(resourceTypePermission);
  }
 else {
    resourceTypePermission.setActionIds(actionIdsLong);
    updateResourceTypePermission(resourceTypePermission);
  }
}
