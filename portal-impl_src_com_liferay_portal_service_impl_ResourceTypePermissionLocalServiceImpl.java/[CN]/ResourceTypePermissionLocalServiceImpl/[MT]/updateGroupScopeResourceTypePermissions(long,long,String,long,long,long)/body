{
  ResourceTypePermissionPK pk=new ResourceTypePermissionPK(companyId,groupId,name,roleId);
  ResourceTypePermission resourceTypePermission=resourceTypePermissionPersistence.fetchByPrimaryKey(pk);
  if (resourceTypePermission == null) {
    if (actionIdsLong == 0) {
      return;
    }
    resourceTypePermission=resourceTypePermissionPersistence.create(pk);
  }
  if (operator == ResourceBlockConstants.OPERATOR_ADD) {
    actionIdsLong|=resourceTypePermission.getActionIds();
  }
 else   if (operator == ResourceBlockConstants.OPERATOR_REMOVE) {
    actionIdsLong=resourceTypePermission.getActionIds() & (~actionIdsLong);
  }
  if (actionIdsLong == 0) {
    deleteResourceTypePermission(resourceTypePermission);
  }
 else {
    resourceTypePermission.setActionIds(actionIdsLong);
    updateResourceTypePermission(resourceTypePermission);
  }
}
