{
  Iterator<IGFolder> foldersItr=igFolderPersistence.findByG_P(fromFolder.getGroupId(),fromFolder.getFolderId()).iterator();
  while (foldersItr.hasNext()) {
    IGFolder folder=foldersItr.next();
    mergeFolders(folder,toFolderId);
  }
  Iterator<IGImage> imagesItr=igImagePersistence.findByFolderId(fromFolder.getFolderId()).iterator();
  while (imagesItr.hasNext()) {
    IGImage image=imagesItr.next();
    image.setFolderId(toFolderId);
    igImagePersistence.update(image);
  }
  igFolderPersistence.remove(fromFolder.getFolderId());
}
