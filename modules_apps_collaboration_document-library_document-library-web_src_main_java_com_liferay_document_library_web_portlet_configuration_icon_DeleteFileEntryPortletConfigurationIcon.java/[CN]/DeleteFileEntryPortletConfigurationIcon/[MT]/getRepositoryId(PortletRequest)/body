{
  try {
    long repositoryId=ParamUtil.getLong(portletRequest,"repositoryId");
    if (repositoryId != 0) {
      return repositoryId;
    }
    long fileEntryId=ParamUtil.getLong(portletRequest,"fileEntryId");
    FileEntry fileEntry=_dlAppService.getFileEntry(fileEntryId);
    return fileEntry.getRepositoryId();
  }
 catch (  PortalException pe) {
    throw new RuntimeException(pe);
  }
}
