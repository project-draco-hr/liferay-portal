{
  List tasks=new ArrayList();
  if (Validator.isNull(taskName) && Validator.isNull(definitionName) && Validator.isNull(assignedTo)&& Validator.isNull(createDateGT)&& Validator.isNull(createDateLT)&& Validator.isNull(startDateGT)&& Validator.isNull(startDateLT)&& Validator.isNull(endDateGT)&& Validator.isNull(endDateLT)) {
    List taskInstances=taskMgmtSession.findTaskInstances(userId);
    taskInstances.addAll(taskMgmtSession.findPooledTaskInstances(userId));
    Iterator itr=taskInstances.iterator();
    while (itr.hasNext()) {
      TaskInstance task=(TaskInstance)itr.next();
      ProcessInstance instance=task.getToken().getProcessInstance();
      if (instance.getId() == instanceId) {
        WorkflowUtil.initTask(task);
        tasks.add(task);
      }
    }
  }
 else {
    tasks=graphSession.findTaskInstancesBySearchTerms(taskName,definitionName,assignedTo,createDateGT,createDateLT,startDateGT,startDateLT,endDateGT,endDateLT,hideEndedTasks,andOperator,begin,end);
    WorkflowUtil.initTasks(tasks);
  }
  return tasks;
}
