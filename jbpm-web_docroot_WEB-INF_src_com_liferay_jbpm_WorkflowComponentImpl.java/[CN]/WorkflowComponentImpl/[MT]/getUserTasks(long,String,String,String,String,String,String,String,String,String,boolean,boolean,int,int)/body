{
  List tasks=new ArrayList();
  if (Validator.isNull(taskName) && Validator.isNull(definitionName) && Validator.isNull(assignedTo)&& Validator.isNull(gtCreateDate)&& Validator.isNull(ltCreateDate)&& Validator.isNull(gtStartDate)&& Validator.isNull(ltStartDate)&& Validator.isNull(gtEndDate)&& Validator.isNull(ltEndDate)) {
    List taskInstances=taskMgmtSession.findTaskInstances(userId);
    taskInstances.addAll(taskMgmtSession.findPooledTaskInstances(userId));
    Iterator itr=taskInstances.iterator();
    while (itr.hasNext()) {
      TaskInstance task=(TaskInstance)itr.next();
      ProcessInstance instance=task.getToken().getProcessInstance();
      if (instance.getId() == instanceId) {
        WorkflowUtil.initTask(task);
        tasks.add(task);
      }
    }
  }
 else {
    tasks=graphSession.findTaskInstancesBySearchTerms(taskName,definitionName,assignedTo,gtCreateDate,ltCreateDate,gtStartDate,ltStartDate,gtEndDate,ltEndDate,hideEndedTasks,andOperator,begin,end);
    WorkflowUtil.initTasks(tasks);
  }
  return tasks;
}
