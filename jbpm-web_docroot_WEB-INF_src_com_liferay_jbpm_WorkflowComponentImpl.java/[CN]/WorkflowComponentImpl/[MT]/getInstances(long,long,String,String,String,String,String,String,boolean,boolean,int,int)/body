{
  List instances=new ArrayList();
  if (definitionId > 0) {
    ProcessDefinition processDefinition=graphSession.loadProcessDefinition(definitionId);
    instances=graphSession.findProcessInstances(processDefinition.getId());
    WorkflowUtil.initInstances(instances);
  }
 else   if (instanceId > 0) {
    ProcessInstance instance=graphSession.loadProcessInstance(instanceId);
    WorkflowUtil.initInstance(instance);
    instances.add(instance);
  }
 else {
    instances=graphSession.findProcessInstancesBySearchTerms(definitionName,definitionVersion,gtStartDate,ltStartDate,gtEndDate,ltEndDate,hideEndedTasks,andOperator,begin,end);
  }
  return instances;
}
