{
  List userTasks=getUserTasks(instanceId,null,null,null,null,null,null,null,null,null,false,false,0,0);
  List currentTasks=new ArrayList();
  List tokenTasks=taskMgmtSession.findTaskInstancesByToken(tokenId);
  if (tokenTasks.size() == 0) {
    currentTasks=null;
  }
 else {
    Iterator itr=tokenTasks.iterator();
    Set tokenTaskIds=new HashSet();
    while (itr.hasNext()) {
      TaskInstance task=(TaskInstance)itr.next();
      tokenTaskIds.add(new Long(task.getId()));
    }
    itr=userTasks.iterator();
    while (itr.hasNext()) {
      TaskInstance task=(TaskInstance)itr.next();
      if (tokenTaskIds.contains(new Long(task.getId()))) {
        currentTasks.add(task);
      }
    }
  }
  return currentTasks;
}
