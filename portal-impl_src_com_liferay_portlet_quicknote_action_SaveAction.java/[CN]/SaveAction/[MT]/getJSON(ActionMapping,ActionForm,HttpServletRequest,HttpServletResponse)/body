{
  ThemeDisplay themeDisplay=(ThemeDisplay)req.getAttribute(WebKeys.THEME_DISPLAY);
  String portletId=ParamUtil.getString(req,"portletId");
  PortletPermission.check(themeDisplay.getPermissionChecker(),themeDisplay.getPlid(),portletId,ActionKeys.CONFIGURATION);
  PortletPreferences prefs=PortletPreferencesFactory.getPortletSetup(req,portletId,true,true);
  String color=ParamUtil.getString(req,"color");
  String data=ParamUtil.getString(req,"data");
  if (Validator.isNotNull(color)) {
    prefs.setValue("color",color);
  }
  if (Validator.isNotNull(data)) {
    prefs.setValue("data",data);
  }
  prefs.store();
  return null;
}
