{
  String portalPortalPropertiesContent=formatPortalPortalProperties();
  String[] includes=null;
  if (portalSource) {
    includes=new String[]{"**\\portal-ext.properties","**\\portal-legacy-*.properties"};
  }
 else {
    includes=new String[]{"**\\portal.properties","**\\portal-ext.properties","**\\portlet.properties"};
  }
  List<String> fileNames=getFileNames(new String[0],includes);
  for (  String fileName : fileNames) {
    File file=new File(BASEDIR + fileName);
    fileName=StringUtil.replace(fileName,StringPool.BACK_SLASH,StringPool.SLASH);
    String content=fileUtil.read(file);
    if (!portalSource && fileName.endsWith("portlet.properties")) {
      String newContent=formatPortletProperties(content);
      compareAndAutoFixContent(file,fileName,content,newContent);
    }
 else {
      formatPortalProperties(fileName,content,portalPortalPropertiesContent);
    }
  }
}
