{
  String portalPortalProperties=null;
  if (portalSource) {
    File portalPortalPropertiesFile=new File(BASEDIR + "portal-impl/src/portal.properties");
    portalPortalProperties=fileUtil.read(portalPortalPropertiesFile);
  }
 else {
    portalPortalProperties=ContentUtil.get("portal.properties");
  }
  String[] excludes=null;
  String[] includes=null;
  if (portalSource) {
    excludes=new String[]{"**\\classes\\**","**\\bin\\**"};
    includes=new String[]{"**\\portal-ext.properties","**\\portal-legacy-*.properties"};
  }
 else {
    excludes=new String[0];
    includes=new String[]{"**\\portal.properties","**\\portal-ext.properties"};
  }
  List<String> fileNames=getFileNames(excludes,includes);
  for (  String fileName : fileNames) {
    File file=new File(BASEDIR + fileName);
    fileName=StringUtil.replace(fileName,StringPool.BACK_SLASH,StringPool.SLASH);
    String content=fileUtil.read(file);
    formatPortalProperties(fileName,content,portalPortalProperties);
  }
}
