{
  String servletContextName=null;
  try {
    ServletContext ctx=event.getServletContext();
    servletContextName=StringUtil.replace(ctx.getServletContextName(),StringPool.SPACE,StringPool.UNDERLINE);
    _log.debug("Invoking undeploy for " + servletContextName);
    List layoutTemplateIds=(List)_vars.get(servletContextName);
    if (layoutTemplateIds != null) {
      _log.info("Unregistering layout templates for " + servletContextName);
      Iterator itr=layoutTemplateIds.iterator();
      while (itr.hasNext()) {
        ObjectValuePair ovp=(ObjectValuePair)itr.next();
        String layoutTemplateId=(String)ovp.getKey();
        Boolean standard=(Boolean)ovp.getValue();
        try {
          LayoutTemplateLocalUtil.uninstallLayoutTemplate(layoutTemplateId,standard.booleanValue());
        }
 catch (        Exception e1) {
          _log.error(e1.getMessage());
        }
      }
      layoutTemplateIds=null;
      _log.info("Layout templates for " + servletContextName + " unregistered successfully");
    }
  }
 catch (  Exception e2) {
    throw new HotDeployException("Error unregistering layout templates for " + servletContextName,e2);
  }
}
