{
  _request=request;
  _response=response;
  if (Validator.isNotNull(portletId)) {
    ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
    _portlet=PortletLocalServiceUtil.getPortletById(themeDisplay.getCompanyId(),portletId);
  }
  _portletAjaxRender=GetterUtil.getBoolean(request.getAttribute(WebKeys.PORTLET_AJAX_RENDER));
  _portletRenderers=new TreeMap<>(_renderWeightComparator);
}
