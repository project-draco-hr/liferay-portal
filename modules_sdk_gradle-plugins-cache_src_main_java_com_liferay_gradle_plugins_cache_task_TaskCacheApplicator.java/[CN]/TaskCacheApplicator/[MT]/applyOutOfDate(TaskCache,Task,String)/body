{
  if (_logger.isInfoEnabled()) {
    _logger.info(task + " is out-of-date");
  }
  Copy copy=createSaveCacheTask(taskCache);
  copy.doLast(new Action<Task>(){
    @Override public void execute(    Task task){
      File digestFile=new File(taskCache.getCacheDir(),_DIGEST_FILE_NAME);
      try {
        Files.write(digestFile.toPath(),currentDigest.getBytes(StandardCharsets.UTF_8));
        if (_logger.isInfoEnabled()) {
          _logger.info("Updated digest file to " + currentDigest);
        }
      }
 catch (      IOException ioe) {
        throw new GradleException("Unable to write digest file",ioe);
      }
    }
  }
);
  task.finalizedBy(copy);
}
