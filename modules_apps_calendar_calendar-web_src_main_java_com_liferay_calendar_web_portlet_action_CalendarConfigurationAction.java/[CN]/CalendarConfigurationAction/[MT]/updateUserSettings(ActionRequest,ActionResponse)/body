{
  PortletPreferences portletPreferences=actionRequest.getPreferences();
  int defaultDuration=ParamUtil.getInteger(actionRequest,"defaultDuration");
  String defaultView=ParamUtil.getString(actionRequest,"defaultView");
  String timeFormat=ParamUtil.getString(actionRequest,"timeFormat");
  String timeZoneId=ParamUtil.getString(actionRequest,"timeZoneId");
  boolean usePortalTimeZone=ParamUtil.getBoolean(actionRequest,"usePortalTimeZone");
  int weekStartsOn=ParamUtil.getInteger(actionRequest,"weekStartsOn");
  portletPreferences.setValue("defaultDuration",String.valueOf(defaultDuration));
  portletPreferences.setValue("defaultView",defaultView);
  portletPreferences.setValue("timeFormat",timeFormat);
  portletPreferences.setValue("timeZoneId",timeZoneId);
  portletPreferences.setValue("usePortalTimeZone",String.valueOf(usePortalTimeZone));
  portletPreferences.setValue("weekStartsOn",String.valueOf(weekStartsOn));
  HttpServletRequest httpServletRequest=PortalUtil.getHttpServletRequest(actionRequest);
  SessionClicks.put(httpServletRequest,"com.liferay.calendar.web_defaultView",defaultView);
  portletPreferences.store();
}
