{
  Portlet portlet=PortletLocalServiceUtil.getPortletById(PortletKeys.LOGIN);
  String defaultPreferences=RandomTestUtil.randomString();
  PortletPreferencesLocalServiceUtil.addPortletPreferences(TestPropsValues.getCompanyId(),PortletKeys.PREFS_OWNER_ID_DEFAULT,PortletKeys.PREFS_OWNER_TYPE_LAYOUT,_layout.getPlid(),portlet.getPortletId(),portlet,defaultPreferences);
  List<PortletPreferences> portletPreferences=PortletPreferencesLocalServiceUtil.getPortletPreferences(_layout.getPlid(),portlet.getPortletId());
  Assert.assertEquals(1,portletPreferences.size());
  PortletPreferences embeddedPortletPreference=portletPreferences.get(0);
  Assert.assertEquals(defaultPreferences,embeddedPortletPreference.getPreferences());
}
