{
  String value=null;
  String name=attr.replace(USER_ATTR_CUSTOM_PREFIX,"");
  String className="com.liferay.portal.model.User";
  ExpandoBridge expandoBridge=new ExpandoBridgeImpl(className,userId);
  int type=expandoBridge.getAttributeType(name);
  Serializable v=expandoBridge.getAttribute(name);
  if (type == ExpandoColumnConstants.BOOLEAN_ARRAY) {
    value="" + ((Boolean[])v)[0];
  }
 else   if (type == ExpandoColumnConstants.DATE) {
    value=DateTimeUtil.formatDate((Date)v);
  }
 else   if (type == ExpandoColumnConstants.DATE_ARRAY) {
    value=DateTimeUtil.formatDate(((Date[])v)[0]);
  }
 else   if (type == ExpandoColumnConstants.DOUBLE_ARRAY) {
    value="" + ((double[])v)[0];
  }
 else   if (type == ExpandoColumnConstants.FLOAT_ARRAY) {
    value="" + ((float[])v)[0];
  }
 else   if (type == ExpandoColumnConstants.INTEGER_ARRAY) {
    value="" + ((int[])v)[0];
  }
 else   if (type == ExpandoColumnConstants.LONG_ARRAY) {
    value="" + ((long[])v)[0];
  }
 else   if (type == ExpandoColumnConstants.SHORT_ARRAY) {
    value="" + ((short[])v)[0];
  }
 else   if (type == ExpandoColumnConstants.STRING_ARRAY) {
    value=((String[])v)[0];
  }
 else {
    value="" + v;
  }
  return value;
}
