{
  String cmd=ParamUtil.getString(req,Constants.CMD);
  if (!cmd.equals(Constants.UPDATE)) {
    return;
  }
  String[] entries=StringUtil.split(ParamUtil.getString(req,"entries"));
  String[] notEntries=StringUtil.split(ParamUtil.getString(req,"notEntries"));
  boolean andOperator=ParamUtil.getBoolean(req,"andOperator");
  String displayStyle=ParamUtil.getString(req,"displayStyle");
  boolean showQueryLogic=ParamUtil.getBoolean(req,"showQueryLogic");
  boolean showAvailableLocales=ParamUtil.getBoolean(req,"showAvailableLocales");
  String portletResource=ParamUtil.getString(req,"portletResource");
  PortletPreferences prefs=PortletPreferencesFactoryUtil.getPortletSetup(req,portletResource,true,true);
  prefs.setValues("entries",entries);
  prefs.setValues("not-entries",notEntries);
  prefs.setValue("and-operator",String.valueOf(andOperator));
  prefs.setValue("display-style",displayStyle);
  prefs.setValue("show-query-logic",String.valueOf(showQueryLogic));
  prefs.setValue("show-available-locales",String.valueOf(showAvailableLocales));
  prefs.store();
  SessionMessages.add(req,config.getPortletName() + ".doConfigure");
}
