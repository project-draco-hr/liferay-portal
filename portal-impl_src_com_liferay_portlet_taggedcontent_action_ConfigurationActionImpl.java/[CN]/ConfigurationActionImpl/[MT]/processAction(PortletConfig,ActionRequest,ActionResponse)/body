{
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  String portletResource=ParamUtil.getString(actionRequest,"portletResource");
  PortletPreferences prefs=PortletPreferencesFactoryUtil.getPortletSetup(actionRequest,portletResource);
  if (cmd.equals("add-selection")) {
    AssetPublisherUtil.addSelection(actionRequest,prefs);
  }
 else   if (cmd.equals("move-selection-down")) {
    moveSelectionDown(actionRequest,prefs);
  }
 else   if (cmd.equals("move-selection-up")) {
    moveSelectionUp(actionRequest,prefs);
  }
 else   if (cmd.equals("remove-selection")) {
    removeSelection(actionRequest,prefs);
  }
 else   if (cmd.equals("selection-style")) {
    setSelectionStyle(actionRequest,prefs);
  }
 else   if (cmd.equals(Constants.UPDATE)) {
    String selectionStyle=prefs.getValue("selection-style","dynamic");
    if (selectionStyle.equals("dynamic")) {
      updateDynamicSettings(actionRequest,prefs);
    }
 else     if (selectionStyle.equals("manual")) {
      updateManualSettings(actionRequest,prefs);
    }
  }
  if (SessionErrors.isEmpty(actionRequest)) {
    prefs.store();
    SessionMessages.add(actionRequest,portletConfig.getPortletName() + ".doConfigure");
  }
}
