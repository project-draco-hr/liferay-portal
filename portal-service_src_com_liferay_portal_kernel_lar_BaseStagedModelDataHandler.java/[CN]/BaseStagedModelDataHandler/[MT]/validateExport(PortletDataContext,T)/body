{
  if (!portletDataContext.isInitialPublication() && (stagedModel instanceof WorkflowedModel)) {
    WorkflowedModel workflowedModel=(WorkflowedModel)stagedModel;
    if (!ArrayUtil.contains(getExportableStatuses(),workflowedModel.getStatus())) {
      PortletDataException pde=new PortletDataException(PortletDataException.STATUS_UNAVAILABLE);
      pde.setStagedModel(stagedModel);
      throw pde;
    }
  }
  if (stagedModel instanceof TrashedModel) {
    TrashedModel trashedModel=(TrashedModel)stagedModel;
    if (trashedModel.isInTrash()) {
      PortletDataException pde=new PortletDataException(PortletDataException.STATUS_IN_TRASH);
      pde.setStagedModel(stagedModel);
      throw pde;
    }
  }
}
