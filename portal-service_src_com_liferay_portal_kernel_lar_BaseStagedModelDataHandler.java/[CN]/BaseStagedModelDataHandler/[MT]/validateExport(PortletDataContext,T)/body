{
  if (stagedModel instanceof WorkflowedModel) {
    WorkflowedModel workflowedModel=(WorkflowedModel)stagedModel;
    if (!ArrayUtil.contains(getExportableStatuses(),workflowedModel.getStatus())) {
      PortletDataException pde=new PortletDataException(PortletDataException.STATUS_UNAVAILABLE);
      pde.setStagedModel(stagedModel);
      throw pde;
    }
  }
  StagedModelType stagedModelType=stagedModel.getStagedModelType();
  TrashHandler trashHandler=TrashHandlerRegistryUtil.getTrashHandler(stagedModelType.getClassName());
  if (trashHandler != null) {
    try {
      TrashedModel trashedModel=(TrashedModel)stagedModel;
      long trashEntryclassPK=trashedModel.getTrashEntryClassPK();
      if (trashHandler.isInTrash(trashEntryclassPK)) {
        PortletDataException pde=new PortletDataException(PortletDataException.STATUS_IN_TRASH);
        pde.setStagedModel(stagedModel);
        throw pde;
      }
    }
 catch (    PortletDataException pde) {
      throw pde;
    }
catch (    Exception e) {
      if (_log.isDebugEnabled()) {
        _log.debug(e,e);
      }
 else       if (_log.isWarnEnabled()) {
        _log.warn("Unable to check trash status for " + stagedModel.getModelClassName() + " with primary key "+ stagedModel.getPrimaryKeyObj());
      }
    }
  }
}
