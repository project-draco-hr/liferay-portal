{
  List<Element> referenceElements=portletDataContext.getReferenceElements(stagedModel,AssetCategory.class);
  List<Long> categoryIds=new ArrayList<Long>(referenceElements.size());
  for (  Element referenceElement : referenceElements) {
    long classPK=GetterUtil.getLong(referenceElement.attributeValue("class-pk"));
    StagedModelDataHandlerUtil.importReferenceStagedModel(portletDataContext,stagedModel,AssetCategory.class,classPK);
    categoryIds.add(classPK);
  }
  Map<Long,Long> categoryIdsMap=(Map<Long,Long>)portletDataContext.getNewPrimaryKeysMap(AssetCategory.class);
  long[] importedCategoryIds=new long[categoryIds.size()];
  for (int i=0; i < categoryIds.size(); i++) {
    long categoryId=categoryIds.get(i);
    importedCategoryIds[i]=MapUtil.getLong(categoryIdsMap,categoryId,categoryId);
  }
  portletDataContext.addAssetCategories(ExportImportClassedModelUtil.getClassName(stagedModel),ExportImportClassedModelUtil.getClassPK(stagedModel),importedCategoryIds);
}
