{
  String stackTrace=null;
  PrintWriter printWriter=null;
  try {
    UnsyncStringWriter stringWriter=new UnsyncStringWriter(true);
    printWriter=new PrintWriter(new UnsyncBufferedWriter(stringWriter));
    t.printStackTrace(printWriter);
    printWriter.flush();
    stackTrace=stringWriter.toString();
  }
  finally {
    if (printWriter != null) {
      printWriter.flush();
      printWriter.close();
    }
  }
  return stackTrace;
}
