{
  long trashEntryId=ParamUtil.getLong(actionRequest,"trashEntryId");
  TrashEntry entry=TrashEntryLocalServiceUtil.getTrashEntry(trashEntryId);
  TrashHandler trashHandler=TrashHandlerRegistryUtil.getTrashHandler(entry.getClassName());
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  String newName=ParamUtil.getString(actionRequest,"newName");
  if (Validator.isNull(newName)) {
    String oldName=ParamUtil.getString(actionRequest,"oldName");
    Format dateFormatDateTime=FastDateFormatFactoryUtil.getDateTime(themeDisplay.getLocale(),themeDisplay.getTimeZone());
    StringBundler sb=new StringBundler(5);
    sb.append(oldName);
    sb.append(StringPool.SPACE);
    sb.append(StringPool.OPEN_PARENTHESIS);
    sb.append(dateFormatDateTime.format(new Date()).replace('/','.'));
    sb.append(StringPool.CLOSE_PARENTHESIS);
    newName=sb.toString();
  }
  trashHandler.updateEntryTitle(entry.getClassPK(),newName);
  trashHandler.restoreTrashEntry(entry.getClassPK());
}
