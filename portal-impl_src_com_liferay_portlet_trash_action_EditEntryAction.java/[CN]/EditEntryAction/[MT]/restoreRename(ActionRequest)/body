{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long trashEntryId=ParamUtil.getLong(actionRequest,"trashEntryId");
  TrashEntry entry=TrashEntryLocalServiceUtil.getTrashEntry(trashEntryId);
  TrashHandler trashHandler=TrashHandlerRegistryUtil.getTrashHandler(entry.getClassName());
  String newName=ParamUtil.getString(actionRequest,"newName");
  if (Validator.isNull(newName)) {
    String oldName=ParamUtil.getString(actionRequest,"oldName");
    newName=TrashUtil.getNewName(themeDisplay,oldName);
  }
  trashHandler.updateTitle(entry.getClassPK(),newName);
  trashHandler.restoreTrashEntry(entry.getClassPK());
  List<ObjectValuePair<String,Long>> entries=new ArrayList<ObjectValuePair<String,Long>>();
  entries.add(new ObjectValuePair<String,Long>(entry.getClassName(),entry.getClassPK()));
  return entries;
}
