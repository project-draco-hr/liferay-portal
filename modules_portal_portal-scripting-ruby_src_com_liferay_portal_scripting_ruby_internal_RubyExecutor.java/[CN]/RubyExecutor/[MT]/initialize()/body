{
  initScriptingExecutorClassLoader();
  org.jruby.embed.ScriptingContainer scriptingContainer=new org.jruby.embed.ScriptingContainer(LocalContextScope.THREADSAFE);
  _scriptingContainer=new RubyScriptingContainer(scriptingContainer);
  LocalContextProvider localContextProvider=scriptingContainer.getProvider();
  RubyInstanceConfig rubyInstanceConfig=localContextProvider.getRubyInstanceConfig();
  if (_rubyScriptingConfiguration.compileMode().equals(_COMPILE_MODE_FORCE)) {
    rubyInstanceConfig.setCompileMode(CompileMode.FORCE);
  }
 else   if (_rubyScriptingConfiguration.compileMode().equals(_COMPILE_MODE_JIT)) {
    rubyInstanceConfig.setCompileMode(CompileMode.JIT);
  }
  rubyInstanceConfig.setJitThreshold(_rubyScriptingConfiguration.compileThreshold());
  rubyInstanceConfig.setLoader(getScriptingExecutorClassLoader());
  String[] loadPaths=StringUtil.split(_rubyScriptingConfiguration.loadPaths(),StringPool.COMMA);
  _loadPaths=new ArrayList<>(Arrays.asList(loadPaths));
  rubyInstanceConfig.setLoadPaths(_loadPaths);
  scriptingContainer.setCurrentDirectory(_basePath);
}
