{
  Map<String,Serializable> workflowContext=executionContext.getWorkflowContext();
  String fromAddress=(String)workflowContext.get(WorkflowConstants.CONTEXT_NOTIFICATION_SENDER_ADDRESS);
  if (Validator.isNull(fromAddress)) {
    fromAddress=_fromAddress;
  }
  String fromName=(String)workflowContext.get(WorkflowConstants.CONTEXT_NOTIFICATION_SENDER_NAME);
  if (Validator.isNull(fromName)) {
    fromName=_fromName;
  }
  InternetAddress from=new InternetAddress(fromAddress,fromName);
  String subject=(String)workflowContext.get(WorkflowConstants.CONTEXT_NOTIFICATION_SUBJECT);
  if (Validator.isNull(subject)) {
    subject=defaultSubject;
  }
  MailMessage mailMessage=new MailMessage(from,subject,notificationMessage,true);
  mailMessage.setTo(getInternetAddresses(notificationRecipients.get(NotificationReceptionType.TO)));
  mailMessage.setCC(getInternetAddresses(notificationRecipients.get(NotificationReceptionType.CC)));
  mailMessage.setBCC(getInternetAddresses(notificationRecipients.get(NotificationReceptionType.BCC)));
  _mailService.sendEmail(mailMessage);
}
