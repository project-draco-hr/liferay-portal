{
  PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
  if (permissionChecker.isCompanyAdmin()) {
    return true;
  }
  Group group=themeDisplay.getScopeGroup();
  long plid=LayoutConstants.DEFAULT_PLID;
  if (category.equals(PortletCategoryKeys.CONTENT)) {
    plid=group.getDefaultPublicPlid();
    if (plid == LayoutConstants.DEFAULT_PLID) {
      plid=group.getDefaultPrivatePlid();
    }
  }
  if (category.equals(PortletCategoryKeys.CONTENT) && permissionChecker.isCommunityAdmin(group.getGroupId())) {
    return true;
  }
  if (PortletPermissionUtil.contains(permissionChecker,group.getGroupId(),plid,portlet.getPortletId(),ActionKeys.ACCESS_IN_CONTROL_PANEL,true)) {
    return true;
  }
  return isVisible(themeDisplay.getPermissionChecker(),portlet);
}
