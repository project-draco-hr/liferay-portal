{
  super.updateFile(companyId,repositoryId,fileName,newFileName);
  File newFileNameDir=getFileNameDir(companyId,repositoryId,newFileName);
  String[] fileNameVersions=FileUtil.listFiles(newFileNameDir);
  for (  String fileNameVersion : fileNameVersions) {
    String ext=FileUtil.getExtension(fileNameVersion);
    if (ext.equals(_HOOK_EXTENSION)) {
      continue;
    }
    File fileNameVersionFile=new File(newFileNameDir + StringPool.SLASH + fileNameVersion);
    File newFileNameVersionFile=new File(newFileNameDir + StringPool.SLASH + FileUtil.stripExtension(fileNameVersion)+ StringPool.PERIOD+ _HOOK_EXTENSION);
    boolean renamed=FileUtil.move(fileNameVersionFile,newFileNameVersionFile);
    if (!renamed) {
      throw new SystemException("File name version file was not renamed from " + fileNameVersionFile.getPath() + " to "+ newFileNameVersionFile.getPath());
    }
  }
}
