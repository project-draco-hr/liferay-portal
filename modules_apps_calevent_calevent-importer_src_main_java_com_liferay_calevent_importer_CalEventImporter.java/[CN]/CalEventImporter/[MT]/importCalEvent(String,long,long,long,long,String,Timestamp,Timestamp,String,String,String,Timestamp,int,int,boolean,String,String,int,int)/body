{
  CalendarResource calendarResource=getCalendarResource(companyId,groupId);
  CalendarBooking calendarBooking=_calendarBookingLocalService.fetchCalendarBookingByUuidAndGroupId(uuid,calendarResource.getGroupId());
  if (calendarBooking != null) {
    return calendarBooking;
  }
  long calendarBookingId=_counterLocalService.increment();
  long startTime=startDate.getTime();
  long endTime=startTime + durationHour * Time.HOUR + durationMinute * Time.MINUTE;
  if (allDay) {
    endTime=endTime - 1;
  }
  calendarBooking=addCalendarBooking(uuid,calendarBookingId,companyId,groupId,userId,userName,createDate,modifiedDate,calendarResource.getDefaultCalendarId(),calendarResource.getCalendarResourceId(),title,description,location,startTime,endTime,allDay,convertRecurrence(recurrence),firstReminder,NotificationType.EMAIL,secondReminder,NotificationType.EMAIL);
  importCalendarBookingResourcePermissions(companyId,eventId,calendarBookingId);
  importSubscriptions(companyId,eventId,calendarBookingId);
  importAssets(uuid,companyId,groupId,userId,type,eventId,calendarBookingId);
  importMBDiscussion(eventId,calendarBookingId);
  importRatings(_CLASS_NAME,eventId,CalendarBooking.class.getName(),calendarBookingId);
  importSocialActivities(eventId,calendarBookingId);
  return calendarBooking;
}
