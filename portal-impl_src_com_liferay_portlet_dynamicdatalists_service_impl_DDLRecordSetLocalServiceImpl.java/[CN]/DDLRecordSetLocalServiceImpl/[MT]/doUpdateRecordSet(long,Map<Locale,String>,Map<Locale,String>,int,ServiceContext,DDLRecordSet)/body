{
  validateDDMStructureId(ddmStructureId);
  validateName(nameMap);
  long oldDDMStructureId=recordSet.getDDMStructureId();
  recordSet.setModifiedDate(serviceContext.getModifiedDate(null));
  recordSet.setDDMStructureId(ddmStructureId);
  recordSet.setNameMap(nameMap);
  recordSet.setDescriptionMap(descriptionMap);
  recordSet.setMinDisplayRows(minDisplayRows);
  ddlRecordSetPersistence.update(recordSet);
  if (oldDDMStructureId != ddmStructureId) {
    ddlRecordLocalService.deleteRecords(recordSet.getRecordSetId());
    DDMStructureLink ddmStructureLink=ddmStructureLinkLocalService.getClassStructureLink(recordSet.getRecordSetId());
    long classNameId=classNameLocalService.getClassNameId(DDLRecordSet.class);
    ddmStructureLinkLocalService.updateStructureLink(ddmStructureLink.getStructureLinkId(),classNameId,recordSet.getRecordSetId(),ddmStructureId);
  }
  return recordSet;
}
