{
  ActionableDynamicQuery actionableDynamicQuery=_layoutLocalService.getActionableDynamicQuery();
  actionableDynamicQuery.setAddCriteriaMethod(new ActionableDynamicQuery.AddCriteriaMethod(){
    public void addCriteria(    DynamicQuery dynamicQuery){
      dynamicQuery.add(RestrictionsFactoryUtil.like("typeSettings","%1_WAR_eventsdisplayportlet%"));
    }
  }
);
  final AtomicInteger atomicInteger=new AtomicInteger(0);
  actionableDynamicQuery.setPerformActionMethod(new ActionableDynamicQuery.PerformActionMethod<Layout>(){
    public void performAction(    Layout layout) throws PortalException {
      String newPortletId=PortletConstants.assemblePortletId("com_liferay_calendar_web_portlet_CalendarPortlet",StringUtil.randomId());
      String typeSettings=layout.getTypeSettings();
      typeSettings=typeSettings.replace("1_WAR_eventsdisplayportlet",newPortletId);
      layout.setTypeSettings(typeSettings);
      _layoutLocalService.updateLayout(layout);
      atomicInteger.incrementAndGet();
    }
  }
);
  actionableDynamicQuery.performActions();
  System.out.printf("[socialOffice:updateEventsDisplay] %d Events Display instances " + "converted to Calendar.%n",atomicInteger.get());
}
