{
  int initialUserNotificationEventsCount=UserNotificationEventLocalServiceUtil.getUserNotificationEventsCount(_user.getUserId());
  List<LogRecord> logRecords=JDKLoggerTestUtil.configureJDKLogger(LoggerMockMailServiceImpl.class.getName(),Level.INFO);
  BlogsEntry entry=addBlogsEntry();
  long[] userNotificationEventsClassPKs=getUserNotificationClassPKs();
  if (!ArrayUtil.contains(userNotificationEventsClassPKs,entry.getEntryId())) {
    Assert.fail("No userNotificationEvent exists for the blogs entry");
  }
  Assert.assertTrue("More than 1 userNotificationEvent was created",(1 + initialUserNotificationEventsCount) == _userNotificationEvents.size());
  Assert.assertEquals(1,logRecords.size());
  LogRecord logRecord=logRecords.get(0);
  Assert.assertEquals("No mail has been sent","Sending email",logRecord.getMessage());
}
