{
  int initialUserNotificationEventsCount=UserNotificationEventLocalServiceUtil.getUserNotificationEventsCount(_user.getUserId());
  List<LogRecord> logRecords=JDKLoggerTestUtil.configureJDKLogger(LoggerMockMailServiceImpl.class.getName(),Level.INFO);
  deactivateWebsiteUserNotificationDelivery();
  BlogsEntry entry=addBlogsEntry();
  long[] userNotificationEventsClassPKs=getUserNotificationClassPKs();
  if (ArrayUtil.contains(userNotificationEventsClassPKs,entry.getEntryId())) {
    Assert.fail("A userNotificationEvent exists for the blogs entry");
  }
  Assert.assertTrue("A userNotificationEvent was created",(initialUserNotificationEventsCount) == _userNotificationEvents.size());
  Assert.assertEquals(1,logRecords.size());
  LogRecord logRecord=logRecords.get(0);
  Assert.assertEquals("No mail has been sent","Sending email",logRecord.getMessage());
}
