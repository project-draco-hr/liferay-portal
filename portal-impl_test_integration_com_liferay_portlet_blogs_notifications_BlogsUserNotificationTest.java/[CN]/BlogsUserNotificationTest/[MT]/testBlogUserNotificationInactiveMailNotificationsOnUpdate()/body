{
  int initialUserNotificationEventsCount=UserNotificationEventLocalServiceUtil.getUserNotificationEventsCount(_user.getUserId());
  setActiveUserNotificationDeliveryType(UserNotificationDeliveryConstants.TYPE_EMAIL,UserNotificationDefinition.NOTIFICATION_TYPE_ADD_ENTRY,false);
  setActiveUserNotificationDeliveryType(UserNotificationDeliveryConstants.TYPE_EMAIL,UserNotificationDefinition.NOTIFICATION_TYPE_UPDATE_ENTRY,false);
  BlogsEntry entry=addBlogsEntry();
  updateEntry(entry);
  Assert.assertEquals("An email has been sent",0,_logRecords.size());
  List<JSONObject> entryUserNotificationEventsJsonObjects=getEntryUserNotificationEventsJsonObjects(entry.getEntryId());
  if (entryUserNotificationEventsJsonObjects.isEmpty()) {
    Assert.fail("userNotification doesn't exists for this entry");
  }
  Assert.assertTrue((2 + initialUserNotificationEventsCount) == _userNotificationEvents.size());
  Assert.assertEquals(2,entryUserNotificationEventsJsonObjects.size());
  int[] notificationTypes=new int[0];
  for (  JSONObject jsonObject : entryUserNotificationEventsJsonObjects) {
    notificationTypes=ArrayUtil.append(notificationTypes,jsonObject.getInt("notificationType"));
  }
  Assert.assertNotEquals(notificationTypes[0],notificationTypes[1]);
  Assert.assertTrue(ArrayUtil.contains(notificationTypes,UserNotificationDefinition.NOTIFICATION_TYPE_ADD_ENTRY));
  Assert.assertTrue(ArrayUtil.contains(notificationTypes,UserNotificationDefinition.NOTIFICATION_TYPE_UPDATE_ENTRY));
}
