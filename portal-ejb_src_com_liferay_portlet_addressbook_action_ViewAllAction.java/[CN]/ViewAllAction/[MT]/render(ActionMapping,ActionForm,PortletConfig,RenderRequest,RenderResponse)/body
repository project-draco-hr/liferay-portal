{
  try {
    List recipients=ABUtil.getRecipients();
    String letter=req.getParameter("letter");
    if (Validator.isChar(letter)) {
      List temp=new ArrayList();
      for (int i=0; i < recipients.size(); i++) {
        Recipient recipient=(Recipient)recipients.get(i);
        if (StringUtil.startsWith(recipient.getRecipientName(),letter)) {
          temp.add(recipient);
        }
      }
      recipients=temp;
    }
    req.setAttribute(WebKeys.ADDRESS_BOOK_RECIPIENTS,recipients);
    if (req.getWindowState().equals(WindowState.NORMAL)) {
      return mapping.findForward("portlet.address_book.view");
    }
 else {
      return mapping.findForward("portlet.address_book.view_all");
    }
  }
 catch (  Exception e) {
    req.setAttribute(PageContext.EXCEPTION,e);
    return mapping.findForward(Constants.COMMON_ERROR);
  }
}
