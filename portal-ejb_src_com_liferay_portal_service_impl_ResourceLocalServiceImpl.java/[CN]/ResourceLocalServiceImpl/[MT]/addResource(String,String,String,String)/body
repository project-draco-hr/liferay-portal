{
  long code=ResourceCodeLocalServiceUtil.getCode(companyId,name,scope);
  Resource resource=ResourceUtil.fetchByC_P(code,primKey);
  if (resource == null) {
    long resourceId=CounterLocalServiceUtil.increment(Resource.class.getName());
    resource=ResourceUtil.create(resourceId);
    resource.setCode(code);
    resource.setPrimKey(primKey);
    ResourceUtil.update(resource);
  }
  return resource;
}
