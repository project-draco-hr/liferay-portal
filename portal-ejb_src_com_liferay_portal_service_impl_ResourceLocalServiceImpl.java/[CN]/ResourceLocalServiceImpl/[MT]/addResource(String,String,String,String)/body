{
  ResourceCode resourceCode=ResourceCodeLocalServiceUtil.getResourceCode(companyId,name,scope);
  Resource resource=ResourceUtil.fetchByC_P(resourceCode.getCodeId(),primKey);
  if (resource == null) {
    long resourceId=CounterLocalServiceUtil.increment(Resource.class.getName());
    resource=ResourceUtil.create(resourceId);
    resource.setCodeId(resourceCode.getCodeId());
    resource.setPrimKey(primKey);
    ResourceUtil.update(resource);
  }
  return resource;
}
