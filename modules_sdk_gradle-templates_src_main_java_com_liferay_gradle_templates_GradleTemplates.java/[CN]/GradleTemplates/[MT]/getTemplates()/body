{
  final List<String> templates=new ArrayList<>();
  File file=_getJarFile();
  if (file.isDirectory()) {
    Path jarDirPath=file.toPath();
    try (DirectoryStream<Path> directoryStream=Files.newDirectoryStream(jarDirPath.resolve(TEMPLATES_STANDALONE_DIR),FileUtil.directoriesOnlyFilter)){
      for (      Path path : directoryStream) {
        Path fileNamePath=path.getFileName();
        templates.add(fileNamePath.toString());
      }
    }
   }
 else {
    try (JarFile jarFile=new JarFile(file)){
      Enumeration<JarEntry> enumeration=jarFile.entries();
      while (enumeration.hasMoreElements()) {
        JarEntry jarEntry=enumeration.nextElement();
        if (!jarEntry.isDirectory()) {
          continue;
        }
        String name=jarEntry.getName();
        if (name.startsWith(TEMPLATES_STANDALONE_DIR + "/") && (name.indexOf('/',TEMPLATES_STANDALONE_DIR.length() + 1) == (name.length() - 1))) {
          String template=name.substring(TEMPLATES_STANDALONE_DIR.length() + 1,name.length() - 1);
          templates.add(template);
        }
      }
    }
   }
  Collections.sort(templates);
  return templates.toArray(new String[templates.size()]);
}
