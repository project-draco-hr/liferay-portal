{
  final Path rootDestinationDirPath=destinationDir.toPath();
  File file=_getJarFile();
  if (file.isDirectory()) {
    Path jarDirPath=file.toPath();
    final Path rootDirPath=jarDirPath.resolve(dirName);
    Files.walkFileTree(rootDirPath,new SimpleFileVisitor<Path>(){
      @Override public FileVisitResult visitFile(      Path path,      BasicFileAttributes basicFileAttributes) throws IOException {
        Path relativePath=rootDirPath.relativize(path);
        String fileName=StringUtil.replace(relativePath.toString(),replacements);
        Path destinationPath=rootDestinationDirPath.resolve(fileName);
        Files.createDirectories(destinationPath.getParent());
        Files.copy(path,destinationPath,StandardCopyOption.REPLACE_EXISTING);
        FileUtil.replace(destinationPath,replacements);
        return FileVisitResult.CONTINUE;
      }
    }
);
  }
 else {
    try (JarFile jarFile=new JarFile(file)){
      Enumeration<JarEntry> enumeration=jarFile.entries();
      while (enumeration.hasMoreElements()) {
        JarEntry jarEntry=enumeration.nextElement();
        if (jarEntry.isDirectory()) {
          continue;
        }
        String name=jarEntry.getName();
        if (!name.startsWith(dirName + "/")) {
          continue;
        }
        String fileName=StringUtil.replace(name.substring(dirName.length() + 1),replacements);
        Path destinationPath=rootDestinationDirPath.resolve(fileName);
        Files.createDirectories(destinationPath.getParent());
        try (InputStream inputStream=jarFile.getInputStream(jarEntry)){
          Files.copy(inputStream,destinationPath,StandardCopyOption.REPLACE_EXISTING);
        }
         FileUtil.replace(destinationPath,replacements);
      }
    }
   }
}
