{
  Map<String,String[]> parameterMap=getLayoutTemplatesParameters();
  File[] files=exportLayouts(userGroupId,parameterMap);
  try {
    for (    long userId : userIds) {
      if (!userGroupPersistence.containsUser(userGroupId,userId)) {
        importLayouts(userId,parameterMap,files[0],files[1]);
      }
    }
  }
  finally {
    if (files[0] != null) {
      files[0].delete();
    }
    if (files[1] != null) {
      files[1].delete();
    }
  }
}
