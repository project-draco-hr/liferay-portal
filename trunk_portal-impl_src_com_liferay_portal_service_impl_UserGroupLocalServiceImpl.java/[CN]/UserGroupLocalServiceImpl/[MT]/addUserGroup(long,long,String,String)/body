{
  validate(0,companyId,name);
  long userGroupId=counterLocalService.increment();
  UserGroup userGroup=userGroupPersistence.create(userGroupId);
  userGroup.setCompanyId(companyId);
  userGroup.setParentUserGroupId(UserGroupConstants.DEFAULT_PARENT_USER_GROUP_ID);
  userGroup.setName(name);
  userGroup.setDescription(description);
  userGroup.setAddedByLDAPImport(LDAPUserGroupTransactionThreadLocal.isOriginatesFromLDAP());
  userGroupPersistence.update(userGroup,false);
  groupLocalService.addGroup(userId,UserGroup.class.getName(),userGroup.getUserGroupId(),String.valueOf(userGroupId),null,0,null,false,true,null);
  resourceLocalService.addResources(companyId,0,userId,UserGroup.class.getName(),userGroup.getUserGroupId(),false,false,false);
  return userGroup;
}
