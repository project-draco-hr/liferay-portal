{
  PortletSession ses=req.getPortletSession();
  String languageId=ParamUtil.getString(req,"languageId");
  String timeZoneId=ParamUtil.getString(req,"timeZoneId");
  String greeting=ParamUtil.getString(req,"greeting");
  User user=PortalUtil.getSelectedUser(req);
  Contact contact=user.getContact();
  AdminUtil.updateUser(req,user.getUserId(),user.getScreenName(),user.getEmailAddress(),languageId,timeZoneId,greeting,user.getComments(),contact.getSmsSn(),contact.getAimSn(),contact.getIcqSn(),contact.getJabberSn(),contact.getMsnSn(),contact.getSkypeSn(),contact.getYmSn());
  ActionRequestImpl reqImpl=(ActionRequestImpl)req;
  HttpServletRequest httpReq=reqImpl.getHttpServletRequest();
  HttpSession httpSes=httpReq.getSession();
  httpSes.removeAttribute(Globals.LOCALE_KEY);
  CachePortlet.clearResponses(ses);
  return user;
}
