{
  PluginContainer pluginContainer=project.getPlugins();
  if (!pluginContainer.hasPlugin(LiferayPlugin.class)) {
    return;
  }
  LiferayExtension liferayExtension=GradleUtil.getExtension(project,LiferayExtension.class);
  GradleUtil.addDependency(project,JspCPlugin.CONFIGURATION_NAME,liferayExtension.getAppServerLibGlobalDir());
  FileTree fileTree=FileUtil.getJarsFileTree(project,liferayExtension.getAppServerLibGlobalDir());
  GradleUtil.addDependency(project,JspCPlugin.CONFIGURATION_NAME,fileTree);
  fileTree=FileUtil.getJarsFileTree(project,new File(liferayExtension.getAppServerPortalDir(),"WEB-INF/lib"));
  GradleUtil.addDependency(project,JspCPlugin.CONFIGURATION_NAME,fileTree);
  String appServerType=liferayExtension.getAppServerType();
  if (appServerType.equals("jonas")) {
    Map<String,Object> args=new HashMap<>();
    args.put("dir",new File(liferayExtension.getAppServerDir(),"lib/endorsed"));
    args.put("includes",Arrays.asList("xercesImpl.jar","xml-apis.jar"));
    fileTree=project.fileTree(args);
    GradleUtil.addDependency(project,JspCPlugin.CONFIGURATION_NAME,fileTree);
  }
  fileTree=FileUtil.getJarsFileTree(project,new File(liferayExtension.getLiferayHome(),"osgi/modules"));
  GradleUtil.addDependency(project,JspCPlugin.CONFIGURATION_NAME,fileTree);
  ConfigurableFileCollection configurableFileCollection=project.files(getUnzippedJarDir(project));
  configurableFileCollection.builtBy(UNZIP_JAR_TASK_NAME);
  GradleUtil.addDependency(project,JspCPlugin.CONFIGURATION_NAME,configurableFileCollection);
}
