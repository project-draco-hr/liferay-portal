{
  if (serviceContext.isAddGroupPermissions() || serviceContext.isAddGuestPermissions()) {
    dlFileEntryLocalService.addFileEntryResources(dlFileEntry,serviceContext.isAddGroupPermissions(),serviceContext.isAddGuestPermissions());
  }
 else {
    if (serviceContext.isDeriveDefaultPermissions()) {
      serviceContext.deriveDefaultPermissions(dlFileEntry.getRepositoryId(),DLFileEntryConstants.getClassName());
    }
    dlFileEntryLocalService.addFileEntryResources(dlFileEntry,serviceContext.getGroupPermissions(),serviceContext.getGuestPermissions());
  }
}
