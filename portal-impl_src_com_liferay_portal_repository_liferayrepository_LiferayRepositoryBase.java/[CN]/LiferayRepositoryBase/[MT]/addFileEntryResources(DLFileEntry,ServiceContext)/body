{
  if (serviceContext.getAddGroupPermissions() || serviceContext.getAddGuestPermissions()) {
    dlFileEntryLocalService.addFileEntryResources(dlFileEntry,serviceContext.getAddGroupPermissions(),serviceContext.getAddGuestPermissions());
  }
 else {
    if (serviceContext.isDeriveDefaultPermissions()) {
      serviceContext.deriveDefaultPermissions(dlFileEntry.getRepositoryId(),DLFileEntryConstants.getClassName());
    }
    dlFileEntryLocalService.addFileEntryResources(dlFileEntry,serviceContext.getGroupPermissions(),serviceContext.getGuestPermissions());
  }
}
