{
  if (serviceContext.isAddGroupPermissions() || serviceContext.isAddGuestPermissions()) {
    resourceLocalService.addResources(dlFileEntry.getCompanyId(),dlFileEntry.getGroupId(),dlFileEntry.getUserId(),DLFileEntry.class.getName(),dlFileEntry.getFileEntryId(),false,serviceContext.isAddGroupPermissions(),serviceContext.isAddGuestPermissions());
  }
 else {
    if (serviceContext.isDeriveDefaultPermissions()) {
      serviceContext.deriveDefaultPermissions(dlFileEntry.getRepositoryId(),DLFileEntryConstants.getClassName());
    }
    resourceLocalService.addModelResources(dlFileEntry.getCompanyId(),dlFileEntry.getGroupId(),dlFileEntry.getUserId(),DLFileEntry.class.getName(),dlFileEntry.getFileEntryId(),serviceContext.getModelPermissions());
  }
}
