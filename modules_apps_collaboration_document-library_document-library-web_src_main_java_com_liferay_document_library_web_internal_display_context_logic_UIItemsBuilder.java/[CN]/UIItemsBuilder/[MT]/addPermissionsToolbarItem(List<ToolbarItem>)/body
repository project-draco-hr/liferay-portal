{
  if (!_fileEntryDisplayContextHelper.isPermissionsButtonVisible()) {
    return;
  }
  String permissionsURL=null;
  try {
    permissionsURL=PermissionsURLTag.doTag(null,DLFileEntryConstants.getClassName(),HtmlUtil.unescape(_fileEntry.getTitle()),null,String.valueOf(_fileEntry.getFileEntryId()),LiferayWindowState.POP_UP.toString(),null,_request);
  }
 catch (  Exception e) {
    throw new SystemException("Unable to create permissions URL",e);
  }
  ResourceBundle resourceBundle=_getResourceBundle();
  StringBundler sb=new StringBundler(5);
  sb.append("Liferay.Util.openWindow({title: '");
  sb.append(UnicodeLanguageUtil.get(resourceBundle,"permissions"));
  sb.append("', uri: '");
  sb.append(permissionsURL);
  sb.append("'});");
  _addJavaScriptUIItem(new JavaScriptToolbarItem(),toolbarItems,DLUIItemKeys.PERMISSIONS,LanguageUtil.get(resourceBundle,"permissions"),sb.toString());
}
