{
  if (!_fileEntryDisplayContextHelper.isCheckinActionAvailable()) {
    return;
  }
  PortletURL portletURL=_getActionURL("/document_library/edit_file_entry",Constants.CHECKIN);
  portletURL.setParameter("fileEntryId",String.valueOf(_fileEntry.getFileEntryId()));
  JavaScriptToolbarItem javaScriptToolbarItem=_addJavaScriptUIItem(new JavaScriptToolbarItem(),toolbarItems,DLUIItemKeys.CHECKIN,LanguageUtil.get(_request,"checkin"),getNamespace() + "showVersionDetailsDialog('" + portletURL+ "');");
  String javaScript="/com/liferay/document/library/web/display/context/dependencies" + "/checkin_js.ftl";
  Class<?> clazz=getClass();
  URLTemplateResource urlTemplateResource=new URLTemplateResource(javaScript,clazz.getResource(javaScript));
  Template template=TemplateManagerUtil.getTemplate(TemplateConstants.LANG_TYPE_FTL,urlTemplateResource,false);
  template.put("dialogCancelButtonLabel",LanguageUtil.get(_request,"cancel"));
  template.put("dialogSaveButtonLabel",LanguageUtil.get(_request,"save"));
  template.put("dialogTitle",UnicodeLanguageUtil.get(_request,"describe-your-changes"));
  template.put("namespace",getNamespace());
  UnsyncStringWriter unsyncStringWriter=new UnsyncStringWriter();
  template.processTemplate(unsyncStringWriter);
  javaScriptToolbarItem.setJavaScript(unsyncStringWriter.toString());
}
