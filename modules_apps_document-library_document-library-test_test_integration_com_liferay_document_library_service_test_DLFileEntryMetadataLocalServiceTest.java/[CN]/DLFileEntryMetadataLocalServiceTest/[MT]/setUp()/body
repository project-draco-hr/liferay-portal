{
  _group=GroupTestUtil.addGroup();
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(_group,TestPropsValues.getUserId());
  byte[] testFileBytes=FileUtil.getBytes(getClass(),"dependencies/ddmstructure.xml");
  DDMForm ddmForm=DDMFormXSDDeserializerUtil.deserialize(new String(testFileBytes));
  serviceContext.setAttribute("ddmForm",ddmForm);
  User user=TestPropsValues.getUser();
  serviceContext.setLanguageId(LocaleUtil.toLanguageId(user.getLocale()));
  _dlFileEntryType=DLFileEntryTypeLocalServiceUtil.addFileEntryType(TestPropsValues.getUserId(),_group.getGroupId(),RandomTestUtil.randomString(),StringPool.BLANK,new long[0],serviceContext);
  List<com.liferay.portlet.dynamicdatamapping.DDMStructure> ddmStructures=_dlFileEntryType.getDDMStructures();
  _ddmStructure=DDMStructureLocalServiceUtil.getStructure(ddmStructures.get(0).getStructureId());
  Map<String,DDMFormValues> ddmFormValuesMap=setUpDDMFormValuesMap(_ddmStructure.getStructureKey(),user.getLocale());
  ByteArrayInputStream byteArrayInputStream=new ByteArrayInputStream(RandomTestUtil.randomBytes());
  _dlFileEntry=DLFileEntryLocalServiceUtil.addFileEntry(TestPropsValues.getUserId(),_group.getGroupId(),_group.getGroupId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,RandomTestUtil.randomString(),null,RandomTestUtil.randomString(),null,null,_dlFileEntryType.getFileEntryTypeId(),ddmFormValuesMap,null,byteArrayInputStream,byteArrayInputStream.available(),serviceContext);
}
