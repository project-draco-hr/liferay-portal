{
  super(portletRequest,null,null,DEFAULT_CUR_PARAM,DEFAULT_DELTA,iteratorURL,null,EMPTY_RESULTS_MESSAGE);
  try {
    PortalPreferences preferences=PortletPreferencesFactoryUtil.getPortalPreferences(portletRequest);
    PortletPreferences portletPreferences=PortletPreferencesFactoryUtil.getPortletSetup(portletRequest);
    String portletOrderByCol=portletPreferences.getValue("kbArticlesOrderByCol",StringPool.BLANK);
    String portletOrderByType=portletPreferences.getValue("kbArticlesOrderByType",StringPool.BLANK);
    String oldOrderByCol=preferences.getValue(KBPortletKeys.KNOWLEDGE_BASE_ADMIN,"kb-articles-order-by-col",portletOrderByCol);
    String oldOrderByType=preferences.getValue(KBPortletKeys.KNOWLEDGE_BASE_ADMIN,"kb-articles-order-by-type",portletOrderByType);
    String orderByCol=ParamUtil.getString(portletRequest,"orderByCol",oldOrderByCol);
    String orderByType=ParamUtil.getString(portletRequest,"orderByType",oldOrderByType);
    if (!Objects.equals(orderByCol,oldOrderByCol) || !Objects.equals(orderByType,oldOrderByType)) {
      preferences.setValue(KBPortletKeys.KNOWLEDGE_BASE_ADMIN,"kb-articles-order-by-col",orderByCol);
      preferences.setValue(KBPortletKeys.KNOWLEDGE_BASE_ADMIN,"kb-articles-order-by-type",orderByType);
    }
    long kbFolderClassNameId=PortalUtil.getClassNameId(KBFolderConstants.getClassName());
    long parentResourceClassNameId=ParamUtil.getLong(portletRequest,"parentResourceClassNameId",kbFolderClassNameId);
    OrderByComparator<Object> orderByComparator=null;
    if (parentResourceClassNameId == PortalUtil.getClassNameId(KBFolder.class)) {
      orderByComparator=new KBObjectsTitleComparator<>(false,true);
    }
 else {
      orderByComparator=KBUtil.getKBArticleOrderByComparator(orderByCol,orderByType);
    }
    setOrderByCol(orderByCol);
    setOrderByType(orderByType);
    setOrderByComparator(orderByComparator);
  }
 catch (  Exception e) {
    _log.error(e);
  }
}
