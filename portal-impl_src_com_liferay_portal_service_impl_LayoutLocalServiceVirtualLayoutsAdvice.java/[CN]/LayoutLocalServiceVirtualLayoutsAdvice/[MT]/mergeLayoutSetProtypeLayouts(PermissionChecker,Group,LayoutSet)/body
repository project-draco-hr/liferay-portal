{
  if ((permissionChecker == null) || !permissionChecker.isSignedIn() || !layoutSet.getLayoutSetPrototypeLinkEnabled()|| Validator.isNull(layoutSet.getLayoutSetPrototypeUuid())|| group.isLayoutPrototype()|| group.isLayoutSetPrototype()) {
    return;
  }
  LayoutSetPrototype layoutSetPrototype=LayoutSetPrototypeLocalServiceUtil.getLayoutSetPrototypeByUuid(layoutSet.getLayoutSetPrototypeUuid());
  UnicodeProperties settingsProperties=layoutSet.getSettingsProperties();
  long lastMergeTime=GetterUtil.getLong(settingsProperties.getProperty("lastMergeTime"));
  Date modifiedDate=layoutSetPrototype.getModifiedDate();
  if (lastMergeTime >= modifiedDate.getTime()) {
    return;
  }
  Map<String,String[]> parameterMap=null;
  if (lastMergeTime > 0) {
    parameterMap=getLayoutTemplatesParameters(false);
  }
 else {
    parameterMap=getLayoutTemplatesParameters(true);
  }
  importLayoutSetPrototype(permissionChecker,layoutSetPrototype,layoutSet.getGroupId(),layoutSet.isPrivateLayout(),parameterMap);
  settingsProperties.setProperty("lastMergeTime",String.valueOf(modifiedDate.getTime()));
  LayoutSetLocalServiceUtil.updateLayoutSet(layoutSet,false);
}
