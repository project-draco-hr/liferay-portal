{
  if ((permissionChecker == null) || !permissionChecker.isSignedIn() || !layoutSet.getLayoutSetPrototypeLinkEnabled()|| Validator.isNull(layoutSet.getLayoutSetPrototypeUuid())|| group.isLayoutPrototype()|| group.isLayoutSetPrototype()) {
    return;
  }
  LayoutSetPrototype layoutSetPrototype=LayoutSetPrototypeLocalServiceUtil.getLayoutSetPrototypeByUuid(layoutSet.getLayoutSetPrototypeUuid());
  UnicodeProperties settingsProperties=layoutSet.getSettingsProperties();
  DateFormat dateFormat=DateFormatFactoryUtil.getSimpleDateFormat(PropsValues.INDEX_DATE_FORMAT_PATTERN);
  String lastMergeDateString=settingsProperties.getProperty(_LAST_MERGE_DATE,_NULL_DATE);
  Date lastMergeDate=dateFormat.parse(lastMergeDateString);
  if (!layoutSetPrototype.getModifiedDate().after(lastMergeDate)) {
    return;
  }
  Map<String,String[]> parameterMap=null;
  if (lastMergeDateString.equals(_NULL_DATE)) {
    parameterMap=getLayoutTemplatesParameters(true);
  }
 else {
    parameterMap=getLayoutTemplatesParameters(false);
  }
  importLayoutSetPrototype(permissionChecker,layoutSetPrototype,layoutSet.getGroupId(),layoutSet.isPrivateLayout(),parameterMap);
  settingsProperties.setProperty(_LAST_MERGE_DATE,dateFormat.format(layoutSetPrototype.getModifiedDate()));
  LayoutSetLocalServiceUtil.updateLayoutSet(layoutSet,false);
}
