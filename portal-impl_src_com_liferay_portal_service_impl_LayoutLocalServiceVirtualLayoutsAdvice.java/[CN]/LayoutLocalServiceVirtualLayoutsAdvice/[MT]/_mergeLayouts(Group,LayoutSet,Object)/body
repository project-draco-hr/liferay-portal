{
  if (MergeLayoutPrototypesThreadLocal.isMergeComplete("getLayouts",arguments) && (!group.isUser() || PropsValues.USER_GROUPS_COPY_LAYOUTS_TO_USER_PERSONAL_SITE)) {
    return false;
  }
  boolean workflowEnabled=WorkflowThreadLocal.isEnabled();
  try {
    if (SitesUtil.isLayoutSetMergeable(group,layoutSet)) {
      WorkflowThreadLocal.setEnabled(false);
      SitesUtil.mergeLayoutSetPrototypeLayouts(group,layoutSet);
    }
  }
 catch (  Exception e) {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to merge layouts for site template",e);
    }
  }
 finally {
    MergeLayoutPrototypesThreadLocal.setMergeComplete("getLayouts",arguments);
    WorkflowThreadLocal.setEnabled(workflowEnabled);
  }
  return true;
}
