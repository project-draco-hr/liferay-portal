{
  Group group=groupPersistence.findByPrimaryKey(groupId);
  GroupPermissionUtil.check(getPermissionChecker(),group,ActionKeys.UPDATE);
  if (group.isSite()) {
    Group oldGroup=group;
    List<AssetCategory> oldAssetCategories=assetCategoryLocalService.getCategories(Group.class.getName(),groupId);
    List<AssetTag> oldAssetTags=assetTagLocalService.getTags(Group.class.getName(),groupId);
    ExpandoBridge expandoBridge=group.getExpandoBridge();
    Map<String,Serializable> oldExpandoAttributes=expandoBridge.getAttributes();
    group=groupLocalService.updateGroup(groupId,parentGroupId,name,description,type,friendlyURL,active,serviceContext);
    SiteMembershipPolicyUtil.verifyPolicy(group,oldGroup,oldAssetCategories,oldAssetTags,oldExpandoAttributes,null);
    return group;
  }
 else {
    return groupLocalService.updateGroup(groupId,parentGroupId,name,description,type,friendlyURL,active,serviceContext);
  }
}
