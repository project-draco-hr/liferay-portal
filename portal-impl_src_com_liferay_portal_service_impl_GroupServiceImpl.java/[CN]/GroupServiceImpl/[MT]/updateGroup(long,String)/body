{
  Group group=groupPersistence.findByPrimaryKey(groupId);
  GroupPermissionUtil.check(getPermissionChecker(),group,ActionKeys.UPDATE);
  if (group.isSite()) {
    Group oldGroup=group;
    UnicodeProperties oldTypeSettingsProperties=oldGroup.getTypeSettingsProperties();
    group=groupLocalService.updateGroup(groupId,typeSettings);
    RatingsDataTransformerUtil.transformGroupRatingsData(groupId,oldTypeSettingsProperties,group.getTypeSettingsProperties());
    SiteMembershipPolicyUtil.verifyPolicy(group,oldGroup,null,null,null,oldTypeSettingsProperties);
    return group;
  }
 else {
    return groupLocalService.updateGroup(groupId,typeSettings);
  }
}
