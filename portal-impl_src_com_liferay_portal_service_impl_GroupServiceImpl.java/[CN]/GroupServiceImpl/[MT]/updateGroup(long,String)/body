{
  GroupPermissionUtil.check(getPermissionChecker(),groupId,ActionKeys.UPDATE);
  Group group=groupPersistence.findByPrimaryKey(groupId);
  if (group.isSite()) {
    Group oldGroup=group;
    UnicodeProperties oldTypeSettingsProperties=oldGroup.getTypeSettingsProperties();
    group=groupLocalService.updateGroup(groupId,typeSettings);
    SiteMembershipPolicyUtil.verifyPolicy(group,oldGroup,null,null,null,oldTypeSettingsProperties);
    return group;
  }
 else {
    return groupLocalService.updateGroup(groupId,typeSettings);
  }
}
