{
  if (!GroupPermissionUtil.contains(getPermissionChecker(),parentGroupId,ActionKeys.MANAGE_SUBGROUPS) && !PortalPermissionUtil.contains(getPermissionChecker(),ActionKeys.ADD_COMMUNITY)) {
    throw new PrincipalException("User " + getUserId() + " does not have permissions to add "+ "a site with parent "+ parentGroupId);
  }
  return groupLocalService.addGroup(getUserId(),parentGroupId,null,0,name,description,type,friendlyURL,site,active,serviceContext);
}
