{
  if (!GroupPermissionUtil.contains(getPermissionChecker(),parentGroupId,ActionKeys.MANAGE_SUBGROUPS) && !PortalPermissionUtil.contains(getPermissionChecker(),ActionKeys.ADD_COMMUNITY)) {
    throw new PrincipalException("User " + getUserId() + " does not have permissions to add "+ "a site with parent "+ parentGroupId);
  }
  Group group=groupLocalService.addGroup(getUserId(),parentGroupId,null,0,liveGroupId,name,description,type,friendlyURL,site,active,serviceContext);
  if (site) {
    SiteMembershipPolicyUtil.verifyPolicy(group);
  }
  return group;
}
