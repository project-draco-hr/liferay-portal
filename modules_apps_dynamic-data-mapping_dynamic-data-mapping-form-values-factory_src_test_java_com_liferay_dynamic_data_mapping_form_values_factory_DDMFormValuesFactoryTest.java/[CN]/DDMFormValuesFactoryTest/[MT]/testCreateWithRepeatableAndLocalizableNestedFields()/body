{
  DDMForm ddmForm=DDMFormTestUtil.createDDMForm();
  DDMFormField nameDDMFormField=DDMFormTestUtil.createTextDDMFormField("Name",true,true,false);
  DDMFormField text1DDMFormField=DDMFormTestUtil.createTextDDMFormField("Text1",true,true,false);
  nameDDMFormField.addNestedDDMFormField(text1DDMFormField);
  DDMFormField text2DDMFormField=DDMFormTestUtil.createTextDDMFormField("Text2",true,true,false);
  nameDDMFormField.addNestedDDMFormField(text2DDMFormField);
  ddmForm.addDDMFormField(nameDDMFormField);
  DDMFormValues expectedDDMFormValues=createDDMFormValues(ddmForm,createAvailableLocales(LocaleUtil.BRAZIL,LocaleUtil.US),LocaleUtil.US);
  DDMFormFieldValue paulDDMFormFieldValue=createDDMFormFieldValue("wqer","Name",createLocalizedValue("Paul","Paulo",LocaleUtil.US));
  paulDDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("gatu","Text1",createLocalizedValue("Text1 Paul One","Text1 Paulo Um",LocaleUtil.US)));
  paulDDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("hayt","Text1",createLocalizedValue("Text1 Paul Two","Text1 Paulo Dois",LocaleUtil.US)));
  paulDDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("haby","Text2",createLocalizedValue("Text2 Paul One","Text2 Paulo Um",LocaleUtil.US)));
  paulDDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("makp","Text2",createLocalizedValue("Text2 Paul Two","Text2 Paulo Dois",LocaleUtil.US)));
  expectedDDMFormValues.addDDMFormFieldValue(paulDDMFormFieldValue);
  DDMFormFieldValue joeDDMFormFieldValue=createDDMFormFieldValue("fahu","Name",createLocalizedValue("Joe","Joao",LocaleUtil.US));
  joeDDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("banm","Text1",createLocalizedValue("Text1 Joe One","Text1 Joao Um",LocaleUtil.US)));
  joeDDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("bagj","Text2",createLocalizedValue("Text2 Joe One","Text2 Joao Um",LocaleUtil.US)));
  expectedDDMFormValues.addDDMFormFieldValue(joeDDMFormFieldValue);
  MockHttpServletRequest mockHttpServletRequest=new MockHttpServletRequest();
  mockHttpServletRequest.addParameter("availableLanguageIds","en_US,pt_BR");
  mockHttpServletRequest.addParameter("defaultLanguageId",LocaleUtil.toLanguageId(LocaleUtil.US));
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0$$en_US","Paul");
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0$$pt_BR","Paulo");
  mockHttpServletRequest.addParameter("ddm$$Name$fahu$1$$en_US","Joe");
  mockHttpServletRequest.addParameter("ddm$$Name$fahu$1$$pt_BR","Joao");
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0#Text1$gatu$0$$en_US","Text1 Paul One");
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0#Text1$gatu$0$$pt_BR","Text1 Paulo Um");
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0#Text1$hayt$1$$en_US","Text1 Paul Two");
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0#Text1$hayt$1$$pt_BR","Text1 Paulo Dois");
  mockHttpServletRequest.addParameter("ddm$$Name$fahu$1#Text1$banm$0$$en_US","Text1 Joe One");
  mockHttpServletRequest.addParameter("ddm$$Name$fahu$1#Text1$banm$0$$pt_BR","Text1 Joao Um");
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0#Text2$haby$0$$en_US","Text2 Paul One");
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0#Text2$haby$0$$pt_BR","Text2 Paulo Um");
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0#Text2$makp$1$$en_US","Text2 Paul Two");
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0#Text2$makp$1$$pt_BR","Text2 Paulo Dois");
  mockHttpServletRequest.addParameter("ddm$$Name$fahu$1#Text2$bagj$0$$en_US","Text2 Joe One");
  mockHttpServletRequest.addParameter("ddm$$Name$fahu$1#Text2$bagj$0$$pt_BR","Text2 Joao Um");
  DDMFormValues actualDDMFormValues=_ddmFormValuesFactory.create(mockHttpServletRequest,ddmForm);
  assertEquals(expectedDDMFormValues,actualDDMFormValues);
}
