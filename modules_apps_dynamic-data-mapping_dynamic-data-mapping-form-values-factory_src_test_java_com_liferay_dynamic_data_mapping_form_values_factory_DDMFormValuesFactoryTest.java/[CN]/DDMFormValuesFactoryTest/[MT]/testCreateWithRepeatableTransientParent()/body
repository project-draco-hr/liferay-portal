{
  DDMForm ddmForm=DDMFormTestUtil.createDDMForm();
  DDMFormField separatorDDMFormField=DDMFormTestUtil.createDDMFormField("Separator","Separator","ddm-separator",StringPool.BLANK,false,true,false);
  DDMFormField nameDDMFormField=DDMFormTestUtil.createTextDDMFormField("Name",true,false,false);
  separatorDDMFormField.addNestedDDMFormField(nameDDMFormField);
  ddmForm.addDDMFormField(separatorDDMFormField);
  DDMFormValues expectedDDMFormValues=createDDMFormValues(ddmForm,createAvailableLocales(LocaleUtil.BRAZIL,LocaleUtil.US),LocaleUtil.US);
  DDMFormFieldValue separator1DDMFormFieldValue=createDDMFormFieldValue("wqer","Separator",null);
  separator1DDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("gatu","Name",createLocalizedValue("Joe","Joao",LocaleUtil.US)));
  expectedDDMFormValues.addDDMFormFieldValue(separator1DDMFormFieldValue);
  DDMFormFieldValue separator2DDMFormFieldValue=createDDMFormFieldValue("haby","Separator",null);
  separator2DDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("hato","Name",createLocalizedValue("Paul","Paulo",LocaleUtil.US)));
  expectedDDMFormValues.addDDMFormFieldValue(separator2DDMFormFieldValue);
  DDMFormFieldValue separator3DDMFormFieldValue=createDDMFormFieldValue("bajk","Separator",null);
  separator3DDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("fahu","Name",createLocalizedValue("Claude","Claudio",LocaleUtil.US)));
  expectedDDMFormValues.addDDMFormFieldValue(separator3DDMFormFieldValue);
  MockHttpServletRequest mockHttpServletRequest=new MockHttpServletRequest();
  mockHttpServletRequest.addParameter("availableLanguageIds","en_US,pt_BR");
  mockHttpServletRequest.addParameter("defaultLanguageId",LocaleUtil.toLanguageId(LocaleUtil.US));
  mockHttpServletRequest.addParameter("ddm$$Separator$wqer$0#Name$gatu$0$$en_US","Joe");
  mockHttpServletRequest.addParameter("ddm$$Separator$wqer$0#Name$gatu$0$$pt_BR","Joao");
  mockHttpServletRequest.addParameter("ddm$$Separator$haby$1#Name$hato$0$$en_US","Paul");
  mockHttpServletRequest.addParameter("ddm$$Separator$haby$1#Name$hato$0$$pt_BR","Paulo");
  mockHttpServletRequest.addParameter("ddm$$Separator$bajk$2#Name$fahu$0$$en_US","Claude");
  mockHttpServletRequest.addParameter("ddm$$Separator$bajk$2#Name$fahu$0$$pt_BR","Claudio");
  DDMFormValues actualDDMFormValues=_ddmFormValuesFactory.create(mockHttpServletRequest,ddmForm);
  assertEquals(expectedDDMFormValues,actualDDMFormValues);
}
