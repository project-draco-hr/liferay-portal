{
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setAddGroupPermissions(true);
  serviceContext.setAddGuestPermissions(true);
  long repositoryId=PortletFileRepositoryUtil.getPortletRepositoryId(getGroupId(),PortletKeys.MESSAGE_BOARDS,serviceContext);
  MBMessage message=MBMessageLocalServiceUtil.getMessage(getRootMessageId());
  Folder folder=PortletFileRepositoryUtil.getPortletFolder(message.getUserId(),repositoryId,DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,String.valueOf(getThreadId()),serviceContext);
  return folder.getFolderId();
}
