{
  UpgradeColumn upgradeGroupIdColumn=new SwapUpgradeColumnImpl("groupId",AvailableMappersUtil.getGroupIdMapper());
  UpgradeColumn upgradeUserIdColumn=new SwapUpgradeColumnImpl("userId",new Integer(Types.VARCHAR),AvailableMappersUtil.getUserIdMapper());
  PKUpgradeColumnImpl pkUpgradeColumn=new PKUpgradeColumnImpl("nodeId",true);
  UpgradeTable upgradeTable=new DefaultUpgradeTableImpl(WikiNodeImpl.TABLE_NAME,WikiNodeImpl.TABLE_COLUMNS,pkUpgradeColumn,upgradeGroupIdColumn,upgradeUserIdColumn);
  upgradeTable.updateTable();
  ValueMapper nodeIdMapper=pkUpgradeColumn.getValueMapper();
  AvailableMappersUtil.setWikiNodeIdMapper(nodeIdMapper);
  UpgradeColumn upgradeNodeIdColumn=new SwapUpgradeColumnImpl("nodeId",nodeIdMapper);
  UpgradeColumn upgradeTitleColumn=new TempUpgradeColumnImpl("title");
  WikiPageIdUpgradeColumnImpl pageIdUpgradeColumn=new WikiPageIdUpgradeColumnImpl(upgradeNodeIdColumn,upgradeTitleColumn);
  WikiPageResourcePrimKeyUpgradeColumnImpl pageResourcePrimKeyUpgradeColumn=new WikiPageResourcePrimKeyUpgradeColumnImpl(pageIdUpgradeColumn);
  upgradeTable=new DefaultUpgradeTableImpl(WikiPageImpl.TABLE_NAME,WikiPageImpl.TABLE_COLUMNS,upgradeNodeIdColumn,upgradeTitleColumn,pageIdUpgradeColumn,pageResourcePrimKeyUpgradeColumn,upgradeUserIdColumn);
  upgradeTable.updateTable();
  ValueMapper pageIdMapper=pageIdUpgradeColumn.getValueMapper();
  AvailableMappersUtil.setWikiPageIdMapper(pageIdMapper);
  runSQL(_UPGRADE_SCHEMA);
}
