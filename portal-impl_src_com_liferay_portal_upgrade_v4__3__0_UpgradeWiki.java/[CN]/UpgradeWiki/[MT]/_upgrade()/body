{
  PKUpgradeColumnImpl pkUpgradeColumn=new PKUpgradeColumnImpl("nodeId",true);
  UpgradeTable upgradeTable=new DefaultUpgradeTableImpl(WikiNodeImpl.TABLE_NAME,WikiNodeImpl.TABLE_COLUMNS,pkUpgradeColumn);
  upgradeTable.updateTable();
  ValueMapper nodeIdMapper=pkUpgradeColumn.getValueMapper();
  UpgradeColumn upgradeNodeIdColumn=new SwapUpgradeColumnImpl("nodeId",nodeIdMapper);
  pkUpgradeColumn=new PKUpgradeColumnImpl("pageId",true);
  upgradeTable=new DefaultUpgradeTableImpl(WikiPageImpl.TABLE_NAME,WikiPageImpl.TABLE_COLUMNS,pkUpgradeColumn,upgradeNodeIdColumn);
  upgradeTable.updateTable();
  ResourceUtil.upgradePrimKey(nodeIdMapper,WikiNode.class.getName());
  CounterLocalServiceUtil.reset(WikiNode.class.getName());
  DBUtil.getInstance().executeSQL(_UPGRADE_SCHEMA);
}
