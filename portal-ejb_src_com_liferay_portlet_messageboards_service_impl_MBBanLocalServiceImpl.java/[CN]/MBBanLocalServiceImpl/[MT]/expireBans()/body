{
  int expireInterval=GetterUtil.get(PropsUtil.get(PropsUtil.MESSAGE_BOARDS_EXPIRE_BAN_INTERVAL),0);
  if (expireInterval <= 0) {
    if (_log.isDebugEnabled()) {
      _log.debug("Message boards ban auto-expire disabled.");
    }
    return;
  }
  long now=System.currentTimeMillis();
  Calendar cal=Calendar.getInstance();
  List bans=MBBanUtil.findAll();
  for (int i=0; i < bans.size(); i++) {
    MBBan ban=(MBBan)bans.get(i);
    Date banDate=ban.getCreateDate();
    cal.setTime(banDate);
    cal.add(Calendar.DATE,expireInterval);
    long unbanDate=cal.getTimeInMillis();
    if (now >= unbanDate) {
      if (_log.isDebugEnabled()) {
        _log.debug("Auto-expiring ban " + ban.getBanId() + " on user "+ ban.getBanUserId());
      }
      MBBanUtil.remove(ban);
    }
  }
}
