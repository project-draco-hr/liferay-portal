{
  User user=UserUtil.findByPrimaryKey(userId);
  long groupId=PortalUtil.getPortletGroupId(plid);
  Date now=new Date();
  String categoryId=String.valueOf(CounterLocalServiceUtil.increment(MBBan.class.getName()));
  MBBan ban=MBBanUtil.create(categoryId);
  ban.setGroupId(groupId);
  ban.setCompanyId(user.getCompanyId());
  ban.setUserId(user.getUserId());
  ban.setUserName(user.getFullName());
  ban.setCreateDate(now);
  ban.setModifiedDate(now);
  ban.setBanUserId(banUserId);
  MBBanUtil.update(ban);
  return ban;
}
