{
  _user=user;
  Properties userMappings=PortalLDAPUtil.getUserMappings(_user.getCompanyId());
  _attrs=new BasicAttributes(true);
  Attribute objectClass=new BasicAttribute("objectclass");
  String[] defaultObjectClasses=PropsUtil.getArray(PropsKeys.LDAP_USER_DEFAULT_OBJECT_CLASSES);
  for (int i=0; i < defaultObjectClasses.length; i++) {
    objectClass.add(defaultObjectClasses[i]);
  }
  _attrs.put(objectClass);
  _attrs.put(userMappings.getProperty("firstName"),_user.getFirstName());
  _attrs.put(userMappings.getProperty("lastName"),_user.getLastName());
  if (Validator.isNotNull(user.getPasswordUnencrypted())) {
    _attrs.put(userMappings.getProperty("password"),_user.getPasswordUnencrypted());
  }
  _attrs.put(userMappings.getProperty("emailAddress"),_user.getEmailAddress());
}
