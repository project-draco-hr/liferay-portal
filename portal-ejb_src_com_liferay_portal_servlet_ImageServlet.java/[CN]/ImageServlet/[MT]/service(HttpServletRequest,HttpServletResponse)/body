{
  if (!PortalInstances.matches()) {
    return;
  }
  long lastModified=getLastModified(req);
  if (lastModified > 0) {
    long ifModifiedSince=req.getDateHeader(HttpHeaders.IF_MODIFIED_SINCE);
    if ((ifModifiedSince > 0) && (ifModifiedSince == lastModified)) {
      res.setStatus(HttpServletResponse.SC_NOT_MODIFIED);
      return;
    }
  }
  res.addHeader(HttpHeaders.CACHE_CONTROL,"max-age=0");
  if (lastModified > 0) {
    res.setDateHeader(HttpHeaders.LAST_MODIFIED,lastModified);
  }
  writeImage(req,res);
}
