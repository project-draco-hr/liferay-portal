{
  try {
    User user=PortalUtil.getUser(renderRequest);
    RenderRequestImpl renderRequestImpl=(RenderRequestImpl)renderRequest;
    DynamicServletRequest dynamicRequest=(DynamicServletRequest)renderRequestImpl.getHttpServletRequest();
    dynamicRequest.setParameter("p_u_i_d",String.valueOf(user.getUserId()));
    String tabs1=ParamUtil.getString(dynamicRequest,"tabs1","public-pages");
    boolean hasPowerUserRole=_roleLocalService.hasUserRole(user.getUserId(),user.getCompanyId(),RoleConstants.POWER_USER,true);
    if (PropsValues.LAYOUT_USER_PUBLIC_LAYOUTS_POWER_USER_REQUIRED && !hasPowerUserRole) {
      tabs1="private-pages";
    }
    dynamicRequest.setParameter("tabs1",tabs1);
    Group group=user.getGroup();
    dynamicRequest.setParameter("groupId",String.valueOf(group.getGroupId()));
    ActionUtil.getGroup(renderRequest);
  }
 catch (  Exception e) {
    throw new PortletException(e);
  }
  super.doDispatch(renderRequest,renderResponse);
}
