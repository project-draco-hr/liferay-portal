{
  Locale locale=LocaleUtil.getDefault();
  String description=LanguageUtil.format(locale,LayoutSetBranchConstants.MASTER_BRANCH_DESCRIPTION_PUBLIC,groupName);
  try {
    LayoutSetBranch layoutSetBranch=LayoutSetBranchLocalServiceUtil.addLayoutSetBranch(userId,groupId,false,LayoutSetBranchConstants.MASTER_BRANCH_NAME,description,true,LayoutSetBranchConstants.ALL_BRANCHES,serviceContext);
    List<LayoutRevision> layoutRevisions=LayoutRevisionLocalServiceUtil.getLayoutRevisions(layoutSetBranch.getLayoutSetBranchId(),false);
    for (    LayoutRevision layoutRevision : layoutRevisions) {
      LayoutRevisionLocalServiceUtil.updateStatus(userId,layoutRevision.getLayoutRevisionId(),WorkflowConstants.STATUS_APPROVED,serviceContext);
    }
  }
 catch (  LayoutSetBranchNameException lsbne) {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to create master branch for public layouts",lsbne);
    }
  }
}
