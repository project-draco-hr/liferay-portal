{
  long userId=PortalUtil.getUserId(portletRequest);
  Map<String,String[]> parameterMap=getStagingParameters(portletRequest);
  DateRange dateRange=ExportImportDateUtil.getDateRange(portletRequest,sourceGroupId,false,sourcePlid,portletId,ExportImportDateUtil.RANGE_FROM_LAST_PUBLISH_DATE);
  Map<String,Serializable> taskContextMap=BackgroundTaskContextMapFactory.buildTaskContextMap(userId,sourceGroupId,false,null,parameterMap,Constants.PUBLISH,dateRange.getStartDate(),dateRange.getEndDate(),StringPool.BLANK);
  taskContextMap.put("sourceGroupId",sourceGroupId);
  taskContextMap.put("sourcePlid",sourcePlid);
  taskContextMap.put("portletId",portletId);
  taskContextMap.put("targetGroupId",targetGroupId);
  taskContextMap.put("targetPlid",targetPlid);
  BackgroundTaskLocalServiceUtil.addBackgroundTask(userId,sourceGroupId,portletId,null,PortletStagingBackgroundTaskExecutor.class,taskContextMap,new ServiceContext());
}
