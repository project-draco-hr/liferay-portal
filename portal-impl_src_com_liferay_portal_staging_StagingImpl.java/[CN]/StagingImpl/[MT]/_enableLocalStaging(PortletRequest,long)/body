{
  Group liveGroup=GroupServiceUtil.getGroup(liveGroupId);
  if (liveGroup.isStagedRemotely()) {
    _disableStaging(portletRequest,liveGroupId);
  }
  UnicodeProperties properties=liveGroup.getTypeSettingsProperties();
  properties.setProperty("isStaged",Boolean.TRUE.toString());
  properties.setProperty("isStagedRemotely",String.valueOf(false));
  _setCommonStagingOptions(portletRequest,properties);
  if (!liveGroup.hasStagingGroup()) {
    Group stagingGroup=GroupLocalServiceUtil.addGroup(liveGroup.getCreatorUserId(),liveGroup.getClassName(),liveGroup.getClassPK(),liveGroup.getGroupId(),liveGroup.getDescriptiveName() + " (Staging)",liveGroup.getDescription(),liveGroup.getType(),liveGroup.getFriendlyURL().concat("-staging"),liveGroup.isActive(),null);
    GroupServiceUtil.updateGroup(liveGroup.getGroupId(),properties.toString());
    if (liveGroup.hasPrivateLayouts()) {
      Map<String,String[]> parameterMap=getStagingParameters();
      publishLayouts(liveGroup.getGroupId(),stagingGroup.getGroupId(),true,parameterMap,null,null);
    }
    if (liveGroup.hasPublicLayouts()) {
      Map<String,String[]> parameterMap=getStagingParameters();
      publishLayouts(liveGroup.getGroupId(),stagingGroup.getGroupId(),false,parameterMap,null,null);
    }
  }
 else {
    GroupServiceUtil.updateGroup(liveGroup.getGroupId(),properties.toString());
  }
}
