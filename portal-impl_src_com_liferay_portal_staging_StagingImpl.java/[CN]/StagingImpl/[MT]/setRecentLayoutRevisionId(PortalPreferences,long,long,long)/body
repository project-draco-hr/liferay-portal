{
  String variationName=LayoutRevisionConstants.DEFAULT_LAYOUT_VARIATION_NAME;
  try {
    LayoutRevision layoutRevision=LayoutRevisionLocalServiceUtil.getLayoutRevision(layoutRevisionId);
    variationName=layoutRevision.getVariationName();
    LayoutRevision lastLayoutRevision=LayoutRevisionLocalServiceUtil.getLayoutRevision(layoutSetBranchId,plid,variationName);
    if (lastLayoutRevision.getLayoutRevisionId() == layoutRevisionId) {
      deleteRecentLayoutRevisionId(preferences,layoutSetBranchId,plid);
    }
 else {
      preferences.setValue(Staging.class.getName(),getRecentLayoutRevisionIdKey(layoutSetBranchId,plid),String.valueOf(layoutRevisionId));
    }
  }
 catch (  PortalException pe) {
  }
  preferences.setValue(Staging.class.getName(),getRecentVariationNameKey(layoutSetBranchId,plid),variationName);
}
