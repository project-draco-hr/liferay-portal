{
  Enumeration<String> parameterNames=portletRequest.getParameterNames();
  while (parameterNames.hasMoreElements()) {
    String parameterName=parameterNames.nextElement();
    boolean isStaged=MapUtil.getBoolean(portletRequest.getParameterMap(),parameterName);
    if (parameterName.startsWith(StagingConstants.STAGED_PORTLET) && !parameterName.endsWith("Checkbox")) {
      properties.setProperty(parameterName,String.valueOf(isStaged));
    }
  }
  boolean workflowEnabled=false;
  int workflowStages=ParamUtil.getInteger(portletRequest,"workflowStages");
  if (workflowStages > 1) {
    workflowEnabled=true;
  }
  properties.setProperty("workflowEnabled",String.valueOf(workflowEnabled));
  if (workflowEnabled) {
    String workflowRoleNames=getWorkflowRoleNames(portletRequest);
    if (workflowStages < PropsValues.TASKS_DEFAULT_STAGES) {
      workflowStages=PropsValues.TASKS_DEFAULT_STAGES;
    }
    if (Validator.isNull(workflowRoleNames)) {
      workflowRoleNames=PropsValues.TASKS_DEFAULT_ROLE_NAMES;
    }
    properties.setProperty("workflowStages",String.valueOf(workflowStages));
    properties.setProperty("workflowRoleNames",workflowRoleNames);
  }
}
