{
  String oldPortalPreferences=portalPreferences.getValue(Staging.class.getName(),StagingConstants.STAGING_RECENT_LAYOUT_IDS_MAP);
  JSONArray oldJsonArray=JSONFactoryUtil.createJSONArray(oldPortalPreferences);
  boolean alreadyExists=false;
  JSONArray jsonArray=JSONFactoryUtil.createJSONArray();
  for (int i=0; i < oldJsonArray.length(); i++) {
    JSONObject jsonObject=oldJsonArray.getJSONObject(i);
    if (Validator.isNotNull(jsonObject.getString(key))) {
      alreadyExists=true;
      jsonObject.remove(key);
      jsonObject.put(key,String.valueOf(value));
    }
    jsonArray.put(jsonObject);
  }
  if (!alreadyExists) {
    JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
    jsonObject.put(key,String.valueOf(value));
    jsonArray.put(jsonObject);
  }
  portalPreferences.setValue(Staging.class.getName(),StagingConstants.STAGING_RECENT_LAYOUT_IDS_MAP,jsonArray.toString());
}
