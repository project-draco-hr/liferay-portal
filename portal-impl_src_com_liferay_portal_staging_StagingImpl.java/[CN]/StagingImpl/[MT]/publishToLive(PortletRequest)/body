{
  long groupId=ParamUtil.getLong(portletRequest,"groupId");
  Group liveGroup=GroupLocalServiceUtil.getGroup(groupId);
  Map<String,String[]> parameterMap=getStagingParameters(portletRequest);
  if (liveGroup.isStaged()) {
    if (liveGroup.isStagedRemotely()) {
      publishToRemote(portletRequest);
    }
 else {
      Group stagingGroup=liveGroup.getStagingGroup();
      publishLayouts(portletRequest,stagingGroup.getGroupId(),groupId,parameterMap,false);
    }
  }
}
