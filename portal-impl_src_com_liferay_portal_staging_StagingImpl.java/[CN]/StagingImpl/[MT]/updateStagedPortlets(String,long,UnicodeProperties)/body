{
  PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
  User user=permissionChecker.getUser();
  HttpPrincipal httpPrincipal=new HttpPrincipal(url,user.getScreenName(),user.getPassword(),user.getPasswordEncrypted());
  List<String> stagedPortletIds=new ArrayList<String>();
  for (  String key : typeSettingsProperties.keySet()) {
    if (key.startsWith(StagingConstants.STAGED_PORTLET)) {
      stagedPortletIds.add(key);
    }
  }
  try {
    GroupServiceHttp.updateStagedPortlets(httpPrincipal,remoteGroupId,StringUtil.merge(stagedPortletIds));
  }
 catch (  NoSuchGroupException nsge) {
    RemoteExportException ree=new RemoteExportException(RemoteExportException.NO_GROUP);
    ree.setGroupId(remoteGroupId);
    throw ree;
  }
catch (  PrincipalException pe) {
    RemoteExportException ree=new RemoteExportException(RemoteExportException.NO_PERMISSIONS);
    ree.setGroupId(remoteGroupId);
    throw ree;
  }
catch (  SystemException se) {
    RemoteExportException ree=new RemoteExportException(RemoteExportException.BAD_CONNECTION);
    ree.setURL(url);
    throw ree;
  }
}
