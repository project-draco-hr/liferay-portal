{
  PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
  User user=permissionChecker.getUser();
  HttpPrincipal httpPrincipal=new HttpPrincipal(remoteURL,user.getScreenName(),user.getPassword(),user.getPasswordEncrypted());
  Map<String,String> stagedPortletIds=new HashMap<String,String>();
  for (  String key : typeSettingsProperties.keySet()) {
    if (key.startsWith(StagingConstants.STAGED_PORTLET)) {
      stagedPortletIds.put(key,typeSettingsProperties.getProperty(key));
    }
  }
  try {
    GroupServiceHttp.updateStagedPortlets(httpPrincipal,remoteGroupId,stagedPortletIds);
  }
 catch (  NoSuchGroupException nsge) {
    RemoteExportException ree=new RemoteExportException(RemoteExportException.NO_GROUP);
    ree.setGroupId(remoteGroupId);
    throw ree;
  }
catch (  PrincipalException pe) {
    RemoteExportException ree=new RemoteExportException(RemoteExportException.NO_PERMISSIONS);
    ree.setGroupId(remoteGroupId);
    throw ree;
  }
catch (  RemoteAuthException rae) {
    rae.setURL(remoteURL);
    throw rae;
  }
catch (  SystemException se) {
    RemoteExportException ree=new RemoteExportException(RemoteExportException.BAD_CONNECTION);
    ree.setURL(remoteURL);
    throw ree;
  }
}
