{
  Map<String,Serializable> taskContextMap=new HashMap<String,Serializable>();
  taskContextMap.put(Constants.CMD,Constants.PUBLISH_TO_REMOTE);
  taskContextMap.put("exportImportConfigurationId",exportImportConfiguration.getExportImportConfigurationId());
  String remoteURL=buildRemoteURL(remoteAddress,remotePort,remotePathContext,secureConnection,GroupConstants.DEFAULT_LIVE_GROUP_ID,remotePrivateLayout);
  PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
  User user=permissionChecker.getUser();
  HttpPrincipal httpPrincipal=new HttpPrincipal(remoteURL,user.getLogin(),user.getPassword(),user.getPasswordEncrypted());
  taskContextMap.put("httpPrincipal",httpPrincipal);
  BackgroundTaskLocalServiceUtil.addBackgroundTask(user.getUserId(),exportImportConfiguration.getGroupId(),StringPool.BLANK,null,LayoutRemoteStagingBackgroundTaskExecutor.class,taskContextMap,new ServiceContext());
}
