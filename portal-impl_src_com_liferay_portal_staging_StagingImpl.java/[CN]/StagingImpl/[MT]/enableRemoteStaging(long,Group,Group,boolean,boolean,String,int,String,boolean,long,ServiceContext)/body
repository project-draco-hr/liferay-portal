{
  validate(remoteAddress,remotePort,remotePathContext,secureConnection,remoteGroupId);
  if (liveGroup.hasStagingGroup()) {
    disableStaging(liveGroup,serviceContext);
  }
  String remoteURL=buildRemoteURL(remoteAddress,remotePort,remotePathContext,secureConnection,GroupConstants.DEFAULT_LIVE_GROUP_ID,false);
  UnicodeProperties typeSettingsProperties=liveGroup.getTypeSettingsProperties();
  boolean stagedRemotely=GetterUtil.getBoolean(typeSettingsProperties.getProperty("stagedRemotely"));
  if (stagedRemotely) {
    long oldRemoteGroupId=GetterUtil.getLong(typeSettingsProperties.getProperty("remoteGroupId"));
    String oldRemoteURL=buildRemoteURL(typeSettingsProperties);
    if (!remoteURL.equals(oldRemoteURL) || (remoteGroupId != oldRemoteGroupId)) {
      disableRemoteStaging(oldRemoteURL,oldRemoteGroupId);
      stagedRemotely=false;
    }
  }
  if (!stagedRemotely) {
    enableRemoteStaging(remoteURL,remoteGroupId);
  }
  typeSettingsProperties.setProperty("branchingPrivate",String.valueOf(branchingPrivate));
  typeSettingsProperties.setProperty("branchingPublic",String.valueOf(branchingPublic));
  typeSettingsProperties.setProperty("remoteAddress",remoteAddress);
  typeSettingsProperties.setProperty("remoteGroupId",String.valueOf(remoteGroupId));
  typeSettingsProperties.setProperty("remotePathContext",remotePathContext);
  typeSettingsProperties.setProperty("remotePort",String.valueOf(remotePort));
  typeSettingsProperties.setProperty("secureConnection",String.valueOf(secureConnection));
  typeSettingsProperties.setProperty("staged",Boolean.TRUE.toString());
  typeSettingsProperties.setProperty("stagedRemotely",Boolean.TRUE.toString());
  setCommonStagingOptions(liveGroup,typeSettingsProperties,serviceContext);
  GroupLocalServiceUtil.updateGroup(liveGroup.getGroupId(),typeSettingsProperties.toString());
  updateStagedPortlets(remoteURL,remoteGroupId,typeSettingsProperties);
  checkDefaultLayoutSetBranches(userId,liveGroup,branchingPublic,branchingPrivate,true,serviceContext);
}
