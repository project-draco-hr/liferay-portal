{
  Set<Long> dataProviderInstanceIds=getDataProviderInstanceIds(groupId,ddmForm);
  List<DDMDataProviderInstanceLink> dataProviderInstanceLinks=ddmDataProviderInstanceLinkLocalService.getDataProviderInstanceLinks(structureId);
  for (  DDMDataProviderInstanceLink dataProviderInstanceLink : dataProviderInstanceLinks) {
    long dataProviderInstanceId=dataProviderInstanceLink.getDataProviderInstanceId();
    if (dataProviderInstanceIds.remove(dataProviderInstanceId)) {
      continue;
    }
    ddmDataProviderInstanceLinkLocalService.deleteDataProviderInstanceLink(dataProviderInstanceLink);
  }
  for (  Long dataProviderInstanceId : dataProviderInstanceIds) {
    ddmDataProviderInstanceLinkLocalService.addDataProviderInstanceLink(dataProviderInstanceId,structureId);
  }
}
