{
  Set<Long> dataProviderInstanceIds=getDataProviderInstanceIds(ddmForm,groupId);
  List<DDMDataProviderInstanceLink> dataProviderInstaceLinks=ddmDataProviderInstanceLinkLocalService.getDataProviderInstanceLinks(structureId);
  for (  DDMDataProviderInstanceLink dataProviderInstanceLink : dataProviderInstaceLinks) {
    long dataProviderInstanceId=dataProviderInstanceLink.getDataProviderInstanceId();
    if (dataProviderInstanceIds.remove(dataProviderInstanceId)) {
      continue;
    }
    ddmDataProviderInstanceLinkLocalService.deleteDataProviderInstanceLink(dataProviderInstanceLink);
  }
  for (  Long dataProviderInstanceId : dataProviderInstanceIds) {
    ddmDataProviderInstanceLinkLocalService.addDataProviderInstanceLink(dataProviderInstanceId,structureId);
  }
}
