{
  while (parentStructureId != 0) {
    DDMStructure parentStructure=ddmStructurePersistence.fetchByPrimaryKey(parentStructureId);
    if (structureId == parentStructure.getStructureId()) {
      throw new StructureDefinitionException("There is a cycle in the structure hierarchy");
    }
    parentStructureId=parentStructure.getParentStructureId();
  }
}
