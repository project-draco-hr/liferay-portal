{
  PortletURL portletURL=PortalUtil.getControlPanelPortletURL(portletRequest,KBPortletKeys.KNOWLEDGE_BASE_ADMIN,PortletRequest.ACTION_PHASE);
  if (isSubscribed(portletRequest)) {
    portletURL.setParameter(ActionRequest.ACTION_NAME,"unsubscribeKBArticle");
  }
 else {
    portletURL.setParameter(ActionRequest.ACTION_NAME,"subscribeKBArticle");
  }
  portletURL.setParameter("redirect",PortalUtil.getCurrentURL(portletRequest));
  KBArticle kbArticle=(KBArticle)portletRequest.getAttribute(KBWebKeys.KNOWLEDGE_BASE_KB_ARTICLE);
  portletURL.setParameter("resourceClassNameId",String.valueOf(kbArticle.getClassNameId()));
  portletURL.setParameter("resourcePrimKey",String.valueOf(kbArticle.getResourcePrimKey()));
  return portletURL.toString();
}
