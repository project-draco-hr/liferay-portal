{
  _embeddedChannel.close();
  RPCRequest<String> rpcRequest=new RPCRequest<String>(_ID,new TestRPCCallable(null,false,null,_RESULT));
  RPCResponse<String> rpcResponse=new RPCResponse<String>(_ID,true,null,null);
  CaptureHandler captureHandler=JDKLoggerTestUtil.configureJDKLogger(RPCRequest.class.getName(),Level.SEVERE);
  try {
    rpcRequest.sendRPCResponse(_embeddedChannel,rpcResponse);
    List<LogRecord> logRecords=captureHandler.getLogRecords();
    LogRecord logRecord=logRecords.get(0);
    Assert.assertEquals("Unable to send RPC response: " + rpcResponse,logRecord.getMessage());
    Throwable throwable=logRecord.getThrown();
    Assert.assertTrue(throwable instanceof ClosedChannelException);
  }
  finally {
    captureHandler.close();
  }
}
