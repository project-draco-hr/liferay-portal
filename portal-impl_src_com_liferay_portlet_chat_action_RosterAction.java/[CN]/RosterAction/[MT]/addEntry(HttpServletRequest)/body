{
  JSONObject jo=new JSONObject();
  try {
    long companyId=PortalUtil.getCompanyId(req);
    long userId=ParamUtil.getLong(req,"userId");
    String email=ParamUtil.getString(req,"email");
    User user=null;
    if (userId > 0) {
      user=UserLocalServiceUtil.getUserById(companyId,userId);
    }
 else {
      user=UserLocalServiceUtil.getUserByEmailAddress(companyId,email);
    }
    jo=MessagingUtil.addRosterEntry(req.getSession(),user);
  }
 catch (  Exception e) {
    JSONUtil.put(jo,"status","failure");
  }
  return jo;
}
