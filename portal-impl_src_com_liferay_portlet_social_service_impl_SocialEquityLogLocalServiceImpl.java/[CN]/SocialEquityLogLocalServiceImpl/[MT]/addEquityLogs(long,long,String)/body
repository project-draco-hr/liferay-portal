{
  List<SocialEquityLog> equityLogs=socialEquityLogPersistence.findByU_AEI_A_A(userId,assetEntryId,actionId,true);
  if (!equityLogs.isEmpty()) {
    return;
  }
  User user=userPersistence.findByPrimaryKey(userId);
  AssetEntry assetEntry=assetEntryPersistence.findByPrimaryKey(assetEntryId);
  User assetEntryOwner=null;
  try {
    assetEntryOwner=userPersistence.findByPrimaryKey(assetEntry.getUserId());
  }
 catch (  NoSuchUserException nsue) {
    assetEntryOwner=user;
  }
  List<SocialEquitySetting> equitySettings=getEquitySettings(assetEntry,actionId);
  for (  SocialEquitySetting equitySetting : equitySettings) {
    addEquityLog(user,assetEntry,assetEntryOwner,equitySetting);
  }
}
