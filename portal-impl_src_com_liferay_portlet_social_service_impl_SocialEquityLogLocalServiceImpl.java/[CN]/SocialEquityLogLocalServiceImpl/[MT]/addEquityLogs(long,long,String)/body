{
  if (!PropsValues.SOCIAL_EQUITY_EQUITY_LOG_ENABLED) {
    return;
  }
  List<SocialEquityLog> equityLogs=socialEquityLogPersistence.findByU_AEI_A_A(userId,assetEntryId,actionId,true);
  if (!equityLogs.isEmpty()) {
    return;
  }
  AssetEntry assetEntry=assetEntryPersistence.findByPrimaryKey(assetEntryId);
  List<SocialEquitySetting> equitySettings=socialEquitySettingLocalService.getEquitySettings(assetEntry.getGroupId(),assetEntry.getClassNameId(),actionId);
  for (  SocialEquitySetting equitySetting : equitySettings) {
    Message message=new Message();
    message.put("method","addEquityLog");
    message.put("userId",userId);
    message.put("assetEntryId",assetEntryId);
    message.setPayload(equitySetting);
    MessageBusUtil.sendMessage("liferay/social_equity",message);
  }
}
