{
  SocialEquityValue socialEquityValue=new SocialEquityValue();
  for (  SocialEquityLog equityLog : equityLogs) {
    AssetEntry assetEntry=assetEntryLocalService.getEntry(equityLog.getAssetEntryId());
    if (!isSocialEquityEnabled(assetEntry.getGroupId(),assetEntry.getClassName(),equityLog.getType())) {
      continue;
    }
    double k=calculateK(equityLog.getValue(),equityLog.getLifespan());
    double b=calculateB(equityLog.getActionDate(),equityLog.getValue(),equityLog.getLifespan());
    socialEquityValue.setValue(0,0);
    socialEquityValue.subtract(k,b);
    if (equityLog.getType() == SocialEquitySettingConstants.TYPE_INFORMATION) {
      socialEquityLogLocalService.incrementSocialEquityAssetEntry_IQ(assetEntry.getEntryId(),socialEquityValue);
      socialEquityLogLocalService.incrementSocialEquityUser_CQ(assetEntry.getGroupId(),assetEntry.getUserId(),socialEquityValue);
    }
 else {
      socialEquityLogLocalService.incrementSocialEquityUser_PQ(equityLog.getGroupId(),equityLog.getUserId(),socialEquityValue);
    }
    socialEquityLogPersistence.remove(equityLog);
  }
}
