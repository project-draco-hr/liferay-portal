{
  long groupId=Long.valueOf(StringUtil.extractFirst(id,StringPool.POUND));
  long userId=Long.valueOf(StringUtil.extractLast(id,StringPool.POUND));
  User user=userLocalService.getUser(userId);
  int count=socialEquityUserPersistence.countByG_U(groupId,userId);
  if (count == 0) {
    addSocialEquityUser(groupId,user);
  }
  SocialEquity socialEquity=counter.getValue();
  user.updateSocialParticipationEquity(socialEquity.getValue());
  String sql=CustomSQLUtil.get(_UPDATE_SOCIAL_EQUITY_USER_PQ);
  sql=StringUtil.replace(sql,new String[]{"[$GROUP_ID$]","[$PARTICIPATION_B$]","[$PARTICIPATION_K$]","[$USER_ID$]"},new String[]{String.valueOf(groupId),String.valueOf(socialEquity.getB()),String.valueOf(socialEquity.getK()),String.valueOf(userId)});
  runSQL(sql);
}
