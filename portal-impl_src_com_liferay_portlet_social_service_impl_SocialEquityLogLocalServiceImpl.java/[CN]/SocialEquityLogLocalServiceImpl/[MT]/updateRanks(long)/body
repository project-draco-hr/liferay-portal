{
  DataSource dataSource=socialEquityLogPersistence.getDataSource();
  JdbcTemplate jdbcTemplate=new JdbcTemplate(dataSource);
  UpdateRanksHandler updateRanksHandler=new UpdateRanksHandler(jdbcTemplate);
  String sql=CustomSQLUtil.get(_FIND_SOCIAL_EQUITY_USER_BY_RANK_FOR_GROUP);
  sql=StringUtil.replace(sql,new String[]{"[$GROUP_ID$]","[$ACTION_DATE$]"},new String[]{String.valueOf(groupId),String.valueOf(getEquityDate())});
  jdbcTemplate.query(sql,updateRanksHandler);
  updateRanksHandler.flush();
}
