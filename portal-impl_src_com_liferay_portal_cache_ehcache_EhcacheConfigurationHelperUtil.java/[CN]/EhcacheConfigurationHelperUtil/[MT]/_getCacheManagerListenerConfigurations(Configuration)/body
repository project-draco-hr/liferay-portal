{
  FactoryConfiguration<?> factoryConfiguration=ehcacheConfiguration.getCacheManagerEventListenerFactoryConfiguration();
  if (factoryConfiguration == null) {
    return Collections.emptySet();
  }
  Properties properties=_parseProperties(factoryConfiguration.getProperties(),factoryConfiguration.getPropertySeparator());
  properties.put(EhcacheConstants.CACHE_MANAGER_LISTENER_FACTORY_CLASS_NAME,factoryConfiguration.getFullyQualifiedClassPath());
  properties.put(EhcacheConstants.PORTAL_CACHE_MANAGER_NAME,ehcacheConfiguration.getName());
  CallbackConfiguration callbackConfiguration=new CallbackConfiguration(EhcacheCallbackFactory.INSTANCE,properties);
  Set<CallbackConfiguration> callbackConfigurations=new HashSet<CallbackConfiguration>();
  callbackConfigurations.add(callbackConfiguration);
  return callbackConfigurations;
}
