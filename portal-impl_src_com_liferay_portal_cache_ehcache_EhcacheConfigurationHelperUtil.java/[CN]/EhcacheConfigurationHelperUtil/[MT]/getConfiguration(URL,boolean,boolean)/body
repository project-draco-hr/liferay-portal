{
  if (configurationURL == null) {
    throw new NullPointerException("Configuration path is null");
  }
  Configuration ehcacheConfiguration=ConfigurationFactory.parseConfiguration(configurationURL);
  _handlePeerFacotryConfigurations(ehcacheConfiguration.getCacheManagerPeerProviderFactoryConfiguration(),clusterAware);
  _handlePeerFacotryConfigurations(ehcacheConfiguration.getCacheManagerPeerListenerFactoryConfigurations(),clusterAware);
  Set<CallbackConfiguration> cacheManagerListenerConfigurations=_getCacheManagerListenerConfigurations(ehcacheConfiguration);
  PortalCacheConfiguration defaultPortalCacheConfiguration=_parseCacheConfiguration(ehcacheConfiguration.getDefaultCacheConfiguration(),clusterAware,usingDefault);
  Set<PortalCacheConfiguration> portalCacheConfigurations=new HashSet<>();
  Map<String,CacheConfiguration> cacheConfigurations=ehcacheConfiguration.getCacheConfigurations();
  for (  Map.Entry<String,CacheConfiguration> entry : cacheConfigurations.entrySet()) {
    portalCacheConfigurations.add(_parseCacheConfiguration(entry.getValue(),clusterAware,usingDefault));
  }
  PortalCacheManagerConfiguration portalCacheManagerConfiguration=new PortalCacheManagerConfiguration(cacheManagerListenerConfigurations,defaultPortalCacheConfiguration,portalCacheConfigurations);
  return new ObjectValuePair<>(ehcacheConfiguration,portalCacheManagerConfiguration);
}
