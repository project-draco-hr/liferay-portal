{
  User user=userPersistence.findByPrimaryKey(userId);
  Date now=new Date();
  long syncDeviceId=counterLocalService.increment();
  SyncDevice syncDevice=syncDevicePersistence.create(syncDeviceId);
  syncDevice.setCompanyId(user.getCompanyId());
  syncDevice.setUserId(user.getUserId());
  syncDevice.setUserName(user.getFullName());
  syncDevice.setCreateDate(now);
  syncDevice.setModifiedDate(now);
  syncDevice.setType(type);
  syncDevice.setBuildNumber(buildNumber);
  syncDevice.setFeatureSet(featureSet);
  syncDevice.setStatus(SyncDeviceConstants.STATUS_ACTIVE);
  syncDevicePersistence.update(syncDevice);
  return syncDevice;
}
