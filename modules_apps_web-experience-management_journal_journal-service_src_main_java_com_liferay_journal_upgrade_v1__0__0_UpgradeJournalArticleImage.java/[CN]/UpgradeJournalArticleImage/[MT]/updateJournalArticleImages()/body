{
  try (PreparedStatement ps=connection.prepareStatement("select articleImageId, elName from JournalArticleImage");ResultSet rs=ps.executeQuery()){
    try (PreparedStatement ps2=AutoBatchPreparedStatementUtil.autoBatch(connection.prepareStatement("update JournalArticleImage set elName = ? where " + "articleImageId = ?"))){
      while (rs.next()) {
        long articleImageId=rs.getLong(1);
        String elName=rs.getString(2);
        int lastIndexOf=elName.lastIndexOf(StringPool.UNDERLINE);
        if (lastIndexOf > 0) {
          elName=elName.substring(0,lastIndexOf);
        }
        ps2.setString(1,elName);
        ps2.setLong(2,articleImageId);
        ps2.addBatch();
      }
      ps2.executeBatch();
    }
   }
 }
