{
  try (PreparedStatement ps1=connection.prepareStatement("select articleid, elInstanceId, elName from " + "JournalArticleImage group by articleid, elName");ResultSet rs=ps1.executeQuery()){
    try (PreparedStatement ps2=AutoBatchPreparedStatementUtil.autoBatch(connection.prepareStatement("update JournalArticleImage set elInstanceId = ? " + "where articleid = ? and elName = ?"))){
      while (rs.next()) {
        long articleid=rs.getLong(1);
        String elInstanceId=rs.getString(2);
        String elName=rs.getString(3);
        if (Validator.isNull(elInstanceId)) {
          elInstanceId=StringUtil.randomString(4);
        }
        ps2.setString(1,elInstanceId);
        ps2.setLong(2,articleid);
        ps2.setString(3,elName);
        ps2.addBatch();
      }
      ps2.executeBatch();
    }
   }
 }
