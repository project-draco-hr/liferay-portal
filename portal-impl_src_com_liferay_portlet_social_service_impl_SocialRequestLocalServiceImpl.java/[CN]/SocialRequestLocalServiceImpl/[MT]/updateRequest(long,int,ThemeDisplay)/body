{
  SocialRequest request=socialRequestPersistence.findByPrimaryKey(requestId);
  int oldStatus=request.getStatus();
  request.setModifiedDate(new Date());
  request.setStatus(status);
  socialRequestPersistence.update(request,false);
  if (status == SocialRequestConstants.STATUS_CONFIRM) {
    socialRequestInterpreterLocalService.processConfirmation(request,themeDisplay);
  }
 else   if (status == SocialRequestConstants.STATUS_IGNORE) {
    socialRequestInterpreterLocalService.processRejection(request,themeDisplay);
  }
  List<SocialRequest> requests=socialRequestPersistence.findByU_C_C_T_S(request.getUserId(),request.getClassNameId(),request.getClassPK(),request.getType(),oldStatus);
  for (  SocialRequest curRequest : requests) {
    curRequest.setStatus(status);
    socialRequestPersistence.update(curRequest,false);
  }
  return request;
}
