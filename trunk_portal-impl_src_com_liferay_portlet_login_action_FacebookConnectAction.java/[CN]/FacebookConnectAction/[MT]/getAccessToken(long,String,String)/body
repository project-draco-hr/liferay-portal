{
  String url=HttpUtil.addParameter(FacebookConnectUtil.getAccessTokenURL(companyId),"client_id",FacebookConnectUtil.getAppId(companyId));
  url=HttpUtil.addParameter(url,"redirect_uri",FacebookConnectUtil.getRedirectURL(companyId));
  String facebookConnectRedirectURL=FacebookConnectUtil.getRedirectURL(companyId);
  facebookConnectRedirectURL=HttpUtil.addParameter(facebookConnectRedirectURL,"redirect",redirect);
  url=HttpUtil.addParameter(url,"redirect_uri",facebookConnectRedirectURL);
  url=HttpUtil.addParameter(url,"client_secret",FacebookConnectUtil.getAppSecret(companyId));
  url=HttpUtil.addParameter(url,"code",code);
  Http.Options options=new Http.Options();
  options.setLocation(url);
  options.setPost(true);
  String content=HttpUtil.URLtoString(options);
  if (Validator.isNotNull(content)) {
    int x=content.indexOf("access_token=");
    if (x >= 0) {
      int y=content.indexOf(CharPool.AMPERSAND,x);
      if (y < x) {
        y=content.length();
      }
      return content.substring(x + 13,y);
    }
  }
  return null;
}
