{
  Role role=RoleLocalServiceUtil.getRole(companyId,RoleConstants.OWNER);
  ResourcePermission resourcePermission=null;
  try {
    resourcePermission=ResourcePermissionLocalServiceUtil.getResourcePermission(companyId,name,ResourceConstants.SCOPE_INDIVIDUAL,String.valueOf(primKey),role.getRoleId());
  }
 catch (  NoSuchResourcePermissionException nsrpe) {
    if (_log.isDebugEnabled()) {
      _log.warn("No resource found for {" + companyId + ", "+ name+ ", "+ ResourceConstants.SCOPE_INDIVIDUAL+ ", "+ String.valueOf(primKey)+ ", "+ role.getRoleId()+ "}");
    }
    return;
  }
  if (name.equals(User.class.getName())) {
    User user=UserLocalServiceUtil.getUserById(ownerId);
    Contact contact=ContactLocalServiceUtil.getContact(user.getContactId());
    ownerId=contact.getUserId();
  }
  resourcePermission.setOwnerId(ownerId);
  ResourcePermissionLocalServiceUtil.updateResourcePermission(resourcePermission,false);
  if (_log.isDebugEnabled() && (resourcePermission.getResourcePermissionId() % 10 == 0)) {
    _log.debug(resourcePermission);
  }
}
