{
  _clusterSchedulerEngine=_getClusterSchedulerEngine(true,2,2);
  boolean isMaster=_isMaster(_clusterSchedulerEngine);
  Assert.assertTrue(isMaster);
  Map<String,SchedulerResponse> schedulerResponseMap=_getMemoryClusteredJobs(_clusterSchedulerEngine);
  Assert.assertTrue(schedulerResponseMap.isEmpty());
  String newMaster=_clusterSchedulerEngine.getSerializedString(MockClusterExecutor._anotherAddress);
  MockLockLocalService.setLock(newMaster);
  isMaster=_isMaster(_clusterSchedulerEngine);
  Assert.assertFalse(isMaster);
  MockClusterExecutor.fireClusterEventListener();
  schedulerResponseMap=_getMemoryClusteredJobs(_clusterSchedulerEngine);
  Assert.assertEquals(2,schedulerResponseMap.size());
}
