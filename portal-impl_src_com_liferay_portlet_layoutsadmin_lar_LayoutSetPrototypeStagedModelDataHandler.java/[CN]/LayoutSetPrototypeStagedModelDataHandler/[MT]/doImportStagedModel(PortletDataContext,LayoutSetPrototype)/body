{
  long companyId=portletDataContext.getCompanyId();
  long userId=portletDataContext.getUserId(layoutSetPrototype.getUserUuid());
  UnicodeProperties settingsProperties=layoutSetPrototype.getSettingsProperties();
  Boolean layoutsUpdateable=GetterUtil.getBoolean(settingsProperties.getProperty("layoutsUpdateable"),true);
  ServiceContext serviceContext=portletDataContext.createServiceContext(layoutSetPrototype,LayoutSetPrototypePortletDataHandler.NAMESPACE);
  LayoutSetPrototype existingLayoutSetPrototype=LayoutSetPrototypeLocalServiceUtil.fetchLayoutSetPrototypeByUuidAndCompanyId(layoutSetPrototype.getUuid(),companyId);
  if (existingLayoutSetPrototype == null) {
    existingLayoutSetPrototype=LayoutSetPrototypeLocalServiceUtil.fetchLayoutSetPrototype(companyId,layoutSetPrototype.getName());
  }
  LayoutSetPrototype importedLayoutSetPrototype=null;
  if (existingLayoutSetPrototype == null) {
    serviceContext.setUuid(layoutSetPrototype.getUuid());
    importedLayoutSetPrototype=LayoutSetPrototypeLocalServiceUtil.addLayoutSetPrototype(userId,companyId,layoutSetPrototype.getNameMap(),layoutSetPrototype.getDescription(),layoutSetPrototype.isActive(),layoutsUpdateable,serviceContext);
  }
 else {
    importedLayoutSetPrototype=LayoutSetPrototypeLocalServiceUtil.updateLayoutSetPrototype(existingLayoutSetPrototype.getLayoutSetPrototypeId(),layoutSetPrototype.getNameMap(),layoutSetPrototype.getDescription(),layoutSetPrototype.isActive(),layoutsUpdateable,serviceContext);
  }
  portletDataContext.importClassedModel(layoutSetPrototype,importedLayoutSetPrototype,LayoutSetPrototypePortletDataHandler.NAMESPACE);
}
