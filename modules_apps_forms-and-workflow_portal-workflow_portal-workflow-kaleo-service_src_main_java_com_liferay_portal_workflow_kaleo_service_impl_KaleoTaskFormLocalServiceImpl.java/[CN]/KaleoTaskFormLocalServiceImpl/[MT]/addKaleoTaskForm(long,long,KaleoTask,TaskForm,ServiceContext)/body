{
  User user=userPersistence.findByPrimaryKey(serviceContext.getGuestOrUserId());
  Date now=new Date();
  long kaleoTaskFormId=counterLocalService.increment();
  KaleoTaskForm kaleoTaskForm=kaleoTaskFormPersistence.create(kaleoTaskFormId);
  kaleoTaskForm.setCompanyId(user.getCompanyId());
  kaleoTaskForm.setGroupId(kaleoTask.getGroupId());
  kaleoTaskForm.setUserId(user.getUserId());
  kaleoTaskForm.setUserName(user.getFullName());
  kaleoTaskForm.setCreateDate(now);
  kaleoTaskForm.setModifiedDate(now);
  kaleoTaskForm.setKaleoDefinitionId(kaleoDefinitionId);
  kaleoTaskForm.setKaleoNodeId(kaleoNodeId);
  kaleoTaskForm.setKaleoTaskId(kaleoTask.getKaleoTaskId());
  kaleoTaskForm.setKaleoTaskName(kaleoTask.getName());
  kaleoTaskForm.setName(taskForm.getName());
  kaleoTaskForm.setDescription(taskForm.getDescription());
  kaleoTaskForm.setFormDefinition(taskForm.getFormDefinition());
  kaleoTaskForm.setMetadata(taskForm.getMetadata());
  kaleoTaskForm.setPriority(taskForm.getPriority());
  TaskFormReference taskFormReference=taskForm.getTaskFormReference();
  kaleoTaskForm.setFormCompanyId(taskFormReference.getCompanyId());
  kaleoTaskForm.setFormGroupId(taskFormReference.getGroupId());
  kaleoTaskForm.setFormId(taskFormReference.getFormId());
  kaleoTaskForm.setFormUuid(taskFormReference.getFormUuid());
  kaleoTaskFormPersistence.update(kaleoTaskForm);
  return kaleoTaskForm;
}
