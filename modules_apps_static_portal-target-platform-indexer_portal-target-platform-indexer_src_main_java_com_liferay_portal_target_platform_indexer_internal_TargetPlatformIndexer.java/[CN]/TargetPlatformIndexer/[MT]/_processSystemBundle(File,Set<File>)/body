{
  try (Jar jar=new Jar("system.bundle")){
    _processBundle(_systemBundle);
    Manifest manifest=new Manifest();
    Attributes attributes=manifest.getMainAttributes();
    attributes.putValue(Constants.BUNDLE_SYMBOLICNAME,_systemBundle.getSymbolicName());
    attributes.putValue(Constants.BUNDLE_VERSION,_systemBundle.getVersion().toString());
    String exportPackage=_packagesParamters.toString();
    exportPackage=exportPackage.replace("version:Version","version");
    attributes.putValue(Constants.EXPORT_PACKAGE,exportPackage);
    StringBuilder sb=new StringBuilder();
    for (    Parameters parameter : _parametersList) {
      sb.append(parameter.toString());
      sb.append(",");
    }
    sb.setLength(sb.length() - 1);
    String capabilities=sb.toString();
    attributes.putValue(Constants.PROVIDE_CAPABILITY,capabilities);
    jar.setManifest(manifest);
    File jarFile=new File(tempDir,_systemBundle.getSymbolicName() + "-" + _systemBundle.getVersion()+ ".jar");
    jar.write(jarFile);
    jarFiles.add(jarFile);
  }
 }
