{
  String url=_systemBundle.getSymbolicName() + "-" + _systemBundle.getVersion()+ ".jar";
  int index=content.indexOf(url);
  if (index == -1) {
    throw new IllegalStateException("Indexed content:\n" + content + "\ndoes not have system bundle url: "+ url);
  }
  int start=content.lastIndexOf(_OSGI_CONTENT_PREFIX,index);
  if (start == -1) {
    throw new IllegalStateException("Indexed content:\n" + content.substring(0,index) + "\n does not have osgi content prefix: "+ _OSGI_CONTENT_PREFIX);
  }
  start+=_OSGI_CONTENT_PREFIX.length();
  int end=content.lastIndexOf("\"/>",index);
  String prefix=content.substring(0,start);
  String postfix=content.substring(end);
  String newContent=prefix.concat(sha256sum).concat(postfix);
  index=newContent.indexOf(url);
  index+=url.length() + 3;
  start=newContent.indexOf(_SIZE_PREFIX,index);
  if (start == -1) {
    throw new IllegalStateException("Indexed content:\n" + content + "\n does not have size prefix: "+ _SIZE_PREFIX);
  }
  start+=_SIZE_PREFIX.length();
  end=newContent.indexOf("\"/>",index);
  prefix=newContent.substring(0,start);
  postfix=newContent.substring(end);
  newContent=prefix.concat(String.valueOf(size)).concat(postfix);
  return newContent.getBytes("UTF-8");
}
