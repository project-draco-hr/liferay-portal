{
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  long recordId=ParamUtil.getLong(actionRequest,"recordId");
  long groupId=ParamUtil.getLong(actionRequest,"groupId");
  long recordSetId=ParamUtil.getLong(actionRequest,"recordSetId");
  DDMFormValues ddmFormValues=getDDMFormValues(actionRequest);
  boolean majorVersion=ParamUtil.getBoolean(actionRequest,"majorVersion");
  ServiceContext serviceContext=ServiceContextFactory.getInstance(DDLRecord.class.getName(),actionRequest);
  DDLRecord record=null;
  if (cmd.equals(Constants.ADD)) {
    record=DDLRecordServiceUtil.addRecord(groupId,recordSetId,DDLRecordConstants.DISPLAY_INDEX_DEFAULT,ddmFormValues,serviceContext);
  }
 else {
    record=DDLRecordServiceUtil.updateRecord(recordId,majorVersion,DDLRecordConstants.DISPLAY_INDEX_DEFAULT,ddmFormValues,serviceContext);
  }
  return record;
}
