{
  _mockClusterExecutor.setNodeNumber(2);
  _mockClusterExecutor.setThrowException(true);
  CaptureHandler captureHandler=JDKLoggerTestUtil.configureJDKLogger(LuceneHelperImpl.class.getName(),Level.SEVERE);
  try {
    List<LogRecord> logRecords=captureHandler.getLogRecords();
    ClusterEvent clusterEvent=ClusterEvent.join(_clusterNode);
    _fireClusterEventListeners(clusterEvent);
    Assert.assertEquals(1,logRecords.size());
    _assertLogger(logRecords.get(0),"Unable to load indexes for company " + _COMPANY_ID,SystemException.class);
  }
  finally {
    captureHandler.close();
  }
}
