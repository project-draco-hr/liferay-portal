{
  _mockClusterExecutor.setNodeNumber(2);
  CaptureHandler captureHandler=JDKLoggerTestUtil.configureJDKLogger(LuceneHelperImpl.class.getName(),Level.SEVERE);
  try {
    List<LogRecord> logRecords=captureHandler.getLogRecords();
    ClusterEvent clusterEvent=ClusterEvent.join(_clusterNode);
    _fireClusterEventListeners(clusterEvent);
    Assert.assertEquals(1,logRecords.size());
    LogRecord logRecord=logRecords.get(0);
    _assertLogger(logRecord,"Unable to load indexes for company " + _COMPANY_ID,Exception.class);
    Exception exception=(Exception)logRecord.getThrown();
    Assert.assertEquals("Unable to execute LuceneClusterUtil.loadIndexesFromCluster(" + "long)",exception.getMessage());
  }
  finally {
    captureHandler.close();
  }
}
