{
  Exception exception=new Exception();
  LuceneClusterUtilAdvice.setException(exception);
  _mockClusterExecutor.setNodeNumber(2);
  List<LogRecord> logRecords=_captureHandler.resetLogLevel(Level.SEVERE);
  ClusterNode newClusterNode=new ClusterNode("12345",_localhostInetAddress);
  newClusterNode.setPortalProtocol(Http.HTTP);
  ClusterEvent clusterEvent=ClusterEvent.join(newClusterNode);
  _fireClusterEventListeners(clusterEvent);
  Assert.assertEquals(1,logRecords.size());
  LogRecord logRecord=logRecords.get(0);
  _assertLogger(logRecord,"Unable to load indexes for company " + _COMPANY_ID,Exception.class);
  Assert.assertSame(exception,logRecord.getThrown());
}
