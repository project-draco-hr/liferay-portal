{
  MockServer mockServer=new MockServer();
  mockServer.start();
  _mockClusterExecutor.reset();
  _mockClusterExecutor.setNodeNumber(2);
  _mockClusterExecutor.setPort(mockServer.getPort());
  _mockClusterExecutor.setPortalInetAddress(mockServer.getInetAddress());
  List<LogRecord> logRecords=_captureHandler.resetLogLevel(Level.INFO);
  _luceneHelperImpl.loadIndexesFromCluster(_COMPANY_ID);
  Assert.assertEquals(2,logRecords.size());
  _assertLogger(logRecords.get(0),"Start loading lucene index files from cluster node",null);
  _assertLogger(logRecords.get(1),"Lucene index files loaded successfully",null);
  Assert.assertArrayEquals(_RESPONSE_MESSAGE,_mockIndexAccessor.getResponseMessage());
  mockServer.join();
}
