{
  if (_attachmentsFolderId > 0) {
    return _attachmentsFolderId;
  }
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setAddGroupPermissions(true);
  serviceContext.setAddGuestPermissions(true);
  long[] assetCategoryIds=AssetCategoryLocalServiceUtil.getCategoryIds(WikiPage.class.getName(),getResourcePrimKey());
  serviceContext.setAssetCategoryIds(assetCategoryIds);
  long repositoryId=PortletFileRepositoryUtil.getPortletRepositoryId(getGroupId(),PortletKeys.WIKI,serviceContext);
  Folder folder=PortletFileRepositoryUtil.getPortletFolder(getUserId(),repositoryId,getNodeAttachmentsFolderId(),String.valueOf(getResourcePrimKey()),serviceContext);
  _attachmentsFolderId=folder.getFolderId();
  return _attachmentsFolderId;
}
