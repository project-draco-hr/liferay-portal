{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  String portletNamespace=PortalUtil.getPortletNamespace(themeDisplay.getPpid());
  String redirect=getRedirect(actionRequest);
  redirect=HttpUtil.setParameter(redirect,portletNamespace.concat("classPK"),ParamUtil.getLong(actionRequest,"classPK"));
  boolean saveAndContinue=ParamUtil.getBoolean(actionRequest,"saveAndContinue");
  if (saveAndContinue) {
    redirect=getSaveAndContinueRedirect(actionRequest,template,redirect);
  }
  actionRequest.setAttribute(WebKeys.REDIRECT,redirect);
}
