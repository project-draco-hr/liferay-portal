{
  PortalCache<K,V> portalCache=_portalCaches.get(name);
  if (portalCache != null) {
    return portalCache;
  }
  portalCache=createPortalCache(name);
  PortalCacheConfiguration portalCacheConfiguration=_portalCacheManagerConfiguration.getPortalCacheConfiguration(portalCache.getName());
  if (portalCacheConfiguration == null) {
    portalCacheConfiguration=_portalCacheManagerConfiguration.getDefaultPortalCacheConfiguration();
  }
  _initPortalCacheListeners(portalCache,portalCacheConfiguration);
  if (PropsValues.TRANSACTIONAL_CACHE_ENABLED && isTransactionalPortalCache(name)) {
    portalCache=new TransactionalPortalCache<K,V>(portalCache);
  }
  if (PropsValues.EHCACHE_BLOCKING_CACHE_ALLOWED && blocking) {
    portalCache=new BlockingPortalCache<K,V>(portalCache);
  }
  PortalCache<K,V> previousPortalCache=_portalCaches.putIfAbsent(name,portalCache);
  if (previousPortalCache != null) {
    portalCache=previousPortalCache;
  }
 else   if (PropsValues.EHCACHE_BOOTSTRAP_CACHE_LOADER_ENABLED && (portalCacheConfiguration != null)) {
    CallbackConfiguration bootstrapLoaderConfiguration=portalCacheConfiguration.getBootstrapLoaderConfiguration();
    if (bootstrapLoaderConfiguration != null) {
      CallbackFactory callbackFactory=bootstrapLoaderConfiguration.getCallbackFactory();
      BootstrapLoader bootstrapLoader=callbackFactory.createBootstrapLoader(bootstrapLoaderConfiguration.getProperties());
      if (bootstrapLoader != null) {
        bootstrapLoader.load(getName(),name);
      }
    }
  }
  return portalCache;
}
