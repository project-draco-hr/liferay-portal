{
  if ((_portalCacheManagerConfiguration != null) || (_mpiOnly && SPIUtil.isSPI())) {
    return;
  }
  if (Validator.isNull(_name)) {
    throw new IllegalArgumentException("Portal cache manager name is not specified");
  }
  initPortalCacheManager();
  _portalCacheManagerConfiguration=getPortalCacheManagerConfiguration();
  for (  CallbackConfiguration callbackConfiguration : _portalCacheManagerConfiguration.getCacheManagerListenerConfigurations()) {
    CallbackFactory callbackFactory=callbackConfiguration.getCallbackFactory();
    CacheManagerListener cacheManagerListener=callbackFactory.createCacheManagerListener(callbackConfiguration.getProperties());
    if (cacheManagerListener != null) {
      registerCacheManagerListener(cacheManagerListener);
    }
  }
  Registry registry=RegistryUtil.getRegistry();
  StringBundler sb=new StringBundler(5);
  sb.append("(&(objectClass=");
  sb.append(PortalCacheConfiguratorSettings.class.getName());
  sb.append(")(portal.cache.manager.name=");
  sb.append(_name);
  sb.append("))");
  Filter filter=registry.getFilter(sb.toString());
  _serviceTracker=registry.trackServices(filter,new PortalCacheConfiguratorSettingsServiceTrackerCustomizer());
  _serviceTracker.open();
}
