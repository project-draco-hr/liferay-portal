{
  if (_request.getParameter("p_p_id") == null) {
    Assert.assertFalse(_mockPortletContainer.prepared);
  }
 else {
    Assert.assertTrue(_mockPortletContainer.prepared);
  }
  Assert.assertEquals("password",PrincipalThreadLocal.getPassword());
  Assert.assertSame(Boolean.TRUE,_request.getAttribute(WebKeys.PORTAL_RESILIENCY_ACTION));
  CentralizedThreadLocal.clearShortLivedThreadLocals();
}
