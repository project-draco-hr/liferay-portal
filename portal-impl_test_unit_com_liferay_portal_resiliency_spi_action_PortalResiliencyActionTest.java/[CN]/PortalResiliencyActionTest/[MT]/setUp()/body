{
  PropsUtil.setProps(new PropsImpl());
  PortletContainerUtil portletContainerUtil=new PortletContainerUtil();
  _mockPortletContainer=new MockPortletContainer();
  portletContainerUtil.setPortletContainer(_mockPortletContainer);
  _request=new MockHttpServletRequest();
  _request.setAttribute(WebKeys.SPI_AGENT_REQUEST,new SPIAgentRequest(new MockHttpServletRequest()));
  _request.setAttribute(WebKeys.SPI_AGENT_RESPONSE,new SPIAgentResponse());
  _portlet=new PortletImpl();
  _request.setAttribute(WebKeys.SPI_AGENT_PORTLET,_portlet);
  _layout=new LayoutImpl();
  _layout.setTypeSettings(_DEFAULT_LAYOUT_TYPE_SETTINGS);
  _request.setAttribute(WebKeys.LAYOUT,_layout);
  HttpSession session=_request.getSession();
  session.setAttribute(WebKeys.USER_PASSWORD,"password");
  _response=new MockHttpServletResponse();
}
