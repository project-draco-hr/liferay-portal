{
  ByteArrayOutputStream byteArrayOutputStream=new ByteArrayOutputStream();
  _dumpIndexDeletionPolicy.dump(byteArrayOutputStream,indexWriter,new ReentrantLock());
  byte[] bytes=byteArrayOutputStream.toByteArray();
  Directory targetDirectory=new RAMDirectory();
  IndexCommitSerializationUtil.deserializeIndex(new ByteArrayInputStream(bytes),targetDirectory);
  return targetDirectory;
}
