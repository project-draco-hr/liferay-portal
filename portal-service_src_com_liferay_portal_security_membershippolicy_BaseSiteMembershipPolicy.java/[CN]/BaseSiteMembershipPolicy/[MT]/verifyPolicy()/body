{
  ActionableDynamicQuery groupActionableDynamicQuery=GroupLocalServiceUtil.getActionableDynamicQuery();
  groupActionableDynamicQuery.setAddCriteriaMethod(new ActionableDynamicQuery.AddCriteriaMethod(){
    @Override public void addCriteria(    DynamicQuery dynamicQuery){
      Property property=PropertyFactoryUtil.forName("site");
      dynamicQuery.add(property.eq(true));
    }
  }
);
  groupActionableDynamicQuery.setPerformActionMethod(new ActionableDynamicQuery.PerformActionMethod(){
    @Override public void performAction(    Object object) throws PortalException {
      Group group=(Group)object;
      verifyPolicy(group);
      ActionableDynamicQuery userGroupRoleActionableDynamicQuery=UserGroupRoleLocalServiceUtil.getActionableDynamicQuery();
      userGroupRoleActionableDynamicQuery.setGroupId(group.getGroupId());
      userGroupRoleActionableDynamicQuery.setPerformActionMethod(new ActionableDynamicQuery.PerformActionMethod(){
        @Override public void performAction(        Object object) throws PortalException {
          UserGroupRole userGroupRole=(UserGroupRole)object;
          verifyPolicy(userGroupRole.getRole());
        }
      }
);
      userGroupRoleActionableDynamicQuery.performActions();
    }
  }
);
  groupActionableDynamicQuery.performActions();
}
