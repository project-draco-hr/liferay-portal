{
  StringBundler sb=new StringBundler();
  UnsyncBufferedReader unsyncBufferedReader=new UnsyncBufferedReader(new UnsyncStringReader(content));
  String line=null;
  while ((line=unsyncBufferedReader.readLine()) != null) {
    sb.append(trimLine(line,allowLeadingSpaces));
    sb.append("\n");
  }
  unsyncBufferedReader.close();
  content=sb.toString();
  if (content.endsWith("\n")) {
    content=content.substring(0,content.length() - 1);
  }
  return content;
}
