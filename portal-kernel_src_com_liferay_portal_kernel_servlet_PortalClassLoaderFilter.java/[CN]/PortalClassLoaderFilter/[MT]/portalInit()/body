{
  try {
    ClassLoader classLoader=PortalClassLoaderUtil.getClassLoader();
    String filterClass=_config.getInitParameter("filter-class");
    if (filterClass.startsWith("com.liferay.filters.")) {
      filterClass=StringUtil.replace(filterClass,"com.liferay.filters.","com.liferay.portal.servlet.filters.");
    }
    _filter=(Filter)classLoader.loadClass(filterClass).newInstance();
    _filter.init(_config);
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
}
