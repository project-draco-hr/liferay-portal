{
  Thread currentThread=Thread.currentThread();
  ClassLoader contextClassLoader=currentThread.getContextClassLoader();
  try {
    currentThread.setContextClassLoader(PortalClassLoaderUtil.getClassLoader());
    FilterChain contextClassLoaderFilterChain=(FilterChain)ProxyUtil.newProxyInstance(contextClassLoader,new Class[]{FilterChain.class},new ClassLoaderBeanHandler(filterChain,contextClassLoader));
    InvokerFilterChain invokerFilterChain=new InvokerFilterChain(contextClassLoaderFilterChain);
    invokerFilterChain.setContextClassLoader(contextClassLoader);
    invokerFilterChain.addFilter(_filter);
    invokerFilterChain.doFilter(servletRequest,servletResponse);
  }
  finally {
    currentThread.setContextClassLoader(contextClassLoader);
  }
}
