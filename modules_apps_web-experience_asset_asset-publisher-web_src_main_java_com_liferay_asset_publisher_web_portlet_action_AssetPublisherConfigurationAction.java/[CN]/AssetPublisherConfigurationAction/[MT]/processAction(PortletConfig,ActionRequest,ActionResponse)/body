{
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  String portletResource=ParamUtil.getString(actionRequest,"portletResource");
  PortletPreferences preferences=actionRequest.getPreferences();
  if (cmd.equals(Constants.TRANSLATE)) {
    super.processAction(portletConfig,actionRequest,actionResponse);
  }
 else   if (cmd.equals(Constants.UPDATE)) {
    try {
      validateEmail(actionRequest,"emailAssetEntryAdded");
      validateEmailFrom(actionRequest);
      updateDisplaySettings(actionRequest);
      String selectionStyle=getParameter(actionRequest,"selectionStyle");
      if (selectionStyle.equals("dynamic")) {
        updateQueryLogic(actionRequest,preferences);
      }
      updateDefaultAssetPublisher(actionRequest);
      super.processAction(portletConfig,actionRequest,actionResponse);
    }
 catch (    Exception e) {
      if (e instanceof AssetTagException || e instanceof DuplicateQueryRuleException) {
        SessionErrors.add(actionRequest,e.getClass(),e);
      }
 else {
        throw e;
      }
    }
  }
 else {
    if (cmd.equals("add-scope")) {
      addScope(actionRequest,preferences);
    }
 else     if (cmd.equals("add-selection")) {
      AssetPublisherUtil.addSelection(actionRequest,preferences,portletResource);
    }
 else     if (cmd.equals("move-selection-down")) {
      moveSelectionDown(actionRequest,preferences);
    }
 else     if (cmd.equals("move-selection-up")) {
      moveSelectionUp(actionRequest,preferences);
    }
 else     if (cmd.equals("remove-selection")) {
      removeSelection(actionRequest,preferences);
    }
 else     if (cmd.equals("remove-scope")) {
      removeScope(actionRequest,preferences);
    }
 else     if (cmd.equals("select-scope")) {
      setScopes(actionRequest,preferences);
    }
 else     if (cmd.equals("selection-style")) {
      setSelectionStyle(actionRequest,preferences);
    }
    if (SessionErrors.isEmpty(actionRequest)) {
      preferences.store();
      SessionMessages.add(actionRequest,PortalUtil.getPortletId(actionRequest) + SessionMessages.KEY_SUFFIX_REFRESH_PORTLET,portletResource);
      SessionMessages.add(actionRequest,PortalUtil.getPortletId(actionRequest) + SessionMessages.KEY_SUFFIX_UPDATED_CONFIGURATION);
    }
    String redirect=PortalUtil.escapeRedirect(ParamUtil.getString(actionRequest,"redirect"));
    if (Validator.isNotNull(redirect)) {
      actionResponse.sendRedirect(redirect);
    }
  }
}
