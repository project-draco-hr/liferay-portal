{
  try {
    String returnToFullPageURL=ParamUtil.getString(portletRequest,"returnToFullPageURL");
    PortletURL portletURL=PortletProviderUtil.getPortletURL(portletRequest,PortletConfigurationApplicationType.PortletConfiguration.CLASS_NAME,PortletProvider.Action.VIEW);
    portletURL.setParameter("mvcPath","/edit_permissions.jsp");
    portletURL.setParameter("returnToFullPageURL",returnToFullPageURL);
    portletURL.setParameter("portletConfiguration",Boolean.TRUE.toString());
    portletURL.setParameter("portletResource",portletDisplay.getId());
    portletURL.setParameter("resourcePrimKey",PortletPermissionUtil.getPrimaryKey(themeDisplay.getPlid(),portletDisplay.getId()));
    portletURL.setWindowState(LiferayWindowState.POP_UP);
    return portletURL.toString();
  }
 catch (  Exception e) {
  }
  return StringPool.BLANK;
}
