{
  String proxyHost=GetterUtil.getString(SystemProperties.get("http.proxyHost"));
  int proxyPort=GetterUtil.getInteger(SystemProperties.get("http.proxyPort"));
  if (Validator.isNull(proxyHost) || Validator.isNull(proxyPort)) {
    return;
  }
  clientConfiguration.setProxyHost(proxyHost);
  clientConfiguration.setProxyPort(proxyPort);
  String proxyAuthType=GetterUtil.getString(PropsUtil.get("com.liferay.portal.util.HttpImpl.proxy.auth.type"));
  String proxyPassword=GetterUtil.getString(PropsUtil.get("com.liferay.portal.util.HttpImpl.proxy.password"));
  String proxyUsername=GetterUtil.getString(PropsUtil.get("com.liferay.portal.util.HttpImpl.proxy.username"));
  String ntlmProxyDomain=GetterUtil.getString(PropsUtil.get("com.liferay.portal.util.HttpImpl.proxy.ntlm.domain"));
  String ntlmProxyHost=GetterUtil.getString(PropsUtil.get("com.liferay.portal.util.HttpImpl.proxy.ntlm.host"));
  if ((proxyAuthType != null) && proxyAuthType.equals("username-password") && (proxyPassword != null)&& (proxyUsername != null)) {
    clientConfiguration.setProxyPassword(proxyPassword);
    clientConfiguration.setProxyUsername(proxyUsername);
  }
 else   if ((proxyAuthType != null) && proxyAuthType.equals("ntlm") && (proxyPassword != null)&& (proxyUsername != null)&& (ntlmProxyDomain != null)&& (ntlmProxyHost != null)) {
    clientConfiguration.setProxyDomain(ntlmProxyDomain);
    clientConfiguration.setProxyWorkstation(ntlmProxyHost);
    clientConfiguration.setProxyPassword(proxyPassword);
    clientConfiguration.setProxyUsername(proxyUsername);
  }
}
