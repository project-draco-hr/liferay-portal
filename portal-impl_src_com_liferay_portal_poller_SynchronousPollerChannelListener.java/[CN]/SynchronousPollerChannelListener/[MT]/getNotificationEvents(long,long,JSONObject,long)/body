{
  try {
    if (!_complete) {
      this.wait(timeout);
    }
  }
 catch (  InterruptedException ie) {
  }
  List<NotificationEvent> notificationEvents=ChannelHubManagerUtil.fetchNotificationEvents(companyId,userId,true);
  JSONArray jsonArray=JSONFactoryUtil.createJSONArray();
  jsonArray.put(pollerResponseHeaderJSONObject);
  for (  NotificationEvent notificationEvent : notificationEvents) {
    jsonArray.put(notificationEvent.toJSONObject());
  }
  return jsonArray.toString();
}
