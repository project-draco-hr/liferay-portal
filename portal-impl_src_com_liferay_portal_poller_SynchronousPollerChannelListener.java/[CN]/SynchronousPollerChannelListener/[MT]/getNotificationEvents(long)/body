{
  try {
    if (!_complete) {
      this.wait(timeout);
    }
  }
 catch (  InterruptedException ie) {
  }
  try {
    Thread.sleep(PropsValues.POLLER_NOTIFICATIONS_TIMEOUT);
  }
 catch (  InterruptedException ie) {
  }
  List<NotificationEvent> notificationEvents=ChannelHubManagerUtil.fetchNotificationEvents(_companyId,_userId,true);
  JSONArray jsonArray=JSONFactoryUtil.createJSONArray();
  jsonArray.put(_pollerResponseHeaderJSONObject);
  for (  NotificationEvent notificationEvent : notificationEvents) {
    jsonArray.put(notificationEvent.toJSONObject());
  }
  return jsonArray.toString();
}
