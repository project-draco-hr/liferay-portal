{
  FreeMarkerContext freeMarkerContext=FreeMarkerEngineUtil.getWrappedRestrictedToolsContext();
  Map<String,Object> fieldContext=getFieldContext(dynamicElementElement,locale);
  Map<String,Object> parentFieldContext=new HashMap<String,Object>();
  Element parentElement=dynamicElementElement.getParent();
  if (parentElement != null) {
    parentFieldContext=getFieldContext(parentElement,locale);
  }
  freeMarkerContext.put("field",fieldContext);
  freeMarkerContext.put("parentField",parentFieldContext);
  return freeMarkerContext;
}
