{
  Map<String,Object> scriptOutputObjects=new HashMap<String,Object>();
  try {
    Context context=Context.enter();
    Scriptable scope=context.initStandardObjects();
    for (    String varName : inputObjects.keySet()) {
      ScriptableObject.putProperty(scope,varName,Context.javaToJS(inputObjects.get(varName),scope));
    }
    compiledScript.exec(context,scope);
    for (    String outputObjectName : outputObjectNames) {
      scriptOutputObjects.put(outputObjectName,ScriptableObject.getProperty(scope,outputObjectName));
    }
  }
 catch (  Exception e) {
    StringBuilder sb=new StringBuilder();
    sb.append(e.getMessage());
    sb.append("\n\n");
    throw new ScriptExecutionException(sb.toString(),e);
  }
 finally {
    Context.exit();
  }
  return scriptOutputObjects;
}
