{
  Object response=MessageBusUtil.sendSynchronousMessage(DestinationNames.IP_GEOCODER,ipAddress);
  if (!(response instanceof JSONObject)) {
    return null;
  }
  JSONObject ipInfoJSON=(JSONObject)response;
  if (ipInfoJSON == null) {
    return null;
  }
  String city=GetterUtil.getString(ipInfoJSON.getString("city"));
  String countryName=GetterUtil.getString(ipInfoJSON.getString("countryName"));
  String countryCode=GetterUtil.getString(ipInfoJSON.getString("countryCode"));
  float latitude=GetterUtil.getFloat(ipInfoJSON.getString("latitude"));
  float longitude=GetterUtil.getFloat(ipInfoJSON.getString("longitude"));
  String postalCode=GetterUtil.getString(ipInfoJSON.getString("postalCode"));
  String region=GetterUtil.getString(ipInfoJSON.getString("region"));
  IPInfo ipInfo=new IPInfo();
  ipInfo.setCity(city);
  ipInfo.setCountryCode(countryCode);
  ipInfo.setCountryName(countryName);
  ipInfo.setIpAddress(ipAddress);
  ipInfo.setLatitude(latitude);
  ipInfo.setLongitude(longitude);
  ipInfo.setPostalCode(postalCode);
  ipInfo.setRegion(region);
  return ipInfo;
}
