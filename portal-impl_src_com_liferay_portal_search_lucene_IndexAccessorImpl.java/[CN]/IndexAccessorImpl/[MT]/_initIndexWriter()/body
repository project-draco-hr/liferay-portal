{
  try {
    Analyzer analyzer=new LimitTokenCountAnalyzer(LuceneHelperUtil.getAnalyzer(),PropsValues.LUCENE_ANALYZER_MAX_TOKENS);
    IndexWriterConfig indexWriterConfig=new IndexWriterConfig(LuceneHelperUtil.getVersion(),analyzer);
    indexWriterConfig.setIndexDeletionPolicy(_dumpIndexDeletionPolicy);
    indexWriterConfig.setMergePolicy(_getMergePolicy());
    indexWriterConfig.setMergeScheduler(_getMergeScheduler());
    indexWriterConfig.setRAMBufferSizeMB(PropsValues.LUCENE_BUFFER_SIZE);
    _indexWriter=new IndexWriter(getLuceneDir(),indexWriterConfig);
    if (!IndexReader.indexExists(getLuceneDir())) {
      if (_log.isDebugEnabled()) {
        _log.debug("Creating missing index");
      }
      _doCommit();
    }
  }
 catch (  Exception e) {
    _log.error("Initializing Lucene writer failed for " + _companyId,e);
  }
}
