{
synchronized (IndexWriter.class) {
    BooleanQuery booleanQuery=new BooleanQuery();
    LuceneUtil.addRequiredTerm(booleanQuery,LuceneFields.PORTLET_ID,PORTLET_ID);
    LuceneUtil.addRequiredTerm(booleanQuery,"nodeId",nodeId);
    Searcher searcher=LuceneUtil.getSearcher(companyId);
    QueryParser queryParser=new QueryParser(LuceneFields.CONTENT,LuceneUtil.getAnalyzer());
    Query query=queryParser.parse(booleanQuery.toString());
    Hits hits=searcher.search(query);
    if (hits.length() > 0) {
      IndexReader reader=LuceneUtil.getReader(companyId);
      for (int i=0; i < hits.length(); i++) {
        Document doc=hits.doc(i);
        Field field=doc.getField(LuceneFields.UID);
        reader.deleteDocuments(new Term(LuceneFields.UID,field.stringValue()));
      }
      reader.close();
    }
  }
}
