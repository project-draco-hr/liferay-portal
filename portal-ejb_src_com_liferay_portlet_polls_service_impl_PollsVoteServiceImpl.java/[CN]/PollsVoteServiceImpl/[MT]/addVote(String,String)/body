{
  String userId=null;
  try {
    userId=getUserId();
  }
 catch (  PrincipalException pe) {
    userId=Long.toString(CounterLocalServiceUtil.increment(PollsQuestion.class.getName() + ".anonymous"));
  }
  PollsQuestionPermission.check(getPermissionChecker(),questionId,ActionKeys.ADD_VOTE);
  return PollsVoteLocalServiceUtil.addVote(userId,questionId,choiceId);
}
