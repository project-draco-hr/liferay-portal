{
  long newFolderId=ParamUtil.getLong(actionRequest,"newFolderId");
  long[] folderIds=StringUtil.split(ParamUtil.getString(actionRequest,"folderIds"),0L);
  ServiceContext serviceContext=ServiceContextFactory.getInstance(JournalArticle.class.getName(),actionRequest);
  for (  long folderId : folderIds) {
    JournalFolderServiceUtil.moveFolder(folderId,newFolderId,serviceContext);
  }
  List<String> invalidArticleIds=new ArrayList<String>();
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  String[] articleIds=StringUtil.split(ParamUtil.getString(actionRequest,"articleIds"));
  for (  String articleId : articleIds) {
    try {
      JournalArticleServiceUtil.moveArticle(themeDisplay.getScopeGroupId(),HtmlUtil.unescape(articleId),newFolderId);
    }
 catch (    InvalidDDMStructureException idse) {
      invalidArticleIds.add(articleId);
    }
  }
  if (!invalidArticleIds.isEmpty()) {
    throw new InvalidDDMStructureException();
  }
}
