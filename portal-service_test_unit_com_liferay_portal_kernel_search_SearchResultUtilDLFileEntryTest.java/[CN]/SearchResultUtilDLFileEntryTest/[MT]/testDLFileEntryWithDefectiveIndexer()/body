{
  Indexer indexer=Mockito.mock(Indexer.class);
  Mockito.doThrow(IllegalArgumentException.class).when(indexer).getSummary((Document)Matchers.any(),Matchers.anyString(),(PortletURL)Matchers.any(),(PortletRequest)Matchers.any(),(PortletResponse)Matchers.any());
  stub(method(IndexerRegistryUtil.class,"getIndexer",String.class)).toReturn(indexer);
  when(_dlAppLocalService.getFileEntry(SearchTestUtil.ENTRY_CLASS_PK)).thenReturn(_fileEntry);
  Document document=SearchTestUtil.createAttachmentDocument(_DL_FILEENTRY_CLASS_NAME);
  String snippet=RandomTestUtil.randomString();
  document.add(new Field(Field.SNIPPET,snippet));
  SearchResult searchResult=assertOneSearchResult(document);
  Assert.assertEquals(SearchTestUtil.ATTACHMENT_OWNER_CLASS_NAME,searchResult.getClassName());
  Assert.assertEquals(SearchTestUtil.ATTACHMENT_OWNER_CLASS_PK,searchResult.getClassPK());
  Assert.assertNull(searchResult.getSummary());
  verifyStatic();
  IndexerRegistryUtil.getIndexer(_DL_FILEENTRY_CLASS_NAME);
  Mockito.verify(indexer).getSummary(document,snippet,portletURL,null,null);
  assertEmptyFileEntryTuples(searchResult);
  Mockito.verify(_dlAppLocalService).getFileEntry(SearchTestUtil.ENTRY_CLASS_PK);
  assertEmptyMBMessages(searchResult);
  assertEmptyVersions(searchResult);
}
