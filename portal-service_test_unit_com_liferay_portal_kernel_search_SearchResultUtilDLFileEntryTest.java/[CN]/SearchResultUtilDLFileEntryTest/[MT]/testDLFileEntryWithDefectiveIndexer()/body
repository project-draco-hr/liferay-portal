{
  Indexer indexer=Mockito.mock(Indexer.class);
  Mockito.doThrow(IllegalArgumentException.class).when(indexer).getSummary((Document)Matchers.any(),Matchers.anyString(),(PortletURL)Matchers.any(),(PortletRequest)Matchers.any(),(PortletResponse)Matchers.any());
  stub(method(IndexerRegistryUtil.class,"getIndexer",String.class)).toReturn(indexer);
  when(dlAppLocalService.getFileEntry(ENTRY_CLASS_PK)).thenReturn(fileEntry);
  Document document=createDLFileEntryDocumentWithAlternateKey();
  document.add(new Field(Field.SNIPPET,"__snippet__"));
  searchSingleDocument(document);
  Assert.assertEquals(DOCUMENT_CLASS_NAME,result.getClassName());
  Assert.assertEquals(DOCUMENT_CLASS_PK,result.getClassPK());
  Assert.assertNull("Indexer is attempted, exception is discarded, no summary returned",result.getSummary());
  verifyStatic();
  IndexerRegistryUtil.getIndexer(DLFILEENTRY_CLASS_NAME);
  Mockito.verify(indexer).getSummary(document,"__snippet__",portletURL,null,null);
  Assert.assertThat("no file entry tuples even though a FileEntry was found",result.getFileEntryTuples(),IsEmptyCollection.empty());
  Mockito.verify(dlAppLocalService).getFileEntry(ENTRY_CLASS_PK);
  assertThatEverythingUnrelatedIsEmpty();
}
