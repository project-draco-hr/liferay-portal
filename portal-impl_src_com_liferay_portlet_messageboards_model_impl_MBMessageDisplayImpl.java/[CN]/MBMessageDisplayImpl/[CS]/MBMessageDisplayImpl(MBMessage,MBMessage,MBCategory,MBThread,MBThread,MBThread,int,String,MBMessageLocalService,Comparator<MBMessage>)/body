{
  _message=message;
  _parentMessage=parentMessage;
  _category=category;
  _thread=thread;
  if (!threadView.equals(MBThreadConstants.THREAD_VIEW_FLAT)) {
    _treeWalker=new MBTreeWalkerImpl(message.getThreadId(),status,messageLocalService,comparator);
  }
 else {
    _treeWalker=null;
  }
  _previousThread=previousThread;
  _nextThread=nextThread;
  _threadView=threadView;
  boolean messageLimit=false;
  if (message.isDiscussion() && (PropsValues.DISCUSSION_COMMENTS_LIMIT > 0)) {
    int count=messageLocalService.getDiscussionMessagesCount(message.getClassName(),message.getClassPK(),WorkflowConstants.STATUS_APPROVED);
    if (count >= PropsValues.DISCUSSION_COMMENTS_LIMIT) {
      messageLimit=true;
    }
  }
  _messageLimit=messageLimit;
}
