{
  _message=message;
  _parentMessage=parentMessage;
  _category=category;
  _thread=thread;
  if (!threadView.equals(MBThreadConstants.THREAD_VIEW_FLAT)) {
    _treeWalker=new MBTreeWalkerImpl(message.getThreadId(),status,messageLocalService,comparator);
  }
 else {
    _treeWalker=null;
  }
  _previousThread=previousThread;
  _nextThread=nextThread;
  _threadView=threadView;
  boolean maxMessageCountReached=false;
  if (message.isDiscussion()) {
    int discussionMessagesCount=messageLocalService.getDiscussionMessagesCount(message.getClassName(),message.getClassPK(),WorkflowConstants.STATUS_APPROVED);
    if ((PropsValues.DISCUSSION_COMMENTS_MAX_NUMBER > 0) && (discussionMessagesCount >= PropsValues.DISCUSSION_COMMENTS_MAX_NUMBER)) {
      maxMessageCountReached=true;
    }
  }
  _maxMessageCountReached=maxMessageCountReached;
}
