{
  _message=message;
  _parentMessage=parentMessage;
  _category=category;
  _thread=thread;
  if (!threadView.equals(MBThreadConstants.THREAD_VIEW_FLAT)) {
    _treeWalker=new MBTreeWalkerImpl(message.getThreadId(),status,messageLocalService,comparator);
  }
 else {
    _treeWalker=null;
  }
  _previousThread=previousThread;
  _nextThread=nextThread;
  _threadView=threadView;
  int dicussionMessagesCount=0;
  if (message.isDiscussion() && (PropsValues.DISCUSSION_MAX_COMMENTS > 0)) {
    dicussionMessagesCount=messageLocalService.getDiscussionMessagesCount(message.getClassName(),message.getClassPK(),WorkflowConstants.STATUS_APPROVED);
  }
  _discussionMessagesCount=dicussionMessagesCount;
}
