{
  if (assignmentsElement == null) {
    return Collections.emptySet();
  }
  Set<Assignment> assignments=new HashSet<>();
  Element resourceActionsElement=assignmentsElement.element("resource-actions");
  if (resourceActionsElement != null) {
    List<Element> resourceActionElements=resourceActionsElement.elements("resource-action");
    for (    Element resourceActionElement : resourceActionElements) {
      String actionId=resourceActionElement.getText();
      if (Validator.isNotNull(actionId)) {
        ResourceActionAssignment resourceActionAssignment=new ResourceActionAssignment(actionId);
        assignments.add(resourceActionAssignment);
      }
    }
  }
  Element rolesElement=assignmentsElement.element("roles");
  if (rolesElement != null) {
    List<Element> roleAssignmentElements=rolesElement.elements("role");
    for (    Element roleAssignmentElement : roleAssignmentElements) {
      long roleId=GetterUtil.getLong(roleAssignmentElement.elementText("role-id"));
      String roleType=roleAssignmentElement.elementText("role-type");
      String name=roleAssignmentElement.elementText("name");
      RoleAssignment roleAssignment=null;
      if (Validator.isNotNull(name)) {
        roleAssignment=new RoleAssignment(name,roleType);
        boolean autoCreate=GetterUtil.getBoolean(roleAssignmentElement.elementText("auto-create"),true);
        roleAssignment.setAutoCreate(autoCreate);
      }
 else {
        roleAssignment=new RoleAssignment(roleId);
      }
      assignments.add(roleAssignment);
    }
  }
  List<Element> scriptedAssignmentElements=assignmentsElement.elements("scripted-assignment");
  for (  Element scriptedAssignmentElement : scriptedAssignmentElements) {
    String script=scriptedAssignmentElement.elementText("script");
    String scriptLanguage=scriptedAssignmentElement.elementText("script-language");
    String scriptRequiredContexts=scriptedAssignmentElement.elementText("script-required-contexts");
    ScriptAssignment scriptAssignment=new ScriptAssignment(script,scriptLanguage,scriptRequiredContexts);
    assignments.add(scriptAssignment);
  }
  List<Element> userAssignmentElements=assignmentsElement.elements("user");
  for (  Element userAssignmentElement : userAssignmentElements) {
    long userId=GetterUtil.getLong(userAssignmentElement.elementText("user-id"));
    String screenName=userAssignmentElement.elementText("screen-name");
    String emailAddress=userAssignmentElement.elementText("email-address");
    UserAssignment userAssignment=new UserAssignment(userId,screenName,emailAddress);
    assignments.add(userAssignment);
  }
  return assignments;
}
