{
  Map<ThreadLocal<?>,Object> threadLocals=_getThreadLocals();
  T value=(T)threadLocals.get(this);
  if (value == _nullHolder) {
    return null;
  }
  if (value == null) {
    value=initialValue();
    if (value == null) {
      threadLocals.put(this,_nullHolder);
    }
 else {
      threadLocals.put(this,value);
    }
  }
  return value;
}
