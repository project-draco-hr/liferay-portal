{
  long companyId=portlet.getCompanyId();
  String rootPortletId=portlet.getRootPortletId();
  List<String> modelResources=new ArrayList<>();
  modelResources.add(ResourceActionsUtil.getPortletRootModelResource(rootPortletId));
  modelResources.addAll(ResourceActionsUtil.getPortletModelResources(rootPortletId));
  for (  String modelResource : modelResources) {
    if (Validator.isBlank(modelResource)) {
      continue;
    }
    boolean resourcePermissionUnsupported=resourceBlockLocalService.isSupported(modelResource);
    if (resourcePermissionUnsupported) {
      continue;
    }
    int count=resourcePermissionLocalService.getResourcePermissionsCount(companyId,modelResource,ResourceConstants.SCOPE_INDIVIDUAL,modelResource);
    if (count > 0) {
      continue;
    }
    resourceLocalService.addResources(companyId,0,0,modelResource,modelResource,false,false,true);
  }
}
