{
  PortletApp portletApp=portlet.getPortletApp();
  ServletContext servletContext=portletApp.getServletContext();
  ClassLoader classLoader=servletContext.getClassLoader();
  Configuration configuration=_propertiesConfigurations.get(classLoader);
  if (configuration == null) {
    String propertyFileName="portal";
    if (portletApp.isWARFile()) {
      propertyFileName="portlet";
    }
    configuration=ConfigurationFactoryUtil.getConfiguration(classLoader,propertyFileName);
    _propertiesConfigurations.put(classLoader,configuration);
  }
  return configuration.get(propertyKey);
}
