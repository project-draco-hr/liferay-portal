{
  List<CustomAttributesDisplay> customAttributesDisplays=new ArrayList<CustomAttributesDisplay>();
  for (  Portlet portlet : getPortlets()) {
    if (!portlet.isActive() || !portlet.isInclude() || !portlet.isReady()|| portlet.isUndeployedPortlet()) {
      continue;
    }
    List<CustomAttributesDisplay> portletCustomAttributesDisplays=portlet.getCustomAttributesDisplayInstances();
    if ((portletCustomAttributesDisplays != null) && !portletCustomAttributesDisplays.isEmpty()) {
      customAttributesDisplays.addAll(portletCustomAttributesDisplays);
    }
  }
  return customAttributesDisplays;
}
