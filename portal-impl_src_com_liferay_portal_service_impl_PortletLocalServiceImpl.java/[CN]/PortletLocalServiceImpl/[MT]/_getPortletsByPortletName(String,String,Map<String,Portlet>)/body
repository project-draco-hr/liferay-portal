{
  int pos=portletName.indexOf(CharPool.STAR);
  if (pos == -1) {
    String portletId=portletName;
    if (Validator.isNotNull(servletContextName)) {
      portletId=portletId + PortletConstants.WAR_SEPARATOR + servletContextName;
    }
    portletId=PortalUtil.getJsSafePortletId(portletId);
    Portlet portlet=portletsMap.get(portletId);
    if (portlet == null) {
      return Collections.emptyList();
    }
    return Collections.singletonList(portlet);
  }
  String portletNamePrefix=portletName.substring(0,pos);
  List<Portlet> portlets=_getPortletsByServletContextName(servletContextName,portletsMap);
  Iterator<Portlet> itr=portlets.iterator();
  while (itr.hasNext()) {
    Portlet portlet=itr.next();
    String portletId=portlet.getPortletId();
    if (!portletId.startsWith(portletNamePrefix)) {
      itr.remove();
    }
  }
  return portlets;
}
