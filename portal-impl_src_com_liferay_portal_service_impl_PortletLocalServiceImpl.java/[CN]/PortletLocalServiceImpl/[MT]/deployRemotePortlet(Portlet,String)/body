{
  Map<String,Portlet> portletsPool=_getPortletsPool();
  portletsPool.put(portlet.getPortletId(),portlet);
  PortletInstanceFactoryUtil.clear(portlet,false);
  PortletConfigFactoryUtil.destroy(portlet);
  PortletContextFactory.destroy(portlet);
  clearCache();
  PortletCategory newPortletCategory=new PortletCategory();
  PortletCategory oldPortletCategory=new PortletCategory(categoryName);
  newPortletCategory.addCategory(oldPortletCategory);
  oldPortletCategory.getPortletIds().add(portlet.getPortletId());
  long companyId=portlet.getCompanyId();
  PortletCategory portletCategory=(PortletCategory)WebAppPool.get(String.valueOf(companyId),WebKeys.PORTLET_CATEGORY);
  if (portletCategory != null) {
    portletCategory.merge(newPortletCategory);
  }
 else {
    _log.error("Unable to register remote portlet for company " + companyId + " because it does not exist");
  }
  List<String> portletActions=ResourceActionsUtil.getPortletResourceActions(portlet.getPortletId());
  resourceActionLocalService.checkResourceActions(portlet.getPortletId(),portletActions);
  return portlet;
}
