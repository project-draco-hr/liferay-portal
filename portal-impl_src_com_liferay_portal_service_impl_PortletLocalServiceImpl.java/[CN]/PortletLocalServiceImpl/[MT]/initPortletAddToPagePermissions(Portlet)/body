{
  if (portlet.isSystem()) {
    return;
  }
  String[] roleNames=portlet.getRolesArray();
  if (roleNames.length == 0) {
    return;
  }
  List<String> actionIds=ResourceActionsUtil.getPortletResourceActions(portlet.getRootPortletId());
  String actionId=ActionKeys.ADD_TO_PAGE;
  if (actionIds.contains(actionId)) {
    for (    String roleName : roleNames) {
      Role role=roleLocalService.getRole(portlet.getCompanyId(),roleName);
      resourcePermissionLocalService.addResourcePermission(portlet.getCompanyId(),portlet.getRootPortletId(),ResourceConstants.SCOPE_COMPANY,String.valueOf(portlet.getCompanyId()),role.getRoleId(),actionId);
    }
  }
  updatePortlet(portlet.getCompanyId(),portlet.getPortletId(),StringPool.BLANK,portlet.isActive());
}
