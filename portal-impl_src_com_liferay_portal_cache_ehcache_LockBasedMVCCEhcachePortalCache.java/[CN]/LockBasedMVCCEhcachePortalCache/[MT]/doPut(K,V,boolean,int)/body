{
  Element newElement=null;
  if (timeToLive >= 0) {
    newElement=new Element(key,value,timeToLive);
  }
 else {
    newElement=new Element(key,value);
  }
  Ehcache ehcache=getEhcache();
  ehcache.acquireWriteLockOnKey(key);
  try {
    Element oldElement=ehcache.get(key);
    if (oldElement == null) {
      ehcache.put(newElement,quiet);
      return;
    }
    V oldValue=(V)oldElement.getObjectValue();
    if ((oldValue != null) && (value.getMvccVersion() <= oldValue.getMvccVersion())) {
      return;
    }
    ehcache.put(newElement,quiet);
  }
  finally {
    ehcache.releaseWriteLockOnKey(key);
  }
}
