{
  if (lifecycle.equals(PortletRequest.ACTION_PHASE)) {
    ActionRequest actionRequest=(ActionRequest)portletRequest;
    ActionResponse actionResponse=(ActionResponse)portletResponse;
    filterChain.doFilter(actionRequest,actionResponse);
    if (ParamUtil.getBoolean(actionRequest,"wsrp")) {
      actionResponse.setRenderParameter("wsrp","1");
    }
  }
 else   if (lifecycle.equals(PortletRequest.EVENT_PHASE)) {
    EventRequest eventRequest=(EventRequest)portletRequest;
    EventResponse eventResponse=(EventResponse)portletResponse;
    filterChain.doFilter(eventRequest,eventResponse);
  }
 else   if (lifecycle.equals(PortletRequest.RENDER_PHASE)) {
    RenderRequest renderRequest=(RenderRequest)portletRequest;
    RenderResponse renderResponse=(RenderResponse)portletResponse;
    filterChain.doFilter(renderRequest,renderResponse);
  }
 else   if (lifecycle.equals(PortletRequest.RESOURCE_PHASE)) {
    ResourceRequest resourceRequest=(ResourceRequest)portletRequest;
    ResourceResponse resourceResponse=(ResourceResponse)portletResponse;
    filterChain.doFilter(resourceRequest,resourceResponse);
  }
}
