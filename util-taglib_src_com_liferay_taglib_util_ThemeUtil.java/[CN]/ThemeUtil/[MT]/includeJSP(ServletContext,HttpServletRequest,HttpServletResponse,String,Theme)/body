{
  String tilesTitle=_getTilesVariables(request,"title");
  String tilesContent=_getTilesVariables(request,"content");
  boolean tilesSelectable=GetterUtil.getBoolean(_getTilesVariables(request,"selectable"));
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  themeDisplay.setTilesTitle(tilesTitle);
  themeDisplay.setTilesContent(tilesContent);
  themeDisplay.setTilesSelectable(tilesSelectable);
  if (theme.isWARFile()) {
    ServletContext themeServletContext=servletContext.getContext(theme.getContextPath());
    if (themeServletContext == null) {
      _log.error("Theme " + theme.getThemeId() + " cannot find its "+ "servlet context at "+ theme.getServletContextName());
    }
 else {
      RequestDispatcher requestDispatcher=themeServletContext.getRequestDispatcher(path);
      if (requestDispatcher == null) {
        _log.error("Theme " + theme.getThemeId() + " does not have "+ path);
      }
 else {
        requestDispatcher.include(request,response);
      }
    }
  }
 else {
    RequestDispatcher requestDispatcher=servletContext.getRequestDispatcher(path);
    if (requestDispatcher == null) {
      _log.error("Theme " + theme.getThemeId() + " does not have "+ path);
    }
 else {
      requestDispatcher.include(request,response);
    }
  }
}
