{
  String tilesTitle=_getTilesVariables(request,"title");
  String tilesContent=_getTilesVariables(request,"content");
  boolean tilesSelectable=GetterUtil.getBoolean(_getTilesVariables(request,"selectable"));
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  themeDisplay.setTilesTitle(tilesTitle);
  themeDisplay.setTilesContent(tilesContent);
  themeDisplay.setTilesSelectable(tilesSelectable);
  if (theme.isWARFile()) {
    ServletContext themeCtx=ctx.getContext(theme.getContextPath());
    if (themeCtx == null) {
      _log.error("Theme " + theme.getThemeId() + " cannot find its "+ "servlet context at "+ theme.getServletContextName());
    }
 else {
      RequestDispatcher rd=themeCtx.getRequestDispatcher(path);
      if (rd == null) {
        _log.error("Theme " + theme.getThemeId() + " does not have "+ path);
      }
 else {
        rd.include(request,response);
      }
    }
  }
 else {
    RequestDispatcher rd=ctx.getRequestDispatcher(path);
    if (rd == null) {
      _log.error("Theme " + theme.getThemeId() + " does not have "+ path);
    }
 else {
      rd.include(request,response);
    }
  }
}
