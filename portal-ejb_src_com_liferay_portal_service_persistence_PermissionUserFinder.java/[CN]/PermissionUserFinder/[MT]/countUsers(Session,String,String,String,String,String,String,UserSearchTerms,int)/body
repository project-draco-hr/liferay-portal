{
  sql=CustomSQLUtil.replaceAndOperator(sql,searchTerms.isAndOperator());
  SQLQuery q=session.createSQLQuery(sql);
  q.addScalar(HibernateUtil.getCountColumnName(),Hibernate.LONG);
  QueryPos qPos=QueryPos.getInstance(q);
  qPos.add(companyId);
  if (countUsersType != COUNT_USERS_TYPE_ADMIN) {
    qPos.add(name);
    if (countUsersType == COUNT_USERS_TYPE_PERMISSION) {
      qPos.add(primKey);
    }
 else     if (countUsersType == COUNT_USERS_TYPE_ROLE) {
      qPos.add(companyId);
      qPos.add(groupId);
    }
    qPos.add(actionId);
  }
  qPos.add(searchTerms.getFirstName());
  qPos.add(searchTerms.getFirstName());
  qPos.add(searchTerms.getMiddleName());
  qPos.add(searchTerms.getMiddleName());
  qPos.add(searchTerms.getLastName());
  qPos.add(searchTerms.getLastName());
  qPos.add(searchTerms.getEmailAddress());
  qPos.add(searchTerms.getEmailAddress());
  Iterator itr=q.list().iterator();
  if (itr.hasNext()) {
    Long count=(Long)itr.next();
    if (count != null) {
      return count.intValue();
    }
  }
  return 0;
}
