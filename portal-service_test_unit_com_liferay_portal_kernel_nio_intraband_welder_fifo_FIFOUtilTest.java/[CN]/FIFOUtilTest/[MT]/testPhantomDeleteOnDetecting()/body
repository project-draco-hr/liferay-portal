{
  if (!_shouldTest()) {
    return;
  }
  final AtomicInteger checkDeleteCount=new AtomicInteger();
  final AtomicBoolean checkFlag=new AtomicBoolean();
  try (SwappableSecurityManager swappableSecurityManager=new SwappableSecurityManager(){
    @Override public void checkDelete(    String fileName){
      if (!checkFlag.get() && fileName.contains("temp-fifo-")) {
        checkFlag.set(true);
        if (checkDeleteCount.getAndIncrement() == 0) {
          File file=new File(fileName);
          Assert.assertTrue(file.delete());
        }
        checkFlag.set(false);
      }
    }
    @Override public void checkRead(    String file){
      if (!checkFlag.get() && file.contains("temp-fifo-")) {
        try {
          checkFlag.set(true);
          new File(file).createNewFile();
          checkFlag.set(false);
        }
 catch (        IOException ioe) {
          ReflectionUtil.throwException(ioe);
        }
      }
    }
  }
){
    swappableSecurityManager.install();
    Assert.assertTrue(FIFOUtil.isFIFOSupported());
  }
   Assert.assertEquals(2,checkDeleteCount.get());
}
