{
  if ((_instrumentation == null) || _dynamicallyInstrumented) {
    return;
  }
  if (includes == null) {
    includes=_includes;
  }
  if (excludes == null) {
    excludes=_excludes;
  }
  if (_coberturaClassFileTransformer == null) {
    _coberturaClassFileTransformer=new CoberturaClassFileTransformer(includes,excludes);
  }
  _instrumentation.addTransformer(_coberturaClassFileTransformer,true);
  Class<?>[] allLoadedClasses=_instrumentation.getAllLoadedClasses();
  List<Class<?>> modifiableClasses=new ArrayList<Class<?>>();
  for (  Class<?> loadedClass : allLoadedClasses) {
    if (_instrumentation.isModifiableClass(loadedClass)) {
      String className=loadedClass.getName();
      className=className.replace('.','/');
      if (_coberturaClassFileTransformer.matches(className)) {
        modifiableClasses.add(loadedClass);
      }
    }
  }
  modifiableClasses.add(TouchCollector.class);
  _instrumentation.retransformClasses(modifiableClasses.toArray(new Class<?>[modifiableClasses.size()]));
  _dynamicallyInstrumented=true;
  _originalClassDefinitions=null;
  System.setProperty("junit.code.coverage","true");
}
