{
  setUpBlogsGroupServiceSettings();
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(_group.getGroupId(),TestPropsValues.getUserId());
  BlogsTestUtil.populateNotificationsServiceContext(serviceContext,Constants.ADD);
  BlogsEntry entry=BlogsEntryLocalServiceUtil.addEntry(TestPropsValues.getUserId(),RandomTestUtil.randomString(),RandomTestUtil.randomString(),serviceContext);
  BlogsEntryLocalServiceUtil.subscribe(_user.getUserId(),_group.getGroupId());
  BlogsTestUtil.populateNotificationsServiceContext(serviceContext,Constants.UPDATE);
  serviceContext.setAttribute("emailEntryUpdatedComment","This entry was updated.");
  serviceContext.setAttribute("sendEmailEntryUpdated",Boolean.TRUE.toString());
  BlogsEntryLocalServiceUtil.updateEntry(TestPropsValues.getUserId(),entry.getEntryId(),StringUtil.randomString(),StringUtil.randomString(),serviceContext);
  MailMessage message=MailServiceTestUtil.getLastMailMessage();
  Assert.assertEquals(message.getBody(),"This entry was updated.");
}
