{
  if (subjectPrincipal == null) {
    return null;
  }
  final List cns=new ArrayList();
  try {
    final LdapName subjectDN=new LdapName(subjectPrincipal);
    final List rdns=subjectDN.getRdns();
    for (int i=rdns.size() - 1; i >= 0; i--) {
      final Rdn rds=(Rdn)rdns.get(i);
      final Attributes attributes=rds.toAttributes();
      final Attribute cn=attributes.get("cn");
      if (cn != null) {
        try {
          final Object value=cn.get();
          if (value != null) {
            cns.add(value.toString());
          }
        }
 catch (        NamingException ignore) {
        }
      }
    }
  }
 catch (  InvalidNameException ignore) {
  }
  return cns.isEmpty() ? null : (String[])cns.toArray(new String[cns.size()]);
}
