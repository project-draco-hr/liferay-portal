{
  if (mOut == null) {
    return;
  }
  if (len < mSmallWriteSize) {
    if ((mOutputPtr + len) >= mOutputBufLen) {
      flushBuffer();
    }
    str.getChars(offset,offset + len,mOutputBuffer,mOutputPtr);
    mOutputPtr+=len;
    return;
  }
  int ptr=mOutputPtr;
  if (ptr > 0) {
    if (ptr < mSmallWriteSize) {
      int needed=(mSmallWriteSize - ptr);
      str.getChars(offset,offset + needed,mOutputBuffer,ptr);
      mOutputPtr=ptr + needed;
      len-=needed;
      offset+=needed;
    }
    flushBuffer();
  }
  mOut.write(str,offset,len);
}
