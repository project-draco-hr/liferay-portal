{
  final AsyncBroker<Long,T> asyncBroker=NettyChannelAttributes.getAsyncBroker(channel);
  final long id=NettyChannelAttributes.nextId(channel);
  final NoticeableFuture<T> noticeableFuture=asyncBroker.post(id);
  ChannelFuture channelFuture=channel.writeAndFlush(new RPCRequest<T>(id,rpcCallable));
  channelFuture.addListener(new ChannelFutureListener(){
    @Override public void operationComplete(    ChannelFuture channelFuture){
      if (channelFuture.isSuccess()) {
        return;
      }
      if (channelFuture.isCancelled()) {
        noticeableFuture.cancel(true);
        return;
      }
      if (!asyncBroker.takeWithException(id,channelFuture.cause())) {
        _log.error("Unable to place exception because no future " + "exists with ID " + id,channelFuture.cause());
      }
    }
  }
);
  return noticeableFuture;
}
