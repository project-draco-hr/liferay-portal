{
  long size=fileEntry.getSize();
  if (size > Integer.MAX_VALUE) {
    PortletResponseUtil.sendFile(resourceRequest,resourceResponse,fileEntry.getFileName(),fileEntry.getContentStream(),ContentTypes.APPLICATION_ZIP);
  }
 else {
    PortletResponseUtil.sendFile(resourceRequest,resourceResponse,fileEntry.getFileName(),fileEntry.getContentStream(),(int)size,fileEntry.getMimeType(),HttpHeaders.CONTENT_DISPOSITION_ATTACHMENT);
  }
}
