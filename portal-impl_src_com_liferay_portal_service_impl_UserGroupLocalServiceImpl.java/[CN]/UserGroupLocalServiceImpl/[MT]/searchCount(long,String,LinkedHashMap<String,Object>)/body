{
  if (!PropsValues.USER_GROUPS_INDEXER_ENABLED || !PropsValues.USER_GROUPS_SEARCH_WITH_INDEX) {
    return userGroupFinder.countByKeywords(companyId,keywords,params);
  }
  String name=null;
  String description=null;
  boolean andOperator=false;
  if (Validator.isNotNull(keywords)) {
    name=keywords;
    description=keywords;
  }
 else {
    andOperator=true;
  }
  if (params != null) {
    params.put("keywords",keywords);
  }
  try {
    Indexer indexer=IndexerRegistryUtil.nullSafeGetIndexer(UserGroup.class);
    SearchContext searchContext=buildSearchContext(companyId,name,description,params,andOperator,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
    Hits hits=indexer.search(searchContext);
    return hits.getLength();
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
