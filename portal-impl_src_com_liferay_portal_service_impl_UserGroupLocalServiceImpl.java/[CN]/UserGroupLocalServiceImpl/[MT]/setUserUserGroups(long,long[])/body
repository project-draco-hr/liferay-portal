{
  copyUserGroupLayouts(userGroupIds,userId);
  userPersistence.setUserGroups(userId,userGroupIds);
  try {
    UserIndexer.updateUsers(new long[]{userId});
  }
 catch (  SearchException se) {
    _log.error("Indexing " + userId,se);
  }
  PermissionCacheUtil.clearCache();
}
