{
  if (!CompanyThreadLocal.isDeleteInProcess()) {
    int count=userLocalService.getUserGroupUsersCount(userGroup.getUserGroupId(),WorkflowConstants.STATUS_APPROVED);
    if (count > 0) {
      throw new RequiredUserGroupException();
    }
  }
  expandoRowLocalService.deleteRows(userGroup.getUserGroupId());
  Group group=userGroup.getGroup();
  groupLocalService.deleteGroup(group);
  userGroupGroupRoleLocalService.deleteUserGroupGroupRolesByUserGroupId(userGroup.getUserGroupId());
  resourceLocalService.deleteResource(userGroup.getCompanyId(),UserGroup.class.getName(),ResourceConstants.SCOPE_INDIVIDUAL,userGroup.getUserGroupId());
  userGroupPersistence.remove(userGroup);
  return userGroup;
}
