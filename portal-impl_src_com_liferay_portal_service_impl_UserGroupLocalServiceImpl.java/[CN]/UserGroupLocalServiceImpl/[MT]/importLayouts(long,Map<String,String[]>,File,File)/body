{
  User user=userPersistence.findByPrimaryKey(userId);
  long groupId=user.getGroupId();
  if (privateLayoutsFile != null) {
    Map<String,Serializable> importLayoutSettingsMap=ExportImportConfigurationSettingsMapFactory.buildImportLayoutSettingsMap(user.getUserId(),groupId,true,null,parameterMap,user.getLocale(),user.getTimeZone());
    ExportImportConfiguration exportImportConfiguration=exportImportConfigurationLocalService.addExportImportConfiguration(user.getUserId(),groupId,StringPool.BLANK,StringPool.BLANK,ExportImportConfigurationConstants.TYPE_IMPORT_LAYOUT,importLayoutSettingsMap,WorkflowConstants.STATUS_DRAFT,new ServiceContext());
    exportImportLocalService.importLayouts(exportImportConfiguration,privateLayoutsFile);
  }
  if (publicLayoutsFile != null) {
    Map<String,Serializable> importLayoutSettingsMap=ExportImportConfigurationSettingsMapFactory.buildImportLayoutSettingsMap(user.getUserId(),groupId,false,null,parameterMap,user.getLocale(),user.getTimeZone());
    ExportImportConfiguration exportImportConfiguration=exportImportConfigurationLocalService.addExportImportConfiguration(user.getUserId(),groupId,StringPool.BLANK,StringPool.BLANK,ExportImportConfigurationConstants.TYPE_IMPORT_LAYOUT,importLayoutSettingsMap,WorkflowConstants.STATUS_DRAFT,new ServiceContext());
    exportImportLocalService.importLayouts(exportImportConfiguration,publicLayoutsFile);
  }
}
