{
  User user=userPersistence.findByPrimaryKey(userId);
  long groupId=user.getGroupId();
  if (privateLayoutsFile != null) {
    Map<String,Serializable> importLayoutSettingsMap=ExportImportConfigurationSettingsMapFactory.buildImportLayoutSettingsMap(user,groupId,true,null,parameterMap);
    ExportImportConfiguration exportImportConfiguration=exportImportConfigurationLocalService.addExportImportConfiguration(user.getUserId(),groupId,StringPool.BLANK,StringPool.BLANK,ExportImportConfigurationConstants.TYPE_IMPORT_LAYOUT,importLayoutSettingsMap,WorkflowConstants.STATUS_DRAFT,new ServiceContext());
    exportImportLocalService.importLayouts(exportImportConfiguration,privateLayoutsFile);
  }
  if (publicLayoutsFile != null) {
    Map<String,Serializable> importLayoutSettingsMap=ExportImportConfigurationSettingsMapFactory.buildImportLayoutSettingsMap(user,groupId,false,null,parameterMap);
    ExportImportConfiguration exportImportConfiguration=exportImportConfigurationLocalService.addExportImportConfiguration(user.getUserId(),groupId,StringPool.BLANK,StringPool.BLANK,ExportImportConfigurationConstants.TYPE_IMPORT_LAYOUT,importLayoutSettingsMap,WorkflowConstants.STATUS_DRAFT,new ServiceContext());
    exportImportLocalService.importLayouts(exportImportConfiguration,publicLayoutsFile);
  }
}
