{
  User user=userPersistence.findByPrimaryKey(userId);
  long groupId=user.getGroupId();
  if (privateLayoutsFile != null) {
    Map<String,Serializable> settingsMap=ExportImportConfigurationSettingsMapFactory.buildImportSettingsMap(user.getUserId(),groupId,true,null,parameterMap,Constants.IMPORT,user.getLocale(),user.getTimeZone(),privateLayoutsFile.getName());
    ExportImportConfiguration exportImportConfiguration=exportImportConfigurationLocalService.addExportImportConfiguration(user.getUserId(),groupId,StringPool.BLANK,StringPool.BLANK,ExportImportConfigurationConstants.TYPE_IMPORT_LAYOUT,settingsMap,WorkflowConstants.STATUS_DRAFT,new ServiceContext());
    layoutLocalService.importLayouts(exportImportConfiguration,privateLayoutsFile);
  }
  if (publicLayoutsFile != null) {
    Map<String,Serializable> settingsMap=ExportImportConfigurationSettingsMapFactory.buildImportSettingsMap(user.getUserId(),groupId,false,null,parameterMap,Constants.IMPORT,user.getLocale(),user.getTimeZone(),publicLayoutsFile.getName());
    ExportImportConfiguration exportImportConfiguration=exportImportConfigurationLocalService.addExportImportConfiguration(user.getUserId(),groupId,StringPool.BLANK,StringPool.BLANK,ExportImportConfigurationConstants.TYPE_IMPORT_LAYOUT,settingsMap,WorkflowConstants.STATUS_DRAFT,new ServiceContext());
    layoutLocalService.importLayouts(exportImportConfiguration,publicLayoutsFile);
  }
}
