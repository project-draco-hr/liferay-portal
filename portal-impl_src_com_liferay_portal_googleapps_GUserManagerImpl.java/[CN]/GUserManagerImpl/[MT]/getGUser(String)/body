{
  int pos=emailAddress.indexOf(StringPool.AT);
  if (pos == -1) {
    return null;
  }
  String nickname=emailAddress.substring(0,pos);
  if (Validator.isNumber(nickname)) {
    long userId=GetterUtil.getLong(nickname);
    return getGUser(userId);
  }
 else {
    try {
      User user=UserLocalServiceUtil.getUserByEmailAddress(getCompanyId(),emailAddress);
      return getGUser(user.getUserId());
    }
 catch (    Exception e) {
    }
    GNicknameManager gNicknameManager=googleApps.getGNicknameManager();
    GNickname gNickname=gNicknameManager.getGNickname(nickname);
    if (gNickname != null) {
      return getGUser(gNickname.getUserId());
    }
    return null;
  }
}
