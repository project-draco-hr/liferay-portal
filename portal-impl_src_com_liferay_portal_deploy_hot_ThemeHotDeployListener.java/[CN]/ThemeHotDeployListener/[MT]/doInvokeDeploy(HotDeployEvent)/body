{
  ServletContext servletContext=event.getServletContext();
  String servletContextName=servletContext.getServletContextName();
  if (_log.isDebugEnabled()) {
    _log.debug("Invoking deploy for " + servletContextName);
  }
  String[] xmls=new String[]{HttpUtil.URLtoString(servletContext.getResource("/WEB-INF/liferay-look-and-feel.xml"))};
  if (xmls[0] == null) {
    return;
  }
  if (_log.isInfoEnabled()) {
    _log.info("Registering themes for " + servletContextName);
  }
  ClassLoader portletClassLoader=event.getContextClassLoader();
  servletContext.setAttribute(PortletServlet.PORTLET_CLASS_LOADER,portletClassLoader);
  List<String> themeIds=ThemeLocalServiceUtil.init(servletContextName,servletContext,null,true,xmls,event.getPluginPackage());
  VelocityContextPool.put(servletContextName,servletContext);
  _vars.put(servletContextName,themeIds);
  if (_log.isInfoEnabled()) {
    _log.info("Themes for " + servletContextName + " registered successfully");
  }
}
