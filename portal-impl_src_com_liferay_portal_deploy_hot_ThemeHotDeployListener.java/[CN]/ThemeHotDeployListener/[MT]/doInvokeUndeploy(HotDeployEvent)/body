{
  ServletContext servletContext=event.getServletContext();
  String servletContextName=servletContext.getServletContextName();
  if (_log.isDebugEnabled()) {
    _log.debug("Invoking undeploy for " + servletContextName);
  }
  List<String> themeIds=_vars.remove(servletContextName);
  if (themeIds != null) {
    if (_log.isInfoEnabled()) {
      _log.info("Unregistering themes for " + servletContextName);
    }
    try {
      ThemeLocalServiceUtil.uninstallThemes(themeIds);
    }
 catch (    Exception e) {
      _log.error(e,e);
    }
  }
 else {
    return;
  }
  Thread currentThread=Thread.currentThread();
  ClassLoader contextClassLoader=currentThread.getContextClassLoader();
  try {
    currentThread.setContextClassLoader(PortalClassLoaderUtil.getClassLoader());
    VelocityContextPool.remove(servletContextName);
    LiferayResourceCacheUtil.clear();
  }
  finally {
    currentThread.setContextClassLoader(contextClassLoader);
  }
  if (_log.isInfoEnabled()) {
    if (themeIds.size() == 1) {
      _log.info("1 theme for " + servletContextName + " was unregistered");
    }
 else {
      _log.info(themeIds.size() + " themes for " + servletContextName+ " was unregistered");
    }
  }
}
