{
  String fileName="source-formatter.properties";
  Properties properties=new Properties();
  List<Properties> propertiesList=new ArrayList<>();
  int level=2;
  if (portalSource) {
    level=PORTAL_MAX_DIR_LEVEL;
  }
  for (int i=0; i <= level; i++) {
    try {
      InputStream inputStream=new FileInputStream(fileName);
      Properties props=new Properties();
      props.load(inputStream);
      propertiesList.add(props);
    }
 catch (    FileNotFoundException fnfe) {
    }
    fileName="../" + fileName;
  }
  if (propertiesList.isEmpty()) {
    return properties;
  }
  properties=propertiesList.get(0);
  if (propertiesList.size() == 1) {
    return properties;
  }
  for (int i=1; i < propertiesList.size(); i++) {
    Properties props=propertiesList.get(i);
    Enumeration<String> enu=(Enumeration<String>)props.propertyNames();
    while (enu.hasMoreElements()) {
      String key=enu.nextElement();
      String value=props.getProperty(key);
      if (Validator.isNull(value)) {
        continue;
      }
      if (key.contains("excludes")) {
        String existingValue=properties.getProperty(key);
        if (Validator.isNotNull(existingValue)) {
          value=existingValue + StringPool.COMMA + value;
        }
        properties.put(key,value);
      }
 else       if (!properties.containsKey(key)) {
        properties.put(key,value);
      }
    }
  }
  return properties;
}
