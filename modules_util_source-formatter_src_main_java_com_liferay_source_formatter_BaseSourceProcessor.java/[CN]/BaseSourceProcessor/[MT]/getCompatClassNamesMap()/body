{
  if (_compatClassNamesMap != null) {
    return _compatClassNamesMap;
  }
  Map<String,String> compatClassNamesMap=new HashMap<>();
  String[] includes=new String[]{"**/portal-compat-shared/src/com/liferay/compat/**/*.java"};
  String basedir=sourceFormatterArgs.getBaseDirName();
  List<String> fileNames=new ArrayList<>();
  for (int i=0; i < PLUGINS_MAX_DIR_LEVEL; i++) {
    File sharedDir=new File(basedir + "shared");
    if (sharedDir.exists()) {
      fileNames=getFileNames(basedir,new String[0],includes);
      break;
    }
    basedir=basedir + "../";
  }
  for (  String fileName : fileNames) {
    File file=new File(fileName);
    String content=FileUtil.read(file);
    fileName=StringUtil.replace(fileName,CharPool.BACK_SLASH,CharPool.SLASH);
    fileName=StringUtil.replace(fileName,CharPool.SLASH,CharPool.PERIOD);
    int pos=fileName.indexOf("com.");
    String compatClassName=fileName.substring(pos);
    compatClassName=compatClassName.substring(0,compatClassName.length() - 5);
    String extendedClassName=StringUtil.replace(compatClassName,"compat.",StringPool.BLANK);
    if (content.contains("extends " + extendedClassName)) {
      compatClassNamesMap.put(compatClassName,extendedClassName);
    }
  }
  _compatClassNamesMap=compatClassNamesMap;
  return _compatClassNamesMap;
}
