{
  if (_copyright == null) {
    _copyright=getContent(sourceFormatterArgs.getCopyrightFileName(),PORTAL_MAX_DIR_LEVEL);
  }
  String copyright=_copyright;
  if (fileName.endsWith(".vm") || Validator.isNull(copyright)) {
    return content;
  }
  if (_oldCopyright == null) {
    _oldCopyright=getContent("old-copyright.txt",PORTAL_MAX_DIR_LEVEL);
  }
  if (Validator.isNotNull(_oldCopyright) && content.contains(_oldCopyright)) {
    content=StringUtil.replace(content,_oldCopyright,copyright);
    processMessage(fileName,"File contains old copyright information");
  }
  if (!content.contains(copyright)) {
    String customCopyright=getCustomCopyright(absolutePath);
    if (Validator.isNotNull(customCopyright)) {
      copyright=customCopyright;
    }
    if (!content.contains(copyright)) {
      processMessage(fileName,"(c)");
    }
 else     if (!content.startsWith(copyright) && !content.startsWith("<%--\n" + copyright)) {
      processMessage(fileName,"File must start with copyright");
    }
  }
 else   if (!content.startsWith(copyright) && !content.startsWith("<%--\n" + copyright)) {
    processMessage(fileName,"File must start with copyright");
  }
  if (fileName.endsWith(".jsp") || fileName.endsWith(".jspf")) {
    content=StringUtil.replace(content,"<%\n" + copyright + "\n%>","<%--\n" + copyright + "\n--%>");
  }
  int x=content.indexOf("* Copyright (c) 2000-");
  if (x == -1) {
    return content;
  }
  int y=content.indexOf("Liferay",x);
  String contentCopyrightYear=content.substring(x,y);
  x=copyright.indexOf("* Copyright (c) 2000-");
  if (x == -1) {
    return content;
  }
  y=copyright.indexOf("Liferay",x);
  String copyrightYear=copyright.substring(x,y);
  return StringUtil.replace(content,contentCopyrightYear,copyrightYear);
}
