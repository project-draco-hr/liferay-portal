{
  try {
    PortletDisplay portletDisplay=themeDisplay.getPortletDisplay();
    PortletSettings companyPortletSettings=PortletSettingsFactoryUtil.getCompanyPortletSettings(themeDisplay.getCompanyId(),portletDisplay.getId());
    pageContext.setAttribute("companyPortletSettings",companyPortletSettings);
    PortletSettings groupPortletSettings=PortletSettingsFactoryUtil.getGroupPortletSettings(themeDisplay.getSiteGroupId(),portletDisplay.getId());
    pageContext.setAttribute("groupPortletSettings",groupPortletSettings);
    PortletSettings portletInstancePortletSettings=PortletSettingsFactoryUtil.getPortletInstancePortletSettings(themeDisplay.getLayout(),portletDisplay.getId());
    pageContext.setAttribute("portletInstancePortletSettings",portletInstancePortletSettings);
  }
 catch (  SystemException se) {
    throw new RuntimeException(se);
  }
catch (  PortalException pe) {
    throw new RuntimeException(pe);
  }
}
