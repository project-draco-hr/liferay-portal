{
  _thread=Thread.currentThread();
  _uncaughtExceptionHandler=Thread.getDefaultUncaughtExceptionHandler();
  Thread.setDefaultUncaughtExceptionHandler(new LogAssertionUncaughtExceptionHandler(_uncaughtExceptionHandler));
  CaptureAppender captureAppender=null;
  if (expectedLogs != null) {
    Class<?> clazz=expectedLogs.loggerClass();
    captureAppender=Log4JLoggerTestUtil.configureLog4JLogger(clazz.getName(),Level.toLevel(expectedLogs.level()));
  }
  installJdk14Handler();
  installLog4jAppender();
  return captureAppender;
}
