{
  Locale defaultLocale=LocaleUtil.fromLanguageId(UpgradeProcessUtil.getDefaultLanguageId(companyId));
  String defaultValue=LanguageUtil.get(defaultLocale,nameLanguageKey);
  boolean needsUpdate=false;
  Map<Locale,String> nameMap=LocalizationUtil.getLocalizationMap(nameXml);
  Map<Locale,String> descriptionMap=LocalizationUtil.getLocalizationMap(descriptionXml);
  for (  Locale locale : LanguageUtil.getSupportedLocales()) {
    String localizedValue=LanguageUtil.get(locale,nameLanguageKey);
    if (!locale.equals(defaultLocale) && localizedValue.equals(defaultValue)) {
      continue;
    }
    String description=descriptionMap.get(locale);
    if (description == null) {
      descriptionMap.put(locale,localizedValue);
      needsUpdate=true;
    }
    String name=nameMap.get(locale);
    if (name == null) {
      nameMap.put(locale,localizedValue);
      needsUpdate=true;
    }
  }
  if (needsUpdate) {
    upgradeDLFileEntryType(dlFileEntryTypeId,nameXml,descriptionXml,nameMap,descriptionMap,defaultLocale);
  }
}
