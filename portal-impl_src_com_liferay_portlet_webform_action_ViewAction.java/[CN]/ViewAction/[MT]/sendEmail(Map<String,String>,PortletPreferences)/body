{
  try {
    String subject=preferences.getValue("subject",StringPool.BLANK);
    String emailAddress=preferences.getValue("emailAddress",StringPool.BLANK);
    if (Validator.isNull(emailAddress)) {
      _log.error("The web form email cannot be sent because no email " + "address is configured");
      return false;
    }
    String body=getMailBody(fieldsMap);
    InternetAddress fromAddress=new InternetAddress(emailAddress);
    InternetAddress toAddress=new InternetAddress(emailAddress);
    MailMessage mailMessage=new MailMessage(fromAddress,toAddress,subject,body,false);
    MailServiceUtil.sendEmail(mailMessage);
    return true;
  }
 catch (  Exception e) {
    _log.error("The web form email could not be sent",e);
    return false;
  }
}
