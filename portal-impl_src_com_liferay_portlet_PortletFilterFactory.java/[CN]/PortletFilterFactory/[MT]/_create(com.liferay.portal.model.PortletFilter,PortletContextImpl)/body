{
  PortletFilter portletFilter=_pool.get(portletFilterModel.getFilterName());
  if (portletFilter == null) {
    FilterConfig filterConfig=FilterConfigFactory.create(portletFilterModel,ctx);
    if (ctx.isWARFile()) {
      PortletContextBag portletContextBag=PortletContextBagPool.get(ctx.getPortletContextName());
      portletFilter=portletContextBag.getPortletFilters().get(filterConfig.getFilterName());
      portletFilter=_init(portletFilterModel,filterConfig,portletFilter);
    }
 else {
      portletFilter=_init(portletFilterModel,filterConfig);
    }
    _pool.put(portletFilterModel.getFilterName(),portletFilter);
  }
  return portletFilter;
}
