{
  if (Validator.isNotNull(virtualHostname)) {
    VirtualHost virtualHost=virtualHostPersistence.fetchByHostname(virtualHostname);
    if (virtualHost == null) {
      virtualHostLocalService.updateVirtualHost(companyId,0,virtualHostname);
    }
 else {
      if ((virtualHost.getCompanyId() != companyId) || (virtualHost.getLayoutSetId() != 0)) {
        throw new CompanyVirtualHostException();
      }
    }
  }
 else {
    VirtualHost virtualHost=virtualHostPersistence.fetchByC_L(companyId,0);
    if (virtualHost != null) {
      virtualHostPersistence.remove(virtualHost);
    }
  }
}
