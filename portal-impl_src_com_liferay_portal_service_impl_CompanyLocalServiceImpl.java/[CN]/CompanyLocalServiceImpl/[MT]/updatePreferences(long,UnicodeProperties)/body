{
  PortletPreferences preferences=PrefsPropsUtil.getPreferences(companyId);
  try {
    String oldLocales=preferences.getValue(PropsKeys.LOCALES,StringPool.BLANK);
    for (    String key : properties.keySet()) {
      String value=properties.getProperty(key);
      preferences.setValue(key,value);
    }
    preferences.store();
    String newLocales=properties.getProperty(PropsKeys.LOCALES);
    if (!Validator.equals(oldLocales,newLocales)) {
      LanguageUtil.resetAvailableLocales(companyId);
    }
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
