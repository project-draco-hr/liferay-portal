{
  if (Validator.isNull(virtualHost)) {
    throw new CompanyVirtualHostException();
  }
 else   if (virtualHost.equals(PortalInstances.DEFAULT_VIRTUAL_HOST) && !webId.equals(PropsValues.COMPANY_DEFAULT_WEB_ID)) {
    throw new CompanyVirtualHostException();
  }
 else   if (!Validator.isDomain(virtualHost)) {
    throw new CompanyVirtualHostException();
  }
 else {
    try {
      Company virtualHostCompany=getCompanyByVirtualHost(virtualHost);
      if (!virtualHostCompany.getWebId().equals(webId)) {
        throw new CompanyVirtualHostException();
      }
    }
 catch (    NoSuchCompanyException nsce) {
    }
    try {
      layoutSetLocalService.getLayoutSet(virtualHost);
      throw new CompanyVirtualHostException();
    }
 catch (    NoSuchLayoutSetException nslse) {
    }
  }
  List<String> aliasList=ListUtil.fromString(aliases);
  if (aliasList.size() > 0) {
    for (    String alias : aliasList) {
      Company virtualHostCompany=getCompanyByVirtualHost(alias);
      if ((virtualHostCompany != null) && (!virtualHostCompany.getWebId().equals(webId))) {
        throw new CompanyAliasException("{subject=" + alias + ",webId="+ virtualHostCompany.getWebId()+ "}");
      }
    }
  }
  if (Validator.isNull(mx)) {
    throw new CompanyMxException();
  }
 else   if (!Validator.isDomain(mx)) {
    throw new CompanyMxException();
  }
}
