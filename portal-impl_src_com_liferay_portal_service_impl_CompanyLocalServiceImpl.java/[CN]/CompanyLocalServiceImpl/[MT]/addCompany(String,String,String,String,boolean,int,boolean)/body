{
  virtualHostname=StringUtil.toLowerCase(virtualHostname.trim());
  if (Validator.isNull(webId) || webId.equals(PropsValues.COMPANY_DEFAULT_WEB_ID) || (companyPersistence.fetchByWebId(webId) != null)) {
    throw new CompanyWebIdException();
  }
  validate(webId,virtualHostname,mx);
  Company company=checkCompany(webId,mx,shardName);
  company.setMx(mx);
  company.setSystem(system);
  company.setMaxUsers(maxUsers);
  company.setActive(active);
  companyPersistence.update(company);
  updateVirtualHost(company.getCompanyId(),virtualHostname);
  return company;
}
