{
  if (!Validator.isDomain(alias)) {
    throw new CompanyAliasException("{exception=DomainNameException,subject=" + alias + ",webId=none}");
  }
  try {
    Company companyVirtualHost=getCompanyByVirtualHost(alias);
    if (!companyVirtualHost.getWebId().equals(company.getWebId())) {
      throw new CompanyAliasException("{exception=CompanyAliasException,subject=" + alias + ",webId="+ companyVirtualHost.getWebId()+ "}");
    }
  }
 catch (  NoSuchCompanyException nsce) {
  }
  try {
    LayoutSet layoutSetVirtualHost=layoutSetLocalService.getLayoutSetByVirtualHost(alias);
    if (layoutSetVirtualHost.getCompanyId() != company.getCompanyId()) {
      throw new CompanyAliasException("{exception=AlreadyInUseException,subject=" + alias + ",webId=none}");
    }
 else {
      if (allowWildcard) {
        throw new CompanyAliasException("{exception=LayoutSetSubDomainException,subject=" + alias + ",webId=none}");
      }
    }
  }
 catch (  NoSuchLayoutSetException nslse) {
  }
}
