{
  virtualHostname=StringUtil.toLowerCase(virtualHostname.trim());
  Company company=companyPersistence.findByPrimaryKey(companyId);
  validateVirtualHost(company.getWebId(),virtualHostname);
  if (PropsValues.MAIL_MX_UPDATE) {
    validateMx(mx);
  }
  validateName(companyId,name);
  if (PropsValues.MAIL_MX_UPDATE) {
    company.setMx(mx);
  }
  company.setHomeURL(homeURL);
  if (logo) {
    if (ArrayUtil.isNotEmpty(logoBytes)) {
      company=updateLogo(company,logoBytes);
    }
  }
 else   if (company.getLogoId() > 0) {
    imageLocalService.deleteImage(company.getLogoId());
    company.setLogoId(0);
  }
  companyPersistence.update(company);
  updateAccount(company,name,legalName,legalId,legalType,sicCode,tickerSymbol,industry,type,size);
  updateVirtualHostname(companyId,virtualHostname);
  return company;
}
