{
  try {
    virtualHostname=StringUtil.toLowerCase(virtualHostname.trim());
    VirtualHost virtualHost=virtualHostPersistence.findByHostname(virtualHostname);
    if (virtualHost.getLayoutSetId() != 0) {
      throw new CompanyVirtualHostException("Virtual host is associated with layout set " + virtualHost.getLayoutSetId());
    }
    return companyPersistence.findByPrimaryKey(virtualHost.getCompanyId());
  }
 catch (  NoSuchVirtualHostException nsvhe) {
    throw new CompanyVirtualHostException(nsvhe);
  }
}
