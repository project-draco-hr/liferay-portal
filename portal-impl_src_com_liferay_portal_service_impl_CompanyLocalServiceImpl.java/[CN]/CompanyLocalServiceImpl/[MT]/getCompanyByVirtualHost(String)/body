{
  virtualHost=virtualHost.trim().toLowerCase();
  try {
    VirtualHost virtualHostObj=virtualHostPersistence.findByVirtualHostName(virtualHost);
    if (virtualHostObj.getLayoutSetId() != 0) {
      throw new CompanyVirtualHostException("Virtual host is for layout set " + virtualHostObj);
    }
    long companyId=virtualHostObj.getCompanyId();
    return companyPersistence.findByPrimaryKey(companyId);
  }
 catch (  NoSuchVirtualHostException nsvhe) {
    throw new CompanyVirtualHostException(nsvhe);
  }
}
