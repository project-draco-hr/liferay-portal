{
  virtualHost=getVirtualHost(virtualHost);
  if ((Validator.isNull(webId)) || (webId.equals(PropsValues.COMPANY_DEFAULT_WEB_ID)) || (companyPersistence.fetchByWebId(webId) != null)) {
    throw new CompanyWebIdException();
  }
  validate(webId,virtualHost,aliases,mx);
  Company company=checkCompany(webId,mx);
  company.setVirtualHost(virtualHost);
  company.setAllowWildcard(allowWildcard);
  company.setAliases(aliases);
  company.setMx(mx);
  companyPersistence.update(company,false);
  LuceneUtil.checkLuceneDir(company.getCompanyId());
  return company;
}
