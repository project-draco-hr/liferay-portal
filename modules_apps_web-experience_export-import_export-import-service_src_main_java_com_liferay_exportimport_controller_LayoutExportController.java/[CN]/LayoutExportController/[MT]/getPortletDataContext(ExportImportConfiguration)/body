{
  Map<String,Serializable> settingsMap=exportImportConfiguration.getSettingsMap();
  long sourceGroupId=MapUtil.getLong(settingsMap,"sourceGroupId");
  boolean privateLayout=MapUtil.getBoolean(settingsMap,"privateLayout");
  Map<String,String[]> parameterMap=(Map<String,String[]>)settingsMap.get("parameterMap");
  DateRange dateRange=ExportImportDateUtil.getDateRange(exportImportConfiguration);
  long[] layoutIds=GetterUtil.getLongValues(settingsMap.get("layoutIds"));
  Group group=_groupLocalService.getGroup(sourceGroupId);
  ZipWriter zipWriter=ExportImportHelperUtil.getLayoutSetZipWriter(sourceGroupId);
  PortletDataContext portletDataContext=PortletDataContextFactoryUtil.createExportPortletDataContext(group.getCompanyId(),sourceGroupId,parameterMap,dateRange.getStartDate(),dateRange.getEndDate(),zipWriter);
  portletDataContext.setPrivateLayout(privateLayout);
  portletDataContext.setLayoutIds(layoutIds);
  return portletDataContext;
}
