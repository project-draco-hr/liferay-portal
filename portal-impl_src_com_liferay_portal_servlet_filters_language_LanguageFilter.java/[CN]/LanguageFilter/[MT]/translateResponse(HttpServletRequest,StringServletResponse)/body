{
  String languageId=LanguageUtil.getLanguageId(request);
  Locale locale=LocaleUtil.fromLanguageId(languageId);
  String content=stringResponse.getString();
  StringBundler sb=new StringBundler();
  Matcher matcher=_pattern.matcher(content);
  int x=0;
  while (matcher.find()) {
    int y=matcher.start(0);
    String key=matcher.group(1);
    sb.append(content.substring(x,y));
    sb.append(StringPool.APOSTROPHE);
    String value=null;
    if (_portletConfig != null) {
      ResourceBundle resourceBundle=_portletConfig.getResourceBundle(locale);
      try {
        value=resourceBundle.getString(key);
      }
 catch (      MissingResourceException mre) {
      }
    }
    if (Validator.isNull(value)) {
      value=UnicodeLanguageUtil.get(locale,key);
    }
    sb.append(value);
    sb.append(StringPool.APOSTROPHE);
    x=matcher.end(0);
  }
  sb.append(content.substring(x));
  return sb.toString();
}
