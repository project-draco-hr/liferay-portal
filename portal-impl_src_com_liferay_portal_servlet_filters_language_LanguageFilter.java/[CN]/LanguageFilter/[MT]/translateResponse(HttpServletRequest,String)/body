{
  String languageId=LanguageUtil.getLanguageId(request);
  Locale locale=LocaleUtil.fromLanguageId(languageId);
  StringBundler sb=new StringBundler();
  Matcher matcher=_pattern.matcher(content);
  ResourceBundle resourceBundle=LanguageResources.getResourceBundle(locale);
  if (_portletConfig != null) {
    resourceBundle=new AggregateResourceBundle(_portletConfig.getResourceBundle(locale),resourceBundle);
  }
  int x=0;
  while (matcher.find()) {
    int y=matcher.start(0);
    String key=matcher.group(1);
    sb.append(content.substring(x,y));
    sb.append(StringPool.APOSTROPHE);
    String value=UnicodeLanguageUtil.get(resourceBundle,key);
    sb.append(value);
    sb.append(StringPool.APOSTROPHE);
    x=matcher.end(0);
  }
  sb.append(content.substring(x));
  return sb.toString();
}
