{
  Class<?> type=field.getType();
  if (!type.isArray()) {
    return value;
  }
  Class<?> componentType=type.getComponentType();
  if (!componentType.isPrimitive()) {
    return value;
  }
  if (type.isAssignableFrom(boolean[].class)) {
    value=ArrayUtil.toArray((Boolean[])value);
  }
 else   if (type.isAssignableFrom(byte[].class)) {
    value=ArrayUtil.toArray((Byte[])value);
  }
 else   if (type.isAssignableFrom(char[].class)) {
    value=ArrayUtil.toArray((Character[])value);
  }
 else   if (type.isAssignableFrom(double[].class)) {
    value=ArrayUtil.toArray((Double[])value);
  }
 else   if (type.isAssignableFrom(float[].class)) {
    value=ArrayUtil.toArray((Float[])value);
  }
 else   if (type.isAssignableFrom(int[].class)) {
    value=ArrayUtil.toArray((Integer[])value);
  }
 else   if (type.isAssignableFrom(long[].class)) {
    value=ArrayUtil.toArray((Long[])value);
  }
 else   if (type.isAssignableFrom(short[].class)) {
    value=ArrayUtil.toArray((Short[])value);
  }
  return value;
}
