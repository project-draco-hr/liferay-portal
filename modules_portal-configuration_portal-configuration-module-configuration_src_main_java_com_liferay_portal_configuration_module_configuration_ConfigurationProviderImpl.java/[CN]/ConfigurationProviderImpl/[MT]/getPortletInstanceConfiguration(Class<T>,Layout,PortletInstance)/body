{
  String configurationPid=getConfigurationPid(clazz);
  String portletInstanceKey=portletInstance.getPortletInstanceKey();
  if (Validator.isNotNull(configurationPid)) {
    return ConfigurationProviderUtil.getConfiguration(clazz,new PortletInstanceSettingsLocator(layout,portletInstanceKey,configurationPid));
  }
 else {
    return ConfigurationProviderUtil.getConfiguration(clazz,new PortletInstanceSettingsLocator(layout,portletInstanceKey));
  }
}
