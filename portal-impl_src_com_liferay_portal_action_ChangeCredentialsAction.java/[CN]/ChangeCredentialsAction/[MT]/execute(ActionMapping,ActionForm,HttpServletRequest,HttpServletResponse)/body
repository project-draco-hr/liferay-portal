{
  String cmd=ParamUtil.getString(request,Constants.CMD);
  if (cmd.equals(Constants.UPDATE)) {
    try {
      if (ParamUtil.getBoolean(request,"updatePassword")) {
        updatePassword(request,response);
      }
      if (ParamUtil.getBoolean(request,"updateReminderQuery")) {
        updateReminderQuery(request,response);
      }
      return mapping.findForward(ActionConstants.COMMON_REFERER);
    }
 catch (    Exception e) {
      if (e instanceof UserPasswordException || e instanceof UserReminderQueryException) {
        SessionErrors.add(request,e.getClass().getName(),e);
        return mapping.findForward("portal.change_credentials");
      }
 else       if (e instanceof NoSuchUserException || e instanceof PrincipalException) {
        SessionErrors.add(request,e.getClass().getName());
        return mapping.findForward("portal.error");
      }
 else {
        PortalUtil.sendError(e,request,response);
        return null;
      }
    }
  }
 else {
    return mapping.findForward("portal.change_credentials");
  }
}
