{
  ExportImportLifecycleEvent exportImportLifecycleEvent=new ExportImportLifecycleEventImpl();
  exportImportLifecycleEvent.setAttributes(attributes);
  exportImportLifecycleEvent.setCode(code);
  Map<Integer,Boolean> processFlags=new HashMap<>();
  processFlags.put(ExportImportLifecycleConstants.PROCESS_FLAG_EXPORT_IN_PROCESS,ExportImportThreadLocal.isExportInProcess());
  processFlags.put(ExportImportLifecycleConstants.PROCESS_FLAG_IMPORT_IN_PROCESS,ExportImportThreadLocal.isImportInProcess());
  processFlags.put(ExportImportLifecycleConstants.PROCESS_FLAG_LAYOUT_EXPORT_IN_PROCESS,ExportImportThreadLocal.isLayoutExportInProcess());
  processFlags.put(ExportImportLifecycleConstants.PROCESS_FLAG_LAYOUT_IMPORT_IN_PROCESS,ExportImportThreadLocal.isLayoutImportInProcess());
  processFlags.put(ExportImportLifecycleConstants.PROCESS_FLAG_LAYOUT_STAGING_IN_PROCESS,ExportImportThreadLocal.isLayoutStagingInProcess());
  processFlags.put(ExportImportLifecycleConstants.PROCESS_FLAG_LAYOUT_VALIDATION_IN_PROCESS,ExportImportThreadLocal.isLayoutValidationInProcess());
  processFlags.put(ExportImportLifecycleConstants.PROCESS_FLAG_PORTLET_EXPORT_IN_PROCESS,ExportImportThreadLocal.isPortletExportInProcess());
  processFlags.put(ExportImportLifecycleConstants.PROCESS_FLAG_PORTLET_IMPORT_IN_PROCESS,ExportImportThreadLocal.isPortletImportInProcess());
  processFlags.put(ExportImportLifecycleConstants.PROCESS_FLAG_PORTLET_STAGING_IN_PROCESS,ExportImportThreadLocal.isPortletStagingInProcess());
  processFlags.put(ExportImportLifecycleConstants.PROCESS_FLAG_PORTLET_VALIDATION_IN_PROCESS,ExportImportThreadLocal.isPortletValidationInProcess());
  exportImportLifecycleEvent.setProcessFlags(processFlags);
  return exportImportLifecycleEvent;
}
