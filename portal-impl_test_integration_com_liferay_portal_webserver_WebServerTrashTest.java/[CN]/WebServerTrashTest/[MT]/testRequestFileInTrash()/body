{
  FileEntry fileEntry=addFileEntry(false,"Test Trash.txt");
  MockHttpServletResponse response=testRequestFile(fileEntry,_user,false);
  Assert.assertEquals(MockHttpServletResponse.SC_OK,response.getStatus());
  DLAppServiceUtil.moveFileEntryToTrash(fileEntry.getFileEntryId());
  response=testRequestFile(fileEntry,_user,false);
  Assert.assertEquals(MockHttpServletResponse.SC_NOT_FOUND,response.getStatus());
  response=testRequestFile(fileEntry,_user,true);
  Assert.assertEquals(MockHttpServletResponse.SC_UNAUTHORIZED,response.getStatus());
  RoleLocalServiceUtil.addUserRoles(_user.getUserId(),new long[]{_role.getRoleId()});
  response=testRequestFile(fileEntry,_user,true);
  Assert.assertEquals(MockHttpServletResponse.SC_OK,response.getStatus());
}
