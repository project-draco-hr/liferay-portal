{
  FileEntry fileEntry=addFileEntry(false,"Trash-Test.txt");
  MockHttpServletResponse response=_testRequestFile(fileEntry,_user,false);
  Assert.assertEquals(MockHttpServletResponse.SC_OK,response.getStatus());
  DLAppServiceUtil.moveFileEntryToTrash(fileEntry.getFileEntryId());
  response=_testRequestFile(fileEntry,_user,false);
  Assert.assertEquals(MockHttpServletResponse.SC_NOT_FOUND,response.getStatus());
  response=_testRequestFile(fileEntry,_user,true);
  Assert.assertEquals(MockHttpServletResponse.SC_UNAUTHORIZED,response.getStatus());
  _grantPermissionToManageTrash(_user);
  response=_testRequestFile(fileEntry,_user,true);
  Assert.assertEquals(MockHttpServletResponse.SC_OK,response.getStatus());
}
