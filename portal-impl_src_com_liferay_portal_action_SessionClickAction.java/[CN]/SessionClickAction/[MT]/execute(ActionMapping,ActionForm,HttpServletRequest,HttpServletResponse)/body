{
  try {
    AuthTokenUtil.checkCSRFToken(request,SessionClickAction.class.getName());
    HttpSession session=request.getSession();
    Enumeration<String> enu=request.getParameterNames();
    boolean useHttpSession=ParamUtil.getBoolean(request,"useHttpSession");
    while (enu.hasMoreElements()) {
      String name=enu.nextElement();
      if (!name.equals("doAsUserId") && !name.equals("p_auth")) {
        String value=ParamUtil.getString(request,name);
        if (useHttpSession) {
          SessionClicks.put(session,name,value);
        }
 else {
          SessionClicks.put(request,name,value);
        }
      }
    }
    String value=getValue(request);
    if (value != null) {
      response.setContentType(ContentTypes.APPLICATION_JSON);
      ServletOutputStream servletOutputStream=response.getOutputStream();
      servletOutputStream.print(value);
    }
    return null;
  }
 catch (  Exception e) {
    PortalUtil.sendError(e,request,response);
    return null;
  }
}
