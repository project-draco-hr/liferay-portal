{
  try {
    Enumeration<String> enu=request.getParameterNames();
    while (enu.hasMoreElements()) {
      String name=enu.nextElement();
      if (!name.equals("doAsUserId")) {
        String value=ParamUtil.getString(request,name);
        SessionClicks.put(request,name,value);
      }
    }
    String cmd=ParamUtil.getString(request,"cmd");
    String key=ParamUtil.getString(request,"key");
    if (Validator.isNotNull(key) && (cmd.equals("get") || cmd.equals("getAll"))) {
      String result=StringPool.BLANK;
      if (cmd.equals("get")) {
        result=SessionClicks.get(request,key,cmd);
      }
 else       if (cmd.equals("getAll")) {
        String[] keys=request.getParameterValues("key");
        JSONObject storedValues=JSONFactoryUtil.createJSONObject();
        for (        String storedKey : keys) {
          storedValues.put(storedKey,SessionClicks.get(request,storedKey,cmd));
        }
        result=storedValues.toString();
      }
      ServletOutputStream out=response.getOutputStream();
      out.println(result);
    }
    return null;
  }
 catch (  Exception e) {
    PortalUtil.sendError(e,request,response);
    return null;
  }
}
