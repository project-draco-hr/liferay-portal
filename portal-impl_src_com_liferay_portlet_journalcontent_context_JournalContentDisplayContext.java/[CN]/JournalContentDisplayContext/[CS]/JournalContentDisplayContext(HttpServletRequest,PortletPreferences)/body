{
  _request=request;
  _portletPreferences=portletPreferences;
  String portletId=PortalUtil.getPortletId(request);
  if (portletId.equals(PortletKeys.PORTLET_CONFIGURATION)) {
    return;
  }
  JournalArticle article=getArticle();
  JournalArticleDisplay articleDisplay=getArticleDisplay();
  if ((article == null) || !hasViewPermission() || (articleDisplay == null)|| isExpired()) {
    request.setAttribute(WebKeys.PORTLET_CONFIGURATOR_VISIBILITY,Boolean.TRUE);
  }
  if ((article != null) && hasViewPermission() && (articleDisplay != null)&& !isExpired()&& isEnableViewCountIncrement()) {
    AssetEntryServiceUtil.incrementViewCounter(JournalArticle.class.getName(),articleDisplay.getResourcePrimKey());
  }
}
