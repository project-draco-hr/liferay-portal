{
  long groupId=0;
  long repositoryId=0;
  long parentFolderId=atomRequestContext.getLongParameter("parentFolderId");
  if (parentFolderId != 0) {
    DLFolder dlParentFolder=DLFolderServiceUtil.getFolder(parentFolderId);
    groupId=dlParentFolder.getGroupId();
    repositoryId=dlParentFolder.getRepositoryId();
  }
 else {
    groupId=atomRequestContext.getLongParameter("groupId");
    repositoryId=atomRequestContext.getLongParameter("repositoryId");
  }
  ServiceContext serviceContext=new ServiceContext();
  DLFolder dlFolder=DLFolderServiceUtil.addFolder(groupId,repositoryId,parentFolderId,title,summary,serviceContext);
  return dlFolder;
}
