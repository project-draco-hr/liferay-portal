{
  Expression<Long> expression=_expressionFactory.createLongExpression("var1 + var2 + var3");
  expression.setLongVariableValue("var1",5l);
  expression.setExpressionStringVariableValue("var2","var1 + 3",Long.class);
  expression.setExpressionStringVariableValue("var3","var2 + var1",Long.class);
  Map<String,VariableDependencies> variableDependenciesMap=expression.getVariableDependenciesMap();
  VariableDependencies var1VariableDependencies=variableDependenciesMap.get("var1");
  Assert.assertTrue(hasAffectedVariableName(var1VariableDependencies,"var2"));
  Assert.assertTrue(hasAffectedVariableName(var1VariableDependencies,"var3"));
  List<String> var1RequiredVariableNames=var1VariableDependencies.getRequiredVariableNames();
  Assert.assertTrue(var1RequiredVariableNames.isEmpty());
  VariableDependencies var2VariableDependencies=variableDependenciesMap.get("var2");
  Assert.assertTrue(hasRequiredVariableName(var2VariableDependencies,"var1"));
  Assert.assertTrue(hasAffectedVariableName(var2VariableDependencies,"var3"));
  VariableDependencies var3VariableDependencies=variableDependenciesMap.get("var3");
  List<String> var3AffectedVariableNames=var3VariableDependencies.getAffectedVariableNames();
  Assert.assertTrue(var3AffectedVariableNames.isEmpty());
  Assert.assertTrue(hasRequiredVariableName(var3VariableDependencies,"var1"));
  Assert.assertTrue(hasRequiredVariableName(var3VariableDependencies,"var2"));
}
