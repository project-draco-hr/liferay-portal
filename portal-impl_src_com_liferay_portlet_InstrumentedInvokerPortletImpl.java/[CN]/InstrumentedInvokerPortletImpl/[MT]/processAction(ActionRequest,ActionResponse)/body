{
  final boolean activateMonitoring=isMonitorActionActive();
  PortletRequestDataSample portletRequestSample=null;
  if (activateMonitoring) {
    portletRequestSample=new PortletRequestDataSample(PortletRequestType.ACTION,(LiferayPortletRequest)actionRequest,(LiferayPortletResponse)actionResponse);
    portletRequestSample.prepare();
  }
  try {
    _delegate.processAction(actionRequest,actionResponse);
    if (activateMonitoring) {
      portletRequestSample.capture(RequestStatus.SUCCESS);
    }
  }
 catch (  Exception e) {
    _processException(activateMonitoring,portletRequestSample,e);
  }
 finally {
    if (portletRequestSample != null) {
      Message message=new Message();
      message.setPayload(portletRequestSample);
      _messageSender.send(message);
      ThreadLocalDataSampleCache.add(portletRequestSample);
    }
  }
}
