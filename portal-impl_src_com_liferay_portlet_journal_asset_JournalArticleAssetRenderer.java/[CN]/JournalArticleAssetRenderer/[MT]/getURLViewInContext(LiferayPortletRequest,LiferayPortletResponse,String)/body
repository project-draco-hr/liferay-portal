{
  ThemeDisplay themeDisplay=(ThemeDisplay)liferayPortletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  String urlViewInContext=StringPool.BLANK;
  if (Validator.isNotNull(_article.getLayoutUuid())) {
    Group group=themeDisplay.getScopeGroup();
    if (group.getGroupId() != _article.getGroupId()) {
      group=GroupLocalServiceUtil.getGroup(_article.getGroupId());
    }
    urlViewInContext=PortalUtil.getGroupFriendlyURL(group,false,themeDisplay) + JournalArticleConstants.CANONICAL_URL_SEPARATOR + _article.getUrlTitle();
  }
 else {
    String languageId=LanguageUtil.getLanguageId(liferayPortletRequest);
    JournalArticleDisplay articleDisplay=JournalContentUtil.getDisplay(_article.getGroupId(),_article.getArticleId(),null,null,languageId,themeDisplay);
    if (articleDisplay == null) {
      return StringPool.BLANK;
    }
    PortletURL portletURL=liferayPortletResponse.createRenderURL();
    portletURL.setParameter("struts_action","/asset_publisher/view_content");
    portletURL.setParameter("urlTitle",_article.getUrlTitle());
    portletURL.setParameter("type",JournalArticleAssetRendererFactory.TYPE);
    urlViewInContext=portletURL.toString();
  }
  return urlViewInContext;
}
