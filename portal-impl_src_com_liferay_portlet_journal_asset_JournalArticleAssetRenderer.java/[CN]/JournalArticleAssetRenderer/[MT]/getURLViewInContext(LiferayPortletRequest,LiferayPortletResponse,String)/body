{
  ThemeDisplay themeDisplay=(ThemeDisplay)liferayPortletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long groupId=_article.getGroupId();
  Group group;
  if (themeDisplay.getScopeGroup().getGroupId() == groupId) {
    group=themeDisplay.getScopeGroup();
  }
 else {
    group=GroupLocalServiceUtil.getGroup(groupId);
  }
  return PortalUtil.getGroupFriendlyURL(group,false,themeDisplay) + JournalArticleConstants.CANONICAL_URL_SEPARATOR + _article.getUrlTitle();
}
