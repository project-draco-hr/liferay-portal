{
  String wsrpServiceUrl=preferences.getValue("wsrp-service-url",StringPool.BLANK);
  String markupEndpoint=preferences.getValue("markup-endpoint",StringPool.BLANK);
  String serviceDescriptionEndpoint=preferences.getValue("service-description-endpoint",StringPool.BLANK);
  String registrationEndpoint=preferences.getValue("registration-endpoint",StringPool.BLANK);
  String portletManagementEndpoint=preferences.getValue("portlet-management-endpoint",StringPool.BLANK);
  markupEndpoint=wsrpServiceUrl + "/" + markupEndpoint;
  serviceDescriptionEndpoint=wsrpServiceUrl + "/" + serviceDescriptionEndpoint;
  registrationEndpoint=wsrpServiceUrl + "/" + registrationEndpoint;
  portletManagementEndpoint=wsrpServiceUrl + "/" + portletManagementEndpoint;
  RegistrationData regData=new RegistrationData();
  regData.setConsumerName("Liferay WSRP Agent");
  regData.setConsumerAgent("Liferay WSRP Agent");
  Producer producer=new ProducerImpl(PRODUCER_ID,markupEndpoint,serviceDescriptionEndpoint,registrationEndpoint,portletManagementEndpoint,regData);
  return producer;
}
