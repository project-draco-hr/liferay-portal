{
  int sessionScope=javax.portlet.PortletSession.PORTLET_SCOPE;
  boolean regProducer=GetterUtil.getBoolean((String)portletSession.getAttribute(WebKeys.WSRP_REGISTER_PRODUCER,sessionScope));
  ProducerRegistry producerReg=_consumerEnv.getProducerRegistry();
  Producer producer=producerReg.getProducer(PRODUCER_ID);
  if (!regProducer && producer != null) {
    return;
  }
  producer=_createProducer(preferences);
  producerReg.addProducer(producer);
  portletSession.setAttribute(WebKeys.WSRP_REGISTER_PRODUCER,"false");
}
