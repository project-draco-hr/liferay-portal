{
  Content content=createContent();
  hook.addFile(content.getCompanyId(),content.getPortletId(),content.getGroupId(),content.getRepositoryId(),content.getPath(),content.getContentId(),randomString(),new Date(),new ServiceContext(),new byte[1024]);
  String newVersion=String.valueOf(Double.valueOf(content.getVersion()) + 0.1);
  hook.updateFile(content.getCompanyId(),content.getPortletId(),content.getGroupId(),content.getRepositoryId(),content.getPath(),newVersion,content.getPath(),content.getContentId(),randomString(),new Date(),new ServiceContext(),new ByteArrayInputStream(new byte[1024]));
  boolean exists=hook.hasFile(content.getCompanyId(),content.getRepositoryId(),content.getPath(),content.getVersion());
  assertTrue(exists);
  boolean exists2=hook.hasFile(content.getCompanyId(),content.getRepositoryId(),content.getPath(),newVersion);
  assertTrue(exists2);
  byte[] bytes=hook.getFile(content.getCompanyId(),content.getRepositoryId(),content.getPath(),newVersion);
  assertFalse(Arrays.equals(bytes,_TEST_BYTE_ARRAY));
}
