{
  if (Validator.isNotNull(_type)) {
    return _type;
  }
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  Group group=themeDisplay.getSiteGroup();
  if (group.isStagingGroup()) {
    group=group.getLiveGroup();
  }
  String type=PortletRatingsDefinitionUtil.getRatingsType(_className,group,themeDisplay.getCompanyId(),_DEFAULT_TYPE);
  String propertyKey=RatingsDataTransformerUtil.getPropertyKey(_className);
  return ParamUtil.getString(request,propertyKey,type);
}
