{
  if (Validator.isNotNull(_type)) {
    return _type;
  }
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  Group group=themeDisplay.getSiteGroup();
  if (group.isStagingGroup()) {
    group=group.getLiveGroup();
  }
  RatingsType ratingsType=RatingsType.STARS;
  if (group != null) {
    try {
      ratingsType=PortletRatingsDefinitionUtil.getRatingsType(themeDisplay.getCompanyId(),group.getGroupId(),_className);
    }
 catch (    PortalException pe) {
      _log.error("Unable to obtain rating type for group " + group.getGroupId());
    }
  }
  return ratingsType.getValue();
}
