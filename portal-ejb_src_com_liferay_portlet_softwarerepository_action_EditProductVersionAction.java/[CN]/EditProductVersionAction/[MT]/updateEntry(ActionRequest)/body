{
  Layout layout=(Layout)req.getAttribute(WebKeys.LAYOUT);
  long productVersionId=ParamUtil.getLong(req,"productVersionId");
  long productEntryId=ParamUtil.getLong(req,"productEntryId");
  String version=ParamUtil.getString(req,"version");
  String changeLog=ParamUtil.getString(req,"changeLog");
  long[] frameworkVersionIds=ParamUtil.getLongValues(req,"frameworkVersions");
  String downloadPageURL=ParamUtil.getString(req,"downloadPageURL");
  String directDownloadURL=ParamUtil.getString(req,"directDownloadURL");
  boolean repoStoreArtifact=ParamUtil.getBoolean(req,"repoStoreArtifact");
  if (productVersionId <= 0) {
    SRProductVersionServiceUtil.addProductVersion(productEntryId,version,changeLog,frameworkVersionIds,downloadPageURL,directDownloadURL,repoStoreArtifact);
  }
 else {
    SRProductVersionServiceUtil.updateProductVersion(productVersionId,version,changeLog,frameworkVersionIds,downloadPageURL,directDownloadURL,repoStoreArtifact);
  }
}
