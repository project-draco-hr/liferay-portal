{
  String imports=getImports(content);
  if (Validator.isNull(imports)) {
    return content;
  }
  Set<String> classes=ClassUtil.getClasses(new UnsyncStringReader(content),className);
  StringBundler sb=new StringBundler();
  UnsyncBufferedReader unsyncBufferedReader=new UnsyncBufferedReader(new UnsyncStringReader(imports));
  String line=null;
  while ((line=unsyncBufferedReader.readLine()) != null) {
    int x=line.indexOf("import ");
    if (x == -1) {
      continue;
    }
    int y=line.lastIndexOf(CharPool.PERIOD);
    String importPackage=line.substring(x + 7,y);
    if (importPackage.equals(packageDir) || importPackage.equals("java.lang")) {
      continue;
    }
    String importClass=line.substring(y + 1,line.length() - 1);
    if (importClass.equals("*") || classes.contains(importClass)) {
      sb.append(line);
      sb.append("\n");
    }
  }
  ImportsFormatter importsFormatter=new JavaImportsFormatter();
  String newImports=importsFormatter.sortAndGroupImports(sb.toString());
  if (!imports.equals(newImports)) {
    content=StringUtil.replaceFirst(content,imports,newImports);
  }
  content=content.replaceFirst("(?m)^[ \t]*(package .*;)\\s*^[ \t]*import","$1\n\nimport");
  content=content.replaceFirst("(?m)^[ \t]*((?:package|import) .*;)\\s*^[ \t]*/\\*\\*","$1\n\n/**");
  return content;
}
