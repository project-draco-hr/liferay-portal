{
  for (  PollerRequest pollerRequest : pollerRequests) {
    PollerRequestResponsePair pollerRequestResponsePair=new PollerRequestResponsePair(pollerRequest);
    boolean receiveRequest=pollerRequest.isReceiveRequest();
    String responseId=null;
    if (receiveRequest) {
      responseId=PortalUUIDUtil.generate();
      PollerResponse pollerResponse=new DefaultPollerResponse(pollerRequest.getPortletId(),pollerRequest.getPollerHeader(),pollerRequest.getChunkId());
      pollerRequestResponsePair.setPollerResponse(pollerResponse);
      if (!pollerSession.beginPortletProcessing(pollerRequestResponsePair,responseId)) {
        continue;
      }
    }
    Message message=new Message();
    message.setPayload(pollerRequestResponsePair);
    if (receiveRequest) {
      message.setResponseId(responseId);
      message.setResponseDestinationName(DestinationNames.POLLER_RESPONSE);
    }
    MessageBusUtil.sendMessage(DestinationNames.POLLER,message);
  }
}
