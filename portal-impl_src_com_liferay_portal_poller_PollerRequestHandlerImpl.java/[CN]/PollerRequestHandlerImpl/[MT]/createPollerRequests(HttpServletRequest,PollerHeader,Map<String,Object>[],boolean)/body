{
  Map<String,Boolean> portletIdsMap=pollerHeader.getPortletIdsMap();
  List<PollerRequest> pollerRequests=new ArrayList<PollerRequest>(portletIdsMap.size());
  Set<String> receiveRequestPortletIds=null;
  if (receiveRequest) {
    receiveRequestPortletIds=new HashSet<String>((int)(pollerRequestChunks.length / 0.75) + 1);
  }
  for (int i=1; i < pollerRequestChunks.length; i++) {
    Map<String,Object> pollerRequestChunk=pollerRequestChunks[i];
    String portletId=(String)pollerRequestChunk.get("portletId");
    Map<String,String> parameterMap=parseData(pollerRequestChunk);
    String chunkId=(String)pollerRequestChunk.get("chunkId");
    try {
      PollerRequest pollerRequest=createPollerRequest(request,receiveRequest,pollerHeader,portletId,parameterMap,chunkId);
      pollerRequests.add(pollerRequest);
      if (receiveRequest) {
        receiveRequestPortletIds.add(portletId);
      }
    }
 catch (    Exception e) {
      _log.error(e,e);
    }
  }
  if (receiveRequest) {
    Set<String> portletIds=portletIdsMap.keySet();
    for (    String portletId : portletIds) {
      if (receiveRequestPortletIds.contains(portletId)) {
        continue;
      }
      try {
        PollerRequest pollerRequest=createPollerRequest(request,receiveRequest,pollerHeader,portletId);
        pollerRequests.add(pollerRequest);
      }
 catch (      Exception e) {
        _log.error(e,e);
      }
    }
  }
  return pollerRequests;
}
