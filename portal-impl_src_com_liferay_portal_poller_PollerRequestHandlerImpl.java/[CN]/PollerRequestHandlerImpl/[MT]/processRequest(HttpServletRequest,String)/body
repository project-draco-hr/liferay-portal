{
  if (Validator.isNull(pollerRequestString)) {
    return null;
  }
  Map<String,Object>[] pollerRequestChunks=parsePollerRequestParameters(pollerRequestString);
  PollerHeader pollerHeader=parsePollerRequestHeader(pollerRequestChunks);
  if (!isValidPollerHeader(pollerHeader)) {
    if (_log.isWarnEnabled()) {
      _log.warn("Invalid poller header for request " + pollerRequestString);
    }
    return null;
  }
  boolean receiveRequest=isReceiveRequest(request.getPathInfo());
  String pollerSessionId=getPollerSessionId(pollerHeader);
  PollerSession pollerSession=null;
synchronized (_pollerSessions) {
    pollerSession=_pollerSessions.get(pollerSessionId);
    if ((pollerSession == null) && receiveRequest) {
      pollerSession=new PollerSession(pollerSessionId);
      _pollerSessions.put(pollerSessionId,pollerSession);
    }
  }
  List<PollerRequest> pollerRequests=createPollerRequests(pollerHeader,pollerRequestChunks,receiveRequest);
  executePollerRequests(pollerSession,pollerRequests);
  if (receiveRequest) {
    return createPollerResponseHeader(pollerHeader);
  }
 else {
    return null;
  }
}
