{
  File file=new File(path);
  if (!file.exists() || forceDownload) {
synchronized (this) {
      if (_logger.isInfoEnabled()) {
        _logger.info("Downloading Geolocation Data from " + fileUrl);
      }
      URL url=new URL(fileUrl);
      URLConnection con=url.openConnection();
      String tmpDir=System.getProperty("java.io.tmpdir");
      File tarFile=new File(tmpDir + "/liferay/GeoIP/GeoIPCity.dat.xz");
      write(tarFile,con.getInputStream());
      write(file,new XZInputStream(new FileInputStream(tarFile)));
    }
  }
  String absolutePath=file.getAbsolutePath();
  return absolutePath.replace('\\','/');
}
