{
  File file=new File(filePath);
  if (file.exists() && !forceDownload) {
    return file;
  }
synchronized (this) {
    if (_logger.isInfoEnabled()) {
      _logger.info("Downloading " + fileURL);
    }
    URL url=new URL(fileURL);
    URLConnection urlConnection=url.openConnection();
    File xzFile=new File(System.getProperty("java.io.tmpdir") + "/liferay/geoip/GeoIPCity.dat.xz");
    write(xzFile,urlConnection.getInputStream());
    write(file,new XZInputStream(new FileInputStream(xzFile)));
  }
  return file;
}
