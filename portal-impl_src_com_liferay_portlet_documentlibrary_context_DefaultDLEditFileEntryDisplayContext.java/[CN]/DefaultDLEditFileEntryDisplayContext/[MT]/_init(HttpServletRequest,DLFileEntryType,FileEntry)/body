{
  _request=request;
  _dlFileEntryType=dlFileEntryType;
  _fileEntry=fileEntry;
  if ((_dlFileEntryType == null) && (_fileEntry != null)) {
    _dlFileEntryType=_fileEntryDisplayContextHelper.getDLFileEntryType();
  }
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  PortletDisplay portletDisplay=themeDisplay.getPortletDisplay();
  _dlPortletInstanceSettings=DLPortletInstanceSettings.getInstance(themeDisplay.getLayout(),portletDisplay.getId());
  _fileEntryDisplayContextHelper=new FileEntryDisplayContextHelper(themeDisplay.getPermissionChecker(),_fileEntry);
  if (fileEntry != null) {
    _fileVersion=fileEntry.getFileVersion();
  }
  _fileVersionDisplayContextHelper=new FileVersionDisplayContextHelper(_fileVersion);
}
