{
  PortletURL portletURL=PortalUtil.getControlPanelPortletURL(portletRequest,DLPortletKeys.DOCUMENT_LIBRARY_ADMIN,PortletRequest.RENDER_PHASE);
  portletURL.setParameter("mvcRenderCommandName","/document_library/move_entry");
  PortletURL redirectURL=PortalUtil.getControlPanelPortletURL(portletRequest,DLPortletKeys.DOCUMENT_LIBRARY_ADMIN,PortletRequest.RENDER_PHASE);
  FileEntry fileEntry=null;
  try {
    fileEntry=ActionUtil.getFileEntry(portletRequest);
  }
 catch (  Exception e) {
    return null;
  }
  long folderId=fileEntry.getFolderId();
  if (folderId == DLFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
    redirectURL.setParameter("mvcRenderCommandName","/document_library/view");
  }
 else {
    redirectURL.setParameter("mvcRenderCommandName","/document_library/view_folder");
  }
  redirectURL.setParameter("folderId",String.valueOf(folderId));
  portletURL.setParameter("redirect",redirectURL.toString());
  portletURL.setParameter("rowIdsFileEntry",String.valueOf(fileEntry.getFileEntryId()));
  return portletURL.toString();
}
