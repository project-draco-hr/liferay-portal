{
  boolean escapeNextChar=false;
  char quotation=query.charAt(0);
  for (int i=1; i < query.length(); i++) {
    char c=query.charAt(i);
    if (escapeNextChar) {
      escapeNextChar=false;
      continue;
    }
    if (c == '\\') {
      escapeNextChar=true;
      continue;
    }
    if (c == quotation) {
      return i + 1;
    }
  }
  return -1;
}
