{
  if ((folder.getGroupId() != portletDataContext.getGroupId()) && (folder.getGroupId() != portletDataContext.getScopeGroupId())) {
    PortletDataException pde=new PortletDataException(PortletDataException.INVALID_GROUP);
    pde.setStagedModel(folder);
    throw pde;
  }
  if (folder instanceof LiferayFolder) {
    LiferayFolder liferayFolder=(LiferayFolder)folder;
    DLFolder dlFolder=(DLFolder)liferayFolder.getModel();
    if (dlFolder.isInTrash() || dlFolder.isInTrashContainer()) {
      PortletDataException pde=new PortletDataException(PortletDataException.STATUS_IN_TRASH);
      pde.setStagedModel(folder);
      throw pde;
    }
  }
}
