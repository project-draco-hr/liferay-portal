{
  long userId=portletDataContext.getUserId(folder.getUserUuid());
  Folder existingFolder=fetchStagedModelByUuidAndGroupId(folder.getUuid(),portletDataContext.getScopeGroupId());
  if ((existingFolder == null) || !(existingFolder.getModel() instanceof DLFolder)) {
    return;
  }
  DLFolder dlFolder=(DLFolder)existingFolder.getModel();
  if (!dlFolder.isInTrash()) {
    return;
  }
  TrashHandler trashHandler=TrashHandlerRegistryUtil.getTrashHandler(DLFolder.class.getName());
  if (trashHandler.isRestorable(existingFolder.getFolderId())) {
    trashHandler.restoreTrashEntry(userId,existingFolder.getFolderId());
  }
}
