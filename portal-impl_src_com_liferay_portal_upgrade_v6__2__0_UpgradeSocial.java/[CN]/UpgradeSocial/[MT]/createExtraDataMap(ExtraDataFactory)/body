{
  Map<Long,String> extraDataMap=new HashMap<>();
  StringBundler sb=new StringBundler(4);
  sb.append("select activityId, groupId, companyId, userId, ");
  sb.append("classNameId, classPK, type_, extraData from ");
  sb.append("SocialActivity where ");
  sb.append(extraDataFactory.getActivitySQLWhereClause());
  try (PreparedStatement preparedStatement=connection.prepareStatement(sb.toString())){
    extraDataFactory.setActivitySQLParameters(preparedStatement);
    try (ResultSet resultSet=preparedStatement.executeQuery()){
      while (resultSet.next()) {
        long activityId=resultSet.getLong("activityId");
        long classNameId=resultSet.getLong("classNameId");
        long classPK=resultSet.getLong("classPK");
        long companyId=resultSet.getLong("companyId");
        String extraData=resultSet.getString("extraData");
        long groupId=resultSet.getLong("groupId");
        int type=resultSet.getInt("type_");
        long userId=resultSet.getLong("userId");
        String newExtraData=createExtraData(extraDataFactory,groupId,companyId,userId,classNameId,classPK,type,extraData);
        if (newExtraData != null) {
          extraDataMap.put(activityId,newExtraData);
        }
      }
    }
   }
   return extraDataMap;
}
