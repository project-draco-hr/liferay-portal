{
  Map<Long,String> extraDataMap=createExtraDataMap(extraDataFactory);
  for (  Map.Entry<Long,String> entry : extraDataMap.entrySet()) {
    long activityId=entry.getKey();
    String extraData=entry.getValue();
    try (PreparedStatement ps=connection.prepareStatement("update SocialActivity set extraData = ? where " + "activityId = ?")){
      ps.setString(1,extraData);
      ps.setLong(2,activityId);
      ps.executeUpdate();
    }
 catch (    Exception e) {
      if (_log.isWarnEnabled()) {
        _log.warn("Unable to update activity " + activityId,e);
      }
    }
  }
}
