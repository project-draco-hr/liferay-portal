{
  SoyMapData soyMapData=new SoyMapData();
  Set<String> restrictedVariables=_templateContextHelper.getRestrictedVariables();
  for (  String key : context.keySet()) {
    if (restrictedVariables.contains(key)) {
      continue;
    }
    Object value=get(key);
    if (value instanceof SoyHTMLContextValue) {
      SoyHTMLContextValue htmlValue=(SoyHTMLContextValue)value;
      value=UnsafeSanitizedContentOrdainer.ordainAsSafe(htmlValue.toString(),SanitizedContent.ContentKind.HTML);
    }
 else {
      value=_templateContextHelper.deserializeValue(value);
    }
    soyMapData.put(key,value);
  }
  return soyMapData;
}
