{
  PKUpgradeColumnImpl pkUpgradeColumn=new PKUpgradeColumnImpl(0,true);
  UpgradeTable upgradeTable=new DefaultUpgradeTableImpl(DLFolderImpl.TABLE_NAME,DLFolderImpl.TABLE_COLUMNS,pkUpgradeColumn);
  upgradeTable.updateTable();
  ValueMapper folderIdMapper=new DefaultParentIdMapper(pkUpgradeColumn.getValueMapper());
  UpgradeColumn upgradeParentFolderIdColumn=new SwapUpgradeColumnImpl("parentFolderId",folderIdMapper);
  upgradeTable=new DefaultUpgradeTableImpl(DLFolderImpl.TABLE_NAME,DLFolderImpl.TABLE_COLUMNS,upgradeParentFolderIdColumn);
  upgradeTable.updateTable();
  UpgradeColumn upgradeFolderIdColumn=new SwapUpgradeColumnImpl("folderId",folderIdMapper);
  UpgradeColumn upgradeToFolderIdColumn=new SwapUpgradeColumnImpl("toFolderId",folderIdMapper);
  pkUpgradeColumn=new PKUpgradeColumnImpl(0,true);
  upgradeTable=new DefaultUpgradeTableImpl(DLFileEntryImpl.TABLE_NAME,DLFileEntryImpl.TABLE_COLUMNS,pkUpgradeColumn,upgradeFolderIdColumn);
  upgradeTable.updateTable();
  ValueMapper entryIdMapper=pkUpgradeColumn.getValueMapper();
  upgradeTable=new DefaultUpgradeTableImpl(DLFileRankImpl.TABLE_NAME,DLFileRankImpl.TABLE_COLUMNS,new PKUpgradeColumnImpl(),upgradeFolderIdColumn);
  upgradeTable.updateTable();
  upgradeTable=new DefaultUpgradeTableImpl(DLFileShortcutImpl.TABLE_NAME,DLFileShortcutImpl.TABLE_COLUMNS,new PKUpgradeColumnImpl(),upgradeFolderIdColumn,upgradeToFolderIdColumn);
  upgradeTable.updateTable();
  upgradeTable=new DefaultUpgradeTableImpl(DLFileVersionImpl.TABLE_NAME,DLFileVersionImpl.TABLE_COLUMNS,new PKUpgradeColumnImpl(),upgradeFolderIdColumn);
  upgradeTable.updateTable();
  ResourceUtil.upgradePrimKey(folderIdMapper,DLFolder.class.getName());
  ResourceUtil.upgradePrimKey(entryIdMapper,DLFileEntry.class.getName());
  CounterLocalServiceUtil.reset(DLFolder.class.getName());
  CounterLocalServiceUtil.reset(DLFileEntry.class.getName());
  CounterLocalServiceUtil.reset(DLFileShortcut.class.getName());
  DBUtil.getInstance().executeSQL(_UPGRADE_SCHEMA);
}
