{
  PortletURL viewURL=liferayPortletResponse.createRenderURL();
  viewURL.setParameter("struts_action","/asset_publisher/view_content");
  String currentURL=PortalUtil.getCurrentURL(liferayPortletRequest);
  viewURL.setParameter("redirect",currentURL);
  viewURL.setParameter("assetEntryId",String.valueOf(assetEntry.getEntryId()));
  AssetRendererFactory assetRendererFactory=assetEntry.getAssetRendererFactory();
  AssetRenderer assetRenderer=assetEntry.getAssetRenderer();
  viewURL.setParameter("type",assetRendererFactory.getType());
  if (Validator.isNotNull(assetRenderer.getUrlTitle())) {
    ThemeDisplay themeDisplay=(ThemeDisplay)liferayPortletRequest.getAttribute(WebKeys.THEME_DISPLAY);
    if (assetRenderer.getGroupId() != themeDisplay.getScopeGroupId()) {
      viewURL.setParameter("groupId",String.valueOf(assetRenderer.getGroupId()));
    }
    viewURL.setParameter("urlTitle",assetRenderer.getUrlTitle());
  }
  return viewURL.toString();
}
