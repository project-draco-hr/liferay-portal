{
  List<Element> filterElements=rootElement.elements("filter");
  for (  Element filterElement : filterElements) {
    FilterDefinition filterDefinition=new FilterDefinition();
    String filterClassName=filterElement.elementText("filter-class");
    Class<?> clazz=null;
    try {
      clazz=bundle.loadClass(filterClassName);
    }
 catch (    Exception e) {
      _log.error("Unable to load filter " + filterClassName);
      continue;
    }
    Filter filter=(Filter)clazz.newInstance();
    filterDefinition.setFilter(filter);
    List<Element> initParamElements=filterElement.elements("init-param");
    for (    Element initParamElement : initParamElements) {
      String paramName=initParamElement.elementText("param-name");
      String paramValue=initParamElement.elementText("param-value");
      filterDefinition.setInitParameter(paramName,paramValue);
    }
    String filterName=filterElement.elementText("filter-name");
    filterDefinition.setName(filterName);
    List<Element> filterMappingElements=rootElement.elements("filter-mapping");
    for (    Element filterMappingElement : filterMappingElements) {
      String filterMappingElementFilterName=filterMappingElement.elementText("filter-name");
      if (filterMappingElementFilterName.equals(filterName)) {
        String urlPattern=getURLPattern(filterMappingElement);
        filterDefinition.addURLPattern(urlPattern);
      }
    }
    webXML.setFilterDefinition(filterName,filterDefinition);
  }
}
