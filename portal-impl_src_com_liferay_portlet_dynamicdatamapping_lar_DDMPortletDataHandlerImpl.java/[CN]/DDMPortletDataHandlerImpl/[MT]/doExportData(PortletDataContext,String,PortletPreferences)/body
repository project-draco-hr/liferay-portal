{
  portletDataContext.addPermissions("com.liferay.portlet.dynamicdatamapping",portletDataContext.getScopeGroupId());
  Document document=SAXReaderUtil.createDocument();
  Element rootElement=document.addElement("ddm-data");
  rootElement.addAttribute("group-id",String.valueOf(portletDataContext.getScopeGroupId()));
  Element structuresElement=rootElement.addElement("structures");
  List<DDMStructure> structures=DDMStructureUtil.findByGroupId(portletDataContext.getScopeGroupId());
  for (  DDMStructure structure : structures) {
    exportStructure(portletDataContext,structuresElement,structure);
  }
  if (portletDataContext.getBooleanParameter(_NAMESPACE,"templates")) {
    Element templatesElement=rootElement.addElement("templates");
    List<DDMTemplate> templates=DDMTemplateUtil.findByGroupId(portletDataContext.getScopeGroupId());
    for (    DDMTemplate template : templates) {
      exportTemplate(portletDataContext,templatesElement,template);
    }
  }
  return document.formattedString();
}
