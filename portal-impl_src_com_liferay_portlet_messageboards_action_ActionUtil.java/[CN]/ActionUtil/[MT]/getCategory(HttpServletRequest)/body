{
  ThemeDisplay themeDisplay=(ThemeDisplay)req.getAttribute(WebKeys.THEME_DISPLAY);
  MBBanLocalServiceUtil.checkBan(themeDisplay.getPortletGroupId(),themeDisplay.getUserId());
  long categoryId=ParamUtil.getLong(req,"categoryId");
  MBCategory category=null;
  if ((categoryId > 0) && (categoryId != MBCategoryImpl.DEFAULT_PARENT_CATEGORY_ID)) {
    category=MBCategoryServiceUtil.getCategory(categoryId);
  }
  req.setAttribute(WebKeys.MESSAGE_BOARDS_CATEGORY,category);
}
