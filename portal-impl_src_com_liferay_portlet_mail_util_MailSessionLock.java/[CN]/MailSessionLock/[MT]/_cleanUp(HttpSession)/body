{
  try {
    Folder folder=(Folder)ses.getAttribute(WebKeys.MAIL_FOLDER);
    if ((folder != null) && folder.isOpen()) {
      try {
        folder.close(false);
      }
 catch (      MessagingException me) {
        if (_log.isWarnEnabled()) {
          _log.warn(me);
        }
      }
      ses.removeAttribute(WebKeys.MAIL_FOLDER);
    }
    MailCache.clearCache(ses);
    ses.removeAttribute(WebKeys.MAIL_MESSAGE_ID);
  }
 catch (  Exception e) {
  }
synchronized (_sessionMap) {
    _sessionMap.remove(ses.getId());
  }
}
