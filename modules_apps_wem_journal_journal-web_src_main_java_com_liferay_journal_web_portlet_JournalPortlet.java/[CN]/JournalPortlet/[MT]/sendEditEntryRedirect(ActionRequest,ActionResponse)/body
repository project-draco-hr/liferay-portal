{
  String redirect=PortalUtil.escapeRedirect(ParamUtil.getString(actionRequest,"redirect"));
  WindowState windowState=actionRequest.getWindowState();
  if (!windowState.equals(LiferayWindowState.POP_UP)) {
    sendRedirect(actionRequest,actionResponse);
  }
 else   if (Validator.isNotNull(redirect)) {
    actionResponse.sendRedirect(redirect);
  }
}
