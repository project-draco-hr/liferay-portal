{
  if (PortalUtil.isMultipartRequest(request)) {
    UploadServletRequest uploadServletRequest=new UploadServletRequestImpl(request);
    request=uploadServletRequest;
  }
  String path=GetterUtil.getString(request.getPathInfo());
  if (path.equals(StringPool.SLASH) || path.equals(StringPool.BLANK)) {
    String uri=request.getRequestURI();
    int secureIndex=uri.indexOf("/secure/");
    if (secureIndex != -1) {
      uri=uri.substring(0,secureIndex) + uri.substring(secureIndex + 7);
      String query=request.getQueryString();
      if (query != null) {
        uri+=StringPool.QUESTION + query;
      }
      response.sendRedirect(uri);
      return;
    }
    List<JSONWebServiceActionMapping> mappings=JSONWebServiceActionsManagerUtil.getMappings();
    String action=request.getParameter("action");
    RequestDispatcher requestDispatcher=null;
    if (action == null) {
      request.setAttribute("mappings",mappings);
      requestDispatcher=request.getRequestDispatcher("/doc/jsonws-toc.jsp");
    }
 else {
      JSONWebServiceActionMapping jsonWebServiceActionMapping=JSONWebServiceActionsManagerUtil.lookupMapping(action);
      request.setAttribute("action",jsonWebServiceActionMapping);
      requestDispatcher=request.getRequestDispatcher("/doc/jsonws-entry.jsp");
    }
    requestDispatcher.forward(request,response);
    return;
  }
  super.service(request,response);
}
