{
  String tagName=token.getStartTag();
  if (_elementsBlock.contains(tagName)) {
    String lastTag=null;
    while (_tagsStack.size() > 0 && (lastTag=_tagsStack.lastElement()) != null && _elementsInline.contains(lastTag)) {
      _handleTagEnd(new BBCodeToken(lastTag));
    }
  }
  if (_elementsCloseSelf.contains(tagName) && _tagsStack.lastElement().equals(tagName)) {
    _handleTagEnd(new BBCodeToken(tagName));
  }
  _tagsStack.push(tagName);
  BBCodeItem item=new BBCodeItem(TOKEN_TAG_START,token.getAttribute(),tagName);
  _itemsList.add(item);
}
