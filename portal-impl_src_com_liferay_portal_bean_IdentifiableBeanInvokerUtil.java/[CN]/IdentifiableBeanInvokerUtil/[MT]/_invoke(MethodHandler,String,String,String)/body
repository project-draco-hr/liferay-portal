{
  ClassLoader contextClassLoader=ClassLoaderUtil.getContextClassLoader();
  ClassLoader classLoader=ClassLoaderPool.getClassLoader(threadContextServletContextName);
  ClassLoaderUtil.setContextClassLoader(classLoader);
  try {
    Object bean=null;
    if (identifiableBeanServletContextName.equals(PortalUtil.getServletContextName())) {
      bean=PortalBeanLocatorUtil.locate(beanIdentifier);
    }
 else {
      bean=PortletBeanLocatorUtil.locate(identifiableBeanServletContextName,beanIdentifier);
    }
    return methodHandler.invoke(bean);
  }
  finally {
    ClassLoaderUtil.setContextClassLoader(contextClassLoader);
  }
}
