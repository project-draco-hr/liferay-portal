{
  long permissionId=counterLocalService.increment(Permission.class.getName());
  Permission permission=permissionPersistence.create(permissionId);
  permission.setCompanyId(resource.getCompanyId());
  permission.setActionId(actionId);
  permission.setResourceId(resource.getResourceId());
  permissionPersistence.update(permission,false);
  List<String> groupDefaultActions=ResourceActionsUtil.getModelResourceGroupDefaultActions(resource.getName());
  if (groupDefaultActions.contains(actionId)) {
    addRolePermissions(RoleConstants.SITE_MEMBER,permission);
  }
  List<String> guestDefaultActions=ResourceActionsUtil.getModelResourceGuestDefaultActions(resource.getName());
  if (guestDefaultActions.contains(actionId)) {
    addRolePermissions(RoleConstants.GUEST,permission);
  }
  addRolePermissions(RoleConstants.OWNER,permission);
  SearchEngineUtil.updatePermissionFields(resource.getResourceId());
}
