{
  List<Permission> permissions=permissionPersistence.findByResourceId(resourceId);
  permissions=ListUtil.copy(permissions);
  Set<String> actionIdsSet=new HashSet<String>();
  for (  Permission permission : permissions) {
    actionIdsSet.add(permission.getActionId());
  }
  for (  String actionId : actionIds) {
    if (actionIdsSet.contains(actionId)) {
      continue;
    }
    long permissionId=counterLocalService.increment(Permission.class.getName());
    Permission permission=permissionPersistence.create(permissionId);
    permission.setCompanyId(companyId);
    permission.setActionId(actionId);
    permission.setResourceId(resourceId);
    permissionPersistence.update(permission,false);
    permissions.add(permission);
  }
  return permissions;
}
