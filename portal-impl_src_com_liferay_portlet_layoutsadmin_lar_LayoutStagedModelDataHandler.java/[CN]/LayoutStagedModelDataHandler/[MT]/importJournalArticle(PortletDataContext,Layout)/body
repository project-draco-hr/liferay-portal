{
  UnicodeProperties typeSettingsProperties=layout.getTypeSettingsProperties();
  String articleId=typeSettingsProperties.getProperty("article-id",StringPool.BLANK);
  if (Validator.isNull(articleId)) {
    return;
  }
  List<Element> referenceDataElements=portletDataContext.getReferenceDataElements(layout,JournalArticle.class);
  if (!referenceDataElements.isEmpty()) {
    StagedModelDataHandlerUtil.importReferenceStagedModel(portletDataContext,referenceDataElements.get(0));
  }
  Map<String,String> articleIds=(Map<String,String>)portletDataContext.getNewPrimaryKeysMap(JournalArticle.class + ".articleId");
  articleId=MapUtil.getString(articleIds,articleId,articleId);
  typeSettingsProperties.setProperty("article-id",articleId);
  JournalContentSearchLocalServiceUtil.updateContentSearch(portletDataContext.getScopeGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),StringPool.BLANK,articleId,true);
}
