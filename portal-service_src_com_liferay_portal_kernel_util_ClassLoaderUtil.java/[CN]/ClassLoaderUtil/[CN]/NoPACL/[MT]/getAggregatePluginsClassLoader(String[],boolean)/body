{
  ClassLoader[] classLoaders=null;
  int offset=0;
  if (addContextClassLoader) {
    classLoaders=new ClassLoader[servletContextNames.length + 1];
    Thread currentThread=Thread.currentThread();
    classLoaders[0]=currentThread.getContextClassLoader();
    offset=1;
  }
 else {
    classLoaders=new ClassLoader[servletContextNames.length];
  }
  for (int i=0; i < servletContextNames.length; i++) {
    classLoaders[offset + i]=ClassLoaderPool.getClassLoader(servletContextNames[i]);
  }
  return AggregateClassLoader.getAggregateClassLoader(classLoaders);
}
