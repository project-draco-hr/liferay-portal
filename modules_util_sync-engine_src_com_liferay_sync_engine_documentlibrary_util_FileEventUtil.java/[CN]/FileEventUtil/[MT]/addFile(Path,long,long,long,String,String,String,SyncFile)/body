{
  Map<String,Object> parameters=new HashMap<String,Object>();
  parameters.put("changeLog","");
  parameters.put("checksum",checksum);
  parameters.put("description","");
  parameters.put("filePath",filePath);
  parameters.put("folderId",folderId);
  parameters.put("mimeType",mimeType);
  parameters.put("repositoryId",repositoryId);
  SyncSite syncSite=SyncSiteService.fetchSyncSite(repositoryId,syncAccountId);
  if (syncSite.getType() != SyncSite.TYPE_SYSTEM) {
    parameters.put("serviceContext.groupPermissions","ADD_DISCUSSION,DELETE,UPDATE,VIEW");
  }
  if (syncSite.getType() == SyncSite.TYPE_OPEN) {
    parameters.put("serviceContext.guestPermissions","ADD_DISCUSSION,VIEW");
  }
  parameters.put("serviceContext.attributes.overwrite",true);
  parameters.put("sourceFileName",name);
  parameters.put("syncFile",syncFile);
  parameters.put("title",name);
  AddFileEntryEvent addFileEntryEvent=new AddFileEntryEvent(syncAccountId,parameters);
  addFileEntryEvent.run();
}
