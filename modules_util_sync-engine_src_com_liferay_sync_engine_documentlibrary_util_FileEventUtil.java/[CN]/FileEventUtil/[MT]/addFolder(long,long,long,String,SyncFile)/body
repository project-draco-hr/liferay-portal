{
  Map<String,Object> parameters=new HashMap<String,Object>();
  parameters.put("description","");
  parameters.put("name",name);
  parameters.put("parentFolderId",parentFolderId);
  parameters.put("repositoryId",repositoryId);
  parameters.put("serviceContext.attributes.overwrite",true);
  SyncSite syncSite=SyncSiteService.fetchSyncSite(repositoryId,syncAccountId);
  if (syncSite.getType() != SyncSite.TYPE_SYSTEM) {
    parameters.put("serviceContext.groupPermissions","ADD_DOCUMENT,ADD_SUBFOLDER,ADD_SHORTCUT,SUBSCRIBE,UPDATE," + "VIEW");
  }
  if (syncSite.getType() == SyncSite.TYPE_OPEN) {
    parameters.put("serviceContext.guestPermissions","VIEW");
  }
  parameters.put("syncFile",syncFile);
  AddFolderEvent addFolderEvent=new AddFolderEvent(syncAccountId,parameters);
  addFolderEvent.run();
}
