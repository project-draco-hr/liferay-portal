{
  List<SyncFile> downloadingSyncFiles=SyncFileService.findSyncFiles(syncAccountId,SyncFile.UI_EVENT_DOWNLOADING);
  for (  SyncFile downloadingSyncFile : downloadingSyncFiles) {
    downloadFile(syncAccountId,downloadingSyncFile);
  }
  List<SyncFile> uploadingSyncFiles=SyncFileService.findSyncFiles(syncAccountId,SyncFile.UI_EVENT_UPLOADING);
  for (  SyncFile uploadingSyncFile : uploadingSyncFiles) {
    Path filePath=Paths.get(uploadingSyncFile.getFilePathName());
    if (Files.notExists(filePath)) {
      continue;
    }
    String checksum=FileUtil.getChecksum(filePath);
    uploadingSyncFile.setChecksum(checksum);
    SyncFileService.update(uploadingSyncFile);
    if (uploadingSyncFile.getTypePK() > 0) {
      updateFile(filePath,syncAccountId,uploadingSyncFile,null,uploadingSyncFile.getName(),null,null,null,checksum);
    }
 else {
      addFile(filePath,uploadingSyncFile.getParentFolderId(),uploadingSyncFile.getRepositoryId(),syncAccountId,checksum,uploadingSyncFile.getName(),uploadingSyncFile.getMimeType(),uploadingSyncFile);
    }
  }
}
