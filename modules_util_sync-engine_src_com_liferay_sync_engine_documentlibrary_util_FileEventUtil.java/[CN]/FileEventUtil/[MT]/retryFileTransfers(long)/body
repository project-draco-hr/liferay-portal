{
  List<SyncFile> downloadingSyncFiles=SyncFileService.findSyncFiles(syncAccountId,SyncFile.UI_EVENT_DOWNLOADING);
  for (  SyncFile downloadingSyncFile : downloadingSyncFiles) {
    downloadFile(syncAccountId,downloadingSyncFile);
  }
  List<SyncFile> uploadingSyncFiles=SyncFileService.findSyncFiles(syncAccountId,SyncFile.UI_EVENT_UPLOADING);
  for (  SyncFile uploadingSyncFile : uploadingSyncFiles) {
    Path filePath=Paths.get(uploadingSyncFile.getFilePathName());
    if (Files.notExists(filePath)) {
      continue;
    }
    if (uploadingSyncFile.isFolder()) {
      if (uploadingSyncFile.getTypePK() > 0) {
        updateFolder(filePath,uploadingSyncFile.getSyncAccountId(),uploadingSyncFile);
      }
 else {
        addFolder(uploadingSyncFile.getParentFolderId(),uploadingSyncFile.getRepositoryId(),syncAccountId,uploadingSyncFile.getName(),uploadingSyncFile);
      }
      continue;
    }
    String checksum=FileUtil.getChecksum(filePath);
    uploadingSyncFile.setChecksum(checksum);
    SyncFileService.update(uploadingSyncFile);
    if (uploadingSyncFile.getTypePK() > 0) {
      updateFile(filePath,syncAccountId,uploadingSyncFile,null,uploadingSyncFile.getName(),"",null,0,checksum);
    }
 else {
      addFile(filePath,uploadingSyncFile.getParentFolderId(),uploadingSyncFile.getRepositoryId(),syncAccountId,checksum,uploadingSyncFile.getName(),uploadingSyncFile.getMimeType(),uploadingSyncFile);
    }
  }
  List<SyncFile> movingSyncFiles=SyncFileService.findSyncFiles(syncAccountId,SyncFile.UI_EVENT_MOVED_LOCAL);
  for (  SyncFile movingSyncFile : movingSyncFiles) {
    if (movingSyncFile.isFolder()) {
      moveFolder(movingSyncFile.getParentFolderId(),syncAccountId,movingSyncFile);
    }
 else {
      moveFile(movingSyncFile.getParentFolderId(),syncAccountId,movingSyncFile);
    }
  }
}
