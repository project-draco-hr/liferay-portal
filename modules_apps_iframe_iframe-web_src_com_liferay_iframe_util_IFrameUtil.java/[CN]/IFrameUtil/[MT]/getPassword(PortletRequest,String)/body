{
  if (!isPasswordTokenEnabled(portletRequest)) {
    return StringPool.BLANK;
  }
  if (Validator.isNull(password) || password.equals("@password@")) {
    password=PortalUtil.getUserPassword(portletRequest);
    if (password == null) {
      password=StringPool.BLANK;
    }
  }
  return password;
}
