{
  FabricAgentRegistry fabricAgentRegistry=new FabricAgentRegistry(new LocalFabricAgent(new EmbeddedProcessExecutor()));
  Recorder recorder1=new Recorder();
  Assert.assertTrue(fabricAgentRegistry.registerFabricAgentListener(recorder1));
  Assert.assertFalse(fabricAgentRegistry.registerFabricAgentListener(recorder1));
  List<FabricAgentListener> fabricAgentListeners=fabricAgentRegistry.getFabricAgentListeners();
  Assert.assertEquals(1,fabricAgentListeners.size());
  Assert.assertTrue(fabricAgentListeners.contains(recorder1));
  Recorder recorder2=new Recorder();
  Assert.assertTrue(fabricAgentRegistry.registerFabricAgentListener(recorder2));
  Assert.assertFalse(fabricAgentRegistry.registerFabricAgentListener(recorder2));
  fabricAgentListeners=fabricAgentRegistry.getFabricAgentListeners();
  Assert.assertEquals(2,fabricAgentListeners.size());
  Assert.assertTrue(fabricAgentListeners.contains(recorder1));
  Assert.assertTrue(fabricAgentListeners.contains(recorder2));
  Assert.assertTrue(fabricAgentRegistry.unregisterFabricAgentListener(recorder1));
  Assert.assertFalse(fabricAgentRegistry.unregisterFabricAgentListener(recorder1));
  fabricAgentListeners=fabricAgentRegistry.getFabricAgentListeners();
  Assert.assertEquals(1,fabricAgentListeners.size());
  Assert.assertTrue(fabricAgentListeners.contains(recorder2));
  Assert.assertTrue(fabricAgentRegistry.unregisterFabricAgentListener(recorder2));
  Assert.assertFalse(fabricAgentRegistry.unregisterFabricAgentListener(recorder2));
  fabricAgentListeners=fabricAgentRegistry.getFabricAgentListeners();
  Assert.assertTrue(fabricAgentListeners.isEmpty());
}
