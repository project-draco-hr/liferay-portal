{
  FabricAgentRegistry fabricAgentRegistry=new FabricAgentRegistry(new LocalFabricAgent(new EmbeddedProcessExecutor()));
  RecordFabricAgentListener recordFabricAgentListener1=new RecordFabricAgentListener();
  Assert.assertTrue(fabricAgentRegistry.registerFabricAgentListener(recordFabricAgentListener1));
  Assert.assertFalse(fabricAgentRegistry.registerFabricAgentListener(recordFabricAgentListener1));
  List<FabricAgentListener> fabricAgentListeners=fabricAgentRegistry.getFabricAgentListeners();
  Assert.assertEquals(1,fabricAgentListeners.size());
  Assert.assertTrue(fabricAgentListeners.contains(recordFabricAgentListener1));
  RecordFabricAgentListener recordFabricAgentListener2=new RecordFabricAgentListener();
  Assert.assertTrue(fabricAgentRegistry.registerFabricAgentListener(recordFabricAgentListener2));
  Assert.assertFalse(fabricAgentRegistry.registerFabricAgentListener(recordFabricAgentListener2));
  fabricAgentListeners=fabricAgentRegistry.getFabricAgentListeners();
  Assert.assertEquals(2,fabricAgentListeners.size());
  Assert.assertTrue(fabricAgentListeners.contains(recordFabricAgentListener1));
  Assert.assertTrue(fabricAgentListeners.contains(recordFabricAgentListener2));
  Assert.assertTrue(fabricAgentRegistry.unregisterFabricAgentListener(recordFabricAgentListener1));
  Assert.assertFalse(fabricAgentRegistry.unregisterFabricAgentListener(recordFabricAgentListener1));
  fabricAgentListeners=fabricAgentRegistry.getFabricAgentListeners();
  Assert.assertEquals(1,fabricAgentListeners.size());
  Assert.assertTrue(fabricAgentListeners.contains(recordFabricAgentListener2));
  Assert.assertTrue(fabricAgentRegistry.unregisterFabricAgentListener(recordFabricAgentListener2));
  Assert.assertFalse(fabricAgentRegistry.unregisterFabricAgentListener(recordFabricAgentListener2));
  fabricAgentListeners=fabricAgentRegistry.getFabricAgentListeners();
  Assert.assertTrue(fabricAgentListeners.isEmpty());
}
