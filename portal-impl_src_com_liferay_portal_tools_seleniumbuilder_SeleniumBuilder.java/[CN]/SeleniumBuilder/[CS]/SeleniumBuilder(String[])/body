{
  Map<String,String> arguments=ArgumentsUtil.parseArguments(args);
  String baseDirName=arguments.get("selenium.base.dir");
  String projectDirName=arguments.get("project.dir");
  _seleniumBuilderFileUtil=new SeleniumBuilderFileUtil(baseDirName,projectDirName);
  _seleniumBuilderContext=new SeleniumBuilderContext(_seleniumBuilderFileUtil);
  Set<String> types=SetUtil.fromArray(StringUtil.split(arguments.get("selenium.types")));
  Set<String> actionNames=_seleniumBuilderContext.getActionNames();
  for (  String actionName : actionNames) {
    _seleniumBuilderContext.validateActionElements(actionName);
  }
  Set<String> functionNames=_seleniumBuilderContext.getFunctionNames();
  for (  String functionName : functionNames) {
    _seleniumBuilderContext.validateFunctionElements(functionName);
  }
  Set<String> macroNames=_seleniumBuilderContext.getMacroNames();
  for (  String macroName : macroNames) {
    _seleniumBuilderContext.validateMacroElements(macroName);
  }
  Set<String> testCaseNames=_seleniumBuilderContext.getTestCaseNames();
  for (  String testCaseName : testCaseNames) {
    _seleniumBuilderContext.validateTestCaseElements(testCaseName);
  }
  if (types.contains("action")) {
    ActionConverter actionConverter=new ActionConverter(_seleniumBuilderContext,_seleniumBuilderFileUtil);
    for (    String actionName : actionNames) {
      actionConverter.convert(actionName);
    }
  }
  if (types.contains("function")) {
    FunctionConverter functionConverter=new FunctionConverter(_seleniumBuilderContext,_seleniumBuilderFileUtil);
    for (    String functionName : functionNames) {
      functionConverter.convert(functionName);
    }
  }
  if (types.contains("macro")) {
    MacroConverter macroConverter=new MacroConverter(_seleniumBuilderContext,_seleniumBuilderFileUtil);
    for (    String macroName : macroNames) {
      macroConverter.convert(macroName);
    }
  }
  if (types.contains("path")) {
    PathConverter pathConverter=new PathConverter(_seleniumBuilderContext,_seleniumBuilderFileUtil);
    Set<String> pathNames=_seleniumBuilderContext.getPathNames();
    for (    String pathName : pathNames) {
      pathConverter.convert(pathName);
    }
  }
  if (types.contains("testcase")) {
    TestCaseConverter testCaseConverter=new TestCaseConverter(_seleniumBuilderContext,_seleniumBuilderFileUtil);
    String testClass=arguments.get("test.class");
    if (!testClass.equals("${test.class}")) {
      String testCaseCommandName=null;
      String testCaseName=null;
      if (testClass.contains("#")) {
        String[] testClassParts=StringUtil.split(testClass,"#");
        testCaseCommandName=testClassParts[1];
        testCaseName=testClassParts[0];
      }
 else {
        testCaseName=testClass;
      }
      if ((testCaseCommandName != null) && testCaseCommandName.startsWith("test")) {
        testCaseCommandName=StringUtil.replaceFirst(testCaseCommandName,"test","");
      }
      if (testCaseName.endsWith("TestCase")) {
        testCaseName=StringUtil.replaceLast(testCaseName,"TestCase","");
      }
      Element rootElement=_seleniumBuilderContext.getTestCaseRootElement(testCaseName);
      String extendsTestCaseName=rootElement.attributeValue("extends");
      if (extendsTestCaseName != null) {
        testCaseConverter.convert(extendsTestCaseName,testCaseCommandName);
      }
      testCaseConverter.convert(testCaseName,testCaseCommandName);
    }
  }
  _writeTestCaseMethodNamesFile();
  _writeTestCasePropertiesFile();
  System.out.println("\nThere are " + _getTestCaseMethodCount() + " test cases.");
}
