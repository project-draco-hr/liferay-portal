{
  Portlet portlet=PortletLocalServiceUtil.getPortletById(PortletKeys.ASSET_PUBLISHER);
  _portletDataContext.addReferenceElement(portlet,_portletDataContext.getExportDataRootElement(),_mockBookmarksEntry,PortletDataContext.REFERENCE_TYPE_DEPENDENCY,true);
  _portletDataContext.addReferenceElement(portlet,_portletDataContext.getExportDataRootElement(),_mockBookmarksEntry,PortletDataContext.REFERENCE_TYPE_DEPENDENCY,true);
  Element missingReferencesElement=_portletDataContext.getMissingReferencesElement();
  List<Element> missingReferenceElements=missingReferencesElement.elements();
  Assert.assertFalse(missingReferenceElements.isEmpty());
  Assert.assertEquals(1,missingReferenceElements.size());
  Element missingReferenceElement=missingReferenceElements.get(0);
  Assert.assertEquals(MockBookmarksEntry.class.getName(),missingReferenceElement.attributeValue("class-name"));
  Assert.assertEquals(String.valueOf(_mockBookmarksEntry.getPrimaryKeyObj()),missingReferenceElement.attributeValue("class-pk"));
}
