{
  User user=userPersistence.findByPrimaryKey(userId);
  if (user.isDefaultUser()) {
    return true;
  }
  MBMessageFlag messageFlag=mbMessageFlagPersistence.fetchByU_M_F(userId,thread.getRootMessageId(),MBMessageFlagImpl.READ_FLAG);
  if ((messageFlag != null) && (DateUtil.equals(messageFlag.getModifiedDate(),thread.getLastPostDate(),true))) {
    return true;
  }
 else {
    return false;
  }
}
