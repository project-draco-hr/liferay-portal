{
  ParserOutput parserOutput=getParserOutput(page);
  Map<String,Boolean> outgoingLinks=new HashMap<String,Boolean>();
  for (  String title : parserOutput.getLinks()) {
    Boolean existsObj=outgoingLinks.get(title);
    if (existsObj == null) {
      int pagesCount=0;
      try {
        pagesCount=WikiPageLocalServiceUtil.getPagesCount(page.getNodeId(),title,true);
      }
 catch (      SystemException se) {
        throw new PageContentException(se);
      }
      if (pagesCount > 0) {
        existsObj=Boolean.TRUE;
      }
 else {
        existsObj=Boolean.FALSE;
        if (StringUtil.startsWith(title,"image:")) {
          continue;
        }
      }
      outgoingLinks.put(title.toLowerCase(),existsObj);
    }
  }
  return outgoingLinks;
}
