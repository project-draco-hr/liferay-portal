{
  String ddmResource=ParamUtil.getString(serviceContext,"ddmResource");
  String ddmResourceActionId=ParamUtil.getString(serviceContext,"ddmResourceActionId");
  if (Validator.isNull(ddmResourceActionId)) {
    if (ddmResource.equals(_DDL_CLASS_NAME)) {
      ddmResourceActionId=ActionKeys.ADD_TEMPLATE;
    }
 else {
      ddmResourceActionId=ActionKeys.ADD_PORTLET_DISPLAY_TEMPLATE;
    }
  }
  DDMPermission.check(getPermissionChecker(),serviceContext.getScopeGroupId(),ddmResource,ddmResourceActionId);
  return ddmTemplateLocalService.addTemplate(getUserId(),groupId,classNameId,classPK,templateKey,nameMap,descriptionMap,type,mode,language,script,cacheable,serviceContext);
}
