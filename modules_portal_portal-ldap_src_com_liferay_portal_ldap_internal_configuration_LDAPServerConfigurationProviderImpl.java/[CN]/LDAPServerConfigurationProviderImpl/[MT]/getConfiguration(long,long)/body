{
  Map<Long,LDAPServerConfiguration> ldapServerConfigurations=_ldapServerConfigurations.get(companyId);
  if (MapUtil.isEmpty(ldapServerConfigurations)) {
    ldapServerConfigurations=_ldapServerConfigurations.get(0L);
  }
  if (MapUtil.isEmpty(ldapServerConfigurations)) {
    throw new IllegalArgumentException("No default LDAP server configuration found");
  }
  LDAPServerConfiguration ldapServerConfiguration=ldapServerConfigurations.get(ldapServerId);
  if (ldapServerConfiguration == null) {
    throw new IllegalArgumentException("No LDAP server configuration found for company " + companyId + " and LDAP server "+ ldapServerId);
  }
  return ldapServerConfiguration;
}
