{
  try {
    InputStream inputStream=_socket.getInputStream();
    OutputStream outputStream=_socket.getOutputStream();
    int command=0;
    while ((command=inputStream.read()) != -1) {
switch (command) {
case _echo:
        outputStream.write(_echo);
      outputStream.flush();
    break;
case _exit:
  _socket.close();
break;
case _interrupt:
Thread heartbeatThread=_getHeartbeatThread(false);
heartbeatThread.interrupt();
heartbeatThread.join();
_socket.close();
break;
case _nullOutOOS:
Field objectOutputStreamField=_getObjectOutputStreamField();
ProcessOutputStream processOutputStream=ProcessContext.getProcessOutputStream();
objectOutputStreamField.set(processOutputStream,null);
outputStream.write(_nullOutOOS);
outputStream.flush();
break;
}
}
}
 catch (Exception e) {
}
 finally {
try {
_socket.close();
_mainThread.interrupt();
}
 catch (IOException ioe) {
}
}
}
