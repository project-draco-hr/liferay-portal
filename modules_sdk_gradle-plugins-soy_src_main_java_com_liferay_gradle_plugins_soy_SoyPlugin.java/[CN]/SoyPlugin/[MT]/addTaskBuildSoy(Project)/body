{
  BuildSoyTask buildSoyTask=GradleUtil.addTask(project,BUILD_SOY_TASK_NAME,BuildSoyTask.class);
  buildSoyTask.setDescription("Compiles Closure Templates into JavaScript functions.");
  buildSoyTask.setGroup(BasePlugin.BUILD_GROUP);
  buildSoyTask.setClasspath(new Callable<FileCollection>(){
    @Override public FileCollection call() throws Exception {
      SourceSet sourceSet=GradleUtil.getSourceSet(project,SourceSet.MAIN_SOURCE_SET_NAME);
      return sourceSet.getCompileClasspath();
    }
  }
);
  buildSoyTask.setIncludes(Collections.singleton("**/*.soy"));
  buildSoyTask.setSource(new Callable<File>(){
    @Override public File call() throws Exception {
      return getResourcesDir(project);
    }
  }
);
  return buildSoyTask;
}
