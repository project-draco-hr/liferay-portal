{
  String subjectPrefix=GetterUtil.getString(portletPreferences.getValue(subjectPrefixName,StringPool.BLANK));
  if (Validator.isNotNull(subjectPrefix)) {
    String subject=subjectPrefix;
    if (!subjectPrefix.contains("[$MESSAGE_SUBJECT$]")) {
      subject=subject.concat(" [$MESSAGE_SUBJECT$]");
    }
    portletPreferences.setValue(subjectName,subject);
  }
  portletPreferences.reset(subjectPrefixName);
  return portletPreferences;
}
