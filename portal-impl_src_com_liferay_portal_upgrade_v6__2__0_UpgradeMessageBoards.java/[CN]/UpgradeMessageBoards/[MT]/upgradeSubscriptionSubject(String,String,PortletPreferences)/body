{
  String subjectPrefixValue=GetterUtil.getString(portletPreferences.getValue(oldValueKey,StringPool.BLANK));
  if (Validator.isNotNull(subjectPrefixValue)) {
    String subjectValue=subjectPrefixValue;
    if (!subjectPrefixValue.contains("[$MESSAGE_SUBJECT$]")) {
      subjectValue=subjectValue.concat(" [$MESSAGE_SUBJECT$]");
    }
    portletPreferences.setValue(valueKey,subjectValue);
  }
  portletPreferences.reset(oldValueKey);
  return portletPreferences;
}
