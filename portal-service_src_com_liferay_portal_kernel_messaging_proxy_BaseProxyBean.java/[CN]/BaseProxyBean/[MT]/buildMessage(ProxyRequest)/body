{
  Message message=new Message();
  message.setPayload(proxyRequest);
  Map<String,Object> values=MessageValuesThreadLocal.getValues();
  if (!values.isEmpty()) {
    for (    String key : values.keySet()) {
      message.put(key,values.get(key));
    }
  }
  if (proxyRequest.isLocal()) {
    message.put(MessagingProxy.LOCAL_MESSAGE,Boolean.TRUE);
  }
  return message;
}
