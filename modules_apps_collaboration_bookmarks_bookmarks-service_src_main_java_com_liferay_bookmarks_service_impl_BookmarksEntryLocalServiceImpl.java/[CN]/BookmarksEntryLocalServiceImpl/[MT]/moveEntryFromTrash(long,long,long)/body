{
  BookmarksEntry entry=getBookmarksEntry(entryId);
  if (!entry.isInTrash()) {
    throw new RestoreEntryException(RestoreEntryException.INVALID_STATUS);
  }
  if (entry.isInTrashExplicitly()) {
    restoreEntryFromTrash(userId,entryId);
  }
 else {
    TrashVersion trashVersion=trashVersionLocalService.fetchVersion(BookmarksEntry.class.getName(),entryId);
    int status=WorkflowConstants.STATUS_APPROVED;
    if (trashVersion != null) {
      status=trashVersion.getStatus();
    }
    updateStatus(userId,entry,status);
    if (trashVersion != null) {
      trashVersionLocalService.deleteTrashVersion(trashVersion);
    }
  }
  return bookmarksEntryLocalService.moveEntry(entryId,parentFolderId);
}
