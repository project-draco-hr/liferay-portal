{
  Class sessionFactoryInterface=SessionFactory.class;
  if (target instanceof SessionFactoryImplementor) {
    sessionFactoryInterface=SessionFactoryImplementor.class;
  }
  return (SessionFactory)Proxy.newProxyInstance(sessionFactoryInterface.getClassLoader(),new Class[]{sessionFactoryInterface},new SessionFactoryInvocationHandler(target));
}
