{
  if (_installedApps != null) {
    return _installedApps;
  }
  List<App> installedApps=new ArrayList<>();
  App coreApp=appPersistence.create(0);
  coreApp.setTitle("Liferay Core");
  coreApp.setDescription("Plugins bundled with Liferay Portal.");
  coreApp.setVersion(ReleaseInfo.getVersion());
  coreApp.addContextName(PortalUtil.getServletContextName());
  installedApps.add(coreApp);
  List<PluginPackage> pluginPackages=DeployManagerUtil.getInstalledPluginPackages();
  for (  PluginPackage pluginPackage : pluginPackages) {
    List<Module> modules=modulePersistence.findByContextName(pluginPackage.getContext());
    boolean installedApp=false;
    for (    Module module : modules) {
      App app=appPersistence.fetchByPrimaryKey(module.getAppId());
      if ((app != null) && app.isInstalled()) {
        installedApp=true;
        break;
      }
    }
    if (installedApp) {
      continue;
    }
    App app=appPersistence.create(0);
    app.setTitle(pluginPackage.getName());
    app.setDescription(pluginPackage.getLongDescription());
    app.setVersion(pluginPackage.getVersion());
    app.addContextName(pluginPackage.getContext());
    installedApps.add(app);
  }
  List<App> apps=appPersistence.findAll();
  for (  App app : apps) {
    if (app.isInstalled()) {
      installedApps.add(app);
    }
  }
  installedApps=ListUtil.sort(installedApps,new AppTitleComparator());
  _installedApps=installedApps;
  return _installedApps;
}
