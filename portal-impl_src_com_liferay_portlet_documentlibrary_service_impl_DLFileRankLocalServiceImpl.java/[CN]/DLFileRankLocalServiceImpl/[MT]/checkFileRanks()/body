{
  List<Object[]> staleFileRanks=dlFileRankFinder.findByStaleRanks(PropsValues.DL_FILE_RANK_MAX_SIZE);
  for (  Object[] staleFileRank : staleFileRanks) {
    long groupId=(Long)staleFileRank[0];
    long userId=(Long)staleFileRank[1];
    List<DLFileRank> dlFileRanks=dlFileRankPersistence.findByG_U_A(groupId,userId,true,PropsValues.DL_FILE_RANK_MAX_SIZE,QueryUtil.ALL_POS,new FileRankCreateDateComparator());
    for (    DLFileRank dlFileRank : dlFileRanks) {
      long fileRankId=dlFileRank.getFileRankId();
      try {
        dlFileRankPersistence.remove(dlFileRank);
      }
 catch (      Exception e) {
        if (_log.isWarnEnabled()) {
          _log.warn("Unable to remove file rank " + fileRankId);
        }
      }
    }
  }
}
