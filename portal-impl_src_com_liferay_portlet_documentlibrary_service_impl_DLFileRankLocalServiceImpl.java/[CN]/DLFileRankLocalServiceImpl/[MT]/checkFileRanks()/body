{
  List<Object[]> staleFileRanks=dlFileRankFinder.findByStaleRanks(PropsValues.DL_FILE_RANK_MAX_SIZE);
  for (  Object[] staleFileRank : staleFileRanks) {
    long groupId=(Long)staleFileRank[0];
    long userId=(Long)staleFileRank[1];
    List<DLFileRank> fileRanks=dlFileRankPersistence.findByG_U(groupId,userId,PropsValues.DL_FILE_RANK_MAX_SIZE,QueryUtil.ALL_POS,new FileRankCreateDateComparator());
    for (    DLFileRank fileRank : fileRanks) {
      long fileRankId=fileRank.getFileRankId();
      try {
        dlFileRankPersistence.remove(fileRank);
      }
 catch (      Exception e) {
        if (_log.isWarnEnabled()) {
          _log.warn("Unable to remove file rank " + fileRankId);
        }
      }
    }
  }
}
