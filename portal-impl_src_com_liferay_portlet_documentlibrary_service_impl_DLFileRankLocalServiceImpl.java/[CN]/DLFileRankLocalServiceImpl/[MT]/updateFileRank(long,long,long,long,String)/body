{
  if (!PropsValues.DL_FILE_RANK_ENABLED) {
    return null;
  }
  DLFileRank fileRank=dlFileRankPersistence.fetchByC_U_F_N(companyId,userId,folderId,name);
  if (fileRank != null) {
    fileRank.setCreateDate(new Date());
    dlFileRankPersistence.update(fileRank,false);
  }
 else {
    fileRank=addFileRank(groupId,companyId,userId,folderId,name);
  }
  if (dlFileRankPersistence.countByG_U(groupId,userId) > 5) {
    List<DLFileRank> fileRanks=getFileRanks(groupId,userId);
    DLFileRank lastFileRank=fileRanks.get(fileRanks.size() - 1);
    dlFileRankPersistence.remove(lastFileRank);
  }
  return fileRank;
}
