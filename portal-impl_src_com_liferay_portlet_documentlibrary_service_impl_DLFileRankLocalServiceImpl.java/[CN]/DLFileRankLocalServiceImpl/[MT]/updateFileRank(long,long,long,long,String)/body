{
  try {
    DLFileRankUtil.removeByC_U_F_N(companyId,userId,folderId,name);
  }
 catch (  NoSuchFileRankException nsfre) {
  }
  long fileRankId=CounterLocalServiceUtil.increment();
  DLFileRank fileRank=DLFileRankUtil.create(fileRankId);
  fileRank.setCompanyId(companyId);
  fileRank.setUserId(userId);
  fileRank.setCreateDate(new Date());
  fileRank.setFolderId(folderId);
  fileRank.setName(name);
  DLFileRankUtil.update(fileRank);
  if (DLFileRankFinder.countByG_U(groupId,userId) > 5) {
    List fileRanks=DLFileRankFinder.findByG_U(groupId,userId);
    DLFileRank lastFileRank=(DLFileRank)fileRanks.get(fileRanks.size() - 1);
    DLFileRankUtil.remove(lastFileRank.getPrimaryKey());
  }
  return fileRank;
}
