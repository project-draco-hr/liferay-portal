{
  if ((item.getCategoryId() != categoryId) && (categoryId != ShoppingCategoryConstants.DEFAULT_PARENT_CATEGORY_ID)) {
    ShoppingCategory newCategory=shoppingCategoryPersistence.fetchByPrimaryKey(categoryId);
    if ((newCategory == null) || (item.getGroupId() != newCategory.getGroupId())) {
      categoryId=item.getCategoryId();
    }
  }
  return categoryId;
}
