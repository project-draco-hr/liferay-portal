{
  for (  long forbiddenGroupId : getForbiddenGroupIds()) {
    if (forbiddenGroupId == 0) {
      continue;
    }
    if (ArrayUtil.contains(addGroupIds,forbiddenGroupId)) {
      throw new MembershipPolicyException(MembershipPolicyException.SITE_MEMBERSHIP_NOT_ALLOWED);
    }
  }
  for (  long requiredGroupId : getRequiredGroupIds()) {
    if (requiredGroupId == 0) {
      continue;
    }
    if (ArrayUtil.contains(removeGroupIds,requiredGroupId)) {
      throw new MembershipPolicyException(MembershipPolicyException.SITE_MEMBERSHIP_REQUIRED);
    }
  }
}
