{
  long[] addUserGroupRoleIds=new long[2];
  long[] removeUserGroupRoleIds=new long[2];
  if ((addUserGroupRoles != null) && !addUserGroupRoles.isEmpty()) {
    for (    UserGroupRole addUserGroupRole : addUserGroupRoles) {
      addUserGroupRoleIds[0]=addUserGroupRole.getRoleId();
    }
  }
  if ((removeUserGroupRoles != null) && !removeUserGroupRoles.isEmpty()) {
    for (    UserGroupRole removeUserGroupRole : removeUserGroupRoles) {
      removeUserGroupRoleIds[0]=removeUserGroupRole.getRoleId();
    }
  }
  for (  long forbiddenGroupRoleId : getForbiddenGroupRoleIds()) {
    if (forbiddenGroupRoleId == 0) {
      continue;
    }
    if (ArrayUtil.contains(addUserGroupRoleIds,forbiddenGroupRoleId)) {
      throw new MembershipPolicyException(MembershipPolicyException.ROLE_MEMBERSHIP_NOT_ALLOWED);
    }
  }
  for (  long requiredGroupRoleId : getRequiredGroupRoleIds()) {
    if (requiredGroupRoleId == 0) {
      continue;
    }
    if (ArrayUtil.contains(removeUserGroupRoleIds,requiredGroupRoleId)) {
      throw new MembershipPolicyException(MembershipPolicyException.ROLE_MEMBERSHIP_REQUIRED);
    }
  }
}
