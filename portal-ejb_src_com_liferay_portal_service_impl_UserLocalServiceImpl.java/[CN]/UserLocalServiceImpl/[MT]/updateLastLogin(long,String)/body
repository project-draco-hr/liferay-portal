{
  User user=UserUtil.findByPrimaryKey(userId);
  user.setLoginDate(new Date());
  user.setLoginIP(loginIP);
  user.setLastLoginDate(user.getLoginDate());
  user.setLastLoginIP(user.getLoginIP());
  user.setLastFailedLoginDate(null);
  user.setFailedLoginAttempts(0);
  UserUtil.update(user);
  return user;
}
