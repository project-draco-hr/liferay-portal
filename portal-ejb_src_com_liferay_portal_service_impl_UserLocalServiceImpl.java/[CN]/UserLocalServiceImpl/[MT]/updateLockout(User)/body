{
  PasswordPolicy passwordPolicy=user.getPasswordPolicy();
  if (passwordPolicy.getLockout()) {
    int failedLoginAttempts=user.getFailedLoginAttempts();
    int maxFailures=passwordPolicy.getMaxFailure();
    if (passwordPolicy.getLockout() && (failedLoginAttempts >= maxFailures)) {
      Date now=new Date();
      user.setLockout(true);
      user.setLockoutDate(now);
      UserUtil.update(user);
    }
  }
}
