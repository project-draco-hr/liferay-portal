{
  userId=userId.trim().toLowerCase();
  if (!GetterUtil.getBoolean(PropsUtil.get(PropsUtil.USERS_DELETE))) {
    throw new RequiredUserException();
  }
  User user=UserUtil.findByPrimaryKey(userId);
  Group group=user.getGroup();
  if (group != null) {
    GroupLocalServiceUtil.deleteGroup(group.getGroupId());
  }
  ImageLocalUtil.remove(userId);
  PasswordTrackerLocalServiceUtil.deletePasswordTrackers(userId);
  UserIdMapperLocalServiceUtil.deleteUserIdMappers(userId);
  ABContactLocalServiceUtil.deleteAll(userId);
  ABListLocalServiceUtil.deleteAll(userId);
  DLFileRankLocalServiceUtil.deleteFileRanks(userId);
  MBMessageFlagLocalServiceUtil.deleteFlags(userId);
  ShoppingCartLocalServiceUtil.deleteUserCarts(userId);
  MailServiceUtil.deleteUser(userId);
  ContactLocalServiceUtil.deleteContact(userId);
  ResourceLocalServiceUtil.deleteResource(user.getCompanyId(),User.class.getName(),Resource.TYPE_CLASS,Resource.SCOPE_INDIVIDUAL,user.getPrimaryKey().toString());
  UserUtil.remove(userId);
}
