{
  _mockRemoteSPI.setFailOnStop(true);
  SPIShutdownHook spiShutdownHook=_mockRemoteSPI.new SPIShutdownHook();
  try (CaptureHandler captureHandler=JDKLoggerTestUtil.configureJDKLogger(RemoteSPI.class.getName(),Level.SEVERE)){
    Assert.assertTrue(spiShutdownHook.shutdown(0,null));
    List<LogRecord> logRecords=captureHandler.getLogRecords();
    Assert.assertEquals(2,logRecords.size());
    LogRecord logRecord=logRecords.get(0);
    Assert.assertEquals("Unable to stop SPI",logRecord.getMessage());
    Throwable throwable=logRecord.getThrown();
    Assert.assertSame(RemoteException.class,throwable.getClass());
    logRecord=logRecords.get(1);
    Assert.assertEquals("Unable to destroy SPI",logRecord.getMessage());
    throwable=logRecord.getThrown();
    Assert.assertSame(NoSuchObjectException.class,throwable.getClass());
  }
 }
