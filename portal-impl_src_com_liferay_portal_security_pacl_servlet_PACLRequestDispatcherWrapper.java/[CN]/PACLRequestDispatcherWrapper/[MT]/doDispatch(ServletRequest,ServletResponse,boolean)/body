{
  ClassLoader contextClassLoader=ClassLoaderUtil.getContextClassLoader();
  ClassLoader pluginClassLoader=(ClassLoader)_servletContext.getAttribute(PluginContextListener.PLUGIN_CLASS_LOADER);
  PACLPolicy paclPolicy=PortalSecurityManagerThreadLocal.getPACLPolicy();
  try {
    if (pluginClassLoader == null) {
      PortalSecurityManagerThreadLocal.setPACLPolicy(null);
      ClassLoaderUtil.setContextClassLoader(ClassLoaderUtil.getPortalClassLoader());
    }
 else {
      PACLPolicy pluginPACLPolicy=PACLPolicyManager.getPACLPolicy(pluginClassLoader);
      PortalSecurityManagerThreadLocal.setPACLPolicy(pluginPACLPolicy);
      ClassLoaderUtil.setContextClassLoader(pluginClassLoader);
    }
    if (include) {
      _requestDispatcher.include(servletRequest,servletResponse);
    }
 else {
      _requestDispatcher.forward(servletRequest,servletResponse);
    }
  }
  finally {
    ClassLoaderUtil.setContextClassLoader(contextClassLoader);
    PortalSecurityManagerThreadLocal.setPACLPolicy(paclPolicy);
  }
}
