{
  Registry registry=RegistryUtil.getRegistry();
  InterfaceBoth one=new InterfaceBoth(){
  }
;
  String[] classNames=new String[]{InterfaceOne.class.getName(),InterfaceTwo.class.getName()};
  Map<String,Object> properties=new HashMap<String,Object>();
  properties.put("a.property","E");
  properties.put("b.property","F");
  ServiceRegistration<?> serviceRegistration=registry.registerService(classNames,one,properties);
  Assert.assertNotNull(serviceRegistration);
  ServiceReference<?> serviceReference=serviceRegistration.getServiceReference();
  Assert.assertNotNull(serviceReference);
  Assert.assertEquals(serviceReference.getProperty("a.property"),"E");
  Assert.assertEquals(serviceReference.getProperty("b.property"),"F");
  Assert.assertNull(serviceReference.getProperty("c.property"));
  serviceRegistration.unregister();
  Object actual=registry.getService(serviceReference);
  Assert.assertNull(actual);
}
