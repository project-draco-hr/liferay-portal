{
  Registry registry=RegistryUtil.getRegistry();
  InterfaceOne a=getInstance();
  InterfaceOne b=getInstance();
  Map<String,Object> map=new HashMap<String,Object>();
  map.put("a.property","G");
  ServiceRegistration<InterfaceOne> serviceRegistrationA=registry.registerService(InterfaceOne.class,a);
  ServiceRegistration<InterfaceOne> serviceRegistrationB=registry.registerService(InterfaceOne.class,b,map);
  Assert.assertNotNull(serviceRegistrationA);
  Assert.assertNotNull(serviceRegistrationB);
  String filter="(a.property=G)";
  InterfaceOne[] services=registry.getServices(InterfaceOne.class.getName(),filter);
  Assert.assertEquals(1,services.length);
  serviceRegistrationA.unregister();
  services=registry.getServices(InterfaceOne.class.getName(),filter);
  Assert.assertEquals(1,services.length);
  serviceRegistrationB.unregister();
  services=registry.getServices(InterfaceOne.class.getName(),filter);
  Assert.assertNull(services);
}
