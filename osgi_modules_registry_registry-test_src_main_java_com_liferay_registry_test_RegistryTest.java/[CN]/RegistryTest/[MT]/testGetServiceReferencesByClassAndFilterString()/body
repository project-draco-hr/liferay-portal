{
  InterfaceOne oneA=getInstance();
  ServiceRegistration<InterfaceOne> serviceRegistrationA=_registry.registerService(InterfaceOne.class,oneA);
  Assert.assertNotNull(serviceRegistrationA);
  InterfaceOne oneB=getInstance();
  Map<String,Object> properties=new HashMap<String,Object>();
  properties.put("a.property","G");
  ServiceRegistration<InterfaceOne> serviceRegistrationB=_registry.registerService(InterfaceOne.class,oneB,properties);
  Assert.assertNotNull(serviceRegistrationB);
  String filterString="(a.property=G)";
  Collection<ServiceReference<InterfaceOne>> serviceReferences=_registry.getServiceReferences(InterfaceOne.class,filterString);
  Assert.assertEquals(1,serviceReferences.size());
  serviceRegistrationA.unregister();
  serviceReferences=_registry.getServiceReferences(InterfaceOne.class,filterString);
  Assert.assertEquals(1,serviceReferences.size());
  serviceRegistrationB.unregister();
  serviceReferences=_registry.getServiceReferences(InterfaceOne.class,filterString);
  Assert.assertEquals(0,serviceReferences.size());
}
