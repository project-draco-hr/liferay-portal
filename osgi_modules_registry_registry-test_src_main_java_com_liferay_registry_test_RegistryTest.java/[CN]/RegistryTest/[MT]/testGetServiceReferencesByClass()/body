{
  Registry registry=RegistryUtil.getRegistry();
  InterfaceOne a=getInstance();
  ServiceRegistration<InterfaceOne> serviceRegistrationA=registry.registerService(InterfaceOne.class,a);
  Assert.assertNotNull(serviceRegistrationA);
  InterfaceOne b=getInstance();
  ServiceRegistration<InterfaceOne> serviceRegistrationB=registry.registerService(InterfaceOne.class,b);
  Assert.assertNotNull(serviceRegistrationB);
  Collection<ServiceReference<InterfaceOne>> serviceReferences=registry.getServiceReferences(InterfaceOne.class,null);
  Assert.assertEquals(2,serviceReferences.size());
  serviceRegistrationA.unregister();
  serviceReferences=registry.getServiceReferences(InterfaceOne.class,null);
  Assert.assertEquals(1,serviceReferences.size());
  serviceRegistrationB.unregister();
  serviceReferences=registry.getServiceReferences(InterfaceOne.class,null);
  Assert.assertEquals(0,serviceReferences.size());
}
