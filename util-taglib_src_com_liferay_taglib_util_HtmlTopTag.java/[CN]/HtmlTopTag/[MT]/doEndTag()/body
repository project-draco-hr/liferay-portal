{
  HttpServletRequest request=(HttpServletRequest)pageContext.getRequest();
  StringBundler content=getBodyContentAsStringBundler();
  boolean append=true;
  if (_applyOnce) {
    Set<String> pageTopSet=(Set<String>)request.getAttribute(WebKeys.PAGE_TOP_SET);
    if (pageTopSet == null) {
      pageTopSet=new HashSet<String>();
      request.setAttribute(WebKeys.PAGE_TOP_SET,pageTopSet);
    }
    if (pageTopSet.contains(content.toString())) {
      append=false;
    }
 else {
      pageTopSet.add(content.toString());
    }
  }
  if (append) {
    StringBundler sb=(StringBundler)request.getAttribute(WebKeys.PAGE_TOP);
    if (sb == null) {
      sb=new StringBundler();
      request.setAttribute(WebKeys.PAGE_TOP,sb);
    }
    sb.append(content);
  }
  return EVAL_PAGE;
}
