{
  int pos=messageId.indexOf(CharPool.AT) + PropsValues.POP_SERVER_SUBDOMAIN.length() + 1;
  if (PropsValues.POP_SERVER_SUBDOMAIN.length() > 0) {
    pos++;
  }
  int endPos=messageId.indexOf(CharPool.GREATER_THAN,pos);
  if (endPos == -1) {
    endPos=messageId.length();
  }
  String mx=messageId.substring(pos,endPos);
  return CompanyLocalServiceUtil.getCompanyByMx(mx);
}
