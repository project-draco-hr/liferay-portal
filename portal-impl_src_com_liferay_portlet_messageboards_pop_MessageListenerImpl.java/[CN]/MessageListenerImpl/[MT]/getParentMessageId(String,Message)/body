{
  int pos=recipient.indexOf(CharPool.AT);
  if (pos >= 0) {
    long parentMessageId=0;
    String target=recipient.substring(MBUtil.MESSAGE_POP_PORTLET_PREFIX.length(),pos);
    String[] parts=StringUtil.split(target,StringPool.PERIOD);
    if (parts.length == 2) {
      parentMessageId=GetterUtil.getLong(parts[1]);
    }
    if (parentMessageId > 0) {
      return parentMessageId;
    }
  }
  return MBUtil.getParentMessageId(message);
}
