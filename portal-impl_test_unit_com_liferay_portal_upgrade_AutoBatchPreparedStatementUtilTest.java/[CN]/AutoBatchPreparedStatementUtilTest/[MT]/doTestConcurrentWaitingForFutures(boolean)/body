{
  TestNoticeableFuture<Void> testNoticeableFuture=new TestNoticeableFuture<>();
  try (PreparedStatement preparedStatement=AutoBatchPreparedStatementUtil.concurrentAutoBatch((Connection)ProxyUtil.newProxyInstance(ClassLoader.getSystemClassLoader(),new Class<?>[]{Connection.class},new ConnectionInvocationHandler(new PreparedStatementInvocationHandler(supportBatchUpdates))),StringPool.BLANK)){
    InvocationHandler invocationHandler=ProxyUtil.getInvocationHandler(preparedStatement);
    Set<Future<Void>> futures=ReflectionTestUtil.getFieldValue(invocationHandler,"_futures");
    futures.add(testNoticeableFuture);
  }
   Assert.assertTrue(testNoticeableFuture.hasCalledGet());
}
