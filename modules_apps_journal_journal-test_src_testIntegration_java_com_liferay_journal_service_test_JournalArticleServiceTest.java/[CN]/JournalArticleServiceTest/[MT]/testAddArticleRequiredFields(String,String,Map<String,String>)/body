{
  String definition=readText(ddmStructureDefinition);
  DDMForm ddmForm=DDMFormXSDDeserializerUtil.deserialize(definition);
  DDMStructure ddmStructure=DDMStructureTestUtil.addStructure(_group.getGroupId(),JournalArticle.class.getName(),ddmForm);
  DDMTemplate ddmTemplate=DDMTemplateTestUtil.addTemplate(_group.getGroupId(),ddmStructure.getStructureId(),PortalUtil.getClassNameId(JournalArticle.class));
  String xmlContent=readText(journalArticleContent);
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(_group.getGroupId());
  for (  String requiredFieldName : requiredFields.keySet()) {
    Assert.assertTrue(ddmStructure.getFieldRequired(requiredFieldName));
    serviceContext.setAttribute(requiredFieldName,requiredFields.get(requiredFieldName));
  }
  JournalTestUtil.addArticleWithXMLContent(JournalFolderConstants.DEFAULT_PARENT_FOLDER_ID,JournalArticleConstants.CLASSNAME_ID_DEFAULT,xmlContent,ddmStructure.getStructureKey(),ddmTemplate.getTemplateKey(),LocaleUtil.fromLanguageId(ddmStructure.getDefaultLanguageId()),serviceContext);
}
