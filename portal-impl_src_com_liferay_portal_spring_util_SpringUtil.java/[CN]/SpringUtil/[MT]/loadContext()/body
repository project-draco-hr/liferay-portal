{
  List<String> configLocations=ListUtil.fromArray(PropsValues.SPRING_CONFIGS);
  if (PropsValues.PERSISTENCE_PROVIDER.equalsIgnoreCase("jpa")) {
    configLocations.remove("META-INF/hibernate-spring.xml");
  }
 else {
    configLocations.remove("META-INF/jpa-spring.xml");
  }
  AbstractApplicationContext applicationContext=new ArrayApplicationContext(configLocations.toArray(new String[configLocations.size()]));
  applicationContext.registerShutdownHook();
  BeanLocator beanLocator=new BeanLocatorImpl(PortalClassLoaderUtil.getClassLoader(),applicationContext);
  PortalBeanLocatorUtil.setBeanLocator(beanLocator);
}
