{
  Collection<String> resources=_jspResourceCache.get(path);
  if (resources != null) {
    return resources;
  }
  List<URL> urls=null;
  Map<String,List<URL>> extraPackageMap=_serviceTracker.getService();
  if (extraPackageMap != null) {
    urls=extraPackageMap.get(path.replace('/','.'));
  }
  if ((urls == null) || urls.isEmpty()) {
    ClassLoader classLoader=bundleWiring.getClassLoader();
    try {
      Enumeration<URL> enumeration=classLoader.getResources(path);
      if ((enumeration != null) && enumeration.hasMoreElements()) {
        urls=Collections.list(enumeration);
      }
    }
 catch (    IOException ioe) {
      _logger.log(Logger.LOG_ERROR,ioe.getMessage(),ioe);
    }
  }
  if ((urls == null) || urls.isEmpty()) {
    _jspResourceCache.put(path,Collections.<String>emptyList());
    return null;
  }
  for (  URL url : urls) {
    try (FileSystem fileSystem=openFileSystem(url)){
      FileSystemProvider fileSystemProvider=fileSystem.provider();
      try (DirectoryStream<Path> directoryStream=fileSystemProvider.newDirectoryStream(fileSystem.getPath(path),new Filter<Path>(){
        @Override public boolean accept(        Path entryPath){
          Path fileNamePath=entryPath.getFileName();
          String fileName=fileNamePath.toString();
          return fileName.endsWith(".class");
        }
      }
)){
        for (        Path filePath : directoryStream) {
          String filePathString=filePath.toString();
          if (resources == null) {
            resources=new ArrayList<>();
          }
          resources.add(filePathString.substring(1));
        }
      }
     }
 catch (    Exception e) {
      _logger.log(Logger.LOG_ERROR,e.getMessage(),e);
    }
  }
  if (resources == null) {
    _jspResourceCache.put(path,Collections.<String>emptyList());
  }
 else {
    _jspResourceCache.put(path,resources);
  }
  return resources;
}
