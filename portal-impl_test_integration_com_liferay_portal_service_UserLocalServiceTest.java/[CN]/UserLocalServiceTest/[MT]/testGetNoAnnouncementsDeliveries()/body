{
  User user1=UserTestUtil.addUser();
  User user2=UserTestUtil.addUser();
  AnnouncementsDeliveryLocalServiceUtil.addUserDelivery(user1.getUserId(),"general");
  List<User> users=UserLocalServiceUtil.getNoAnnouncementsDeliveries("general");
  boolean success=false;
  for (  User user : users) {
    if (user.getUserId() == user2.getUserId()) {
      success=true;
    }
 else     if (user.getUserId() == user1.getUserId()) {
      Assert.fail("User " + user.getUserId() + " should not have announcement deliveries");
    }
  }
  Assert.assertTrue("No user found with user ID " + user2.getUserId(),success);
}
