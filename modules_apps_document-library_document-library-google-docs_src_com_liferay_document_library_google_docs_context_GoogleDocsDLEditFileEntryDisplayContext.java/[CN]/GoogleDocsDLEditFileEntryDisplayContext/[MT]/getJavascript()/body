{
  try {
    FreeMarkerRenderer freeMarkerRenderer=new FreeMarkerRenderer("com/liferay/document/library/google/docs/context/" + "dependencies/google_file_picker.ftl");
    ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
    PortletPreferences companyPortletPreferences=PrefsPropsUtil.getPreferences(themeDisplay.getCompanyId());
    String googleAppsAPIKey=companyPortletPreferences.getValue("googleAppsAPIKey",null);
    String googleClientId=companyPortletPreferences.getValue("googleClientId",null);
    freeMarkerRenderer.setAttribute("filePickCallback",_filePickCallback);
    freeMarkerRenderer.setAttribute("googleAppsAPIKey",googleAppsAPIKey);
    freeMarkerRenderer.setAttribute("googleClientId",googleClientId);
    freeMarkerRenderer.setAttribute("namespace",_getNamespace());
    return freeMarkerRenderer.render();
  }
 catch (  IOException|TemplateException e) {
    throw new PortalException(e);
  }
}
