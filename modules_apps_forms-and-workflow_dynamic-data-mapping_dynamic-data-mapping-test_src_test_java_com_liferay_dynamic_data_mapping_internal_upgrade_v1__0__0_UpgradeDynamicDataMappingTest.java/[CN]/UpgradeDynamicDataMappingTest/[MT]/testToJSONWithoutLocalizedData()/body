{
  DDMForm ddmForm=new DDMForm();
  ddmForm.setAvailableLocales(createAvailableLocales(LocaleUtil.US));
  ddmForm.setDefaultLocale(LocaleUtil.US);
  DDMFormField textDDMFormField=new DDMFormField("Text","text");
  textDDMFormField.setDataType("string");
  textDDMFormField.setLocalizable(false);
  textDDMFormField.setRepeatable(false);
  ddmForm.addDDMFormField(textDDMFormField);
  DDMFormField textAreaDDMFormField=new DDMFormField("TextArea","textarea");
  textAreaDDMFormField.setDataType("string");
  textAreaDDMFormField.setLocalizable(false);
  textAreaDDMFormField.setRepeatable(true);
  ddmForm.addDDMFormField(textAreaDDMFormField);
  DDMFormValues ddmFormValues=new DDMFormValues(ddmForm);
  ddmFormValues.setAvailableLocales(createAvailableLocales(LocaleUtil.US));
  ddmFormValues.setDefaultLocale(LocaleUtil.US);
  ddmFormValues.addDDMFormFieldValue(createDDMFormFieldValue("hcxo","Text",new UnlocalizedValue("Text Value")));
  ddmFormValues.addDDMFormFieldValue(createDDMFormFieldValue("vfqd","TextArea",new UnlocalizedValue("Text Area Value 1")));
  ddmFormValues.addDDMFormFieldValue(createDDMFormFieldValue("ycey","TextArea",new UnlocalizedValue("Text Area Value 2")));
  ddmFormValues.addDDMFormFieldValue(createDDMFormFieldValue("habt","TextArea",new UnlocalizedValue("Text Area Value 3")));
  Document document=SAXReaderUtil.createDocument();
  Element rootElement=document.addElement("root");
  rootElement.addAttribute("default-locale","en_US");
  rootElement.addAttribute("available-locales","en_US");
  addDynamicElementElement(rootElement,"Text",new String[]{"Text Value"});
  addDynamicElementElement(rootElement,"TextArea",new String[]{"Text Area Value 1","Text Area Value 2","Text Area Value 3"});
  addDynamicElementElement(rootElement,"_fieldsDisplay",new String[]{"Text_INSTANCE_hcxo,TextArea_INSTANCE_vfqd," + "TextArea_INSTANCE_ycey,TextArea_INSTANCE_habt"});
  String expectedJSON=_ddmFormValuesJSONSerializer.serialize(ddmFormValues);
  DDMFormValues actualDDMFormValues=_upgradeDynamicDataMapping.getDDMFormValues(1L,ddmForm,document.asXML());
  String actualJSON=_upgradeDynamicDataMapping.toJSON(actualDDMFormValues);
  JSONAssert.assertEquals(expectedJSON,actualJSON,false);
}
