{
  Map<String,String[]> parameterMap=new HashMap<>();
  for (  String element : StringUtil.split(queryString,CharPool.AMPERSAND)) {
    String[] elementParts=StringUtil.split(element,CharPool.EQUAL);
    String name=elementParts[0];
    String value=StringPool.BLANK;
    if (elementParts.length == 2) {
      value=elementParts[1];
    }
    String[] values=parameterMap.get(name);
    if (values == null) {
      parameterMap.put(name,new String[]{value});
    }
 else {
      String[] newValues=new String[values.length + 1];
      System.arraycopy(values,0,newValues,0,values.length);
      newValues[newValues.length - 1]=value;
      parameterMap.put(name,newValues);
    }
  }
  return parameterMap;
}
