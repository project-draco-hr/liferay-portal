{
  if (Validator.isNull(subject)) {
    subject=body.substring(0,Math.min(body.length(),50)) + "...";
  }
  List<ObjectValuePair<String,byte[]>> files=new ArrayList<ObjectValuePair<String,byte[]>>();
  List<String> existingFiles=new ArrayList<String>();
  double priority=0.0;
  boolean allowPingbacks=false;
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setAttribute("className",className);
  serviceContext.setAttribute("classPK",String.valueOf(classPK));
  serviceContext.setWorkflowAction(workflowAction);
  return updateMessage(userId,messageId,subject,body,files,existingFiles,priority,allowPingbacks,serviceContext);
}
