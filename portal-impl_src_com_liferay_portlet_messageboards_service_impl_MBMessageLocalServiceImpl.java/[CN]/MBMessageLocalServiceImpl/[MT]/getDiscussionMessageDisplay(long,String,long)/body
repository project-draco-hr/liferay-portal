{
  long classNameId=PortalUtil.getClassNameId(className);
  MBMessage message=null;
  MBDiscussion discussion=mbDiscussionPersistence.fetchByC_C(classNameId,classPK);
  if (discussion != null) {
    List<MBMessage> messages=mbMessagePersistence.findByT_P(discussion.getThreadId(),MBMessageImpl.DEFAULT_PARENT_MESSAGE_ID);
    message=messages.get(0);
  }
 else {
    String subject=String.valueOf(classPK);
    try {
      message=addDiscussionMessage(userId,null,className,classPK,_DISCUSSION_THREAD_ID,MBMessageImpl.DEFAULT_PARENT_MESSAGE_ID,subject,subject,new ServiceContext());
    }
 catch (    SystemException se) {
      List<MBMessage> messages=mbMessagePersistence.findByT_P(_DISCUSSION_THREAD_ID,MBMessageImpl.DEFAULT_PARENT_MESSAGE_ID);
      if (messages.isEmpty()) {
        throw se;
      }
      message=messages.get(0);
    }
  }
  return getMessageDisplay(message,MBThreadImpl.THREAD_VIEW_COMBINATION);
}
