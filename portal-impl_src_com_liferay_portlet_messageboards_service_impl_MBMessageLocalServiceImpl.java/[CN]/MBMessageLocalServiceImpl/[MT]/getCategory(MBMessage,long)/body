{
  if (message.getCategoryId() != categoryId) {
    MBCategory oldCategory=mbCategoryPersistence.findByPrimaryKey(message.getCategoryId());
    MBCategory newCategory=mbCategoryPersistence.fetchByPrimaryKey(categoryId);
    if ((newCategory == null) || (oldCategory.getGroupId() != newCategory.getGroupId())) {
      categoryId=message.getCategoryId();
    }
  }
  return mbCategoryPersistence.findByPrimaryKey(categoryId);
}
