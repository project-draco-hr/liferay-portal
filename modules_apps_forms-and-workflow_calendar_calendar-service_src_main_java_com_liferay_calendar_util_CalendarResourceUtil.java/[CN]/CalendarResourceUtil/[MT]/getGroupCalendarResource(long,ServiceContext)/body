{
  Group group=GroupLocalServiceUtil.getGroup(groupId);
  if (group.isUser()) {
    return null;
  }
  CalendarResource calendarResource=CalendarResourceLocalServiceUtil.fetchCalendarResource(PortalUtil.getClassNameId(Group.class),groupId);
  if (calendarResource != null) {
    return calendarResource;
  }
  long userId=group.getCreatorUserId();
  User user=UserLocalServiceUtil.fetchUserById(userId);
  if ((user == null) || user.isDefaultUser()) {
    Role role=RoleLocalServiceUtil.getRole(group.getCompanyId(),RoleConstants.ADMINISTRATOR);
    long[] userIds=UserLocalServiceUtil.getRoleUserIds(role.getRoleId());
    userId=userIds[0];
  }
  Map<Locale,String> nameMap=new HashMap<>();
  nameMap.put(LocaleUtil.getDefault(),group.getDescriptiveName());
  Map<Locale,String> descriptionMap=new HashMap<>();
  return CalendarResourceLocalServiceUtil.addCalendarResource(userId,groupId,PortalUtil.getClassNameId(Group.class),groupId,null,null,nameMap,descriptionMap,true,serviceContext);
}
