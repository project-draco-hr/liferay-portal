{
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(_group.getGroupId());
  SearchContext searchContext1=SearchContextTestUtil.getSearchContext(_group.getGroupId());
  searchContext1.setKeywords("Arquitectura");
  searchContext1.setLocale(LocaleUtil.SPAIN);
  assertSearchCount(0,_group.getGroupId(),searchContext1);
  SearchContext searchContext2=SearchContextTestUtil.getSearchContext(_group.getGroupId());
  searchContext2.setKeywords("Apple");
  searchContext2.setLocale(LocaleUtil.SPAIN);
  assertSearchCount(0,_group.getGroupId(),searchContext2);
  Map<Locale,String> titleMap=new HashMap<>();
  titleMap.put(LocaleUtil.GERMANY,"Titel");
  titleMap.put(LocaleUtil.SPAIN,"Titulo");
  titleMap.put(LocaleUtil.US,"Title");
  Map<Locale,String> contentMap=new HashMap<>();
  contentMap.put(LocaleUtil.GERMANY,"Liferay Architektur Ansatz");
  contentMap.put(LocaleUtil.SPAIN,"Liferay Arquitectura Aproximacion");
  contentMap.put(LocaleUtil.US,"Liferay Architectural Approach");
  JournalArticle article=JournalTestUtil.addArticleWithWorkflow(_group.getGroupId(),titleMap,titleMap,contentMap,true);
  assertSearchCount(1,_group.getGroupId(),searchContext1);
  contentMap.put(LocaleUtil.SPAIN,"Apple manzana tablet");
  String defaultLanguageId=LanguageUtil.getLanguageId(LocaleUtil.getDefault());
  String content=DDMStructureTestUtil.getSampleStructuredContent(contentMap,defaultLanguageId);
  article=JournalArticleLocalServiceUtil.updateArticleTranslation(_group.getGroupId(),article.getArticleId(),article.getVersion(),LocaleUtil.SPAIN,article.getTitle(LocaleUtil.SPAIN),article.getDescription(LocaleUtil.SPAIN),content,null,serviceContext);
  assertSearchCount(0,_group.getGroupId(),searchContext2);
  User user=UserTestUtil.addUser(_group.getGroupId(),LocaleUtil.SPAIN);
  serviceContext.setWorkflowAction(WorkflowConstants.ACTION_PUBLISH);
  JournalArticleLocalServiceUtil.updateArticle(user.getUserId(),article.getGroupId(),article.getFolderId(),article.getArticleId(),article.getVersion(),article.getContent(),serviceContext);
  assertSearchCount(1,_group.getGroupId(),searchContext2);
}
