{
  Map<String,Serializable> taskContextMap=btEntry.getTaskContextMap();
  long userId=(Long)taskContextMap.get("userId");
  long groupId=(Long)taskContextMap.get("groupId");
  long plid=(Long)taskContextMap.get("plid");
  String portletId=(String)taskContextMap.get("portletId");
  long[] layoutIds=(long[])taskContextMap.get("layoutIds");
  Map<String,String[]> parameterMap=(Map<String,String[]>)taskContextMap.get("parameterMap");
  Date startDate=(Date)taskContextMap.get("startDate");
  Date endDate=(Date)taskContextMap.get("endDate");
  File larFile=LayoutServiceUtil.exportPortletInfoAsFile(plid,groupId,portletId,parameterMap,startDate,endDate);
  BTEntryLocalServiceUtil.addBTEntryAttachment(userId,btEntry.getBtEntryId(),larFile.getName(),larFile);
}
