{
  searchContext.setAttribute("relatedClassName",Boolean.TRUE);
  String[] relatedEntryClassNames=(String[])searchContext.getAttribute("relatedEntryClassNames");
  if (ArrayUtil.isEmpty(relatedEntryClassNames)) {
    return;
  }
  BooleanQuery relatedQueries=BooleanQueryFactoryUtil.create(searchContext);
  for (  String relatedEntryClassName : relatedEntryClassNames) {
    Indexer indexer=IndexerRegistryUtil.getIndexer(relatedEntryClassName);
    if (indexer == null) {
      continue;
    }
    BooleanQuery relatedQuery=BooleanQueryFactoryUtil.create(searchContext);
    indexer.postProcessContextQuery(relatedQuery,searchContext);
    relatedQuery.addRequiredTerm(Field.CLASS_NAME_ID,PortalUtil.getClassNameId(relatedEntryClassName));
    relatedQueries.add(relatedQuery,BooleanClauseOccur.SHOULD);
  }
  contextQuery.add(relatedQueries,BooleanClauseOccur.MUST);
  searchContext.setAttribute("relatedClassName",Boolean.FALSE);
}
