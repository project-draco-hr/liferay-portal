{
  if (actionId.equals(ActionKeys.ADD_CATEGORY)) {
    actionId=ActionKeys.ADD_SUBCATEGORY;
  }
  long categoryId=category.getCategoryId();
  while (categoryId != ShoppingCategoryImpl.DEFAULT_PARENT_CATEGORY_ID) {
    category=ShoppingCategoryLocalServiceUtil.getCategory(categoryId);
    categoryId=category.getParentCategoryId();
    if (permissionChecker.hasOwnerPermission(category.getCompanyId(),ShoppingCategory.class.getName(),category.getCategoryId(),category.getUserId(),actionId)) {
      return true;
    }
    if (permissionChecker.hasPermission(category.getGroupId(),ShoppingCategory.class.getName(),category.getCategoryId(),actionId)) {
      return true;
    }
    if (actionId.equals(ActionKeys.VIEW)) {
      break;
    }
  }
  return false;
}
