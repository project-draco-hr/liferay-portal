{
  long imageId=getImageId(request);
  Image image=null;
  IGImage igImage=null;
  if (imageId > 0) {
    image=ImageLocalServiceUtil.getImage(imageId);
    try {
      igImage=IGImageLocalServiceUtil.getImageByLargeImageId(image.getImageId());
    }
 catch (    Exception e) {
    }
  }
 else {
    String uuid=ParamUtil.getString(request,"uuid");
    long groupId=ParamUtil.getLong(request,"groupId");
    try {
      if (Validator.isNotNull(uuid) && (groupId > 0)) {
        igImage=IGImageLocalServiceUtil.getImageByUuidAndGroupId(uuid,groupId);
        image=ImageLocalServiceUtil.getImage(igImage.getLargeImageId());
      }
    }
 catch (    Exception e) {
    }
  }
  if (igImage != null) {
    TagsAssetLocalServiceUtil.incrementViewCounter(IGImage.class.getName(),igImage.getImageId());
  }
  if (getDefault) {
    if (image == null) {
      if (_log.isWarnEnabled()) {
        _log.warn("Get a default image for " + imageId);
      }
      image=getDefaultImage(request,imageId);
    }
  }
  return image;
}
