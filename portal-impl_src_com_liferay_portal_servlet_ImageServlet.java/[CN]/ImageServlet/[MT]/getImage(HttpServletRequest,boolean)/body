{
  long imageId=getImageId(req);
  Image image=null;
  if (imageId > 0) {
    image=ImageLocalUtil.getImage(imageId);
  }
 else {
    String uuid=ParamUtil.getString(req,"uuid");
    long groupId=ParamUtil.getLong(req,"groupId");
    try {
      IGImage igImage=IGImageLocalServiceUtil.getImageByUuidAndGroupId(uuid,groupId);
      image=ImageLocalUtil.getImage(igImage.getLargeImageId());
    }
 catch (    Exception e) {
    }
  }
  if (getDefault) {
    if (image == null) {
      if (_log.isWarnEnabled()) {
        _log.warn("Get a default image for " + imageId);
      }
      image=getDefaultImage(req,imageId);
    }
  }
  return image;
}
