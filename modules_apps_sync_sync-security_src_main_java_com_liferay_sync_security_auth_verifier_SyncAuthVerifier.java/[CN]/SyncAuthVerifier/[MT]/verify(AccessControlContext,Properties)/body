{
  try {
    AuthVerifierResult authVerifierResult=new AuthVerifierResult();
    String[] credentials=getCredentials(accessControlContext.getRequest(),accessControlContext.getResponse());
    if (credentials != null) {
      authVerifierResult.setPassword(credentials[1]);
      authVerifierResult.setState(AuthVerifierResult.State.SUCCESS);
      authVerifierResult.setUserId(GetterUtil.getLong(credentials[0]));
      ServiceAccessPolicyThreadLocal.addActiveServiceAccessPolicyName(SyncTokenPolicy.POLICY_NAME);
    }
    return authVerifierResult;
  }
 catch (  Exception e) {
    throw new AuthException(e);
  }
}
