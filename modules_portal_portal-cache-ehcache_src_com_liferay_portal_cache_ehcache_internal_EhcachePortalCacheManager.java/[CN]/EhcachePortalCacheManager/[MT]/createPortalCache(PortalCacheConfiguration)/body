{
  String cacheName=portalCacheConfiguration.getPortalCacheName();
synchronized (_cacheManager) {
    if (!_cacheManager.cacheExists(cacheName)) {
      _cacheManager.addCache(cacheName);
    }
  }
  Cache cache=_cacheManager.getCache(cacheName);
  EhcachePortalCacheConfiguration ehcachePortalCacheConfiguration=(EhcachePortalCacheConfiguration)portalCacheConfiguration;
  if (ehcachePortalCacheConfiguration.isRequireSerialization()) {
    return new SerializableEhcachePortalCache<>(this,cache);
  }
  return new EhcachePortalCache<>(this,cache);
}
