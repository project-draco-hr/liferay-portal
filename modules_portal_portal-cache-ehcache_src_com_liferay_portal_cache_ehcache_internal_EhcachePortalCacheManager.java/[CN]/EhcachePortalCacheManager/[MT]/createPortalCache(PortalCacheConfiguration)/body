{
  String portalCacheName=portalCacheConfiguration.getPortalCacheName();
synchronized (_cacheManager) {
    if (!_cacheManager.cacheExists(portalCacheName)) {
      _cacheManager.addCache(portalCacheName);
    }
  }
  Cache cache=_cacheManager.getCache(portalCacheName);
  EhcachePortalCacheConfiguration ehcachePortalCacheConfiguration=(EhcachePortalCacheConfiguration)portalCacheConfiguration;
  if (ehcachePortalCacheConfiguration.isRequireSerialization()) {
    return new SerializableEhcachePortalCache<>(this,cache);
  }
  return new EhcachePortalCache<>(this,cache);
}
