{
  ActionableDynamicQuery actionableDynamicQuery=_dlFileEntryLocalService.getActionableDynamicQuery();
  actionableDynamicQuery.setPerformActionMethod(new ActionableDynamicQuery.PerformActionMethod<DLFileEntry>(){
    @Override public void performAction(    DLFileEntry dlFileEntry){
      GoogleDocsMetadataHelper googleDocsMetadataHelper=new GoogleDocsMetadataHelper(_ddmFormValuesToFieldsConverter,_ddmStructureLocalService,dlFileEntry,_dlFileEntryMetadataLocalService,_fieldsToDDMFormValuesConverter,_storageEngine);
      LegacyGoogleDocsMetadataHelper legacyGoogleDocsMetadataHelper=new LegacyGoogleDocsMetadataHelper(_ddmFormValuesToFieldsConverter,_ddmStructureLocalService,dlFileEntry,_storageEngine);
      googleDocsMetadataHelper.setFieldValue(GoogleDocsConstants.DDM_FIELD_NAME_EMBEDDABLE_URL,legacyGoogleDocsMetadataHelper.getFieldValue(LegacyGoogleDocsConstants.DDM_FIELD_NAME_VIEW_URL));
      googleDocsMetadataHelper.setFieldValue(GoogleDocsConstants.DDM_FIELD_NAME_ICON_URL,legacyGoogleDocsMetadataHelper.getFieldValue(LegacyGoogleDocsConstants.DDM_FIELD_NAME_ICON_URL));
      googleDocsMetadataHelper.setFieldValue(GoogleDocsConstants.DDM_FIELD_NAME_ID,legacyGoogleDocsMetadataHelper.getFieldValue(LegacyGoogleDocsConstants.DDM_FIELD_NAME_ID));
      googleDocsMetadataHelper.setFieldValue(GoogleDocsConstants.DDM_FIELD_NAME_NAME,legacyGoogleDocsMetadataHelper.getFieldValue(LegacyGoogleDocsConstants.DDM_FIELD_NAME_NAME));
      googleDocsMetadataHelper.setFieldValue(GoogleDocsConstants.DDM_FIELD_NAME_URL,legacyGoogleDocsMetadataHelper.getFieldValue(LegacyGoogleDocsConstants.DDM_FIELD_NAME_EDIT_URL));
      googleDocsMetadataHelper.update();
      legacyGoogleDocsMetadataHelper.delete();
    }
  }
);
  actionableDynamicQuery.performActions();
}
