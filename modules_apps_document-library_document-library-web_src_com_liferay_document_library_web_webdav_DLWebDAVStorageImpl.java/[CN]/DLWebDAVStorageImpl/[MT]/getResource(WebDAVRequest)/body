{
  try {
    String[] pathArray=webDAVRequest.getPathArray();
    long companyId=webDAVRequest.getCompanyId();
    long parentFolderId=getParentFolderId(companyId,pathArray);
    String name=WebDAVUtil.getResourceName(pathArray);
    if (Validator.isNull(name)) {
      String path=getRootPath() + webDAVRequest.getPath();
      return new BaseResourceImpl(path,StringPool.BLANK,getToken());
    }
    try {
      Folder folder=_dlAppService.getFolder(webDAVRequest.getGroupId(),parentFolderId,name);
      if ((folder.getParentFolderId() != parentFolderId) || (webDAVRequest.getGroupId() != folder.getRepositoryId())) {
        throw new NoSuchFolderException();
      }
      return toResource(webDAVRequest,folder,false);
    }
 catch (    NoSuchFolderException nsfe) {
      if (_log.isDebugEnabled()) {
        _log.debug(nsfe,nsfe);
      }
      try {
        String title=getTitle(pathArray);
        FileEntry fileEntry=_dlAppService.getFileEntry(webDAVRequest.getGroupId(),parentFolderId,title);
        return toResource(webDAVRequest,fileEntry,false);
      }
 catch (      NoSuchFileEntryException nsfee) {
        if (_log.isDebugEnabled()) {
          _log.debug(nsfee,nsfee);
        }
        return null;
      }
    }
  }
 catch (  Exception e) {
    throw new WebDAVException(e);
  }
}
