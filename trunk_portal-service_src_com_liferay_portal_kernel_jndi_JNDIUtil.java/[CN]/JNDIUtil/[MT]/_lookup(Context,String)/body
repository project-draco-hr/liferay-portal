{
  if (_log.isDebugEnabled()) {
    _log.debug("Lookup " + location);
  }
  Object obj=null;
  try {
    obj=ctx.lookup(location);
  }
 catch (  NamingException n1) {
    if (location.indexOf("java:comp/env/") != -1) {
      try {
        String newLocation=StringUtil.replace(location,"java:comp/env/","");
        if (_log.isDebugEnabled()) {
          _log.debug(n1.getMessage());
          _log.debug("Attempt " + newLocation);
        }
        obj=ctx.lookup(newLocation);
      }
 catch (      NamingException n2) {
        String newLocation=StringUtil.replace(location,"comp/env/","");
        if (_log.isDebugEnabled()) {
          _log.debug(n2.getMessage());
          _log.debug("Attempt " + newLocation);
        }
        obj=ctx.lookup(newLocation);
      }
    }
 else     if (location.indexOf("java:") != -1) {
      try {
        String newLocation=StringUtil.replace(location,"java:","");
        if (_log.isDebugEnabled()) {
          _log.debug(n1.getMessage());
          _log.debug("Attempt " + newLocation);
        }
        obj=ctx.lookup(newLocation);
      }
 catch (      NamingException n2) {
        String newLocation=StringUtil.replace(location,"java:","java:comp/env/");
        if (_log.isDebugEnabled()) {
          _log.debug(n2.getMessage());
          _log.debug("Attempt " + newLocation);
        }
        obj=ctx.lookup(newLocation);
      }
    }
 else     if (location.indexOf("java:") == -1) {
      try {
        String newLocation="java:" + location;
        if (_log.isDebugEnabled()) {
          _log.debug(n1.getMessage());
          _log.debug("Attempt " + newLocation);
        }
        obj=ctx.lookup(newLocation);
      }
 catch (      NamingException n2) {
        String newLocation="java:comp/env/" + location;
        if (_log.isDebugEnabled()) {
          _log.debug(n2.getMessage());
          _log.debug("Attempt " + newLocation);
        }
        obj=ctx.lookup(newLocation);
      }
    }
 else {
      throw new NamingException();
    }
  }
  return obj;
}
