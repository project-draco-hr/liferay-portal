{
  StringTemplateResource stringTemplateResource=new StringTemplateResource("testId","testContent");
  CacheTemplateResource cacheTemplateResource=new CacheTemplateResource(stringTemplateResource);
  UnsyncByteArrayOutputStream unsyncByteArrayOutputStream=new UnsyncByteArrayOutputStream();
  try (ObjectOutput objectOutput=new ObjectOutputStream(unsyncByteArrayOutputStream)){
    cacheTemplateResource.writeExternal(objectOutput);
  }
   byte[] externalizedData=unsyncByteArrayOutputStream.toByteArray();
  ObjectInput objectInput=new ObjectInputStream(new UnsyncByteArrayInputStream(externalizedData));
  Assert.assertEquals(cacheTemplateResource.getLastModified(),objectInput.readLong());
  Assert.assertEquals(stringTemplateResource,objectInput.readObject());
  CacheTemplateResource newCacheTemplateResource=new CacheTemplateResource();
  objectInput=new ObjectInputStream(new UnsyncByteArrayInputStream(externalizedData));
  newCacheTemplateResource.readExternal(objectInput);
  Assert.assertEquals(stringTemplateResource,ReflectionTestUtil.getFieldValue(newCacheTemplateResource,"_templateResource"));
  Assert.assertEquals(cacheTemplateResource.getLastModified(),newCacheTemplateResource.getLastModified());
}
