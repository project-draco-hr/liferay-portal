{
  if (userIdAndInstanceId == null) {
    throw new InvalidParameterException("The userIdAndInstanceId must not be null.");
  }
 else   if (userIdAndInstanceId.isEmpty()) {
    return new UserIdAndInstanceIdEncoder(null,0);
  }
  int count=StringUtil.count(userIdAndInstanceId,StringPool.SLASH);
  if (count > 0) {
    throw new InvalidParameterException("The userIdAndInstanceId must not contain slashes.");
  }
  count=StringUtil.count(userIdAndInstanceId,StringPool.UNDERLINE);
  if (count > 1) {
    throw new InvalidParameterException("The userIdAndInstanceId must only contain one underscore " + "separating the userId from the instanceId.");
  }
 else   if (count == 1) {
    int index=userIdAndInstanceId.indexOf(CharPool.UNDERLINE);
    long userId=GetterUtil.getLong(userIdAndInstanceId.substring(0,index),-1);
    if (userId == -1) {
      throw new InvalidParameterException("The fullInstanceId's userId must be a valid number.");
    }
    String instanceId=null;
    if (index < (userIdAndInstanceId.length() - 1)) {
      instanceId=userIdAndInstanceId.substring(index + 1);
    }
    return new UserIdAndInstanceIdEncoder(instanceId,userId);
  }
 else {
    return new UserIdAndInstanceIdEncoder(userIdAndInstanceId,0);
  }
}
