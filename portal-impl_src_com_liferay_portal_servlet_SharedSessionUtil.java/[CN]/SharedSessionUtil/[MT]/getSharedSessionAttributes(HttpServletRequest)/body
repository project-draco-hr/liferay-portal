{
  Map<String,Object> map=new ConcurrentHashMap<String,Object>();
  HttpSession ses=req.getSession();
  Enumeration<String> enu=ses.getAttributeNames();
  while (enu.hasMoreElements()) {
    String attrName=enu.nextElement();
    Object attrValue=ses.getAttribute(attrName);
    if (attrValue != null) {
      for (int i=0; i < SHARED_SESSION_ATTRIBUTES.length; i++) {
        if (attrName.startsWith(SHARED_SESSION_ATTRIBUTES[i])) {
          map.put(attrName,attrValue);
          if (_log.isDebugEnabled()) {
            _log.debug("Sharing " + attrName);
          }
          break;
        }
      }
    }
  }
  return map;
}
