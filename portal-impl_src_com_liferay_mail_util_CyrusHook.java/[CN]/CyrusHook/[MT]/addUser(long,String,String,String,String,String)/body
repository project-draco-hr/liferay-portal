{
  try {
    CyrusUser user=new CyrusUser(userId,password);
    CyrusUserUtil.update(user);
    CyrusVirtual virtual=new CyrusVirtual(emailAddress,userId);
    CyrusVirtualUtil.update(virtual);
    String addUserCmd=PropsUtil.get(PropsKeys.MAIL_HOOK_CYRUS_ADD_USER);
    addUserCmd=StringUtil.replace(addUserCmd,"%1%",String.valueOf(userId));
    Runtime rt=Runtime.getRuntime();
    Process p=rt.exec(addUserCmd);
    ProcessUtil.close(p);
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
}
