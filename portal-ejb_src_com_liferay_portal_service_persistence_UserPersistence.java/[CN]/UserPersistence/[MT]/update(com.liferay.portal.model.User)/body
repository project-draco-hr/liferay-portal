{
  Session session=null;
  try {
    if (user.isNew() || user.isModified()) {
      session=openSession();
      if (user.isNew()) {
        UserHBM userHBM=new UserHBM();
        userHBM.setUserId(user.getUserId());
        userHBM.setCompanyId(user.getCompanyId());
        userHBM.setCreateDate(user.getCreateDate());
        userHBM.setModifiedDate(user.getModifiedDate());
        userHBM.setContactId(user.getContactId());
        userHBM.setPassword(user.getPassword());
        userHBM.setPasswordEncrypted(user.getPasswordEncrypted());
        userHBM.setPasswordExpirationDate(user.getPasswordExpirationDate());
        userHBM.setPasswordReset(user.getPasswordReset());
        userHBM.setEmailAddress(user.getEmailAddress());
        userHBM.setLanguageId(user.getLanguageId());
        userHBM.setTimeZoneId(user.getTimeZoneId());
        userHBM.setGreeting(user.getGreeting());
        userHBM.setResolution(user.getResolution());
        userHBM.setComments(user.getComments());
        userHBM.setLoginDate(user.getLoginDate());
        userHBM.setLoginIP(user.getLoginIP());
        userHBM.setLastLoginDate(user.getLastLoginDate());
        userHBM.setLastLoginIP(user.getLastLoginIP());
        userHBM.setFailedLoginAttempts(user.getFailedLoginAttempts());
        userHBM.setAgreedToTermsOfUse(user.getAgreedToTermsOfUse());
        userHBM.setActive(user.getActive());
        userHBM.setGroups(new HashSet());
        userHBM.setOrgs(new HashSet());
        userHBM.setPermissions(new HashSet());
        userHBM.setRoles(new HashSet());
        session.save(userHBM);
        session.flush();
      }
 else {
        UserHBM userHBM=(UserHBM)session.get(UserHBM.class,user.getPrimaryKey());
        if (userHBM != null) {
          userHBM.setCompanyId(user.getCompanyId());
          userHBM.setCreateDate(user.getCreateDate());
          userHBM.setModifiedDate(user.getModifiedDate());
          userHBM.setContactId(user.getContactId());
          userHBM.setPassword(user.getPassword());
          userHBM.setPasswordEncrypted(user.getPasswordEncrypted());
          userHBM.setPasswordExpirationDate(user.getPasswordExpirationDate());
          userHBM.setPasswordReset(user.getPasswordReset());
          userHBM.setEmailAddress(user.getEmailAddress());
          userHBM.setLanguageId(user.getLanguageId());
          userHBM.setTimeZoneId(user.getTimeZoneId());
          userHBM.setGreeting(user.getGreeting());
          userHBM.setResolution(user.getResolution());
          userHBM.setComments(user.getComments());
          userHBM.setLoginDate(user.getLoginDate());
          userHBM.setLoginIP(user.getLoginIP());
          userHBM.setLastLoginDate(user.getLastLoginDate());
          userHBM.setLastLoginIP(user.getLastLoginIP());
          userHBM.setFailedLoginAttempts(user.getFailedLoginAttempts());
          userHBM.setAgreedToTermsOfUse(user.getAgreedToTermsOfUse());
          userHBM.setActive(user.getActive());
          session.flush();
        }
 else {
          userHBM=new UserHBM();
          userHBM.setUserId(user.getUserId());
          userHBM.setCompanyId(user.getCompanyId());
          userHBM.setCreateDate(user.getCreateDate());
          userHBM.setModifiedDate(user.getModifiedDate());
          userHBM.setContactId(user.getContactId());
          userHBM.setPassword(user.getPassword());
          userHBM.setPasswordEncrypted(user.getPasswordEncrypted());
          userHBM.setPasswordExpirationDate(user.getPasswordExpirationDate());
          userHBM.setPasswordReset(user.getPasswordReset());
          userHBM.setEmailAddress(user.getEmailAddress());
          userHBM.setLanguageId(user.getLanguageId());
          userHBM.setTimeZoneId(user.getTimeZoneId());
          userHBM.setGreeting(user.getGreeting());
          userHBM.setResolution(user.getResolution());
          userHBM.setComments(user.getComments());
          userHBM.setLoginDate(user.getLoginDate());
          userHBM.setLoginIP(user.getLoginIP());
          userHBM.setLastLoginDate(user.getLastLoginDate());
          userHBM.setLastLoginIP(user.getLastLoginIP());
          userHBM.setFailedLoginAttempts(user.getFailedLoginAttempts());
          userHBM.setAgreedToTermsOfUse(user.getAgreedToTermsOfUse());
          userHBM.setActive(user.getActive());
          session.save(userHBM);
          session.flush();
        }
      }
      user.setNew(false);
      user.setModified(false);
    }
    return user;
  }
 catch (  HibernateException he) {
    throw new SystemException(he);
  }
 finally {
    closeSession(session);
  }
}
