{
  FileEntry fileEntry=_fetchPortletFileEntry(groupId,fileName,folder);
  if (fileEntry == null) {
    return fileName;
  }
  int suffix=1;
  for (int i=0; i < _MAX_UNIQUE_FILE_NAME_TRIALS; i++) {
    String curFileName=FileUtil.appendParentheticalSuffix(fileName,String.valueOf(suffix));
    fileEntry=_fetchPortletFileEntry(groupId,curFileName,folder);
    if (fileEntry == null) {
      return curFileName;
    }
    suffix++;
  }
  throw new PortalException("Cannot find a unique file name for " + fileName + " in folder id "+ folder.getFolderId());
}
