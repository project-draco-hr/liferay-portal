{
  fileName=FileUtil.stripParentheticalSuffix(fileName);
  FileEntry fileEntry=_fetchPortletFileEntry(groupId,fileName,folderId);
  if (fileEntry == null) {
    return fileName;
  }
  int suffix=1;
  for (int i=0; i < _UNIQUE_FILE_NAME_TRIES; i++) {
    String curFileName=FileUtil.appendParentheticalSuffix(fileName,String.valueOf(suffix));
    fileEntry=_fetchPortletFileEntry(groupId,curFileName,folderId);
    if (fileEntry == null) {
      return curFileName;
    }
    suffix++;
  }
  throw new PortalException("Unable to get a unique file name for " + fileName + " in folder "+ folderId);
}
