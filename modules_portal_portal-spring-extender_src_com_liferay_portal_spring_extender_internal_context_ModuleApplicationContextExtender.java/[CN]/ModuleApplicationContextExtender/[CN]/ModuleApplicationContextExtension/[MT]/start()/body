{
  _component=_dependencyManager.createComponent();
  _component.setImplementation(new ModuleApplicationContextRegistrator(_bundle,_bundleContext.getBundle()));
  List<ContextDependency> contextDependencies=_processServiceReferences(_bundle);
  BundleWiring bundleWiring=_bundle.adapt(BundleWiring.class);
  ClassLoader classLoader=bundleWiring.getClassLoader();
  for (  ContextDependency contextDependency : contextDependencies) {
    ServiceDependency serviceDependency=_dependencyManager.createServiceDependency();
    Class<?> clazz=Class.forName(contextDependency.getServiceClass(),false,classLoader);
    serviceDependency.setService(clazz,contextDependency.getFilter());
    serviceDependency.setRequired(true);
    _component.add(serviceDependency);
  }
  _dependencyManager.add(_component);
}
