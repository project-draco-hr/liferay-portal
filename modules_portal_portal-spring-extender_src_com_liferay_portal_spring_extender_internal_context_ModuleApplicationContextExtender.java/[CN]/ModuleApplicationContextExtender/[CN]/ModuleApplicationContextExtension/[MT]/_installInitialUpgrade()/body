{
  Dictionary<String,String> headers=_bundle.getHeaders();
  String upgradeToSchemaVersion=GetterUtil.getString(headers.get("Require-SchemaVersion"),headers.get("Bundle-Version"));
  return UpgradeStepRegistratorTracker.register(_bundleContext,_bundle.getSymbolicName(),"0.0.0",upgradeToSchemaVersion,new UpgradeStep(){
    @Override public void upgrade(    DBProcessContext dbProcessContext) throws UpgradeException {
      DBContext dbContext=dbProcessContext.getDBContext();
      DBFactory dbFactory=dbContext.getDBFactory();
      DB db=dbFactory.getDB();
      try {
        db.runSQLTemplateString(getSQLTemplateString("tables.sql"),true,true);
        db.runSQLTemplateString(getSQLTemplateString("sequences.sql"),true,true);
        db.runSQLTemplateString(getSQLTemplateString("indexes.sql"),true,true);
      }
 catch (      Exception e) {
        new UpgradeException(e);
      }
    }
  }
);
}
