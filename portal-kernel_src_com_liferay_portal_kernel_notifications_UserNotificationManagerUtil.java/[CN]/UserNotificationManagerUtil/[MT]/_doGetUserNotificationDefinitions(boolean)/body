{
  Map<String,List<UserNotificationDefinition>> userNotificationDefinitionsMap=new ConcurrentHashMap<>();
  ServiceTrackerMap<String,List<UserNotificationDefinition>> userNotificationDefinitionsServiceTrackerMap=_instance._userNotificationDefinitions;
  for (  String portletId : userNotificationDefinitionsServiceTrackerMap.keySet()) {
    if (checkActive) {
      PortletConfig portletConfig=PortletConfigFactoryUtil.get(portletId);
      if (portletConfig == null) {
        continue;
      }
    }
    userNotificationDefinitionsMap.put(portletId,userNotificationDefinitionsServiceTrackerMap.getService(portletId));
  }
  return Collections.unmodifiableMap(userNotificationDefinitionsMap);
}
