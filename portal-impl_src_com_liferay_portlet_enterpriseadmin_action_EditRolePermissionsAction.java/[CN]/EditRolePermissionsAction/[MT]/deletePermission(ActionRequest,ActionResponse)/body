{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long roleId=ParamUtil.getLong(actionRequest,"roleId");
  long permissionId=ParamUtil.getLong(actionRequest,"permissionId");
  Role role=RoleLocalServiceUtil.getRole(roleId);
  if (role.getName().equals(RoleConstants.ADMINISTRATOR) || role.getName().equals(RoleConstants.OWNER) || role.getName().equals(RoleConstants.COMMUNITY_ADMINISTRATOR)|| role.getName().equals(RoleConstants.COMMUNITY_OWNER)|| role.getName().equals(RoleConstants.ORGANIZATION_ADMINISTRATOR)|| role.getName().equals(RoleConstants.ORGANIZATION_OWNER)) {
    throw new RolePermissionsException(role.getName());
  }
  PermissionServiceUtil.unsetRolePermission(roleId,themeDisplay.getScopeGroupId(),permissionId);
  SessionMessages.add(actionRequest,"permissionDeleted");
  String redirect=ParamUtil.getString(actionRequest,"redirect");
  actionResponse.sendRedirect(redirect);
}
