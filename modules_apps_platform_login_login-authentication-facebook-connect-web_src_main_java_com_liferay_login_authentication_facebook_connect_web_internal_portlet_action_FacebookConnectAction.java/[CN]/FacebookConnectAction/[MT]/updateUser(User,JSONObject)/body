{
  long facebookId=jsonObject.getLong("id");
  String emailAddress=jsonObject.getString("email");
  String firstName=jsonObject.getString("first_name");
  String lastName=jsonObject.getString("last_name");
  boolean male=Validator.equals(jsonObject.getString("gender"),"male");
  if ((facebookId == user.getFacebookId()) && emailAddress.equals(user.getEmailAddress()) && firstName.equals(user.getFirstName())&& lastName.equals(user.getLastName())&& (male == user.isMale())) {
    return user;
  }
  Contact contact=user.getContact();
  Calendar birthdayCal=CalendarFactoryUtil.getCalendar();
  birthdayCal.setTime(contact.getBirthday());
  int birthdayMonth=birthdayCal.get(Calendar.MONTH);
  int birthdayDay=birthdayCal.get(Calendar.DAY_OF_MONTH);
  int birthdayYear=birthdayCal.get(Calendar.YEAR);
  long[] groupIds=null;
  long[] organizationIds=null;
  long[] roleIds=null;
  List<UserGroupRole> userGroupRoles=null;
  long[] userGroupIds=null;
  ServiceContext serviceContext=new ServiceContext();
  if (!StringUtil.equalsIgnoreCase(emailAddress,user.getEmailAddress())) {
    _userLocalService.updateEmailAddress(user.getUserId(),StringPool.BLANK,emailAddress,emailAddress);
  }
  _userLocalService.updateEmailAddressVerified(user.getUserId(),true);
  return _userLocalService.updateUser(user.getUserId(),StringPool.BLANK,StringPool.BLANK,StringPool.BLANK,false,user.getReminderQueryQuestion(),user.getReminderQueryAnswer(),user.getScreenName(),emailAddress,facebookId,user.getOpenId(),true,null,user.getLanguageId(),user.getTimeZoneId(),user.getGreeting(),user.getComments(),firstName,user.getMiddleName(),lastName,contact.getPrefixId(),contact.getSuffixId(),male,birthdayMonth,birthdayDay,birthdayYear,contact.getSmsSn(),contact.getFacebookSn(),contact.getJabberSn(),contact.getSkypeSn(),contact.getTwitterSn(),contact.getJobTitle(),groupIds,organizationIds,roleIds,userGroupRoles,userGroupIds,serviceContext);
}
