{
  long controlPanelPlid=PortalUtil.getControlPanelPlid(_company.getCompanyId());
  PortletURL portletURL=PortletURLFactoryUtil.create(_request,PortletKeys.ASSET_BROWSER,controlPanelPlid,PortletRequest.RENDER_PHASE);
  portletURL.setParameter("struts_action","/asset_browser/view");
  portletURL.setParameter("eventName",getEventName());
  portletURL.setPortletMode(PortletMode.VIEW);
  portletURL.setWindowState(LiferayWindowState.POP_UP);
  if (_assetEntryId > 0) {
    portletURL.setParameter("refererAssetEntryId",String.valueOf(_assetEntryId));
  }
  long groupId=_getAssetBrowserGroupId(assetRendererFactory);
  portletURL.setParameter("groupId",String.valueOf(groupId));
  portletURL.setParameter("selectedGroupIds",StringUtil.merge(PortalUtil.getSharedContentSiteGroupIds(_company.getCompanyId(),groupId,_user.getUserId())));
  portletURL.setParameter("typeSelection",assetRendererFactory.getClassName());
  return portletURL;
}
