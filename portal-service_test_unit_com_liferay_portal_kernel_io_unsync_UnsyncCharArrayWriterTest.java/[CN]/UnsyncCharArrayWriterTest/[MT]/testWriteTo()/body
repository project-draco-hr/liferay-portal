{
  UnsyncCharArrayWriter unsyncCharArrayWriter=new UnsyncCharArrayWriter();
  unsyncCharArrayWriter.write("abcd");
  CharBuffer charBuffer=CharBuffer.allocate(2);
  int length=unsyncCharArrayWriter.writeTo(charBuffer);
  assertEquals(2,length);
  assertEquals(2,charBuffer.position());
  assertEquals(2,charBuffer.limit());
  charBuffer.position(0);
  assertEquals("ab",charBuffer.toString());
  ByteArrayOutputStream byteArrayOutputStream=new ByteArrayOutputStream();
  length=unsyncCharArrayWriter.writeTo(byteArrayOutputStream,StringPool.UTF8);
  assertEquals(4,length);
  assertEquals(4,byteArrayOutputStream.size());
  assertTrue(Arrays.equals("abcd".getBytes(),byteArrayOutputStream.toByteArray()));
  StringWriter stringWriter=new StringWriter();
  length=unsyncCharArrayWriter.writeTo(stringWriter);
  assertEquals(4,length);
  assertEquals("abcd",stringWriter.toString());
}
