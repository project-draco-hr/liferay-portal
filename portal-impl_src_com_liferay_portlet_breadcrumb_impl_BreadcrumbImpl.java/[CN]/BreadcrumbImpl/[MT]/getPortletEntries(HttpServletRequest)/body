{
  List<BreadcrumbEntry> entries=new ArrayList<BreadcrumbEntry>();
  List<BreadcrumbEntry> portletBreadcrumbEntries=PortalUtil.getPortletBreadcrumbs(request);
  if (portletBreadcrumbEntries == null) {
    return entries;
  }
  for (int i=0; i < portletBreadcrumbEntries.size(); i++) {
    BreadcrumbEntry portletBreadcrumbEntry=portletBreadcrumbEntries.get(i);
    BreadcrumbEntry newEntry=new BreadcrumbEntry();
    String portletBreadcrumbURL=portletBreadcrumbEntry.getURL();
    boolean isLastEntry=(i == (portletBreadcrumbEntries.size() - 1));
    if (Validator.isNotNull(portletBreadcrumbURL) && !isLastEntry) {
      if (!CookieKeys.hasSessionId(request)) {
        HttpSession session=request.getSession();
        portletBreadcrumbURL=PortalUtil.getURLWithSessionId(portletBreadcrumbURL,session.getId());
      }
      newEntry.setURL(portletBreadcrumbEntry.getURL());
      newEntry.setData(portletBreadcrumbEntry.getData());
    }
    newEntry.setTitle(portletBreadcrumbEntry.getTitle());
    entries.add(newEntry);
  }
  return entries;
}
