{
  List<AppDisplay> appDisplays=new ArrayList<>();
  BundlesMap bundlesMap=new BundlesMap(bundles.size());
  bundlesMap.load(bundles);
  appDisplays.addAll(buildMarketplaceAppDisplays(bundlesMap,category));
  appDisplays.addAll(buildPortalAppDisplays(bundlesMap,category));
  filterAppDisplays(appDisplays,state);
  return ListUtil.sort(appDisplays);
}
