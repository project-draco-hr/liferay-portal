{
  List<AppDisplay> appDisplays=new ArrayList<>();
  List<App> apps=null;
  if (Validator.isNotNull(category)) {
    apps=_appLocalService.getApps(category);
  }
 else {
    apps=_appLocalService.getApps(QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  }
  for (  App app : apps) {
    AppDisplay appDisplay=new AppDisplay(app.getTitle());
    List<Module> modules=_moduleLocalService.getModules(app.getAppId());
    for (    Module module : modules) {
      Bundle bundle=bundlesMap.removeBundle(module);
      if (bundle != null) {
        appDisplay.addBundle(bundle);
      }
    }
    appDisplays.add(appDisplay);
  }
  return appDisplays;
}
