{
  User user=PortalUtil.getUser(req);
  long plid=ParamUtil.getLong(req,"plid");
  Layout sourceLayout=LayoutLocalServiceUtil.getLayout(plid);
  Group stagingGroup=sourceLayout.getGroup();
  Group liveGroup=stagingGroup.getLiveGroup();
  Layout targetLayout=LayoutLocalServiceUtil.getLayout(liveGroup.getGroupId(),sourceLayout.isPrivateLayout(),sourceLayout.getLayoutId());
  copyPortletInfo(user.getUserId(),sourceLayout.getPlid(),targetLayout.getPlid(),portlet.getPortletId(),req.getParameterMap());
}
