{
  try {
    UploadPortletRequest uploadRequest=PortalUtil.getUploadPortletRequest(actionRequest);
    long plid=ParamUtil.getLong(uploadRequest,"plid");
    long groupId=ParamUtil.getLong(uploadRequest,"groupId");
    File file=uploadRequest.getFile("importFileName");
    if (!file.exists()) {
      throw new LARFileException("Import file does not exist");
    }
    LayoutServiceUtil.importPortletInfo(plid,groupId,portlet.getPortletId(),actionRequest.getParameterMap(),file);
    SessionMessages.add(actionRequest,"request_processed");
  }
 catch (  Exception e) {
    if ((e instanceof LARFileException) || (e instanceof LARTypeException) || (e instanceof PortletIdException)) {
      SessionErrors.add(actionRequest,e.getClass().getName());
    }
 else {
      _log.error(e,e);
      SessionErrors.add(actionRequest,LayoutImportException.class.getName());
    }
  }
}
