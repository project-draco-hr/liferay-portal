{
  try {
    HttpServletResponse res=webDavReq.getHttpServletResponse();
    String xml=getResponseXML(webDavReq);
    byte[] byteArray=xml.getBytes("UTF-8");
    res.setContentLength(byteArray.length);
    res.setContentType("text/xml; charset=UTF-8");
    res.setStatus(WebDAVUtil.SC_MULTI_STATUS);
    OutputStream out=res.getOutputStream();
    try {
      if (!res.isCommitted()) {
        out.write(byteArray);
      }
    }
 catch (    Exception e) {
      if (_log.isWarnEnabled()) {
        _log.warn(e,e);
      }
    }
 finally {
      try {
        out.flush();
      }
 catch (      Exception e) {
        _log.warn(e);
      }
      try {
        out.close();
      }
 catch (      Exception e) {
        _log.warn(e);
      }
    }
  }
 catch (  Exception e) {
    throw new WebDAVException(e);
  }
}
