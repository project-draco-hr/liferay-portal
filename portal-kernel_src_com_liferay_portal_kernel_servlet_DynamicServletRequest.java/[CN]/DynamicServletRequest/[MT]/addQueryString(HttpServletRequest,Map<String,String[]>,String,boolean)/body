{
  String[] parameters=StringUtil.split(queryString,CharPool.AMPERSAND);
  if (parameters.length == 0) {
    return request;
  }
  parameterMap=new HashMap<>(parameterMap);
  for (  String parameter : parameters) {
    String[] parameterParts=StringUtil.split(parameter,CharPool.EQUAL);
    String name=parameterParts[0];
    String value=StringPool.BLANK;
    if (parameterParts.length == 2) {
      value=parameterParts[1];
    }
    String[] values=parameterMap.get(name);
    if (values == null) {
      parameterMap.put(name,new String[]{value});
    }
 else {
      String[] newValues=new String[values.length + 1];
      System.arraycopy(values,0,newValues,0,values.length);
      newValues[newValues.length - 1]=value;
      parameterMap.put(name,newValues);
    }
  }
  request=new DynamicServletRequest(request,parameterMap,inherit);
  request.setAttribute(DYNAMIC_QUERY_STRING,queryString);
  return request;
}
