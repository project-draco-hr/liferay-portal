{
  if (image == null) {
    return null;
  }
  long igThumbnailMaxDimension=PrefsPropsUtil.getLong(PropsKeys.IG_IMAGE_THUMBNAIL_MAX_DIMENSION);
  if ((image.getHeight() > igThumbnailMaxDimension) || (image.getWidth() > igThumbnailMaxDimension)) {
    IGImage igImage=IGImageLocalServiceUtil.getImage(igImageId);
    IGImageLocalServiceUtil.updateSmallImage(igImage.getSmallImageId(),igImage.getLargeImageId());
    return ImageServiceUtil.getImage(image.getImageId());
  }
  return image;
}
