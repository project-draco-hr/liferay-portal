{
  if (pe instanceof EntryImageNameException || pe instanceof EntryImageSizeException) {
    String errorMessage=StringPool.BLANK;
    int errorType=0;
    if (pe instanceof EntryImageNameException) {
      errorType=ServletResponseConstants.SC_FILE_EXTENSION_EXCEPTION;
      String[] imageExtensions=PrefsPropsUtil.getStringArray(PropsKeys.BLOGS_IMAGE_EXTENSIONS,StringPool.COMMA);
      errorMessage=StringUtil.merge(imageExtensions);
    }
 else     if (pe instanceof EntryImageSizeException) {
      errorType=ServletResponseConstants.SC_FILE_SIZE_EXCEPTION;
    }
    JSONObject errorJSONObject=JSONFactoryUtil.createJSONObject();
    errorJSONObject.put("errorType",errorType);
    errorJSONObject.put("message",errorMessage);
    jsonObject.put("error",errorJSONObject);
  }
 else {
    throw pe;
  }
}
