{
  Map<String,String> expandoValuesMap=new HashMap<>();
  expandoValuesMap.put("Text",createLocalizationXML(new String[]{"A","B","C"},new String[]{"D","E","F"}));
  String fieldsDisplay="Text_INSTANCE_hcxo,Text_INSTANCE_vfqd,Text_INSTANCE_ycey";
  expandoValuesMap.put("_fieldsDisplay",createLocalizationXML(new String[]{fieldsDisplay}));
  String xml=_upgradeDynamicDataMapping.toXML(expandoValuesMap);
  Document document=SAXReaderUtil.read(xml);
  Map<String,Map<String,List<String>>> dataMap=toDataMap(document);
  Map<String,List<String>> actualTextData=dataMap.get("Text");
  assertEquals(ListUtil.toList(new String[]{"A","B","C"}),actualTextData.get("en_US"));
  assertEquals(ListUtil.toList(new String[]{"D","E","F"}),actualTextData.get("pt_BR"));
  Map<String,List<String>> actualFieldsDisplayData=dataMap.get("_fieldsDisplay");
  assertEquals(ListUtil.toList(new String[]{fieldsDisplay}),actualFieldsDisplayData.get("en_US"));
}
