{
  long userId=_user.getUserId();
  long groupId=_group.getGroupId();
  BackgroundTask backgroundTask=BackgroundTaskLocalServiceUtil.addBackgroundTask(userId,groupId,_BACKGROUND_TASK_NAME,null,_TASK_EXECUTOR_CLASS,getRandomTaskContextMap(),new ServiceContext());
  Assert.assertEquals(backgroundTask.getAttachmentsFileEntriesCount(),0);
  URL urlFile=getClass().getResource(_FILE_PATH);
  File file=new File(urlFile.toURI());
  BackgroundTaskLocalServiceUtil.addBackgroundTaskAttachment(userId,backgroundTask.getBackgroundTaskId(),_FILE_NAME,file);
  BackgroundTask backgroundTaskWithAttachedFile=BackgroundTaskLocalServiceUtil.fetchBackgroundTask(backgroundTask.getBackgroundTaskId());
  Assert.assertEquals(backgroundTaskWithAttachedFile.getAttachmentsFileEntriesCount(),1);
}
