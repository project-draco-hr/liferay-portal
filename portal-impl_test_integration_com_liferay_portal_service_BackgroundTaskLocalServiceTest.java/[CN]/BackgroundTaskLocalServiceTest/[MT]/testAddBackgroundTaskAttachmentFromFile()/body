{
  BackgroundTask backgroundTask=BackgroundTaskLocalServiceUtil.addBackgroundTask(_user.getUserId(),_group.getGroupId(),_BACKGROUND_TASK_NAME,null,_TASK_EXECUTOR_CLASS,getTaskContextMap(),new ServiceContext());
  Assert.assertEquals(backgroundTask.getAttachmentsFileEntriesCount(),0);
  URL url=getClass().getResource(_RESOURCE_NAME);
  File file=new File(url.toURI());
  BackgroundTaskLocalServiceUtil.addBackgroundTaskAttachment(_user.getUserId(),backgroundTask.getBackgroundTaskId(),ServiceTestUtil.randomString(),file);
  BackgroundTask backgroundTaskWithAttachedFile=BackgroundTaskLocalServiceUtil.fetchBackgroundTask(backgroundTask.getBackgroundTaskId());
  Assert.assertEquals(backgroundTaskWithAttachedFile.getAttachmentsFileEntriesCount(),1);
}
