{
  long userId=_user.getUserId();
  long groupId=_group.getGroupId();
  ServiceContext serviceContext=new ServiceContext();
  BackgroundTask backgroundTask=BackgroundTaskLocalServiceUtil.addBackgroundTask(userId,groupId,_BACKGROUND_TASK_NAME,null,_TASK_EXECUTOR_CLASS,getTaskContextMap(),serviceContext);
  Assert.assertEquals(BackgroundTaskConstants.STATUS_NEW,backgroundTask.getStatus());
  BackgroundTask ammendBackgroundTask=BackgroundTaskLocalServiceUtil.amendBackgroundTask(backgroundTask.getBackgroundTaskId(),backgroundTask.getTaskContextMap(),BackgroundTaskConstants.STATUS_FAILED,serviceContext);
  Assert.assertEquals(BackgroundTaskConstants.STATUS_FAILED,ammendBackgroundTask.getStatus());
  Assert.assertTrue(ammendBackgroundTask.isCompleted());
}
