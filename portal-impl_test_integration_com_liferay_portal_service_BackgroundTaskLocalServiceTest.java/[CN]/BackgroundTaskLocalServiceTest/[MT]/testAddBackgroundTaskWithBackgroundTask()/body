{
  long userId=_user.getUserId();
  long groupId=_group.getGroupId();
  BackgroundTask backgroundTaskImpl=new BackgroundTaskImpl();
  backgroundTaskImpl.setUserId(userId);
  backgroundTaskImpl.setGroupId(groupId);
  backgroundTaskImpl.setName(_BACKGROUND_TASK_NAME);
  backgroundTaskImpl.setTaskExecutorClassName(_TASK_EXECUTOR_CLASS.getCanonicalName());
  Map<String,Serializable> taskContextMap=getRandomTaskContextMap();
  String taskContext=JSONFactoryUtil.serialize(taskContextMap);
  backgroundTaskImpl.setTaskContext(taskContext);
  BackgroundTask backgroundTask=BackgroundTaskLocalServiceUtil.addBackgroundTask(backgroundTaskImpl);
  Assert.assertNotNull(backgroundTask);
  Assert.assertEquals(userId,backgroundTask.getUserId());
  Assert.assertEquals(groupId,backgroundTask.getGroupId());
  Assert.assertEquals(_BACKGROUND_TASK_NAME,backgroundTask.getName());
  Assert.assertEquals(_TASK_EXECUTOR_CLASS.getCanonicalName(),backgroundTask.getTaskExecutorClassName());
  assertMapEquals(taskContextMap,backgroundTask.getTaskContextMap());
}
