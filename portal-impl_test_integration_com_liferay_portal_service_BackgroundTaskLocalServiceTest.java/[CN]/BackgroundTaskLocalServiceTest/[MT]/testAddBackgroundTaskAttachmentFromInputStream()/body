{
  BackgroundTask backgroundTask=BackgroundTaskLocalServiceUtil.addBackgroundTask(_user.getUserId(),_group.getGroupId(),_BACKGROUND_TASK_NAME,null,_TASK_EXECUTOR_CLASS,getTaskContextMap(),new ServiceContext());
  Assert.assertEquals(backgroundTask.getAttachmentsFileEntriesCount(),0);
  InputStream inputStream=getClass().getResourceAsStream(_FILE_PATH);
  String fileName=ServiceTestUtil.randomString();
  BackgroundTaskLocalServiceUtil.addBackgroundTaskAttachment(_user.getUserId(),backgroundTask.getBackgroundTaskId(),fileName,inputStream);
  BackgroundTask backgroundTaskWithAttachedFile=BackgroundTaskLocalServiceUtil.fetchBackgroundTask(backgroundTask.getBackgroundTaskId());
  Assert.assertEquals(backgroundTaskWithAttachedFile.getAttachmentsFileEntriesCount(),1);
  List<FileEntry> attachmentsFileEntries=backgroundTaskWithAttachedFile.getAttachmentsFileEntries();
  FileEntry attachment=attachmentsFileEntries.get(0);
  Assert.assertEquals(fileName,attachment.getTitle());
}
