{
  long userId=_user.getUserId();
  long groupId=_group.getGroupId();
  BackgroundTask backgroundTask=BackgroundTaskLocalServiceUtil.addBackgroundTask(userId,groupId,_BACKGROUND_TASK_NAME,null,_TASK_EXECUTOR_CLASS,getTaskContextMap(),new ServiceContext());
  Assert.assertEquals(backgroundTask.getAttachmentsFileEntriesCount(),0);
  InputStream inputStream=getClass().getResourceAsStream(_FILE_PATH);
  BackgroundTaskLocalServiceUtil.addBackgroundTaskAttachment(userId,backgroundTask.getBackgroundTaskId(),_FILE_NAME,inputStream);
  BackgroundTask backgroundTaskWithAttachedFile=BackgroundTaskLocalServiceUtil.fetchBackgroundTask(backgroundTask.getBackgroundTaskId());
  Assert.assertEquals(backgroundTaskWithAttachedFile.getAttachmentsFileEntriesCount(),1);
}
