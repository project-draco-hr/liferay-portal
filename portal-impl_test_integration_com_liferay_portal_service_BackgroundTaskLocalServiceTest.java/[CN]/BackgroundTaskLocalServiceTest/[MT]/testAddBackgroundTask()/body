{
  initalizeThreadLocals();
  Map<String,Serializable> taskContextMap=getTaskContextMap();
  BackgroundTask backgroundTask=BackgroundTaskLocalServiceUtil.addBackgroundTask(_user.getUserId(),_group.getGroupId(),_BACKGROUND_TASK_NAME,null,_TASK_EXECUTOR_CLASS,taskContextMap,new ServiceContext());
  Assert.assertNotNull(backgroundTask);
  Assert.assertEquals(_user.getUserId(),backgroundTask.getUserId());
  Assert.assertEquals(_group.getGroupId(),backgroundTask.getGroupId());
  Assert.assertEquals(_BACKGROUND_TASK_NAME,backgroundTask.getName());
  Assert.assertEquals(_TASK_EXECUTOR_CLASS.getCanonicalName(),backgroundTask.getTaskExecutorClassName());
  AssertUtils.assertEquals(taskContextMap,backgroundTask.getTaskContextMap());
  Map<String,Serializable> threadLocalValues=(Map<String,Serializable>)backgroundTask.getTaskContextMap().get("threadLocalValues");
  assertThreadLocalValues(threadLocalValues);
}
