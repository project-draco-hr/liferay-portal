{
  PermissionChecker permissionChecker=getPermissionChecker();
  if (!PropsValues.ORGANIZATIONS_ASSIGNMENT_STRICT || permissionChecker.isCompanyAdmin()) {
    return;
  }
  for (  long userId : userIds) {
    boolean allowed=false;
    List<Organization> organizations=organizationLocalService.getUserOrganizations(userId);
    for (    Organization organization : organizations) {
      if (OrganizationPermissionUtil.contains(permissionChecker,organization,ActionKeys.MANAGE_USERS)) {
        allowed=true;
        break;
      }
    }
    if (!allowed) {
      throw new PrincipalException();
    }
  }
}
