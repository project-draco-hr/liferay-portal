{
  PermissionChecker permissionChecker=getPermissionChecker();
  if (!PropsValues.ORGANIZATIONS_ASSIGNMENT_STRICT || permissionChecker.isCompanyAdmin()) {
    return;
  }
  List<Organization> organizations=organizationService.getManageableOrganizations(getUserId(),ActionKeys.MANAGE_USERS);
  for (  long userId : userIds) {
    boolean allowed=false;
    for (    Organization organization : organizations) {
      if (userLocalService.hasOrganizationUser(organization.getOrganizationId(),userId)) {
        allowed=true;
        break;
      }
    }
    if (!allowed) {
      throw new PrincipalException();
    }
  }
}
