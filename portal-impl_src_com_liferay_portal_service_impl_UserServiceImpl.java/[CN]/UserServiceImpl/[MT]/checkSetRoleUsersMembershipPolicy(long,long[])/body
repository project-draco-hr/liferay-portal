{
  List<Long> unsetUserIds=new ArrayList<Long>(userIds.length);
  List<User> users=rolePersistence.getUsers(roleId);
  for (  User user : users) {
    if (!ArrayUtil.contains(userIds,user.getUserId())) {
      unsetUserIds.add(user.getUserId());
    }
  }
  checkUnsetRoleUsersMembershipPolicy(roleId,ArrayUtil.toLongArray(unsetUserIds));
  checkAddRoleUsersMembershipPolicy(roleId,userIds);
}
