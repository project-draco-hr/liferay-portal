{
  if (!PropsValues.ORGANIZATIONS_ASSIGNMENT_STRICT || getPermissionChecker().isCompanyAdmin()) {
    return;
  }
  List<Organization> manageableOrganizations=organizationService.getManageableOrganizations(getUserId(),ActionKeys.MANAGE_USERS);
  for (  long userId : userIds) {
    boolean allowed=false;
    for (    Organization organization : manageableOrganizations) {
      if (userLocalService.hasOrganizationUser(organization.getOrganizationId(),userId)) {
        allowed=true;
        break;
      }
    }
    if (!allowed) {
      throw new PrincipalException();
    }
  }
}
