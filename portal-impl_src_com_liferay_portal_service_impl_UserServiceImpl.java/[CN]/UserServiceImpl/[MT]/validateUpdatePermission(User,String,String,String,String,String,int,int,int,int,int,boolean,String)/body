{
  List<String> changedFieldsList=new ArrayList<String>();
  Contact contact=user.getContact();
  Calendar birthday=CalendarFactoryUtil.getCalendar();
  birthday.setTime(contact.getBirthday());
  if ((birthdayMonth != birthday.get(Calendar.MONTH)) || (birthdayDay != birthday.get(Calendar.DAY_OF_MONTH)) || (birthdayYear != birthday.get(Calendar.YEAR))) {
    changedFieldsList.add("birthday");
  }
  if (!emailAddress.equalsIgnoreCase(user.getEmailAddress())) {
    changedFieldsList.add("emailAddress");
  }
  if (!firstName.equalsIgnoreCase(user.getFirstName())) {
    changedFieldsList.add("firstName");
  }
  if (male != contact.getMale()) {
    changedFieldsList.add("gender");
  }
  if (!jobTitle.equalsIgnoreCase(user.getJobTitle())) {
    changedFieldsList.add("jobTitle");
  }
  if (!lastName.equalsIgnoreCase(user.getLastName())) {
    changedFieldsList.add("lastName");
  }
  if (!middleName.equalsIgnoreCase(user.getMiddleName())) {
    changedFieldsList.add("middleName");
  }
  if (prefixId != contact.getPrefixId()) {
    changedFieldsList.add("prefix");
  }
  if (!screenName.equalsIgnoreCase(user.getScreenName())) {
    changedFieldsList.add("screenName");
  }
  if (suffixId != contact.getSuffixId()) {
    changedFieldsList.add("suffix");
  }
  for (  String field : changedFieldsList) {
    if (!UsersAdminUtil.hasUpdateFieldPermission(user,field)) {
      throw new UserPermissionException();
    }
  }
}
