{
  List<Long> unsetUserIds=new ArrayList<Long>(userIds.length);
  List<User> users=userGroupPersistence.getUsers(userGroupId);
  for (  User user : users) {
    if (!ArrayUtil.contains(userIds,user.getUserId())) {
      unsetUserIds.add(user.getUserId());
    }
  }
  checkUnsetUserGroupUsersMembershipPolicy(userGroupId,ArrayUtil.toLongArray(unsetUserIds));
  checkAddUserGroupUsersMembershipPolicy(userGroupId,userIds);
}
