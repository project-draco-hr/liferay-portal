{
  Role ownerRole=RoleLocalServiceUtil.getRole(getUser().getCompanyId(),RoleImpl.COMMUNITY_OWNER);
  if (!UserGroupRoleLocalServiceUtil.hasUserGroupRole(getUser().getUserId(),groupId,ownerRole.getRoleId())) {
    Role adminRole=RoleLocalServiceUtil.getRole(getUser().getCompanyId(),RoleImpl.COMMUNITY_ADMINISTRATOR);
    for (int i=0; i < userIds.length; i++) {
      if (UserGroupRoleLocalServiceUtil.hasUserGroupRole(userIds[i],groupId,ownerRole.getRoleId()) || UserGroupRoleLocalServiceUtil.hasUserGroupRole(userIds[i],groupId,adminRole.getRoleId())) {
        throw new PrincipalException();
      }
    }
  }
  checkUpdatePermission(groupId,userIds);
}
