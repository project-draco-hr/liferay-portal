{
  User user=getUser();
  Role ownerRole=roleLocalService.getRole(user.getCompanyId(),RoleImpl.COMMUNITY_OWNER);
  if (!userGroupRoleLocalService.hasUserGroupRole(user.getUserId(),groupId,ownerRole.getRoleId())) {
    Role adminRole=roleLocalService.getRole(user.getCompanyId(),RoleImpl.COMMUNITY_ADMINISTRATOR);
    for (int i=0; i < userIds.length; i++) {
      if (userGroupRoleLocalService.hasUserGroupRole(userIds[i],groupId,ownerRole.getRoleId()) || userGroupRoleLocalService.hasUserGroupRole(userIds[i],groupId,adminRole.getRoleId())) {
        throw new PrincipalException();
      }
    }
  }
  checkUpdatePermission(groupId,userIds);
}
