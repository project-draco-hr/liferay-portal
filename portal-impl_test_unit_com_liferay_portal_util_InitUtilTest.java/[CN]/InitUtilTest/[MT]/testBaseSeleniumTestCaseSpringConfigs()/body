{
  String log4jConfigureOnStartup=SystemProperties.get(_LOG4J_CONFIGURE_ON_STARTUP);
  SystemProperties.set(_LOG4J_CONFIGURE_ON_STARTUP,StringPool.FALSE);
  String resourceActionsReadPortletResources=SystemProperties.get(_RESOURCE_ACTIONS_READ_PORTLET_RESOURCES);
  SystemProperties.set(_RESOURCE_ACTIONS_READ_PORTLET_RESOURCES,StringPool.FALSE);
  ReflectionTestUtil.setFieldValue(PropsValues.class,"SPRING_INFRASTRUCTURE_CONFIGS",new String[0]);
  _fileImpl.deltree(PropsValues.MODULE_FRAMEWORK_STATE_DIR);
  try {
    InitUtil.initWithSpring(Arrays.asList("META-INF/util-spring.xml"),true,true);
  }
  finally {
    if (resourceActionsReadPortletResources == null) {
      SystemProperties.clear(_RESOURCE_ACTIONS_READ_PORTLET_RESOURCES);
    }
 else {
      SystemProperties.set(_RESOURCE_ACTIONS_READ_PORTLET_RESOURCES,resourceActionsReadPortletResources);
    }
    if (log4jConfigureOnStartup == null) {
      SystemProperties.clear(_LOG4J_CONFIGURE_ON_STARTUP);
    }
 else {
      SystemProperties.set(_LOG4J_CONFIGURE_ON_STARTUP,log4jConfigureOnStartup);
    }
    InitUtil.stopRuntime();
    InitUtil.stopModuleFramework();
  }
}
