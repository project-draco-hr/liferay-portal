{
  colorSchemeId=GetterUtil.getString(colorSchemeId);
  Theme theme=getTheme(companyId,themeId);
  Map colorSchemesMap=theme.getColorSchemesMap();
  ColorScheme colorScheme=(ColorScheme)colorSchemesMap.get(colorSchemeId);
  if (colorScheme == null) {
    List colorSchemes=theme.getColorSchemes();
    if (colorSchemes.size() > 0) {
      colorScheme=(ColorScheme)colorSchemes.get(0);
    }
  }
  if (colorScheme == null) {
    colorScheme=(ColorScheme)colorSchemesMap.get(ColorSchemeImpl.getDefaultColorSchemeId());
  }
  if (colorScheme == null) {
    colorScheme=ColorSchemeImpl.getNullColorScheme();
  }
  return colorScheme;
}
