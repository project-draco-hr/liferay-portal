{
  List<String> names=new ArrayList<String>();
  if (!_defaultParameters.isEmpty()) {
    for (    Map.Entry<String,String> entry : _defaultParameters.entrySet()) {
      String name=entry.getKey();
      String value=entry.getValue();
      if (!value.equals(MapUtil.getString(parameters,name))) {
        return null;
      }
      names.add(name);
    }
  }
  String url=_urlPattern;
  for (  RoutePart routePart : _routeParts) {
    String name=routePart.getName();
    String value=MapUtil.getString(parameters,name);
    if (value == null) {
      return null;
    }
    value=HttpUtil.encodeURL(value);
    if (!routePart.matches(value)) {
      return null;
    }
    names.add(name);
    url=url.replace(routePart.getFragmentName(),value);
  }
  for (  String name : names) {
    parameters.remove(name);
  }
  for (  String name : _ignoredParameters) {
    parameters.remove(name);
  }
  return url;
}
