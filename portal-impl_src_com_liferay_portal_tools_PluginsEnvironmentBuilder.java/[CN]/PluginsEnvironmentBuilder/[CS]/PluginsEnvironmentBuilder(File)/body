{
  DirectoryScanner ds=new DirectoryScanner();
  ds.setBasedir(dir);
  ds.setIncludes(new String[]{"**\\liferay-plugin-package.properties"});
  ds.scan();
  String dirName=dir.getCanonicalPath();
  for (  String fileName : ds.getIncludedFiles()) {
    setupWarProject(dirName,fileName);
  }
  ds=new DirectoryScanner();
  ds.setBasedir(dir);
  ds.setIncludes(new String[]{"**\\build.xml"});
  ds.scan();
  for (  String fileName : ds.getIncludedFiles()) {
    String content=_fileUtil.read(dirName + "/" + fileName);
    boolean isOsgiProject=content.contains("<import file=\"../../build-common-osgi-plugin.xml\" />");
    boolean isSharedProject=content.contains("<import file=\"../build-common-shared.xml\" />");
    if (!isOsgiProject && !isSharedProject) {
      continue;
    }
    setupJarProject(dirName,fileName);
  }
}
