{
  Group group=_groupLocalService.fetchGroup(portletDataContext.getGroupId());
  String hiddenNodeNames=portletPreferences.getValue("hiddenNodes",null);
  for (  String hiddenNodeName : StringUtil.split(hiddenNodeNames)) {
    exportNode(portletDataContext,group,hiddenNodeName);
  }
  String visibleNodeNames=portletPreferences.getValue("visibleNodes",null);
  for (  String visibleNodeName : StringUtil.split(visibleNodeNames)) {
    exportNode(portletDataContext,group,visibleNodeName);
  }
  return portletPreferences;
}
