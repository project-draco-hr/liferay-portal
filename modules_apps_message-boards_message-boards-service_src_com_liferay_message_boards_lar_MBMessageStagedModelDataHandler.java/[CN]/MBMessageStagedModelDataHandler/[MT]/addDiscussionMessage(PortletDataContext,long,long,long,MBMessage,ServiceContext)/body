{
  MBDiscussion discussion=_mbDiscussionLocalService.getThreadDiscussion(threadId);
  MBMessage importedMessage=null;
  if (!message.isRoot()) {
    importedMessage=_mbMessageLocalService.addDiscussionMessage(userId,message.getUserName(),portletDataContext.getScopeGroupId(),discussion.getClassName(),discussion.getClassPK(),threadId,parentMessageId,message.getSubject(),message.getBody(),serviceContext);
  }
 else {
    MBThread thread=_mbThreadLocalService.getThread(threadId);
    importedMessage=_mbMessageLocalService.getMBMessage(thread.getRootMessageId());
  }
  return importedMessage;
}
