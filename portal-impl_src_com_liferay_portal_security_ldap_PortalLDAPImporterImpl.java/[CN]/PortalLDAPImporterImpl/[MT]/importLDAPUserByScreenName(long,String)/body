{
  long ldapServerId=PortalLDAPUtil.getLdapServerId(companyId,screenName,StringPool.BLANK);
  SearchResult result=(SearchResult)PortalLDAPUtil.getUser(ldapServerId,companyId,screenName,StringPool.BLANK);
  if (result == null) {
    if (_log.isWarnEnabled()) {
      _log.warn("No user was found in LDAP with screenName " + screenName);
    }
    return null;
  }
  LdapContext ldapContext=PortalLDAPUtil.getContext(ldapServerId,companyId);
  String fullUserDN=PortalLDAPUtil.getNameInNamespace(ldapServerId,companyId,result);
  Attributes attributes=PortalLDAPUtil.getUserAttributes(ldapServerId,companyId,ldapContext,fullUserDN);
  User user=importLDAPUser(ldapServerId,companyId,ldapContext,attributes,StringPool.BLANK);
  ldapContext.close();
  return user;
}
