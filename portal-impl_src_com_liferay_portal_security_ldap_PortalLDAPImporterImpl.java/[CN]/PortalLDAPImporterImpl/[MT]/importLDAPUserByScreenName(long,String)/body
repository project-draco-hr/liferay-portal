{
  long ldapServerId=PortalLDAPUtil.getLdapServerId(companyId,screenName);
  SearchResult result=(SearchResult)PortalLDAPUtil.getUser(ldapServerId,companyId,screenName);
  if (result == null) {
    if (_log.isWarnEnabled()) {
      _log.warn("No user was found in LDAP with screenName " + screenName);
    }
    return null;
  }
  LdapContext ldapContext=PortalLDAPUtil.getContext(ldapServerId,companyId);
  User user=PortalLDAPImporterUtil.importLDAPUser(ldapServerId,companyId,ldapContext,result.getAttributes(),StringPool.BLANK);
  ldapContext.close();
  return user;
}
