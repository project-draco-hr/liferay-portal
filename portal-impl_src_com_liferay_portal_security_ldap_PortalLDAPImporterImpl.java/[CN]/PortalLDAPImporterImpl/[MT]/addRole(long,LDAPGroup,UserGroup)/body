{
  if (!PropsValues.LDAP_IMPORT_CREATE_ROLE_PER_GROUP) {
    return;
  }
  Role role=null;
  try {
    role=RoleLocalServiceUtil.getRole(companyId,ldapGroup.getGroupName());
  }
 catch (  NoSuchRoleException nsre) {
    User defaultUser=UserLocalServiceUtil.getDefaultUser(companyId);
    Map<Locale,String> descriptionMap=new HashMap<Locale,String>();
    descriptionMap.put(LocaleUtil.getDefault(),"Autogenerated role from LDAP import");
    role=RoleLocalServiceUtil.addRole(defaultUser.getUserId(),null,0,ldapGroup.getGroupName(),null,descriptionMap,RoleConstants.TYPE_REGULAR,null);
  }
  Group group=userGroup.getGroup();
  if (GroupLocalServiceUtil.hasRoleGroup(role.getRoleId(),group.getGroupId())) {
    return;
  }
  GroupLocalServiceUtil.addRoleGroups(role.getRoleId(),new long[]{group.getGroupId()});
}
