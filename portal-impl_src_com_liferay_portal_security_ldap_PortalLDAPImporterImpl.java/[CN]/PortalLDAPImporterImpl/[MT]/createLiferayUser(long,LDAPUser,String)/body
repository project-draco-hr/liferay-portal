{
  if (_log.isDebugEnabled()) {
    _log.debug("Adding user to portal " + ldapUser.getEmailAddress());
  }
  Calendar birthdayCal=CalendarFactoryUtil.getCalendar();
  birthdayCal.setTime(ldapUser.getBirthday());
  int birthdayMonth=birthdayCal.get(Calendar.MONTH);
  int birthdayDay=birthdayCal.get(Calendar.DAY_OF_MONTH);
  int birthdayYear=birthdayCal.get(Calendar.YEAR);
  return UserLocalServiceUtil.addUser(ldapUser.getCreatorUserId(),companyId,ldapUser.isAutoPassword(),password,password,ldapUser.isAutoScreenName(),ldapUser.getScreenName(),ldapUser.getEmailAddress(),ldapUser.getOpenId(),ldapUser.getLocale(),ldapUser.getFirstName(),ldapUser.getMiddleName(),ldapUser.getLastName(),ldapUser.getPrefixId(),ldapUser.getSuffixId(),ldapUser.isMale(),birthdayMonth,birthdayDay,birthdayYear,ldapUser.getJobTitle(),ldapUser.getGroupIds(),ldapUser.getOrganizationIds(),ldapUser.getRoleIds(),ldapUser.getUserGroupIds(),ldapUser.isSendEmail(),ldapUser.getServiceContext());
}
