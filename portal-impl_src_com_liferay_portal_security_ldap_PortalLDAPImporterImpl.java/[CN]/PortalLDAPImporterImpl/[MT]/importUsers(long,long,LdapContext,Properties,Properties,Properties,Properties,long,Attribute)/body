{
  UserLocalServiceUtil.clearUserGroupUsers(userGroupId);
  for (int i=0; i < attribute.size(); i++) {
    String fullUserDN=(String)attribute.get(i);
    Attributes userAttributes=null;
    try {
      userAttributes=PortalLDAPUtil.getUserAttributes(ldapServerId,companyId,ldapContext,fullUserDN);
    }
 catch (    NameNotFoundException nnfe) {
      _log.error("LDAP user not found with fullUserDN " + fullUserDN,nnfe);
      continue;
    }
    try {
      User user=importUser(companyId,userAttributes,userMappings,userExpandoMappings,contactMappings,contactExpandoMappings,StringPool.BLANK);
      if (user != null) {
        if (_log.isDebugEnabled()) {
          _log.debug("Adding " + user.getUserId() + " to group "+ userGroupId);
        }
        UserLocalServiceUtil.addUserGroupUsers(userGroupId,new long[]{user.getUserId()});
      }
    }
 catch (    Exception e) {
      _log.error("Unable to load user " + userAttributes,e);
    }
  }
}
