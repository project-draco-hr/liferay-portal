{
  if (!PropsValues.LDAP_IMPORT_CREATE_ROLE_PER_GROUP_ENABLED) {
    return;
  }
  Role role=null;
  try {
    role=RoleLocalServiceUtil.getRole(companyId,ldapGroup.getGroupName());
  }
 catch (  NoSuchRoleException e) {
    User defaultUser=UserLocalServiceUtil.getDefaultUser(companyId);
    role=RoleLocalServiceUtil.addRole(defaultUser.getUserId(),companyId,ldapGroup.getGroupName(),null,"Automatically imported via LDAP import",RoleConstants.TYPE_REGULAR);
  }
  long userGroupGroupId=userGroup.getGroup().getGroupId();
  if (GroupLocalServiceUtil.hasRoleGroup(role.getRoleId(),userGroupGroupId)) {
    return;
  }
  GroupLocalServiceUtil.addRoleGroups(role.getRoleId(),new long[]{userGroupGroupId});
}
