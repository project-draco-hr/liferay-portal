{
  Properties userMappings=LDAPSettingsUtil.getUserMappings(ldapServerId,companyId);
  Properties userExpandoMappings=LDAPSettingsUtil.getUserExpandoMappings(ldapServerId,companyId);
  Properties contactMappings=LDAPSettingsUtil.getContactMappings(ldapServerId,companyId);
  Properties contactExpandoMappings=LDAPSettingsUtil.getContactExpandoMappings(ldapServerId,companyId);
  Properties groupMappings=LDAPSettingsUtil.getGroupMappings(ldapServerId,companyId);
  User user=addUserFromLdap(companyId,userMappings,userExpandoMappings,contactMappings,contactExpandoMappings,attributes,password);
  importGroupsAndMembershipFromLDAPUser(ldapServerId,companyId,ldapContext,attributes,user,userMappings,groupMappings);
  return user;
}
