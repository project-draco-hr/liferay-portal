{
  List<SearchResult> searchResults=PortalLDAPUtil.getUsers(ldapServerId,companyId,ldapContext,0);
  for (  SearchResult searchResult : searchResults) {
    try {
      Attributes userAttributes=PortalLDAPUtil.getUserAttributes(ldapServerId,companyId,ldapContext,PortalLDAPUtil.getNameInNamespace(ldapServerId,companyId,searchResult));
      User user=importUser(companyId,userAttributes,userMappings,userExpandoMappings,contactMappings,contactExpandoMappings,StringPool.BLANK);
      importGroups(ldapServerId,companyId,ldapContext,userAttributes,user,userMappings,groupMappings);
    }
 catch (    Exception e) {
      _log.error("Unable to import user " + searchResult,e);
    }
  }
}
