{
  List<Permission> guestPermissionsList=permissionLocalService.getPermissions(companyId,actionIds,resource.getResourceId());
  PermissionsListFilter permissionsListFilter=PermissionsListFilterFactory.getInstance();
  guestPermissionsList=permissionsListFilter.filterGuestPermissions(companyId,groupId,userId,name,resource.getPrimKey(),portletActions,guestPermissionsList);
  long defaultUserId=userLocalService.getDefaultUserId(companyId);
  userPersistence.addPermissions(defaultUserId,guestPermissionsList);
}
