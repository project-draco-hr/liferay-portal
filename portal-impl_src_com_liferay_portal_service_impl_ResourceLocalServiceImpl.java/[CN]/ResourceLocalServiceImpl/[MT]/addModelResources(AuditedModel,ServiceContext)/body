{
  ClassedModel classedModel=(ClassedModel)auditedModel;
  if (serviceContext.getAddGroupPermissions() || serviceContext.getAddGuestPermissions()) {
    addResources(auditedModel.getCompanyId(),getGroupId(auditedModel),auditedModel.getUserId(),classedModel.getModelClassName(),String.valueOf(classedModel.getPrimaryKeyObj()),false,serviceContext.getAddGroupPermissions(),serviceContext.getAddGuestPermissions(),getPermissionedModel(auditedModel));
  }
 else {
    if (serviceContext.isDeriveDefaultPermissions()) {
      serviceContext.deriveDefaultPermissions(getGroupId(auditedModel),classedModel.getModelClassName());
    }
    addModelResources(auditedModel.getCompanyId(),getGroupId(auditedModel),auditedModel.getUserId(),classedModel.getModelClassName(),String.valueOf(classedModel.getPrimaryKeyObj()),serviceContext.getGroupPermissions(),serviceContext.getGuestPermissions(),getPermissionedModel(auditedModel));
  }
}
