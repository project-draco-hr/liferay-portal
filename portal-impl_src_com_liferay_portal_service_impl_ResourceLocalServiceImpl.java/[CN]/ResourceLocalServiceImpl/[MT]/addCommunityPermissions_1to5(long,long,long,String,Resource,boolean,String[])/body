{
  long resourceId=resource.getResourceId();
  String primKey=resource.getPrimKey();
  List<Permission> communityPermissionsList=permissionLocalService.getPermissions(companyId,actionIds,resourceId);
  PermissionsListFilter permissionsListFilter=PermissionsListFilterFactory.getInstance();
  communityPermissionsList=permissionsListFilter.filterCommunityPermissions(companyId,groupId,userId,name,primKey,portletActions,communityPermissionsList);
  if (PropsValues.PERMISSIONS_USER_CHECK_ALGORITHM == 5) {
    Role role=roleLocalService.getDefaultGroupRole(groupId);
    rolePersistence.addPermissions(role.getRoleId(),communityPermissionsList);
  }
 else {
    groupPersistence.addPermissions(groupId,communityPermissionsList);
  }
}
