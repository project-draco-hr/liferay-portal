{
  Resource resource=resourceLocalService.getResource(companyId,BlogsEntry.class.getName(),ResourceConstants.SCOPE_INDIVIDUAL,String.valueOf(classPK));
  Role role=roleLocalService.getRole(companyId,RoleConstants.GUEST);
  if (guestPermissions == null) {
    guestPermissions=new String[0];
  }
  permissionService.setRolePermissions(role.getRoleId(),groupId,guestPermissions,resource.getResourceId());
  Group group=groupLocalService.getGroup(groupId);
  if (group.isLayout()) {
    Layout layout=layoutLocalService.getLayout(group.getClassPK());
    group=layout.getGroup();
  }
  if (group.isCommunity()) {
    role=roleLocalService.getRole(companyId,RoleConstants.COMMUNITY_MEMBER);
  }
 else   if (group.isOrganization()) {
    role=roleLocalService.getRole(companyId,RoleConstants.ORGANIZATION_MEMBER);
  }
 else   if (group.isUser() || group.isUserGroup()) {
    role=roleLocalService.getRole(companyId,RoleConstants.POWER_USER);
  }
  if (communityPermissions == null) {
    communityPermissions=new String[0];
  }
  permissionService.setRolePermissions(role.getRoleId(),groupId,communityPermissions,resource.getResourceId());
}
