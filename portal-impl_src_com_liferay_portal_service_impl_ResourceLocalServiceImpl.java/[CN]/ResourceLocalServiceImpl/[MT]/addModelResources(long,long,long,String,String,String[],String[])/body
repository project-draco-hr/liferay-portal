{
  if (!PermissionThreadLocal.isAddResource()) {
    return;
  }
  validate(name,false);
  addResource(companyId,name,ResourceConstants.SCOPE_COMPANY,String.valueOf(companyId));
  Group guestGroup=groupLocalService.getGroup(companyId,GroupConstants.GUEST);
  addResource(companyId,name,ResourceConstants.SCOPE_GROUP,String.valueOf(guestGroup.getGroupId()));
  if ((groupId > 0) && (guestGroup.getGroupId() != groupId)) {
    addResource(companyId,name,ResourceConstants.SCOPE_GROUP,String.valueOf(groupId));
  }
  if (primKey == null) {
    return;
  }
  Resource resource=addResource(companyId,name,ResourceConstants.SCOPE_INDIVIDUAL,primKey);
  if (PropsValues.PERMISSIONS_USER_CHECK_ALGORITHM == 6) {
    addModelResources_6(companyId,groupId,resource,communityPermissions,guestPermissions);
  }
 else {
    addModelResources_1to5(companyId,groupId,userId,resource,communityPermissions,guestPermissions);
  }
}
