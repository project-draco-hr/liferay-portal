{
  WabBundleProcessor wabBundleProcessor=_wabBundleProcessors.remove(bundle);
  if (wabBundleProcessor == null) {
    throw new IllegalArgumentException("Bundle is not a WAB");
  }
  EventUtil.sendEvent(bundle,EventUtil.UNDEPLOYING,null,false);
  try {
    wabBundleProcessor.destroy();
  }
 catch (  Exception e) {
    EventUtil.sendEvent(bundle,EventUtil.FAILED,e,false);
  }
  EventUtil.sendEvent(bundle,EventUtil.UNDEPLOYED,null,false);
  handleCollidedWABs(bundle);
}
