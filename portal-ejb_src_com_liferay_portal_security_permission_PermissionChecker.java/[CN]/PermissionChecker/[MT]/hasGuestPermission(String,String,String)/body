{
  if (name.indexOf(StringPool.PERIOD) != -1) {
    List actions=ResourceActionsUtil.getModelResourceGuestUnsupportedActions(name);
    if (actions.contains(actionId)) {
      return false;
    }
  }
 else {
    List actions=ResourceActionsUtil.getPortletResourceGuestUnsupportedActions(name);
    if (actions.contains(actionId)) {
      return false;
    }
  }
  String companyId=user.getActualCompanyId();
  Group guestGroup=GroupServiceUtil.getGroup(companyId,Group.GUEST);
  try {
    Resource resource=ResourceServiceUtil.getResource(companyId,name,Resource.TYPE_CLASS,Resource.SCOPE_INDIVIDUAL,primKey);
    String resourceId=resource.getResourceId();
    return PermissionServiceUtil.hasGroupPermission(guestGroup.getGroupId(),actionId,resourceId);
  }
 catch (  NoSuchResourceException nsre) {
    return false;
  }
}
