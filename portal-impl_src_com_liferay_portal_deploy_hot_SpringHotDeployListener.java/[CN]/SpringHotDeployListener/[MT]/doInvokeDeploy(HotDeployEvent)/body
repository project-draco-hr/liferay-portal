{
  ServletContext servletContext=hotDeployEvent.getServletContext();
  String servletContextName=servletContext.getServletContextName();
  ContextLoaderListener contextLoaderListener=new PortletContextLoaderListener();
  PortletClassLoaderUtil.setClassLoader(hotDeployEvent.getContextClassLoader());
  PortletClassLoaderUtil.setServletContextName(servletContextName);
  Thread currentThread=Thread.currentThread();
  ClassLoader contextClassLoader=currentThread.getContextClassLoader();
  try {
    currentThread.setContextClassLoader(PortalClassLoaderUtil.getClassLoader());
    contextLoaderListener.contextInitialized(new ServletContextEvent(servletContext));
  }
  finally {
    PortletClassLoaderUtil.setClassLoader(null);
    PortletClassLoaderUtil.setServletContextName(null);
    currentThread.setContextClassLoader(contextClassLoader);
  }
  _contextLoaderListeners.put(servletContextName,contextLoaderListener);
}
