{
  try {
    NGramHolder nGramHolder=new NGramHolder();
    NGramTokenizer nGramTokenizer=new NGramTokenizer(new StringReader(input),nGramMinLength,nGramMaxLength);
    CharTermAttribute charTermAttribute=nGramTokenizer.getAttribute(CharTermAttribute.class);
    OffsetAttribute offsetAttribute=nGramTokenizer.getAttribute(OffsetAttribute.class);
    while (nGramTokenizer.incrementToken()) {
      String nGram=charTermAttribute.toString();
      int currentNGramSize=charTermAttribute.length();
      if ((currentNGramSize >= nGramMinLength) && (currentNGramSize <= nGramMaxLength)) {
        if (offsetAttribute.startOffset() == 0) {
          nGramHolder.addNGramStart(currentNGramSize,nGram);
        }
 else         if (offsetAttribute.endOffset() == input.length()) {
          nGramHolder.addNGramEnd(currentNGramSize,nGram);
        }
 else {
          nGramHolder.addNGram(currentNGramSize,nGram);
        }
      }
    }
    return nGramHolder;
  }
 catch (  Exception e) {
    throw new SearchException(e);
  }
}
