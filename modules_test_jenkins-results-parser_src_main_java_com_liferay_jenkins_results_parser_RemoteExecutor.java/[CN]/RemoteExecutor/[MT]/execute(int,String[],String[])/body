{
  _busySlaves.clear();
  _commands=commands;
  _errorSlaves.clear();
  _finishedSlaves.clear();
  _targetSlaves=targetSlaves;
  _threadsDurationTotal=0;
  ExecutorService executorService=Executors.newFixedThreadPool(threadCount);
  System.out.println("Remote execution starting with " + threadCount + " threads.");
  try {
    _start=System.currentTimeMillis();
    for (    String targetSlave : _targetSlaves) {
      executorService.execute(new RemoteExecutorThread(this,targetSlave));
    }
    while ((_finishedSlaves.size() + _errorSlaves.size()) < _targetSlaves.length) {
      JenkinsResultsParserUtil.sleep(1000);
    }
    if (!_errorSlaves.isEmpty()) {
      System.out.println(_errorSlaves.size() + " slaves failed to respond:\n" + _errorSlaves);
    }
    return _errorSlaves.size();
  }
  finally {
    executorService.shutdown();
  }
}
