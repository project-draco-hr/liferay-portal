{
  JournalArticle article=null;
  DDMStructure ddmStructure=null;
  DDMTemplate ddmTemplate=null;
  if (structuredContent) {
    ddmStructure=JournalTestUtil.addDDMStructure(_group.getGroupId());
    ddmTemplate=JournalTestUtil.addDDMTemplate(_group.getGroupId(),ddmStructure.getStructureId());
    String content=JournalTestUtil.getSampleStructuredContent();
    article=JournalTestUtil.addArticleWithXMLContent(_group.getGroupId(),content,ddmStructure.getStructureKey(),ddmTemplate.getTemplateKey());
  }
 else {
    article=JournalTestUtil.addArticle(_group.getGroupId(),ServiceTestUtil.randomString(),ServiceTestUtil.randomString());
  }
  String exportedResourceUuid=article.getArticleResourceUuid();
  Map<String,String[]> parameterMap=getExportParameterMap(_group.getGroupId(),_layout.getPlid());
  _larFile=LayoutLocalServiceUtil.exportPortletInfoAsFile(_layout.getPlid(),_group.getGroupId(),PortletKeys.JOURNAL,parameterMap,null,null);
  _importedGroup=GroupTestUtil.addGroup();
  _importedLayout=LayoutTestUtil.addLayout(_importedGroup.getGroupId(),ServiceTestUtil.randomString());
  int initialArticlesCount=JournalArticleLocalServiceUtil.getArticlesCount(_importedGroup.getGroupId());
  PortletImporter portletImporter=new PortletImporter();
  parameterMap=getImportParameterMap(_importedGroup.getGroupId(),_importedLayout.getPlid());
  portletImporter.importPortletInfo(TestPropsValues.getUserId(),_importedLayout.getPlid(),_importedGroup.getGroupId(),PortletKeys.JOURNAL,parameterMap,_larFile);
  int articlesCount=JournalArticleLocalServiceUtil.getArticlesCount(_importedGroup.getGroupId());
  Assert.assertEquals("The article has not been imported",initialArticlesCount + 1,articlesCount);
  JournalArticleResource importedJournalArticleResource=JournalArticleResourceLocalServiceUtil.fetchArticleResource(exportedResourceUuid,_importedGroup.getGroupId());
  Assert.assertNotNull("The imported article has not kept the uuid",importedJournalArticleResource);
  if (structuredContent) {
    DDMStructure importedDDMStructure=DDMStructureLocalServiceUtil.fetchStructure(ddmStructure.getUuid(),_importedGroup.getGroupId());
    Assert.assertNotNull("The DDM Structure has not been imported",importedDDMStructure);
    DDMTemplate importedDDMTemplate=DDMTemplateLocalServiceUtil.fetchTemplate(ddmTemplate.getUuid(),_importedGroup.getGroupId());
    Assert.assertNotNull("The DDM Template has not been imported",importedDDMTemplate);
    Assert.assertEquals("The imported article doesn't point to the right DDM Structure",article.getStructureId(),importedDDMStructure.getStructureKey());
    Assert.assertEquals("The imported article doesn't point to the right DDM Template",article.getTemplateId(),importedDDMTemplate.getTemplateKey());
    Assert.assertEquals("The imported DDM Structure doesn't point to the right DDM " + "Template",importedDDMTemplate.getClassPK(),importedDDMStructure.getStructureId());
  }
}
