{
  JournalArticle article=null;
  DDMStructure ddmStructure=null;
  DDMTemplate ddmTemplate=null;
  if (structuredContent) {
    ddmStructure=DDMStructureTestUtil.addStructure(group.getGroupId(),JournalArticle.class.getName());
    ddmTemplate=DDMTemplateTestUtil.addTemplate(group.getGroupId(),ddmStructure.getStructureId());
    String content=DDMStructureTestUtil.getSampleStructuredContent();
    article=JournalTestUtil.addArticleWithXMLContent(group.getGroupId(),content,ddmStructure.getStructureKey(),ddmTemplate.getTemplateKey());
  }
 else {
    article=JournalTestUtil.addArticle(group.getGroupId(),ServiceTestUtil.randomString(),ServiceTestUtil.randomString());
  }
  String exportedResourceUuid=article.getArticleResourceUuid();
  Map<String,String[]> parameterMap=getExportParameterMap(group.getGroupId(),layout.getPlid());
  _larFile=LayoutLocalServiceUtil.exportPortletInfoAsFile(layout.getPlid(),group.getGroupId(),PortletKeys.JOURNAL,parameterMap,null,null);
  importedGroup=GroupTestUtil.addGroup();
  importedLayout=LayoutTestUtil.addLayout(importedGroup.getGroupId(),ServiceTestUtil.randomString());
  int initialArticlesCount=JournalArticleLocalServiceUtil.getArticlesCount(importedGroup.getGroupId());
  PortletImporter portletImporter=new PortletImporter();
  parameterMap=getImportParameterMap(importedGroup.getGroupId(),importedLayout.getPlid());
  portletImporter.importPortletInfo(TestPropsValues.getUserId(),importedLayout.getPlid(),importedGroup.getGroupId(),PortletKeys.JOURNAL,parameterMap,_larFile);
  int articlesCount=JournalArticleLocalServiceUtil.getArticlesCount(importedGroup.getGroupId());
  Assert.assertEquals(initialArticlesCount + 1,articlesCount);
  JournalArticleResource importedJournalArticleResource=JournalArticleResourceLocalServiceUtil.fetchArticleResource(exportedResourceUuid,importedGroup.getGroupId());
  Assert.assertNotNull(importedJournalArticleResource);
  if (structuredContent) {
    DDMStructure importedDDMStructure=DDMStructureLocalServiceUtil.fetchStructure(ddmStructure.getUuid(),importedGroup.getGroupId());
    Assert.assertNotNull(importedDDMStructure);
    DDMTemplate importedDDMTemplate=DDMTemplateLocalServiceUtil.fetchTemplate(ddmTemplate.getUuid(),importedGroup.getGroupId());
    Assert.assertNotNull(importedDDMTemplate);
    Assert.assertEquals(article.getStructureId(),importedDDMStructure.getStructureKey());
    Assert.assertEquals(article.getTemplateId(),importedDDMTemplate.getTemplateKey());
    Assert.assertEquals(importedDDMTemplate.getClassPK(),importedDDMStructure.getStructureId());
  }
}
