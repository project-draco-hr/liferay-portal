{
  try {
    PortletClassLoaderUtil.setClassLoader(hotDeployEvent.getContextClassLoader());
    PortletClassLoaderUtil.setServletContextName(hotDeployEvent.getServletContextName());
    doInvokeDeploy(hotDeployEvent);
  }
 catch (  Throwable t) {
    throwHotDeployException(hotDeployEvent,"Error registering portlets for ",t);
  }
 finally {
    PortletClassLoaderUtil.setClassLoader(null);
    PortletClassLoaderUtil.setServletContextName(null);
  }
}
