{
  if (initialCacheSize > cacheCapacity) {
    throw new IllegalArgumentException("Initial cache size " + initialCacheSize + " is larger than cache capacity "+ cacheCapacity);
  }
  this.outputStream=outputStream;
  this.cacheCapacity=cacheCapacity;
  this.flushPreAction=flushPreAction;
  cache=new byte[initialCacheSize];
}
