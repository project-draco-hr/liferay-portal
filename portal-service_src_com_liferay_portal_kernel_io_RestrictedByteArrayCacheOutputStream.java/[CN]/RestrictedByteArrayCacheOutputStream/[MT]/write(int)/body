{
  if (overflowed) {
    outputStream.write(b);
    return;
  }
  int newIndex=index + 1;
  if (newIndex > cacheCapacity) {
    flush();
    outputStream.write(b);
    return;
  }
  ensureCacheSize(newIndex);
  cache[index]=(byte)b;
  index=newIndex;
}
