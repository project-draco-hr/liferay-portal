{
  if (directory.length() > 0) {
    directory=replaceSeparator(directory);
    if (directory.charAt(directory.length() - 1) == CharPool.SLASH) {
      directory=directory.substring(0,directory.length() - 1);
    }
  }
  if (!exists(directory)) {
    if (_log.isWarnEnabled()) {
      _log.warn("Directory " + directory + " does not exist");
    }
    return new String[0];
  }
  DirectoryScanner directoryScanner=new DirectoryScanner();
  directoryScanner.setBasedir(directory);
  directoryScanner.setExcludes(StringUtil.split(excludes));
  directoryScanner.setIncludes(StringUtil.split(includes));
  directoryScanner.scan();
  String[] includedFiles=directoryScanner.getIncludedFiles();
  for (int i=0; i < includedFiles.length; i++) {
    includedFiles[i]=directory.concat(StringPool.SLASH).concat(replaceSeparator(includedFiles[i]));
  }
  return includedFiles;
}
