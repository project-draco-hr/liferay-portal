{
  if (file.getParent() != null) {
    mkdirs(file.getParent());
  }
  if (!(is instanceof BufferedInputStream)) {
    is=new BufferedInputStream(is);
  }
  OutputStream os=new BufferedOutputStream(new FileOutputStream(file));
  try {
    int c=is.read();
    while (c != -1) {
      os.write(c);
      c=is.read();
    }
  }
  finally {
    os.close();
    is.close();
  }
}
