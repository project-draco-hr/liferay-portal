{
  PortletPreferences portletPreferences=PortletPreferencesFactoryUtil.fromXML(companyId,ownerId,ownerType,plid,portletId,xml);
  String displayStyle=portletPreferences.getValue("display-style",null);
  if (Validator.isNumber(displayStyle)) {
    int index=GetterUtil.getInteger(displayStyle);
    if ((index < 0) || (index > 6)) {
      index=0;
    }
    portletPreferences.setValue("display-style",_DISPLAY_STYLES[index]);
  }
  return PortletPreferencesFactoryUtil.toXML(portletPreferences);
}
