{
  if (Validator.isNull(portlet.getUserNotificationDefinitions())) {
    return;
  }
  String xml=getContent(portlet.getUserNotificationDefinitions());
  xml=JavaFieldsParser.parse(_classLoader,xml);
  Document document=SAXReaderUtil.read(xml);
  Element rootElement=document.getRootElement();
  for (  Element notificationElement : rootElement.elements("definition")) {
    String modelName=notificationElement.elementText("model-name");
    long classNameId=0;
    if (Validator.isNotNull(modelName)) {
      classNameId=PortalUtil.getClassNameId(modelName);
    }
    int notificationType=GetterUtil.getInteger(notificationElement.elementText("notification-type"));
    String description=GetterUtil.getString(notificationElement.elementText("description"));
    UserNotificationDefinition userNotificationDefinition=new UserNotificationDefinition(portlet.getPortletId(),classNameId,notificationType,description);
    for (    Element deliveryTypeElement : notificationElement.elements("delivery-type")) {
      String name=deliveryTypeElement.elementText("name");
      int type=GetterUtil.getInteger(deliveryTypeElement.elementText("type"));
      boolean defualt=GetterUtil.getBoolean(deliveryTypeElement.elementText("default"));
      boolean modifiable=GetterUtil.getBoolean(deliveryTypeElement.elementText("modifiable"));
      userNotificationDefinition.addUserNotificationDeliveryType(new UserNotificationDeliveryType(name,type,defualt,modifiable));
    }
    UserNotificationManagerUtil.addUserNotificationDefinition(portlet.getPortletId(),userNotificationDefinition);
  }
}
