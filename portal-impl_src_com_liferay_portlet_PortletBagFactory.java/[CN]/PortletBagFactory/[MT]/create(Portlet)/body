{
  validate();
  javax.portlet.Portlet portletInstance=getPortletInstance(portlet);
  List<ConfigurationAction> configurationActionInstances=newConfigurationActions(portlet);
  List<Indexer<?>> indexerInstances=newIndexers(portlet);
  List<OpenSearch> openSearchInstances=newOpenSearches(portlet);
  List<SchedulerEntry> schedulerEntryInstances=newSchedulerEntryInstances(portlet);
  FriendlyURLMapperTracker friendlyURLMapperTracker=newFriendlyURLMappers(portlet);
  List<URLEncoder> urlEncoderInstances=newURLEncoders(portlet);
  List<PortletDataHandler> portletDataHandlerInstances=newPortletDataHandlers(portlet);
  List<StagedModelDataHandler<?>> stagedModelDataHandlerInstances=newStagedModelDataHandler(portlet);
  List<TemplateHandler> templateHandlerInstances=newTemplateHandlers(portlet);
  List<PortletLayoutListener> portletLayoutListenerInstances=newPortletLayoutListeners(portlet);
  List<PollerProcessor> pollerProcessorInstances=newPollerProcessors(portlet);
  List<MessageListener> popMessageListenerInstances=newPOPMessageListeners(portlet);
  List<SocialActivityInterpreter> socialActivityInterpreterInstances=newSocialActivityInterpreterInstances(portlet);
  List<SocialRequestInterpreter> socialRequestInterpreterInstances=newSocialRequestInterpreterInstances(portlet);
  List<UserNotificationDefinition> userNotificationDefinitionInstances=newUserNotificationDefinitionInstances(portlet);
  List<UserNotificationHandler> userNotificationHandlerInstances=newUserNotificationHandlerInstances(portlet);
  List<WebDAVStorage> webDAVStorageInstances=newWebDAVStorageInstances(portlet);
  List<Method> xmlRpcMethodInstances=newXmlRpcMethodInstances(portlet);
  List<ControlPanelEntry> controlPanelEntryInstances=newControlPanelEntryInstances(portlet);
  List<AssetRendererFactory<?>> assetRendererFactoryInstances=newAssetRendererFactoryInstances(portlet);
  List<AtomCollectionAdapter<?>> atomCollectionAdapterInstances=newAtomCollectionAdapterInstances(portlet);
  List<CustomAttributesDisplay> customAttributesDisplayInstances=newCustomAttributesDisplayInstances(portlet);
  List<PermissionPropagator> permissionPropagatorInstances=newPermissionPropagators(portlet);
  List<TrashHandler> trashHandlerInstances=newTrashHandlerInstances(portlet);
  List<WorkflowHandler<?>> workflowHandlerInstances=newWorkflowHandlerInstances(portlet);
  List<PreferencesValidator> preferencesValidatorInstances=newPreferencesValidatorInstances(portlet);
  ResourceBundleTracker resourceBundleTracker=new ResourceBundleTracker(_classLoader,portlet);
  PortletBag portletBag=new PortletBagImpl(portlet.getPortletId(),_servletContext,portletInstance,resourceBundleTracker,configurationActionInstances,indexerInstances,openSearchInstances,schedulerEntryInstances,friendlyURLMapperTracker,urlEncoderInstances,portletDataHandlerInstances,stagedModelDataHandlerInstances,templateHandlerInstances,portletLayoutListenerInstances,pollerProcessorInstances,popMessageListenerInstances,socialActivityInterpreterInstances,socialRequestInterpreterInstances,userNotificationDefinitionInstances,userNotificationHandlerInstances,webDAVStorageInstances,xmlRpcMethodInstances,controlPanelEntryInstances,assetRendererFactoryInstances,atomCollectionAdapterInstances,customAttributesDisplayInstances,permissionPropagatorInstances,trashHandlerInstances,workflowHandlerInstances,preferencesValidatorInstances);
  PortletBagPool.put(portlet.getRootPortletId(),portletBag);
  try {
    PortletInstanceFactoryUtil.create(portlet,_servletContext);
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
  return portletBag;
}
