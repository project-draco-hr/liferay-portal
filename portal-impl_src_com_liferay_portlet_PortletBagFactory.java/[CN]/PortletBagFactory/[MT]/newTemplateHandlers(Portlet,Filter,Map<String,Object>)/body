{
  ServiceTrackerList<TemplateHandler> templateHandlerInstances=ServiceTrackerCollections.openList(TemplateHandler.class,filter,properties);
  if (Validator.isNotNull(portlet.getTemplateHandlerClass())) {
    TemplateHandler templateHandler=(TemplateHandler)newInstance(TemplateHandler.class,portlet.getTemplateHandlerClass());
    templateHandlerInstances.add(templateHandler);
  }
  return templateHandlerInstances;
}
