{
  ServiceTrackerList<FriendlyURLMapper> friendlyURLMapperInstances=getServiceTrackerList(FriendlyURLMapper.class,portlet);
  if (Validator.isNotNull(portlet.getFriendlyURLMapperClass())) {
    FriendlyURLMapper friendlyURLMapper=(FriendlyURLMapper)newInstance(FriendlyURLMapper.class,portlet.getFriendlyURLMapperClass());
    friendlyURLMapper.setMapping(portlet.getFriendlyURLMapping());
    friendlyURLMapper.setPortletId(portlet.getPortletId());
    friendlyURLMapper.setPortletInstanceable(portlet.isInstanceable());
    Router router=newFriendlyURLRouter(portlet);
    friendlyURLMapper.setRouter(router);
    friendlyURLMapperInstances.add(friendlyURLMapper);
  }
  return friendlyURLMapperInstances;
}
