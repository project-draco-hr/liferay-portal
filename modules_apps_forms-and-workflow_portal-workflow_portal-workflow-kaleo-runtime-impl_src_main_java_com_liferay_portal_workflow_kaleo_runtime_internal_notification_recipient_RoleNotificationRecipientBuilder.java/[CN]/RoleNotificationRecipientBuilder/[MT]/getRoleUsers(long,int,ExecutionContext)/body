{
  if (roleType == RoleConstants.TYPE_REGULAR) {
    return _userLocalService.getInheritedRoleUsers(roleId,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  }
  List<User> users=new ArrayList<>();
  KaleoInstanceToken kaleoInstanceToken=executionContext.getKaleoInstanceToken();
  List<UserGroupRole> userGroupRoles=_userGroupRoleLocalService.getUserGroupRolesByGroupAndRole(kaleoInstanceToken.getGroupId(),roleId);
  for (  UserGroupRole userGroupRole : userGroupRoles) {
    users.add(userGroupRole.getUser());
  }
  List<UserGroupGroupRole> userGroupGroupRoles=_userGroupGroupRoleLocalService.getUserGroupGroupRolesByGroupAndRole(kaleoInstanceToken.getGroupId(),roleId);
  for (  UserGroupGroupRole userGroupGroupRole : userGroupGroupRoles) {
    users.addAll(_userLocalService.getUserGroupUsers(userGroupGroupRole.getUserGroupId()));
  }
  return users;
}
