{
  String cmd=ParamUtil.getString(req,Constants.CMD);
  if (!cmd.equals(Constants.UPDATE)) {
    return;
  }
  int pageDelta=ParamUtil.getInteger(req,"pageDelta");
  String pageDisplayStyle=ParamUtil.getString(req,"pageDisplayStyle");
  int rssDelta=ParamUtil.getInteger(req,"rssDelta");
  String rssDisplayStyle=ParamUtil.getString(req,"rssDisplayStyle");
  String rssFormat=ParamUtil.getString(req,"rssFormat");
  String portletResource=ParamUtil.getString(req,"portletResource");
  PortletPreferences prefs=PortletPreferencesFactoryUtil.getPortletSetup(req,portletResource,true,true);
  prefs.setValue("page-delta",String.valueOf(pageDelta));
  prefs.setValue("page-display-style",pageDisplayStyle);
  prefs.setValue("rss-delta",String.valueOf(rssDelta));
  prefs.setValue("rss-display-style",rssDisplayStyle);
  prefs.setValue("rss-format",rssFormat);
  prefs.store();
  SessionMessages.add(req,config.getPortletName() + ".doConfigure");
}
