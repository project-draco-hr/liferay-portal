{
  String cmd=ParamUtil.getString(req,Constants.CMD);
  if (!cmd.equals(Constants.UPDATE)) {
    return;
  }
  int delta=ParamUtil.getInteger(req,"delta");
  String displayStyle=ParamUtil.getString(req,"displayStyle");
  int feedDelta=ParamUtil.getInteger(req,"feedDelta");
  String feedDisplayStyle=ParamUtil.getString(req,"feedDisplayStyle");
  String feedFormat=ParamUtil.getString(req,"feedFormat");
  String portletResource=ParamUtil.getString(req,"portletResource");
  PortletPreferences prefs=PortletPreferencesFactoryUtil.getPortletSetup(req,portletResource,true,true);
  prefs.setValue("delta",String.valueOf(delta));
  prefs.setValue("display-style",displayStyle);
  prefs.setValue("feed-delta",String.valueOf(feedDelta));
  prefs.setValue("feed-display-style",feedDisplayStyle);
  prefs.setValue("feed-format",feedFormat);
  prefs.store();
  SessionMessages.add(req,config.getPortletName() + ".doConfigure");
}
