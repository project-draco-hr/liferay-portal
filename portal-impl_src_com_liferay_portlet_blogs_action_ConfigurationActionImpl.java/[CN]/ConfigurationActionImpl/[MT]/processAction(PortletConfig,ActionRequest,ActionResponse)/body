{
  String cmd=ParamUtil.getString(req,Constants.CMD);
  if (!cmd.equals(Constants.UPDATE)) {
    return;
  }
  int pageDelta=ParamUtil.getInteger(req,"pageDelta");
  String pageDisplayStyle=ParamUtil.getString(req,"pageDisplayStyle");
  boolean enableComments=ParamUtil.getBoolean(req,"enableComments");
  boolean enableCommentRatings=ParamUtil.getBoolean(req,"enableCommentRatings");
  boolean enableRatings=ParamUtil.getBoolean(req,"enableRatings");
  int rssDelta=ParamUtil.getInteger(req,"rssDelta");
  String rssDisplayStyle=ParamUtil.getString(req,"rssDisplayStyle");
  String rssFormat=ParamUtil.getString(req,"rssFormat");
  String portletResource=ParamUtil.getString(req,"portletResource");
  PortletPreferences prefs=PortletPreferencesFactoryUtil.getPortletSetup(req,portletResource);
  prefs.setValue("page-delta",String.valueOf(pageDelta));
  prefs.setValue("page-display-style",pageDisplayStyle);
  prefs.setValue("enable-comments",String.valueOf(enableComments));
  prefs.setValue("enable-comment-ratings",String.valueOf(enableCommentRatings));
  prefs.setValue("enable-ratings",String.valueOf(enableRatings));
  prefs.setValue("rss-delta",String.valueOf(rssDelta));
  prefs.setValue("rss-display-style",rssDisplayStyle);
  prefs.setValue("rss-format",rssFormat);
  prefs.store();
  SessionMessages.add(req,config.getPortletName() + ".doConfigure");
}
