{
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  if (!cmd.equals(Constants.UPDATE)) {
    return;
  }
  int pageDelta=ParamUtil.getInteger(actionRequest,"pageDelta");
  String pageDisplayStyle=ParamUtil.getString(actionRequest,"pageDisplayStyle");
  boolean enableFlags=ParamUtil.getBoolean(actionRequest,"enableFlags");
  boolean enableRatings=ParamUtil.getBoolean(actionRequest,"enableRatings");
  boolean enableComments=ParamUtil.getBoolean(actionRequest,"enableComments");
  boolean enableCommentRatings=ParamUtil.getBoolean(actionRequest,"enableCommentRatings");
  int rssDelta=ParamUtil.getInteger(actionRequest,"rssDelta");
  String rssDisplayStyle=ParamUtil.getString(actionRequest,"rssDisplayStyle");
  String rssFormat=ParamUtil.getString(actionRequest,"rssFormat");
  String portletResource=ParamUtil.getString(actionRequest,"portletResource");
  PortletPreferences preferences=PortletPreferencesFactoryUtil.getPortletSetup(actionRequest,portletResource);
  preferences.setValue("page-delta",String.valueOf(pageDelta));
  preferences.setValue("page-display-style",pageDisplayStyle);
  preferences.setValue("enable-flags",String.valueOf(enableFlags));
  preferences.setValue("enable-ratings",String.valueOf(enableRatings));
  preferences.setValue("enable-comments",String.valueOf(enableComments));
  preferences.setValue("enable-comment-ratings",String.valueOf(enableCommentRatings));
  preferences.setValue("rss-delta",String.valueOf(rssDelta));
  preferences.setValue("rss-display-style",rssDisplayStyle);
  preferences.setValue("rss-format",rssFormat);
  preferences.store();
  SessionMessages.add(actionRequest,portletConfig.getPortletName() + ".doConfigure");
}
