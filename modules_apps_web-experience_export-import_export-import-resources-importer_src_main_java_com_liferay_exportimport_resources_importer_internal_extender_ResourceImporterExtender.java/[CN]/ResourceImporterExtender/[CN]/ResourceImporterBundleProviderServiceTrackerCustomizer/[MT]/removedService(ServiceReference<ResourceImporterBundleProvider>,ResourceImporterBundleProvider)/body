{
  Bundle bundle=serviceReference.getBundle();
  String bundleSymbolicName=bundle.getSymbolicName();
  ServiceRegistration<ServletContext> serviceRegistration=_serviceRegistrations.remove(bundleSymbolicName);
  if (serviceRegistration != null) {
    serviceRegistration.unregister();
  }
  try {
    PluginPackage pluginPackage=getPluginPackage(bundle);
    PluginPackageUtil.unregisterInstalledPluginPackage(pluginPackage);
  }
 catch (  Exception e) {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to unregister bundle: " + bundleSymbolicName,e);
    }
  }
}
