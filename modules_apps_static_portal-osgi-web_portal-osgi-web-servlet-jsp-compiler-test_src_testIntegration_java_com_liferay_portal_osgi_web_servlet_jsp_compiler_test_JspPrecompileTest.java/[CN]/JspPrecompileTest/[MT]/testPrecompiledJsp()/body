{
  Path jspClassPath=_workDirPath.resolve(_JSP_PATH.concat(_PRECOMPILE_JSP_CLASS));
  Files.createDirectories(jspClassPath.getParent());
  Files.createFile(jspClassPath);
  try (InputStream inputStream=PrecompileTestServlet.class.getResourceAsStream(PrecompileTestServlet.class.getSimpleName() + ".class");OutputStream outputStream=Files.newOutputStream(jspClassPath)){
    ClassReader classReader=new ClassReader(inputStream);
    ClassNode classNode=new ClassNode();
    classReader.accept(classNode,0);
    classNode.name=_JSP_PATH.concat(_PRECOMPILE_JSP_CLASS.substring(0,_PRECOMPILE_JSP_CLASS.indexOf(StringPool.PERIOD)));
    ClassWriter classWriter=new ClassWriter(0);
    classNode.accept(classWriter);
    outputStream.write(classWriter.toByteArray());
  }
   try (CaptureAppender captureAppender=Log4JLoggerTestUtil.configureLog4JLogger(_JSP_COMPILER_CLASS_NAME,Level.DEBUG)){
    _doJspTest(_PRECOMPILE_JSP);
    List<LoggingEvent> loggingEvents=captureAppender.getLoggingEvents();
    StringBundler sb=new StringBundler(3);
    sb.append("Compiling JSP: ");
    sb.append(_JSP_PACKAGE);
    sb.append(StringUtil.replace(_PRECOMPILE_JSP,CharPool.PERIOD,CharPool.UNDERLINE));
    Assert.assertFalse("JSP was compiled at runtime",_containsLog(loggingEvents,sb.toString()));
  }
 }
