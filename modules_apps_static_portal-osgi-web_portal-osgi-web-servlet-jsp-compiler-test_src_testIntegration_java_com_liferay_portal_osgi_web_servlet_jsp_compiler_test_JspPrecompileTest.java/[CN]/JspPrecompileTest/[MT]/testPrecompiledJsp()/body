{
  String packagePathString=_JSP_PACKAGE.replace(CharPool.PERIOD,CharPool.SLASH);
  Path packagePath=_workDirPath.resolve(packagePathString);
  Files.createDirectories(packagePath);
  String jspClassName=_PRECOMPILE_JSP.replace(CharPool.PERIOD,CharPool.UNDERLINE);
  Path jspClassPath=packagePath.resolve(jspClassName.concat(".class"));
  final String className=packagePathString.concat(jspClassName);
  try (InputStream inputStream=PrecompileTestServlet.class.getResourceAsStream(PrecompileTestServlet.class.getSimpleName() + ".class");OutputStream outputStream=Files.newOutputStream(jspClassPath)){
    ClassReader classReader=new ClassReader(inputStream);
    ClassWriter classWriter=new ClassWriter(classReader,0);
    ClassVisitor classVisitor=new ClassVisitor(Opcodes.ASM5,classWriter){
      @Override public void visit(      int version,      int access,      String name,      String signature,      String superName,      String[] interfaces){
        super.visit(version,access,className,signature,superName,interfaces);
      }
    }
;
    classReader.accept(classVisitor,0);
    outputStream.write(classWriter.toByteArray());
  }
   try (CaptureAppender captureAppender=Log4JLoggerTestUtil.configureLog4JLogger(_JSP_COMPILER_CLASS_NAME,Level.DEBUG)){
    _doJspTest(_PRECOMPILE_JSP,"Precompiled");
    Assert.assertFalse("JSP was compiled at runtime",_containsCompilerLog(captureAppender,_PRECOMPILE_JSP));
  }
  finally {
    Files.delete(jspClassPath);
  }
}
