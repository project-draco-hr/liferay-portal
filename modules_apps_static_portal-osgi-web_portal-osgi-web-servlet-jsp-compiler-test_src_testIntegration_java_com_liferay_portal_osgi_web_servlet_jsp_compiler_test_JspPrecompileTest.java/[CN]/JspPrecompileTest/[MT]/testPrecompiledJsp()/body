{
  StringBundler sb=new StringBundler(4);
  sb.append(_parentWorkDir);
  sb.append(StringPool.SLASH);
  sb.append(_JSP_PATH);
  sb.append(_PRECOMPILE_JSP_CLASS);
  File file=new File(sb.toString());
  File parentFile=file.getParentFile();
  parentFile.mkdirs();
  file.createNewFile();
  try (InputStream inputStream=PrecompileTestServlet.class.getResourceAsStream(PrecompileTestServlet.class.getSimpleName() + ".class");OutputStream outputStream=new FileOutputStream(file)){
    ClassReader classReader=new ClassReader(inputStream);
    ClassNode classNode=new ClassNode();
    classReader.accept(classNode,0);
    classNode.name=_JSP_PATH.concat(_PRECOMPILE_JSP_CLASS.substring(0,_PRECOMPILE_JSP_CLASS.indexOf(StringPool.PERIOD)));
    ClassWriter classWriter=new ClassWriter(0);
    classNode.accept(classWriter);
    outputStream.write(classWriter.toByteArray());
  }
   try (CaptureAppender captureAppender=Log4JLoggerTestUtil.configureLog4JLogger(_JSP_COMPILER_CLASS_NAME,Level.DEBUG)){
    _doJspTest(_PRECOMPILE_JSP);
    List<LoggingEvent> loggingEvents=captureAppender.getLoggingEvents();
    sb.setIndex(0);
    sb.append("Compiling JSP: ");
    sb.append(_JSP_PACKAGE);
    sb.append(StringUtil.replace(_PRECOMPILE_JSP,CharPool.PERIOD,CharPool.UNDERLINE));
    Assert.assertFalse("JSP was compiled at runtime",_containsLog(loggingEvents,sb.toString()));
  }
 }
