{
  QueryConfig queryConfig=query.getQueryConfig();
  SolrQuery solrQuery=new SolrQuery();
  addStats(solrQuery,searchContext);
  if (!count) {
    addFacets(solrQuery,searchContext);
    addGroupBy(solrQuery,searchContext,start,end);
    addHighlights(solrQuery,queryConfig);
    addPagination(solrQuery,searchContext,start,end);
    addSelectedFields(solrQuery,queryConfig);
    addSort(solrQuery,searchContext.getSorts());
    solrQuery.setIncludeScore(queryConfig.isScoreEnabled());
  }
 else {
    solrQuery.setRows(0);
  }
  String queryString=translateQuery(query,searchContext);
  solrQuery.setQuery(queryString);
  List<String> filterQueries=new ArrayList<>();
  if (query.getPreBooleanFilter() != null) {
    String filterQuery=_filterTranslator.translate(query.getPreBooleanFilter(),searchContext);
    filterQueries.add(filterQuery);
  }
  if (query.getPostFilter() != null) {
    String filterQuery=_filterTranslator.translate(query.getPreBooleanFilter(),searchContext);
    filterQueries.add(filterQuery);
  }
  if (!filterQueries.isEmpty()) {
    solrQuery.setFilterQueries(filterQueries.toArray(new String[filterQueries.size()]));
  }
  QueryResponse queryResponse=executeSearchRequest(solrQuery);
  if (_log.isInfoEnabled()) {
    _log.info("The search engine processed " + solrQuery.getQuery() + " in "+ queryResponse.getElapsedTime()+ " ms");
  }
  return queryResponse;
}
