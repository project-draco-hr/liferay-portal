{
  Set<String> includedAndReferencedFileNames=new HashSet<>();
  for (  String fileName : fileNames) {
    if (!checkedFileNames.add(fileName)) {
      continue;
    }
    fileName=StringUtil.replace(fileName,CharPool.BACK_SLASH,CharPool.SLASH);
    includedAndReferencedFileNames.addAll(getJSPIncludeFileNames(fileName,fileNames));
    includedAndReferencedFileNames.addAll(getJSPReferenceFileNames(fileName,fileNames));
  }
  if (includedAndReferencedFileNames.isEmpty()) {
    return fileNames;
  }
  for (  String fileName : includedAndReferencedFileNames) {
    fileName=StringUtil.replace(fileName,CharPool.SLASH,CharPool.BACK_SLASH);
    if (!fileNames.contains(fileName)) {
      fileNames.add(fileName);
    }
  }
  return addIncludedAndReferencedFileNames(fileNames,checkedFileNames);
}
