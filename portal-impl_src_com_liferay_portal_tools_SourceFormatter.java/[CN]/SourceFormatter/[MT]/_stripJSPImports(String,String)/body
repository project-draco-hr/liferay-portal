{
  fileName=fileName.replace(CharPool.BACK_SLASH,CharPool.FORWARD_SLASH);
  if (fileName.endsWith("html/common/init.jsp") || fileName.endsWith("html/portal/init.jsp") || !fileName.startsWith("portal-web/docroot")) {
    return content;
  }
  Matcher matcher=_jspImportPattern.matcher(content);
  if (!matcher.find()) {
    return content;
  }
  String imports=matcher.group();
  List<String> importLines=new ArrayList<String>();
  UnsyncBufferedReader unsyncBufferedReader=new UnsyncBufferedReader(new UnsyncStringReader(imports));
  String line=null;
  while ((line=unsyncBufferedReader.readLine()) != null) {
    if (line.contains("import=")) {
      importLines.add(line);
    }
  }
  List<String> unneededImports=_getJSPDuplicateImports(fileName,content,importLines);
  _addJSPUnusedImports(fileName,importLines,unneededImports);
  for (  String unneededImport : unneededImports) {
    imports=StringUtil.replace(imports,unneededImport,StringPool.BLANK);
  }
  imports=_formatImports(imports,17);
  String afterImports=content.substring(matcher.end());
  if (Validator.isNull(afterImports)) {
    imports=StringUtil.replaceLast(imports,"\n",StringPool.BLANK);
    content=content.substring(0,matcher.start()) + imports;
    return content;
  }
  content=content.substring(0,matcher.start()) + imports + "\n"+ afterImports;
  return content;
}
