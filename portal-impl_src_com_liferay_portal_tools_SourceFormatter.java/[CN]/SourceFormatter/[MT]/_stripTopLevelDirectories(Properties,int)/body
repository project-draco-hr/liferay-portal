{
  String currentDir=new File(".").getCanonicalPath();
  currentDir=StringUtil.replace(currentDir,StringPool.BACK_SLASH,StringPool.SLASH);
  int pos=currentDir.length();
  for (int i=0; i < level; i++) {
    pos=currentDir.lastIndexOf(StringPool.SLASH,pos - 1);
  }
  String topLevelDirs=currentDir.substring(pos + 1) + StringPool.SLASH;
  Properties newProperties=new Properties();
  for (  Map.Entry<Object,Object> entry : properties.entrySet()) {
    String key=(String)entry.getKey();
    if (!key.startsWith(topLevelDirs)) {
      continue;
    }
    key=StringUtil.replaceFirst(key,topLevelDirs,StringPool.BLANK);
    String value=(String)entry.getValue();
    newProperties.setProperty(key,value);
  }
  return newProperties;
}
