{
  String basedir="./";
  String portalPortalProperties=null;
  if (_isPortalInstance) {
    File portalPortalPropertiesFile=new File(basedir + "portal-impl/src/portal.properties");
    portalPortalProperties=_fileUtil.read(portalPortalPropertiesFile);
  }
 else {
    ClassLoader classLoader=SourceFormatter.class.getClassLoader();
    InputStream inputStream=classLoader.getResourceAsStream("portal.properties");
    if (inputStream == null) {
      return;
    }
    portalPortalProperties=new String(_fileUtil.getBytes(inputStream));
  }
  DirectoryScanner directoryScanner=new DirectoryScanner();
  directoryScanner.setBasedir(basedir);
  if (_isPortalInstance) {
    directoryScanner.setIncludes(new String[]{"**\\portal-ext.properties","**\\portal-legacy-*.properties"});
  }
 else {
    directoryScanner.setIncludes(new String[]{"**\\portal.properties","**\\portal-ext.properties"});
  }
  List<String> fileNames=_sourceFormatterHelper.scanForFiles(directoryScanner);
  for (  String fileName : fileNames) {
    File file=new File(basedir + fileName);
    String content=_fileUtil.read(file);
    _formatPortalProperties(fileName,content,portalPortalProperties);
  }
}
