{
  JournalArticleContent articleContent=(JournalArticleContent)content;
  JournalArticle article=articleContent.getArticle();
  JournalArticleContent.CreationAttributes creationAttributes=articleContent.getCreationAttributes();
  try {
    if (article.isApproved() && article.isIndexable()) {
      Indexer.deleteArticle(article.getCompanyId(),article.getArticleId());
    }
  }
 catch (  SearchException se) {
    _log.error("Deleting index " + article.getPrimaryKey(),se);
  }
  try {
    if ((creationAttributes.getPrefs() != null) && !article.isApproved() && isLatestVersion(article.getGroupId(),article.getArticleId(),article.getVersion())) {
      try {
        sendEmail(article,creationAttributes.getArticleURL(),creationAttributes.getPrefs(),"denied");
      }
 catch (      IOException ie) {
        throw new CMSException(ie.getMessage(),ie);
      }
    }
    TagsAssetLocalServiceUtil.deleteAsset(JournalArticle.class.getName(),article.getResourcePrimKey());
    RatingsStatsLocalServiceUtil.deleteStats(JournalArticle.class.getName(),article.getResourcePrimKey());
    MBMessageLocalServiceUtil.deleteDiscussionMessages(JournalArticle.class.getName(),article.getResourcePrimKey());
    JournalContentSearchLocalServiceUtil.deleteArticleContentSearches(article.getGroupId(),article.getArticleId());
    JournalArticleImageLocalServiceUtil.deleteImages(article.getGroupId(),article.getArticleId(),article.getVersion());
    ImageLocalServiceUtil.deleteImage(article.getSmallImageId());
    if (JournalArticleUtil.countByG_A(article.getGroupId(),article.getArticleId()) == 1) {
      ResourceLocalServiceUtil.deleteResource(article.getCompanyId(),JournalArticle.class.getName(),ResourceConstants.SCOPE_INDIVIDUAL,article.getResourcePrimKey());
    }
    if (JournalArticleUtil.countByG_A(article.getGroupId(),article.getArticleId()) == 1) {
      try {
        JournalArticleResourceLocalServiceUtil.deleteArticleResource(article.getGroupId(),article.getArticleId());
      }
 catch (      NoSuchArticleResourceException nsare) {
        throw new CMSException(nsare.getMessage(),nsare);
      }
    }
    JournalArticleUtil.remove(article.getPrimaryKey());
  }
 catch (  NoSuchArticleException nsae) {
    _log.error(nsae.getMessage(),nsae);
    throw new CMSException(nsae.getMessage(),nsae);
  }
catch (  SystemException se) {
    _log.error(se.getMessage(),se);
    throw new CMSException(se.getMessage(),se);
  }
catch (  PortalException pe) {
    _log.error(pe.getMessage(),pe);
    throw new CMSException(pe.getMessage(),pe);
  }
}
