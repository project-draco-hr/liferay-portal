{
  Map<String,Boolean> activitySettingsMap=new LinkedHashMap<String,Boolean>();
  List<SocialActivitySetting> activitySettings=SocialActivitySettingServiceUtil.getActivitySettings(themeDisplay.getSiteGroupIdOrLiveGroupId());
  String[] modelNames=SocialConfigurationUtil.getActivityModelNames();
  Comparator<String> comparator=new ModelResourceComparator(themeDisplay.getLocale());
  Arrays.sort(modelNames,comparator);
  for (  String modelName : modelNames) {
    List<SocialActivityDefinition> activityDefinitions=SocialActivitySettingServiceUtil.getActivityDefinitions(themeDisplay.getScopeGroupId(),modelName);
    for (    SocialActivityDefinition activityDefinition : activityDefinitions) {
      if (activityDefinition.isCountersEnabled()) {
        activitySettingsMap.put(modelName,false);
        break;
      }
    }
  }
  for (  SocialActivitySetting activitySetting : activitySettings) {
    String name=activitySetting.getName();
    if (name.equals("enabled") && activitySettingsMap.containsKey(activitySetting.getClassName())) {
      activitySettingsMap.put(activitySetting.getClassName(),GetterUtil.getBoolean(activitySetting.getValue()));
    }
  }
  return activitySettingsMap;
}
