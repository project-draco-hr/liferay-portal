{
  if (Validator.isNull(friendlyURL)) {
    return friendlyURL;
  }
  friendlyURL=GetterUtil.getString(friendlyURL);
  friendlyURL=friendlyURL.toLowerCase();
  friendlyURL=Normalizer.normalizeToAscii(friendlyURL);
  StringBundler sb=null;
  int index=0;
  for (int i=0; i < friendlyURL.length(); i++) {
    char c=friendlyURL.charAt(i);
    if ((Arrays.binarySearch(_REPLACE_CHARS,c) >= 0) || ((replaceChars != null) && ArrayUtil.contains(replaceChars,c))) {
      if (sb == null) {
        sb=new StringBundler();
      }
      if (i > index) {
        sb.append(friendlyURL.substring(index,i));
      }
      sb.append(CharPool.DASH);
      index=i + 1;
    }
  }
  if (sb != null) {
    if (index < friendlyURL.length()) {
      sb.append(friendlyURL.substring(index));
    }
    friendlyURL=sb.toString();
  }
  while (friendlyURL.indexOf(StringPool.DOUBLE_DASH) >= 0) {
    friendlyURL=StringUtil.replace(friendlyURL,StringPool.DOUBLE_DASH,StringPool.DASH);
  }
  return friendlyURL;
}
