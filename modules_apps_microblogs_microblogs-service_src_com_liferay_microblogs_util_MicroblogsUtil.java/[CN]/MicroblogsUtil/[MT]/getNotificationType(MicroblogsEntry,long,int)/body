{
  if (isTaggedUser(microblogsEntry.getMicroblogsEntryId(),false,userId) && UserNotificationManagerUtil.isDeliver(userId,MicroblogsPortletKeys.MICROBLOGS,0,MicroblogsUserNotificationDefinition.NOTIFICATION_TYPE_TAG,deliveryType)) {
    return MicroblogsUserNotificationDefinition.NOTIFICATION_TYPE_TAG;
  }
 else   if (microblogsEntry.getType() == MicroblogsEntryConstants.TYPE_REPLY) {
    long rootMicroblogsEntryId=getRootMicroblogsEntryId(microblogsEntry);
    if ((getRootMicroblogsUserId(microblogsEntry) == userId) && UserNotificationManagerUtil.isDeliver(userId,MicroblogsPortletKeys.MICROBLOGS,0,MicroblogsUserNotificationDefinition.NOTIFICATION_TYPE_REPLY,deliveryType)) {
      return MicroblogsUserNotificationDefinition.NOTIFICATION_TYPE_REPLY;
    }
 else     if (hasReplied(rootMicroblogsEntryId,userId) && UserNotificationManagerUtil.isDeliver(userId,MicroblogsPortletKeys.MICROBLOGS,0,MicroblogsUserNotificationDefinition.NOTIFICATION_TYPE_REPLY_TO_REPLIED,deliveryType)) {
      return MicroblogsUserNotificationDefinition.NOTIFICATION_TYPE_REPLY_TO_REPLIED;
    }
 else     if (MicroblogsUtil.isTaggedUser(rootMicroblogsEntryId,true,userId) && UserNotificationManagerUtil.isDeliver(userId,MicroblogsPortletKeys.MICROBLOGS,0,MicroblogsUserNotificationDefinition.NOTIFICATION_TYPE_REPLY_TO_TAGGED,deliveryType)) {
      return MicroblogsUserNotificationDefinition.NOTIFICATION_TYPE_REPLY_TO_TAGGED;
    }
  }
  return MicroblogsUserNotificationDefinition.NOTIFICATION_TYPE_UNKNOWN;
}
