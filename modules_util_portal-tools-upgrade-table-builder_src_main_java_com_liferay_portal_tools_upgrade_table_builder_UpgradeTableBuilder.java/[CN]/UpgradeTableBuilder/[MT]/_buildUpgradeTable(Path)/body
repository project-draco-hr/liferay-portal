{
  String pathString=path.toString();
  pathString=pathString.replace('\\','/');
  String upgradeFileVersion=pathString.replaceFirst(".*/upgrade/v(.+)/util.*","$1");
  upgradeFileVersion=upgradeFileVersion.replace('_','.');
  if (upgradeFileVersion.contains("to")) {
    upgradeFileVersion=upgradeFileVersion.replaceFirst(".+\\.to\\.(.+)","$1");
  }
  String fileName=String.valueOf(path.getFileName());
  String tableName=fileName.substring(0,fileName.length() - 10);
  String upgradeFileName=tableName + "ModelImpl.java";
  Path upgradeFilePath=Paths.get(_upgradeTableDirName,upgradeFileVersion,upgradeFileName);
  if (Files.notExists(upgradeFilePath)) {
    if (!upgradeFileVersion.equals(_getModuleVersion())) {
      return;
    }
    upgradeFilePath=_getUpgradeFilePath(upgradeFileName);
    if (upgradeFilePath == null) {
      return;
    }
  }
  String content=_read(path);
  String packagePath=_getPackagePath(content);
  String className=fileName.substring(0,fileName.length() - 5);
  String upgradeFileContent=_read(upgradeFilePath);
  String author=_getAuthor(content);
  Path indexesFilePath=_getIndexesFilePath(upgradeFileVersion);
  String[] addIndexes=_getAddIndexes(indexesFilePath,tableName);
  content=_getContent(packagePath,className,upgradeFileContent,author,addIndexes);
  Files.write(path,content.getBytes(StandardCharsets.UTF_8));
}
