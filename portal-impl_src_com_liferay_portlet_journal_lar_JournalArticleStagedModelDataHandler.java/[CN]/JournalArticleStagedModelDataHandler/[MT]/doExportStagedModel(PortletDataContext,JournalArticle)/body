{
  if ((article.getStatus() != WorkflowConstants.STATUS_APPROVED) && (article.getStatus() != WorkflowConstants.STATUS_EXPIRED)) {
    return;
  }
  Element articleElement=portletDataContext.getExportDataElement(article);
  articleElement.addAttribute("article-resource-uuid",article.getArticleResourceUuid());
  if (article.getFolderId() != JournalFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
    StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,article.getFolder());
  }
  if (Validator.isNotNull(article.getStructureId())) {
    DDMStructure ddmStructure=DDMStructureLocalServiceUtil.getStructure(article.getGroupId(),PortalUtil.getClassNameId(JournalArticle.class),article.getStructureId(),true);
    StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,ddmStructure);
    portletDataContext.addReferenceElement(articleElement,ddmStructure);
    long parentId=ddmStructure.getParentStructureId();
    while (parentId > 0) {
      DDMStructure parentStructure=null;
      parentStructure=DDMStructureLocalServiceUtil.getStructure(parentId);
      StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,parentStructure);
      parentId=parentStructure.getParentStructureId();
    }
  }
  if (Validator.isNotNull(article.getTemplateId())) {
    DDMTemplate ddmTemplate=DDMTemplateLocalServiceUtil.getTemplate(article.getGroupId(),PortalUtil.getClassNameId(DDMStructure.class),article.getTemplateId(),true);
    StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,ddmTemplate);
    portletDataContext.addReferenceElement(articleElement,ddmTemplate);
  }
  Element dlFileEntryTypesElement=portletDataContext.getExportDataGroupElement(DLFileEntryType.class);
  Element dlFoldersElement=portletDataContext.getExportDataGroupElement(Folder.class);
  Element dlFileEntriesElement=portletDataContext.getExportDataGroupElement(FileEntry.class);
  Element dlFileRanksElement=portletDataContext.getExportDataGroupElement(DLFileRank.class);
  Element dlRepositoriesElement=portletDataContext.getExportDataGroupElement(Repository.class);
  Element dlRepositoryEntriesElement=portletDataContext.getExportDataGroupElement(RepositoryEntry.class);
  if (article.isSmallImage()) {
    Image smallImage=ImageUtil.fetchByPrimaryKey(article.getSmallImageId());
    if (Validator.isNotNull(article.getSmallImageURL())) {
      String smallImageURL=DDMPortletDataHandler.exportReferenceContent(portletDataContext,dlFileEntryTypesElement,dlFoldersElement,dlFileEntriesElement,dlFileRanksElement,dlRepositoriesElement,dlRepositoryEntriesElement,articleElement,article.getSmallImageURL().concat(StringPool.SPACE));
      article.setSmallImageURL(smallImageURL);
    }
 else     if (smallImage != null) {
      String smallImagePath=ExportImportPathUtil.getModelPath(article,smallImage.getImageId() + StringPool.PERIOD + smallImage.getType());
      articleElement.addAttribute("small-image-path",smallImagePath);
      article.setSmallImageType(smallImage.getType());
      portletDataContext.addZipEntry(smallImagePath,smallImage.getTextObj());
    }
  }
  if (portletDataContext.getBooleanParameter(JournalPortletDataHandler.NAMESPACE,"images")) {
    List<JournalArticleImage> articleImages=JournalArticleImageUtil.findByG_A_V(article.getGroupId(),article.getArticleId(),article.getVersion());
    for (    JournalArticleImage articleImage : articleImages) {
      exportArticleImage(portletDataContext,articleImage,article,articleElement);
    }
  }
  article.setStatusByUserUuid(article.getStatusByUserUuid());
  if (portletDataContext.getBooleanParameter(JournalPortletDataHandler.NAMESPACE,"embedded-assets")) {
    String content=DDMPortletDataHandler.exportReferenceContent(portletDataContext,dlFileEntryTypesElement,dlFoldersElement,dlFileEntriesElement,dlFileRanksElement,dlRepositoriesElement,dlRepositoryEntriesElement,articleElement,article.getContent());
    article.setContent(content);
  }
  portletDataContext.addClassedModel(articleElement,ExportImportPathUtil.getModelPath(article),article,JournalPortletDataHandler.NAMESPACE);
}
