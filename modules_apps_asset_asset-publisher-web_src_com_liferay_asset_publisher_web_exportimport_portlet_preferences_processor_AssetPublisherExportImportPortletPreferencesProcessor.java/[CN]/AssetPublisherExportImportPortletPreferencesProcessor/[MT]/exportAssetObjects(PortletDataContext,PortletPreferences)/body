{
  Layout layout=_layoutLocalService.getLayout(portletDataContext.getPlid());
  long[] groupIds=AssetPublisherUtil.getGroupIds(portletPreferences,portletDataContext.getScopeGroupId(),layout);
  List<AssetEntry> assetEntries=AssetPublisherUtil.getAssetEntries(null,portletPreferences,PermissionThreadLocal.getPermissionChecker(),groupIds,false,false);
  for (  AssetEntry assetEntry : assetEntries) {
    AssetRenderer<?> assetRenderer=assetEntry.getAssetRenderer();
    if ((assetRenderer == null) || !(assetRenderer.getAssetObject() instanceof StagedModel)) {
      continue;
    }
    StagedModelDataHandlerUtil.exportReferenceStagedModel(portletDataContext,portletDataContext.getPortletId(),(StagedModel)assetRenderer.getAssetObject());
  }
}
