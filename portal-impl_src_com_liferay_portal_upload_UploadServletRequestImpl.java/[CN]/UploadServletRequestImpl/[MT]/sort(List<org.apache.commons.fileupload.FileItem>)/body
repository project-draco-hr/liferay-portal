{
  Map<String,GroupedFileItems> groupedFileItemsMap=new HashMap<>();
  for (  org.apache.commons.fileupload.FileItem fileItem : fileItems) {
    String fieldName=fileItem.getFieldName();
    GroupedFileItems groupedFileItems=groupedFileItemsMap.get(fieldName);
    if (groupedFileItems == null) {
      groupedFileItems=new GroupedFileItems(fieldName);
      groupedFileItemsMap.put(fieldName,groupedFileItems);
    }
    groupedFileItems.addFileItem(fileItem);
  }
  Set<GroupedFileItems> groupedFileItemsList=new TreeSet<>(groupedFileItemsMap.values());
  List<org.apache.commons.fileupload.FileItem> sortedFileItems=new ArrayList<>();
  for (  GroupedFileItems groupedFileItems : groupedFileItemsList) {
    sortedFileItems.addAll(groupedFileItems.getFileItems());
  }
  return sortedFileItems;
}
