{
  if (getFileName(name) == null) {
    return null;
  }
  FileItem[] liferayFileItems=_fileParams.get(name);
  if ((liferayFileItems == null) || (liferayFileItems.length == 0)) {
    return null;
  }
  FileItem liferayFileItem=liferayFileItems[0];
  if (liferayFileItem.getSize() > 0 && liferayFileItem.getSize() <= liferayFileItem.getSizeThreshold()) {
    forceCreate=true;
  }
  File file=liferayFileItem.getStoreLocation();
  if (liferayFileItem.isInMemory() && forceCreate) {
    try {
      FileUtil.write(file,liferayFileItem.getInputStream());
    }
 catch (    IOException ioe) {
      if (_log.isWarnEnabled()) {
        _log.warn("Unable to write temporary file " + file.getAbsolutePath(),ioe);
      }
    }
  }
  return file;
}
