{
  ServiceTestUtil.initServices();
  ServiceTestUtil.initPermissions();
  if (_mainServlet != null) {
    return;
  }
  MockServletContext mockServletContext=new AutoDeployMockServletContext(new FileSystemResourceLoader());
  ServletContextPool.put(StringPool.BLANK,mockServletContext);
  MockServletConfig mockServletConfig=new MockServletConfig(mockServletContext);
  _mainServlet=new MainServlet();
  try {
    _mainServlet.init(mockServletConfig);
  }
 catch (  ServletException se) {
    throw new RuntimeException("The main servlet could not be initialized");
  }
}
