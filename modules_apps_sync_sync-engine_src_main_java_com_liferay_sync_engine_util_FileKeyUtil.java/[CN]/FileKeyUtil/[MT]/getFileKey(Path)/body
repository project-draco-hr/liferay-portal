{
  if (!FileUtil.exists(filePath)) {
    return -1;
  }
  try {
    if (OSDetector.isApple()) {
      Xattrj xattrj=getXattrj();
      if (xattrj == null) {
        return -1;
      }
      String fileKey=xattrj.readAttribute(filePath.toFile(),"fileKey");
      if (fileKey == null) {
        return -1;
      }
      return Long.parseLong(fileKey);
    }
 else {
      UserDefinedFileAttributeView userDefinedFileAttributeView=Files.getFileAttributeView(filePath,UserDefinedFileAttributeView.class);
      List<String> list=userDefinedFileAttributeView.list();
      if (!list.contains("fileKey")) {
        return -1;
      }
      ByteBuffer byteBuffer=ByteBuffer.allocate(userDefinedFileAttributeView.size("fileKey"));
      userDefinedFileAttributeView.read("fileKey",byteBuffer);
      CharBuffer charBuffer=_CHARSET.decode((ByteBuffer)byteBuffer.flip());
      return Long.parseLong(charBuffer.toString());
    }
  }
 catch (  Exception e) {
    _logger.error(e.getMessage(),e);
    return -1;
  }
}
