{
  String[] assetTypes=WorkflowHandlerUtil.getSearchableAssetTypes();
  List<WorkflowInstance> results=null;
  int total=0;
  if (_portletName.equals(PortletKeys.WORKFLOW_DEFINITIONS) || _portletName.equals(WorkflowInstancePortletKeys.WORKFLOW_INSTANCE)) {
    if (isCompletedInstances()) {
      searchContainer.setEmptyResultsMessage("there-are-no-completed-instances");
    }
 else {
      searchContainer.setEmptyResultsMessage("there-are-no-pending-instances");
    }
    _allInstances=true;
    total=WorkflowInstanceManagerUtil.getWorkflowInstanceCount(_company.getCompanyId(),null,assetTypes,isCompletedInstances());
    results=WorkflowInstanceManagerUtil.getWorkflowInstances(_company.getCompanyId(),null,assetTypes,isCompletedInstances(),searchContainer.getStart(),searchContainer.getEnd(),WorkflowComparatorFactoryUtil.getInstanceStartDateComparator());
  }
 else {
    if (isCompletedInstances()) {
      searchContainer.setEmptyResultsMessage("there-are-no-completed-instances-started-by-me");
    }
 else {
      searchContainer.setEmptyResultsMessage("there-are-no-pending-instances-started-by-me");
    }
    total=WorkflowInstanceManagerUtil.getWorkflowInstanceCount(_company.getCompanyId(),_userId,assetTypes,isCompletedInstances());
    searchContainer.setTotal(total);
    results=WorkflowInstanceManagerUtil.getWorkflowInstances(_company.getCompanyId(),_userId,assetTypes,isCompletedInstances(),searchContainer.getStart(),searchContainer.getEnd(),WorkflowComparatorFactoryUtil.getInstanceStartDateComparator());
  }
  searchContainer.setTotal(total);
  searchContainer.setResults(results);
}
