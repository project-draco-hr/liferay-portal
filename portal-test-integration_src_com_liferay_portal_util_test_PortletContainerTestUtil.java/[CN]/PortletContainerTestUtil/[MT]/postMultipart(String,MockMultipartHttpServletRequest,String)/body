{
  if (mockMultipartHttpServletRequest.getInputStream() == null) {
    throw new IllegalStateException("Input stream is null");
  }
  String[] cookies=mockMultipartHttpServletRequest.getParameterValues("Cookie");
  if ((cookies == null) || (cookies.length == 0)) {
    throw new IllegalStateException("Cookie is null");
  }
  HttpClient httpClient=new HttpClient();
  PostMethod postMethod=new PostMethod(url);
  for (  String cookie : cookies) {
    postMethod.addRequestHeader(new Header("Cookie",cookie));
  }
  byte[] bytes=FileUtil.getBytes(mockMultipartHttpServletRequest.getInputStream());
  Part[] parts={new FilePart(fileNameParameter,new ByteArrayPartSource(fileNameParameter,bytes))};
  MultipartRequestEntity multipartRequestEntity=new MultipartRequestEntity(parts,postMethod.getParams());
  postMethod.setRequestEntity(multipartRequestEntity);
  httpClient.executeMethod(postMethod);
  StatusLine statusLine=postMethod.getStatusLine();
  return new Response(statusLine.getStatusCode(),postMethod.getResponseBodyAsString(),null);
}
