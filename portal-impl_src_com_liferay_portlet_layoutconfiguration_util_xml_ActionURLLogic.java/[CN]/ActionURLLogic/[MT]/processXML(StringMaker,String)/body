{
  SAXReader reader=new SAXReader();
  Document doc=reader.read(new StringReader(xml));
  Element root=doc.getRootElement();
  LiferayPortletURL portletURL=(LiferayPortletURL)_res.createPortletURL(isAction());
  String portletId=root.attributeValue("portlet-name");
  if (portletId != null) {
    portletId=PortalUtil.getJsSafePortletId(portletId);
    portletURL.setPortletId(portletId);
  }
  for (int i=1; ; i++) {
    String paramName=root.attributeValue("param-name-" + i);
    String paramValue=root.attributeValue("param-value-" + i);
    if ((paramName == null) || (paramValue == null)) {
      break;
    }
    portletURL.setParameter(paramName,paramValue);
  }
  sm.append(portletURL.toString());
}
