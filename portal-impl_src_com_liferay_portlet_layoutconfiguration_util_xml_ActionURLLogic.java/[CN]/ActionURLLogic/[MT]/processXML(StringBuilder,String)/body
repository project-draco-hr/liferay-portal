{
  Document doc=SAXReaderUtil.read(xml);
  Element root=doc.getRootElement();
  LiferayPortletURL portletURL=_renderResponseImpl.createPortletURLImpl(getLifecycle());
  String portletId=root.attributeValue("portlet-name");
  if (portletId != null) {
    portletId=PortalUtil.getJsSafePortletId(portletId);
    portletURL.setPortletId(portletId);
  }
  for (int i=1; ; i++) {
    String paramName=root.attributeValue("param-name-" + i);
    String paramValue=root.attributeValue("param-value-" + i);
    if ((paramName == null) || (paramValue == null)) {
      break;
    }
    portletURL.setParameter(paramName,paramValue);
  }
  sb.append(portletURL.toString());
}
