{
  System.out.println("Starting " + ReleaseInfo.getReleaseInfo());
  try {
    LockLocalServiceUtil.clear();
  }
 catch (  Exception e) {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to clear locks because Lock table does not exist");
    }
  }
  Runtime.getRuntime().addShutdownHook(new Thread(new ShutdownHook()));
  if ((System.getSecurityManager() == null) && (PropsValues.PORTAL_SECURITY_MANAGER_ENABLE)) {
    System.setSecurityManager(new PortalSecurityManager());
  }
  FreeMarkerEngineUtil.init();
  VelocityEngineUtil.init();
  DBUpgrader.upgrade();
  MessageBus messageBus=(MessageBus)PortalBeanLocatorUtil.locate(MessageBus.class.getName());
  MessageSender messageSender=(MessageSender)PortalBeanLocatorUtil.locate(MessageSender.class.getName());
  SynchronousMessageSender synchronousMessageSender=(SynchronousMessageSender)PortalBeanLocatorUtil.locate(SynchronousMessageSender.class.getName());
  MessageBusUtil.init(messageBus,messageSender,synchronousMessageSender);
  SchedulerEngineUtil.init(new SchedulerEngineProxy());
  SchedulerEngineUtil.start();
  DBUpgrader.verify();
}
