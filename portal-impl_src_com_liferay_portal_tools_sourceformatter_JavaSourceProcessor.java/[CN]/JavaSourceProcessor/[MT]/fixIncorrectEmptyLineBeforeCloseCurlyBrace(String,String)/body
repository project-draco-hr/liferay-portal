{
  if (fileName.endsWith("AnnotationLocatorTest.java")) {
    return content;
  }
  Matcher matcher=_incorrectCloseCurlyBracePattern.matcher(content);
  while (matcher.find()) {
    String lastLine=StringUtil.trimLeading(matcher.group(1));
    if (lastLine.startsWith("// ")) {
      continue;
    }
    String tabs=matcher.group(2);
    int tabCount=tabs.length();
    int pos=matcher.start();
    while (true) {
      pos=content.lastIndexOf("\n" + tabs,pos - 1);
      if (content.charAt(pos + tabCount + 1) == CharPool.TAB) {
        continue;
      }
      String codeBlock=content.substring(pos + tabCount + 1,matcher.end());
      String firstLine=codeBlock.substring(0,codeBlock.indexOf("\n"));
      if (firstLine.contains(" class ") || firstLine.contains(" enum ") || firstLine.contains(" interface ")|| firstLine.startsWith("new ")|| firstLine.contains(" new ")) {
        break;
      }
      return StringUtil.replaceFirst(content,"\n\n" + tabs + "}\n","\n" + tabs + "}\n",pos);
    }
  }
  return content;
}
