{
  if ((liferayServletRequest == null) || (layout == null)) {
    throw new IllegalArgumentException("Arguments cannot be null.");
  }
  HttpServletRequest httpServletRequest=(HttpServletRequest)liferayServletRequest.getRequest();
  httpServletRequest.setAttribute(WebKeys.LAYOUT,layout);
  ThemeDisplay themeDisplay=ThemeDisplayFactory.create();
  Company company=CompanyLocalServiceUtil.getCompany(layout.getCompanyId());
  themeDisplay.setCompany(company);
  themeDisplay.setLayout(layout);
  themeDisplay.setPlid(layout.getPlid());
  themeDisplay.setPortalURL(TestPropsValues.PORTAL_URL);
  themeDisplay.setRequest(httpServletRequest);
  Group group=layout.getGroup();
  themeDisplay.setScopeGroupId(group.getGroupId());
  themeDisplay.setSiteGroupId(group.getGroupId());
  themeDisplay.setUser(TestPropsValues.getUser());
  httpServletRequest.setAttribute(WebKeys.THEME_DISPLAY,themeDisplay);
}
