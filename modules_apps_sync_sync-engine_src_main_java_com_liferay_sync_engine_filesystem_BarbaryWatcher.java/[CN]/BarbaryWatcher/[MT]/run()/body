{
  while (true) {
    try {
      WatchKey watchKey=null;
      try {
        watchKey=_watchService.take();
      }
 catch (      ClosedWatchServiceException cwse) {
        break;
      }
catch (      Exception e) {
        if (_logger.isTraceEnabled()) {
          _logger.trace(e.getMessage(),e);
        }
        continue;
      }
      List<WatchEvent<?>> watchEvents=watchKey.pollEvents();
      for (int i=0; i < watchEvents.size(); i++) {
        WatchEvent<File> watchEvent=(WatchEvent<File>)watchEvents.get(i);
        File file=watchEvent.context();
        if (file == null) {
          continue;
        }
        WatchEvent.Kind<?> kind=watchEvent.kind();
        processWatchEvent(kind.name(),file.toPath());
      }
      processFailedFilePaths();
      if (!watchKey.reset()) {
        if (_logger.isTraceEnabled()) {
          _logger.trace("Unregistered file path {}",getBaseFilePath());
        }
        processMissingFilePath(getBaseFilePath());
      }
    }
 catch (    Exception e) {
      _logger.error(e.getMessage(),e);
    }
  }
}
