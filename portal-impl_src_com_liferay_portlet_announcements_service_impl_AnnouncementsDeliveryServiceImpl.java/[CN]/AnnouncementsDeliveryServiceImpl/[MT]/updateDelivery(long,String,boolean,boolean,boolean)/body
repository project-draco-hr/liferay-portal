{
  PermissionChecker permissionChecker=getPermissionChecker();
  if (!PortalPermissionUtil.contains(permissionChecker,ActionKeys.ADD_USER) && !UserPermissionUtil.contains(permissionChecker,userId,ActionKeys.UPDATE)) {
    throw new PrincipalException.MustHavePermission(permissionChecker,ActionKeys.ADD_USER,ActionKeys.UPDATE);
  }
  return announcementsDeliveryLocalService.updateDelivery(userId,type,email,sms,website);
}
