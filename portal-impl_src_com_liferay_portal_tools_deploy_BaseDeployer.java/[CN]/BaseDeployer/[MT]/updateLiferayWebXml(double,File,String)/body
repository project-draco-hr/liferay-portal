{
  boolean liferayWebXmlEnabled=true;
  Properties properties=getPluginPackageProperties(srcFile);
  if (properties != null) {
    liferayWebXmlEnabled=GetterUtil.getBoolean(properties.getProperty("liferay-web-xml-enabled"),true);
  }
  webXmlContent=WebXMLBuilder.organizeWebXML(webXmlContent);
  int x=webXmlContent.indexOf("<filter>");
  int y=webXmlContent.lastIndexOf("</filter-mapping>");
  String webXmlFilterContent=StringPool.BLANK;
  if ((x == -1) || (y == -1)) {
    x=webXmlContent.lastIndexOf("</display-name>") + 15;
    y=x;
  }
 else {
    if (liferayWebXmlEnabled && webXmlVersion > 2.3) {
      webXmlFilterContent=webXmlContent.substring(x,y + 17);
      y=y + 17;
    }
 else {
      x=y + 17;
      y=y + 17;
    }
  }
  if (webXmlVersion < 2.4) {
    webXmlContent=webXmlContent.substring(0,x) + getExtraFiltersContent(webXmlVersion,srcFile) + webXmlContent.substring(y);
    return webXmlContent;
  }
  String filterContent=webXmlFilterContent + getExtraFiltersContent(webXmlVersion,srcFile);
  String liferayWebXmlContent=FileUtil.read(DeployUtil.getResourcePath("web.xml"));
  int z=liferayWebXmlContent.indexOf("</web-app>");
  liferayWebXmlContent=liferayWebXmlContent.substring(0,z) + filterContent + liferayWebXmlContent.substring(z);
  liferayWebXmlContent=WebXMLBuilder.organizeWebXML(liferayWebXmlContent);
  FileUtil.write(srcFile + "/WEB-INF/liferay-web.xml",liferayWebXmlContent);
  webXmlContent=webXmlContent.substring(0,x) + getInvokerFilterContent() + webXmlContent.substring(y);
  return webXmlContent;
}
