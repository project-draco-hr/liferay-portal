{
  int lastNewlineIndex=lastNewLineIndex();
  if (lastNewlineIndex == -1 && beginColumn != 1) {
    return 0;
  }
  if (!isTrimmableToEmpty(text,lastNewlineIndex + 1)) {
    return 0;
  }
  for (TemplateElement elem=this.nextTerminalNode(); elem != null && elem.beginLine == this.endLine; elem=elem.nextTerminalNode()) {
    if (elem.heedsTrailingWhitespace()) {
      return 0;
    }
  }
  return text.length() - (lastNewlineIndex + 1);
}
