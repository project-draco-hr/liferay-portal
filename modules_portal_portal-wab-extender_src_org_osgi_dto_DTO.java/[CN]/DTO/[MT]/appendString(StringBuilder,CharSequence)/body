{
  result.append("\"");
  int i=result.length();
  result.append(string);
  while (i < result.length()) {
    char c=result.charAt(i);
    if ((c == '"') || (c == '\\')) {
      result.insert(i,'\\');
      i=i + 2;
      continue;
    }
    if (c < 0x20) {
      result.insert(i + 1,Integer.toHexString(c | 0x10000));
      result.replace(i,i + 2,"\\u");
      i=i + 6;
      continue;
    }
    i++;
  }
  result.append("\"");
  return result;
}
