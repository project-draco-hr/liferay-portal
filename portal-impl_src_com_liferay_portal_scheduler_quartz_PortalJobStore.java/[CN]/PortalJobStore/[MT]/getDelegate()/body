{
  if (_driverDelegate != null) {
    return _driverDelegate;
  }
  try {
    Class<?> driverDelegateClass=StdJDBCDelegate.class;
    DB db=DBFactoryUtil.getDB();
    if (db instanceof DB2DB) {
      driverDelegateClass=DB2v8Delegate.class;
    }
 else     if (db instanceof HypersonicDB) {
      driverDelegateClass=HSQLDBDelegate.class;
    }
 else     if (db instanceof PostgreSQLDB) {
      driverDelegateClass=PostgreSQLDelegate.class;
    }
 else     if (db instanceof SQLServerDB) {
      driverDelegateClass=MSSQLDelegate.class;
    }
 else     if (db instanceof SybaseDB) {
      driverDelegateClass=MSSQLDelegate.class;
    }
    if (_log.isDebugEnabled()) {
      _log.debug("Instantiating " + driverDelegateClass);
    }
    setDriverDelegateClass(driverDelegateClass.getName());
    _driverDelegate=super.getDelegate();
    if (_log.isInfoEnabled()) {
      _log.info("Using driver delegate " + _driverDelegate.getClass().getName());
    }
    return _driverDelegate;
  }
 catch (  NoSuchDelegateException nsde) {
    throw nsde;
  }
catch (  Exception e) {
    throw new NoSuchDelegateException(e.getMessage());
  }
}
