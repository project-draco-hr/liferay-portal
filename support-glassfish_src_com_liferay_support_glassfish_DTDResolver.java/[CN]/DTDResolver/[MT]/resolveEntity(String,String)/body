{
  systemId=systemId.trim();
  if (_dtdDir == null) {
    return super.resolveEntity(publicId,systemId);
  }
  InputSource inputSource=null;
  try {
    String dtdName=systemId.substring(systemId.lastIndexOf("/") + 1);
    File file=new File(_dtdDir + File.separator + dtdName);
    FileInputStream fis=new FileInputStream(file);
    inputSource=new InputSource(fis);
  }
 catch (  FileNotFoundException fnfe) {
    fnfe.printStackTrace();
  }
  return inputSource;
}
