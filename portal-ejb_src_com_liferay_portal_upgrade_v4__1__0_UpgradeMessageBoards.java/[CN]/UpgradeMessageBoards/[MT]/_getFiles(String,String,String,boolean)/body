{
  List files=new ArrayList();
  if (!attachments) {
    return files;
  }
  String portletId=CompanyImpl.SYSTEM;
  String repositoryId=CompanyImpl.SYSTEM;
  String dirName="messageboards/" + topicId + "/"+ oldMessageId;
  String[] fileNames=null;
  try {
    fileNames=DLServiceUtil.getFileNames(companyId,repositoryId,dirName);
  }
 catch (  NoSuchDirectoryException nsde) {
    return files;
  }
  String tmpDir=SystemProperties.get(SystemProperties.TMP_DIR);
  for (int i=0; i < fileNames.length; i++) {
    String fileName=fileNames[i];
    byte[] byteArray=DLServiceUtil.getFile(companyId,repositoryId,fileName);
    FileUtil.write(tmpDir + "/" + fileName,byteArray);
    files.add(fileName);
  }
  try {
    DLServiceUtil.deleteDirectory(companyId,portletId,repositoryId,dirName);
  }
 catch (  NoSuchDirectoryException nsde) {
  }
  return files;
}
