{
  try {
    SearchContainerTag<R> searchContainerTag=(SearchContainerTag<R>)findAncestorWithClass(this,SearchContainerTag.class);
    SearchContainer<R> searchContainer=searchContainerTag.getSearchContainer();
    String totalVar=searchContainer.getTotalVar();
    if (totalVar.equals(SearchContainer.DEFAULT_TOTAL_VAR)) {
      pageContext.removeAttribute(totalVar);
    }
    if (_results == null) {
      _results=searchContainer.getResults();
      if (_results.isEmpty()) {
        _results=(List<R>)pageContext.getAttribute(_resultsVar);
      }
    }
    searchContainer.setResults(_results);
    pageContext.setAttribute(_resultsVar,_results);
    return EVAL_PAGE;
  }
 catch (  Exception e) {
    throw new JspException(e);
  }
 finally {
    if (!ServerDetector.isResin()) {
      _results=null;
      _resultsVar=SearchContainer.DEFAULT_RESULTS_VAR;
    }
  }
}
