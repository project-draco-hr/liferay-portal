{
  PortalPreferences portalPreferences=PortletPreferencesFactoryUtil.getPortalPreferences(request);
  if (Validator.isNull(_displayStyle)) {
    return portalPreferences.getValue(ItemSelectorPortletKeys.ITEM_SELECTOR,"display-style",DISPLAY_STYLES[0]);
  }
  if (!ArrayUtil.contains(DISPLAY_STYLES,_displayStyle)) {
    return DISPLAY_STYLES[0];
  }
  String selectedTab=ParamUtil.getString(request,"selectedTab");
  if (Validator.isNotNull(selectedTab) && selectedTab.equals(_tabName)) {
    portalPreferences.setValue(ItemSelectorPortletKeys.ITEM_SELECTOR,"display-style",_displayStyle);
  }
  return _displayStyle;
}
