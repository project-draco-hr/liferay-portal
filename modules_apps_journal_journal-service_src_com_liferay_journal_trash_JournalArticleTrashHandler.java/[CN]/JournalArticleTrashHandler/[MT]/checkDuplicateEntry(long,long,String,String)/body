{
  JournalArticle article=JournalArticleLocalServiceUtil.getLatestArticle(classPK);
  JournalArticleResource journalArticleResource=article.getArticleResource();
  if (Validator.isNotNull(newName)) {
    originalTitle=newName;
  }
  JournalArticleResource originalArticleResource=JournalArticleResourceLocalServiceUtil.fetchArticleResource(article.getGroupId(),originalTitle);
  if ((originalArticleResource != null) && (journalArticleResource.getPrimaryKey() != originalArticleResource.getPrimaryKey())) {
    RestoreEntryException ree=new RestoreEntryException(RestoreEntryException.DUPLICATE);
    JournalArticle duplicateArticle=JournalArticleLocalServiceUtil.getArticle(originalArticleResource.getGroupId(),originalTitle);
    ree.setDuplicateEntryId(duplicateArticle.getResourcePrimKey());
    ree.setOldName(duplicateArticle.getArticleId());
    ree.setTrashEntryId(trashEntryId);
    throw ree;
  }
}
