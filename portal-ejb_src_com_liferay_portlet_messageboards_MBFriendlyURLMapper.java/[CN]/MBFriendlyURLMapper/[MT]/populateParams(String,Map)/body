{
  setParams(params);
  params.put("p_p_id",_PORTLET_ID);
  int x=friendlyURLPath.indexOf("/",1);
  int y=friendlyURLPath.indexOf("/",x + 1);
  if (y == -1) {
    addParam("struts_action","/message_boards/view");
    addParam("categoryId",MBCategoryImpl.DEFAULT_PARENT_CATEGORY_ID);
    return;
  }
  String type=friendlyURLPath.substring(x + 1,y);
  if (type.equals("category")) {
    String categoryId=friendlyURLPath.substring(y + 1,friendlyURLPath.length());
    addParam("struts_action","/message_boards/view");
    addParam("categoryId",categoryId);
  }
 else   if (type.equals("message")) {
    String messageId=friendlyURLPath.substring(y + 1,friendlyURLPath.length());
    addParam("struts_action","/message_boards/view_message");
    addParam("messageId",messageId);
  }
}
