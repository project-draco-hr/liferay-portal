{
  User user=userPersistence.findByPrimaryKey(userId);
  Date now=new Date();
  WorkflowLink workflowLink=workflowLinkPersistence.fetchByG_C_C(groupId,companyId,classNameId);
  if (workflowLink == null) {
    workflowLink=addWorkflowLink(userId,companyId,groupId,classNameId,workflowDefinitionName,workflowDefinitionVersion);
  }
  workflowLink.setModifiedDate(now);
  workflowLink.setUserId(userId);
  workflowLink.setUserName(user.getFullName());
  workflowLink.setGroupId(groupId);
  workflowLink.setCompanyId(companyId);
  workflowLink.setClassNameId(classNameId);
  workflowLink.setWorkflowDefinitionName(workflowDefinitionName);
  workflowLink.setWorkflowDefinitionVersion(workflowDefinitionVersion);
  workflowLinkPersistence.update(workflowLink,false);
  return workflowLink;
}
