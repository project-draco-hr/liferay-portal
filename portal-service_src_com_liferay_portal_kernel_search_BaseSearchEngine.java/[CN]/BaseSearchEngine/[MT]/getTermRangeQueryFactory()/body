{
  if (_termRangeQueryFactory == null) {
    ClassLoader classLoader=PortalClassLoaderUtil.getClassLoader();
    String className="com.liferay.portal.search.lucene.TermRangeQueryFactoryImpl";
    if (!isLuceneBased()) {
      className="com.liferay.portal.search.generic.TermRangeQueryFactoryImpl";
    }
    try {
      _termRangeQueryFactory=(TermRangeQueryFactory)InstanceFactory.newInstance(classLoader,className);
    }
 catch (    Exception e) {
      _log.fatal("Unable to locate appropriate BooleanQueryFactory",e);
    }
  }
  return _termRangeQueryFactory;
}
