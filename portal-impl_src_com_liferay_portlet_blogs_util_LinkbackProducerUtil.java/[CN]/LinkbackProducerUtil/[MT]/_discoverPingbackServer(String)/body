{
  String serverUri=null;
  try {
    HttpClient httpClient=new HttpClient();
    HttpMethodBase method=new HeadMethod(targetUri);
    httpClient.executeMethod(method);
    Header header=method.getResponseHeader("X-Pingback");
    if (header != null) {
      serverUri=header.getValue();
    }
  }
 catch (  Exception e) {
    _log.error("Unable to call HEAD of " + targetUri,e);
  }
  if (Validator.isNull(serverUri)) {
    try {
      Source clientSource=new Source(HttpUtil.URLtoString(targetUri));
      List<StartTag> startTags=clientSource.getAllStartTags("link");
      for (      StartTag startTag : startTags) {
        String rel=startTag.getAttributeValue("rel");
        if (rel.equalsIgnoreCase("pingback")) {
          String href=startTag.getAttributeValue("href");
          serverUri=HtmlUtil.escape(href);
          break;
        }
      }
    }
 catch (    Exception e) {
      _log.error("Unable to call GET of " + targetUri,e);
    }
  }
  return serverUri;
}
