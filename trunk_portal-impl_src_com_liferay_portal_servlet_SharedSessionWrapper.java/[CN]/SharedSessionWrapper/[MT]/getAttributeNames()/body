{
  HttpSession session=getSessionDelegate();
  Enumeration<String> namesEnu=session.getAttributeNames();
  if (session == _portletSession) {
    List<String> namesList=Collections.list(namesEnu);
    Enumeration<String> portalSessionNamesEnu=_portalSession.getAttributeNames();
    while (portalSessionNamesEnu.hasMoreElements()) {
      String name=portalSessionNamesEnu.nextElement();
      if (containsSharedAttribute(name)) {
        namesList.add(name);
      }
    }
    namesEnu=Collections.enumeration(namesList);
  }
  return namesEnu;
}
