{
  MBThread thread=(MBThread)obj;
  Document document=getBaseModelDocument(PORTLET_ID,thread);
  try {
    MBDiscussionLocalServiceUtil.getThreadDiscussion(thread.getThreadId());
    document.addKeyword("discussion",true);
  }
 catch (  NoSuchDiscussionException nsde) {
    document.addKeyword("discussion",false);
  }
  document.addKeyword("lastPostDate",thread.getLastPostDate().getTime());
  document.addKeyword("participantUserIds",thread.getParticipantUserIds());
  if (!thread.isInTrash() && thread.isInTrashContainer()) {
    addTrashFields(document,MBThread.class.getName(),thread.getThreadId(),null,null,MBThreadTrashRenderer.TYPE);
    String className=MBThread.class.getName();
    long classPK=thread.getThreadId();
    if (thread.isInTrashContainer()) {
      MBCategory category=thread.getTrashContainer();
      className=MBCategory.class.getName();
      classPK=category.getCategoryId();
    }
    document.addKeyword(Field.ROOT_ENTRY_CLASS_NAME,className);
    document.addKeyword(Field.ROOT_ENTRY_CLASS_PK,classPK);
    document.addKeyword(Field.STATUS,WorkflowConstants.STATUS_IN_TRASH);
  }
  return document;
}
