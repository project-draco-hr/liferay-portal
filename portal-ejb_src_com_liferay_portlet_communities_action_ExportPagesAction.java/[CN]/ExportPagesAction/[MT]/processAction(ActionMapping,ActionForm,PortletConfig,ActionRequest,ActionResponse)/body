{
  try {
    String ownerId=ParamUtil.getString(req,"ownerId");
    String fileName=ParamUtil.getString(req,"exportFileName");
    boolean exportPortletPreferences=ParamUtil.getBoolean(req,"exportPortletPreferences");
    boolean exportPortletData=ParamUtil.getBoolean(req,"exportPortletData");
    boolean exportPermissions=ParamUtil.getBoolean(req,"exportPermissions");
    boolean exportTheme=ParamUtil.getBoolean(req,"exportTheme");
    byte[] byteArray=LayoutServiceUtil.exportLayouts(ownerId,exportPortletPreferences,exportPortletData,exportPermissions,exportTheme);
    HttpServletResponse httpRes=((ActionResponseImpl)res).getHttpServletResponse();
    ServletResponseUtil.sendFile(httpRes,fileName,byteArray);
  }
 catch (  Exception e) {
    _log.error(e);
  }
}
