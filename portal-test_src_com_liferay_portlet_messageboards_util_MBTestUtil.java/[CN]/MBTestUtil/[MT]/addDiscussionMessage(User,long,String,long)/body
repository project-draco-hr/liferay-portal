{
  MBMessageDisplay messageDisplay=MBMessageLocalServiceUtil.getDiscussionMessageDisplay(user.getUserId(),groupId,className,classPK,WorkflowConstants.STATUS_APPROVED);
  MBThread thread=messageDisplay.getThread();
  ServiceContext serviceContext=ServiceTestUtil.getServiceContext(groupId);
  serviceContext.setCommand(Constants.ADD);
  serviceContext.setLayoutFullURL("http://localhost");
  return MBMessageLocalServiceUtil.addDiscussionMessage(user.getUserId(),user.getFullName(),groupId,className,classPK,thread.getThreadId(),thread.getRootMessageId(),ServiceTestUtil.randomString(),ServiceTestUtil.randomString(50),serviceContext);
}
