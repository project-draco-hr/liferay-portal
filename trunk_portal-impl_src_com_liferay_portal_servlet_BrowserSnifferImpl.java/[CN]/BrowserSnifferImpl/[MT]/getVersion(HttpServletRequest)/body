{
  String userAgent=getUserAgent(request);
  String version=StringPool.BLANK;
  Matcher matcher=_versionPattern.matcher(userAgent);
  if (matcher.find()) {
    version=matcher.group(1);
  }
 else   if (isFirefox(request)) {
    Matcher versionFirefoxMatcher=_versionFirefoxPattern.matcher(userAgent);
    if (versionFirefoxMatcher.find()) {
      version=versionFirefoxMatcher.group(1);
    }
  }
 else   if (isChrome(request)) {
    Matcher versionChromeMatcher=_versionChromePattern.matcher(userAgent);
    if (versionChromeMatcher.find()) {
      version=versionChromeMatcher.group(1);
    }
  }
 else {
    version=getRevision(request);
  }
  return version;
}
