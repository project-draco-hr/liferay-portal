{
  String userPrincipalStrategy=_portletModel.getUserPrincipalStrategy();
  long userId=PortalUtil.getUserId(request);
  long remoteUserId=0;
  String remoteUser=request.getRemoteUser();
  if (userPrincipalStrategy.equals(PortletConstants.USER_PRINCIPAL_STRATEGY_SCREEN_NAME)) {
    try {
      User user=PortalUtil.getUser(request);
      remoteUserId=user.getUserId();
    }
 catch (    Exception e) {
      _log.error(e);
    }
  }
 else {
    if ((userId > 0) && (remoteUser == null)) {
      remoteUserId=userId;
    }
 else {
      remoteUserId=GetterUtil.getLong(remoteUser);
    }
  }
  if (remoteUserId <= 0) {
    return Collections.emptyList();
  }
  long companyId=PortalUtil.getCompanyId(request);
  List<Role> roles=RoleLocalServiceUtil.getRoles(companyId);
  if (roles == null || roles.isEmpty()) {
    return Collections.emptyList();
  }
 else {
    List<String> roleNames=new ArrayList<String>(roles.size());
    for (    Role role : roles) {
      roleNames.add(role.getName());
    }
    return roleNames;
  }
}
