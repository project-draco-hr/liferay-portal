{
  String expectedXML="<portlet-preferences><preference><name>name</name><value>value1" + "</value><value>value2</value></preference>" + "</portlet-preferences>";
  PortletPreferencesImpl portletPreferences=new PortletPreferencesImpl();
  String[] values={"value1","value2"};
  portletPreferences.setValues("name",values);
  String actualXML=PortletPreferencesSerializer.toXML(portletPreferences);
  assertEquals(expectedXML,actualXML);
  portletPreferences=deserialize(expectedXML);
  Map<String,Preference> preferenceMap=portletPreferences.getPreferences();
  assertEquals(1,preferenceMap.size());
  Preference preference=preferenceMap.values().iterator().next();
  assertEquals("name",preference.getName());
  values=preference.getValues();
  assertEquals(2,values.length);
  assertEquals("value1",values[0]);
  assertEquals("value2",values[1]);
}
