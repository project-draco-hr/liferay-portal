{
  int length=0;
  byte[] data=new byte[8];
  while (length < 8) {
    int count=inputStream.read(data,length,8 - length);
    if (count < 0) {
      throw new EOFException();
    }
    length+=count;
  }
  long receipt=BigEndianCodec.getLong(data,0);
  ByteBuffer byteBuffer=MailboxUtil.receiveMail(receipt);
  if (byteBuffer == null) {
    throw new IllegalArgumentException("No such mail with receipt " + receipt);
  }
  Deserializer deserializer=new Deserializer(byteBuffer);
  try {
    return deserializer.readObject();
  }
 catch (  ClassNotFoundException cnfe) {
    throw new IOException(cnfe);
  }
}
