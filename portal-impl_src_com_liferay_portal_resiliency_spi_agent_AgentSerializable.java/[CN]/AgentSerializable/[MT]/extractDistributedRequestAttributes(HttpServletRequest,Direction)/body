{
  Map<String,Serializable> distributedRequestAttributes=new HashMap<String,Serializable>();
  Enumeration<String> enumeration=request.getAttributeNames();
  while (enumeration.hasMoreElements()) {
    String name=enumeration.nextElement();
    if (DistributedRegistry.isDistributed(name,direction)) {
      Object value=request.getAttribute(name);
      if (value instanceof Serializable) {
        distributedRequestAttributes.put(name,(Serializable)value);
      }
 else       if (_log.isWarnEnabled()) {
        _log.warn("Non-serializable distributed request attribute " + "name : " + name + " value : "+ value);
      }
    }
 else     if (_log.isDebugEnabled()) {
      _log.debug("Non-distributed request attribute name : " + name + " direction : "+ direction+ " value : "+ request.getAttribute(name));
    }
  }
  return distributedRequestAttributes;
}
