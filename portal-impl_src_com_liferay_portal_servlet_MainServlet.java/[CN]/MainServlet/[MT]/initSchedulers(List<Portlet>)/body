{
  if (!PropsValues.SCHEDULER_ENABLED) {
    return;
  }
  for (  Portlet portlet : portlets) {
    if (!portlet.isActive()) {
      continue;
    }
    List<SchedulerEntry> schedulerEntries=portlet.getSchedulerEntries();
    if ((schedulerEntries == null) || schedulerEntries.isEmpty()) {
      continue;
    }
    for (    SchedulerEntry schedulerEntry : schedulerEntries) {
      String propertyKey=schedulerEntry.getPropertyKey();
      if (Validator.isNotNull(propertyKey)) {
        String triggerValue=PrefsPropsUtil.getString(propertyKey);
        if (_log.isDebugEnabled()) {
          _log.debug("Scheduler property key " + propertyKey + " has trigger value "+ triggerValue);
        }
        if (Validator.isNull(triggerValue)) {
          throw new SchedulerException("Property key " + propertyKey + " requires a value");
        }
        schedulerEntry.setTriggerValue(triggerValue);
      }
      SchedulerEngineUtil.schedule(schedulerEntry,PortalClassLoaderUtil.getClassLoader());
    }
  }
  SchedulerEntry schedulerEntry=new SchedulerEntryImpl();
  schedulerEntry.setEventListenerClass(SocialEquityMessageListener.class.getName());
  schedulerEntry.setTimeUnit(TimeUnit.DAY);
  schedulerEntry.setTriggerType(TriggerType.SIMPLE);
  schedulerEntry.setTriggerValue("1");
  try {
    SchedulerEngineUtil.schedule(schedulerEntry,PortalClassLoaderUtil.getClassLoader());
    if (_log.isInfoEnabled()) {
      _log.info("Initialized scheduler for social equity checks.");
    }
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
}
