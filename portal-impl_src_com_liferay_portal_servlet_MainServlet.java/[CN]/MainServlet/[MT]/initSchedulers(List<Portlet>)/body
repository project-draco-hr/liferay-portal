{
  if (!PropsValues.SCHEDULER_ENABLED) {
    return;
  }
  for (  String className : PropsValues.SCHEDULER_CLASSES) {
    Scheduler scheduler=(Scheduler)InstancePool.get(className);
    scheduler.schedule();
  }
  Iterator<Portlet> itr=portlets.iterator();
  while (itr.hasNext()) {
    Portlet portlet=itr.next();
    String className=portlet.getSchedulerClass();
    if (!portlet.isActive() || Validator.isNull(className)) {
      continue;
    }
    Scheduler scheduler=(Scheduler)InstancePool.get(className);
    scheduler.schedule();
  }
  for (  Portlet portlet : portlets) {
    if (!portlet.isActive()) {
      continue;
    }
    List<SchedulerEntry> schedulerEntries=portlet.getSchedulerEntries();
    if (schedulerEntries == null || schedulerEntries.size() == 0) {
      continue;
    }
    for (    SchedulerEntry schedulerEntry : schedulerEntries) {
      com.liferay.portal.kernel.messaging.MessageListener schedulerEventListener=schedulerEntry.getEventListener();
      if (schedulerEventListener == null) {
        if (_log.isWarnEnabled()) {
          _log.warn("Unable to create scheduler listener from class:" + schedulerEntry.getEventListenerClass());
        }
        continue;
      }
      MessageBusUtil.registerMessageListener(DestinationNames.SCHEDULER_DISPATCH,schedulerEventListener);
      SchedulerEngineUtil.schedule(schedulerEntry.getTrigger(),schedulerEntry.getDescription(),DestinationNames.SCHEDULER_DISPATCH,null);
    }
  }
}
