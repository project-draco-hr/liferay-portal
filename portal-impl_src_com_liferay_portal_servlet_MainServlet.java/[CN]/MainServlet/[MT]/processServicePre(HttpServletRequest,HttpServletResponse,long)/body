{
  try {
    EventsProcessorUtil.process(PropsKeys.SERVLET_SERVICE_EVENTS_PRE,PropsValues.SERVLET_SERVICE_EVENTS_PRE,request,response);
  }
 catch (  Exception e) {
    Throwable cause=e.getCause();
    if (cause instanceof NoSuchLayoutException) {
      sendError(HttpServletResponse.SC_NOT_FOUND,cause,request,response);
      return true;
    }
 else     if (cause instanceof PrincipalException) {
      processServicePrePrincipalException(cause,userId,request,response);
      return true;
    }
    _log.error(e,e);
    request.setAttribute(PageContext.EXCEPTION,e);
    ServletContext servletContext=getServletContext();
    StrutsUtil.forward(PropsValues.SERVLET_SERVICE_EVENTS_PRE_ERROR_PAGE,servletContext,request,response);
    return true;
  }
  if (_HTTP_HEADER_VERSION_VERBOSITY_DEFAULT) {
  }
 else   if (_HTTP_HEADER_VERSION_VERBOSITY_PARTIAL) {
    response.addHeader(_LIFERAY_PORTAL_REQUEST_HEADER,ReleaseInfo.getName());
  }
 else {
    response.addHeader(_LIFERAY_PORTAL_REQUEST_HEADER,ReleaseInfo.getReleaseInfo());
  }
  return false;
}
