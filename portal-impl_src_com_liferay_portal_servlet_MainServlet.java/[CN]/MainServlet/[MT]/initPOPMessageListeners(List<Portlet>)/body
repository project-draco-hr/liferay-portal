{
  Iterator<Portlet> itr=portlets.iterator();
  while (itr.hasNext()) {
    Portlet portlet=itr.next();
    com.liferay.portal.kernel.pop.MessageListener popMessageListener=portlet.getPopMessageListenerInstance();
    if (!portlet.isActive() || (popMessageListener == null)) {
      continue;
    }
    POPServerUtil.addListener(popMessageListener);
  }
}
