{
  String remoteUser=request.getRemoteUser();
  if (!PropsValues.PORTAL_JAAS_ENABLE) {
    HttpSession session=request.getSession();
    String jRemoteUser=(String)session.getAttribute("j_remoteuser");
    if (jRemoteUser != null) {
      remoteUser=jRemoteUser;
      session.removeAttribute("j_remoteuser");
    }
  }
  if ((userId > 0) && (remoteUser == null)) {
    remoteUser=String.valueOf(userId);
  }
  return remoteUser;
}
