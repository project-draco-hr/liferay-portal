{
  ServletContext servletContext=getServletContext();
  String key=Globals.REQUEST_PROCESSOR_KEY + moduleConfig.getPrefix();
  RequestProcessor processor=(RequestProcessor)servletContext.getAttribute(key);
  if (processor == null) {
    ControllerConfig controllerConfig=moduleConfig.getControllerConfig();
    String processorClass=controllerConfig.getProcessorClass();
    ClassLoader classLoader=PortalClassLoaderUtil.getClassLoader();
    try {
      processor=(RequestProcessor)classLoader.loadClass(processorClass).newInstance();
    }
 catch (    Exception e) {
      throw new ServletException(e);
    }
    processor.init(this,moduleConfig);
    servletContext.setAttribute(key,processor);
  }
  return processor;
}
