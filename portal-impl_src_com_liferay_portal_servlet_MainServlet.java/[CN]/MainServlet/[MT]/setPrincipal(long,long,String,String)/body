{
  if ((userId == 0) && (remoteUser == null)) {
    return;
  }
  String name=String.valueOf(userId);
  if (PropsValues.PORTAL_JAAS_ENABLE) {
    long remoteUserId=0;
    try {
      remoteUserId=JAASHelper.getJaasUserId(companyId,remoteUser);
    }
 catch (    Exception e) {
      if (_log.isWarnEnabled()) {
        _log.warn(e);
      }
    }
    if (remoteUserId > 0) {
      name=String.valueOf(remoteUserId);
    }
  }
 else   if (remoteUser != null) {
    name=remoteUser;
  }
  PrincipalThreadLocal.setName(name);
  PrincipalThreadLocal.setPassword(password);
}
