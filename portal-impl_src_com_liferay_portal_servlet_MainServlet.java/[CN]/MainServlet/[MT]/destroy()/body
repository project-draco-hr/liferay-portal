{
  long[] companyIds=PortalInstances.getCompanyIds();
  for (int i=0; i < companyIds.length; i++) {
    destroyCompany(companyIds[i]);
  }
  try {
    EventsProcessor.process(PropsUtil.getArray(PropsUtil.GLOBAL_SHUTDOWN_EVENTS),true);
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
  super.destroy();
}
