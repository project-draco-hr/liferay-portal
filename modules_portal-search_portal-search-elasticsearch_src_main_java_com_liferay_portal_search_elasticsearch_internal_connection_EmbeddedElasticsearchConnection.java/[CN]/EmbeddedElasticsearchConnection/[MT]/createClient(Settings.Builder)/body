{
  StopWatch stopWatch=new StopWatch();
  stopWatch.start();
  if (_log.isWarnEnabled()) {
    _log.warn("Liferay is configured to use embedded Elasticsearch as " + "search engine. Do NOT use embedded Elasticsearch in " + "production.");
    _log.warn("Embedded Elasticsearch is useful for development" + " and demo'ing purposes. Remote Elasticsearch can be " + "configured in Control Panel => System Settings => "+ "Platform.");
    _log.warn("Starting embedded Elasticsearch cluster " + elasticsearchConfiguration.clusterName());
  }
  NodeBuilder nodeBuilder=NodeBuilder.nodeBuilder();
  nodeBuilder.settings(builder);
  _node=nodeBuilder.node();
  _node.start();
  Client client=_node.client();
  if (_log.isDebugEnabled()) {
    stopWatch.stop();
    _log.debug("Finished starting " + elasticsearchConfiguration.clusterName() + " in "+ stopWatch.getTime()+ " ms");
  }
  return client;
}
