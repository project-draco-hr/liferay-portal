{
  if (!BackgroundTaskThreadLocal.hasBackgroundTask()) {
    return;
  }
  Message message=createMessage(messageType,manifestSummary);
  message.put("portletId",portletId);
  Portlet portlet=PortletLocalServiceUtil.getPortletById(portletId);
  if (portlet != null) {
    PortletDataHandler portletDataHandler=portlet.getPortletDataHandlerInstance();
    long portletModelAdditionCountersTotal=portletDataHandler.getExportModelCount(manifestSummary);
    if (portletModelAdditionCountersTotal < 0) {
      portletModelAdditionCountersTotal=0;
    }
    message.put("portletModelAdditionCountersTotal",portletModelAdditionCountersTotal);
  }
  _singleDestinationMessageSender.send(message);
}
