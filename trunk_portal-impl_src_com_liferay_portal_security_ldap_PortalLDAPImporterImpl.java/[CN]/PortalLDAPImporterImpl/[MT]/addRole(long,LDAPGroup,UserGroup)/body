{
  if (!PropsValues.LDAP_IMPORT_CREATE_ROLE_PER_GROUP) {
    return;
  }
  Role role=null;
  try {
    role=RoleLocalServiceUtil.getRole(companyId,ldapGroup.getGroupName());
  }
 catch (  NoSuchRoleException nsre) {
    User defaultUser=UserLocalServiceUtil.getDefaultUser(companyId);
    role=RoleLocalServiceUtil.addRole(defaultUser.getUserId(),companyId,ldapGroup.getGroupName(),null,"Autogenerated role from LDAP import",RoleConstants.TYPE_REGULAR);
  }
  Group group=userGroup.getGroup();
  if (GroupLocalServiceUtil.hasRoleGroup(role.getRoleId(),group.getGroupId())) {
    return;
  }
  GroupLocalServiceUtil.addRoleGroups(role.getRoleId(),new long[]{group.getGroupId()});
}
