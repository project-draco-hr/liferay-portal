{
  RegisteredEventListeners registeredEventListeners=ehcache.getCacheEventNotificationService();
  registeredEventListeners.registerListener(new PortalCacheCacheEventListener<>(aggregatedPortalCacheListener,this),NotificationScope.ALL);
  Ehcache oldEhcache=this.ehcache;
  this.ehcache=ehcache;
  registeredEventListeners=oldEhcache.getCacheEventNotificationService();
  Set<CacheEventListener> cacheEventListeners=registeredEventListeners.getCacheEventListeners();
  for (  CacheEventListener cacheEventListener : cacheEventListeners) {
    registeredEventListeners.unregisterListener(cacheEventListener);
  }
}
