{
  if (templateId == null) {
    throw new IllegalArgumentException("Argument \"name\" cannot be null");
  }
  if (locale == null) {
    throw new IllegalArgumentException("Argument \"locale\" cannot be null");
  }
  if (encoding == null) {
    throw new IllegalArgumentException("Argument \"encoding\" cannot be null");
  }
  TemplateResource templateResource=null;
  if (templateId.startsWith(TemplateResource.TEMPLATE_RESOURCE_UUID_PREFIX)) {
    templateResource=TemplateResourceThreadLocal.getTemplateResource(TemplateManager.FREEMARKER);
  }
 else {
    try {
      templateId=(String)_normalizeNameMethod.invoke(this,templateId);
      templateResource=TemplateResourceLoaderUtil.getTemplateResource(TemplateManager.FREEMARKER,templateId);
    }
 catch (    Exception e) {
      templateResource=null;
    }
  }
  if (templateResource == null) {
    throw new IOException("Unable to find FreeMarker template with ID " + templateId);
  }
  Object object=_portalCache.get(templateResource);
  if ((object != null) && (object instanceof Template)) {
    return (Template)object;
  }
  Template template=new Template(templateResource.getTemplateId(),templateResource.getReader(),_configuration,TemplateResource.DEFAUT_ENCODING);
  _portalCache.put(templateResource,template);
  return template;
}
