{
  String[] macroTemplateIds=PropsUtil.getArray(PropsKeys.FREEMARKER_ENGINE_MACRO_LIBRARY);
  for (  String macroTemplateId : macroTemplateIds) {
    int pos=macroTemplateId.indexOf(" as ");
    if (pos != -1) {
      macroTemplateId=macroTemplateId.substring(0,pos);
    }
    if (templateId.equals(macroTemplateId)) {
      try {
        return AccessController.doPrivileged(new TemplatePrivilegedExceptionAction(macroTemplateId,locale,encoding,parse));
      }
 catch (      PrivilegedActionException pae) {
        throw (IOException)pae.getException();
      }
    }
  }
  return doGetTemplate(templateId,locale,encoding,parse);
}
