{
  while (true) {
    if (portalCache instanceof PortalCacheWrapper) {
      PortalCacheWrapper<K,V> portalCacheWrapper=(PortalCacheWrapper<K,V>)portalCache;
      portalCache=portalCacheWrapper.getWrappedPortalCache();
    }
 else     if (portalCache instanceof EhcachePortalCache) {
      EhcachePortalCache<K,V> ehcachePortalCache=(EhcachePortalCache<K,V>)portalCache;
      return ehcachePortalCache.ehcache;
    }
 else {
      throw new IllegalArgumentException("PortalCache is not a " + EhcachePortalCache.class.getName() + " or a "+ PortalCacheWrapper.class.getName());
    }
  }
}
