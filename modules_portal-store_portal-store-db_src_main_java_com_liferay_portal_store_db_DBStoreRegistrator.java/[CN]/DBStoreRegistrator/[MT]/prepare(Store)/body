{
  DB db=DBFactoryUtil.getDB();
  if (db.getDBType() != DBType.POSTGRESQL) {
    return store;
  }
  ClassLoader classLoader=ClassLoaderUtil.getPortalClassLoader();
  MethodInterceptor transactionAdviceMethodInterceptor=(MethodInterceptor)PortalBeanLocatorUtil.locate("transactionAdvice");
  List<MethodInterceptor> methodInterceptors=Arrays.asList(transactionAdviceMethodInterceptor,new TempFileMethodInterceptor());
  store=(Store)ProxyUtil.newProxyInstance(classLoader,new Class<?>[]{Store.class},new MethodInterceptorInvocationHandler(store,methodInterceptors));
  return new DelegatorDBStore(store);
}
