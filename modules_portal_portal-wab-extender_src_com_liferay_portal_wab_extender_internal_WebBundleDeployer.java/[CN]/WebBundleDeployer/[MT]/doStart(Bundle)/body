{
  _eventUtil.sendEvent(bundle,EventUtil.DEPLOYING,null,false);
  String contextPath=WabUtil.getWebContextPath(bundle);
  if (contextPath == null) {
    return;
  }
  BundleContext bundleContext=bundle.getBundleContext();
  if (bundleContext == null) {
    _eventUtil.sendEvent(bundle,EventUtil.FAILED,null,false);
    return;
  }
  try {
    WabBundleProcessor wabBundleProcessor=new WabBundleProcessor(bundle,contextPath,_extendedHttpService,_saxParserFactory,_logger);
    WabBundleProcessor original=_wabBundleProcessors.putIfAbsent(bundle,wabBundleProcessor);
    if (original != null) {
      _eventUtil.sendEvent(bundle,EventUtil.FAILED,null,false);
      return;
    }
    wabBundleProcessor.init();
  }
 catch (  Exception e) {
    _eventUtil.sendEvent(bundle,EventUtil.FAILED,e,false);
  }
}
