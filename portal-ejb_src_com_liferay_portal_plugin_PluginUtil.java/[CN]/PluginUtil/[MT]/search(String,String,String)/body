{
  SortedSet plugins=new TreeSet();
  String[] repositoryURLs;
  if (Validator.isNull(repositoryURL)) {
    repositoryURLs=getRepositoryURLs();
  }
 else {
    repositoryURLs=new String[]{repositoryURL};
  }
  for (int i=0; i < repositoryURLs.length; i++) {
    String repositoryURL2=repositoryURLs[i];
    try {
      PluginRepository repository=getRepository(repositoryURL2);
      plugins.addAll(repository.search(type,tags));
    }
 catch (    RuntimeException e) {
      _log.info("Error loading repository " + repositoryURL,e);
    }
  }
  return new ArrayList(plugins);
}
