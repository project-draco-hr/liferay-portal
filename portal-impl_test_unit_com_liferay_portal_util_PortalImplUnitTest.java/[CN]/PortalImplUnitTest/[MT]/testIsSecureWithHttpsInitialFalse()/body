{
  MockHttpServletRequest mockHttpServletRequest=new MockHttpServletRequest();
  mockHttpServletRequest.setSecure(true);
  HttpSession mockSession=mockHttpServletRequest.getSession();
  mockSession.setAttribute(WebKeys.HTTPS_INITIAL,Boolean.FALSE);
  setPropsValuesValue("COMPANY_SECURITY_AUTH_REQUIRES_HTTPS",true);
  setPropsValuesValue("SESSION_ENABLE_PHISHING_PROTECTION",false);
  boolean secure=_portalImpl.isSecure(mockHttpServletRequest);
  Assert.assertFalse(secure);
}
