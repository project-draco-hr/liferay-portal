{
  long[] repositoryIds=new long[2];
  repositoryIds[0]=RepositoryServiceUtil.addRepository(getGroupId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,"Test 1","Test 1",PortletKeys.DOCUMENT_LIBRARY,RepositoryConstants.TYPE_LIFERAY,new UnicodeProperties());
  DLFolder dlFolder=DLRepositoryServiceUtil.addFolder(getGroupId(),getGroupId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,"Folder","Folder",new ServiceContext());
  repositoryIds[1]=RepositoryServiceUtil.addRepository(getGroupId(),dlFolder.getFolderId(),"Test 2","Test 2",PortletKeys.DOCUMENT_LIBRARY,RepositoryConstants.TYPE_LIFERAY,new UnicodeProperties());
  RepositoryServiceUtil.deleteRepositories(getGroupId());
  for (int i=0; i < repositoryIds.length; i++) {
    long repositoryId=repositoryIds[i];
    try {
      RepositoryServiceUtil.getLocalRepositoryImpl(repositoryId);
      fail("Should not be able to access repository " + repositoryId);
    }
 catch (    Exception e) {
    }
  }
}
