{
  HttpServletRequest request=PortalUtil.getHttpServletRequest(renderRequest);
  ServiceReference<IPGeocoder> serviceReference=_bundleContext.getServiceReference(IPGeocoder.class);
  if (serviceReference != null) {
    IPGeocoder ipGeocoder=_bundleContext.getService(serviceReference);
    if (ipGeocoder != null) {
      IPInfo ipInfo=ipGeocoder.getIPInfo(request.getRemoteAddr());
      renderRequest.setAttribute(IPInfo.class.getName(),ipInfo);
    }
  }
  super.doView(renderRequest,renderResponse);
}
