{
  if (xml.length() <= PropsValues.PORTLET_PREFERENCES_CACHE_KEY_THRESHOLD_SIZE) {
    return xml;
  }
  CacheKeyGenerator cacheKeyGenerator=CacheKeyGeneratorUtil.getCacheKeyGenerator(PortletPreferencesFactoryImpl.class.getName());
  if (_log.isDebugEnabled()) {
    _log.debug("CacheKeyGenerator implementation: " + cacheKeyGenerator.getClass().getName());
  }
  Serializable cacheKey=cacheKeyGenerator.getCacheKey(xml);
  return String.valueOf(cacheKey);
}
