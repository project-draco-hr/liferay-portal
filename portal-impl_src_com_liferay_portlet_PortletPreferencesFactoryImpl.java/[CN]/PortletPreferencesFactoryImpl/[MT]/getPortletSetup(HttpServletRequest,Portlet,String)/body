{
  if (portlet.getPreferencesCompanyWide()) {
    return getPortletSetup(req,portlet.getPortletId(),false,false);
  }
 else {
    if (portlet.getPreferencesOwnedByGroup()) {
      if (portlet.getPreferencesUniquePerLayout()) {
        return getPortletSetup(req,portlet.getPortletId(),true,true);
      }
 else {
        return getPortletSetup(req,portlet.getPortletId(),false,true);
      }
    }
 else {
      return getPortletSetup(req,portlet.getPortletId(),true,false);
    }
  }
}
