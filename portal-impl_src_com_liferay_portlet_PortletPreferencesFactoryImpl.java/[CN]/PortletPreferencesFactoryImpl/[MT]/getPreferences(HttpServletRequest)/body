{
  PortletRequest portletRequest=(PortletRequest)request.getAttribute(JavaConstants.JAVAX_PORTLET_REQUEST);
  PortletPreferences portletPreferences=null;
  if (portletRequest != null) {
    PortletPreferencesWrapper preferencesWrapper=(PortletPreferencesWrapper)portletRequest.getPreferences();
    portletPreferences=preferencesWrapper.getPreferencesImpl();
  }
  return portletPreferences;
}
