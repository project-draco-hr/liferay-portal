{
  Matcher matcher=_incorrectAssignTagPattern.matcher(content);
  content=matcher.replaceAll("$1 />\n");
  matcher=_assignTagsBlockPattern.matcher(content);
  while (matcher.find()) {
    String match=matcher.group();
    if (StringUtil.count(match,"<#assign ") == 1) {
      continue;
    }
    String tabs=matcher.group(2);
    String replacement=StringUtil.replaceFirst(match,StringPool.SPACE,"\n\t" + tabs);
    replacement=StringUtil.replaceLast(replacement," />","\n" + tabs + "/>");
    replacement=StringUtil.replace(replacement,new String[]{" />\n","\n" + tabs + "<#assign "},new String[]{"\n","\n\t" + tabs});
    content=StringUtil.replace(content,match,replacement);
  }
  return content;
}
