{
  try {
    String fileName=ParamUtil.getString(req,"fileName");
    String contentPath=ParamUtil.getString(req,"contentPath");
    HttpSession ses=((ActionRequestImpl)req).getHttpServletRequest().getSession();
    Object[] parts=MailUtil.getAttachment(ses,contentPath);
    byte[] content=(byte[])parts[0];
    String contentType=(String)parts[1];
    HttpServletResponse httpRes=((ActionResponseImpl)res).getHttpServletResponse();
    ServletResponseUtil.sendFile(httpRes,fileName,content,contentType);
  }
 catch (  Exception e) {
    _log.error("Error in retrieving an attachment.  " + StackTraceUtil.getStackTrace(e));
  }
}
