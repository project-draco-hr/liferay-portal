{
  List<Organization> ancestors=new ArrayList<Organization>();
  for (  long organizationId : organizationIds) {
    try {
      Organization organization=OrganizationLocalServiceUtil.getOrganization(organizationId);
      ancestors.addAll(organization.getAncestors());
    }
 catch (    Exception e) {
      _log.error("Error while indexing user " + userId,e);
    }
  }
  long[] ancestorOrganizationIds=new long[ancestors.size()];
  for (int i=0; i < ancestors.size(); i++) {
    Organization organization=ancestors.get(i);
    ancestorOrganizationIds[i]=organization.getOrganizationId();
  }
  return ancestorOrganizationIds;
}
