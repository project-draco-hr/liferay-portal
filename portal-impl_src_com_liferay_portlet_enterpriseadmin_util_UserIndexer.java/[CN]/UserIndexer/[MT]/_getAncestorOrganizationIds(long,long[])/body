{
  List<Organization> ancestorOrganizations=new ArrayList<Organization>();
  for (  long organizationId : organizationIds) {
    try {
      Organization organization=OrganizationLocalServiceUtil.getOrganization(organizationId);
      ancestorOrganizations.addAll(organization.getAncestors());
    }
 catch (    Exception e) {
      _log.error("Error while indexing user " + userId,e);
    }
  }
  long[] ancestorOrganizationIds=new long[ancestorOrganizations.size()];
  for (int i=0; i < ancestorOrganizations.size(); i++) {
    Organization ancestorOrganization=ancestorOrganizations.get(i);
    ancestorOrganizationIds[i]=ancestorOrganization.getOrganizationId();
  }
  return ancestorOrganizationIds;
}
