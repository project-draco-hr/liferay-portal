{
  if (attributeNames.contains(key)) {
    UnicodeProperties properties=expandoBridge.getAttributeProperties(key);
    if (GetterUtil.getBoolean(properties.getProperty(ExpandoBridgeIndexer.INDEXABLE))) {
      int type=expandoBridge.getAttributeType(key);
      if ((type == ExpandoColumnConstants.STRING) && (Validator.isNotNull((String)value))) {
        if (andSearch) {
          searchQuery.addRequiredTerm(key,(String)value,true);
        }
 else {
          searchQuery.addTerm(key,(String)value,true);
        }
      }
    }
  }
 else   if (Validator.isNotNull(key) && Validator.isNotNull(value)) {
    if (andSearch) {
      searchQuery.addRequiredTerm(key,String.valueOf(value));
    }
 else {
      searchQuery.addTerm(key,String.valueOf(value));
    }
  }
}
