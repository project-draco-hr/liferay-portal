{
  if (obj instanceof List<?>) {
    List<User> users=(List<User>)obj;
    for (    User user : users) {
      doReindex(user);
    }
  }
 else   if (obj instanceof Long) {
    long userId=(Long)obj;
    User user=UserLocalServiceUtil.getUserById(userId);
    doReindex(user);
  }
 else   if (obj instanceof long[]) {
    long[] userIds=(long[])obj;
    Map<Long,Map<String,Document>> documentsMap=new HashMap<Long,Map<String,Document>>();
    for (    long userId : userIds) {
      User user=UserLocalServiceUtil.getUserById(userId);
      if (user.isDefaultUser()) {
        continue;
      }
      Document document=getDocument(user);
      long companyId=user.getCompanyId();
      Map<String,Document> documents=documentsMap.get(companyId);
      if (documents == null) {
        documents=new HashMap<String,Document>();
        documentsMap.put(companyId,documents);
      }
      documents.put(document.get(Field.UID),document);
    }
    for (    Map.Entry<Long,Map<String,Document>> documenstEntry : documentsMap.entrySet()) {
      Map<String,Document> documents=documenstEntry.getValue();
      SearchEngineUtil.updateDocuments(documenstEntry.getKey(),documents);
    }
  }
 else   if (obj instanceof User) {
    User user=(User)obj;
    if (user.isDefaultUser()) {
      return;
    }
    Document document=getDocument(user);
    SearchEngineUtil.updateDocument(user.getCompanyId(),document.get(Field.UID),document);
  }
}
