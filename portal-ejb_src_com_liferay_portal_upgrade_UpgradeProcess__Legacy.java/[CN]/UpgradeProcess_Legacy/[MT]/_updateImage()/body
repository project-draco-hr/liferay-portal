{
  Iterator itr=ImageServiceUtil.getImageById("%.ig.%").iterator();
  while (itr.hasNext()) {
    Image image=(Image)itr.next();
    String oldImageId=image.getImageId();
    String newImageId=StringUtil.replace(oldImageId,".ig.",".image_gallery.");
    if (newImageId.endsWith(".tn")) {
      newImageId=newImageId.substring(0,newImageId.length() - 2) + "small";
    }
 else {
      newImageId=newImageId + ".large";
    }
    ImageServiceUtil.updateImage(newImageId,image.getTextObj());
    ImageServiceUtil.deleteImage(oldImageId);
  }
  itr=ImageServiceUtil.getImageById("%.s.%").iterator();
  while (itr.hasNext()) {
    Image image=(Image)itr.next();
    String oldImageId=image.getImageId();
    String newImageId=StringUtil.replace(oldImageId,".s.",".shopping.item.");
    ImageServiceUtil.updateImage(newImageId,image.getTextObj());
    ImageServiceUtil.deleteImage(oldImageId);
  }
}
