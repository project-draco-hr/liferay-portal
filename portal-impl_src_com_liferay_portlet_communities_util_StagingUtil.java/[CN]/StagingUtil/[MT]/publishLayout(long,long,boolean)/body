{
  Map<String,String[]> parameterMap=getStagingParameters();
  parameterMap.put(PortletDataHandlerKeys.DELETE_MISSING_LAYOUTS,new String[]{Boolean.FALSE.toString()});
  Layout layout=LayoutLocalServiceUtil.getLayout(plid);
  List<Layout> layouts=new ArrayList<Layout>();
  layouts.add(layout);
  layouts.addAll(getMissingParents(layout,liveGroupId));
  if (includeChildren) {
    layouts.addAll(layout.getAllChildren());
  }
  Iterator<Layout> itr=layouts.iterator();
  long[] layoutIds=new long[layouts.size()];
  for (int i=0; itr.hasNext(); i++) {
    Layout curLayout=itr.next();
    layoutIds[i]=curLayout.getLayoutId();
  }
  byte[] data=LayoutServiceUtil.exportLayouts(layout.getGroupId(),layout.isPrivateLayout(),layoutIds,parameterMap,null,null);
  ByteArrayInputStream bais=new ByteArrayInputStream(data);
  LayoutServiceUtil.importLayouts(liveGroupId,layout.isPrivateLayout(),parameterMap,bais);
}
