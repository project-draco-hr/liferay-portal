{
  byte[] data=LayoutServiceUtil.exportLayouts(sourceGroupId,privateLayout,exportParameterMap,null,null);
  ByteArrayInputStream bais=new ByteArrayInputStream(data);
  PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
  User user=UserLocalServiceUtil.getUser(permissionChecker.getUserId());
  InetAddress inetAddress=InetAddress.getByName(remoteAddress);
  if (inetAddress.isReachable(800)) {
    StringMaker sm=new StringMaker();
    sm.append(secure ? Http.HTTPS_WITH_SLASH : Http.HTTP_WITH_SLASH);
    sm.append(inetAddress.getHostAddress());
    sm.append(CharPool.COLON);
    sm.append(remotePort);
    HttpPrincipal httpPrincipal=new HttpPrincipal(sm.toString(),user.getUserId(),user.getPassword(),user.getPasswordEncrypted());
    LayoutServiceHttp.importLayouts(httpPrincipal,remoteGroupId,privateLayout,importParameterMap,bais);
  }
 else {
    throw new SystemException("Host " + inetAddress.getHostName() + " cannot be reached.");
  }
}
