{
  InetAddress inetAddress=InetAddress.getByName(remoteAddress);
  if (!inetAddress.isReachable(800)) {
    throw new SystemException("Host " + inetAddress.getHostName() + " cannot be reached");
  }
  PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
  User user=UserLocalServiceUtil.getUser(permissionChecker.getUserId());
  StringMaker sm=new StringMaker();
  if (secure) {
    sm.append(Http.HTTPS_WITH_SLASH);
  }
 else {
    sm.append(Http.HTTP_WITH_SLASH);
  }
  sm.append(inetAddress.getHostAddress());
  sm.append(StringPool.COLON);
  sm.append(remotePort);
  HttpPrincipal httpPrincipal=new HttpPrincipal(sm.toString(),user.getUserId(),user.getPassword(),user.getPasswordEncrypted());
  byte[] bytes=LayoutServiceUtil.exportLayouts(sourceGroupId,privateLayout,exportParameterMap,startDate,endDate);
  ByteArrayInputStream bais=new ByteArrayInputStream(bytes);
  LayoutServiceHttp.importLayouts(httpPrincipal,remoteGroupId,privateLayout,importParameterMap,bais);
}
