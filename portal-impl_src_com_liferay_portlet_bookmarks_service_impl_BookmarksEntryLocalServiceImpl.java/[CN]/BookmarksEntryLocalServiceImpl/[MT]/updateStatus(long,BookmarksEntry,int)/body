{
  int oldStatus=entry.getStatus();
  User user=userPersistence.findByPrimaryKey(userId);
  Date now=new Date();
  entry.setStatus(status);
  entry.setStatusByUserId(userId);
  entry.setStatusByUserName(user.getScreenName());
  entry.setStatusDate(now);
  bookmarksEntryPersistence.update(entry);
  if (status == WorkflowConstants.STATUS_APPROVED) {
    assetEntryLocalService.updateVisible(BookmarksEntry.class.getName(),entry.getEntryId(),true);
    socialActivityCounterLocalService.enableActivityCounters(BookmarksEntry.class.getName(),entry.getEntryId());
    socialActivityLocalService.addActivity(userId,entry.getGroupId(),BookmarksEntry.class.getName(),entry.getEntryId(),SocialActivityConstants.TYPE_RESTORE_FROM_TRASH,StringPool.BLANK,0);
  }
 else   if (status == WorkflowConstants.STATUS_IN_TRASH) {
    assetEntryLocalService.updateVisible(BookmarksEntry.class.getName(),entry.getEntryId(),false);
    socialActivityCounterLocalService.disableActivityCounters(BookmarksEntry.class.getName(),entry.getEntryId());
    socialActivityLocalService.addActivity(userId,entry.getGroupId(),BookmarksEntry.class.getName(),entry.getEntryId(),SocialActivityConstants.TYPE_MOVE_TO_TRASH,StringPool.BLANK,0);
  }
  if (oldStatus == WorkflowConstants.STATUS_IN_TRASH) {
    trashEntryLocalService.deleteEntry(BookmarksEntry.class.getName(),entry.getEntryId());
  }
 else   if (status == WorkflowConstants.STATUS_IN_TRASH) {
    trashEntryLocalService.addTrashEntry(userId,entry.getGroupId(),BookmarksEntry.class.getName(),entry.getEntryId(),oldStatus,null,null);
  }
  return entry;
}
