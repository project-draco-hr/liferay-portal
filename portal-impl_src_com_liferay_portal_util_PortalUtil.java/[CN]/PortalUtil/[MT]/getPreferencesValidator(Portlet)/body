{
  if (portlet.isWARFile()) {
    PortletContextWrapper pcw=PortletContextPool.get(portlet.getRootPortletId());
    return pcw.getPreferencesValidatorInstance();
  }
 else {
    PreferencesValidator prefsValidator=null;
    if (Validator.isNotNull(portlet.getPreferencesValidator())) {
      prefsValidator=(PreferencesValidator)InstancePool.get(portlet.getPreferencesValidator());
    }
    return prefsValidator;
  }
}
