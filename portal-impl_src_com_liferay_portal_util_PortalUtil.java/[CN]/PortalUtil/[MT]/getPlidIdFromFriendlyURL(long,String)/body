{
  String[] urlParts=friendlyURL.split("\\/",4);
  if ((friendlyURL.charAt(0) != CharPool.SLASH) && (urlParts.length != 4)) {
    return LayoutImpl.DEFAULT_PLID;
  }
  boolean privateLayout=true;
  String urlPrefix=StringPool.SLASH + urlParts[1];
  if (getPathFriendlyURLPublic().equals(urlPrefix)) {
    privateLayout=false;
  }
 else   if (getPathFriendlyURLPrivateGroup().equals(urlPrefix) || getPathFriendlyURLPrivateUser().equals(urlPrefix)) {
    privateLayout=true;
  }
 else {
    return LayoutImpl.DEFAULT_PLID;
  }
  Group group=null;
  try {
    long groupId=GetterUtil.getLong(urlParts[2]);
    group=GroupLocalServiceUtil.getGroup(groupId);
  }
 catch (  Exception e1) {
    try {
      group=GroupLocalServiceUtil.getFriendlyURLGroup(companyId,StringPool.SLASH + urlParts[2]);
    }
 catch (    Exception e2) {
    }
  }
  if (group != null) {
    Layout layout=null;
    try {
      long layoutId=GetterUtil.getLong(urlParts[3]);
      layout=LayoutLocalServiceUtil.getLayout(group.getGroupId(),privateLayout,layoutId);
      return layout.getPlid();
    }
 catch (    Exception e1) {
      try {
        layout=LayoutLocalServiceUtil.getFriendlyURLLayout(group.getGroupId(),privateLayout,StringPool.SLASH + urlParts[3]);
        return layout.getPlid();
      }
 catch (      Exception e2) {
      }
    }
  }
  return LayoutImpl.DEFAULT_PLID;
}
