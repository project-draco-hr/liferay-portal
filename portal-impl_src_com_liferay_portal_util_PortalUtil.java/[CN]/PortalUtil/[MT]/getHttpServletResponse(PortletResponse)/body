{
  if (res instanceof ActionResponseImpl) {
    ActionResponseImpl resImpl=(ActionResponseImpl)res;
    return resImpl.getHttpServletResponse();
  }
 else   if (res instanceof RenderResponseImpl) {
    RenderResponseImpl resImpl=(RenderResponseImpl)res;
    return resImpl.getHttpServletResponse();
  }
 else   if (res instanceof PortletResponseWrapper) {
    PortletResponseWrapper resWrapper=(PortletResponseWrapper)res;
    return getHttpServletResponse(resWrapper.getPortletResponse());
  }
 else   if (res instanceof RenderResponse) {
    RenderResponseImpl resImpl=getRenderResponseImpl((RenderResponse)res);
    return resImpl.getHttpServletResponse();
  }
 else {
    throw new RuntimeException("Unable to get the HTTP servlet resuest from " + res.getClass().getName());
  }
}
