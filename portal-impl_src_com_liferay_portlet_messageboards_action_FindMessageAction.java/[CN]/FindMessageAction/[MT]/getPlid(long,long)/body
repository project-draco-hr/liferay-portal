{
  if (plid != 0) {
    try {
      Layout layout=LayoutLocalServiceUtil.getLayout(plid);
      LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
      if (layoutTypePortlet.hasPortletId(PortletKeys.MESSAGE_BOARDS)) {
        return plid;
      }
    }
 catch (    NoSuchLayoutException nsle) {
    }
  }
  MBMessage message=MBMessageLocalServiceUtil.getMessage(messageId);
  long groupId=message.getCategory().getGroupId();
  boolean privateLayout=false;
  List<Layout> layouts=LayoutLocalServiceUtil.getLayouts(groupId,privateLayout);
  for (  Layout layout : layouts) {
    if (!layout.getType().equals(LayoutImpl.TYPE_PORTLET)) {
      continue;
    }
    LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
    if (layoutTypePortlet.hasPortletId(PortletKeys.MESSAGE_BOARDS)) {
      return layout.getPlid();
    }
  }
  throw new NoSuchLayoutException("No public page was found with the Blogs portlet.");
}
