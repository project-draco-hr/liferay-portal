{
  friendlyURLPath=friendlyURLPath.substring(getMapping().length() + 1);
  if (friendlyURLPath.endsWith(StringPool.SLASH)) {
    friendlyURLPath=friendlyURLPath.substring(0,friendlyURLPath.length() - 1);
  }
  Map<String,String> routeParameters=new HashMap<String,String>();
  if (!router.urlToParameters(friendlyURLPath,routeParameters)) {
    if (_log.isWarnEnabled()) {
      _log.warn("No route could be found to match URL " + friendlyURLPath);
    }
    return;
  }
  String portletId=getPortletId(routeParameters);
  if (Validator.isNull(portletId)) {
    return;
  }
  String namespace=PortalUtil.getPortletNamespace(portletId);
  addParameter(namespace,parameterMap,"p_p_id",portletId);
  populateParams(parameterMap,namespace,routeParameters);
}
