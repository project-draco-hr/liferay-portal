{
  friendlyURLPath=friendlyURLPath.substring(getMapping().length() + 1);
  if (friendlyURLPath.endsWith(StringPool.SLASH)) {
    friendlyURLPath=friendlyURLPath.substring(0,friendlyURLPath.length() - 1);
  }
  Map<String,String> routeParameters=new HashMap<>();
  if (!router.urlToParameters(friendlyURLPath,routeParameters)) {
    if (_log.isWarnEnabled()) {
      _log.warn("No route could be found to match URL " + friendlyURLPath);
    }
    return;
  }
  String namespace=null;
  String portletInstanceKey=getPortletId(routeParameters);
  if (Validator.isNotNull(portletInstanceKey)) {
    namespace=PortalUtil.getPortletNamespace(portletInstanceKey);
    addParameter(namespace,parameterMap,"p_p_id",portletInstanceKey);
  }
 else   if (isAllPublicRenderParameters(routeParameters)) {
    addParameter(null,parameterMap,"p_p_id",getPortletId());
  }
 else {
    return;
  }
  populateParams(parameterMap,namespace,routeParameters);
}
