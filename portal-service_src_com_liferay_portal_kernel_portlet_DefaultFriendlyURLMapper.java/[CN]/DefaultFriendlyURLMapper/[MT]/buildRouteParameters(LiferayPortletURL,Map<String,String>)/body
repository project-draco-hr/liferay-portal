{
  Map<String,String[]> portletURLParameters=liferayPortletURL.getParameterMap();
  for (  Map.Entry<String,String[]> entry : portletURLParameters.entrySet()) {
    String[] values=entry.getValue();
    if (values.length > 0) {
      routeParameters.put(entry.getKey(),values[0]);
    }
  }
  if (isPortletInstanceable()) {
    String portletInstanceKey=liferayPortletURL.getPortletId();
    routeParameters.put("p_p_id",portletInstanceKey);
    if (Validator.isNotNull(portletInstanceKey) && PortletConstants.hasInstanceId(portletInstanceKey)) {
      routeParameters.put("instanceId",PortletConstants.getInstanceId(portletInstanceKey));
    }
  }
  routeParameters.putAll(liferayPortletURL.getReservedParameterMap());
}
