{
  columnId=GetterUtil.getString(columnId);
  if (columnPos == null) {
    columnPos=new Integer(0);
  }
  if (columnCount == null) {
    columnCount=new Integer(0);
  }
  req.setAttribute(WebKeys.RENDER_PORTLET,portlet);
  req.setAttribute(WebKeys.RENDER_PORTLET_COLUMN_ID,columnId);
  req.setAttribute(WebKeys.RENDER_PORTLET_COLUMN_POS,columnPos);
  req.setAttribute(WebKeys.RENDER_PORTLET_COLUMN_COUNT,columnCount);
  if (path == null) {
    path="/html/portal/render_portlet.jsp";
  }
  RequestDispatcher rd=ctx.getRequestDispatcher(path);
  if (sb != null) {
    StringServletResponse stringServletRes=new StringServletResponse(res);
    rd.include(req,stringServletRes);
    sb.append(stringServletRes.getString());
  }
 else {
    String strutsCharEncoding=PropsUtil.get(PropsUtil.STRUTS_CHAR_ENCODING);
    req.setCharacterEncoding(strutsCharEncoding);
    res.setContentType(Constants.TEXT_HTML + "; charset=UTF-8");
    rd.include(req,res);
  }
}
