{
  if (!isLayoutFriendliable(layout)) {
    return null;
  }
  String layoutFriendlyURL=layout.getFriendlyURL();
  if (Validator.isNotNull(layoutFriendlyURL)) {
    LayoutSet layoutSet=layout.getLayoutSet();
    if (Validator.isNotNull(layoutSet.getVirtualHost())) {
      String portalURL=PortalUtil.getPortalURL(layoutSet.getVirtualHost(),themeDisplay.getServerPort(),themeDisplay.isSecure());
      return portalURL + layoutFriendlyURL;
    }
    Group group=GroupLocalServiceUtil.getGroup(layout.getGroupId());
    String parentFriendlyURL=group.getFriendlyURL();
    if (Validator.isNotNull(parentFriendlyURL)) {
      String friendlyURL=null;
      if (layout.isPrivateLayout()) {
        friendlyURL=themeDisplay.getPathFriendlyURLPrivate();
      }
 else {
        friendlyURL=themeDisplay.getPathFriendlyURLPublic();
      }
      return friendlyURL + parentFriendlyURL + layoutFriendlyURL;
    }
  }
  return null;
}
