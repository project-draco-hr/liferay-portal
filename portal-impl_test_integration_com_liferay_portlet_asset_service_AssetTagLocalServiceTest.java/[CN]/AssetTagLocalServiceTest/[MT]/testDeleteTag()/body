{
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(_group.getGroupId(),TestPropsValues.getUserId());
  AssetTag assetTag=AssetTagLocalServiceUtil.addTag(TestPropsValues.getUserId(),_group.getGroupId(),"Tag",serviceContext);
  serviceContext.setAssetTagNames(new String[]{assetTag.getName()});
  BlogsEntry blogsEntry=BlogsEntryLocalServiceUtil.addEntry(TestPropsValues.getUserId(),"Test",RandomTestUtil.randomString(),serviceContext);
  TestAssetIndexer testAssetIndexer=new TestAssetIndexer();
  testAssetIndexer.setExpectedValues(BlogsEntry.class.getName(),blogsEntry.getEntryId());
  IndexerRegistryUtil.register(testAssetIndexer);
  AssetTagLocalServiceUtil.deleteTag(assetTag);
  AssetTag fetchAssetTag=AssetTagLocalServiceUtil.fetchAssetTag(assetTag.getTagId());
  Assert.assertNull(fetchAssetTag);
  long classNameId=PortalUtil.getClassNameId(BlogsEntry.class);
  AssetTagStats tagStats=AssetTagStatsLocalServiceUtil.getTagStats(assetTag.getTagId(),classNameId);
  Assert.assertEquals(0,tagStats.getAssetCount());
}
