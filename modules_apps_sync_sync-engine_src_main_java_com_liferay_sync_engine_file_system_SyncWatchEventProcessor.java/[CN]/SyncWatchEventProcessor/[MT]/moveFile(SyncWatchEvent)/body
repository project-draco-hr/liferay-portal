{
  Path targetFilePath=Paths.get(syncWatchEvent.getFilePathName());
  if (FileUtil.notExists(targetFilePath) || sanitizeFileName(targetFilePath) || isInErrorState(targetFilePath)) {
    return;
  }
  Path parentTargetFilePath=targetFilePath.getParent();
  SyncFile parentSyncFile=SyncFileService.fetchSyncFile(parentTargetFilePath.toString());
  if ((parentSyncFile == null) || (!parentSyncFile.isSystem() && (parentSyncFile.getTypePK() == 0))) {
    queueSyncWatchEvent(parentTargetFilePath.toString(),syncWatchEvent);
    return;
  }
  Path sourceFilePath=Paths.get(syncWatchEvent.getPreviousFilePathName());
  SyncFile sourceSyncFile=SyncFileService.fetchSyncFile(sourceFilePath.toString());
  SyncFile targetSyncFile=SyncFileService.fetchSyncFile(targetFilePath.toString());
  if ((sourceSyncFile == null) || (targetSyncFile != null)) {
    if (Files.isDirectory(targetFilePath)) {
      addFolder(syncWatchEvent);
    }
 else {
      addFile(syncWatchEvent);
    }
    return;
  }
 else   if (isPendingTypePK(sourceSyncFile)) {
    queueSyncWatchEvent(sourceSyncFile.getFilePathName(),syncWatchEvent);
    return;
  }
  String fileType=sourceSyncFile.getType();
  if (fileType.equals(SyncFile.TYPE_FILE)) {
    SyncFileService.moveFileSyncFile(targetFilePath,parentSyncFile.getTypePK(),_syncAccountId,sourceSyncFile);
  }
 else {
    SyncFileService.moveFolderSyncFile(targetFilePath,parentSyncFile.getTypePK(),_syncAccountId,sourceSyncFile);
  }
  renameFile(syncWatchEvent);
}
