{
  User user=getUser(actionRequest);
  if (PropsValues.USERS_REMINDER_QUERIES_ENABLED) {
    String answer=ParamUtil.getString(actionRequest,"answer");
    if (!user.getReminderQueryAnswer().equals(answer)) {
      throw new UserReminderQueryException();
    }
  }
  PortletPreferences preferences=actionRequest.getPreferences();
  String languageId=LanguageUtil.getLanguageId(actionRequest);
  String emailFromName=preferences.getValue("emailFromName",null);
  String emailFromAddress=preferences.getValue("emailFromAddress",null);
  String emailToAddress=user.getEmailAddress();
  String subject=preferences.getValue("emailPasswordSentSubject_" + languageId,null);
  String body=preferences.getValue("emailPasswordSentBody_" + languageId,null);
  LoginUtil.sendPassword(actionRequest,emailFromName,emailFromAddress,emailToAddress,subject,body);
  sendRedirect(actionRequest,actionResponse);
}
