{
  PortletPreferences preferences=actionRequest.getPreferences();
  if (PropsValues.USERS_REMINDER_QUERIES_ENABLED) {
    User user=getUser(actionRequest);
    String answer=ParamUtil.getString(actionRequest,"answer");
    if (!user.getReminderQueryAnswer().equals(answer)) {
      throw new UserReminderQueryException();
    }
  }
 else   if (PropsValues.CAPTCHA_CHECK_PORTAL_SEND_PASSWORD) {
    CaptchaUtil.check(actionRequest);
  }
  String languageId=LanguageUtil.getLanguageId(actionRequest);
  String emailFromName=preferences.getValue("emailFromName",null);
  String emailFromAddress=preferences.getValue("emailFromAddress",null);
  String subject=preferences.getValue("emailPasswordSentSubject_" + languageId,null);
  String body=preferences.getValue("emailPasswordSentBody_" + languageId,null);
  LoginUtil.sendPassword(actionRequest,emailFromName,emailFromAddress,subject,body);
  sendRedirect(actionRequest,actionResponse);
}
