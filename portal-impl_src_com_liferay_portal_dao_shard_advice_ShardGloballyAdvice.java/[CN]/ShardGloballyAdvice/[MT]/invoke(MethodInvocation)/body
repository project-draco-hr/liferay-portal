{
  Object returnValue=null;
  _shardAdvice.setGlobalCall(new Object());
  try {
    for (    String shardName : ShardUtil.getAvailableShardNames()) {
      if (_log.isInfoEnabled()) {
        _log.info("Invoking shard " + shardName + " for "+ methodInvocation.toString());
      }
      ShardUtil.setTargetSource(shardName);
      _shardAdvice.pushCompanyService(shardName);
      try {
        Object value=methodInvocation.proceed();
        if (shardName.equals(ShardUtil.getDefaultShardName())) {
          returnValue=value;
        }
      }
  finally {
        _shardAdvice.popCompanyService();
        CacheRegistryUtil.clear();
      }
    }
  }
  finally {
    _shardAdvice.setGlobalCall(null);
  }
  return returnValue;
}
