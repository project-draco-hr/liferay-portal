{
  long entryItemId=ParamUtil.getLong(actionRequest,"entryItemId");
  long entryId=ParamUtil.getLong(actionRequest,"entryId");
  DDLEntry entry=DDLEntryLocalServiceUtil.getEntry(entryId);
  DDMStructure ddmStructure=entry.getDDMStructure();
  Set<String> fieldNames=ddmStructure.getFieldNames();
  Fields fields=new Fields();
  for (  String name : fieldNames) {
    Field field=new Field();
    field.setName(name);
    String value=ParamUtil.getString(actionRequest,name);
    field.setValue(value);
    fields.put(field);
  }
  ServiceContext serviceContext=ServiceContextFactory.getInstance(DDLEntryItem.class.getName(),actionRequest);
  DDLEntryItem entryItem=null;
  if (entryItemId <= 0) {
    entryItem=DDLEntryItemLocalServiceUtil.addEntryItem(entryId,fields,serviceContext);
  }
 else {
    entryItem=DDLEntryItemLocalServiceUtil.updateEntryItem(entryItemId,fields,serviceContext);
  }
  return entryItem;
}
