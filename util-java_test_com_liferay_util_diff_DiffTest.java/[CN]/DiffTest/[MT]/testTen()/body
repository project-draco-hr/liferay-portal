{
  StringReader reader1=new StringReader("aaa\nbbb\nccc\n\n\nywy");
  StringReader reader2=new StringReader("bbb\nccc\naaa\n\n\nyyy");
  List results=DiffUtil.diff(reader1,reader2);
  List expected=new ArrayList();
  List changedLines=new ArrayList();
  changedLines.add(DiffUtil.OPEN_DEL + "aaa" + DiffUtil.CLOSE_DEL);
  expected.add(new DiffResult(DiffResult.SOURCE,0,changedLines));
  changedLines=new ArrayList();
  changedLines.add(DiffUtil.OPEN_ADD + "aaa" + DiffUtil.CLOSE_ADD);
  expected.add(new DiffResult(DiffResult.TARGET,2,changedLines));
  changedLines=new ArrayList();
  changedLines.add("y" + DiffUtil.OPEN_DEL + "w"+ DiffUtil.CLOSE_DEL+ "y");
  expected.add(new DiffResult(DiffResult.SOURCE,5,changedLines));
  changedLines=new ArrayList();
  changedLines.add("y" + DiffUtil.OPEN_ADD + "y"+ DiffUtil.CLOSE_ADD+ "y");
  expected.add(new DiffResult(DiffResult.TARGET,5,changedLines));
  assertEquals(results,expected);
}
