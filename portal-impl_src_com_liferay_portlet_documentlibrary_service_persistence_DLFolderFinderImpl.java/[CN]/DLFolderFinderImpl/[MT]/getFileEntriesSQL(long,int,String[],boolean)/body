{
  StringBundler sb=new StringBundler();
  String sql=null;
  if (status == WorkflowConstants.STATUS_ANY) {
    sql=CustomSQLUtil.get(COUNT_FE_BY_G_F);
  }
 else {
    sql=CustomSQLUtil.get(COUNT_FE_BY_G_F_S);
    if ((inlineSQLHelper && InlineSQLHelperUtil.isEnabled(groupId)) || ((mimeTypes != null) && (mimeTypes.length > 0))) {
      sql=StringUtil.replace(sql,"[$JOIN$]",CustomSQLUtil.get(JOIN_FV_BY_DL_FILE_ENTRY));
    }
 else {
      sql=StringUtil.replace(sql,"[$JOIN$]","");
    }
  }
  if (inlineSQLHelper) {
    sql=InlineSQLHelperUtil.replacePermissionCheck(sql,DLFileEntry.class.getName(),"DLFileEntry.fileEntryId",groupId);
  }
  sb.append(sql);
  if ((mimeTypes != null) && (mimeTypes.length > 0)) {
    sb.append(WHERE_AND);
    sb.append(StringPool.OPEN_PARENTHESIS);
    sb.append(getMimeTypes(mimeTypes,"DLFileEntry"));
    sb.append(StringPool.CLOSE_PARENTHESIS);
  }
  return sb.toString();
}
