{
  BundleWiring bundleWiring=bundle.adapt(BundleWiring.class);
  List<String> resourcePaths=new ArrayList<>(bundleWiring.listResources("/META-INF/","*.tld",BundleWiring.LISTRESOURCES_RECURSE));
  resourcePaths.addAll(bundleWiring.listResources("/WEB-INF/","*.tld",BundleWiring.LISTRESOURCES_RECURSE));
  for (  String resourcePath : resourcePaths) {
    URL url=bundle.getResource(resourcePath);
    String uri=TldURIUtil.getTldURI(url);
    if (uri != null) {
      tldMappings.put(uri,new String[]{"/" + resourcePath,null});
    }
  }
}
