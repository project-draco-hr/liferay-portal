{
  BundleContext bundleContext=_jspBundle.getBundleContext();
  _logger=new Logger(bundleContext);
  ServletContext servletContext=jspCompilationContext.getServletContext();
  ClassLoader classLoader=servletContext.getClassLoader();
  if (!(classLoader instanceof JspBundleClassloader)) {
    throw new IllegalStateException("Class loader is not an instance of JspBundleClassloader");
  }
  JspBundleClassloader jspBundleClassloader=(JspBundleClassloader)classLoader;
  _allParticipatingBundles=jspBundleClassloader.getBundles();
  _bundle=_allParticipatingBundles[0];
  _javaFileObjectResolver=new JspJavaFileObjectResolver(_bundle,_jspBundle,_logger);
  jspCompilationContext.setClassLoader(jspBundleClassloader);
  initClassPath(servletContext);
  initTLDMappings(servletContext);
  super.init(jspCompilationContext,errorDispatcher,suppressLogging);
}
