{
  List<ResourcePermission> resourcePermissions=resourcePermissionPersistence.findByC_N_S(companyId,oldClassName,scope);
  for (  ResourcePermission resourcePermission : resourcePermissions) {
    long roleId=resourcePermission.getRoleId();
    long actionIds=convertActionId(resourcePermission,oldClassName,oldAction,newClassName,newAction);
    if (scope == ResourceConstants.SCOPE_GROUP) {
      resourceBlockLocalService.addGroupScopePermissions(companyId,GetterUtil.getLong(resourcePermission.getPrimKey()),newClassName,roleId,actionIds);
    }
 else {
      resourceBlockLocalService.addCompanyScopePermissions(companyId,newClassName,roleId,actionIds);
    }
  }
}
