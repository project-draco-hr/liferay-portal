{
  if (parentMessageId == MBMessageConstants.DEFAULT_PARENT_MESSAGE_ID) {
    rootMessageId=messageId;
  }
 else {
    rootMessageId=importMBMessage(rootMessageId,threadId,classPK,mbMessageIds);
    parentMessageId=importMBMessage(parentMessageId,threadId,classPK,mbMessageIds);
  }
  MBMessage mbMessage=mbMessagePersistence.create(messageId);
  mbMessage.setUuid(uuid);
  mbMessage.setGroupId(groupId);
  mbMessage.setCompanyId(companyId);
  mbMessage.setUserId(userId);
  mbMessage.setUserName(userName);
  mbMessage.setCreateDate(createDate);
  mbMessage.setModifiedDate(modifiedDate);
  mbMessage.setClassNameId(classNameId);
  mbMessage.setClassPK(classPK);
  mbMessage.setCategoryId(categoryId);
  mbMessage.setThreadId(threadId);
  mbMessage.setRootMessageId(rootMessageId);
  mbMessage.setParentMessageId(parentMessageId);
  mbMessage.setSubject(subject);
  mbMessage.setBody(body);
  mbMessage.setFormat(format);
  mbMessage.setAnonymous(anonymous);
  mbMessage.setPriority(priority);
  mbMessage.setAllowPingbacks(allowPingbacks);
  mbMessage.setAnswer(answer);
  mbMessage.setStatus(status);
  mbMessage.setStatusByUserId(statusByUserId);
  mbMessage.setStatusByUserName(statusByUserName);
  mbMessage.setStatusDate(statusDate);
  mbMessagePersistence.update(mbMessage);
}
