{
  for (  Entry<String,FilterDefinition> filterEntry : fragmentFilters.entrySet()) {
    String filterName=filterEntry.getKey();
    if (!assembledFilters.containsKey(filterName)) {
      assembledFilters.put(filterName,filterEntry.getValue());
    }
 else {
      FilterDefinition webXMLFilterDefinition=webXMLFilters.get(filterName);
      FilterDefinition fragmentFilterDefinition=filterEntry.getValue();
      Map<String,String> webXMLFilterParams=null;
      if (webXMLFilterDefinition != null) {
        webXMLFilterParams=webXMLFilterDefinition.getInitParameters();
      }
      Map<String,String> fragmentFilterParams=fragmentFilterDefinition.getInitParameters();
      FilterDefinition assembledFilterDefinition=assembledFilters.get(filterName);
      Map<String,String> assembledInitParams=assembledFilterDefinition.getInitParameters();
      for (      Entry<String,String> initParamEntry : fragmentFilterParams.entrySet()) {
        String initParamName=initParamEntry.getKey();
        String initParamValue=initParamEntry.getValue();
        String assembledInitParamValue=assembledInitParams.get(initParamName);
        String webXMLInitParamValue=null;
        if (webXMLFilterParams != null) {
          webXMLInitParamValue=webXMLFilterParams.get(initParamName);
        }
        if (Validator.isNull(assembledInitParamValue)) {
          if ((webXMLInitParamValue == null) && !Validator.equals(assembledInitParamValue,initParamValue)) {
            throw new Exception("Conflicts for " + initParamName + " in filter "+ filterName);
          }
 else {
            assembledInitParams.put(initParamName,initParamValue);
          }
        }
      }
      List<String> assembledFilterDispatchers=assembledFilterDefinition.getDispatchers();
      List<String> fragmentDispatchers=fragmentFilterDefinition.getDispatchers();
      for (      String dispatcher : fragmentDispatchers) {
        if (!assembledFilterDispatchers.contains(dispatcher)) {
          assembledFilterDispatchers.add(dispatcher);
        }
      }
      List<String> assembledFilterServlets=assembledFilterDefinition.getServletNames();
      List<String> fragmentFilterServlets=fragmentFilterDefinition.getServletNames();
      for (      String servletName : fragmentFilterServlets) {
        if (!assembledFilterServlets.contains(servletName)) {
          assembledFilterServlets.add(servletName);
        }
      }
      List<String> assembledFilterURLPatterns=assembledFilterDefinition.getURLPatterns();
      List<String> fragmentFilterURLPatterns=fragmentFilterDefinition.getURLPatterns();
      for (      String urlPattern : fragmentFilterURLPatterns) {
        if (!assembledFilterURLPatterns.contains(urlPattern)) {
          assembledFilterURLPatterns.add(urlPattern);
        }
      }
    }
  }
}
