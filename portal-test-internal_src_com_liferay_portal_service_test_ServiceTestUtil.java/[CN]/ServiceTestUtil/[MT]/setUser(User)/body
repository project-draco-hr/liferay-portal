{
  if (user == null) {
    return;
  }
  PrincipalThreadLocal.setName(user.getUserId());
  PermissionChecker permissionChecker=PermissionCheckerFactoryUtil.create(user);
  PermissionThreadLocal.setPermissionChecker(permissionChecker);
}
