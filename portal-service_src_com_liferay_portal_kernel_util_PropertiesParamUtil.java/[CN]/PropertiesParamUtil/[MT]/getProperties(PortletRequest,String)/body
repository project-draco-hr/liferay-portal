{
  UnicodeProperties properties=new UnicodeProperties(true);
  Map<String,String[]> parameterMap=portletRequest.getParameterMap();
  List<String> params=filterParams(prefix,ListUtil.fromCollection(parameterMap.keySet()),null);
  for (  String param : params) {
    String[] values=portletRequest.getParameterValues(param);
    String value=StringUtil.merge(values);
    properties.setProperty(getKey(param,prefix),value);
  }
  String checkboxNames=ParamUtil.getString(portletRequest,"checkboxNames");
  addCheckboxValues(properties,params,prefix,checkboxNames);
  return properties;
}
