{
  String languageId=ParamUtil.getString(req,"languageId");
  if (Validator.isNotNull(languageId)) {
    return languageId;
  }
  Locale locale=(Locale)req.getSession().getAttribute(Globals.LOCALE_KEY);
  if (locale == null) {
    languageId=CookieKeys.getCookie(req,CookieKeys.GUEST_LANGUAGE_ID);
    if (Validator.isNotNull(languageId)) {
      locale=LocaleUtil.fromLanguageId(languageId);
    }
  }
  return getLanguageId(locale);
}
