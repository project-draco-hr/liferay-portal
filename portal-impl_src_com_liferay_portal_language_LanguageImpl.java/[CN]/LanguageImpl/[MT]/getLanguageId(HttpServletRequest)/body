{
  String languageId=ParamUtil.getString(request,"languageId");
  if (Validator.isNotNull(languageId)) {
    if (_languageCodeLocalesMap.containsKey(languageId) || _charEncodings.contains(languageId)) {
      return languageId;
    }
  }
  Locale locale=PortalUtil.getLocale(request);
  return getLanguageId(locale);
}
