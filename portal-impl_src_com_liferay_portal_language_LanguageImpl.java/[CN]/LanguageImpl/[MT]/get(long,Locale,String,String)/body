{
  if (key == null) {
    return null;
  }
  String value=null;
  try {
    MessageResources resources=(MessageResources)WebAppPool.get(String.valueOf(companyId),Globals.MESSAGES_KEY);
    if (resources == null) {
      ResourceBundle bundle=ResourceBundle.getBundle("content/Language",locale);
      value=bundle.getString(key);
    }
 else {
      value=resources.getMessage(locale,key);
    }
  }
 catch (  Exception e) {
    if (_log.isWarnEnabled()) {
      _log.warn(e,e);
    }
  }
  if (value == null) {
    value=defaultValue;
  }
  return value;
}
