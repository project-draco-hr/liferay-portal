{
  Locale[] locales=LanguageUtil.getAvailableLocales();
  for (int i=0; i < locales.length; i++) {
    String languageId=LocaleUtil.toLanguageId(locales[i]);
    String[] ranks=StringUtil.split(ParamUtil.getString(actionRequest,"ranks_" + languageId),StringPool.NEW_LINE);
    Map<String,String> map=new TreeMap<String,String>();
    for (int j=0; j < ranks.length; j++) {
      String[] kvp=StringUtil.split(ranks[j],StringPool.EQUAL);
      String kvpName=kvp[0];
      String kvpValue=kvp[1];
      map.put(kvpValue,kvpName);
    }
    ranks=new String[map.size()];
    int count=0;
    Iterator<Map.Entry<String,String>> itr=map.entrySet().iterator();
    while (itr.hasNext()) {
      Map.Entry<String,String> entry=itr.next();
      String kvpValue=entry.getKey();
      String kvpName=entry.getValue();
      ranks[count++]=kvpName + StringPool.EQUAL + kvpValue;
    }
    LocalizationUtil.setPreferencesValues(preferences,"ranks",languageId,ranks);
  }
}
