{
  int patternLength=pattern.length();
  int i=0;
  int j=0;
  while (i < length && j < patternLength) {
    if ((j == -1) || (text.charAt(i + offset) == pattern.charAt(j)) || (text.charAt(i + offset) == Character.toUpperCase(pattern.charAt(j)))) {
      i++;
      j++;
    }
 else {
      j=nexts[j];
    }
  }
  if (j >= patternLength) {
    return i - patternLength + offset;
  }
 else {
    return -1;
  }
}
