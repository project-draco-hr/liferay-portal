{
  LayoutTypePortlet layoutTypePortlet=getLayoutTypePortlet();
  Layout layout=layoutTypePortlet.getLayout();
  User user=UserTestUtil.addUser(RandomTestUtil.randomString(),layout.getGroupId());
  String portletId=layoutTypePortlet.addPortletId(user.getUserId(),PortletKeys.JOURNAL_CONTENT);
  List<Portlet> portlets=layoutTypePortlet.getAllPortlets();
  Assert.assertEquals(1,portlets.size());
  Portlet portlet=PortletLocalServiceUtil.getPortletById(TestPropsValues.getCompanyId(),portletId);
  PortletInstanceFactoryUtil.destroy(portlet);
  portlets=layoutTypePortlet.getAllPortlets();
  Assert.assertEquals(0,portlets.size());
}
