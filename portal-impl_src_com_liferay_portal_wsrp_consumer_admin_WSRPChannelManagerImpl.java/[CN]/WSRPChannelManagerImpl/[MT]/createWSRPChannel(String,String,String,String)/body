{
  try {
    String portletId=PortalUtil.getJsSafePortletId(channelName);
    Portlet remotePortletModel=new PortletImpl(CompanyConstants.SYSTEM,portletId);
    remotePortletModel.setRemote(true);
    remotePortletModel.setProducerEntityId(producerEntityId);
    remotePortletModel.setConsumerId(consumerId);
    remotePortletModel.setRemotePortletHandle(portletHandle);
    remotePortletModel.setRemotePortletId(channelName);
    remotePortletModel.setPortletId(portletId);
    remotePortletModel.setPortletName(portletId);
    remotePortletModel.setActive(true);
    remotePortletModel.setTimestamp(System.currentTimeMillis());
    _addPortletInfo(remotePortletModel,producerEntityId,portletHandle);
    _persistRemotePortlet(remotePortletModel);
    PortletLocalServiceUtil.deployRemotePortlet(remotePortletModel);
  }
 catch (  Exception ex) {
    _log.error(ex);
  }
}
