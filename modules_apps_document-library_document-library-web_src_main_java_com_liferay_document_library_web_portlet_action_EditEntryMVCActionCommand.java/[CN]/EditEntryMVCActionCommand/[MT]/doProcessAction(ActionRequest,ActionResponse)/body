{
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  try {
    if (cmd.equals(Constants.CANCEL_CHECKOUT)) {
      cancelCheckedOutEntries(actionRequest);
    }
 else     if (cmd.equals(Constants.CHECKIN)) {
      checkInEntries(actionRequest);
    }
 else     if (cmd.equals(Constants.CHECKOUT)) {
      checkOutEntries(actionRequest);
    }
 else     if (cmd.equals(Constants.DELETE)) {
      deleteEntries(actionRequest,false);
    }
 else     if (cmd.equals(Constants.MOVE)) {
      moveEntries(actionRequest);
    }
 else     if (cmd.equals(Constants.MOVE_TO_TRASH)) {
      deleteEntries(actionRequest,true);
    }
 else     if (cmd.equals(Constants.RESTORE)) {
      restoreTrashEntries(actionRequest);
    }
    WindowState windowState=actionRequest.getWindowState();
    if (windowState.equals(LiferayWindowState.POP_UP)) {
      String redirect=PortalUtil.escapeRedirect(ParamUtil.getString(actionRequest,"redirect"));
      if (Validator.isNotNull(redirect)) {
        sendRedirect(actionRequest,actionResponse,redirect);
      }
    }
  }
 catch (  DuplicateLockException|NoSuchFileEntryException|NoSuchFolderException|PrincipalException e) {
    if (e instanceof DuplicateLockException) {
      DuplicateLockException dle=(DuplicateLockException)e;
      SessionErrors.add(actionRequest,dle.getClass(),dle.getLock());
    }
 else {
      SessionErrors.add(actionRequest,e.getClass());
    }
    actionResponse.setRenderParameter("mvcPath","/document_library/error.jsp");
  }
catch (  DuplicateFileEntryException|DuplicateFolderNameException|SourceFileNameException e) {
    if (e instanceof DuplicateFileEntryException) {
      HttpServletResponse response=PortalUtil.getHttpServletResponse(actionResponse);
      response.setStatus(ServletResponseConstants.SC_DUPLICATE_FILE_EXCEPTION);
    }
    SessionErrors.add(actionRequest,e.getClass());
  }
catch (  AssetCategoryException|AssetTagException|InvalidFolderException e) {
    SessionErrors.add(actionRequest,e.getClass(),e);
  }
catch (  Exception e) {
    throw new PortletException(e);
  }
}
