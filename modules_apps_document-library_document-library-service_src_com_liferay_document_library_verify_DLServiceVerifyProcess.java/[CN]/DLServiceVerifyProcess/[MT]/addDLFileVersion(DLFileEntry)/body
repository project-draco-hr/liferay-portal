{
  long fileVersionId=_counterLocalService.increment();
  DLFileVersion dlFileVersion=_dlFileVersionLocalService.createDLFileVersion(fileVersionId);
  dlFileVersion.setGroupId(dlFileEntry.getGroupId());
  dlFileVersion.setCompanyId(dlFileEntry.getCompanyId());
  long userId=dlFileEntry.getUserId();
  dlFileVersion.setUserId(userId);
  String userName=dlFileEntry.getUserName();
  dlFileVersion.setUserName(userName);
  dlFileVersion.setCreateDate(dlFileEntry.getModifiedDate());
  dlFileVersion.setModifiedDate(dlFileEntry.getModifiedDate());
  dlFileVersion.setRepositoryId(dlFileEntry.getRepositoryId());
  dlFileVersion.setFolderId(dlFileEntry.getFolderId());
  dlFileVersion.setFileEntryId(dlFileEntry.getFileEntryId());
  dlFileVersion.setExtension(dlFileEntry.getExtension());
  dlFileVersion.setMimeType(dlFileEntry.getMimeType());
  dlFileVersion.setTitle(dlFileEntry.getTitle());
  dlFileVersion.setDescription(dlFileEntry.getDescription());
  dlFileVersion.setExtraSettings(dlFileEntry.getExtraSettings());
  dlFileVersion.setFileEntryTypeId(dlFileEntry.getFileEntryTypeId());
  dlFileVersion.setVersion(dlFileEntry.getVersion());
  dlFileVersion.setSize(dlFileEntry.getSize());
  dlFileVersion.setStatus(WorkflowConstants.STATUS_APPROVED);
  dlFileVersion.setStatusByUserId(userId);
  dlFileVersion.setStatusByUserName(userName);
  dlFileVersion.setStatusDate(new Date());
  _dlFileVersionLocalService.updateDLFileVersion(dlFileVersion);
}
