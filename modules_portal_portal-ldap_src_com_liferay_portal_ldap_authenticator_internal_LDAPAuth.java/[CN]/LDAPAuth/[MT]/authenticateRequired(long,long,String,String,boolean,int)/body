{
  if (allowOmniadmin && (authenticateOmniadmin(companyId,emailAddress,screenName,userId) == SUCCESS)) {
    return SUCCESS;
  }
  LDAPAuthConfiguration ldapAuthConfiguration=_ldapAuthConfigurationProvider.getConfiguration(companyId);
  if (ldapAuthConfiguration.required()) {
    return failureCode;
  }
 else {
    return SUCCESS;
  }
}
