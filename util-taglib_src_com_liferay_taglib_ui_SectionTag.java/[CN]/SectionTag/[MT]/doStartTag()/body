{
  TabsTag tabsTag=(TabsTag)findAncestorWithClass(this,TabsTag.class);
  if (tabsTag == null) {
    throw new JspException();
  }
  try {
    ServletRequest req=pageContext.getRequest();
    RenderResponse renderResponse=(RenderResponse)req.getAttribute(JavaConstants.JAVAX_PORTLET_RESPONSE);
    String namespace=StringPool.BLANK;
    if (renderResponse != null) {
      namespace=renderResponse.getNamespace();
    }
    String sectionParam=tabsTag.getParam();
    String sectionName=tabsTag.getSectionName();
    Boolean sectionSelected=new Boolean(tabsTag.getSectionSelected());
    String sectionScroll=namespace + sectionParam + "TabsScroll";
    String sectionRedirectParams="&scroll=" + sectionScroll + "&"+ sectionParam+ "="+ sectionName;
    tabsTag.incrementSection();
    req.setAttribute("liferay-ui:section:param",sectionParam);
    req.setAttribute("liferay-ui:section:name",sectionName);
    req.setAttribute("liferay-ui:section:selected",sectionSelected);
    req.setAttribute("liferay-ui:section:scroll",sectionScroll);
    pageContext.setAttribute("sectionSelected",sectionSelected);
    pageContext.setAttribute("sectionParam",sectionParam);
    pageContext.setAttribute("sectionName",sectionName);
    pageContext.setAttribute("sectionScroll",sectionScroll);
    pageContext.setAttribute("sectionRedirectParams",sectionRedirectParams);
    if (!tabsTag.isRefresh() || sectionSelected.booleanValue()) {
      if (!tabsTag.isRefresh()) {
        include(getStartPage());
      }
      return EVAL_BODY_INCLUDE;
    }
 else {
      return EVAL_PAGE;
    }
  }
 catch (  Exception e) {
    throw new JspException(e);
  }
}
