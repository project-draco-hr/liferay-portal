{
  setClusterAware(true);
  setConfigFile(props.get(PropsKeys.EHCACHE_MULTI_VM_CONFIG_LOCATION));
  setDefaultConfigFile(_DEFAULT_CONFIG_FILE_NAME);
  setMpiOnly(true);
  setPortalCacheManagerName(PortalCacheManagerNames.MULTI_VM);
  Thread currentThread=Thread.currentThread();
  ClassLoader contextClassLoader=currentThread.getContextClassLoader();
  Class<?> clazz=getClass();
  ClassLoaderUtil.setContextClassLoader(AggregateClassLoader.getAggregateClassLoader(contextClassLoader,clazz.getClassLoader()));
  try {
    initialize();
  }
  finally {
    ClassLoaderUtil.setContextClassLoader(contextClassLoader);
  }
  if (_log.isDebugEnabled()) {
    _log.debug("Activated " + PortalCacheManagerNames.MULTI_VM + " "+ PortalCacheManagerTypes.EHCACHE);
  }
}
