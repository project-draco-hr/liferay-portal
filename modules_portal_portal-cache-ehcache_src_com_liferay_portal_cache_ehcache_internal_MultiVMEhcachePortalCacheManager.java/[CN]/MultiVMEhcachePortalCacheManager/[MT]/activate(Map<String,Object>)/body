{
  setClusterAware(true);
  setConfigFile(props.get(PropsKeys.EHCACHE_MULTI_VM_CONFIG_LOCATION));
  setDefaultConfigFile("/ehcache/liferay-multi-vm-clustered.xml");
  setMpiOnly(true);
  setName(PortalCacheManagerNames.MULTI_VM);
  Thread currentThread=Thread.currentThread();
  ClassLoader contextClassLoader=currentThread.getContextClassLoader();
  Class<?> clazz=getClass();
  ClassLoaderUtil.setContextClassLoader(AggregateClassLoader.getAggregateClassLoader(contextClassLoader,clazz.getClassLoader()));
  try {
    initialize();
  }
  finally {
    ClassLoaderUtil.setContextClassLoader(contextClassLoader);
  }
}
