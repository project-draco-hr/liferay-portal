{
  Map<String,Object> map=null;
  try {
    map=(Map<String,Object>)portletSession.getAttribute(WebKeys.LIFERAY_SHARED_PORTAL_MESSAGES);
    if ((map == null) && createIfAbsent) {
      map=new LinkedHashMap<String,Object>();
      portletSession.setAttribute(WebKeys.LIFERAY_SHARED_PORTAL_MESSAGES,map);
    }
  }
 catch (  IllegalStateException ise) {
  }
  return map;
}
