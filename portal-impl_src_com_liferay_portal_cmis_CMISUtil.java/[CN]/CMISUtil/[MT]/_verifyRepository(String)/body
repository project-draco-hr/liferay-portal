{
  Service service=(Service)_getClient().get(repositoryUrl).getDocument().getRoot();
  Workspace ws=service.getWorkspaces().get(0);
  CMISRepositoryInfo info=ws.getFirstChild(_constants.REPOSITORY_INFO);
  String version=info.getVersionSupported();
  if (_log.isInfoEnabled()) {
    _log.info("Using CMIS repository " + info.getProductName() + " "+ info.getProductVersion());
    _log.info("CMIS repository supports CMIS version " + version);
  }
  if (!version.equals(_constants.VERSION)) {
    throw new RuntimeException("CMIS repository is running an unsupported version");
  }
  String childrenUrl=getCollectionUrl(ws,_constants.COLLECTION_ROOT_CHILDREN);
  Entry entry=getEntry(childrenUrl,_ROOT_DIR,_constants.BASE_TYPE_FOLDER);
  if (entry == null) {
    entry=createFolder(childrenUrl,_ROOT_DIR);
  }
  _liferayChildrenUrl=entry.getLink(_constants.LINK_CHILDREN).getHref().toString();
}
