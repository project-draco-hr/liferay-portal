{
  UnicodeProperties typeSettings=layout.getTypeSettingsProperties();
  int counter=1;
  do {
    String portletIds=typeSettings.remove("column-" + counter++);
    if (Validator.isNull(portletIds)) {
      break;
    }
    String[] portletIdsArray=StringUtil.split(portletIds);
    for (    String portletId : portletIdsArray) {
      try {
        portletPreferencesLocalService.deletePortletPreferences(PortletKeys.PREFS_OWNER_ID_DEFAULT,PortletKeys.PREFS_OWNER_TYPE_LAYOUT,layout.getPlid(),portletId);
      }
 catch (      PortalException pe) {
        if (_log.isWarnEnabled()) {
          _log.warn("Could not delete preferences for: " + portletId,pe);
        }
      }
    }
  }
 while (true);
  layout.setTypeSettingsProperties(typeSettings);
  layoutLocalService.updateLayout(layout);
}
