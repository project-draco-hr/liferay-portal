{
  Document document=SAXReaderUtil.read(xml);
  Element rootElement=document.getRootElement();
  String portletId=rootElement.attributeValue("name");
  String instanceId=rootElement.attributeValue("instance");
  String queryString=rootElement.attributeValue("queryString");
  if (Validator.isNotNull(instanceId)) {
    portletId=PortletConstants.assemblePortletId(portletId,instanceId);
  }
  BufferCacheServletResponse bufferCacheServletResponse=new BufferCacheServletResponse(_response);
  queryString=PortletParameterUtil.addNamespace(portletId,queryString);
  HttpServletRequest request=DynamicServletRequest.addQueryString(_request,queryString);
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  Portlet portlet=getPortlet(themeDisplay,portletId);
  PortletContainerUtil.render(request,bufferCacheServletResponse,portlet);
  return bufferCacheServletResponse.getString();
}
