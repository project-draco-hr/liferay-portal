{
  RelatedPages relatedPages=buildRelatedPages();
  WikiPageTrashHandlerTestUtil.moveParentBaseModelToTrash(_node.getNodeId());
  WikiNode newNode=WikiTestUtil.addNode(_group.getGroupId());
  moveTrashEntry(relatedPages.getChildPageResourcePrimKey(),newNode.getNodeId());
  WikiPage page=WikiPageLocalServiceUtil.getPage(relatedPages.getPageResourcePrimKey());
  WikiPage childPage=WikiPageLocalServiceUtil.getPage(relatedPages.getChildPageResourcePrimKey());
  WikiPage redirectorPage=WikiPageLocalServiceUtil.getPage(relatedPages.getRedirectorPageResourcePrimKey());
  Assert.assertEquals(_node.getNodeId(),page.getNodeId());
  Assert.assertEquals(newNode.getNodeId(),childPage.getNodeId());
  Assert.assertEquals(_node.getNodeId(),redirectorPage.getNodeId());
  Assert.assertNull(childPage.getParentPage());
  WikiPageResource pageResource=WikiPageResourceLocalServiceUtil.getWikiPageResource(page.getResourcePrimKey());
  WikiPageResource childPageResource=WikiPageResourceLocalServiceUtil.getWikiPageResource(childPage.getResourcePrimKey());
  WikiPageResource redirectorPageResource=WikiPageResourceLocalServiceUtil.getWikiPageResource(redirectorPage.getResourcePrimKey());
  Assert.assertEquals(_node.getNodeId(),pageResource.getNodeId());
  Assert.assertEquals(newNode.getNodeId(),childPageResource.getNodeId());
  Assert.assertEquals(_node.getNodeId(),redirectorPageResource.getNodeId());
}
