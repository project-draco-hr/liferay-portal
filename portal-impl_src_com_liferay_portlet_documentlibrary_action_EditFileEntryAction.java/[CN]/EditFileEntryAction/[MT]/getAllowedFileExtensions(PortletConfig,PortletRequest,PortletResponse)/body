{
  PortletPreferences preferences=portletRequest.getPreferences();
  String portletResource=ParamUtil.getString(portletRequest,"portletResource");
  if (Validator.isNotNull(portletResource)) {
    preferences=PortletPreferencesFactoryUtil.getPortletSetup(portletRequest,portletResource);
  }
  String portletName=portletConfig.getPortletName();
  if (portletName.equals(PortletKeys.MEDIA_GALLERY_DISPLAY)) {
    Set<String> extensions=new HashSet<String>();
    String[] mimeTypes=DLUtil.getMediaGalleryMimeTypes(preferences,portletRequest);
    for (    String mimeType : mimeTypes) {
      extensions.addAll(MimeTypesUtil.getExtensions(mimeType));
    }
    return extensions.toArray(new String[extensions.size()]);
  }
 else {
    return com.liferay.portal.kernel.util.PrefsPropsUtil.getStringArray(PropsKeys.DL_FILE_EXTENSIONS,StringPool.COMMA);
  }
}
