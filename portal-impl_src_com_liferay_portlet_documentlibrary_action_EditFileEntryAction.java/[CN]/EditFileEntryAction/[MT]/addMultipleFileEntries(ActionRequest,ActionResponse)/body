{
  List<String> validFileNames=new ArrayList<String>();
  List<KeyValuePair> invalidFileNameKVPs=new ArrayList<KeyValuePair>();
  String[] selectedFileNames=ParamUtil.getParameterValues(actionRequest,"selectedFileName");
  for (  String selectedFileName : selectedFileNames) {
    addMultipleFileEntries(actionRequest,actionResponse,selectedFileName,validFileNames,invalidFileNameKVPs);
  }
  JSONArray jsonArray=JSONFactoryUtil.createJSONArray();
  for (  String validFileName : validFileNames) {
    JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
    jsonObject.put("added",Boolean.TRUE);
    jsonObject.put("fileName",validFileName);
    jsonArray.put(jsonObject);
  }
  for (  KeyValuePair invalidFileNameKVP : invalidFileNameKVPs) {
    String fileName=invalidFileNameKVP.getKey();
    String errorMessage=invalidFileNameKVP.getValue();
    JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
    jsonObject.put("added",Boolean.FALSE);
    jsonObject.put("errorMessage",errorMessage);
    jsonObject.put("fileName",fileName);
    jsonArray.put(jsonObject);
  }
  writeJSON(actionRequest,actionResponse,jsonArray);
}
