{
  HashMap<String,Fields> fieldsMap=new HashMap<String,Fields>();
  if (fileEntryTypeId <= 0) {
    return fieldsMap;
  }
  DLFileEntryType fileEntryType=DLFileEntryTypeLocalServiceUtil.getFileEntryType(fileEntryTypeId);
  List<DDMStructure> ddmStructures=fileEntryType.getDDMStructures();
  for (  DDMStructure ddmStructure : ddmStructures) {
    String namespace=String.valueOf(ddmStructure.getStructureId());
    Set<String> fieldNames=ddmStructure.getFieldNames();
    Fields fields=new Fields();
    for (    String name : fieldNames) {
      Field field=new Field();
      field.setName(name);
      String value=ParamUtil.getString(actionRequest,namespace + name);
      field.setValue(value);
      fields.put(field);
    }
    fieldsMap.put(ddmStructure.getStructureKey(),fields);
  }
  return fieldsMap;
}
