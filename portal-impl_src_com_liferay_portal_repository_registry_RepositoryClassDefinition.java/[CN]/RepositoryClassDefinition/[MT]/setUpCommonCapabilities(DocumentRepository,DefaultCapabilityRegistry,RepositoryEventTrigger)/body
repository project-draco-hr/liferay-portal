{
  if (!capabilityRegistry.isCapabilityProvided(ConfigurationCapability.class)) {
    RepositoryServiceAdapter repositoryServiceAdapter=null;
    if (documentRepository instanceof LocalRepository) {
      repositoryServiceAdapter=new RepositoryServiceAdapter(RepositoryLocalServiceUtil.getService());
    }
 else {
      repositoryServiceAdapter=new RepositoryServiceAdapter(RepositoryLocalServiceUtil.getService(),RepositoryServiceUtil.getService());
    }
    capabilityRegistry.addExportedCapability(ConfigurationCapability.class,new ConfigurationCapabilityImpl(documentRepository,repositoryServiceAdapter));
  }
  if (!capabilityRegistry.isCapabilityProvided(RepositoryEventTriggerCapability.class)) {
    capabilityRegistry.addExportedCapability(RepositoryEventTriggerCapability.class,new LiferayRepositoryEventTriggerCapability(repositoryEventTrigger));
  }
}
