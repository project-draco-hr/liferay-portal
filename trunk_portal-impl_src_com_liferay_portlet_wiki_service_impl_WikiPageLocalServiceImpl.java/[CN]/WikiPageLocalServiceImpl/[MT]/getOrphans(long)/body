{
  List<Map<String,Boolean>> pageTitles=new ArrayList<Map<String,Boolean>>();
  List<WikiPage> pages=wikiPagePersistence.findByN_H_S(nodeId,true,WorkflowConstants.STATUS_APPROVED);
  for (  WikiPage page : pages) {
    pageTitles.add(WikiCacheUtil.getOutgoingLinks(page));
  }
  Set<WikiPage> notOrphans=new HashSet<WikiPage>();
  for (  WikiPage page : pages) {
    for (    Map<String,Boolean> pageTitle : pageTitles) {
      if (pageTitle.get(page.getTitle().toLowerCase()) != null) {
        notOrphans.add(page);
        break;
      }
    }
  }
  List<WikiPage> orphans=new ArrayList<WikiPage>();
  for (  WikiPage page : pages) {
    if (!notOrphans.contains(page)) {
      orphans.add(page);
    }
  }
  orphans=ListUtil.sort(orphans);
  return orphans;
}
