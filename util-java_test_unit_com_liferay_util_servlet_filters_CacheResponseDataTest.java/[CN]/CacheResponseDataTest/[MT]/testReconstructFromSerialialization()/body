{
  BufferCacheServletResponse bufferCacheServletResponse=new BufferCacheServletResponse(new MockHttpServletResponse());
  ByteBuffer byteBuffer=ByteBuffer.allocate(10);
  byteBuffer.limit(7);
  for (byte i=0; i < 7; i++) {
    byteBuffer.put(i,i);
  }
  bufferCacheServletResponse.setByteBuffer(byteBuffer);
  CacheResponseData cacheResponseData=new CacheResponseData(bufferCacheServletResponse);
  cacheResponseData.setAttribute("a1","v1");
  cacheResponseData.setAttribute("b1","v2");
  CacheResponseData deserializedCacheResponseData=(CacheResponseData)SerializableUtil.deserialize(SerializableUtil.serialize(cacheResponseData));
  Assert.assertEquals("ContentType not correctly recreated",cacheResponseData.getContentType(),deserializedCacheResponseData.getContentType());
  Assert.assertEquals("Headers not correctly recreated",cacheResponseData.getHeaders(),deserializedCacheResponseData.getHeaders());
  Assert.assertEquals("Attribute a1 not correctly recreated",cacheResponseData.getAttribute("a1"),deserializedCacheResponseData.getAttribute("a1"));
  Assert.assertEquals("Attribute a2 not correctly recreated",cacheResponseData.getAttribute("a2"),deserializedCacheResponseData.getAttribute("a2"));
  ByteBuffer deserializedByteBuffer=deserializedCacheResponseData.getByteBuffer();
  Assert.assertArrayEquals("ByteBuffer data not correctly recreated",byteBuffer.array(),deserializedByteBuffer.array());
  Assert.assertEquals("ByteBuffer.capacity() not correctly recreated",byteBuffer.capacity(),deserializedByteBuffer.capacity());
  Assert.assertEquals("ByteBuffer.limit() not correctly recreated",byteBuffer.limit(),deserializedByteBuffer.limit());
  Assert.assertEquals("ByteBuffer.position() not correctly recreated",byteBuffer.position(),deserializedByteBuffer.position());
}
