{
  try (LoggingTimer loggingTimer=new LoggingTimer(tableName)){
    List<Long> stagedGroupIds=getStagedGroupIds();
    for (    long stagedGroupId : stagedGroupIds) {
      Date lastPublishDate=getPortletLastPublishDate(stagedGroupId,portletId);
      if (lastPublishDate == null) {
        lastPublishDate=getLayoutSetLastPublishDate(stagedGroupId);
      }
      if (lastPublishDate == null) {
        continue;
      }
      updateStagedModelLastPublishDates(stagedGroupId,tableName,lastPublishDate);
    }
  }
 }
