{
  WebDAVStorage storage=webDavRequest.getWebDAVStorage();
  long depth=WebDAVUtil.getDepth(webDavRequest.getHttpServletRequest());
  Document doc=SAXReaderUtil.createDocument();
  Element multistatus=SAXReaderUtil.createElement(SAXReaderUtil.createQName("multistatus",WebDAVUtil.DAV_URI));
  doc.setRootElement(multistatus);
  Resource resource=storage.getResource(webDavRequest);
  if (resource != null) {
    addResponse(storage,webDavRequest,resource,props,multistatus,depth);
  }
 else {
    String path=storage.getRootPath() + webDavRequest.getPath();
    if (_log.isWarnEnabled()) {
      _log.warn("No resource found for " + path);
    }
    addResponse(path,multistatus);
  }
  return getResponseXML(doc);
}
