{
  WebDAVStorage storage=webDavReq.getWebDAVStorage();
  long depth=WebDAVUtil.getDepth(webDavReq.getHttpServletRequest());
  DocumentFactory docFactory=DocumentFactory.getInstance();
  Document doc=docFactory.createDocument();
  Element multistatus=docFactory.createElement(new QName("multistatus",WebDAVUtil.DAV_URI));
  doc.setRootElement(multistatus);
  Resource resource=storage.getResource(webDavReq);
  if (resource != null) {
    addResponse(storage,webDavReq,resource,props,multistatus,depth);
  }
 else {
    String path=storage.getRootPath() + webDavReq.getPath();
    if (_log.isWarnEnabled()) {
      _log.warn("No resource found for " + path);
    }
    addResponse(path,multistatus);
  }
  return getResponseXML(doc);
}
