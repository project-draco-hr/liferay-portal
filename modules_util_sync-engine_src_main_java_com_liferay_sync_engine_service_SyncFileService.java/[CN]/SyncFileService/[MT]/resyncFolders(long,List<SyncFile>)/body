{
  Map<Long,SyncFile> resyncedSyncFileMap=new HashMap<>();
  Set<Long> resyncedSyncFileIds=resyncedSyncFileMap.keySet();
  Collections.sort(syncFiles,_syncFileFilePathNameComparator);
  for (  SyncFile syncFile : syncFiles) {
    SyncFile localSyncFile=SyncFileService.fetchSyncFile(syncFile.getFilePathName());
    if (localSyncFile != null) {
      if (localSyncFile.getState() != SyncFile.STATE_UNSYNCED) {
        continue;
      }
      syncFile=localSyncFile;
    }
 else {
      syncFile.setSyncAccountId(syncAccountId);
    }
    syncFile.setModifiedTime(0);
    syncFile.setState(SyncFile.STATE_IN_PROGRESS);
    syncFile.setUiEvent(SyncFile.UI_EVENT_RESYNCING);
    SyncFileService.update(syncFile);
    if (isAncestorInList(syncFile,resyncedSyncFileIds)) {
      continue;
    }
    resyncedSyncFileMap.put(syncFile.getTypePK(),syncFile);
  }
  for (  SyncFile syncFile : resyncedSyncFileMap.values()) {
    FileEventUtil.resyncFolder(syncFile.getSyncAccountId(),syncFile);
  }
}
