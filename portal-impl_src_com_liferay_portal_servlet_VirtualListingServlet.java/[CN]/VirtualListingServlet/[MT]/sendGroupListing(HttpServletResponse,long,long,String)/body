{
  LinkedHashMap<String,Object> groupParams=new LinkedHashMap<String,Object>();
  groupParams.put("usersGroups",new Long(userId));
  List<Group> groups=GroupLocalServiceUtil.search(companyId,null,null,groupParams,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  try {
    Group group=GroupLocalServiceUtil.getUserGroup(companyId,userId);
    groups.add(group);
  }
 catch (  NoSuchGroupException nsge) {
  }
  groups=ListUtil.sort(groups,new GroupFriendlyURLComparator());
  List<Tuple> entries=new ArrayList<Tuple>();
  for (  Group group : groups) {
    String name=HttpUtil.fixPath(group.getFriendlyURL());
    entries.add(buildEntry(fullPath,name + "/",null,null,group.getDescription()));
  }
  sendHtml(response,StringPool.SLASH,entries);
}
