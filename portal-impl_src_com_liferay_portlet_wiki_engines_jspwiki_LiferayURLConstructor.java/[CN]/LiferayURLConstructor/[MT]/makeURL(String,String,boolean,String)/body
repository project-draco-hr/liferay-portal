{
  if (Validator.isNotNull(parameters)) {
    if (context.equals(WikiContext.ATTACH)) {
      parameters=StringPool.QUESTION + parameters;
    }
 else     if (context.equals(WikiContext.NONE)) {
      if (name.indexOf(StringPool.QUESTION) != -1) {
        parameters="&amp;" + parameters;
      }
 else {
        parameters=StringPool.QUESTION + parameters;
      }
    }
 else {
      parameters="&amp;" + parameters;
    }
  }
 else {
    parameters=StringPool.BLANK;
  }
  String path;
  if (context.equals(WikiContext.EDIT)) {
    path="[$BEGIN_PAGE_TITLE_EDIT$]" + name + "[$END_PAGE_TITLE_EDIT$]";
  }
 else   if (context.equals(WikiContext.VIEW)) {
    path="[$BEGIN_PAGE_TITLE$]" + name + "[$END_PAGE_TITLE$]";
  }
 else   if (context.equals(WikiContext.ATTACH)) {
    if (name.indexOf(StringPool.SLASH) == -1) {
      path="[$ATTACHMENT_URL_PREFIX$][$WIKI_PAGE_NAME$]/" + HttpUtil.encodeURL(name);
    }
 else {
      path="[$ATTACHMENT_URL_PREFIX$]" + HttpUtil.encodeURL(name);
    }
  }
 else {
    path=name;
  }
  return path + parameters;
}
