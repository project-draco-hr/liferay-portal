{
  String pathInfo=null;
  String queryString=null;
  String requestURI=null;
  String servletPath=null;
  PortletRequest portletRequest=(PortletRequest)servletRequest.getAttribute(JavaConstants.JAVAX_PORTLET_REQUEST);
  PortletResponse portletResponse=(PortletResponse)servletRequest.getAttribute(JavaConstants.JAVAX_PORTLET_RESPONSE);
  if (_path != null) {
    String pathNoQueryString=_path;
    int pos=_path.indexOf(StringPool.QUESTION);
    if (pos != -1) {
      pathNoQueryString=_path.substring(0,pos);
      queryString=_path.substring(pos + 1,_path.length());
    }
    Set<String> servletURLPatterns=getServletURLPatterns(servletRequest,portletRequest,portletResponse);
    for (    String urlPattern : servletURLPatterns) {
      if (urlPattern.endsWith("/*")) {
        pos=urlPattern.indexOf("/*");
        urlPattern=urlPattern.substring(0,pos);
        if (pathNoQueryString.startsWith(urlPattern)) {
          pathInfo=pathNoQueryString.substring(urlPattern.length());
          servletPath=urlPattern;
          break;
        }
      }
    }
    if ((pathInfo == null) && (servletPath == null)) {
      pathInfo=StringPool.BLANK;
      servletPath=pathNoQueryString;
    }
    requestURI=portletRequest.getContextPath() + pathNoQueryString;
  }
  HttpServletRequest portletServletRequest=getPortletServletRequest(servletRequest,portletRequest,pathInfo,queryString,requestURI,servletPath,include);
  HttpServletResponse portletServletResponse=getPortletServletResponse(servletResponse,portletRequest,portletResponse,include);
  if (include) {
    _requestDispatcher.include(portletServletRequest,portletServletResponse);
  }
 else {
    _requestDispatcher.forward(portletServletRequest,portletServletResponse);
  }
}
