{
  String pathInfo=null;
  String queryString=null;
  String requestURI=null;
  String servletPath=null;
  PortletRequestImpl portletRequestImpl=(PortletRequestImpl)servletRequest.getAttribute(JavaConstants.JAVAX_PORTLET_REQUEST);
  PortletResponseImpl portletResponseImpl=(PortletResponseImpl)servletRequest.getAttribute(JavaConstants.JAVAX_PORTLET_RESPONSE);
  if (_path != null) {
    String pathNoQueryString=_path;
    int pos=_path.indexOf(StringPool.QUESTION);
    if (pos != -1) {
      pathNoQueryString=_path.substring(0,pos);
      queryString=_path.substring(pos + 1,_path.length());
    }
    Portlet portlet=portletRequestImpl.getPortlet();
    PortletApp portletApp=portlet.getPortletApp();
    Set<String> servletURLPatterns=portletApp.getServletURLPatterns();
    for (    String urlPattern : servletURLPatterns) {
      if (urlPattern.endsWith("/*")) {
        pos=urlPattern.indexOf("/*");
        urlPattern=urlPattern.substring(0,pos);
        if (pathNoQueryString.startsWith(urlPattern)) {
          pathInfo=pathNoQueryString.substring(urlPattern.length());
          servletPath=urlPattern;
          break;
        }
      }
    }
    if ((pathInfo == null) && (servletPath == null)) {
      pathInfo=StringPool.BLANK;
      servletPath=pathNoQueryString;
    }
    requestURI=portletRequestImpl.getContextPath() + pathNoQueryString;
  }
  PortletServletRequest portletServletRequest=new PortletServletRequest((HttpServletRequest)servletRequest,portletRequestImpl,pathInfo,queryString,requestURI,servletPath,false,include);
  PortletServletResponse portletServletResponse=new PortletServletResponse((HttpServletResponse)servletResponse,portletResponseImpl,include);
  if (include) {
    _requestDispatcher.include(portletServletRequest,portletServletResponse);
  }
 else {
    _requestDispatcher.forward(portletServletRequest,portletServletResponse);
  }
}
