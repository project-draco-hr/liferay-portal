{
  if (PropsValues.PORTLET_CONTAINER_IMPL_SUN) {
    try {
      HttpServletRequest request=(HttpServletRequest)servletRequest;
      long companyId=PortalUtil.getCompanyId(request);
      String portletId=WindowInvokerUtil.getPortletId(portletResponse.getNamespace());
      Portlet portlet=PortletLocalServiceUtil.getPortletById(companyId,portletId);
      PortletApp portletApp=portlet.getPortletApp();
      return portletApp.getServletURLPatterns();
    }
 catch (    SystemException se) {
      throw new ServletException(se);
    }
  }
 else {
    PortletRequestImpl portletRequestImpl=(PortletRequestImpl)portletRequest;
    Portlet portlet=portletRequestImpl.getPortlet();
    PortletApp portletApp=portlet.getPortletApp();
    return portletApp.getServletURLPatterns();
  }
}
