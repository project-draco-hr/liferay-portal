{
  byte[] saltBytes=new byte[8];
  if (Validator.isNull(sshaString)) {
    Random random=new SecureRandom();
    random.nextBytes(saltBytes);
  }
 else {
    BASE64Decoder decoder=new BASE64Decoder();
    try {
      byte[] digestPlusSalt=decoder.decodeBuffer(sshaString);
      byte[] digestBytes=new byte[digestPlusSalt.length - 8];
      System.arraycopy(digestPlusSalt,0,digestBytes,0,digestBytes.length);
      System.arraycopy(digestPlusSalt,digestBytes.length,saltBytes,0,saltBytes.length);
    }
 catch (    IOException ioe) {
      throw new PwdEncryptorException("Unable to extract salt from encrypted password: " + ioe.getMessage());
    }
  }
  return saltBytes;
}
