{
  String[] excludes=new String[]{"**\\TestCase*.testcase","**\\Macro*.macro","**\\Action*.action","**\\Function*.function"};
  String[] includes=new String[]{"**\\*.testcase","**\\*.macro","**\\*.action","**\\*.function"};
  List<String> fileNames=getFileNames(excludes,includes);
  for (  String fileName : fileNames) {
    File file=new File(BASEDIR + fileName);
    fileName=StringUtil.replace(fileName,StringPool.BACK_SLASH,StringPool.SLASH);
    String content=fileUtil.read(file);
    String newContent=content;
    if (fileName.endsWith(".action")) {
      newContent=trimContent(newContent,false);
    }
    if (fileName.endsWith(".action")) {
      newContent=validatePoshiDocument(fileName,newContent);
    }
    if (fileName.endsWith(".function")) {
      newContent=trimContent(newContent,false);
    }
    if (fileName.endsWith(".function")) {
      newContent=validatePoshiDocument(fileName,newContent);
    }
    if (fileName.endsWith(".macro")) {
      newContent=trimContent(newContent,false);
    }
    if (fileName.endsWith(".macro")) {
      newContent=validatePoshiDocument(fileName,newContent);
      try {
        Document document=saxReaderUtil.read(newContent);
        Element rootElement=document.getRootElement();
        List<Element> elements=rootElement.elements();
        for (        Element element : elements) {
          String elementName=element.getName();
          if (!Validator.equals(elementName,"command")) {
            String attributeValue=element.attributeValue("value");
            if (attributeValue == null) {
              newContent=StringUtil.replace(newContent,elementName,"command");
            }
          }
          if (!Validator.equals(elementName,"var")) {
            String attributeValue=element.attributeValue("value");
            if (attributeValue != null) {
              newContent=StringUtil.replace(newContent,elementName,"var");
            }
          }
          if (!Validator.equals(elementName,"if")) {
            String attributeValue=element.attributeValue("name");
            if (attributeValue == null) {
              newContent=StringUtil.replace(newContent,elementName,"if");
            }
          }
        }
        newContent=newContent;
      }
 catch (      DocumentException de) {
      }
      newContent=newContent;
    }
    if (fileName.endsWith(".testcase")) {
      newContent=trimContent(newContent,false);
    }
    if (fileName.endsWith(".testcase")) {
      newContent=validatePoshiDocument(fileName,newContent);
    }
    newContent=formatPoshi(newContent);
    if (isAutoFix() && (newContent != null) && !content.equals(newContent)) {
      fileUtil.write(file,newContent);
      sourceFormatterHelper.printError(fileName,file);
    }
  }
}
