{
  PortletURL portletURL=PowerMockito.mock(PortletURL.class);
  HttpUtil httpUtil=new HttpUtil();
  httpUtil.setHttp(new HttpImpl());
  Map<String,String[]> itemSelectorParameters=_itemSelectorImpl.getItemSelectorParameters("itemSelectedEventName",_mediaItemSelectorCriterion,_flickrItemSelectorCriterion);
  StringBundler sb=new StringBundler();
  sb.append("http://localhost/?p_p_state=popup&p_p_mode=view");
  String namespace=PortalUtil.getPortletNamespace(ItemSelectorPortletKeys.ITEM_SELECTOR);
  for (  String itemSelectorParameterKey : itemSelectorParameters.keySet()) {
    sb.append("&");
    sb.append(namespace);
    sb.append(itemSelectorParameterKey);
    sb.append("=");
    sb.append(itemSelectorParameters.get(itemSelectorParameterKey));
  }
  Mockito.when(portletURL.toString()).thenReturn(sb.toString());
  return portletURL;
}
