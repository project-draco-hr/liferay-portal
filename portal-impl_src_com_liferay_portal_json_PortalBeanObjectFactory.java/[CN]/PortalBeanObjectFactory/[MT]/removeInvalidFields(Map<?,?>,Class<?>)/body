{
  Map<String,Field> declaredFields=getDeclaredFields(targetClass);
  BeanAnalyzer beanAnalyzer=BeanAnalyzer.analyze(targetClass);
  for (  BeanProperty beanProperty : beanAnalyzer.getProperties()) {
    String beanName=beanProperty.getName();
    String capitalizedBeanName=null;
    Object beanValue=values.get(beanName);
    if (beanValue == null) {
      capitalizedBeanName=Character.toUpperCase(beanName.charAt(0)) + beanName.substring(1);
      beanValue=values.get(capitalizedBeanName);
    }
    if ((beanValue != null) && !isValidField(declaredFields,beanName)) {
      if (capitalizedBeanName != null) {
        beanName=capitalizedBeanName;
      }
      if (_log.isDebugEnabled()) {
        _log.debug("Removing non-JavaBeans field " + beanName);
      }
      values.remove(beanName);
    }
  }
}
