{
  PortletSession portletSession=portletRequest.getPortletSession();
  String captchaText=(String)portletSession.getAttribute(WebKeys.CAPTCHA_TEXT);
  if (captchaText == null) {
    _log.error("CAPTCHA text is null. User " + portletRequest.getRemoteUser() + " may be trying to circumvent the CAPTCHA.");
    throw new CaptchaTextException();
  }
  boolean valid=captchaText.equals(ParamUtil.getString(portletRequest,"captchaText"));
  if (valid) {
    portletSession.removeAttribute(WebKeys.CAPTCHA_TEXT);
  }
  return valid;
}
