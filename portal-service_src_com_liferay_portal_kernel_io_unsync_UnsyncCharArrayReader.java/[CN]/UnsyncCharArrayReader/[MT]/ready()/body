{
  if (buffer == null) {
    throw new IOException("Stream closed");
  }
  return capacity > index;
}
