{
  long fileEntryTypeId=ParamUtil.getLong(serviceContext,"fileEntryTypeId",-1L);
  Map<String,Fields> fieldsMap=getFieldsMap(serviceContext,fileEntryTypeId);
  long size=0;
  if (file != null) {
    size=file.length();
  }
  DLFileEntry dlFileEntry=dlFileEntryLocalService.addFileEntry(userId,getGroupId(),getRepositoryId(),toFolderId(folderId),sourceFileName,mimeType,title,description,changeLog,fileEntryTypeId,fieldsMap,file,null,size,serviceContext);
  addFileEntryResources(dlFileEntry,serviceContext);
  return new LiferayFileEntry(dlFileEntry);
}
