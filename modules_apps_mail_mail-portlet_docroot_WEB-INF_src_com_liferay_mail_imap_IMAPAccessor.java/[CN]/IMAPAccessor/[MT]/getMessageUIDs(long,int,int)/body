{
  Folder jxFolder=null;
  try {
    jxFolder=openFolder(folderId);
    int[] messageIndexes=getMessageIndexes(jxFolder.getMessageCount(),pageNumber,messagesPerPage);
    if (messageIndexes[0] == 0) {
      return new long[0];
    }
    Message[] jxMessages=jxFolder.getMessages(messageIndexes[0],messageIndexes[1]);
    return getMessageUIDs(jxFolder,jxMessages);
  }
 catch (  MessagingException me) {
    throw new MailException(me);
  }
 finally {
    closeFolder(jxFolder,false);
  }
}
