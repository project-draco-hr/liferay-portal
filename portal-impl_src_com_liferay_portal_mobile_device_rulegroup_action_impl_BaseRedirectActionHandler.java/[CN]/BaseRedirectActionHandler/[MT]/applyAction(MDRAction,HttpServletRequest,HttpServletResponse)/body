{
  String url=getURL(action,request,response);
  if (Validator.isNull(url)) {
    if (_log.isInfoEnabled()) {
      _log.info("No URL to redirect to located");
    }
  }
 else {
    String requestURL=request.getRequestURL().toString();
    if (StringUtil.contains(requestURL,url)) {
      if (_log.isInfoEnabled()) {
        _log.info("Skipping redirect. Current URL contains redirect URL");
      }
      return;
    }
    try {
      response.sendRedirect(url);
    }
 catch (    IOException ioe) {
      throw new PortalException("Unable to send redirect for url: " + url,ioe);
    }
  }
}
