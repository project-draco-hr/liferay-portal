{
  Map<String,FileItem[]> fileParameters=new HashMap<>();
  for (int i=0; i < 10; i++) {
    PortletContainerTestUtil.putFileParameter(getClass(),_TXT_DEPENDENCY,fileParameters);
  }
  LiferayServletRequest liferayServletRequest=PortletContainerTestUtil.mockLiferayServletRequest(getClass(),_TXT_DEPENDENCY);
  UploadServletRequestImpl uploadServletRequest=new UploadServletRequestImpl((HttpServletRequest)liferayServletRequest.getRequest(),fileParameters,new HashMap<String,List<String>>());
  Map<String,FileItem[]> map=uploadServletRequest.getMultipartParameterMap();
  Assert.assertEquals(10,map.size());
  for (  Map.Entry<String,FileItem[]> entry : map.entrySet()) {
    String key=entry.getKey();
    File[] files=uploadServletRequest.getFiles(key);
    FileItem[] fileItems=entry.getValue();
    Assert.assertEquals(fileItems.length,files.length);
    Assert.assertEquals(2,files.length);
    for (int i=0; i < files.length; i++) {
      File storeLocation=fileItems[i].getStoreLocation();
      Assert.assertEquals(storeLocation.getAbsolutePath(),files[i].getAbsolutePath());
    }
  }
}
