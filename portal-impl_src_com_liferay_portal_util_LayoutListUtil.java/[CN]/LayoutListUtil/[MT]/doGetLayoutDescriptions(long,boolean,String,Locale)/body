{
  List<LayoutDescription> list=new ArrayList<LayoutDescription>();
  List<Layout> layouts=new ArrayList<Layout>(LayoutLocalServiceUtil.getLayouts(groupId,privateLayout));
  Deque<ObjectValuePair<Layout,Integer>> deque=new LinkedList<ObjectValuePair<Layout,Integer>>();
  Layout rootLayout=new LayoutImpl();
  rootLayout.setPlid(LayoutConstants.DEFAULT_PLID);
  rootLayout.setName(rootNodeName);
  deque.push(new ObjectValuePair<Layout,Integer>(rootLayout,0));
  ObjectValuePair<Layout,Integer> current=null;
  while ((current=deque.pollFirst()) != null) {
    Layout currentLayout=current.getKey();
    Integer currentDepth=current.getValue();
    list.add(new LayoutDescription(currentLayout.getPlid(),currentLayout.getName(locale),currentDepth));
    ListIterator<Layout> listIterator=layouts.listIterator(layouts.size());
    while (listIterator.hasPrevious()) {
      Layout layout=listIterator.previous();
      if (layout.getParentLayoutId() == currentLayout.getLayoutId()) {
        listIterator.remove();
        deque.push(new ObjectValuePair<Layout,Integer>(layout,currentDepth + 1));
      }
    }
  }
  return list;
}
