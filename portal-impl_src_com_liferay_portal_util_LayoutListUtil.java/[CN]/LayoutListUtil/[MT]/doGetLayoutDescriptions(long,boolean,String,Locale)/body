{
  List<LayoutDescription> layoutDescriptions=new ArrayList<LayoutDescription>();
  List<Layout> layouts=new ArrayList<Layout>(LayoutLocalServiceUtil.getLayouts(groupId,privateLayout));
  Deque<ObjectValuePair<Layout,Integer>> deque=new LinkedList<ObjectValuePair<Layout,Integer>>();
  Layout rootLayout=new LayoutImpl();
  rootLayout.setPlid(LayoutConstants.DEFAULT_PLID);
  rootLayout.setName(rootNodeName);
  deque.push(new ObjectValuePair<Layout,Integer>(rootLayout,0));
  ObjectValuePair<Layout,Integer> objectValuePair=null;
  while ((objectValuePair=deque.pollFirst()) != null) {
    Layout currentLayout=objectValuePair.getKey();
    Integer currentDepth=objectValuePair.getValue();
    layoutDescriptions.add(new LayoutDescription(currentLayout.getPlid(),currentLayout.getName(locale),currentDepth));
    ListIterator<Layout> listIterator=layouts.listIterator(layouts.size());
    while (listIterator.hasPrevious()) {
      Layout previousLayout=listIterator.previous();
      if (previousLayout.getParentLayoutId() == currentLayout.getLayoutId()) {
        listIterator.remove();
        deque.push(new ObjectValuePair<Layout,Integer>(previousLayout,currentDepth + 1));
      }
    }
  }
  return layoutDescriptions;
}
