{
  Locale locale=null;
  try {
    locale=(Locale)_locales.get(languageId);
    if (locale == null) {
      int pos=languageId.indexOf(StringPool.UNDERLINE);
      String languageCode=languageId.substring(0,pos);
      String countryCode=languageId.substring(pos + 1,languageId.length());
      locale=new Locale(languageCode,countryCode);
      _locales.put(languageId,locale);
    }
  }
 catch (  Exception e) {
    if (_log.isWarnEnabled()) {
      _log.warn(languageId + " is not a valid language id");
    }
  }
  if (locale == null) {
    locale=Locale.getDefault();
  }
  return locale;
}
