{
  User user=UserUtil.findByPrimaryKey(userId);
  long classNameId=PortalUtil.getClassNameId(className);
  Date now=new Date();
  long subscriptionId=CounterLocalServiceUtil.increment();
  Subscription subscription=SubscriptionUtil.create(subscriptionId);
  subscription.setCompanyId(user.getCompanyId());
  subscription.setUserId(user.getUserId());
  subscription.setUserName(user.getFullName());
  subscription.setCreateDate(now);
  subscription.setModifiedDate(now);
  subscription.setClassNameId(classNameId);
  subscription.setClassPK(classPK);
  subscription.setFrequency(frequency);
  SubscriptionUtil.update(subscription);
  return subscription;
}
