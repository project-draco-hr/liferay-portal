{
  boolean etag=ParamUtil.getBoolean(request,_ETAG,true);
  if (etag) {
    ByteBufferServletResponse byteBufferResponse=new ByteBufferServletResponse(response);
    processFilter(ETagFilter.class,request,byteBufferResponse,filterChain);
    if (!ETagUtil.processETag(request,response,byteBufferResponse)) {
      ServletResponseUtil.write(response,byteBufferResponse);
    }
  }
 else {
    processFilter(ETagFilter.class,request,response,filterChain);
  }
}
