{
  BufferCacheServletResponse bufferCacheServletResponse=new BufferCacheServletResponse(response);
  processFilter(ETagFilter.class,request,bufferCacheServletResponse,filterChain);
  ByteBuffer byteBuffer=bufferCacheServletResponse.getByteBuffer();
  if (!isEligibleForEtag(bufferCacheServletResponse.getStatus()) || !ETagUtil.processETag(request,response,byteBuffer)) {
    bufferCacheServletResponse.finishResponse();
    bufferCacheServletResponse.outputBuffer();
  }
}
