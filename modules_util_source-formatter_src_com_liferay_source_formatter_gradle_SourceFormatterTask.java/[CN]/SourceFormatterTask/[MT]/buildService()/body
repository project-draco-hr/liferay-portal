{
  Project project=getProject();
  ExtensionContainer extensionContainer=project.getExtensions();
  SourceFormatterArgs sourceFormatterArgs=extensionContainer.findByType(SourceFormatterArgs.class);
  if (sourceFormatterArgs == null) {
    sourceFormatterArgs=new SourceFormatterArgs();
  }
  try {
    SourceFormatter sourceFormatter=new SourceFormatter(sourceFormatterArgs);
    sourceFormatter.format();
    List<String> processedFiles=sourceFormatter.getProcessedFiles();
    ExtraPropertiesExtension extraProperties=extensionContainer.getExtraProperties();
    extraProperties.set(SourceFormatter.PROCESSED_FILES_ATTRIBUTE,processedFiles);
  }
 catch (  Exception e) {
    throw new GradleException(e.getMessage(),e);
  }
}
