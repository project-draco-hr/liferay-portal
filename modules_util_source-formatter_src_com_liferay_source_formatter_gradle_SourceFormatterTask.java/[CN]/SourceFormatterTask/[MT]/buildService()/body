{
  Project project=getProject();
  ExtensionContainer extensionContainer=project.getExtensions();
  SourceFormatterBean sourceFormatterBean=extensionContainer.findByType(SourceFormatterBean.class);
  if (sourceFormatterBean == null) {
    sourceFormatterBean=new SourceFormatterBean();
  }
  try {
    SourceFormatter sourceFormatter=new SourceFormatter(sourceFormatterBean);
    sourceFormatter.format();
    List<String> processedFiles=sourceFormatter.getProcessedFiles();
    ExtraPropertiesExtension extraProperties=extensionContainer.getExtraProperties();
    extraProperties.set(SourceFormatter.PROCESSED_FILES_ATTRIBUTE,processedFiles);
  }
 catch (  Exception e) {
    throw new GradleException(e.getMessage(),e);
  }
}
