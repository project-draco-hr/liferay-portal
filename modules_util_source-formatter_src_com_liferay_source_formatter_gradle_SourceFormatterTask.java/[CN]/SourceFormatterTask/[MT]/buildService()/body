{
  Project project=getProject();
  ExtensionContainer extensionContainer=project.getExtensions();
  SourceFormatterArgs sourceFormatterArgs=extensionContainer.findByType(SourceFormatterArgs.class);
  if (sourceFormatterArgs == null) {
    sourceFormatterArgs=new SourceFormatterArgs();
  }
  try {
    SourceFormatter sourceFormatter=new SourceFormatter(sourceFormatterArgs);
    sourceFormatter.format();
    List<String> modifiedFileNames=sourceFormatter.getModifiedFileNames();
    ExtraPropertiesExtension extraProperties=extensionContainer.getExtraProperties();
    extraProperties.set(SourceFormatter.PROCESSED_FILES_ATTRIBUTE,modifiedFileNames);
  }
 catch (  Exception e) {
    throw new GradleException(e.getMessage(),e);
  }
}
