{
  try {
    HttpServletRequest request=(HttpServletRequest)pageContext.getRequest();
    Layout layout=(Layout)request.getAttribute(WebKeys.LAYOUT);
    if (layout == null) {
      return EVAL_PAGE;
    }
    ServletContext servletContext=(ServletContext)request.getAttribute(WebKeys.CTX);
    HttpServletResponse response=(HttpServletResponse)pageContext.getResponse();
    doTag(_portletName,_queryString,_defaultPreferences,_includeCss,pageContext,servletContext,request,response);
    return EVAL_PAGE;
  }
 catch (  Exception e) {
    _log.error(e,e);
    throw new JspException(e);
  }
}
