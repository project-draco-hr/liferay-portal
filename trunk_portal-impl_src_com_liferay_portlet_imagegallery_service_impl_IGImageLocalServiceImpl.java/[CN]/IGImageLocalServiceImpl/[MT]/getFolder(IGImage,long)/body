{
  if ((image.getFolderId() != folderId) && (folderId != IGFolderConstants.DEFAULT_PARENT_FOLDER_ID)) {
    IGFolder newFolder=igFolderPersistence.fetchByPrimaryKey(folderId);
    if ((newFolder == null) || (image.getGroupId() != newFolder.getGroupId())) {
      folderId=image.getFolderId();
    }
  }
  return folderId;
}
