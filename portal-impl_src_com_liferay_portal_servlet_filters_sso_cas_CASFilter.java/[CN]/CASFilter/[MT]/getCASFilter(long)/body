{
  Long companyIdObj=new Long(companyId);
  edu.yale.its.tp.cas.client.filter.CASFilter casFilter=(edu.yale.its.tp.cas.client.filter.CASFilter)_casFilters.get(companyIdObj);
  if (casFilter == null) {
    casFilter=new edu.yale.its.tp.cas.client.filter.CASFilter();
    DynamicFilterConfig config=new DynamicFilterConfig(_filterName,_ctx);
    String serverName=PrefsPropsUtil.getString(companyId,PropsUtil.CAS_SERVER_NAME);
    String serviceUrl=PrefsPropsUtil.getString(companyId,PropsUtil.CAS_SERVICE_URL);
    config.addInitParameter(edu.yale.its.tp.cas.client.filter.CASFilter.LOGIN_INIT_PARAM,PrefsPropsUtil.getString(companyId,PropsUtil.CAS_LOGIN_URL));
    if (Validator.isNotNull(serviceUrl)) {
      config.addInitParameter(edu.yale.its.tp.cas.client.filter.CASFilter.SERVICE_INIT_PARAM,serviceUrl);
    }
 else {
      config.addInitParameter(edu.yale.its.tp.cas.client.filter.CASFilter.SERVERNAME_INIT_PARAM,serverName);
    }
    config.addInitParameter(edu.yale.its.tp.cas.client.filter.CASFilter.VALIDATE_INIT_PARAM,PrefsPropsUtil.getString(companyId,PropsUtil.CAS_VALIDATE_URL));
    casFilter.init(config);
    _casFilters.put(companyIdObj,casFilter);
  }
  return casFilter;
}
