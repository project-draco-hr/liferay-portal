{
  Filter casTicketValidationFilter=_casTicketValidationFilters.get(companyId);
  if (casTicketValidationFilter == null) {
    casTicketValidationFilter=new Cas20ProxyReceivingTicketValidationFilter();
    DynamicFilterConfig dynamicFilterConfig=new DynamicFilterConfig(_filterName,_servletContext);
    String serverName=PrefsPropsUtil.getString(companyId,PropsKeys.CAS_SERVER_NAME,PropsValues.CAS_SERVER_NAME);
    String serverUrl=PrefsPropsUtil.getString(companyId,PropsKeys.CAS_SERVER_URL,PropsValues.CAS_SERVER_URL);
    String loginUrl=PrefsPropsUtil.getString(companyId,PropsKeys.CAS_LOGIN_URL,PropsValues.CAS_LOGIN_URL);
    dynamicFilterConfig.addInitParameter("serverName",serverName);
    dynamicFilterConfig.addInitParameter("casServerUrlPrefix",serverUrl);
    dynamicFilterConfig.addInitParameter("casServerLoginUrl",loginUrl);
    dynamicFilterConfig.addInitParameter("redirectAfterValidation","false");
    casTicketValidationFilter.init(dynamicFilterConfig);
    _casTicketValidationFilters.put(companyId,casTicketValidationFilter);
  }
  return casTicketValidationFilter;
}
