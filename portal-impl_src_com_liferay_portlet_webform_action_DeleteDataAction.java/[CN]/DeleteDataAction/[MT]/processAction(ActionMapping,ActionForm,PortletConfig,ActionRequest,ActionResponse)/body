{
  PortletConfigImpl portletConfigImpl=(PortletConfigImpl)portletConfig;
  String portletId=portletConfigImpl.getPortletId();
  PortletPreferences prefs=PortletPreferencesFactoryUtil.getPortletSetup(actionRequest);
  String databaseTableName=prefs.getValue("databaseTableName",StringPool.BLANK);
  boolean uploadToDL=GetterUtil.getBoolean(prefs.getValue("uploadToDL",StringPool.BLANK));
  if (Validator.isNotNull(databaseTableName)) {
    ExpandoTableLocalServiceUtil.deleteTable(WebFormUtil.class.getName(),databaseTableName);
  }
  if (uploadToDL) {
    try {
      WebFormLocalServiceUtil.deleteUploadedFiles(PortalUtil.getCompany(actionRequest).getCompanyId(),portletId);
    }
 catch (    NoSuchDirectoryException e) {
    }
  }
  sendRedirect(actionRequest,actionResponse);
}
