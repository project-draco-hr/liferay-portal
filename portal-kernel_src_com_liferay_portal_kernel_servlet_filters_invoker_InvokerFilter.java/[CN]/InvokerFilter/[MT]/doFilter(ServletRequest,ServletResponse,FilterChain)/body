{
  HttpServletRequest request=(HttpServletRequest)servletRequest;
  HttpServletResponse response=(HttpServletResponse)servletResponse;
  String originalURI=getOriginalRequestURI(request);
  if (!handleLongRequestURL(request,response,originalURI)) {
    return;
  }
  request=handleNonSerializableRequest(request);
  response=HttpOnlyCookieServletResponse.getHttpOnlyCookieServletResponse(response);
  response=secureResponseHeaders(request,response);
  String uri=getURI(request,originalURI);
  request.setAttribute(WebKeys.INVOKER_FILTER_URI,uri);
  try {
    InvokerFilterChain invokerFilterChain=getInvokerFilterChain(request,uri,filterChain);
    Thread currentThread=Thread.currentThread();
    ClassLoader contextClassLoader=currentThread.getContextClassLoader();
    invokerFilterChain.setContextClassLoader(contextClassLoader);
    invokerFilterChain.doFilter(request,response);
  }
  finally {
    request.removeAttribute(WebKeys.INVOKER_FILTER_URI);
  }
}
