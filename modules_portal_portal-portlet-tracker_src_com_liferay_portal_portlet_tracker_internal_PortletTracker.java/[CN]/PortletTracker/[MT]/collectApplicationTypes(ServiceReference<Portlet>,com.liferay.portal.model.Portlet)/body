{
  Set<ApplicationType> applicationTypes=new HashSet<>();
  List<String> applicationTypeValues=StringPlus.asList(get(serviceReference,"application-type"));
  for (  String applicationTypeValue : applicationTypeValues) {
    try {
      ApplicationType applicationType=ApplicationType.parse(applicationTypeValue);
      applicationTypes.add(applicationType);
    }
 catch (    IllegalArgumentException iae) {
      _log.error("Application type " + applicationTypeValue);
      continue;
    }
  }
  if (applicationTypes.isEmpty()) {
    applicationTypes.add(ApplicationType.WIDGET);
  }
  portletModel.setApplicationTypes(applicationTypes);
}
