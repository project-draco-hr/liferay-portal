{
  String defaultPreferences=(String)serviceReference.getProperty("javax.portlet.preferences");
  if ((defaultPreferences != null) && defaultPreferences.startsWith("classpath:")) {
    Bundle bundle=serviceReference.getBundle();
    URL resource=bundle.getResource(defaultPreferences.substring("classpath:".length()));
    if (resource != null) {
      try {
        defaultPreferences=StringUtil.read(resource.openStream());
      }
 catch (      IOException e) {
        _log.error(e,e);
      }
    }
  }
  portletModel.setDefaultPreferences(defaultPreferences);
}
