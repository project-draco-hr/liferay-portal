{
  String defaultPreferences=(String)serviceReference.getProperty("javax.portlet.preferences");
  if ((defaultPreferences != null) && defaultPreferences.startsWith("classpath:")) {
    Bundle bundle=serviceReference.getBundle();
    URL url=bundle.getResource(defaultPreferences.substring("classpath:".length()));
    if (url != null) {
      try {
        defaultPreferences=StringUtil.read(url.openStream());
      }
 catch (      IOException ioe) {
        _log.error(ioe,ioe);
      }
    }
  }
  portletModel.setDefaultPreferences(defaultPreferences);
}
