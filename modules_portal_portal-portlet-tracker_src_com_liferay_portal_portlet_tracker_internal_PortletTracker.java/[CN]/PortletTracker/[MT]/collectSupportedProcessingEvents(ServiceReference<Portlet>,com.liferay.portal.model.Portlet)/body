{
  Set<QName> processingEvents=new HashSet<>();
  PortletApp portletApp=portletModel.getPortletApp();
  List<String> supportedProcessingEvents=StringPlus.asList(serviceReference.getProperty("javax.portlet.supported-processing-event"));
  for (  String supportedProcessingEvent : supportedProcessingEvents) {
    String name=supportedProcessingEvent;
    String qname=null;
    String[] parts=StringUtil.split(supportedProcessingEvent,StringPool.SEMICOLON);
    if (parts.length == 2) {
      name=parts[0];
      qname=parts[1];
    }
    QName qName=getQName(name,qname,portletApp.getDefaultNamespace());
    processingEvents.add(qName);
    Set<EventDefinition> eventDefinitions=portletApp.getEventDefinitions();
    for (    EventDefinition eventDefinition : eventDefinitions) {
      Set<QName> qNames=eventDefinition.getQNames();
      if (qNames.contains(qName)) {
        processingEvents.addAll(qNames);
      }
    }
  }
  portletModel.setProcessingEvents(processingEvents);
}
