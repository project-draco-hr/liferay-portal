{
  ServiceRegistrations serviceRegistrations=_serviceRegistrations.get(bundle);
  if (serviceRegistrations == null) {
    return;
  }
  serviceRegistrations._counter--;
  if (serviceRegistrations._counter > 0) {
    return;
  }
  serviceRegistrations=_serviceRegistrations.remove(bundle);
  if (serviceRegistrations._jspServletServiceRegistration != null) {
    serviceRegistrations._jspServletServiceRegistration.unregister();
  }
  if (serviceRegistrations._staticResourcesServletServiceRegistration != null) {
    serviceRegistrations._staticResourcesServletServiceRegistration.unregister();
  }
  if (serviceRegistrations._bundlePortletAppServiceRegistration != null) {
    serviceRegistrations._bundlePortletAppServiceRegistration.unregister();
  }
}
