{
  ServiceRegistrations serviceRegistrations=_serviceRegistrations.get(bundle);
  if (serviceRegistrations == null) {
    return;
  }
  serviceRegistrations.counter--;
  if (serviceRegistrations.counter > 0) {
    return;
  }
  serviceRegistrations=_serviceRegistrations.remove(bundle);
  if (serviceRegistrations.jsp != null) {
    serviceRegistrations.jsp.unregister();
  }
  if (serviceRegistrations.resource != null) {
    serviceRegistrations.resource.unregister();
  }
  if (serviceRegistrations.context != null) {
    serviceRegistrations.context.unregister();
  }
}
