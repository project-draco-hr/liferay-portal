{
  org.hibernate.impl.SessionFactoryImpl sessionFactoryImpl=(org.hibernate.impl.SessionFactoryImpl)_sessionFactoryImplementor;
  EventListeners eventListeners=sessionFactoryImpl.getEventListeners();
  eventListeners.setAutoFlushEventListeners(new AutoFlushEventListener[]{new DefaultAutoFlushEventListener()});
  try {
    _testAutoFlushEventListener();
    Assert.fail();
  }
 catch (  ORMException orme) {
    Assert.assertTrue(orme.getMessage(),_isCausedByException(orme,IndexOutOfBoundsException.class));
  }
 finally {
    eventListeners.setAutoFlushEventListeners(new AutoFlushEventListener[]{NestableAutoFlushEventListener.INSTANCE});
  }
}
