{
  try (WorkflowHandlerInvocationCounter<FileEntry> workflowHandlerInvocationCounter=new WorkflowHandlerInvocationCounter<>(DLFileEntryConstants.getClassName())){
    FileEntry fileEntry=addFileEntry(group.getGroupId(),parentFolder.getFolderId());
    Assert.assertEquals(1,workflowHandlerInvocationCounter.getCount("updateStatus",int.class,Map.class));
    String version=fileEntry.getVersion();
    updateFileEntry(group.getGroupId(),fileEntry.getFileEntryId(),RandomTestUtil.randomString(),true);
    Assert.assertEquals(2,workflowHandlerInvocationCounter.getCount("updateStatus",int.class,Map.class));
    ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(group.getGroupId());
    DLAppServiceUtil.revertFileEntry(fileEntry.getFileEntryId(),version,serviceContext);
    Assert.assertEquals(3,workflowHandlerInvocationCounter.getCount("updateStatus",int.class,Map.class));
  }
 }
