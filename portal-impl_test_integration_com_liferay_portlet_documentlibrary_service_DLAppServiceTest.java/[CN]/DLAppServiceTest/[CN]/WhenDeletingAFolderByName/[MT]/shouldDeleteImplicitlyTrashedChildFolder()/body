{
  int initialFoldersCount=DLAppServiceUtil.getFoldersCount(group.getGroupId(),parentFolder.getFolderId());
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(group.getGroupId());
  Folder folder=DLAppServiceUtil.addFolder(group.getGroupId(),parentFolder.getFolderId(),RandomTestUtil.randomString(),RandomTestUtil.randomString(),serviceContext);
  DLAppServiceUtil.addFolder(group.getGroupId(),folder.getFolderId(),RandomTestUtil.randomString(),RandomTestUtil.randomString(),serviceContext);
  DLTrashServiceUtil.moveFolderToTrash(folder.getFolderId());
  folder=DLAppServiceUtil.getFolder(folder.getFolderId());
  DLAppServiceUtil.deleteFolder(folder.getRepositoryId(),folder.getParentFolderId(),folder.getName());
  int foldersCount=DLAppServiceUtil.getFoldersCount(group.getGroupId(),parentFolder.getFolderId());
  Assert.assertEquals(initialFoldersCount,foldersCount);
}
