{
  _users=new User[ServiceTestUtil.THREAD_COUNT];
  for (int i=0; i < ServiceTestUtil.THREAD_COUNT; i++) {
    User user=UserTestUtil.addUser("DLAppServiceTest" + (i + 1),group.getGroupId());
    _users[i]=user;
  }
  DoAsUserThread[] doAsUserThreads=new DoAsUserThread[_users.length];
  _fileEntryIds=new long[_users.length];
  int successCount=0;
  for (int i=0; i < doAsUserThreads.length; i++) {
    doAsUserThreads[i]=new AddFileEntryThread(_users[i].getUserId(),i);
  }
  successCount=runUserThreads(doAsUserThreads);
  Assert.assertEquals("Only " + successCount + " out of "+ _users.length+ " threads added successfully",_users.length,successCount);
  for (int i=0; i < doAsUserThreads.length; i++) {
    doAsUserThreads[i]=new GetFileEntryThread(_users[i].getUserId(),i);
  }
  successCount=runUserThreads(doAsUserThreads);
  Assert.assertEquals("Only " + successCount + " out of "+ _users.length+ " threads retrieved successfully",_users.length,successCount);
}
