{
  AtomicInteger addCounter=registerDLSyncEventProcessorMessageListener(DLSyncConstants.EVENT_ADD);
  AtomicInteger deleteCounter=registerDLSyncEventProcessorMessageListener(DLSyncConstants.EVENT_DELETE);
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(group.getGroupId(),TestPropsValues.getUserId());
  Folder folder=DLAppServiceUtil.addFolder(group.getGroupId(),parentFolder.getFolderId(),RandomTestUtil.randomString(),RandomTestUtil.randomString(),serviceContext);
  DLAppServiceUtil.moveFolder(folder.getFolderId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,ServiceContextTestUtil.getServiceContext());
  Assert.assertEquals(2,addCounter.get());
  Assert.assertEquals(1,deleteCounter.get());
}
