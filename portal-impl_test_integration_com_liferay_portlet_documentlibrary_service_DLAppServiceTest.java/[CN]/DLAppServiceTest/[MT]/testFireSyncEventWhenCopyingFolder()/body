{
  AtomicInteger counter=registerDLSyncEventProcessorMessageListener(DLSyncConstants.EVENT_ADD);
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(group.getGroupId());
  Folder folder=DLAppServiceUtil.addFolder(group.getGroupId(),parentFolder.getFolderId(),RandomTestUtil.randomString(),StringPool.BLANK,serviceContext);
  DLAppServiceUtil.addFolder(group.getGroupId(),folder.getFolderId(),RandomTestUtil.randomString(),StringPool.BLANK,serviceContext);
  DLAppServiceUtil.copyFolder(folder.getRepositoryId(),folder.getFolderId(),parentFolder.getParentFolderId(),folder.getName(),folder.getDescription(),serviceContext);
  Assert.assertEquals(4,counter.get());
}
