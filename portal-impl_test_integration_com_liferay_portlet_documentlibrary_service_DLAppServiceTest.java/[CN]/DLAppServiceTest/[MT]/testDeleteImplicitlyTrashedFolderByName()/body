{
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(group.getGroupId());
  int initialFolderCount=DLAppServiceUtil.getFoldersCount(group.getGroupId(),parentFolder.getFolderId());
  Folder parent=DLAppServiceUtil.addFolder(group.getGroupId(),parentFolder.getFolderId(),RandomTestUtil.randomString(),RandomTestUtil.randomString(),serviceContext);
  DLAppServiceUtil.addFolder(group.getGroupId(),parent.getFolderId(),RandomTestUtil.randomString(),RandomTestUtil.randomString(),serviceContext);
  DLAppServiceUtil.moveFolderToTrash(parent.getFolderId());
  parent=DLAppServiceUtil.getFolder(parent.getFolderId());
  DLAppServiceUtil.deleteFolder(parent.getRepositoryId(),parent.getParentFolderId(),parent.getName());
  int afterDeleteFolderCount=DLAppServiceUtil.getFoldersCount(group.getGroupId(),parentFolder.getFolderId());
  Assert.assertEquals(initialFolderCount,afterDeleteFolderCount);
}
