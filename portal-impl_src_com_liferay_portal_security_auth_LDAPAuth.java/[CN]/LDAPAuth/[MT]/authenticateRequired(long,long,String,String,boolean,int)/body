{
  if (allowOmniadmin && (authenticateOmniadmin(companyId,emailAddress,screenName,userId) == SUCCESS)) {
    return SUCCESS;
  }
  if (PrefsPropsUtil.getBoolean(companyId,PropsKeys.LDAP_AUTH_REQUIRED) || !PrefsPropsUtil.getBoolean(companyId,PropsKeys.LDAP_IMPORT_USER_PASSWORD_ENABLED)) {
    return failureCode;
  }
 else {
    return SUCCESS;
  }
}
