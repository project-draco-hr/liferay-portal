{
  Layout layout=(Layout)request.getAttribute(WebKeys.LAYOUT);
  List<LayoutTypePortlet> layoutTypePortlets=getLayoutTypePortlets(layout);
  for (  LayoutTypePortlet layoutTypePortlet : layoutTypePortlets) {
    List<Portlet> portlets=null;
    try {
      portlets=layoutTypePortlet.getAllPortlets();
    }
 catch (    Exception e) {
      throw new PortletContainerException(e);
    }
    for (    Portlet portlet : portlets) {
      for (      Event event : events) {
        javax.xml.namespace.QName qName=event.getQName();
        QName processingQName=portlet.getProcessingEvent(qName.getNamespaceURI(),qName.getLocalPart());
        if (processingQName == null) {
          continue;
        }
        processEvent(request,response,portlet,layoutTypePortlet.getLayout(),event);
      }
    }
  }
}
