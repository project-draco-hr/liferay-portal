{
  BatchablePipe<String,Integer> batchablePipe=new BatchablePipe<String,Integer>();
  IncreasableEntry<String,Integer> increasbleEntry1=new IntegerIncreasableEntry("1st",1);
  Assert.assertTrue(batchablePipe.put(increasbleEntry1));
  Assert.assertTrue(batchablePipe.put(increasbleEntry1));
  Assert.assertEquals(increasbleEntry1,batchablePipe.take());
  Assert.assertEquals(increasbleEntry1,batchablePipe.take());
  IncreasableEntry<String,Integer> increasbleEntry2=new IntegerIncreasableEntry("2nd",1);
  IncreasableEntry<String,Integer> increasbleEntry3=new IntegerIncreasableEntry("2nd",2);
  Assert.assertTrue(batchablePipe.put(increasbleEntry2));
  Assert.assertFalse(batchablePipe.put(increasbleEntry3));
  IncreasableEntry<String,Integer> resultIncreasbleEntry=batchablePipe.take();
  Assert.assertNotNull(resultIncreasbleEntry);
  Assert.assertEquals("2nd",resultIncreasbleEntry.getKey());
  Assert.assertEquals(3,(int)resultIncreasbleEntry.getValue());
  Assert.assertNull(batchablePipe.take());
  IncreasableEntry<String,Integer> increasbleEntry4=new IntegerIncreasableEntry("3rd",1);
  IncreasableEntry<String,Integer> increasbleEntry5=new IntegerIncreasableEntry("4th",1);
  IncreasableEntry<String,Integer> increasbleEntry6=new IntegerIncreasableEntry("4th",2);
  IncreasableEntry<String,Integer> increasbleEntry7=new IntegerIncreasableEntry("3rd",2);
  IncreasableEntry<String,Integer> increasbleEntry8=new IntegerIncreasableEntry("5th",1);
  Assert.assertTrue(batchablePipe.put(increasbleEntry4));
  Assert.assertTrue(batchablePipe.put(increasbleEntry5));
  Assert.assertFalse(batchablePipe.put(increasbleEntry6));
  Assert.assertFalse(batchablePipe.put(increasbleEntry7));
  Assert.assertTrue(batchablePipe.put(increasbleEntry8));
  resultIncreasbleEntry=batchablePipe.take();
  Assert.assertNotNull(resultIncreasbleEntry);
  Assert.assertEquals("3rd",resultIncreasbleEntry.getKey());
  Assert.assertEquals(3,(int)resultIncreasbleEntry.getValue());
  resultIncreasbleEntry=batchablePipe.take();
  Assert.assertNotNull(resultIncreasbleEntry);
  Assert.assertEquals("4th",resultIncreasbleEntry.getKey());
  Assert.assertEquals(3,(int)resultIncreasbleEntry.getValue());
  resultIncreasbleEntry=batchablePipe.take();
  Assert.assertNotNull(resultIncreasbleEntry);
  Assert.assertEquals("5th",resultIncreasbleEntry.getKey());
  Assert.assertEquals(1,(int)resultIncreasbleEntry.getValue());
  Assert.assertNull(batchablePipe.take());
}
