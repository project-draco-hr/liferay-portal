{
  String value=StringPool.BLANK;
  if (hasUserPreferenes()) {
    value=_portalPreferences.getValue(CustomizedPages.namespacePlid(getPlid()),key,StringPool.NULL);
    if (value.equals(StringPool.NULL)) {
      if (hasTemplate()) {
        value=getTemplateProperty(key);
      }
 else {
        value=getTypeSettingsProperties().getProperty(key);
      }
      if (Validator.isNotNull(value)) {
        String[] portletIds=StringUtil.split(value);
        String[] result=new String[portletIds.length];
        for (int i=0; i < portletIds.length; i++) {
          if (portletIds[i].contains(PortletConstants.INSTANCE_SEPARATOR)) {
            String rootPortletId=PortletConstants.getRootPortletId(portletIds[i]);
            result[i]=rootPortletId + getFullInstanceSeparator();
            copyPreferences(portletIds[i],result[i]);
          }
 else {
            result[i]=portletIds[i];
          }
        }
        value=StringUtil.merge(result);
        setUserPreference(key,value);
      }
    }
  }
  return value;
}
