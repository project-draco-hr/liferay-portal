{
  if (!hasUserPreferences()) {
    return;
  }
  long plid=getPlid();
  Set<String> customPortletIds=new HashSet<String>();
  for (  String columnId : getColumns()) {
    String value=_portalPreferences.getValue(CustomizedPages.namespacePlid(plid),columnId);
    for (    String customPortletId : StringUtil.split(value)) {
      customPortletIds.add(customPortletId);
    }
  }
  try {
    onRemoveFromLayout(customPortletIds.toArray(new String[customPortletIds.size()]));
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
  _portalPreferences.resetValues(CustomizedPages.namespacePlid(plid));
  _portalPreferences.setValue(CustomizedPages.namespacePlid(plid),_MODIFIED_DATE,_dateFormat.format(new Date()));
}
