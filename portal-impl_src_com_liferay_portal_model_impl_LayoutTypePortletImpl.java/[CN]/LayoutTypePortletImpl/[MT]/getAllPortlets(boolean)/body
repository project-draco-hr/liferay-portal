{
  List<Portlet> filteredPortlets=new ArrayList<Portlet>();
  List<Portlet> portlets=getAllPortlets();
  for (  Portlet portlet : portlets) {
    if (portlet.isSystem() && !includeSystem) {
      continue;
    }
    filteredPortlets.add(portlet);
  }
  return filteredPortlets;
}
