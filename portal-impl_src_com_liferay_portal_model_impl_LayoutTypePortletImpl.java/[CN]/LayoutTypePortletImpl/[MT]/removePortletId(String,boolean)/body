{
  LayoutTemplate layoutTemplate=getLayoutTemplate();
  List columns=layoutTemplate.getColumns();
  for (int i=0; i < columns.size(); i++) {
    String columnId=(String)columns.get(i);
    String columnValue=getTypeSettingsProperties().getProperty(columnId);
    columnValue=StringUtil.remove(columnValue,portletId);
    getTypeSettingsProperties().setProperty(columnId,columnValue);
  }
  if (modeAndState) {
    removeStatesPortletId(portletId);
    removeModesPortletId(portletId);
  }
  Layout layout=getLayout();
  try {
    Portlet portlet=PortletLocalServiceUtil.getPortletById(layout.getCompanyId(),portletId);
    if (portlet != null) {
      PortletLayoutListener portletLayoutListener=(PortletLayoutListener)portlet.getPortletLayoutListener();
      if (_enablePortletLayoutListener && (portletLayoutListener != null)) {
        portletLayoutListener.onRemoveFromLayout(portletId,layout.getPlid());
      }
    }
  }
 catch (  Exception e) {
    _log.error("Unable to fire portlet layout listener event",e);
  }
}
