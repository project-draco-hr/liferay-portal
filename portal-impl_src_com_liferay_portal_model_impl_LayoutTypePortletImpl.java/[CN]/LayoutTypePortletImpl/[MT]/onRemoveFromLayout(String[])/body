{
  List<String> portletIdList=new UniqueList<String>();
  for (  String portletId : portletIds) {
    removeStatesPortletId(portletId);
    removeModesPortletId(portletId);
    String rootPortletId=PortletConstants.getRootPortletId(portletId);
    portletIdList.add(portletId);
    if (rootPortletId.equals(PortletKeys.NESTED_PORTLETS)) {
      String portletNamespace=PortalUtil.getPortletNamespace(portletId);
      UnicodeProperties typeSettingsProperties=getTypeSettingsProperties();
      for (      Map.Entry<String,String> entry : typeSettingsProperties.entrySet()) {
        String key=entry.getKey();
        if (key.startsWith(portletNamespace)) {
          String nestedPortletIds=entry.getValue();
          for (          String curPortletId : StringUtil.split(nestedPortletIds)) {
            removeStatesPortletId(curPortletId);
            removeModesPortletId(curPortletId);
            portletIdList.add(curPortletId);
          }
        }
      }
      removeNestedColumns(portletNamespace);
    }
  }
  try {
    PortletLocalServiceUtil.removePortletByPreferences(getPlid(),getCompanyId(),portletIdList.toArray(new String[portletIdList.size()]));
  }
 catch (  PortalException pe) {
    _log.error(pe,pe);
  }
}
