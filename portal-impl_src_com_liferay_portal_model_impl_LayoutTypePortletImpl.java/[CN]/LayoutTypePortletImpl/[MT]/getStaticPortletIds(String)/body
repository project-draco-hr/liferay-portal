{
  Layout layout=getLayout();
  if (hasSourcePrototypeLayout()) {
    layout=_sourcePrototypeLayout;
  }
  String selector1=StringPool.BLANK;
  Group group=layout.getGroup();
  if (group.isUser()) {
    selector1=LayoutTypePortletConstants.STATIC_PORTLET_USER_SELECTOR;
  }
 else   if (group.isOrganization()) {
    selector1=LayoutTypePortletConstants.STATIC_PORTLET_ORGANIZATION_SELECTOR;
  }
 else   if (group.isRegularSite()) {
    selector1=LayoutTypePortletConstants.STATIC_PORTLET_REGULAR_SITE_SELECTOR;
  }
  String selector2=layout.getFriendlyURL();
  String[] portletIds=PropsUtil.getArray(position,new Filter(selector1,selector2));
  for (int i=0; i < portletIds.length; i++) {
    portletIds[i]=JS.getSafeName(portletIds[i]);
  }
  return portletIds;
}
