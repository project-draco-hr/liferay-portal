{
  Layout layout=getLayout();
  String selector1=StringPool.BLANK;
  Group group=null;
  try {
    group=layout.getGroup();
  }
 catch (  PortalException e) {
    _log.error("Cannot find group with id " + layout.getGroupId());
    return new String[0];
  }
  if (group.isUser()) {
    selector1=LayoutTypePortletConstants.STATIC_PORTLET_USER_SELECTOR;
  }
 else   if (group.isOrganization()) {
    selector1=LayoutTypePortletConstants.STATIC_PORTLET_ORGANIZATION_SELECTOR;
  }
 else   if (group.isRegularSite()) {
    selector1=LayoutTypePortletConstants.STATIC_PORTLET_REGULAR_SITE_SELECTOR;
  }
  String selector2=layout.getFriendlyURL();
  String[] portletIds=PropsUtil.getArray(position,new Filter(selector1,selector2));
  for (int i=0; i < portletIds.length; i++) {
    portletIds[i]=JS.getSafeName(portletIds[i]);
  }
  return portletIds;
}
