{
  String nestedLayoutTemplateIds=GetterUtil.getString(getTypeSettingsProperties().getProperty(NESTED_LAYOUT_TEMPLATE_IDS));
  if (nestedLayoutTemplateIds.indexOf(containerId + NESTED_LAYOUT_TEMPLATE_SEPARATOR + template.getLayoutTemplateId()) == -1) {
    if (nestedLayoutTemplateIds.indexOf(containerId + NESTED_LAYOUT_TEMPLATE_SEPARATOR) > -1) {
      nestedLayoutTemplateIds=StringUtils.replace(nestedLayoutTemplateIds,containerId + NESTED_LAYOUT_TEMPLATE_SEPARATOR + ".*?,",",");
    }
    nestedLayoutTemplateIds+=containerId + NESTED_LAYOUT_TEMPLATE_SEPARATOR + template.getLayoutTemplateId();
    getTypeSettingsProperties().setProperty(NESTED_LAYOUT_TEMPLATE_IDS,nestedLayoutTemplateIds);
  }
}
