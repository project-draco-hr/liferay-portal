{
  int threadCount=25;
  DoAsUserThread[] threads=new DoAsUserThread[threadCount];
  _fileEntryIds=new long[threadCount];
  for (int i=0; i < 2; i++) {
    for (int j=0; j < threads.length; j++) {
      if (i == 0) {
        threads[j]=new AddFileEntryThread(_userId,j);
      }
 else {
        threads[j]=new RetrieveFileEntryThread(_userId,j);
      }
    }
    for (    DoAsUserThread thread : threads) {
      thread.start();
    }
    for (    DoAsUserThread thread : threads) {
      thread.join();
    }
    int successCount=0;
    for (    DoAsUserThread thread : threads) {
      if (thread.isSuccess()) {
        successCount++;
      }
    }
    String message="Only " + successCount + " out of "+ threadCount;
    if (i == 0) {
      message+=" threads added file entries successfully";
    }
 else {
      message+=" threads retrieved file entries successfully";
    }
    assertTrue(message,successCount == threadCount);
  }
}
