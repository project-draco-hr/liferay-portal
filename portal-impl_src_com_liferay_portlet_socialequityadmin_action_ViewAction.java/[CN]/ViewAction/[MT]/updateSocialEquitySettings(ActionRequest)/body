{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long scopeGroupId=themeDisplay.getScopeGroupId();
  boolean enabled=ParamUtil.getBoolean(actionRequest,"socialEquityEnabled",false);
  SocialEquityGroupSettingLocalServiceUtil.updateEquityGroupSetting(scopeGroupId,Group.class.getName(),SocialEquitySettingConstants.TYPE_INFORMATION,enabled);
  SocialEquityGroupSettingLocalServiceUtil.updateEquityGroupSetting(scopeGroupId,Group.class.getName(),SocialEquitySettingConstants.TYPE_PARTICIPATION,enabled);
  String[] classNames=PortalUtil.getSocialEquityClassNames();
  for (  String className : classNames) {
    List<SocialEquityActionMapping> mergedEquityActionMappings=getMergedEquityActionMappings(actionRequest,className);
    SocialEquitySettingLocalServiceUtil.updateEquitySettings(scopeGroupId,className,mergedEquityActionMappings);
    boolean socialEquityEnabled=ParamUtil.getBoolean(actionRequest,className + ".socialEquityEnabled",false);
    SocialEquityGroupSettingLocalServiceUtil.updateEquityGroupSetting(scopeGroupId,className,SocialEquitySettingConstants.TYPE_INFORMATION,socialEquityEnabled);
    SocialEquityGroupSettingLocalServiceUtil.updateEquityGroupSetting(scopeGroupId,className,SocialEquitySettingConstants.TYPE_PARTICIPATION,socialEquityEnabled);
  }
}
