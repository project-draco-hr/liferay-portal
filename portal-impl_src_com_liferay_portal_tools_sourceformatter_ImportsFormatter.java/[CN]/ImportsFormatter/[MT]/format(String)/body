{
  if (imports.contains("/*") || imports.contains("*/") || imports.contains("//")) {
    return imports + "\n";
  }
  List<ImportPackage> importPackages=new ArrayList<ImportPackage>();
  UnsyncBufferedReader unsyncBufferedReader=new UnsyncBufferedReader(new UnsyncStringReader(imports));
  String line=null;
  while ((line=unsyncBufferedReader.readLine()) != null) {
    ImportPackage importPackage=createImportPackage(line);
    if ((importPackage != null) && !importPackages.contains(importPackage)) {
      importPackages.add(importPackage);
    }
  }
  importPackages=ListUtil.sort(importPackages);
  StringBundler sb=new StringBundler(3 * importPackages.size());
  String temp=null;
  for (int i=0; i < importPackages.size(); i++) {
    ImportPackage importPackage=importPackages.get(i);
    String s=importPackage.getImport();
    int pos=s.indexOf(".");
    pos=s.indexOf(".",pos + 1);
    if (pos == -1) {
      pos=s.indexOf(".");
    }
    String packageLevel=s.substring(0,pos);
    if ((i != 0) && !packageLevel.equals(temp)) {
      sb.append("\n");
    }
    temp=packageLevel;
    sb.append(importPackage.getLine());
    sb.append("\n");
  }
  return sb.toString();
}
