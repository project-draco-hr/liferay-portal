{
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  KBArticle kbArticle=(KBArticle)portletRequest.getAttribute("article_icons.jsp-kb_article");
  PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
  long scopeGroupId=themeDisplay.getScopeGroupId();
  String rootPortletId=themeDisplay.getPortletDisplay().getRootPortletId();
  if ((AdminPermission.contains(permissionChecker,scopeGroupId,KBActionKeys.ADD_KB_ARTICLE) && rootPortletId.equals(KBPortletKeys.KNOWLEDGE_BASE_ADMIN)) || (DisplayPermission.contains(permissionChecker,scopeGroupId,KBActionKeys.ADD_KB_ARTICLE) && DisplayPermission.contains(permissionChecker,scopeGroupId,KBActionKeys.ADMINISTRATOR) && rootPortletId.equals(KBPortletKeys.KNOWLEDGE_BASE_DISPLAY))) {
    return true;
  }
  return false;
}
