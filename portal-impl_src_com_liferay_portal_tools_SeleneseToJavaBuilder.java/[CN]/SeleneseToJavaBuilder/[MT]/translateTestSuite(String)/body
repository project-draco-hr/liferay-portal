{
  int x=fileName.lastIndexOf(StringPool.SLASH);
  int y=fileName.indexOf(StringPool.PERIOD);
  String testPackagePath=StringUtil.replace(fileName.substring(0,x),StringPool.SLASH,StringPool.PERIOD);
  String testName=fileName.substring(x + 1,y);
  String testFileName=fileName.substring(0,y) + ".java";
  StringBundler sb=new StringBundler();
  sb.append("package ");
  sb.append(testPackagePath);
  sb.append(";\n");
  sb.append("import com.liferay.portalweb.portal.BaseTestSuite;\n");
  sb.append("import com.liferay.portalweb.portal.StopSeleniumTest;\n");
  String content=readFile(fileName);
  content=formatTestSuite(fileName,content);
  x=0;
  y=0;
  while (content.indexOf("<a href=\"",x) != -1) {
    x=content.indexOf("<a href=\"",x) + 9;
    y=content.indexOf("\">",x);
    String testCaseName=content.substring(x,y);
    if (!testCaseName.contains("..")) {
      continue;
    }
    if (!testCaseName.contains("../portalweb/")) {
      throw new IllegalArgumentException(fileName + " has improper relative path");
    }
    testCaseName=StringUtil.replace(testCaseName,"../../portalweb/","../");
    int z=fileName.lastIndexOf(StringPool.SLASH);
    String importClassName=fileName.substring(0,z);
    int count=StringUtil.count(testCaseName,"..");
    for (int i=0; i < count; i++) {
      z=importClassName.lastIndexOf(StringPool.SLASH);
      importClassName=fileName.substring(0,z);
    }
    z=testCaseName.lastIndexOf("../",z);
    importClassName+=testCaseName.substring(z + 2,testCaseName.length() - 5);
    importClassName=StringUtil.replace(importClassName,StringPool.SLASH,StringPool.PERIOD);
    sb.append("import ");
    sb.append(importClassName);
    sb.append(";\n");
  }
  sb.append("import junit.framework.Test;\n");
  sb.append("import junit.framework.TestSuite;\n");
  sb.append("public class ");
  sb.append(testName);
  sb.append(" extends BaseTestSuite {");
  sb.append("public static Test suite() {");
  sb.append("TestSuite testSuite = new TestSuite();");
  x=content.indexOf("</b></td></tr>");
  y=content.indexOf("</tbody>");
  content=content.substring(x + 15,y);
  x=0;
  y=0;
  while (true) {
    x=content.indexOf("\">",x);
    y=content.indexOf("</a>",x);
    if ((x == -1) || (y == -1)) {
      break;
    }
    String className=content.substring(x + 2,y);
    x+=className.length();
    sb.append("testSuite.addTestSuite(");
    sb.append(className);
    sb.append(".class);");
  }
  sb.append("return testSuite;");
  sb.append("}");
  sb.append("}");
  writeFile(testFileName,sb.toString(),true);
}
