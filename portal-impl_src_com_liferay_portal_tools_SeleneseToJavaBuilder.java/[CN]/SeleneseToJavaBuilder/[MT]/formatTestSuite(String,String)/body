{
  if (!oldContent.contains("..")) {
    return oldContent;
  }
  String newContent=oldContent;
  int x=0;
  int y=0;
  while (oldContent.indexOf("<a href=\"",x) != -1) {
    x=oldContent.indexOf("<a href=\"",x) + 9;
    y=oldContent.indexOf("\">",x);
    String testCaseName=oldContent.substring(x,y);
    if (!testCaseName.contains("..")) {
      continue;
    }
    int z=fileName.lastIndexOf(StringPool.SLASH);
    String importClassName=fileName.substring(0,z);
    if (!FileUtil.exists(_basedir + "/" + importClassName+ "/"+ testCaseName)) {
      throw new IllegalArgumentException(fileName + " has improper relative path");
    }
    if (testCaseName.contains("../portalweb/")) {
      continue;
    }
    int count=StringUtil.count(testCaseName,"..");
    for (int i=0; i < count; i++) {
      z=importClassName.lastIndexOf(StringPool.SLASH);
      importClassName=fileName.substring(0,z);
    }
    z=testCaseName.lastIndexOf("../",z);
    importClassName+=testCaseName.substring(z + 2);
    count=StringUtil.count(fileName,"/") - 2;
    String relativePath="";
    for (int i=0; i < count; i++) {
      relativePath+="../";
    }
    importClassName=StringUtil.replace(importClassName,"com/liferay/",relativePath);
    newContent=StringUtil.replace(newContent,testCaseName,importClassName);
  }
  if (!oldContent.equals(newContent)) {
    writeFile(fileName,newContent,false);
  }
  return newContent;
}
