{
  int x=fileName.lastIndexOf(StringPool.SLASH);
  String dirName=fileName.substring(0,x);
  x=minimizeTestFileName.lastIndexOf(StringPool.SLASH);
  String minimizeTestDirName=minimizeTestFileName.substring(0,x);
  if (dirName.equals(minimizeTestDirName)) {
    return;
  }
  String minimizeTestName=minimizeTestFileName.substring(x + 1);
  x=fileName.indexOf("portalweb");
  int count=StringUtil.count(fileName.substring(x),StringPool.SLASH);
  String relativeMinimizeTestFileName="";
  while (count > 0) {
    relativeMinimizeTestFileName+="../";
    count--;
  }
  relativeMinimizeTestFileName+=minimizeTestFileName.substring(minimizeTestFileName.lastIndexOf("/",x) + 1);
  File minimizeTestFile=new File(_basedir + "/" + dirName+ "/"+ relativeMinimizeTestFileName);
  if (!minimizeTestFile.exists()) {
    throw new IllegalArgumentException(minimizeTestFile.toString() + " does not exist");
  }
  String[] subfileNames=FileUtil.listFiles(_basedir + "/" + dirName);
  for (  String subfileName : subfileNames) {
    if (!subfileName.endsWith("Tests.html")) {
      continue;
    }
    File subfile=new File(_basedir + "/" + dirName+ "/"+ subfileName);
    String content=FileUtil.read(subfile);
    content=StringUtil.replace(content,"\"" + minimizeTestName + "\"","\"" + relativeMinimizeTestFileName + "\"");
    FileUtil.write(subfile,content);
  }
  FileUtil.delete(_basedir + "/" + fileName);
  FileUtil.delete(_basedir + "/" + fileName.substring(0,fileName.length() - 5)+ ".java");
}
