{
  try {
    Company company=_getWSRPCompany();
    Organization organization=_getOrganization(company.getCompanyId(),consumerId);
    if (organization != null) {
      List<User> users=UserLocalServiceUtil.getOrganizationUsers(organization.getOrganizationId());
      for (      User user : users) {
        if (user.getPrimaryKey() != _getAuthlessUser().getPrimaryKey()) {
          UserLocalServiceUtil.deleteUser(user);
        }
      }
      UserLocalServiceUtil.clearOrganizationUsers(organization.getOrganizationId());
      OrganizationLocalServiceUtil.deleteOrganization(organization.getOrganizationId());
    }
  }
 catch (  Exception ex) {
    _log.error(ex,ex);
    throw new ProducerException(ex);
  }
}
