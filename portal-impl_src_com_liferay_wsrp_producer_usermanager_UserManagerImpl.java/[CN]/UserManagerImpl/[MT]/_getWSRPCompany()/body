{
  if (_wsrpCompany == null) {
    try {
      _wsrpCompany=CompanyLocalServiceUtil.getCompanyByVirtualHost(CompanyConstants.WSRP_VIRTUAL_HOST);
    }
 catch (    NoSuchCompanyException nsce) {
      try {
        _wsrpCompany=CompanyServiceUtil.addCompany(_MAIL_SERVER,CompanyConstants.WSRP_VIRTUAL_HOST,_MAIL_SERVER);
      }
 catch (      Exception e) {
        _log.error(e,e);
        throw new ProducerException(e);
      }
    }
catch (    Exception e) {
      _log.error(e,e);
      throw new ProducerException(e);
    }
  }
  return _wsrpCompany;
}
