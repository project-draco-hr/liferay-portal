{
  Repository repository=repositoryPersistence.fetchByPrimaryKey(repositoryId);
  if (repository != null) {
    SystemEventHierarchyEntryThreadLocal.push(Repository.class);
    try {
      expandoValueLocalService.deleteValues(Repository.class.getName(),repositoryId);
      DLFolder dlFolder=dlFolderLocalService.fetchDLFolder(repository.getDlFolderId());
      if (dlFolder != null) {
        dlFolderLocalService.deleteDLFolder(dlFolder);
      }
      repositoryPersistence.remove(repository);
      repositoryEntryPersistence.removeByRepositoryId(repositoryId);
    }
  finally {
      SystemEventHierarchyEntryThreadLocal.pop(Repository.class);
    }
    systemEventLocalService.addSystemEvent(0,repository.getGroupId(),Repository.class.getName(),repositoryId,repository.getUuid(),null,SystemEventConstants.TYPE_DELETE,StringPool.BLANK);
  }
  return repository;
}
