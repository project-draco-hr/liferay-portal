{
  Repository repository=repositoryPersistence.fetchByPrimaryKey(repositoryId);
  if (repository == null) {
    return null;
  }
  try {
    LocalRepository localRepository=repositoryProvider.getLocalRepository(repositoryId);
    if (localRepository.isCapabilityProvided(RepositoryEventTriggerCapability.class)) {
      RepositoryEventTriggerCapability repositoryEventTriggerCapability=localRepository.getCapability(RepositoryEventTriggerCapability.class);
      repositoryEventTriggerCapability.trigger(RepositoryEventType.Delete.class,LocalRepository.class,localRepository);
    }
  }
 catch (  UndeployedExternalRepositoryException uere) {
    if (_log.isWarnEnabled()) {
      _log.warn("Repository deletion events for this repository will not " + "be raised",uere);
    }
  }
  return repositoryLocalService.deleteRepository(repository);
}
