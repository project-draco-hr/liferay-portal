{
  Repository repository=repositoryPersistence.fetchByPrimaryKey(repositoryId);
  if (repository != null) {
    SystemEventHierarchyEntryThreadLocal.push(Repository.class,repositoryId);
    try {
      expandoValueLocalService.deleteValues(Repository.class.getName(),repositoryId);
      try {
        dlFolderLocalService.deleteFolder(repository.getDlFolderId());
      }
 catch (      NoSuchFolderException nsfe) {
      }
      repositoryPersistence.remove(repository);
      repositoryEntryPersistence.removeByRepositoryId(repositoryId);
      systemEventLocalService.addSystemEvent(0,repository.getGroupId(),Repository.class.getName(),repositoryId,repository.getUuid(),null,SystemEventConstants.TYPE_DELETE,StringPool.BLANK);
    }
  finally {
      SystemEventHierarchyEntryThreadLocal.pop(Repository.class,repositoryId);
    }
  }
  return repository;
}
