{
  long repositoryId=getInternalRepositoryId(folderId,fileEntryId,fileVersionId,fileShortcutId);
  if (repositoryId != 0) {
    return repositoryId;
  }
  if (fileShortcutId != 0) {
    throw new IllegalArgumentException();
  }
  repositoryId=getExternalRepositoryId(folderId,fileEntryId,fileVersionId);
  if (repositoryId == 0) {
    throw new InvalidRepositoryIdException(String.format("No folder or repository entry found with folder ID %s",folderId));
  }
  return repositoryId;
}
