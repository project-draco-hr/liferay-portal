{
  com.liferay.portal.kernel.repository.Repository repositoryImpl=_repositoriesByRepositoryId.get(repositoryId);
  if (repositoryImpl != null) {
    return repositoryImpl;
  }
  long classNameId=getRepositoryClassNameId(repositoryId);
  if (classNameId == classNameLocalService.getClassNameId(LiferayRepository.class.getName())) {
    repositoryImpl=new LiferayRepository(repositoryLocalService,repositoryService,dlAppHelperLocalService,dlFileEntryLocalService,dlFileEntryService,dlFileEntryTypeLocalService,dlFileVersionLocalService,dlFileVersionService,dlFolderLocalService,dlFolderService,resourceLocalService,repositoryId);
  }
 else {
    repositoryImpl=createRepositoryImpl(repositoryId,classNameId);
  }
  checkRepository(repositoryId);
  _repositoriesByRepositoryId.put(repositoryId,repositoryImpl);
  return repositoryImpl;
}
