{
  LocalRepository localRepositoryImpl=_localRepositoriesByRepositoryId.get(repositoryId);
  if (localRepositoryImpl != null) {
    return localRepositoryImpl;
  }
  long classNameId=getRepositoryClassNameId(repositoryId);
  if (classNameId == getDefaultClassNameId()) {
    localRepositoryImpl=new LiferayLocalRepository(repositoryLocalService,repositoryService,dlAppHelperLocalService,dlFileEntryLocalService,dlFileEntryService,dlFileVersionLocalService,dlFileVersionService,dlFolderLocalService,dlFolderService,repositoryId);
  }
 else {
    BaseRepository baseRepository=createRepositoryImpl(repositoryId,classNameId);
    localRepositoryImpl=baseRepository.getLocalRepository();
  }
  checkRepository(repositoryId);
  _localRepositoriesByRepositoryId.put(repositoryId,localRepositoryImpl);
  return localRepositoryImpl;
}
