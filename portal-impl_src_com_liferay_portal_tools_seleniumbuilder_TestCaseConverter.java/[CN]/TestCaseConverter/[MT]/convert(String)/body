{
  Map<String,Object> context=getContext();
  context.put("macroNameStack",new FreeMarkerStack());
  context.put("testCaseName",testCaseName);
  String javaContent=processTemplate("test_case.ftl",context);
  seleniumBuilderFileUtil.writeFile(seleniumBuilderContext.getTestCaseJavaFileName(testCaseName),javaContent,true);
  File file=new File(System.getProperty("user.dir"));
  file=file.getParentFile();
  String buildPath=file.toString();
  if (seleniumBuilderContext.getPropertyContainer().size() != 0) {
    String propertiesContent=processTemplate("test_case_properties.ftl",context);
    seleniumBuilderFileUtil.writeFile(buildPath,"test.generated.properties",propertiesContent,false);
  }
  String htmlContent=processTemplate("test_case_html.ftl",context);
  seleniumBuilderFileUtil.writeFile(seleniumBuilderContext.getTestCaseHTMLFileName(testCaseName),htmlContent,false);
}
