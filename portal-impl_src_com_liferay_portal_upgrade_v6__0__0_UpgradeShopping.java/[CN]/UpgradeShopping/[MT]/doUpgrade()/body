{
  StringBundler sb=new StringBundler(3);
  sb.append("update ShoppingItem set groupId = (select groupId from ");
  sb.append("ShoppingCategory where ShoppingCategory.categoryId = ");
  sb.append("ShoppingItem.categoryId)");
  runSQL(sb.toString());
  if (isSupportsAlterColumnType()) {
    runSQL("alter_column_type ShoppingItem smallImageURL STRING null");
    runSQL("alter_column_type ShoppingItem mediumImageURL STRING null");
    runSQL("alter_column_type ShoppingItem largeImageURL STRING null");
  }
 else {
    UpgradeTable upgradeTable=UpgradeTableFactoryUtil.getUpgradeTable(ShoppingItemTable.TABLE_NAME,ShoppingItemTable.TABLE_COLUMNS);
    upgradeTable.setCreateSQL(ShoppingItemTable.TABLE_SQL_CREATE);
    upgradeTable.setIndexesSQL(ShoppingItemTable.TABLE_SQL_ADD_INDEXES);
    upgradeTable.updateTable();
  }
}
