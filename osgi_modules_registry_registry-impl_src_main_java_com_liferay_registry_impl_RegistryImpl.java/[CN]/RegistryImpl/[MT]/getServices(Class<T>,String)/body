{
  Collection<org.osgi.framework.ServiceReference<T>> serviceReferences=_bundleContext.getServiceReferences(clazz,filterString);
  if (serviceReferences.isEmpty()) {
    return Collections.emptyList();
  }
  List<T> services=new ArrayList<T>();
  Iterator<org.osgi.framework.ServiceReference<T>> itr=serviceReferences.iterator();
  while (itr.hasNext()) {
    org.osgi.framework.ServiceReference<T> serviceReference=itr.next();
    T service=_bundleContext.getService(serviceReference);
    if (service != null) {
      services.add(service);
    }
  }
  return services;
}
