{
  Configuration sourceFormatterConfiguration=addConfigurationSourceFormatter(project);
  final FormatSourceTask checkSourceFormattingTask=addTaskCheckSourceFormatting(project);
  addTaskFormatSource(project);
  configureTasksFormatSource(project,sourceFormatterConfiguration);
  PluginContainer pluginContainer=project.getPlugins();
  pluginContainer.withType(LifecycleBasePlugin.class,new Action<LifecycleBasePlugin>(){
    @Override public void execute(    LifecycleBasePlugin lifecycleBasePlugin){
      Task checkTask=GradleUtil.getTask(checkSourceFormattingTask.getProject(),LifecycleBasePlugin.CHECK_TASK_NAME);
      checkTask.dependsOn(checkSourceFormattingTask);
    }
  }
);
}
