{
  Set locksByUserId=_instance._getLocksByUserId(userId);
  Iterator itr=locksByUserId.iterator();
  while (itr.hasNext()) {
    Lock lock=(Lock)itr.next();
    if (lock.isExpired()) {
      itr.remove();
      _instance._getLocks(lock.getClassName(),lock.getPrimaryKey()).remove(lock);
      _instance._getLocksByCompanyId(lock.getCompanyId()).remove(lock);
    }
  }
  return locksByUserId;
}
