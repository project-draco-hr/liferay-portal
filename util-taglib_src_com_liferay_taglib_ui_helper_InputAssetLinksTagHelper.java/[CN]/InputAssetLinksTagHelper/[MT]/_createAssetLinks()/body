{
  List<AssetLink> assetLinks=new ArrayList<AssetLink>();
  String assetLinksSearchContainerPrimaryKeys=ParamUtil.getString(_request,"assetLinksSearchContainerPrimaryKeys");
  if (Validator.isNull(assetLinksSearchContainerPrimaryKeys) && SessionErrors.isEmpty(_portletRequest) && _assetEntryId > 0) {
    List<AssetLink> directAssetLinks=AssetLinkLocalServiceUtil.getDirectLinks(_assetEntryId);
    for (    AssetLink assetLink : directAssetLinks) {
      AssetEntry assetLinkEntry=getAssetLinkEntry(assetLink,false);
      AssetRendererFactory assetRendererFactory=AssetRendererFactoryRegistryUtil.getAssetRendererFactoryByClassName(assetLinkEntry.getClassName());
      if (assetRendererFactory.isActive(_companyId)) {
        assetLinks.add(assetLink);
      }
    }
  }
 else {
    String[] assetEntriesPrimaryKeys=StringUtil.split(assetLinksSearchContainerPrimaryKeys);
    for (    String assetEntryPrimaryKey : assetEntriesPrimaryKeys) {
      long assetEntryPrimaryKeyLong=GetterUtil.getLong(assetEntryPrimaryKey);
      AssetEntry assetEntry=AssetEntryServiceUtil.getEntry(assetEntryPrimaryKeyLong);
      AssetLink assetLink=AssetLinkLocalServiceUtil.createAssetLink(0);
      assetLink.setEntryId1(_assetEntryId > 0 ? _assetEntryId : 0);
      assetLink.setEntryId2(assetEntry.getEntryId());
      assetLinks.add(assetLink);
    }
  }
  return assetLinks;
}
