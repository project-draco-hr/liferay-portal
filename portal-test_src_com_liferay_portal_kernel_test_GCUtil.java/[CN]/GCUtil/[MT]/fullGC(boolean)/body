{
  ReferenceQueue<Object> referenceQueue=new ReferenceQueue<Object>();
  SoftReference<Object> softReference=new SoftReference<Object>(new Object(),referenceQueue);
  List<byte[]> list=new ArrayList<byte[]>();
  while (true) {
    try {
      list.add(new byte[100 * 1024 * 1024]);
    }
 catch (    OutOfMemoryError oome) {
      list.clear();
      list=null;
      break;
    }
  }
  Assert.assertNull(softReference.get());
  Assert.assertSame(softReference,referenceQueue.remove());
  if (ensureEnqueuedReferences) {
    fullGC(false);
  }
}
