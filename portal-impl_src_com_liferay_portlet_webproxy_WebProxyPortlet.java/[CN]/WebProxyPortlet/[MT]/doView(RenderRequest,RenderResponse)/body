{
  PortletPreferences prefs=renderRequest.getPreferences();
  String initUrl=prefs.getValue("initUrl",StringPool.BLANK);
  if (Validator.isNull(initUrl)) {
    PortletRequestDispatcher portletRequestDispatcher=getPortletContext().getRequestDispatcher(StrutsUtil.TEXT_HTML_DIR + "/portal/portlet_not_setup.jsp");
    portletRequestDispatcher.include(renderRequest,renderResponse);
  }
 else {
    super.doView(renderRequest,renderResponse);
    RenderResponseImpl renderResponseImpl=(RenderResponseImpl)renderResponse;
    StringServletResponse stringResponse=(StringServletResponse)renderResponseImpl.getHttpServletResponse();
    String output=stringResponse.getString();
    output=StringUtil.replace(output,"//pbhs/","/pbhs/");
    stringResponse.setString(output);
  }
}
