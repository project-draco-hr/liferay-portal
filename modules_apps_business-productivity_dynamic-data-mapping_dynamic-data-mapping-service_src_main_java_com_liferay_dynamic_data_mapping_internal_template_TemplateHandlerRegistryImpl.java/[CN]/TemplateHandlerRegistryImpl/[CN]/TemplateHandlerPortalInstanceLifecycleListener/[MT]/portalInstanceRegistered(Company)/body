{
  long classNameId=_portal.getClassNameId(_templateHandler.getClassName());
  ServiceContext serviceContext=new ServiceContext();
  Group group=_groupLocalService.getCompanyGroup(company.getCompanyId());
  serviceContext.setScopeGroupId(group.getGroupId());
  long userId=_userLocalService.getDefaultUserId(company.getCompanyId());
  serviceContext.setUserId(userId);
  List<Element> templateElements=_templateHandler.getDefaultTemplateElements();
  for (  Element templateElement : templateElements) {
    String templateKey=templateElement.elementText("template-key");
    DDMTemplate ddmTemplate=_ddmTemplateManager.fetchTemplate(group.getGroupId(),classNameId,templateKey);
    if (ddmTemplate != null) {
      continue;
    }
    Class<?> clazz=_templateHandler.getClass();
    ClassLoader classLoader=clazz.getClassLoader();
    ResourceBundleLoader resourceBundleLoader=new AggregateResourceBundleLoader(ResourceBundleUtil.getResourceBundleLoader("content.Language",classLoader),LanguageResources.RESOURCE_BUNDLE_LOADER);
    Map<Locale,String> nameMap=getLocalizationMap(resourceBundleLoader,group.getGroupId(),templateElement.elementText("name"));
    Map<Locale,String> descriptionMap=getLocalizationMap(resourceBundleLoader,group.getGroupId(),templateElement.elementText("description"));
    String type=templateElement.elementText("type");
    if (type == null) {
      type=DDMTemplateManager.TEMPLATE_TYPE_DISPLAY;
    }
    String language=templateElement.elementText("language");
    String scriptFileName=templateElement.elementText("script-file");
    String script=StringUtil.read(classLoader,scriptFileName);
    boolean cacheable=GetterUtil.getBoolean(templateElement.elementText("cacheable"));
    _ddmTemplateManager.addTemplate(userId,group.getGroupId(),classNameId,0,_portal.getClassNameId(_PORTLET_DISPLAY_TEMPLATE_CLASS_NAME),templateKey,nameMap,descriptionMap,type,null,language,script,cacheable,false,null,null,serviceContext);
  }
}
