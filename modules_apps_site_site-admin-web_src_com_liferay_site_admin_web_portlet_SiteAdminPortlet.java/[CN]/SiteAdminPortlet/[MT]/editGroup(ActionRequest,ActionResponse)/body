{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  Callable<Group> groupCallable=new GroupCallable(actionRequest);
  Group group=TransactionInvokerUtil.invoke(_transactionAttribute,groupCallable);
  long liveGroupId=ParamUtil.getLong(actionRequest,"liveGroupId");
  PortletURL siteAdministrationURL=PortalUtil.getControlPanelPortletURL(actionRequest,group,SiteAdminPortletKeys.SITE_SETTINGS,0,PortletRequest.RENDER_PHASE);
  String controlPanelURL=HttpUtil.setParameter(themeDisplay.getURLControlPanel(),"p_p_id",SiteAdminPortletKeys.SITE_ADMIN);
  controlPanelURL=HttpUtil.setParameter(controlPanelURL,"controlPanelCategory",themeDisplay.getControlPanelCategory());
  siteAdministrationURL.setParameter("redirect",controlPanelURL);
  if (liveGroupId <= 0) {
    hideDefaultSuccessMessage(actionRequest);
    MultiSessionMessages.add(actionRequest,SiteAdminPortletKeys.SITE_SETTINGS + "requestProcessed");
  }
  actionRequest.setAttribute(WebKeys.REDIRECT,siteAdministrationURL.toString());
}
