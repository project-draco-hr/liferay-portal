{
  int total=0;
  List<WorkflowTask> results=null;
  String curParam=SearchContainer.DEFAULT_CUR_PARAM;
  if (!completedTasks) {
    curParam=_DEFAULT_CUR_PARAM1;
  }
  WorkflowTaskSearch searchContainer=new WorkflowTaskSearch(request,curParam,currentURLObj);
  WorkflowTaskDisplayTerms searchTerms=(WorkflowTaskDisplayTerms)searchContainer.getDisplayTerms();
  if (searchTerms.isAdvancedSearch()) {
    total=WorkflowTaskManagerUtil.searchCount(company.getCompanyId(),user.getUserId(),searchTerms.getName(),searchTerms.getType(),null,null,null,false,false,searchTerms.isAndOperator());
    searchContainer.setTotal(total);
    results=WorkflowTaskManagerUtil.search(company.getCompanyId(),user.getUserId(),searchTerms.getName(),searchTerms.getType(),null,null,null,completedTasks,false,searchTerms.isAndOperator(),searchContainer.getStart(),searchContainer.getEnd(),searchContainer.getOrderByComparator());
  }
 else {
    total=WorkflowTaskManagerUtil.searchCount(company.getCompanyId(),user.getUserId(),searchTerms.getKeywords(),assetTypes,completedTasks,false);
    searchContainer.setTotal(total);
    results=WorkflowTaskManagerUtil.search(company.getCompanyId(),user.getUserId(),searchTerms.getKeywords(),assetTypes,completedTasks,false,searchContainer.getStart(),searchContainer.getEnd(),searchContainer.getOrderByComparator());
  }
  searchContainer.setTotal(total);
  searchContainer.setResults(results);
  validateSearchTerms(searchContainer);
  if (completedTasks) {
    searchContainer.setEmptyResultsMessage(_THERE_ARE_NO_COMPLETED_TASKS);
    request.setAttribute(WebKeys.WORKFLOW_MY_COMPLETED_TASKS,searchContainer);
  }
 else {
    searchContainer.setEmptyResultsMessage(_THERE_ARE_NO_PENDING_TASKS_ASSIGNED_TO_YOU);
    request.setAttribute(WebKeys.WORKFLOW_PENDING_TASKS_ASSIGNED_TO_ME,searchContainer);
  }
  return results;
}
