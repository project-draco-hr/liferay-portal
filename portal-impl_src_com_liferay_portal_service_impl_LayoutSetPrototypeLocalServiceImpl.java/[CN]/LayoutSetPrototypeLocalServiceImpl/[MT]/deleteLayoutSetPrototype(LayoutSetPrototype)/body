{
  int layoutSetsCount=layoutSetLocalService.countLayoutSetsByLayoutSetPrototypeUuid(layoutSetPrototype.getUuid());
  if (layoutSetsCount > 0) {
    throw new RequiredLayoutSetPrototypeException();
  }
  Group group=layoutSetPrototype.getGroup();
  groupLocalService.deleteGroup(group);
  resourceLocalService.deleteResource(layoutSetPrototype.getCompanyId(),LayoutSetPrototype.class.getName(),ResourceConstants.SCOPE_INDIVIDUAL,layoutSetPrototype.getLayoutSetPrototypeId());
  layoutSetPrototypePersistence.remove(layoutSetPrototype);
  PermissionCacheUtil.clearCache();
  return layoutSetPrototype;
}
