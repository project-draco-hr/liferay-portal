{
  long length=10000;
  String rangeHeader="bytes=-500";
  setUpRange(_request,rangeHeader);
  List<Range> ranges=ServletResponseUtil.getRanges(_request,_response,length);
  Assert.assertEquals(ranges.size(),1);
  assertRange(ranges.get(0),9500,9999,500);
  rangeHeader="bytes=9500-";
  setUpRange(_request,rangeHeader);
  ranges=ServletResponseUtil.getRanges(_request,_response,length);
  Assert.assertEquals(ranges.size(),1);
  assertRange(ranges.get(0),9500,9999,500);
  rangeHeader="bytes=0-0,-1";
  setUpRange(_request,rangeHeader);
  ranges=ServletResponseUtil.getRanges(_request,_response,length);
  Assert.assertEquals(ranges.size(),2);
  assertRange(ranges.get(0),0,0,1);
  assertRange(ranges.get(1),9999,9999,1);
  rangeHeader="bytes=500-600,601-999";
  setUpRange(_request,rangeHeader);
  ranges=ServletResponseUtil.getRanges(_request,_response,length);
  Assert.assertEquals(ranges.size(),2);
  assertRange(ranges.get(0),500,600,101);
  assertRange(ranges.get(1),601,999,399);
  rangeHeader="bytes=500-700,601-999";
  setUpRange(_request,rangeHeader);
  ranges=ServletResponseUtil.getRanges(_request,_response,length);
  Assert.assertEquals(ranges.size(),2);
  assertRange(ranges.get(0),500,700,201);
  assertRange(ranges.get(1),601,999,399);
}
