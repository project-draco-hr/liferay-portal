{
  int index=_getServiceContextParameterIndex(methodInvocation.getMethod());
  if (index < 0) {
    serviceBeanAopCacheManager.removeMethodInterceptor(methodInvocation,this);
    return methodInvocation.proceed();
  }
  Object[] arguments=methodInvocation.getArguments();
  ServiceContext serviceContext=(ServiceContext)arguments[index];
  if (serviceContext != null) {
    ServiceContextThreadLocal.pushServiceContext(serviceContext);
  }
  try {
    return methodInvocation.proceed();
  }
  finally {
    if (serviceContext != null) {
      ServiceContextThreadLocal.popServiceContext();
    }
  }
}
