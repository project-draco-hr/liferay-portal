{
  User user=userPersistence.findByPrimaryKey(serviceContext.getUserId());
  long classNameId=PortalUtil.getClassNameId(className);
  Date now=new Date();
  validate(classNameId,classPK,ruleGroupId);
  long ruleGroupInstanceId=counterLocalService.increment();
  MDRRuleGroupInstance ruleGroupInstance=mdrRuleGroupInstanceLocalService.createMDRRuleGroupInstance(ruleGroupInstanceId);
  ruleGroupInstance.setUuid(serviceContext.getUuid());
  ruleGroupInstance.setGroupId(groupId);
  ruleGroupInstance.setCompanyId(serviceContext.getCompanyId());
  ruleGroupInstance.setCreateDate(serviceContext.getCreateDate(now));
  ruleGroupInstance.setModifiedDate(serviceContext.getModifiedDate(now));
  ruleGroupInstance.setUserId(serviceContext.getUserId());
  ruleGroupInstance.setUserName(user.getFullName());
  ruleGroupInstance.setClassNameId(classNameId);
  ruleGroupInstance.setClassPK(classPK);
  ruleGroupInstance.setRuleGroupId(ruleGroupId);
  ruleGroupInstance.setPriority(priority);
  return updateMDRRuleGroupInstance(ruleGroupInstance,false);
}
