{
  LiferayPortletURL liferayPortletURL=(LiferayPortletURL)portletURL;
  liferayPortletURL.setLifecycle(PortletRequest.ACTION_PHASE);
  try {
    liferayPortletURL.setWindowState(LiferayWindowState.EXCLUSIVE);
  }
 catch (  WindowStateException wse) {
  }
  String groupId=document.get("scopeGroupId");
  String folderId=document.get("folderId");
  String fileName=document.get("path");
  String title=fileName;
  String content=snippet;
  if (Validator.isNull(snippet)) {
    content=StringUtil.shorten(document.get(Field.CONTENT),200);
  }
  portletURL.setParameter("struts_action","/document_library/get_file");
  portletURL.setParameter("groupId",groupId);
  portletURL.setParameter("folderId",folderId);
  portletURL.setParameter("name",fileName);
  return new Summary(title,content,portletURL);
}
