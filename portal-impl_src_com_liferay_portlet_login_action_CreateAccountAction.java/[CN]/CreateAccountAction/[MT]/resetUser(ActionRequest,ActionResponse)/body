{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  String emailAddress=ParamUtil.getString(actionRequest,"emailAddress");
  User anonymousUser=UserLocalServiceUtil.getUserByEmailAddress(themeDisplay.getCompanyId(),emailAddress);
  if (anonymousUser.getStatus() != WorkflowConstants.STATUS_INCOMPLETE) {
    throw new PrincipalException("User status incomplete {status=" + anonymousUser.getStatus() + "}");
  }
  UserLocalServiceUtil.deleteUser(anonymousUser.getUserId());
  addUser(actionRequest,actionResponse);
}
