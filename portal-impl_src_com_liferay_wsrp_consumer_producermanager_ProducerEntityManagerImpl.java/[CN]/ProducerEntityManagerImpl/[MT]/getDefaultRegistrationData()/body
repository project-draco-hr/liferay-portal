{
  String globalXML=getGlobalRegistrationDataXML();
  if (globalXML == null) {
    globalXML=DEFAULT_REGISTRATION_DATA;
  }
  RegistrationData defaultRegistrationData=getRegistrationDataFromXML(globalXML);
  String consumerName=getConsumerName();
  if (Validator.isNull(consumerName)) {
    consumerName=defaultRegistrationData.getConsumerName();
  }
  RegistrationData registrationData=new RegistrationData();
  registrationData.setConsumerName(consumerName);
  registrationData.setConsumerAgent(_consumerAgent);
  registrationData.setMethodGetSupported(defaultRegistrationData.isMethodGetSupported());
  registrationData.getConsumerModes().addAll(defaultRegistrationData.getConsumerModes());
  registrationData.getConsumerWindowStates().addAll(defaultRegistrationData.getConsumerWindowStates());
  registrationData.getConsumerUserScopes().addAll(defaultRegistrationData.getConsumerUserScopes());
  registrationData.getRegistrationProperties().addAll(defaultRegistrationData.getRegistrationProperties());
  registrationData.getExtensions().addAll(defaultRegistrationData.getExtensions());
  return registrationData;
}
