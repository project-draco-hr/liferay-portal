{
  try {
    List<String> channelNames=new ArrayList<String>();
    List<WSRPPortlet> wsrpPortlets=WSRPPortletLocalServiceUtil.getPortlets(producerEntityId);
    for (    WSRPPortlet wsrpPortlet : wsrpPortlets) {
      channelNames.add(wsrpPortlet.getChannelName());
    }
    if (!channelNames.isEmpty()) {
      WSRPChannelManagerImpl wsrpChannelManagerImpl=new WSRPChannelManagerImpl();
      wsrpChannelManagerImpl.removeWSRPChannels(channelNames);
    }
    WSRPConfiguredProducerLocalServiceUtil.deleteWSRPConfiguredProducer(GetterUtil.getLong(producerEntityId));
  }
 catch (  Exception e) {
    throw new WSRPConsumerException(e.getMessage());
  }
}
