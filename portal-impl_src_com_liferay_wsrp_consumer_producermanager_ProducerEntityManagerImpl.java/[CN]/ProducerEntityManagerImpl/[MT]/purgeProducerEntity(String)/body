{
  try {
    List<String> remoteChannels=new ArrayList<String>();
    List<WSRPPortlet> wsrpPortlets=WSRPPortletLocalServiceUtil.getPortlets(producerEntityId);
    for (    WSRPPortlet portlet : wsrpPortlets) {
      remoteChannels.add(portlet.getChannelName());
    }
    if (remoteChannels.size() > 0) {
      WSRPChannelManagerImpl channelManagerImp=new WSRPChannelManagerImpl();
      channelManagerImp.removeWSRPChannels(remoteChannels);
    }
    WSRPConfiguredProducerLocalServiceUtil.deleteWSRPConfiguredProducer(GetterUtil.getLong(producerEntityId));
  }
 catch (  Exception e) {
    throw new WSRPConsumerException(e.getMessage());
  }
}
