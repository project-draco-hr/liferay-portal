{
  List<SmtpMessage> smtpMessages=new ArrayList<SmtpMessage>();
  Iterator<SmtpMessage> iterator=_simpleSmtpServer.getReceivedEmail();
  while (iterator.hasNext()) {
    SmtpMessage smtpMessage=iterator.next();
    if (headerName.equals("Body")) {
      String body=smtpMessage.getBody();
      if (body.equals(headerValue)) {
        smtpMessages.add(smtpMessage);
      }
    }
 else {
      String smtpMessageHeaderValue=smtpMessage.getHeaderValue(headerName);
      if (smtpMessageHeaderValue.equals(headerValue)) {
        smtpMessages.add(smtpMessage);
      }
    }
  }
  return smtpMessages;
}
