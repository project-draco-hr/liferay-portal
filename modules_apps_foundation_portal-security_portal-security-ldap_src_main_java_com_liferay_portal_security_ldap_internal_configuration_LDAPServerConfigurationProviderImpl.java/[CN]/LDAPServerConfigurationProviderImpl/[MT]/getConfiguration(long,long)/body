{
  Map<Long,ObjectValuePair<Configuration,LDAPServerConfiguration>> objectValuePairs=_configurations.get(companyId);
  Map<Long,ObjectValuePair<Configuration,LDAPServerConfiguration>> defaultObjectValuePairs=_configurations.get(CompanyConstants.SYSTEM);
  if (MapUtil.isEmpty(objectValuePairs) && MapUtil.isEmpty(defaultObjectValuePairs)) {
    return _defaultLDAPServerConfiguration;
  }
 else   if (MapUtil.isEmpty(objectValuePairs)) {
    objectValuePairs=defaultObjectValuePairs;
  }
  ObjectValuePair<Configuration,LDAPServerConfiguration> objectValuePair=objectValuePairs.get(ldapServerId);
  if ((objectValuePair == null) && !MapUtil.isEmpty(defaultObjectValuePairs)) {
    objectValuePair=defaultObjectValuePairs.get(LDAPServerConfiguration.LDAP_SERVER_ID_DEFAULT);
  }
  if (objectValuePair == null) {
    return _defaultLDAPServerConfiguration;
  }
  return objectValuePair.getValue();
}
