{
  try (ZipFile zipFile=new ZipFile(lpkgFile)){
    ZipEntry zipEntry=zipFile.getEntry("liferay-marketplace.properties");
    if (zipEntry == null) {
      throw new Exception(lpkgFile + " does not have liferay-marketplace.properties");
    }
    Properties properties=new Properties();
    try (InputStream inputStream=zipFile.getInputStream(zipEntry)){
      properties.load(inputStream);
    }
     String symbolicName=properties.getProperty("title");
    if ((symbolicName == null) || symbolicName.isEmpty()) {
      throw new Exception(lpkgFile + " does not have a valid symbolic name");
    }
    Version version=null;
    String versionString=properties.getProperty("version");
    try {
      version=new Version(versionString);
    }
 catch (    IllegalArgumentException iae) {
      throw new Exception(lpkgFile + " does not have a valid version: " + versionString,iae);
    }
    return outputDirPath.resolve(symbolicName + "-" + version+ "-index.xml");
  }
 }
