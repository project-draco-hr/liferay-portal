{
  if (errorTemplateResource == null) {
    try {
      processTemplates(templateResources,writer);
      return;
    }
 catch (    Exception e) {
      StringBuilder sb=new StringBuilder();
      for (      TemplateResource templateResource : templateResources) {
        sb.append(templateResource.getTemplateId());
        sb.append(",");
      }
      throw new TemplateException("Unable to process templates",e);
    }
  }
  write(writer);
}
