{
  templateKey=StringUtil.toUpperCase(templateKey.trim());
  DDMTemplate template=ddmTemplatePersistence.fetchByG_C_T(groupId,classNameId,templateKey);
  if (template != null) {
    throw new TemplateDuplicateTemplateKeyException("Template already exists with template key " + templateKey);
  }
  validate(groupId,nameMap,script,smallImage,smallImageURL,smallImageFile,smallImageBytes);
}
