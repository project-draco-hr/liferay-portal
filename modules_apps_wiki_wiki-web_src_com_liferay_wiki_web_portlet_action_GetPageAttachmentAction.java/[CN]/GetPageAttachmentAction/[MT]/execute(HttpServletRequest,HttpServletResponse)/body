{
  try {
    long nodeId=ParamUtil.getLong(request,"nodeId");
    String title=ParamUtil.getString(request,"title");
    String fileName=ParamUtil.getString(request,"fileName");
    if (fileName.startsWith(MediaWikiImporter.SHARED_IMAGES_TITLE + StringPool.SLASH)) {
      String[] fileNameParts=fileName.split(MediaWikiImporter.SHARED_IMAGES_TITLE + StringPool.SLASH);
      fileName=fileNameParts[1];
      title=MediaWikiImporter.SHARED_IMAGES_TITLE;
    }
    int status=ParamUtil.getInteger(request,"status",WorkflowConstants.STATUS_APPROVED);
    getFile(nodeId,title,fileName,status,request,response);
    return null;
  }
 catch (  Exception e) {
    if ((e instanceof NoSuchPageException) || (e instanceof NoSuchFileException)) {
      if (_log.isWarnEnabled()) {
        _log.warn(e);
      }
    }
 else {
      PortalUtil.sendError(e,request,response);
    }
    return null;
  }
}
