{
  append("<ol>");
  List<TreeNode<HeadingNode>> treeNodes=tableOfContents.getChildNodes();
  if (treeNodes == null) {
    append("</ol>");
    return;
  }
  for (  TreeNode<HeadingNode> treeNode : treeNodes) {
    append("<li class=\"toc-level-");
    append(depth);
    append("\">");
    HeadingNode headingNode=treeNode.getValue();
    String content=getUnformattedHeadingText(headingNode);
    append("<a class=\"wikipage\" href=\"");
    if (_viewPageURL != null) {
      append(_viewPageURL.toString());
    }
    append(StringPool.POUND);
    append(getHeadingMarkup(_page.getTitle(),content));
    append("\">");
    append(content);
    append("</a>");
    appendTableOfContents(treeNode,depth + 1);
    append("</li>");
  }
  append("</ol>");
}
