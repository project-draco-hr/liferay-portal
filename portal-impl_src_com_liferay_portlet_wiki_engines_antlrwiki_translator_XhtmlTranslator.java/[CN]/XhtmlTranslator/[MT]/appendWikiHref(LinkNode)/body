{
  WikiPage page=null;
  try {
    page=WikiPageLocalServiceUtil.getPage(_page.getNodeId(),linkNode.getLink());
  }
 catch (  NoSuchPageException nspe) {
  }
catch (  Exception e) {
    _log.error(e,e);
  }
  String attachmentLink=searchLinkInAttachments(linkNode);
  if (attachmentLink != null) {
    append(_attachmentURLPrefix + attachmentLink);
    return;
  }
  String pageTitle=linkNode.getLink();
  if ((page != null) && (_viewPageURL != null)) {
    _viewPageURL.setParameter("title",pageTitle);
    append(_viewPageURL.toString());
    _viewPageURL.setParameter("title",_page.getTitle());
  }
 else   if (_editPageURL != null) {
    _editPageURL.setParameter("title",pageTitle);
    append(_editPageURL.toString());
    _editPageURL.setParameter("title",_page.getTitle());
  }
}
