{
  List<PathMatcher> excludeDirPathMatchers=new ArrayList<>();
  List<PathMatcher> excludeFilePathMatchers=new ArrayList<>();
  List<PathMatcher> includeFilePathMatchers=new ArrayList<>();
  FileSystem fileSystem=FileSystems.getDefault();
  for (  String exclude : excludes) {
    if (!exclude.startsWith("**/")) {
      exclude="**/" + exclude;
    }
    if (exclude.endsWith("/**")) {
      exclude=exclude.substring(0,exclude.length() - 3);
      excludeDirPathMatchers.add(fileSystem.getPathMatcher("glob:" + exclude));
    }
 else {
      excludeFilePathMatchers.add(fileSystem.getPathMatcher("glob:" + exclude));
    }
  }
  for (  String include : includes) {
    includeFilePathMatchers.add(fileSystem.getPathMatcher("glob:" + include));
  }
  if (recentChangesFileNames == null) {
    return scanForFiles(baseDir,excludeDirPathMatchers,excludeFilePathMatchers,includeFilePathMatchers,includeSubrepositories);
  }
  return getFileNames(baseDir,recentChangesFileNames,excludeDirPathMatchers,excludeFilePathMatchers,includeFilePathMatchers);
}
