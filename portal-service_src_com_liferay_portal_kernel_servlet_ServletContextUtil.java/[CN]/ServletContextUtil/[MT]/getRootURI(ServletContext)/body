{
  URI rootURI=(URI)servletContext.getAttribute(URI_ATTRIBUTE);
  if (rootURI != null) {
    return rootURI;
  }
  try {
    URL rootURL=servletContext.getResource(PATH_WEB_INF);
    String path=rootURL.getPath();
    int index=path.indexOf(PATH_WEB_INF);
    if (index < 0) {
      throw new MalformedURLException("Invalid URL " + rootURL);
    }
    if (index == 0) {
      path=StringPool.SLASH;
    }
 else {
      path=path.substring(0,index);
    }
    rootURI=new URI(rootURL.getProtocol(),path,null);
    servletContext.setAttribute(URI_ATTRIBUTE,rootURI);
  }
 catch (  URISyntaxException urise) {
    throw new MalformedURLException(urise.getMessage());
  }
  return rootURI;
}
