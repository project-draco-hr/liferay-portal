{
  friendlyURL=getFriendlyURL(friendlyURL);
  if (Validator.isNull(friendlyURL)) {
    friendlyURL=StringPool.SLASH + getFriendlyURL(friendlyName);
    String originalFriendlyURL=friendlyURL;
    for (int i=1; ; i++) {
      try {
        validateFriendlyURL(companyId,groupId,classNameId,classPK,friendlyURL);
        break;
      }
 catch (      GroupFriendlyURLException gfurle) {
        int type=gfurle.getType();
        if (type == GroupFriendlyURLException.DUPLICATE) {
          friendlyURL=originalFriendlyURL + i;
        }
 else {
          friendlyURL=StringPool.SLASH + classPK;
          break;
        }
      }
    }
  }
  return friendlyURL;
}
