{
  _bundleContext=bundleContext;
  _serviceTrackerCustomizer=serviceTrackerCustomizer;
  if (comparator == null) {
    _comparator=Collections.reverseOrder();
  }
 else {
    _comparator=new EntryServiceReferenceComparator<>(comparator);
  }
  if (filterString != null) {
    Filter filter=bundleContext.createFilter("(&(objectClass=" + clazz.getName() + ")"+ filterString+ ")");
    _serviceTracker=new ServiceTracker<>(bundleContext,filter,new ServiceReferenceServiceTrackerCustomizer());
  }
 else {
    _serviceTracker=new ServiceTracker<>(bundleContext,clazz,new ServiceReferenceServiceTrackerCustomizer());
  }
}
