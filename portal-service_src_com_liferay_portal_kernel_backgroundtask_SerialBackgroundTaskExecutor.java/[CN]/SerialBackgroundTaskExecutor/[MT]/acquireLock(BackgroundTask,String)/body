{
  Lock lock=null;
  while (true) {
    try {
      lock=LockLocalServiceUtil.lock(BackgroundTaskExecutor.class.getName(),backgroundTask.getTaskExecutorClassName(),owner);
      break;
    }
 catch (    SystemException se) {
      if (_log.isDebugEnabled()) {
        _log.debug("Unable to acquire acquiring lock",se);
      }
      try {
        Thread.sleep(50);
      }
 catch (      InterruptedException ie) {
      }
    }
  }
  if (!lock.isNew()) {
    throw new DuplicateLockException(lock);
  }
  return lock;
}
