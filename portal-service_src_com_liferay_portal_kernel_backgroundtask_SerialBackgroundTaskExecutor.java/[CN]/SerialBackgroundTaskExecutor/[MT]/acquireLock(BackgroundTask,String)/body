{
  Lock lock=null;
  while (true) {
    try {
      lock=LockLocalServiceUtil.lock(BackgroundTaskExecutor.class.getName(),backgroundTask.getTaskExecutorClassName(),owner,false);
      break;
    }
 catch (    SystemException e) {
      if (_log.isDebugEnabled()) {
        _log.debug("Non-fatal error acquiring lock:",e);
      }
      try {
        Thread.currentThread().sleep(50);
      }
 catch (      InterruptedException e1) {
      }
    }
  }
  if (!lock.isNew()) {
    throw new DuplicateLockException(lock);
  }
  return lock;
}
