{
  PortalPreferences portalPreferences=PortletPreferencesFactoryUtil.getPortalPreferences(portletRequest);
  String displayStyle=ParamUtil.getString(portletRequest,"displayStyle");
  if (Validator.isNull(displayStyle)) {
    DDLFormWebRequestHelper ddlFormWebRequestHelper=new DDLFormWebRequestHelper(PortalUtil.getHttpServletRequest(portletRequest));
    DDLFormWebConfiguration ddlFormWebConfiguration=ddlFormWebRequestHelper.getDDLFormWebConfiguration();
    displayStyle=portalPreferences.getValue(DDLFormPortletKeys.DYNAMIC_DATA_LISTS_FORM_ADMIN,"display-style",ddlFormWebConfiguration.defaultDisplayView());
  }
 else   if (ArrayUtil.contains(displayViews,displayStyle)) {
    portalPreferences.setValue(DDLFormPortletKeys.DYNAMIC_DATA_LISTS_FORM_ADMIN,"display-style",displayStyle);
  }
  if (!ArrayUtil.contains(displayViews,displayStyle)) {
    displayStyle=displayViews[0];
  }
  return displayStyle;
}
