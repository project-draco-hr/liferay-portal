{
  DDLFormDisplayContext ddlFormDisplayContext=new DDLFormDisplayContext(renderRequest,_ddlRecordSetLocalService);
  renderRequest.setAttribute(WebKeys.PORTLET_DISPLAY_CONTEXT,ddlFormDisplayContext);
  long recordSetId=PrefsParamUtil.getLong(PortletPreferencesFactoryUtil.getPortletSetup(renderRequest),renderRequest,"recordSetId");
  if (recordSetId == 0) {
    return;
  }
  DDLRecordSet recordSet=_ddlRecordSetService.getRecordSet(recordSetId);
  renderRequest.setAttribute(DDLFormWebKeys.DYNAMIC_DATA_LISTS_RECORD_SET,recordSet);
  String ddmFormHTML=getDDMFormHTML(renderRequest,renderResponse,recordSet);
  renderRequest.setAttribute(DDMWebKeys.DYNAMIC_DATA_MAPPING_FORM_HTML,ddmFormHTML);
}
