{
  List<Element> childrenDynamicElementElements=dynamicElementElement.elements("dynamic-element");
  for (  Element childrenDynamicElementElement : childrenDynamicElementElements) {
    udpateFieldsMap(childrenDynamicElementElement,fieldsMap);
  }
  String name=dynamicElementElement.attributeValue("name");
  Map<Locale,List<String>> valuesMap=fieldsMap.get(name);
  if (valuesMap == null) {
    valuesMap=new HashMap<>();
    fieldsMap.put(name,valuesMap);
  }
  List<Element> dynamicContentElements=dynamicElementElement.elements("dynamic-content");
  for (  Element dynamicContentElement : dynamicContentElements) {
    Locale locale=LocaleUtil.fromLanguageId(dynamicContentElement.attributeValue("language-id"));
    List<String> values=getValues(valuesMap,locale);
    List<Element> optionElements=dynamicContentElement.elements("option");
    if (!optionElements.isEmpty()) {
      for (      Element optionElement : optionElements) {
        values.add(optionElement.getText());
      }
    }
 else {
      values.add(dynamicContentElement.getText());
    }
  }
}
