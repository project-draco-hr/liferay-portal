{
  Theme theme=getTheme();
  Properties properties=new Properties();
  Map<String,ThemeSetting> themeSettings=theme.getSettings();
  for (  Map.Entry<String,ThemeSetting> entry : themeSettings.entrySet()) {
    String key=entry.getKey();
    ThemeSetting themeSetting=entry.getValue();
    String value=null;
    if (themeSetting.isConfigurable()) {
      value=getThemeSetting(key);
    }
 else {
      value=themeSetting.getValue();
    }
    if (value != null) {
      properties.put(key,value);
    }
  }
  return properties;
}
