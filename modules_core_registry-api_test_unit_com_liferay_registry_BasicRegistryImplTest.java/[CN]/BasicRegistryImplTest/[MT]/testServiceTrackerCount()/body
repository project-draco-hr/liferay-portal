{
  Registry registry=RegistryUtil.getRegistry();
  ServiceTracker<Foo,Foo> serviceTracker=registry.trackServices(Foo.class);
  serviceTracker.open();
  Assert.assertEquals(0,serviceTracker.size());
  ServiceRegistration<Foo> serviceRegistrationA=registry.registerService(Foo.class,new Foo(){
  }
);
  Assert.assertEquals(1,serviceTracker.size());
  ServiceRegistration<Foo> serviceRegistrationB=registry.registerService(Foo.class,new Foo(){
  }
);
  Assert.assertEquals(2,serviceTracker.size());
  serviceRegistrationA.unregister();
  Assert.assertEquals(1,serviceTracker.size());
  serviceRegistrationB.unregister();
  Assert.assertEquals(0,serviceTracker.size());
}
