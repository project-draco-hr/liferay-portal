{
  List<IGImage> srcImages=igImageService.getImages(srcFolder.getFolderId());
  for (  IGImage srcImage : srcImages) {
    String name=srcImage.getName();
    String description=srcImage.getDescription();
    File file=null;
    try {
      file=FileUtil.createTempFile(srcImage.getImageType());
      Image image=imageLocalService.getImage(srcImage.getLargeImageId());
      byte[] bytes=image.getTextObj();
      FileUtil.write(file,bytes);
    }
 catch (    Exception e) {
      _log.error(e,e);
      continue;
    }
    String contentType=ContentTypeUtil.getContentType(srcImage.getImageType());
    igImageService.addImage(destFolder.getFolderId(),name,description,file,contentType,serviceContext);
    file.delete();
  }
  long destPlid=layoutLocalService.getDefaultPlid(destFolder.getGroupId());
  List<IGFolder> srcSubfolders=getFolders(srcFolder.getGroupId(),srcFolder.getFolderId());
  for (  IGFolder srcSubfolder : srcSubfolders) {
    String name=srcSubfolder.getName();
    String description=srcSubfolder.getDescription();
    serviceContext.setScopeGroupId(srcFolder.getGroupId());
    serviceContext.setPlid(destPlid);
    IGFolder destSubfolder=addFolder(destFolder.getFolderId(),name,description,serviceContext);
    copyFolder(srcSubfolder,destSubfolder,serviceContext);
  }
}
