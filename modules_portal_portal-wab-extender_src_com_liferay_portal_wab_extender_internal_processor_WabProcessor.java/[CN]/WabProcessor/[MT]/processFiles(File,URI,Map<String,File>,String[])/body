{
  for (  File file : directory.listFiles()) {
    if (file.isDirectory()) {
      processFiles(file,uri,classPath,portalDependencyJars);
      continue;
    }
    String path=uri.relativize(file.toURI()).getPath();
    if (ArrayUtil.contains(_EXCLUDED_PATHS,path)) {
      continue;
    }
    if (path.equals("WEB-INF/service.xml")) {
      processServicePackagePath(file);
    }
    if (path.startsWith(_WEB_INF_LIB)) {
      if (path.endsWith("-service.jar") && !path.endsWith(_context.concat("-service.jar"))) {
        continue;
      }
      String libName=path.substring(_WEB_INF_LIB.length());
      if (ArrayUtil.contains(portalDependencyJars,libName)) {
        _ignoredResources.add(path);
        continue;
      }
      classPath.put(path,file);
    }
 else     if (path.endsWith(".jsp") || path.endsWith(".jspf")) {
      processJspDepedencies(file);
    }
  }
}
