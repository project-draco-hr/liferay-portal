{
  if (_modificationCheckInterval == 0) {
    return null;
  }
  Object object=_portalCache.get(templateId);
  if (object == null) {
    return null;
  }
  if (!(object instanceof TemplateResource)) {
    _portalCache.remove(templateId);
    if (_log.isWarnEnabled()) {
      _log.warn("Remove template " + templateId + " because it is not a template resource");
    }
    return null;
  }
  TemplateResource templateResource=(TemplateResource)object;
  if (_modificationCheckInterval > 0) {
    long expireTime=templateResource.getLastModified() + _modificationCheckInterval;
    if (System.currentTimeMillis() > expireTime) {
      _portalCache.remove(templateId);
      templateResource=null;
      if (_log.isDebugEnabled()) {
        _log.debug("Remove expired template resource " + templateId);
      }
    }
  }
  return templateResource;
}
