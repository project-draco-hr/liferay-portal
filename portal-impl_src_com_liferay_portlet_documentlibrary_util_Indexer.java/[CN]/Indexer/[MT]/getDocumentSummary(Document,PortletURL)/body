{
  PortletURLImpl portletURLImpl=(PortletURLImpl)portletURL;
  try {
    portletURLImpl.setWindowState(LiferayWindowState.EXCLUSIVE);
  }
 catch (  WindowStateException wse) {
  }
  portletURLImpl.setAction(true);
  String repositoryId=doc.get("repositoryId");
  String fileName=doc.get("path");
  String title=fileName;
  String content=doc.get(LuceneFields.CONTENT);
  content=StringUtil.shorten(content,200);
  portletURL.setParameter("struts_action","/document_library/get_file");
  portletURL.setParameter("folderId",repositoryId);
  portletURL.setParameter("name",fileName);
  return new DocumentSummary(title,content,portletURL);
}
