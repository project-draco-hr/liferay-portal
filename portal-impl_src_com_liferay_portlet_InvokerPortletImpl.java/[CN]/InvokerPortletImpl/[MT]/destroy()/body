{
  if (PortletConstants.hasInstanceId(_portletModel.getPortletId())) {
    if (_log.isWarnEnabled()) {
      _log.warn("Destroy instance InvokerPortlet is not allowed.");
    }
    return;
  }
  Thread currentThread=Thread.currentThread();
  ClassLoader contextClassLoader=currentThread.getContextClassLoader();
  ClassLoader portletClassLoader=getPortletClassLoader();
  try {
    if (portletClassLoader != null) {
      currentThread.setContextClassLoader(portletClassLoader);
    }
    removePortletFilters();
    _portlet.destroy();
  }
  finally {
    if (portletClassLoader != null) {
      currentThread.setContextClassLoader(contextClassLoader);
    }
  }
}
