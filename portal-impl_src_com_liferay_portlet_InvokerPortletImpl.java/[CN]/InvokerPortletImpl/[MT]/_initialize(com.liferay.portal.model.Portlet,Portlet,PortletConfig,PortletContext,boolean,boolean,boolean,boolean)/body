{
  _portletModel=portletModel;
  _portlet=portlet;
  _liferayPortletConfig=(LiferayPortletConfig)portletConfig;
  _portletId=_portletModel.getPortletId();
  _liferayPortletContext=(LiferayPortletContext)portletContext;
  _checkAuthToken=checkAuthToken;
  _facesPortlet=facesPortlet;
  _strutsPortlet=strutsPortlet;
  _strutsBridgePortlet=strutsBridgePortlet;
  _expCache=portletModel.getExpCache();
  if (_log.isDebugEnabled()) {
    _log.debug("Create instance cache wrapper for " + _liferayPortletContext.getPortlet().getPortletId());
  }
  String filterString="(javax.portlet.name=" + _portletId + ")";
  Map<String,Object> properties=new HashMap<String,Object>();
  properties.put("javax.portlet.name",_portletId);
  _actionFilters=ServiceTrackerCollections.list(ActionFilter.class,filterString,new PortletFilterServiceTrackerCustomizer<ActionFilter>(_liferayPortletContext),properties);
  _eventFilters=ServiceTrackerCollections.list(EventFilter.class,filterString,new PortletFilterServiceTrackerCustomizer<EventFilter>(_liferayPortletContext),properties);
  _renderFilters=ServiceTrackerCollections.list(RenderFilter.class,filterString,new PortletFilterServiceTrackerCustomizer<RenderFilter>(_liferayPortletContext),properties);
  _resourceFilters=ServiceTrackerCollections.list(ResourceFilter.class,filterString,new PortletFilterServiceTrackerCustomizer<ResourceFilter>(_liferayPortletContext),properties);
  setPortletFilters();
}
