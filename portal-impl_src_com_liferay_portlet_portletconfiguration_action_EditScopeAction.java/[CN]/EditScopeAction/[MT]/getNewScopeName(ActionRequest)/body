{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  Layout layout=themeDisplay.getLayout();
  String scopeType=ParamUtil.getString(actionRequest,"scopeType");
  if (Validator.isNull(scopeType)) {
    return null;
  }
  String scopeName=null;
  if (scopeType.equals("company")) {
    scopeName=themeDisplay.translate("global");
  }
 else   if (scopeType.equals("layout")) {
    String scopeLayoutUuid=ParamUtil.getString(actionRequest,"scopeLayoutUuid");
    Layout scopeLayout=LayoutLocalServiceUtil.getLayoutByUuidAndGroupId(scopeLayoutUuid,layout.getGroupId());
    if (!scopeLayout.hasScopeGroup()) {
      String name=String.valueOf(scopeLayout.getPlid());
      GroupLocalServiceUtil.addGroup(themeDisplay.getUserId(),Layout.class.getName(),scopeLayout.getPlid(),name,null,0,null,true,null);
    }
    scopeName=scopeLayout.getName(themeDisplay.getLocale());
  }
 else {
    throw new IllegalArgumentException("Scope type " + scopeType + " is invalid");
  }
  return scopeName;
}
