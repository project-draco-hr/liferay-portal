{
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  String portletTitle=PortletConfigurationUtil.getPortletTitle(preferences,themeDisplay.getLanguageId());
  if (Validator.isNull(portletTitle)) {
    ServletContext servletContext=(ServletContext)portletRequest.getAttribute(WebKeys.CTX);
    PortletConfig portletConfig=PortletConfigFactory.create(portlet,servletContext);
    ResourceBundle resourceBundle=portletConfig.getResourceBundle(themeDisplay.getLocale());
    portletTitle=resourceBundle.getString(JavaConstants.JAVAX_PORTLET_TITLE);
  }
  return portletTitle;
}
