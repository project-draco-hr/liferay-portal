{
  Field field=ReflectionUtil.getDeclaredField(PropsValues.class,"AUTH_TOKEN_SHARED_SECRET");
  Object originalValue=field.get(null);
  try {
    field.set(null,"test");
    setUpPortlet(testPortlet,properties,_TEST_PORTLET_ID);
    HttpServletRequest request=getHttpServletRequest();
    PortletURL portletURL=new PortletURLImpl(request,_TEST_PORTLET_ID,layout.getPlid(),PortletRequest.ACTION_PHASE);
    portletURL.setParameter("p_auth_secret",Encryptor.digest("test"));
    Map<String,List<String>> responseMap=request(portletURL.toString());
    Assert.assertEquals("200",getString(responseMap,"code"));
    Assert.assertTrue(map.containsKey("processAction"));
  }
  finally {
    field.set(null,originalValue);
  }
}
