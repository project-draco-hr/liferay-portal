{
  InputStream is=null;
  try {
    int pos=source.indexOf(JOURNAL_SEPARATOR + StringPool.SLASH);
    if (pos != -1) {
      int x=source.indexOf(StringPool.SLASH,pos);
      int y=source.indexOf(StringPool.SLASH,x + 1);
      int z=source.indexOf(StringPool.SLASH,y + 1);
      String companyId=source.substring(x + 1,y);
      long groupId=Long.parseLong(source.substring(y + 1,z));
      String templateId=source.substring(z + 1);
      if (_log.isDebugEnabled()) {
        _log.debug("Loading " + new JournalTemplatePK(companyId,groupId,templateId));
      }
      JournalTemplate template=JournalTemplateLocalServiceUtil.getTemplate(companyId,groupId,templateId);
      String buffer=template.getXsl();
      is=new ByteArrayInputStream(buffer.getBytes());
    }
  }
 catch (  PortalException pe) {
    throw new ResourceNotFoundException(source);
  }
catch (  SystemException se) {
    throw new ResourceNotFoundException(source);
  }
  return is;
}
