{
  DLFileEntry dlFileEntry=_dlFileEntryServiceAdapter.getDLFileEntry(fileEntryId);
  if (dlFileEntry.isCheckedOut()) {
    return null;
  }
  DLFileVersion dlFileVersion=_dlFileVersionServiceAdapter.getLatestFileVersion(fileEntryId,true);
  if (dlFileVersion.isApproved() || (serviceContext.getWorkflowAction() == WorkflowConstants.ACTION_PUBLISH)) {
    return dlFileVersion;
  }
  return null;
}
