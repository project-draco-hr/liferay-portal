{
  SearchContainer<MBMessage> searchContainer=new SearchContainer(_liferayPortletRequest,_liferayPortletResponse.createRenderURL(),null,null);
  SearchContext searchContext=SearchContextFactory.getInstance(_liferayPortletRequest.getHttpServletRequest());
  searchContext.setAttribute(Field.CLASS_NAME_ID,PortalUtil.getClassNameId(JournalArticle.class));
  searchContext.setAttribute("discussion",true);
  Indexer indexer=IndexerRegistryUtil.getIndexer(MBMessage.class);
  Hits hits=indexer.search(searchContext);
  List<MBMessage> mbMessages=new ArrayList<>();
  for (  Document document : hits.getDocs()) {
    long entryClassPK=GetterUtil.getLong(document.get(Field.ENTRY_CLASS_PK));
    MBMessage mbMessage=MBMessageLocalServiceUtil.fetchMBMessage(entryClassPK);
    mbMessages.add(mbMessage);
  }
  searchContainer.setTotal(hits.getLength());
  searchContainer.setResults(mbMessages);
  return searchContainer;
}
