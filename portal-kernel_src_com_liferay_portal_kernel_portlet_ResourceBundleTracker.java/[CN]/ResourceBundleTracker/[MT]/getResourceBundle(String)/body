{
  ResourceBundle resourceBundle=_resourceBundles.get(languageId);
  if (resourceBundle != null) {
    return resourceBundle;
  }
synchronized (_resourceBundles) {
    resourceBundle=_resourceBundles.get(languageId);
    if (resourceBundle == null) {
      ResourceBundleUtil.loadResourceBundles(_resourceBundles,languageId,new ResourceBundleLoader(){
        @Override public ResourceBundle loadResourceBundle(        String languageId){
          List<ResourceBundle> resourceBundles=_serviceTrackerMap.getService(languageId);
          if ((resourceBundles == null) || resourceBundles.isEmpty()) {
            return null;
          }
          int size=resourceBundles.size();
          if (size == 1) {
            return resourceBundles.get(0);
          }
          return new AggregateResourceBundle(resourceBundles.toArray(new ResourceBundle[size]));
        }
      }
);
      resourceBundle=_resourceBundles.get(languageId);
    }
  }
  return resourceBundle;
}
