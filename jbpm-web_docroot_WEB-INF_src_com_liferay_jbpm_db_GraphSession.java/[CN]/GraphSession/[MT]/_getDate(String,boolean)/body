{
  if (Validator.isNull(date)) {
    return null;
  }
 else {
    Calendar calendar=Calendar.getInstance();
    DateFormat dateFormat=DateUtil.getISOFormat();
    calendar.setTime(GetterUtil.getDate(date,dateFormat));
    if (greaterThan) {
      calendar.set(Calendar.HOUR_OF_DAY,0);
      calendar.set(Calendar.MINUTE,0);
      calendar.set(Calendar.SECOND,0);
      calendar.set(Calendar.MILLISECOND,0);
    }
 else {
      calendar.set(Calendar.HOUR_OF_DAY,23);
      calendar.set(Calendar.MINUTE,59);
      calendar.set(Calendar.SECOND,59);
      calendar.set(Calendar.MILLISECOND,999);
    }
    TimeZone timeZone=TimeZone.getTimeZone(_timeZoneId);
    int offset=timeZone.getOffset(calendar.getTimeInMillis());
    return new Timestamp(calendar.getTimeInMillis() - offset);
  }
}
