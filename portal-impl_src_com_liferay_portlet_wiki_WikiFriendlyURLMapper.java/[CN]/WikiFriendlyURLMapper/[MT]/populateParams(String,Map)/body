{
  params.put("p_p_id",_PORTLET_ID);
  params.put("p_p_action","0");
  params.put("p_p_mode",PortletMode.VIEW.toString());
  addParam(params,"struts_action","/wiki/view");
  int x=friendlyURLPath.indexOf(StringPool.SLASH,1);
  String[] urlFragments=StringUtil.split(friendlyURLPath.substring(x + 1),StringPool.SLASH);
  if (urlFragments.length >= 1) {
    String nodeId=urlFragments[0];
    if (Validator.isNumber(nodeId)) {
      addParam(params,"nodeId",nodeId);
    }
 else {
      addParam(params,"nodeName",nodeId);
    }
    if (urlFragments.length >= 2) {
      String title=urlFragments[1];
      addParam(params,"title",title);
      if (urlFragments.length >= 3) {
        String windowState=urlFragments[2];
        params.put("p_p_state",windowState);
      }
    }
  }
}
