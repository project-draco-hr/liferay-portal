{
  String friendlyURLPath=null;
  String strutsAction=GetterUtil.getString(portletURL.getParameter("struts_action"));
  if (strutsAction.equals("/wiki/view")) {
    String title=portletURL.getParameter("title");
    String nodeId=portletURL.getParameter("nodeId");
    String nodeName=portletURL.getParameter("nodeName");
    if (Validator.isNotNull(nodeId) || Validator.isNotNull(nodeName)) {
      StringMaker sm=new StringMaker();
      sm.append(StringPool.SLASH);
      sm.append(_MAPPING);
      sm.append(StringPool.SLASH);
      if (Validator.isNotNull(nodeId)) {
        sm.append(nodeId);
        portletURL.addParameterIncludedInPath("nodeId");
      }
 else       if (Validator.isNotNull(nodeName)) {
        sm.append(nodeName);
        portletURL.addParameterIncludedInPath("nodeName");
      }
      if (Validator.isNotNull(title)) {
        sm.append(StringPool.SLASH);
        sm.append(title);
        portletURL.addParameterIncludedInPath("title");
        WindowState windowState=portletURL.getWindowState();
        if (!windowState.equals(WindowState.NORMAL)) {
          sm.append(StringPool.SLASH);
          sm.append(windowState);
        }
      }
      friendlyURLPath=sm.toString();
    }
  }
  if (Validator.isNotNull(friendlyURLPath)) {
    portletURL.addParameterIncludedInPath("p_p_id");
    portletURL.addParameterIncludedInPath("struts_action");
  }
  return friendlyURLPath;
}
