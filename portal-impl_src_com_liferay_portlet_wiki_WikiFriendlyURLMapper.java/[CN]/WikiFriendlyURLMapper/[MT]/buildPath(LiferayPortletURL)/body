{
  String friendlyURLPath=null;
  String strutsAction=GetterUtil.getString(portletURL.getParameter("struts_action"));
  if (strutsAction.equals("/wiki/view")) {
    String nodeId=portletURL.getParameter("nodeId");
    String nodeName=portletURL.getParameter("nodeName");
    String title=portletURL.getParameter("title");
    if (Validator.isNotNull(nodeId) || Validator.isNotNull(nodeName)) {
      StringBuilder sb=new StringBuilder();
      sb.append(StringPool.SLASH);
      sb.append(_MAPPING);
      sb.append(StringPool.SLASH);
      if (Validator.isNotNull(nodeId)) {
        sb.append(nodeId);
        portletURL.addParameterIncludedInPath("nodeId");
      }
 else       if (Validator.isNotNull(nodeName)) {
        sb.append(nodeName);
        portletURL.addParameterIncludedInPath("nodeName");
      }
      if (Validator.isNotNull(title)) {
        sb.append(StringPool.SLASH);
        sb.append(HttpUtil.encodeURL(title));
        portletURL.addParameterIncludedInPath("title");
        WindowState windowState=portletURL.getWindowState();
        if (!windowState.equals(WindowState.NORMAL)) {
          sb.append(StringPool.SLASH);
          sb.append(windowState);
        }
      }
      friendlyURLPath=sb.toString();
    }
  }
  if (Validator.isNotNull(friendlyURLPath)) {
    portletURL.addParameterIncludedInPath("p_p_id");
    portletURL.addParameterIncludedInPath("struts_action");
  }
  return friendlyURLPath;
}
