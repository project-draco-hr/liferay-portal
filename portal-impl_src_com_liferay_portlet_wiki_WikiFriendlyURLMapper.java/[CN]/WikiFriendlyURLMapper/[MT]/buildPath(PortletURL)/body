{
  if (!(portletURL instanceof PortletURLImpl)) {
    return null;
  }
  PortletURLImpl url=(PortletURLImpl)portletURL;
  String friendlyURLPath=null;
  String strutsAction=GetterUtil.getString(url.getParameter("struts_action"));
  if (strutsAction.equals("/wiki/view")) {
    String title=url.getParameter("title");
    String nodeId=url.getParameter("nodeId");
    if (Validator.isNotNull(nodeId)) {
      StringMaker sm=new StringMaker();
      sm.append(StringPool.SLASH);
      sm.append(_MAPPING);
      sm.append(StringPool.SLASH);
      sm.append(nodeId);
      url.addParameterIncludedInPath("nodeId");
      if (Validator.isNotNull(title)) {
        sm.append(StringPool.SLASH);
        sm.append(title);
        url.addParameterIncludedInPath("title");
      }
      friendlyURLPath=sm.toString();
    }
  }
  if (Validator.isNotNull(friendlyURLPath)) {
    url.addParameterIncludedInPath("p_p_id");
    url.addParameterIncludedInPath("struts_action");
  }
  return friendlyURLPath;
}
