{
  String name=projectTemplatesArgs.getName();
  if (Validator.isNull(name)) {
    throw new IllegalArgumentException("Name is required");
  }
  File destinationDir=projectTemplatesArgs.getDestinationDir();
  if (destinationDir == null) {
    throw new IllegalArgumentException("Destination dir is required");
  }
  File dir=new File(destinationDir,name);
  if (dir.exists()) {
    String[] fileNames=dir.list();
    if ((fileNames == null) || (fileNames.length > 0)) {
      throw new IllegalArgumentException(dir + " is not empty or it is a file");
    }
  }
  String template=projectTemplatesArgs.getTemplate();
  if (Validator.isNull(projectTemplatesArgs.getTemplate())) {
    throw new IllegalArgumentException("Template is required");
  }
  String className=projectTemplatesArgs.getClassName();
  if (Validator.isNull(className)) {
    className=_getClassName(name);
  }
  if (template.equals("activator") && !className.endsWith("Activator")) {
    className+="Activator";
  }
 else   if ((template.equals("mvc-portlet") || template.equals("portlet")) && className.endsWith("Portlet")) {
    className=className.substring(0,className.length() - 7);
  }
  projectTemplatesArgs.setClassName(className);
  if (Validator.isNull(projectTemplatesArgs.getPackageName())) {
    projectTemplatesArgs.setPackageName(_getPackageName(name));
  }
}
