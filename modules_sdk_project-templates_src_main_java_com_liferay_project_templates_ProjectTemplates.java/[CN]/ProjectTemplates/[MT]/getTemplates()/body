{
  final List<String> templates=new ArrayList<>();
  File file=_getJarFile();
  if (file.isDirectory()) {
    File[] templateFiles=file.listFiles(new FilenameFilter(){
      @Override public boolean accept(      File dir,      String name){
        return name.startsWith(_TEMPLATES_BUNDLE_PREFIX);
      }
    }
);
    for (    File templateFile : templateFiles) {
      String templateFileName=templateFile.getName();
      String templateName=templateFileName.substring(_TEMPLATES_BUNDLE_PREFIX.length(),templateFileName.lastIndexOf('.'));
      templates.add(templateName);
    }
  }
 else {
    try (JarFile jarFile=new JarFile(file)){
      Enumeration<JarEntry> enumeration=jarFile.entries();
      while (enumeration.hasMoreElements()) {
        JarEntry jarEntry=enumeration.nextElement();
        if (!jarEntry.isDirectory()) {
          continue;
        }
        String name=jarEntry.getName();
        if (name.startsWith(_TEMPLATES_BUNDLE_PREFIX)) {
          String template=name.substring(_TEMPLATES_BUNDLE_PREFIX.length(),name.indexOf("-"));
          templates.add(template);
        }
      }
    }
   }
  Collections.sort(templates);
  return templates.toArray(new String[templates.size()]);
}
