{
  if (file == null || !file.exists() || (file.length() == 0)) {
    return addFileEntry(userId,repositoryId,folderId,sourceFileName,mimeType,title,description,changeLog,null,0,serviceContext);
  }
  LocalRepository localRepository=getLocalRepository(repositoryId);
  FileEntry fileEntry=localRepository.addFileEntry(userId,folderId,sourceFileName,mimeType,title,description,changeLog,file,serviceContext);
  DLProcessorRegistryUtil.trigger(fileEntry);
  return fileEntry;
}
