{
  LocalRepository fromLocalRepository=getFolderLocalRepository(folderId);
  LocalRepository toLocalRepository=getFolderLocalRepository(parentFolderId,serviceContext.getScopeGroupId());
  if (parentFolderId != DLFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
    Folder toFolder=toLocalRepository.getFolder(parentFolderId);
    if (toFolder.isMountPoint()) {
      toLocalRepository=getLocalRepository(toFolder.getRepositoryId());
    }
  }
  if (fromLocalRepository.getRepositoryId() == toLocalRepository.getRepositoryId()) {
    Folder folder=fromLocalRepository.moveFolder(userId,folderId,parentFolderId,serviceContext);
    return folder;
  }
  return moveFolders(userId,folderId,parentFolderId,fromLocalRepository,toLocalRepository,serviceContext);
}
