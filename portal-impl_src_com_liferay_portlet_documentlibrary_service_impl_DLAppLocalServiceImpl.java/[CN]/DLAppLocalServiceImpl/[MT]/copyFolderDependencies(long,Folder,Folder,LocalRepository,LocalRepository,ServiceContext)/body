{
  List<RepositoryEntry> repositoryEntries=fromLocalRepository.getFoldersAndFileEntriesAndFileShortcuts(sourceFolder.getFolderId(),WorkflowConstants.STATUS_ANY,true,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  for (  RepositoryEntry repositoryEntry : repositoryEntries) {
    if (repositoryEntry instanceof FileEntry) {
      FileEntry fileEntry=(FileEntry)repositoryEntry;
      copyFileEntry(userId,toLocalRepository,fileEntry,destinationFolder.getFolderId(),serviceContext);
    }
 else     if (repositoryEntry instanceof FileShortcut) {
      if (destinationFolder.isSupportsShortcuts()) {
        FileShortcut fileShortcut=(FileShortcut)repositoryEntry;
        toLocalRepository.addFileShortcut(userId,destinationFolder.getFolderId(),fileShortcut.getToFileEntryId(),serviceContext);
      }
    }
 else     if (repositoryEntry instanceof Folder) {
      Folder currentFolder=(Folder)repositoryEntry;
      Folder newFolder=toLocalRepository.addFolder(userId,destinationFolder.getFolderId(),currentFolder.getName(),currentFolder.getDescription(),serviceContext);
      dlAppHelperLocalService.addFolder(userId,newFolder,serviceContext);
      copyFolderDependencies(userId,currentFolder,newFolder,fromLocalRepository,toLocalRepository,serviceContext);
    }
  }
}
