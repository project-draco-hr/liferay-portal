{
  mimeType=DLAppUtil.getMimeType(sourceFileName,mimeType,title,null,is);
  LocalRepository localRepository=getLocalRepository(0,fileEntryId,0);
  FileEntry oldFileEntry=localRepository.getFileEntry(fileEntryId);
  FileVersion oldFileVersion=oldFileEntry.getFileVersion();
  FileEntry fileEntry=localRepository.updateFileEntry(userId,fileEntryId,sourceFileName,mimeType,title,description,changeLog,majorVersion,is,size,serviceContext);
  if (is != null) {
    DLProcessorRegistryUtil.cleanUp(fileEntry.getLatestFileVersion());
    oldFileVersion=null;
  }
  dlAppHelperLocalService.updateFileEntry(userId,fileEntry,oldFileVersion,fileEntry.getFileVersion(),serviceContext);
  return fileEntry;
}
