{
  Configuration configuration=_configurations.get(companyId);
  if (!useDefault && (configuration == null)) {
    return Collections.emptyList();
  }
 else   if (configuration == null) {
    configuration=_configurations.get(0L);
  }
  if (configuration == null) {
    Class<?> clazz=getMetatype();
    throw new IllegalArgumentException("No instance of " + clazz.getName() + " for company "+ companyId);
  }
  List<Dictionary<String,Object>> configurations=new ArrayList<>();
  Dictionary<String,Object> properties=configuration.getProperties();
  configurations.add(properties);
  return configurations;
}
