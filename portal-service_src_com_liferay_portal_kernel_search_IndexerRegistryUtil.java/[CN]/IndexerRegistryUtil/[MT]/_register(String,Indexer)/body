{
  Registry registry=RegistryUtil.getRegistry();
  Map<String,Object> map=new HashMap<String,Object>();
  Set<String> classNames=_collectClassNames(indexer.getClassNames(),indexer.getClass().getName(),className);
  map.put(_KEY_CLASSNAMES,classNames.toArray(new String[classNames.size()]));
  map.put(_KEY_PORTLET_NAME,indexer.getPortletId());
  ServiceRegistration<Indexer> serviceRegistration=registry.registerService(Indexer.class,indexer,map);
  for (  String curClassName : classNames) {
    _serviceRegistrations.put(curClassName,serviceRegistration);
  }
}
