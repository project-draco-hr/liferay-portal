{
  Registry registry=RegistryUtil.getRegistry();
  Map<String,Object> properties=new HashMap<>();
  Set<String> classNames=_aggregrateClassNames(indexer.getClassNames(),ClassUtil.getClassName(indexer),className);
  properties.put("indexer.classNames",classNames.toArray(new String[classNames.size()]));
  properties.put("javax.portlet.name",indexer.getPortletId());
  ServiceRegistration<Indexer> serviceRegistration=registry.registerService(Indexer.class,indexer,properties);
  for (  String curClassName : classNames) {
    _serviceRegistrations.put(curClassName,serviceRegistration);
  }
}
