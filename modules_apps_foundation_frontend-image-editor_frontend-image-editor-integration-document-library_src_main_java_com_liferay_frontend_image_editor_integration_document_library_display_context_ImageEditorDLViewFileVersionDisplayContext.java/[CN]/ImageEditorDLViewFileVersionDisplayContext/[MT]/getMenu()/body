{
  Menu menu=super.getMenu();
  List<MenuItem> menuItems=menu.getMenuItems();
  if (!_imageEditorDLDisplayContextHelper.isEditWithImageEditorActionAvailable()) {
    return menu;
  }
  if (!ArrayUtil.contains(PropsValues.DL_FILE_ENTRY_PREVIEW_IMAGE_MIME_TYPES,_fileEntry.getMimeType())) {
    return menu;
  }
  ResourceBundle resourceBundle=_resourceBundleLoader.loadResourceBundle(LanguageUtil.getLanguageId(_themeDisplay.getLocale()));
  ImageEditorDLDisplayContextHelper imageEditorDLDisplayContextHelper=new ImageEditorDLDisplayContextHelper(fileVersion,request);
  menuItems.add(imageEditorDLDisplayContextHelper.getJavacriptEditWithImageEditorMenuItem(resourceBundle));
  return menu;
}
