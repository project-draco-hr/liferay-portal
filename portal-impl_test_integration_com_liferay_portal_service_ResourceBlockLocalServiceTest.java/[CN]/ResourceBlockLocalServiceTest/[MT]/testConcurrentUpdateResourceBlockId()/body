{
  deleteResourceBlock(COMPANY_ID,GROUP_ID,MODEL_NAME);
  ResourceBlockPermissionsContainer resourceBlockPermissionsContainer=getResourceBlockPermissionsContainer();
  String permissionsHash=ResourceBlockLocalServiceUtil.getPermissionsHash(resourceBlockPermissionsContainer);
  PermissionedModel permissionedModel=new MockPermissionedModel();
  long increaseCountValue=1000;
  int threadCount=10;
  List<Callable<Void>> callables=new ArrayList<Callable<Void>>();
  for (int i=0; i < increaseCountValue; i++) {
    callables.add(new UpdateResourceBlockIdCallable(permissionedModel,permissionsHash,resourceBlockPermissionsContainer));
  }
  ExecutorService executorService=Executors.newFixedThreadPool(threadCount);
  List<Future<Void>> futures=executorService.invokeAll(callables);
  for (  Future<Void> future : futures) {
    future.get();
  }
  executorService.shutdownNow();
  assertResourceBlockReferenceCount(permissionedModel.getResourceBlockId(),increaseCountValue);
}
