{
  User user=ServiceTestUtil.addUser("testAddOrganizationWithIndirectAssociation",false,null);
  Organization organization=OrganizationLocalServiceUtil.addOrganization(user.getUserId(),OrganizationConstants.DEFAULT_PARENT_ORGANIZATION_ID,"testAddOrganizationWithIndirectAssociation",OrganizationConstants.TYPE_REGULAR_ORGANIZATION,false,0,0,ListTypeConstants.ORGANIZATION_STATUS_DEFAULT,StringPool.BLANK,false,null);
  try {
    List<Organization> organizations=user.getOrganizations(true);
    Assert.assertTrue(organizations.contains(organization));
  }
  finally {
    OrganizationLocalServiceUtil.deleteOrganization(organization.getOrganizationId());
  }
}
