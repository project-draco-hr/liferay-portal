{
  final String[] values=FieldCache.DEFAULT.getStrings(reader,field);
  return new DocComparator(){
    public int compare(    ScoreDoc doc1,    ScoreDoc doc2){
      if (values[doc1.doc] == null) {
        if (values[doc2.doc] == null) {
          return 0;
        }
        return -1;
      }
 else       if (values[doc2.doc] == null) {
        return 1;
      }
      return _collator.compare(values[doc1.doc],values[doc2.doc]);
    }
    public String value(    ScoreDoc doc){
      return values[doc.doc];
    }
  }
;
}
