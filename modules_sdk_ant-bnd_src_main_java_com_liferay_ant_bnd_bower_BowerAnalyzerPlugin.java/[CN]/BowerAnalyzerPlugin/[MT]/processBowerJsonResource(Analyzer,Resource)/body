{
  BowerModule bowerModule=getBowerModule(bowerJSONResource.openInputStream());
  String bundleVersion=analyzer.getBundleVersion();
  if (bundleVersion == null) {
    Version version=null;
    try {
      version=new Version(bowerModule.version);
    }
 catch (    IllegalArgumentException iae) {
      String sanitizedQualifier=bowerModule.version.replaceAll("[^-_\\da-zA-Z]","");
      version=new Version("0.0.0." + sanitizedQualifier);
    }
    analyzer.setBundleVersion(version.toString());
  }
  Parameters parameters=new Parameters(){
    @Override public void mergeWith(    Parameters other,    boolean override){
      for (      Map.Entry<String,Attrs> entry : other.entrySet()) {
        Attrs existing=get(entry.getKey());
        if (existing == null) {
          Attrs tmp=new Attrs();
          tmp.put("____ignore____:Version","0.0.0");
          tmp.remove("____ignore____");
          tmp.putAll(entry.getValue());
          put(entry.getKey(),tmp);
        }
 else {
          existing.mergeWith(entry.getValue(),override);
        }
      }
    }
  }
;
  Attrs attrs=new Attrs();
  String bowerName=bowerModule.name;
  String webContextPath=analyzer.getProperty(WEB_CONTEXT_PATH);
  if ((webContextPath == null) && (bowerName != null)) {
    if (bowerName.indexOf('/') == 0) {
      bowerName=bowerName.substring(1);
    }
    analyzer.setProperty(WEB_CONTEXT_PATH,'/' + bowerName + "-"+ analyzer.getBundleVersion());
  }
  attrs.put(_OSGI_WEBRESOURCE,bowerName);
  attrs.put(Constants.VERSION_ATTRIBUTE + ":Version",analyzer.getBundleVersion());
  parameters.add(_OSGI_WEBRESOURCE,attrs);
  setCapabilities(analyzer,Constants.PROVIDE_CAPABILITY,parameters);
  return bowerModule;
}
