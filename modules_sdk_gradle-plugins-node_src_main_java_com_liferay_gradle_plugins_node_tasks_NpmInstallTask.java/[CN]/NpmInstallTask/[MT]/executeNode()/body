{
  Logger logger=getLogger();
  Path shrinkwrapJsonBackupPath=null;
  Path shrinkwrapJsonPath=null;
  File shrinkwrapJsonFile=getShrinkwrapJsonFile();
  if (isRemoveShrinkwrappedUrls() && (shrinkwrapJsonFile != null)) {
    shrinkwrapJsonPath=shrinkwrapJsonFile.toPath();
    shrinkwrapJsonBackupPath=Paths.get(shrinkwrapJsonPath.toString() + ".backup");
    Files.copy(shrinkwrapJsonPath,shrinkwrapJsonBackupPath,StandardCopyOption.REPLACE_EXISTING);
    removeShrinkwrappedUrls();
  }
  try {
    if (isCacheEnabled()) {
      if (logger.isInfoEnabled()) {
        logger.info("Cache for {} is enabled",this);
      }
      _npmInstallCached(this);
    }
 else {
      if (logger.isInfoEnabled()) {
        logger.info("Cache for {} is disabled",this);
      }
      _npmInstall();
    }
  }
  finally {
    if (shrinkwrapJsonBackupPath != null) {
      Files.move(shrinkwrapJsonBackupPath,shrinkwrapJsonPath,StandardCopyOption.REPLACE_EXISTING);
    }
  }
}
