{
  try {
    req.setAttribute("liferay-ui:social-bookmark:type",type);
    req.setAttribute("liferay-ui:social-bookmark:url",url);
    req.setAttribute("liferay-ui:social-bookmark:title",title);
    req.setAttribute("liferay-ui:social-bookmark:target",target);
    try {
      String[] socialTypes=PropsUtil.getArray(PropsUtil.SOCIAL_BOOKMARK_TYPES);
      if (!ArrayUtil.contains(socialTypes,type)) {
        return;
      }
      String postUrl=_getPostUrl(type,url,title);
      req.setAttribute("liferay-ui:social-bookmark:postUrl",postUrl);
    }
 catch (    Exception e) {
      throw new JspTagException(e.toString());
    }
    RequestDispatcher rd=ctx.getRequestDispatcher(page);
    rd.include(req,res);
  }
 catch (  Exception e) {
    _log.error(e,e);
    throw new JspException(e);
  }
}
