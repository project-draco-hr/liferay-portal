{
  String referringPortletResource=ParamUtil.getString(portletRequest,"referringPortletResource");
  if (Validator.isNull(referringPortletResource)) {
    return;
  }
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  Layout layout=LayoutLocalServiceUtil.getLayout(themeDisplay.getRefererPlid());
  PortletPreferences portletPreferences=PortletPreferencesFactoryUtil.getPortletSetup(layout,referringPortletResource,StringPool.BLANK);
  portletPreferences.setValue("questionId",String.valueOf(question.getQuestionId()));
  portletPreferences.store();
  LiferayPortletConfig liferayPortletConfig=(LiferayPortletConfig)portletConfig;
  SessionMessages.add(portletRequest,liferayPortletConfig.getPortletId() + SessionMessages.KEY_SUFFIX_REFRESH_PORTLET,referringPortletResource);
}
