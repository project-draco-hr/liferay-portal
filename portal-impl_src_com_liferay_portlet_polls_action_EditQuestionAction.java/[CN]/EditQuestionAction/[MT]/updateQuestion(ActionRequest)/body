{
  Layout layout=(Layout)actionRequest.getAttribute(WebKeys.LAYOUT);
  long questionId=ParamUtil.getLong(actionRequest,"questionId");
  String title=ParamUtil.getString(actionRequest,"title");
  String description=ParamUtil.getString(actionRequest,"description");
  int expirationDateMonth=ParamUtil.getInteger(actionRequest,"expirationDateMonth");
  int expirationDateDay=ParamUtil.getInteger(actionRequest,"expirationDateDay");
  int expirationDateYear=ParamUtil.getInteger(actionRequest,"expirationDateYear");
  int expirationDateHour=ParamUtil.getInteger(actionRequest,"expirationDateHour");
  int expirationDateMinute=ParamUtil.getInteger(actionRequest,"expirationDateMinute");
  int expirationDateAmPm=ParamUtil.getInteger(actionRequest,"expirationDateAmPm");
  boolean neverExpire=ParamUtil.getBoolean(actionRequest,"neverExpire");
  if (expirationDateAmPm == Calendar.PM) {
    expirationDateHour+=12;
  }
  List<PollsChoice> choices=new ArrayList<PollsChoice>();
  Enumeration<String> enu=actionRequest.getParameterNames();
  while (enu.hasMoreElements()) {
    String param=enu.nextElement();
    if (param.startsWith(CHOICE_DESCRIPTION_PREFIX)) {
      try {
        String id=param.substring(CHOICE_DESCRIPTION_PREFIX.length(),param.length());
        String choiceName=ParamUtil.getString(actionRequest,CHOICE_NAME_PREFIX + id);
        String choiceDescription=ParamUtil.getString(actionRequest,param);
        PollsChoice choice=PollsChoiceUtil.create(0);
        choice.setName(choiceName);
        choice.setDescription(choiceDescription);
        choices.add(choice);
      }
 catch (      Exception e) {
      }
    }
  }
  ServiceContext serviceContext=ServiceContextFactory.getInstance(BookmarksEntry.class.getName(),actionRequest);
  if (questionId <= 0) {
    PollsQuestionServiceUtil.addQuestion(title,description,expirationDateMonth,expirationDateDay,expirationDateYear,expirationDateHour,expirationDateMinute,neverExpire,choices,serviceContext);
  }
 else {
    PollsQuestionServiceUtil.updateQuestion(questionId,title,description,expirationDateMonth,expirationDateDay,expirationDateYear,expirationDateHour,expirationDateMinute,neverExpire,choices,serviceContext);
  }
}
