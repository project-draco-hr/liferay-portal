{
  setAppUndeployed(false);
  try {
    TargetModuleID[] ids=getDeploymentManager().getRunningModules(ModuleType.WAR,getDeploymentManager().getTargets());
    TargetModuleID[] myIDs=new TargetModuleID[1];
    for (    TargetModuleID id : ids) {
      if (warContext.equals(id.getModuleID())) {
        myIDs[0]=id;
        ProgressObject startProgress=getDeploymentManager().undeploy(myIDs);
        startProgress.addProgressListener(new UndeploymentProgressListener(this,warContext));
      }
    }
  }
 catch (  IllegalStateException ise) {
    _log.warn(ise);
  }
catch (  TargetException te) {
    _log.warn(te);
  }
  waitForAppUndeployment();
  if (_isError) {
    throw new Exception("Undeployment failed for " + warContext);
  }
}
