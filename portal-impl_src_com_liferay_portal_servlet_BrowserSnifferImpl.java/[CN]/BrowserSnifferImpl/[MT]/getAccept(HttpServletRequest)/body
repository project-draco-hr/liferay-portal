{
  String accept=StringPool.BLANK;
  if (request == null) {
    return accept;
  }
  Object acceptAttribute=request.getAttribute(HttpHeaders.ACCEPT);
  if (acceptAttribute instanceof String) {
    accept=(String)acceptAttribute;
  }
  if (Validator.isNotNull(accept)) {
    return accept;
  }
  String acceptHeader=request.getHeader(HttpHeaders.ACCEPT);
  if (acceptHeader != null) {
    accept=acceptHeader.toLowerCase();
  }
 else {
    accept=StringPool.BLANK;
  }
  request.setAttribute(HttpHeaders.ACCEPT,accept);
  return accept;
}
