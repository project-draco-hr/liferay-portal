{
  long classNameId=mbMessageModel.getClassNameId();
  long classPk=mbMessageModel.getClassPK();
  int type=0;
  String extraData=null;
  if (classNameId == _classNameModelsMap.get(WikiPage.class.getName())) {
    extraData="{\"version\":1}";
    type=WikiActivityKeys.ADD_PAGE;
  }
 else   if (classNameId == 0) {
    extraData="{\"title\":\"" + mbMessageModel.getSubject() + "\"}";
    type=MBActivityKeys.ADD_MESSAGE;
    classNameId=_classNameModelsMap.get(MBMessage.class.getName());
    classPk=mbMessageModel.getMessageId();
  }
 else {
    StringBundler sb=new StringBundler(5);
    sb.append("{\"messageId\":\"");
    sb.append(mbMessageModel.getMessageId());
    sb.append("\", \"title\":");
    sb.append(mbMessageModel.getSubject());
    sb.append("}");
    extraData=sb.toString();
    type=SocialActivityConstants.TYPE_ADD_COMMENT;
  }
  return newSocialActivityModel(mbMessageModel.getGroupId(),classNameId,classPk,type,extraData);
}
