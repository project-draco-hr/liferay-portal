{
  List<KeyValuePair> rolesPermissions=new ArrayList<KeyValuePair>();
  for (  Permission permission : permissions) {
    KeyValuePair kvp=new KeyValuePair();
    kvp.setKey(String.valueOf(_ownerRole.getRoleId()));
    kvp.setValue(String.valueOf(permission.getPermissionId()));
    rolesPermissions.add(kvp);
  }
  String name=_individualResourceNames.get(resource.getCodeId());
  if (memberRole != null) {
    List<String> communityDefaultactions=ResourceActionsUtil.getModelResourceCommunityDefaultActions(name);
    for (    Permission permission : permissions) {
      if (!communityDefaultactions.contains(permission.getActionId())) {
        continue;
      }
      KeyValuePair kvp=new KeyValuePair();
      kvp.setKey(String.valueOf(memberRole.getRoleId()));
      kvp.setValue(String.valueOf(permission.getPermissionId()));
      rolesPermissions.add(kvp);
    }
  }
  List<String> guestDefaultactions=ResourceActionsUtil.getModelResourceGuestDefaultActions(name);
  for (  Permission permission : permissions) {
    if (!guestDefaultactions.contains(permission.getActionId())) {
      continue;
    }
    KeyValuePair kvp=new KeyValuePair();
    kvp.setKey(String.valueOf(_guestRole.getRoleId()));
    kvp.setValue(String.valueOf(permission.getPermissionId()));
    rolesPermissions.add(kvp);
  }
  return rolesPermissions;
}
