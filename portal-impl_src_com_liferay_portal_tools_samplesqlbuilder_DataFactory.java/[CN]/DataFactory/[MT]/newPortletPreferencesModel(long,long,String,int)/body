{
  if (currentIndex == 1) {
    return newPortletPreferencesModel(plid,portletId,PortletConstants.DEFAULT_PREFERENCES);
  }
  SimpleCounter counter=_assetPublisherQueryCounter.get(groupId);
  if (counter == null) {
    counter=new SimpleCounter(0);
    _assetPublisherQueryCounter.put(groupId,counter);
  }
  String[] assetPublisherQueryValues=null;
  if (_assetPublisherQueryName.equals("assetCategories")) {
    List<AssetCategoryModel> assetCategoryModels=_assetCategoryModelsArray[(int)groupId - 1];
    if ((assetCategoryModels == null) || assetCategoryModels.isEmpty()) {
      return newPortletPreferencesModel(plid,portletId,PortletConstants.DEFAULT_PREFERENCES);
    }
    assetPublisherQueryValues=getAssetPublisherAssetCategoriesQueryValues(assetCategoryModels,(int)counter.get());
  }
 else {
    List<AssetTagModel> assetTagModels=_assetTagModelsArray[(int)groupId - 1];
    if ((assetTagModels == null) || assetTagModels.isEmpty()) {
      return newPortletPreferencesModel(plid,portletId,PortletConstants.DEFAULT_PREFERENCES);
    }
    assetPublisherQueryValues=getAssetPublisherAssetTagsQueryValues(assetTagModels,(int)counter.get());
  }
  PortletPreferences jxPortletPreferences=new PortletPreferencesImpl();
  jxPortletPreferences.setValue("queryAndOperator0","false");
  jxPortletPreferences.setValue("queryContains0","true");
  jxPortletPreferences.setValue("queryName0",_assetPublisherQueryName);
  jxPortletPreferences.setValues("queryValues0",new String[]{assetPublisherQueryValues[0],assetPublisherQueryValues[1],assetPublisherQueryValues[2]});
  jxPortletPreferences.setValue("queryAndOperator1","false");
  jxPortletPreferences.setValue("queryContains1","false");
  jxPortletPreferences.setValue("queryName1",_assetPublisherQueryName);
  jxPortletPreferences.setValue("queryValues1",assetPublisherQueryValues[3]);
  return newPortletPreferencesModel(plid,portletId,_portletPreferencesFactory.toXML(jxPortletPreferences));
}
