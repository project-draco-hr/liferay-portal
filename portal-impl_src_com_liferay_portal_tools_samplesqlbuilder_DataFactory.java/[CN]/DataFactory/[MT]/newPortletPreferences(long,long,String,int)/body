{
  List<AssetCategory> assetCategories=_assetCategoriesArray[(int)groupId - 1];
  boolean assetPublisherFilterEnabled=false;
  if ((_maxAssetPublisherPageCount * _maxAssetPublisherFilterRuleCount) > 0) {
    assetPublisherFilterEnabled=true;
  }
  if (!assetPublisherFilterEnabled || (currentIndex == 1) || (assetCategories == null)|| assetCategories.isEmpty()) {
    return newPortletPreferences(plid,portletId,PortletConstants.DEFAULT_PREFERENCES);
  }
  SimpleCounter counter=_assetPublisherRuleCounter.get(groupId);
  if (counter == null) {
    counter=new SimpleCounter(0);
    _assetPublisherRuleCounter.put(groupId,counter);
  }
  javax.portlet.PortletPreferences jxPortletPreferences=new com.liferay.portlet.PortletPreferencesImpl();
  for (int i=0; i < _maxAssetPublisherFilterRuleCount; i++) {
    int index=(int)counter.get() % assetCategories.size();
    AssetCategory assetCategory=assetCategories.get(index);
    jxPortletPreferences.setValue("queryAndOperator" + i,"false");
    jxPortletPreferences.setValue("queryContains" + i,"false");
    jxPortletPreferences.setValue("queryName" + i,"assetCategories");
    jxPortletPreferences.setValue("queryValues" + i,String.valueOf(assetCategory.getCategoryId()));
  }
  return newPortletPreferences(plid,portletId,PortletPreferencesFactoryUtil.toXML(jxPortletPreferences));
}
