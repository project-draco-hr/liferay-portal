{
  AssetCategory[] assetCategories=_assetCategories[(int)groupId - 1];
  if (!_assetPublisherFilter || (currentIndex == 1) || (assetCategories == null)|| (assetCategories.length == 0)) {
    return newPortletPreferences(plid,portletId,PortletConstants.DEFAULT_PREFERENCES);
  }
  SimpleCounter counter=_assetPublisherRuleCounter.get(groupId);
  if (counter == null) {
    counter=new SimpleCounter(0);
    _assetPublisherRuleCounter.put(groupId,counter);
  }
  javax.portlet.PortletPreferences jxPreferences=new com.liferay.portlet.PortletPreferencesImpl();
  for (int i=0; i < _maxAssetPublisherFilterRuleCount; i++) {
    int index=(int)counter.get() % assetCategories.length;
    AssetCategory assetCategory=assetCategories[index];
    jxPreferences.setValue("queryName" + i,"assetCategories");
    jxPreferences.setValue("queryValues" + i,String.valueOf(assetCategory.getCategoryId()));
    jxPreferences.setValue("queryAndOperator" + i,"false");
    jxPreferences.setValue("queryContains" + i,"false");
  }
  return newPortletPreferences(plid,portletId,PortletPreferencesFactoryUtil.toXML(jxPreferences));
}
