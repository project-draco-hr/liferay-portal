{
  long maxSize=getMaxFileSize();
  if ((maxSize > 0) && (size > maxSize)) {
    throw new EntryImageSizeException();
  }
  String extension=FileUtil.getExtension(fileName);
  String[] imageExtensions=PrefsPropsUtil.getStringArray(PropsKeys.BLOGS_IMAGE_EXTENSIONS,StringPool.COMMA);
  for (  String imageExtension : imageExtensions) {
    if (StringPool.STAR.equals(imageExtension) || imageExtension.equals(StringPool.PERIOD + extension)) {
      return;
    }
  }
  throw new EntryImageNameException("Invalid image for file name " + fileName);
}
