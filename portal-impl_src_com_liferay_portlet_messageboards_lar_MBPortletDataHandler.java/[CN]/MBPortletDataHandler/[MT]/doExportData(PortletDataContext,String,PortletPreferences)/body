{
  portletDataContext.addPermissions("com.liferay.portlet.messageboards",portletDataContext.getScopeGroupId());
  Element rootElement=addExportDataRootElement(portletDataContext);
  rootElement.addAttribute("group-id",String.valueOf(portletDataContext.getScopeGroupId()));
  ActionableDynamicQuery categoriesActionableDynamicQuery=new MBCategoryActionableDynamicQuery(){
    @Override protected void addCriteria(    DynamicQuery dynamicQuery){
      portletDataContext.addDateRangeCriteria(dynamicQuery,"modifiedDate");
    }
    @Override protected void performAction(    Object object) throws PortalException {
      MBCategory category=(MBCategory)object;
      StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,category);
    }
  }
;
  categoriesActionableDynamicQuery.setGroupId(portletDataContext.getScopeGroupId());
  categoriesActionableDynamicQuery.performActions();
  ActionableDynamicQuery messagesActionableDynamicQuery=new MBMessageActionableDynamicQuery(){
    @Override protected void addCriteria(    DynamicQuery dynamicQuery){
      portletDataContext.addDateRangeCriteria(dynamicQuery,"modifiedDate");
    }
    @Override protected void performAction(    Object object) throws PortalException {
      MBMessage message=(MBMessage)object;
      StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,message);
    }
  }
;
  messagesActionableDynamicQuery.setGroupId(portletDataContext.getScopeGroupId());
  messagesActionableDynamicQuery.performActions();
  if (portletDataContext.getBooleanParameter(MBPortletDataHandler.NAMESPACE,"thread-flags")) {
    ActionableDynamicQuery threadFlagsActionableDynamicQuery=new MBThreadFlagActionableDynamicQuery(){
      @Override protected void addCriteria(      DynamicQuery dynamicQuery){
        portletDataContext.addDateRangeCriteria(dynamicQuery,"modifiedDate");
      }
      @Override protected void performAction(      Object object) throws PortalException {
        MBThreadFlag message=(MBThreadFlag)object;
        StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,message);
      }
    }
;
    threadFlagsActionableDynamicQuery.setGroupId(portletDataContext.getScopeGroupId());
    threadFlagsActionableDynamicQuery.performActions();
  }
  if (!portletDataContext.getBooleanParameter(NAMESPACE,"user-bans")) {
    return getExportDataRootElementString(rootElement);
  }
  ActionableDynamicQuery userBansActionableDynamicQuery=new MBBanActionableDynamicQuery(){
    @Override protected void addCriteria(    DynamicQuery dynamicQuery){
      portletDataContext.addDateRangeCriteria(dynamicQuery,"modifiedDate");
    }
    @Override protected void performAction(    Object object) throws PortalException {
      MBBan userBan=(MBBan)object;
      StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,userBan);
    }
  }
;
  userBansActionableDynamicQuery.setGroupId(portletDataContext.getScopeGroupId());
  userBansActionableDynamicQuery.performActions();
  return getExportDataRootElementString(rootElement);
}
