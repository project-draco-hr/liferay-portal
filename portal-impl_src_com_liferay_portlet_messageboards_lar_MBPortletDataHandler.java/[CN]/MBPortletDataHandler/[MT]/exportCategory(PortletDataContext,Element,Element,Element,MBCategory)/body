{
  if (portletDataContext.isWithinDateRange(category.getModifiedDate())) {
    exportParentCategory(portletDataContext,categoriesElement,category.getParentCategoryId());
    String path=getCategoryPath(portletDataContext,category);
    if (portletDataContext.isPathNotProcessed(path)) {
      Element categoryElement=categoriesElement.addElement("category");
      portletDataContext.addClassedModel(categoryElement,path,category,NAMESPACE);
    }
  }
  List<MBMessage> messages=MBMessageUtil.findByG_C(category.getGroupId(),category.getCategoryId());
  for (  MBMessage message : messages) {
    exportMessage(portletDataContext,categoriesElement,messagesElement,threadFlagsElement,message);
  }
}
