{
  Document document=readXML(content);
  Element rootElement=document.getRootElement();
  sortAttributes(rootElement,true);
  boolean checkNumericalPortletNameElement=!isExcludedFile(_numericalPortletNameElementExclusionFiles,absolutePath);
  List<Element> portletElements=rootElement.elements("portlet");
  for (  Element portletElement : portletElements) {
    if (checkNumericalPortletNameElement) {
      Element portletNameElement=portletElement.element("portlet-name");
      String portletNameText=portletNameElement.getText();
      if (!Validator.isNumber(portletNameText)) {
        processErrorMessage(fileName,fileName + " contains a nonstandard portlet-name element " + portletNameText);
      }
    }
    if (fileName.endsWith("/liferay-portlet.xml")) {
      continue;
    }
    sortElementsByChildElement(portletElement,"init-param","name");
    Element portletPreferencesElement=portletElement.element("portlet-preferences");
    if (portletPreferencesElement != null) {
      sortElementsByChildElement(portletPreferencesElement,"preference","name");
    }
  }
  return Dom4jUtil.toString(document);
}
