{
  SendSyncDatagramCompletionHandler sendSyncDatagramCompletionHandler=new SendSyncDatagramCompletionHandler();
  datagram.completionHandler=sendSyncDatagramCompletionHandler;
  datagram.completionTypes=REPLIED_ENUM_SET;
  datagram.timeout=timeout;
  if (datagram.getSequenceId() == 0) {
    datagram.setSequenceId(generateSequenceId());
  }
  addResponseWaitingDatagram(datagram);
  doSendDatagram(registrationReference,datagram);
  return sendSyncDatagramCompletionHandler.waitResult(timeout);
}
