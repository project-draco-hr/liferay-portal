{
  List<WikiPage> pages=WikiPageLocalServiceUtil.getPages("classic_wiki");
  ClassicToCreoleTranslator translator=new ClassicToCreoleTranslator();
  MaintenanceUtil.appendStatus("Converting " + pages.size() + " pages from Classic Wiki to Creole format");
  long twentyFivePercent=pages.size() / 4;
  for (int i=0; i < pages.size(); i++) {
    if ((i > 0) && (i % twentyFivePercent == 0)) {
      MaintenanceUtil.appendStatus((i * 100. / pages.size()) + "% complete");
    }
    WikiPage page=pages.get(i);
    page.setFormat("creole");
    page.setContent(translator.translate(page.getContent()));
    WikiPageLocalServiceUtil.updateWikiPage(page);
  }
}
