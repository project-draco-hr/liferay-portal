{
  ThemeDisplay themeDisplay=(ThemeDisplay)renderRequest.getAttribute(WebKeys.THEME_DISPLAY);
  ConfigurationHelper configurationHelper=new ConfigurationHelper(_bundleContext,_configurationAdmin,_extendedMetaTypeService,themeDisplay.getLanguageId());
  List<ConfigurationModel> configurationModels=null;
  String factoryPid=ParamUtil.getString(renderRequest,"factoryPid");
  try {
    configurationModels=configurationHelper.getFactoryInstances(themeDisplay.getLanguageId(),factoryPid);
  }
 catch (  IOException ioe) {
    throw new PortletException(ioe);
  }
  renderRequest.setAttribute(ConfigurationAdminWebKeys.CONFIGURATION_MODEL_ITERATOR,new ConfigurationModelIterator(configurationModels));
  ConfigurationModel factoryConfigurationModel=configurationHelper.getConfigurationModel(factoryPid);
  renderRequest.setAttribute(ConfigurationAdminWebKeys.FACTORY_CONFIGURATION_MODEL,factoryConfigurationModel);
  return "/view_factory_instances.jsp";
}
