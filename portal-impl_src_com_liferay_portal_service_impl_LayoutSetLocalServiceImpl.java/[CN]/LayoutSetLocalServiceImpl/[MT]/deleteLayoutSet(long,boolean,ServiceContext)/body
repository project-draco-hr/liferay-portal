{
  Group group=groupPersistence.findByPrimaryKey(groupId);
  LayoutSet layoutSet=layoutSetPersistence.findByG_P(groupId,privateLayout);
  serviceContext.setSkipUpdatePageCount(true);
  layoutLocalService.deleteLayouts(groupId,privateLayout,serviceContext);
  if (group.isStagingGroup() || !group.isOrganization() || !group.isSite()) {
    try {
      imageLocalService.deleteImage(layoutSet.getLogoId());
    }
 catch (    NoSuchImageException nsie) {
      if (_log.isWarnEnabled()) {
        _log.warn("Unable to delete image " + layoutSet.getLogoId());
      }
    }
  }
  layoutSetPersistence.removeByG_P(groupId,privateLayout);
  if (!group.isStagingGroup() && group.isOrganization() && group.isSite()) {
    LayoutSet newLayoutSet=addLayoutSet(group.getGroupId(),privateLayout);
    newLayoutSet.setLogoId(layoutSet.getLogoId());
    layoutSetPersistence.update(newLayoutSet);
  }
  counterLocalService.reset(LayoutLocalServiceImpl.getCounterName(groupId,privateLayout));
  try {
    virtualHostPersistence.removeByC_L(layoutSet.getCompanyId(),layoutSet.getLayoutSetId());
  }
 catch (  NoSuchVirtualHostException nsvhe) {
  }
}
