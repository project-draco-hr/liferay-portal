{
  virtualHost=virtualHost.trim().toLowerCase();
  if (virtualHost.startsWith(Http.HTTP_WITH_SLASH) || virtualHost.startsWith(Http.HTTPS_WITH_SLASH)) {
    throw new LayoutSetVirtualHostException();
  }
  LayoutSet layoutSet=layoutSetPersistence.findByG_P(groupId,privateLayout);
  if (Validator.isNotNull(virtualHost)) {
    try {
      LayoutSet virtualHostLayoutSet=getLayoutSet(virtualHost);
      if (!layoutSet.equals(virtualHostLayoutSet)) {
        throw new LayoutSetVirtualHostException();
      }
    }
 catch (    NoSuchLayoutSetException nslse) {
    }
    try {
      companyLocalService.getCompanyByVirtualHost(virtualHost);
      throw new LayoutSetVirtualHostException();
    }
 catch (    NoSuchCompanyException nsce) {
    }
  }
  layoutSet.setVirtualHost(virtualHost);
  layoutSetPersistence.update(layoutSet);
  return layoutSet;
}
