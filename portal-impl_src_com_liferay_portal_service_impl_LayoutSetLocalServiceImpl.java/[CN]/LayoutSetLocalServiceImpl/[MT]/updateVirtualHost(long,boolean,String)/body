{
  virtualHost=virtualHost.trim().toLowerCase();
  if (virtualHost.startsWith(Http.HTTP_WITH_SLASH) || virtualHost.startsWith(Http.HTTPS_WITH_SLASH)) {
    throw new LayoutSetVirtualHostException();
  }
  LayoutSet layoutSet=layoutSetPersistence.findByG_P(groupId,privateLayout);
  if (Validator.isNotNull(virtualHost)) {
    long companyId=layoutSet.getCompanyId();
    long layoutSetId=layoutSet.getLayoutSetId();
    try {
      VirtualHost virtualHostObj=virtualHostPersistence.findByVirtualHostName(virtualHost);
      if (layoutSetId != virtualHostObj.getLayoutSetId()) {
        throw new LayoutSetVirtualHostException();
      }
    }
 catch (    NoSuchVirtualHostException nsvhe) {
      virtualHostLocalService.addVirtualHost(companyId,layoutSetId,virtualHost);
    }
  }
 else {
    try {
      virtualHostPersistence.removeByC_L(layoutSet.getCompanyId(),layoutSet.getLayoutSetId());
    }
 catch (    NoSuchVirtualHostException nsvhe) {
    }
  }
  return layoutSet;
}
