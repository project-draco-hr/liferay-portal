{
  LayoutSet layoutSet=layoutSetPersistence.findByG_P(groupId,privateLayout);
  if (Validator.isNull(layoutSetPrototypeUuid)) {
    layoutSetPrototypeUuid=layoutSet.getLayoutSetPrototypeUuid();
  }
  if (Validator.isNull(layoutSetPrototypeUuid) && layoutSetPrototypeLinkEnabled) {
    throw new IllegalStateException("Cannot set layoutSetPrototypeLinkEnabled to true when " + "layoutSetPrototypeUuid is null");
  }
  layoutSet.setLayoutSetPrototypeLinkEnabled(layoutSetPrototypeLinkEnabled);
  layoutSet.setLayoutSetPrototypeUuid(layoutSetPrototypeUuid);
  layoutSetPersistence.update(layoutSet,false);
}
