{
  request.setAttribute("liferay-ui:asset-display:abstractLength",_abstractLength);
  AssetEntry assetEntry=_assetEntry;
  if (assetEntry == null) {
    if (Validator.isNotNull(_className) && (_classPK > 0)) {
      assetEntry=AssetEntryLocalServiceUtil.fetchEntry(_className,_classPK);
    }
 else     if (_renderer != null) {
      assetEntry=AssetEntryLocalServiceUtil.fetchEntry(_renderer.getClassName(),_renderer.getClassPK());
    }
  }
  request.setAttribute("liferay-ui:asset-display:assetEntry",_assetEntry);
  Renderer renderer=_renderer;
  if ((renderer == null) && (assetEntry != null)) {
    renderer=assetEntry.getAssetRenderer();
  }
  if (renderer instanceof AssetRenderer) {
    AssetRenderer assetRenderer=(AssetRenderer)renderer;
    request.setAttribute(WebKeys.ASSET_RENDERER,assetRenderer);
  }
 else {
    request.setAttribute("liferay-ui:asset-display:renderer",renderer);
  }
  try {
    _page=renderer.render((RenderRequest)pageContext.getAttribute("renderRequest"),(RenderResponse)pageContext.getAttribute("renderResponse"),_template);
  }
 catch (  Exception e) {
    _log.error(e);
  }
  if (Validator.isNull(_page)) {
    _page="/html/taglib/ui/asset_display/" + _template + ".jsp";
  }
  AssetRendererFactory assetRendererFactory=_assetRendererFactory;
  if ((assetRendererFactory == null) && (assetEntry != null)) {
    assetRendererFactory=assetEntry.getAssetRendererFactory();
  }
  if (assetRendererFactory != null) {
    request.setAttribute(WebKeys.ASSET_RENDERER_FACTORY,assetRendererFactory);
    if (Validator.isNotNull(assetRendererFactory.getPortletId())) {
      String rootPortletId=PortletConstants.getRootPortletId(assetRendererFactory.getPortletId());
      PortletBag portletBag=PortletBagPool.get(rootPortletId);
      servletContext=portletBag.getServletContext();
    }
  }
  request.setAttribute(WebKeys.ASSET_ENTRY_VIEW_URL,_viewURL);
  addParam("showComments",String.valueOf(_showComments));
  addParam("showExtraInfo",String.valueOf(_showExtraInfo));
  addParam("showHeader",String.valueOf(_showHeader));
}
