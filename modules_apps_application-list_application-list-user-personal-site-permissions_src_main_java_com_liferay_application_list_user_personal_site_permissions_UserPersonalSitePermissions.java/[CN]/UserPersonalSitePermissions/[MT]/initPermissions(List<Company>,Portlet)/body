{
  String rootPortletId=portlet.getRootPortletId();
  for (  Company company : companies) {
    long companyId=company.getCompanyId();
    Role powerUserRole=getPowerUserRole(companyId);
    if (powerUserRole == null) {
      continue;
    }
    Group userPersonalSite=getPersonalSiteGroup(companyId);
    if (userPersonalSite == null) {
      continue;
    }
    try {
      initPermissions(companyId,powerUserRole.getRoleId(),rootPortletId,userPersonalSite.getGroupId());
    }
 catch (    PortalException e) {
      _log.error("Unable to initialize user personal site permissions" + " for portlet " + portlet.getPortletId() + " in company "+ companyId,e);
    }
  }
}
