{
  User user=userPersistence.findByPrimaryKey(serviceContext.getUserId());
  MDRRuleGroup ruleGroup=mdrRuleGroupPersistence.findByPrimaryKey(ruleGroupId);
  Date now=new Date();
  long ruleId=counterLocalService.increment();
  MDRRule rule=mdrRulePersistence.create(ruleId);
  rule.setUuid(serviceContext.getUuid());
  rule.setGroupId(ruleGroup.getGroupId());
  rule.setCompanyId(serviceContext.getCompanyId());
  rule.setUserId(user.getUserId());
  rule.setUserName(user.getFullName());
  rule.setRuleGroupId(ruleGroupId);
  rule.setNameMap(nameMap);
  rule.setDescriptionMap(descriptionMap);
  rule.setType(type);
  rule.setTypeSettings(typeSettings);
  rule=updateMDRRule(rule);
  ruleGroup.setModifiedDate(now);
  mdrRuleGroupPersistence.update(ruleGroup);
  return rule;
}
