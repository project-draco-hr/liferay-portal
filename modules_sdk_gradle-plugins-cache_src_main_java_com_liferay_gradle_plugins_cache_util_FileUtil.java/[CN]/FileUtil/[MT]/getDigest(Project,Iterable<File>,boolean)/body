{
  Clock clock=null;
  if (_logger.isInfoEnabled()) {
    clock=new Clock();
  }
  StringBuilder sb=new StringBuilder();
  SortedSet<File> sortedFiles=null;
  try {
    sortedFiles=flattenAndSort(files);
  }
 catch (  IOException ioe) {
    throw new GradleException("Unable to flatten files",ioe);
  }
  if (excludeIgnoredFiles) {
    removeIgnoredFiles(project,sortedFiles);
  }
  for (  File file : sortedFiles) {
    if (!file.exists()) {
      continue;
    }
    if (".DS_Store".equals(file.getName())) {
      continue;
    }
    sb.append(getDigest(file));
    sb.append(_DIGEST_SEPARATOR);
  }
  if (sb.length() == 0) {
    throw new GradleException("At least one file is required");
  }
  sb.setLength(sb.length() - 1);
  if (_logger.isInfoEnabled() && (clock != null)) {
    _logger.info("Getting the digest took " + clock.getTimeInMs() + " ms");
  }
  return sb.toString();
}
