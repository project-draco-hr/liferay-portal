{
  if (transactionAttributeAdapter.rollbackOn(throwable)) {
    try {
      platformTransactionManager.rollback(transactionStatusAdapter.getTransactionStatus());
    }
 catch (    RuntimeException re) {
      re.addSuppressed(throwable);
      _log.error("Application exception overridden by rollback exception",re);
      throw re;
    }
catch (    Error e) {
      e.addSuppressed(throwable);
      _log.error("Application exception overridden by rollback error",e);
      throw e;
    }
 finally {
      TransactionLifecycleManager.fireTransactionRollbackedEvent(transactionAttributeAdapter,transactionStatusAdapter,throwable);
    }
  }
 else {
    commit(platformTransactionManager,transactionAttributeAdapter,transactionStatusAdapter);
  }
  throw throwable;
}
