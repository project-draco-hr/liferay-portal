{
  TransactionStatus transactionStatus=platformTransactionManager.getTransaction(transactionAttribute);
  boolean newTransaction=transactionStatus.isNewTransaction();
  if (newTransaction) {
    fireTransactionCreatedEvent(transactionAttribute,transactionStatus);
  }
  Object returnValue=null;
  try {
    if (newTransaction) {
      LastSessionRecorderUtil.syncLastSessionState();
    }
    returnValue=methodInvocation.proceed();
  }
 catch (  Throwable throwable) {
    processThrowable(platformTransactionManager,throwable,transactionAttribute,transactionStatus);
  }
  processCommit(platformTransactionManager,transactionAttribute,transactionStatus);
  return returnValue;
}
