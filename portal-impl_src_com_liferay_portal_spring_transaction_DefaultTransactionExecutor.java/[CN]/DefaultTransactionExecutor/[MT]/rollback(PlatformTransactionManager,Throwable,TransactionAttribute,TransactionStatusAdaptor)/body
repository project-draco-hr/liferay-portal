{
  if (transactionAttribute.rollbackOn(throwable)) {
    try {
      platformTransactionManager.rollback(transactionStatusAdaptor.getTransactionStatus());
    }
 catch (    RuntimeException re) {
      re.addSuppressed(throwable);
      _log.error("Application exception overridden by rollback exception",re);
      throw re;
    }
catch (    Error e) {
      e.addSuppressed(throwable);
      _log.error("Application exception overridden by rollback error",e);
      throw e;
    }
 finally {
      fireTransactionRollbackedEvent(transactionAttribute,transactionStatusAdaptor,throwable);
    }
  }
 else {
    commit(platformTransactionManager,transactionAttribute,transactionStatusAdaptor);
  }
  throw throwable;
}
