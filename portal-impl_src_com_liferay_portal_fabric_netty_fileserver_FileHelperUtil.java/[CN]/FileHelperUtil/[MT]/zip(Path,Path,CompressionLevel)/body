{
  Path zipPath=Files.createTempFile(destDirPath,null,null);
  try (OutputStream outputStream=Files.newOutputStream(zipPath)){
    ZipOutputStream zipOutputStream=new ZipOutputStream(outputStream);
    zipOutputStream.setLevel(compressionLevel.getLevel());
    long startTime=System.currentTimeMillis();
    long rawSize=zip(sourcePath,zipOutputStream);
    if (_log.isDebugEnabled()) {
      long zippedSize=Files.size(zipPath);
      long time=(System.currentTimeMillis() - startTime) / 1000;
      double compressionRatio=rawSize / zippedSize;
      _log.debug("Zipped \"" + sourcePath + "("+ rawSize+ " bytes) -> "+ zipPath+ "("+ zippedSize+ " bytes)\" in "+ time+ "s. Compression ratio "+ compressionRatio);
    }
  }
 catch (  IOException ioe) {
    Files.delete(zipPath);
    throw ioe;
  }
  return zipPath;
}
