{
  PortletURL portletURL=requestBackedPortletURLFactory.createControlPanelRenderURL(ItemSelectorPortletKeys.ITEM_SELECTOR,group,refererGroupId,0);
  try {
    portletURL.setPortletMode(PortletMode.VIEW);
  }
 catch (  PortletModeException pme) {
    throw new SystemException(pme);
  }
  try {
    portletURL.setWindowState(LiferayWindowState.POP_UP);
  }
 catch (  WindowStateException wse) {
    throw new SystemException(wse);
  }
  Map<String,String[]> parameters=getItemSelectorParameters(itemSelectedEventName,itemSelectorCriteria);
  for (  Map.Entry<String,String[]> entry : parameters.entrySet()) {
    portletURL.setParameter(entry.getKey(),entry.getValue());
  }
  return portletURL;
}
