{
  List<AssetLink> assetLinks=assetLinkPersistence.findByE1_T(entryId,typeId);
  if (excludeNonVisibleLinks) {
    if (!assetLinks.isEmpty()) {
      List<AssetLink> filteredAssetLinks=new ArrayList<>(assetLinks.size());
      for (      AssetLink assetLink : assetLinks) {
        AssetEntry assetEntry=assetEntryPersistence.fetchByPrimaryKey(assetLink.getEntryId2());
        if ((assetEntry != null) && assetEntry.isVisible()) {
          filteredAssetLinks.add(assetLink);
        }
      }
      assetLinks=Collections.unmodifiableList(filteredAssetLinks);
    }
  }
  return assetLinks;
}
