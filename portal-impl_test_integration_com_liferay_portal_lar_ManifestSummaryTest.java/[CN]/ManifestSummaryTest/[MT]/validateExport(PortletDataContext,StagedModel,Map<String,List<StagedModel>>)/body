{
  ManifestSummary manifestSummary=portletDataContext.getManifestSummary();
  Map<String,Long> modelCountMap=manifestSummary.getModelCounters();
  long ddmStructuresCount=manifestSummary.getModelCount(DDMStructure.class,JournalArticle.class);
  long ddmTemplatesCount=manifestSummary.getModelCount(DDMTemplate.class,DDMStructure.class);
  Assert.assertEquals(4,modelCountMap.size());
  Assert.assertEquals(1,ddmStructuresCount);
  Assert.assertEquals(1,ddmTemplatesCount);
  Assert.assertEquals(1,manifestSummary.getModelCount(JournalArticle.class));
  Assert.assertEquals(1,manifestSummary.getModelCount(JournalFolder.class));
  Document document=SAXReaderUtil.createDocument();
  Element rootElement=document.addElement("root");
  Element headerElement=rootElement.addElement("header");
  _exportDateString=Time.getRFC822();
  headerElement.addAttribute("export-date",_exportDateString);
  ExportImportUtil.writeManifestSummary(document,manifestSummary);
  zipWriter.addEntry("/manifest.xml",document.asXML());
}
