{
  long classNameId=getRepositoryClassNameId(repositoryId);
  RepositoryClassDefinition repositoryClassDefinition=getRepositoryClassDefinition(classNameId);
  RepositoryFactory repositoryFactory=repositoryClassDefinition.getRepositoryFactory();
  LocalRepository localRepository=repositoryFactory.createLocalRepository(repositoryId);
  RepositoryInstanceDefinition repositoryInstanceDefinition=getRepositoryInstanceDefinition(localRepository);
  return new CapabilityLocalRepository(localRepository,repositoryInstanceDefinition.getSupportedCapabilities(),repositoryInstanceDefinition.getExportedCapabilities(),repositoryClassDefinition.getRepositoryEventTrigger());
}
