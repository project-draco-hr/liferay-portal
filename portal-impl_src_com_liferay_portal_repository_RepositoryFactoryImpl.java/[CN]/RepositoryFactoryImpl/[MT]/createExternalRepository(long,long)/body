{
  Repository repository=createExternalRepositoryImpl(repositoryId,classNameId);
  Map<Class<? extends Capability>,Capability> supportedCapabilities=getExternalSupportedCapabilities();
  Set<Class<? extends Capability>> exportedCapabilityClasses=getExternalExportedCapabilityClasses();
  CMISRepositoryHandler cmisRepositoryHandler=_getCMISRepositoryHandler(repository);
  if (cmisRepositoryHandler != null) {
    supportedCapabilities.put(CMISRepositoryHandler.class,cmisRepositoryHandler);
    exportedCapabilityClasses.add(CMISRepositoryHandler.class);
  }
  return new CapabilityRepository(repository,supportedCapabilities,exportedCapabilityClasses);
}
