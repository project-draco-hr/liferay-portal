{
  Repository repository=createExternalRepositoryImpl(repositoryId,classNameId);
  Map<Class<? extends Capability>,Capability> supportedCapabilities=new HashMap<Class<? extends Capability>,Capability>(getExternalSupportedCapabilities());
  Set<Class<? extends Capability>> exportedCapabilityClasses=new HashSet<Class<? extends Capability>>(getExternalExportedCapabilityClasses());
  _addCMISRepositoryHandlerCapability(repository,supportedCapabilities,exportedCapabilityClasses);
  return new CapabilityRepository(repository,supportedCapabilities,exportedCapabilityClasses);
}
