{
  long companyId=GetterUtil.getLong(array[0]);
  long userId=GetterUtil.getLong(array[1]);
  long nodeId=GetterUtil.getLong(array[2]);
  long pageResourcePrimKey=GetterUtil.getLong(array[3]);
  String fromName=array[4];
  String fromAddress=array[5];
  String subject=array[6];
  String body=array[7];
  String replyToAddress=array[8];
  String mailId=array[9];
  Set sent=CollectionFactory.getHashSet();
  if (_log.isInfoEnabled()) {
    _log.info("Sending notifications for {mailId=" + mailId + ", pageResourcePrimKey="+ pageResourcePrimKey+ ", nodeId="+ nodeId+ "}");
  }
  List subscriptions=SubscriptionLocalServiceUtil.getSubscriptions(companyId,WikiPage.class.getName(),pageResourcePrimKey);
  _sendEmail(userId,fromName,fromAddress,subject,body,subscriptions,sent,replyToAddress,mailId);
  subscriptions=SubscriptionLocalServiceUtil.getSubscriptions(companyId,WikiNode.class.getName(),nodeId);
  _sendEmail(userId,fromName,fromAddress,subject,body,subscriptions,sent,replyToAddress,mailId);
  if (_log.isInfoEnabled()) {
    _log.info("Finished sending notifications");
  }
}
