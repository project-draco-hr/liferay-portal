{
  PortletPreferences prefs=req.getPreferences();
  ThemeDisplay themeDisplay=(ThemeDisplay)req.getAttribute(WebKeys.THEME_DISPLAY);
  long groupId=GetterUtil.getLong(prefs.getValue("group-id",StringPool.BLANK));
  String articleId=GetterUtil.getString(prefs.getValue("article-id",StringPool.BLANK));
  String templateId=GetterUtil.getString(prefs.getValue("template-id",StringPool.BLANK));
  String languageId=LanguageUtil.getLanguageId(req);
  String content=null;
  if ((groupId > 0) && Validator.isNotNull(articleId)) {
    content=JournalContentUtil.getContent(groupId,articleId,templateId,languageId,themeDisplay);
  }
  if (Validator.isNotNull(content)) {
    req.setAttribute(WebKeys.JOURNAL_ARTICLE_CONTENT,content);
  }
  return mapping.findForward("portlet.journal_content.view");
}
