{
  if (query instanceof BooleanQuery) {
    BooleanQuery booleanQuery=(BooleanQuery)query;
    List<BooleanClause> clauses=booleanQuery.clauses();
    CMISConjunction conjunction=new CMISConjunction();
    CMISDisjunction disjunction=new CMISDisjunction();
    CMISConjunction not=new CMISConjunction();
    for (    BooleanClause clause : clauses) {
      CMISJunction junction=disjunction;
      BooleanClauseOccur occur=clause.getBooleanClauseOccur();
      if (occur.equals(BooleanClauseOccur.MUST)) {
        junction=conjunction;
      }
 else       if (occur.equals(BooleanClauseOccur.MUST_NOT)) {
        junction=not;
      }
      Query clauseQuery=clause.getQuery();
      traverseQuery(junction,clauseQuery);
    }
    if (!conjunction.isEmpty()) {
      criterion.add(conjunction);
    }
    if (!disjunction.isEmpty()) {
      criterion.add(disjunction);
    }
  }
 else   if (query instanceof TermQuery) {
    TermQuery termQuery=(TermQuery)query;
    QueryTerm queryTerm=termQuery.getQueryTerm();
    String field=queryTerm.getField();
    String value=queryTerm.getValue();
    if (_supportedFields.contains(field)) {
      CMISCriterion expression=createFieldExpression(field,value,CMISSimpleExpressionOperator.EQ);
      if (expression != null) {
        criterion.add(expression);
      }
    }
  }
 else   if (query instanceof TermRangeQuery) {
    TermRangeQuery termRangeQuery=(TermRangeQuery)query;
    String field=termRangeQuery.getField();
    String lowerTerm=termRangeQuery.getLowerTerm();
    String upperTerm=termRangeQuery.getUpperTerm();
    boolean includesLower=termRangeQuery.includesLower();
    boolean includesUpper=termRangeQuery.includesUpper();
    if (_supportedFields.contains(field)) {
      CMISCriterion expression=new CMISBetweenExpression(field,lowerTerm,upperTerm,includesLower,includesUpper);
      if (expression != null) {
        criterion.add(expression);
      }
    }
  }
 else   if (query instanceof WildcardQuery) {
    WildcardQuery wildcardQuery=(WildcardQuery)query;
    QueryTerm queryTerm=wildcardQuery.getQueryTerm();
    String field=queryTerm.getField();
    String value=queryTerm.getValue();
    if (_supportedFields.contains(field)) {
      CMISCriterion expression=createFieldExpression(field,value,CMISSimpleExpressionOperator.LIKE);
      if (expression != null) {
        criterion.add(expression);
      }
    }
  }
}
