{
  PortletPreferences prefs=req.getPreferences();
  String folderName=ParamUtil.getString(req,"folder_name");
  if (Validator.isNotNull(folderName)) {
    List list=ListUtil.fromArray(prefs.getValues("folder-names",new String[0]));
    list.add(folderName);
    Collections.sort(list,new StringComparator());
    prefs.setValues("folder-names",(String[])list.toArray(new String[0]));
  }
  prefs.store();
  SessionMessages.add(req,AddFolderAction.class.getName());
  res.sendRedirect(ParamUtil.getString(req,"redirect"));
}
