{
  String folderName=ParamUtil.getString(req,"folder_name");
  if (!MailUtil.isValidFolderName(folderName)) {
    SessionErrors.add(req,"folder_name_invalid");
  }
 else {
    if (!folderName.equals(MailUtil.MAIL_INBOX_NAME)) {
      if (!folderName.startsWith(MailUtil.MAIL_BOX_STYLE)) {
        folderName=MailUtil.MAIL_BOX_STYLE + folderName;
      }
    }
    FolderPool folderPool=MailUtil.getFolderPool(req);
    if (folderPool.get(folderName) != null) {
      SessionErrors.add(req,"folder_name_already_taken");
    }
  }
}
