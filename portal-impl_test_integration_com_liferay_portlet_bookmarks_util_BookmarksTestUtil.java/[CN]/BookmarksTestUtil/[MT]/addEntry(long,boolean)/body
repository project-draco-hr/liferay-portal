{
  boolean workflowEnabled=WorkflowThreadLocal.isEnabled();
  try {
    WorkflowThreadLocal.setEnabled(true);
    BookmarksFolder folder=addFolder(groupId);
    String name="Test Entry";
    String url="http://www.liferay.com";
    String description="This is a test entry.";
    ServiceContext serviceContext=new ServiceContext();
    serviceContext.setAddGroupPermissions(true);
    serviceContext.setAddGuestPermissions(true);
    serviceContext.setScopeGroupId(groupId);
    serviceContext.setWorkflowAction(WorkflowConstants.ACTION_SAVE_DRAFT);
    BookmarksEntry entry=BookmarksEntryServiceUtil.addEntry(groupId,folder.getFolderId(),name,url,description,serviceContext);
    if (approved) {
      entry.setStatus(WorkflowConstants.STATUS_APPROVED);
      entry=BookmarksEntryServiceUtil.updateEntry(entry.getEntryId(),groupId,entry.getFolderId(),entry.getName(),entry.getUrl(),entry.getUrl(),serviceContext);
    }
    return entry;
  }
  finally {
    WorkflowThreadLocal.setEnabled(workflowEnabled);
  }
}
