{
  try {
    File fileNameVersionFile=getFileNameVersionFile(companyId,repositoryId,fileName,versionNumber);
    if (fileNameVersionFile.exists()) {
      throw new DuplicateFileException(fileNameVersionFile.getPath());
    }
    FileUtil.write(fileNameVersionFile,is);
    DLIndexerUtil.updateFile(companyId,portletId,groupId,repositoryId,fileName,fileEntryId,properties,modifiedDate,serviceContext.getAssetCategoryIds(),serviceContext.getAssetTagNames());
  }
 catch (  IOException ioe) {
    throw new SystemException();
  }
}
