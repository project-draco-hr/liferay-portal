{
  String mimeType=MimeTypesUtil.getContentType(fileEntry.getTitle());
  boolean addDraftAssetEntry=false;
  String version=fileVersion.getVersion();
  if ((fileVersion != null) && !fileVersion.isApproved() && !version.equals(DLFileEntryConstants.DEFAULT_VERSION)) {
    int approvedArticlesCount=dlFileVersionPersistence.countByF_S(fileEntry.getFileEntryId(),WorkflowConstants.STATUS_APPROVED);
    if (approvedArticlesCount > 0) {
      addDraftAssetEntry=true;
    }
  }
  boolean visible=true;
  if ((fileVersion != null) && !fileVersion.isApproved()) {
    visible=false;
  }
  dlAppHelperLocalService.updateAsset(userId,new LiferayFileEntry(fileEntry),new LiferayFileVersion(fileVersion),assetCategoryIds,assetTagNames,mimeType,addDraftAssetEntry,visible);
}
