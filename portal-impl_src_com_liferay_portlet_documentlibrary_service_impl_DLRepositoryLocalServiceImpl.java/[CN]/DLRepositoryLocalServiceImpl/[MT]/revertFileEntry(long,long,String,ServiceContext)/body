{
  DLFileVersion fileVersion=dlRepositoryLocalService.getFileVersion(fileEntryId,version);
  if (fileVersion.getStatus() != WorkflowConstants.STATUS_APPROVED) {
    return;
  }
  String sourceFileName=fileVersion.getTitle();
  String title=fileVersion.getTitle();
  String description=fileVersion.getDescription();
  String changeLog=DLFileEntryConstants.REVERTED + " to " + version;
  boolean majorVersion=true;
  String extraSettings=fileVersion.getExtraSettings();
  InputStream is=getFileAsStream(userId,fileEntryId,version);
  long size=fileVersion.getSize();
  updateFileEntry(userId,fileEntryId,sourceFileName,title,description,changeLog,majorVersion,extraSettings,is,size,serviceContext);
}
