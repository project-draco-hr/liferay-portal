{
  if (Validator.isNull(fileEntry.getVersion())) {
    return DLFileEntryConstants.DEFAULT_VERSION;
  }
  try {
    DLFileVersion fileVersion=fileEntry.getLatestFileVersion();
    String version=fileVersion.getVersion();
    if (!fileVersion.isApproved() && version.equals(DLFileEntryConstants.DEFAULT_VERSION)) {
      return DLFileEntryConstants.DEFAULT_VERSION;
    }
  }
 catch (  NoSuchFileVersionException nsfve) {
  }
  if (workflowAction == WorkflowConstants.ACTION_SAVE_DRAFT) {
    majorVersion=false;
  }
  int[] versionParts=StringUtil.split(fileEntry.getVersion(),StringPool.PERIOD,0);
  if (majorVersion) {
    versionParts[0]++;
    versionParts[1]=0;
  }
 else {
    versionParts[1]++;
  }
  return versionParts[0] + StringPool.PERIOD + versionParts[1];
}
