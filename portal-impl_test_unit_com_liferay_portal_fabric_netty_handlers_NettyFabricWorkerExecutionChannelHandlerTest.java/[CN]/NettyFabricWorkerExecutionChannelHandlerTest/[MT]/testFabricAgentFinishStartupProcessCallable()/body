{
  FabricAgentFinishStartupProcessCallable fabricWorkerFinishStartupProcessCallable=new FabricAgentFinishStartupProcessCallable(0);
  try {
    fabricWorkerFinishStartupProcessCallable.call();
    Assert.fail();
  }
 catch (  ProcessException pe) {
    Assert.assertEquals("Unable to locate fabric agent on channel " + _embeddedChannel,pe.getMessage());
  }
  NettyFabricAgentStub nettyFabricAgentStub=installNettyFabricAgentStub();
  Map<Long,DefaultNoticeableFuture<?>> startupNoticeableFutures=ReflectionTestUtil.getFieldValue(nettyFabricAgentStub,"_startupNoticeableFutures");
  DefaultNoticeableFuture<?> defaultNoticeableFuture=new DefaultNoticeableFuture<>();
  startupNoticeableFutures.put(0L,defaultNoticeableFuture);
  Assert.assertFalse(defaultNoticeableFuture.isDone());
  Assert.assertNull(fabricWorkerFinishStartupProcessCallable.call());
  Assert.assertTrue(defaultNoticeableFuture.isDone());
}
