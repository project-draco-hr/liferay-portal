{
  NettyFabricWorkerExecutionChannelHandler nettyFabricWorkerExecutionChannelHandler=new NettyFabricWorkerExecutionChannelHandler(new MockRepository(),new LocalFabricAgent(new EmbeddedProcessExecutor()),Long.MAX_VALUE);
  ChannelPipeline channelPipeline=_embeddedChannel.pipeline();
  channelPipeline.addFirst(nettyFabricWorkerExecutionChannelHandler);
  _embeddedChannel.writeInbound(createNettyFabricWorkerConfig());
  FabricWorker<Serializable> fabricWorker=NettyChannelAttributes.getFabricWorker(_embeddedChannel,0);
  DefaultNoticeableFuture<?> defaultNoticeableFuture=(DefaultNoticeableFuture<?>)fabricWorker.getProcessNoticeableFuture();
  defaultNoticeableFuture.run();
  Assert.assertNull(NettyChannelAttributes.getFabricWorker(_embeddedChannel,0));
}
