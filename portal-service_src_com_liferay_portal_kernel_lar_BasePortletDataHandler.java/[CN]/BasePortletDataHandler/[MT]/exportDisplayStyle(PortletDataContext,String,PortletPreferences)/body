{
  String displayStyle=getDisplayStyle(portletDataContext,portletId,portletPreferences);
  if (Validator.isNull(displayStyle) || !displayStyle.startsWith(PortletDisplayTemplate.DISPLAY_STYLE_PREFIX)) {
    return;
  }
  long displayStyleGroupId=getDisplayStyleGroupId(portletDataContext,portletId,portletPreferences);
  long previousScopeGroupId=portletDataContext.getScopeGroupId();
  if (displayStyleGroupId != portletDataContext.getScopeGroupId()) {
    portletDataContext.setScopeGroupId(displayStyleGroupId);
  }
  DDMTemplate ddmTemplate=PortletDisplayTemplateUtil.fetchDDMTemplate(portletDataContext.getGroupId(),displayStyle);
  if (ddmTemplate != null) {
    StagedModelDataHandlerUtil.exportReferenceStagedModel(portletDataContext,portletId,ddmTemplate);
  }
  portletDataContext.setScopeGroupId(previousScopeGroupId);
}
