{
  List<PortletDataHandlerBoolean> configurationControls=new ArrayList<PortletDataHandlerBoolean>();
  if ((PortletPreferencesLocalServiceUtil.getPortletPreferencesCount(companyId,groupId,PortletKeys.PREFS_OWNER_ID_DEFAULT,PortletKeys.PREFS_OWNER_TYPE_LAYOUT,plid,portlet,privateLayout,true) > 0) || (PortletPreferencesLocalServiceUtil.getPortletPreferencesCount(groupId,PortletKeys.PREFS_OWNER_TYPE_GROUP,portlet.getRootPortletId(),true) > 0) || (PortletPreferencesLocalServiceUtil.getPortletPreferencesCount(companyId,PortletKeys.PREFS_OWNER_TYPE_COMPANY,portlet.getRootPortletId(),true) > 0)) {
    configurationControls.add(new PortletDataHandlerBoolean(null,PortletDataHandlerKeys.PORTLET_SETUP,"setup",true,false,null,null,null));
  }
  if (PortletPreferencesLocalServiceUtil.getPortletPreferencesCount(-1,PortletKeys.PREFS_OWNER_TYPE_ARCHIVED,portlet.getRootPortletId(),true) > 0) {
    configurationControls.add(new PortletDataHandlerBoolean(null,PortletDataHandlerKeys.PORTLET_ARCHIVED_SETUPS,"archived-setups",true,false,null,null,null));
  }
  if ((PortletPreferencesLocalServiceUtil.getPortletPreferencesCount(companyId,groupId,-1,PortletKeys.PREFS_OWNER_TYPE_USER,plid,portlet,privateLayout,true) > 0) || (PortletPreferencesLocalServiceUtil.getPortletPreferencesCount(companyId,groupId,groupId,PortletKeys.PREFS_OWNER_TYPE_USER,PortletKeys.PREFS_PLID_SHARED,portlet,privateLayout,true) > 0)) {
    configurationControls.add(new PortletDataHandlerBoolean(null,PortletDataHandlerKeys.PORTLET_USER_PREFERENCES,"user-preferences",true,false,null,null,null));
  }
  return configurationControls.toArray(new PortletDataHandlerBoolean[configurationControls.size()]);
}
