{
  WikiNode node=(WikiNode)req.getAttribute(WebKeys.WIKI_NODE);
  if (node == null) {
    ThemeDisplay themeDisplay=(ThemeDisplay)req.getAttribute(WebKeys.THEME_DISPLAY);
    List nodes=WikiNodeLocalServiceUtil.getNodes(themeDisplay.getLayout().getGroupId(),0,1);
    if (nodes.size() == 0) {
      String nodeName=PropsUtil.get(PropsUtil.WIKI_INITIAL_NODE_NAME);
      node=WikiNodeLocalServiceUtil.addNode(themeDisplay.getUserId(),themeDisplay.getPlid(),nodeName,StringPool.BLANK,true,true);
    }
 else {
      node=(WikiNode)nodes.get(0);
    }
    req.setAttribute(WebKeys.WIKI_NODE,node);
  }
}
