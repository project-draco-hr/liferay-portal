{
  try (PreparedStatement ps=getPortletPreferencesPreparedStatement(portletId,ownerType);ResultSet rs=ps.executeQuery()){
    while (rs.next()) {
      PortletPreferencesRow portletPreferencesRow=getPortletPreferencesRow(rs);
      javax.portlet.PortletPreferences jxPortletPreferences=PortletPreferencesFactoryUtil.fromDefaultXML(portletPreferencesRow.getPreferences());
      Enumeration<String> names=jxPortletPreferences.getNames();
      while (names.hasMoreElements()) {
        String name=names.nextElement();
        for (        String key : settingsDescriptor.getAllKeys()) {
          if (name.startsWith(key)) {
            jxPortletPreferences.reset(key);
            break;
          }
        }
      }
      portletPreferencesRow.setPreferences(PortletPreferencesFactoryUtil.toXML(jxPortletPreferences));
      updatePortletPreferences(portletPreferencesRow);
    }
  }
 }
