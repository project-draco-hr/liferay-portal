{
  Session session=null;
  try {
    if (journalStructure.isNew() || journalStructure.isModified()) {
      session=openSession();
      if (journalStructure.isNew()) {
        JournalStructureHBM journalStructureHBM=new JournalStructureHBM();
        journalStructureHBM.setCompanyId(journalStructure.getCompanyId());
        journalStructureHBM.setStructureId(journalStructure.getStructureId());
        journalStructureHBM.setGroupId(journalStructure.getGroupId());
        journalStructureHBM.setUserId(journalStructure.getUserId());
        journalStructureHBM.setUserName(journalStructure.getUserName());
        journalStructureHBM.setCreateDate(journalStructure.getCreateDate());
        journalStructureHBM.setModifiedDate(journalStructure.getModifiedDate());
        journalStructureHBM.setName(journalStructure.getName());
        journalStructureHBM.setDescription(journalStructure.getDescription());
        journalStructureHBM.setXsd(journalStructure.getXsd());
        session.save(journalStructureHBM);
        session.flush();
      }
 else {
        JournalStructureHBM journalStructureHBM=(JournalStructureHBM)session.get(JournalStructureHBM.class,journalStructure.getPrimaryKey());
        if (journalStructureHBM != null) {
          journalStructureHBM.setGroupId(journalStructure.getGroupId());
          journalStructureHBM.setUserId(journalStructure.getUserId());
          journalStructureHBM.setUserName(journalStructure.getUserName());
          journalStructureHBM.setCreateDate(journalStructure.getCreateDate());
          journalStructureHBM.setModifiedDate(journalStructure.getModifiedDate());
          journalStructureHBM.setName(journalStructure.getName());
          journalStructureHBM.setDescription(journalStructure.getDescription());
          journalStructureHBM.setXsd(journalStructure.getXsd());
          session.flush();
        }
 else {
          journalStructureHBM=new JournalStructureHBM();
          journalStructureHBM.setCompanyId(journalStructure.getCompanyId());
          journalStructureHBM.setStructureId(journalStructure.getStructureId());
          journalStructureHBM.setGroupId(journalStructure.getGroupId());
          journalStructureHBM.setUserId(journalStructure.getUserId());
          journalStructureHBM.setUserName(journalStructure.getUserName());
          journalStructureHBM.setCreateDate(journalStructure.getCreateDate());
          journalStructureHBM.setModifiedDate(journalStructure.getModifiedDate());
          journalStructureHBM.setName(journalStructure.getName());
          journalStructureHBM.setDescription(journalStructure.getDescription());
          journalStructureHBM.setXsd(journalStructure.getXsd());
          session.save(journalStructureHBM);
          session.flush();
        }
      }
      journalStructure.setNew(false);
      journalStructure.setModified(false);
    }
    return journalStructure;
  }
 catch (  HibernateException he) {
    throw new SystemException(he);
  }
 finally {
    closeSession(session);
  }
}
