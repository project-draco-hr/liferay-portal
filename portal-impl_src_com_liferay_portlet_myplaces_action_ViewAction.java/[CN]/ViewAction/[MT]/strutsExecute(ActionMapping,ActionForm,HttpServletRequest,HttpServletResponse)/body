{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  long groupId=ParamUtil.getLong(request,"groupId");
  boolean privateLayout=ParamUtil.getBoolean(request,"privateLayout");
  List<Layout> layouts=LayoutLocalServiceUtil.getLayouts(groupId,privateLayout,LayoutConstants.DEFAULT_PARENT_LAYOUT_ID,0,1);
  String redirect=themeDisplay.getPathMain();
  if (layouts.size() > 0) {
    Layout layout=layouts.get(0);
    redirect=PortalUtil.getLayoutURL(layout,themeDisplay);
  }
 else {
    redirect=ParamUtil.getString(request,"redirect");
    SessionErrors.add(request,NoSuchLayoutSetException.class.getName(),new NoSuchLayoutSetException("{groupId=" + groupId + ",privateLayout="+ privateLayout+ "}"));
  }
  response.sendRedirect(redirect);
  return null;
}
