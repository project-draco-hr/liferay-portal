{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  long groupId=ParamUtil.getLong(request,"groupId");
  String privateLayoutParam=request.getParameter("privateLayout");
  List<Layout> layouts=getLayouts(groupId,privateLayoutParam);
  if (layouts.size() == 0) {
    SessionErrors.add(request,NoSuchLayoutSetException.class.getName(),new NoSuchLayoutSetException("{groupId=" + groupId + ",privateLayout="+ privateLayoutParam+ "}"));
  }
  String redirect=getRedirect(themeDisplay,layouts,groupId,privateLayoutParam);
  if (Validator.isNull(redirect)) {
    redirect=ParamUtil.getString(request,"redirect");
  }
  response.sendRedirect(redirect);
  return null;
}
