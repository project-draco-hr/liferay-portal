{
  PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
  for (  Layout layout : layouts) {
    if (!layout.isHidden() && LayoutPermissionUtil.contains(permissionChecker,layout,ActionKeys.VIEW)) {
      String canonicalURL=PortalUtil.getCanonicalURL(null,themeDisplay,layout,true);
      return PortalUtil.addPreservedParameters(themeDisplay,layout,canonicalURL,true);
    }
  }
  String groupFriendlyURL=PortalUtil.getGroupFriendlyURL(LayoutSetLocalServiceUtil.getLayoutSet(groupId,GetterUtil.getBoolean(privateLayoutParam)),themeDisplay);
  return PortalUtil.addPreservedParameters(themeDisplay,groupFriendlyURL);
}
