{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long groupId=ParamUtil.getLong(actionRequest,"groupId");
  boolean privateLayout=ParamUtil.getBoolean(actionRequest,"privateLayout");
  List<Layout> layouts=LayoutLocalServiceUtil.getLayouts(groupId,privateLayout,LayoutConstants.DEFAULT_PARENT_LAYOUT_ID,0,1);
  String redirect=themeDisplay.getPathMain();
  if (layouts.size() > 0) {
    Layout layout=layouts.get(0);
    redirect=PortalUtil.getLayoutURL(layout,themeDisplay);
  }
 else {
    redirect=ParamUtil.getString(actionRequest,"redirect");
    SessionErrors.add(actionRequest,NoSuchLayoutSetException.class.getName(),new NoSuchLayoutSetException("{groupId=" + groupId + ",privateLayout="+ privateLayout+ "}"));
  }
  actionResponse.sendRedirect(redirect);
}
