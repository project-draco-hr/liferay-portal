{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  String mode=ParamUtil.getString(request,DDMConstants.MODE);
  String namespace=ParamUtil.getString(request,DDMConstants.NAMESPACE);
  String portletNamespace=ParamUtil.getString(request,DDMConstants.PORTLET_NAMESPACE);
  boolean readOnly=ParamUtil.getBoolean(request,DDMConstants.READ_ONLY);
  DDMFormFieldRenderingContext ddmFormFieldRenderingContext=new DDMFormFieldRenderingContext();
  request.setAttribute(DDMConstants.AUI_FORM_PORTLET_NAMESPACE,portletNamespace);
  ddmFormFieldRenderingContext.setHttpServletRequest(request);
  ddmFormFieldRenderingContext.setHttpServletResponse(response);
  ddmFormFieldRenderingContext.setLocale(themeDisplay.getLocale());
  ddmFormFieldRenderingContext.setMode(mode);
  ddmFormFieldRenderingContext.setNamespace(namespace);
  ddmFormFieldRenderingContext.setPortletNamespace(portletNamespace);
  ddmFormFieldRenderingContext.setReadOnly(readOnly);
  return ddmFormFieldRenderingContext;
}
