{
  Connection con=null;
  PreparedStatement ps=null;
  ResultSet rs=null;
  try {
    con=DataAccess.getConnection();
    StringBundler sb=new StringBundler(5);
    sb.append("select userId, userName, createDate, modifiedDate, ");
    sb.append("classNameId, classPK from MBMessage where ");
    sb.append("(companyId = " + companyId + ") and (classNameId != ");
    sb.append("0) and (parentMessageId != 0) group by userId, ");
    sb.append("classNameId, classPK");
    ps=con.prepareStatement(sb.toString());
    rs=ps.executeQuery();
    while (rs.next()) {
      long userId=rs.getLong("userId");
      String userName=rs.getString("userName");
      Date createDate=rs.getDate("createDate");
      Date modifiedDate=rs.getDate("modifiedDate");
      long classNameId=rs.getLong("classNameId");
      long classPK=rs.getLong("classPK");
      long subscriptionId=increment();
      String frequency="instant";
      addSubscription(subscriptionId,companyId,userId,userName,createDate,modifiedDate,classNameId,classPK,frequency);
    }
  }
  finally {
    DataAccess.cleanUp(con,ps,rs);
  }
}
