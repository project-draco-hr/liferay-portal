{
  Session session=null;
  try {
    if (mailReceipt.isNew() || mailReceipt.isModified()) {
      session=openSession();
      if (mailReceipt.isNew()) {
        MailReceiptHBM mailReceiptHBM=new MailReceiptHBM(mailReceipt.getReceiptId(),mailReceipt.getCompanyId(),mailReceipt.getUserId(),mailReceipt.getCreateDate(),mailReceipt.getModifiedDate(),mailReceipt.getRecipientName(),mailReceipt.getRecipientAddress(),mailReceipt.getSubject(),mailReceipt.getSentDate(),mailReceipt.getReadCount(),mailReceipt.getFirstReadDate(),mailReceipt.getLastReadDate());
        session.save(mailReceiptHBM);
        session.flush();
      }
 else {
        MailReceiptHBM mailReceiptHBM=(MailReceiptHBM)session.get(MailReceiptHBM.class,mailReceipt.getPrimaryKey());
        if (mailReceiptHBM != null) {
          mailReceiptHBM.setCompanyId(mailReceipt.getCompanyId());
          mailReceiptHBM.setUserId(mailReceipt.getUserId());
          mailReceiptHBM.setCreateDate(mailReceipt.getCreateDate());
          mailReceiptHBM.setModifiedDate(mailReceipt.getModifiedDate());
          mailReceiptHBM.setRecipientName(mailReceipt.getRecipientName());
          mailReceiptHBM.setRecipientAddress(mailReceipt.getRecipientAddress());
          mailReceiptHBM.setSubject(mailReceipt.getSubject());
          mailReceiptHBM.setSentDate(mailReceipt.getSentDate());
          mailReceiptHBM.setReadCount(mailReceipt.getReadCount());
          mailReceiptHBM.setFirstReadDate(mailReceipt.getFirstReadDate());
          mailReceiptHBM.setLastReadDate(mailReceipt.getLastReadDate());
          session.flush();
        }
 else {
          mailReceiptHBM=new MailReceiptHBM(mailReceipt.getReceiptId(),mailReceipt.getCompanyId(),mailReceipt.getUserId(),mailReceipt.getCreateDate(),mailReceipt.getModifiedDate(),mailReceipt.getRecipientName(),mailReceipt.getRecipientAddress(),mailReceipt.getSubject(),mailReceipt.getSentDate(),mailReceipt.getReadCount(),mailReceipt.getFirstReadDate(),mailReceipt.getLastReadDate());
          session.save(mailReceiptHBM);
          session.flush();
        }
      }
      mailReceipt.setNew(false);
      mailReceipt.setModified(false);
      mailReceipt.protect();
      MailReceiptPool.update(mailReceipt.getPrimaryKey(),mailReceipt);
    }
    return mailReceipt;
  }
 catch (  HibernateException he) {
    throw new SystemException(he);
  }
 finally {
    closeSession(session);
  }
}
