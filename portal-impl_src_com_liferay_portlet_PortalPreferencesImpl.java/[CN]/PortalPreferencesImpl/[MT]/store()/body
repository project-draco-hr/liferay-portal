{
  try {
    if (_portalPreferences == null) {
      _portalPreferences=PortalPreferencesLocalServiceUtil.updatePreferences(getOwnerId(),getOwnerType(),this);
    }
 else {
      PortalPreferencesWrapperCacheUtil.remove(getOwnerId(),getOwnerType());
      _portalPreferences.setPreferences(toXML());
      PortalPreferencesLocalServiceUtil.updatePortalPreferences(_portalPreferences);
      _portalPreferences=_reload(getOwnerId(),getOwnerType());
    }
  }
 catch (  Throwable t) {
    throw new IOException(t);
  }
}
