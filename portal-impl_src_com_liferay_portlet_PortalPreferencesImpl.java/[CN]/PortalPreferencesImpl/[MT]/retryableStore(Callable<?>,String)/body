{
  String[] originalValues=super.getValues(key,null);
  while (true) {
    try {
      callable.call();
      store();
      return;
    }
 catch (    Exception e) {
      if (isCausedByStaleObjectException(e)) {
        long ownerId=getOwnerId();
        int ownerType=getOwnerType();
        com.liferay.portal.model.PortalPreferences portalPreferences=reload(ownerId,ownerType);
        if (portalPreferences == null) {
          continue;
        }
        PortalPreferencesImpl portalPreferencesImpl=new PortalPreferencesImpl(portalPreferences,isSignedIn());
        if (!Arrays.equals(originalValues,portalPreferencesImpl.getValues(key,(String[])null))) {
          throw new ConcurrentModificationException();
        }
        reset();
        setOriginalPreferences(portalPreferencesImpl.getOriginalPreferences());
        setOriginalXML(portalPreferences.getPreferences());
        setPortalPreferences(portalPreferences);
      }
 else {
        throw e;
      }
    }
  }
}
