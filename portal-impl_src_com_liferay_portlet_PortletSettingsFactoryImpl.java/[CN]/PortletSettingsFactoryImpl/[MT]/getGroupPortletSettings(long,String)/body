{
  Group group=GroupLocalServiceUtil.getGroup(groupId);
  PortletPreferences groupPortletPreferences=PortletPreferencesLocalServiceUtil.getPreferences(group.getCompanyId(),groupId,PortletKeys.PREFS_OWNER_TYPE_GROUP,0,portletId);
  GroupPortletSettings groupPortletSettings=new GroupPortletSettings(groupPortletPreferences);
  PortletPreferences companyPortletPreferences=PortletPreferencesLocalServiceUtil.getPreferences(group.getCompanyId(),group.getCompanyId(),PortletKeys.PREFS_OWNER_TYPE_GROUP_DEFAULTS_COMPANY,0,portletId);
  groupPortletSettings.setCompanyPortletPreferences(companyPortletPreferences);
  groupPortletSettings.setPortalProperties(getProperties(portletId));
  return groupPortletSettings;
}
