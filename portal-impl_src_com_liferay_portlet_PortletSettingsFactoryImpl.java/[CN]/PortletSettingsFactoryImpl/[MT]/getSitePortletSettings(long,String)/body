{
  Group group=GroupLocalServiceUtil.getGroup(groupId);
  PortletPreferences sitePortletPreferences=PortletPreferencesLocalServiceUtil.getPreferences(group.getCompanyId(),groupId,PortletKeys.PREFS_OWNER_TYPE_GROUP,0,portletId);
  SitePortletSettings sitePortletSettings=new SitePortletSettings(sitePortletPreferences);
  PortletPreferences companyPortletPreferences=PortletPreferencesLocalServiceUtil.getPreferences(group.getCompanyId(),group.getCompanyId(),PortletKeys.PREFS_OWNER_TYPE_GROUP_DEFAULTS_COMPANY,0,portletId);
  sitePortletSettings.setCompanyDefaults(companyPortletPreferences);
  Properties portalProperties=PropsUtil.getProperties(portletId,false);
  sitePortletSettings.setPortalDefaults(portalProperties);
  return sitePortletSettings;
}
