{
  LastPath lastPath=(LastPath)request.getAttribute(WebKeys.LAST_PATH);
  if (lastPath != null) {
    StringBundler sb=new StringBundler(3);
    sb.append(PortalUtil.getPortalURL(request));
    sb.append(lastPath.getContextPath());
    sb.append(lastPath.getPath());
    return sb.toString();
  }
  return String.valueOf(request.getRequestURI());
}
