{
  if (startPortlets == null) {
    startPortlets=new ArrayList();
  }
  if (endPortlets == null) {
    endPortlets=new ArrayList();
  }
  if ((startPortlets.isEmpty()) && (endPortlets.isEmpty())) {
    return portlets;
  }
  List list=new ArrayList(portlets.size() + startPortlets.size() + endPortlets.size());
  if (startPortlets != null) {
    list.addAll(startPortlets);
  }
  for (int i=0; i < portlets.size(); i++) {
    Portlet portlet=(Portlet)portlets.get(i);
    String portletId=portlet.getPortletId();
    if (!startPortlets.contains(portlet) && !endPortlets.contains(portlet)) {
      list.add(portlet);
    }
  }
  if (endPortlets != null) {
    list.addAll(endPortlets);
  }
  return list;
}
