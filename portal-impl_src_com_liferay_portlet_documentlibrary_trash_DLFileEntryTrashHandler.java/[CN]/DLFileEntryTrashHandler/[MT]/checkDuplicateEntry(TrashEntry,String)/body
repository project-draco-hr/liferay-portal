{
  DLFileEntry duplicatedFileEntry=null;
  try {
    DLFileEntry dlFileEntry=getDLFileEntry(entry.getClassPK());
    String restoredTitle=dlFileEntry.getTitle();
    if (Validator.isNotNull(newName)) {
      restoredTitle=newName;
    }
    String originalTitle=restoredTitle;
    if (restoredTitle.indexOf(StringPool.FORWARD_SLASH) > 0) {
      originalTitle=restoredTitle.substring(0,restoredTitle.indexOf(StringPool.FORWARD_SLASH));
    }
    duplicatedFileEntry=DLFileEntryLocalServiceUtil.fetchFileEntry(dlFileEntry.getGroupId(),dlFileEntry.getFolderId(),originalTitle);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  if (duplicatedFileEntry != null) {
    DuplicateTrashEntryException dtee=new DuplicateTrashEntryException();
    dtee.setDuplicateEntryId(duplicatedFileEntry.getFileEntryId());
    dtee.setOldName(duplicatedFileEntry.getTitle());
    dtee.setTrashEntryId(entry.getEntryId());
    throw dtee;
  }
}
