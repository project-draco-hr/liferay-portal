{
  DLFileEntry dlFileEntry=getDLFileEntry(classPK);
  if (containerModelId == TrashEntryConstants.DEFAULT_CONTAINER_ID) {
    containerModelId=dlFileEntry.getFolderId();
  }
  if (Validator.isNotNull(newName)) {
    originalFileName=DLAppUtil.getSanitizedFileName(newName,dlFileEntry.getExtension());
    originalTitle=newName;
  }
  DLFileEntry duplicateDLFileEntry=DLFileEntryLocalServiceUtil.fetchFileEntry(dlFileEntry.getGroupId(),containerModelId,originalTitle);
  if (duplicateDLFileEntry == null) {
    duplicateDLFileEntry=DLFileEntryLocalServiceUtil.fetchFileEntryByFileName(dlFileEntry.getGroupId(),containerModelId,originalFileName);
  }
  if (duplicateDLFileEntry != null) {
    RestoreEntryException ree=new RestoreEntryException(RestoreEntryException.DUPLICATE);
    ree.setDuplicateEntryId(duplicateDLFileEntry.getFileEntryId());
    ree.setOldName(duplicateDLFileEntry.getTitle());
    ree.setTrashEntryId(entryId);
    throw ree;
  }
}
