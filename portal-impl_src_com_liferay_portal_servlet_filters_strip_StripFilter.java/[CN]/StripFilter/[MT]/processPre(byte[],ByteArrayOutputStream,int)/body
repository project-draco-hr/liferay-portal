{
  int beginIndex=currentIndex + _MARKER_PRE_OPEN.length + 1;
  int closeTagIndex=KMPSearch.search(oldByteArray,beginIndex,_MARKER_PRE_CLOSE,_MARKER_PRE_CLOSE_NEXTS);
  if (closeTagIndex == -1) {
    _log.error("Missing </pre>");
    return currentIndex + 1;
  }
  newBytes.write("<pre>".getBytes());
  newBytes.write(oldByteArray,beginIndex,closeTagIndex - beginIndex);
  newBytes.write(_MARKER_PRE_CLOSE);
  int newBeginIndex=closeTagIndex + _MARKER_PRE_CLOSE.length;
  newBeginIndex+=countContinuousWhiteSpace(oldByteArray,newBeginIndex);
  return newBeginIndex;
}
