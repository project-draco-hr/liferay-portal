{
  super.setAttributes(request);
  Map<String,Object> contextObjects=getContextObjects();
  if (contextObjects == null) {
    setNamespacedAttribute(request,"contextObjects",new HashMap<String,Object>());
  }
  long displaStyleGroupId=getDisplayStyleGroupId();
  if (displaStyleGroupId == 0) {
    ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
    displaStyleGroupId=themeDisplay.getScopeGroupId();
    setNamespacedAttribute(request,"displayStyleGroupId",displaStyleGroupId);
  }
  _portletDisplayDDMTemplate=getPortletDisplayTemplate().getPortletDisplayTemplateDDMTemplate(displaStyleGroupId,PortalUtil.getClassNameId(getClassName()),getDisplayStyle(),true);
  setNamespacedAttribute(request,"portletDisplayDDMTemplate",_portletDisplayDDMTemplate);
}
