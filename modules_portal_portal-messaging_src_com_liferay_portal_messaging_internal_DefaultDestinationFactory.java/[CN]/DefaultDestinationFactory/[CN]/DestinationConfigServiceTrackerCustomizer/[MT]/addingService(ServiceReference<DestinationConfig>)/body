{
  DestinationConfig destinationConfig=_bundleContext.getService(serviceReference);
  try {
synchronized (_destinationServiceRegistrations) {
      unregister(destinationConfig);
      Destination destination=createDestination(destinationConfig);
      Dictionary<String,Object> dictionary=new HashMapDictionary<>();
      dictionary.put("destination.name",destination.getName());
      ServiceRegistration<Destination> serviceRegistration=_bundleContext.registerService(Destination.class,destination,dictionary);
      _destinationServiceRegistrations.put(destination.getName(),serviceRegistration);
    }
  }
 catch (  Exception e) {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to instantiate destination: " + destinationConfig,e);
    }
  }
  return destinationConfig;
}
