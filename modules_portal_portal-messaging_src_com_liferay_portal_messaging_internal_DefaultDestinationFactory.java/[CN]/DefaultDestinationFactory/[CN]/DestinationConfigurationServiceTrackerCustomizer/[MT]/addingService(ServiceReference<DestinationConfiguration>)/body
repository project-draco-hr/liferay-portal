{
  DestinationConfiguration destinationConfiguration=_bundleContext.getService(serviceReference);
  try {
synchronized (_serviceRegistrations) {
      unregister(destinationConfiguration);
      Destination destination=createDestination(destinationConfiguration);
      Dictionary<String,Object> dictionary=new HashMapDictionary<>();
      dictionary.put("destination.name",destination.getName());
      ServiceRegistration<Destination> serviceRegistration=_bundleContext.registerService(Destination.class,destination,dictionary);
      _serviceRegistrations.put(destination.getName(),serviceRegistration);
    }
  }
 catch (  Exception e) {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to instantiate destination " + destinationConfiguration,e);
    }
  }
  return destinationConfiguration;
}
