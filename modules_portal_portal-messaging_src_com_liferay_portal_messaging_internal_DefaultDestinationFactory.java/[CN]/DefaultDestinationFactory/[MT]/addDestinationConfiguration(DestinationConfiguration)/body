{
synchronized (_serviceRegistrations) {
    if (_bundleContext == null) {
      _queuedDestinationConfigurations.add(destinationConfiguration);
      return;
    }
    Destination destination=createDestination(destinationConfiguration);
    Dictionary<String,Object> dictionary=new HashMapDictionary<>();
    dictionary.put("destination.name",destination.getName());
    ServiceRegistration<Destination> serviceRegistration=_bundleContext.registerService(Destination.class,destination,dictionary);
    _serviceRegistrations.put(destination.getName(),serviceRegistration);
  }
}
