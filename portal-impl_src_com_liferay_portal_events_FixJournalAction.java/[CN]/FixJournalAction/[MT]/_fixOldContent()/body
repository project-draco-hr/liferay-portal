{
  List articles=JournalArticleLocalServiceUtil.getArticles();
  for (int i=0; i < articles.size(); i++) {
    JournalArticle article=(JournalArticle)articles.get(i);
    String structureId=article.getStructureId();
    if (Validator.isNotNull(structureId)) {
      long groupId=article.getGroupId();
      String articleId=article.getArticleId();
      double version=article.getVersion();
      String content=article.getContent();
      JournalStructure structure=JournalStructureLocalServiceUtil.getStructure(groupId,structureId);
      content=JournalUtil.removeOldContent(content,structure.getXsd());
      JournalArticleLocalServiceUtil.updateContent(groupId,articleId,version,content);
    }
  }
}
