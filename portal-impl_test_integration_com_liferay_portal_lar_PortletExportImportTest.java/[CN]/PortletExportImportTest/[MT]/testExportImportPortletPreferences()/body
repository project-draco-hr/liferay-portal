{
  JournalArticle journalArticle=JournalArticleLocalServiceUtil.getArticleByUrlTitle(_group.getGroupId(),_layoutSetPrototypeJournalArticle.getUrlTitle());
  Layout layout=LayoutLocalServiceUtil.getFriendlyURLLayout(_group.getGroupId(),false,_layoutSetPrototypeLayout.getFriendlyURL());
  javax.portlet.PortletPreferences jxPreferences=getPortletPreferences(layout.getCompanyId(),layout.getPlid(),_layoutSetPrototypeJournalContentPortletId);
  Assert.assertEquals(journalArticle.getArticleId(),jxPreferences.getValue("articleId",StringPool.BLANK));
  Assert.assertEquals(String.valueOf(journalArticle.getGroupId()),jxPreferences.getValue("groupId",StringPool.BLANK));
  Assert.assertEquals(String.valueOf(true),jxPreferences.getValue("showAvailableLocales",StringPool.BLANK));
  javax.portlet.PortletPreferences layoutSetprototypeJxPreferences=getPortletPreferences(_layoutSetPrototypeLayout.getCompanyId(),_layoutSetPrototypeLayout.getPlid(),_layoutSetPrototypeJournalContentPortletId);
  layoutSetprototypeJxPreferences.setValue("showAvailableLocales",String.valueOf(false));
  updatePortletPreferences(_layoutSetPrototypeLayout.getPlid(),_layoutSetPrototypeJournalContentPortletId,layoutSetprototypeJxPreferences);
  SitesUtil.resetPrototype(layout);
  jxPreferences=getPortletPreferences(_group.getCompanyId(),layout.getPlid(),_layoutSetPrototypeJournalContentPortletId);
  Assert.assertEquals(journalArticle.getArticleId(),jxPreferences.getValue("articleId",StringPool.BLANK));
  Assert.assertEquals(String.valueOf(journalArticle.getGroupId()),jxPreferences.getValue("groupId",StringPool.BLANK));
  Assert.assertEquals(Boolean.FALSE.toString(),jxPreferences.getValue("showAvailableLocales",StringPool.BLANK));
  Company company=CompanyUtil.fetchByPrimaryKey(_layoutSetPrototypeLayout.getCompanyId());
  Group companyGroup=company.getGroup();
  JournalArticle globalScopeArticle=addJournalArticle(companyGroup.getGroupId(),0,"Global article","Global content");
  layoutSetprototypeJxPreferences.setValue("articleId",globalScopeArticle.getArticleId());
  layoutSetprototypeJxPreferences.setValue("groupId",Long.toString(companyGroup.getGroupId()));
  layoutSetprototypeJxPreferences.setValue("lfrScopeLayoutUuid",StringPool.BLANK);
  layoutSetprototypeJxPreferences.setValue("lfrScopeType","company");
  updatePortletPreferences(_layoutSetPrototypeLayout.getPlid(),_layoutSetPrototypeJournalContentPortletId,layoutSetprototypeJxPreferences);
  jxPreferences=getPortletPreferences(_group.getCompanyId(),layout.getPlid(),_layoutSetPrototypeJournalContentPortletId);
  Assert.assertEquals(globalScopeArticle.getArticleId(),jxPreferences.getValue("articleId",StringPool.BLANK));
  Assert.assertEquals(String.valueOf(companyGroup.getGroupId()),jxPreferences.getValue("groupId",StringPool.BLANK));
  Assert.assertEquals(StringPool.BLANK,jxPreferences.getValue("lfrScopeLayoutUuid",StringPool.BLANK));
  Assert.assertEquals("company",jxPreferences.getValue("lfrScopeType",StringPool.BLANK));
}
