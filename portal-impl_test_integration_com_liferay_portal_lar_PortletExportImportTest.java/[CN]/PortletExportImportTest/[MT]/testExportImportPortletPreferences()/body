{
  JournalArticle article=JournalArticleLocalServiceUtil.getArticleByUrlTitle(_group.getGroupId(),_lspArticle.getUrlTitle());
  Layout layout=LayoutLocalServiceUtil.getFriendlyURLLayout(_group.getGroupId(),false,_lspLayout.getFriendlyURL());
  javax.portlet.PortletPreferences portletPreferences=getPortletPreferences(layout.getCompanyId(),layout.getPlid(),_lspJournalContentPortletId);
  Assert.assertEquals(article.getArticleId(),portletPreferences.getValue("articleId",StringPool.BLANK));
  Assert.assertEquals(String.valueOf(article.getGroupId()),portletPreferences.getValue("groupId",StringPool.BLANK));
  Assert.assertEquals(String.valueOf(true),portletPreferences.getValue("showAvailableLocales",StringPool.BLANK));
  javax.portlet.PortletPreferences prefs=getPortletPreferences(_lspLayout.getCompanyId(),_lspLayout.getPlid(),_lspJournalContentPortletId);
  prefs.setValue("showAvailableLocales",String.valueOf(false));
  updatePortletPreferences(_lspLayout.getPlid(),_lspJournalContentPortletId,prefs);
  SitesUtil.resetPrototype(layout);
  portletPreferences=getPortletPreferences(_group.getCompanyId(),layout.getPlid(),_lspJournalContentPortletId);
  Assert.assertEquals(article.getArticleId(),portletPreferences.getValue("articleId",StringPool.BLANK));
  Assert.assertEquals(String.valueOf(article.getGroupId()),portletPreferences.getValue("groupId",StringPool.BLANK));
  Assert.assertEquals(String.valueOf(false),portletPreferences.getValue("showAvailableLocales",StringPool.BLANK));
}
