{
  String primKey=(String)oldValue;
  int scope=_codeIdColumn.getScope();
  if (scope == ResourceImpl.SCOPE_COMPANY) {
    return primKey;
  }
 else   if (scope == ResourceImpl.SCOPE_GROUP) {
    return String.valueOf(_groupIdMapper.getNewValue(new Long(GetterUtil.getLong(primKey))));
  }
 else   if (scope == ResourceImpl.SCOPE_INDIVIDUAL) {
    String name=(String)_nameColumn.getTemp();
    if (name.startsWith("com.liferay.")) {
      Long classNameIdObj=new Long(PortalUtil.getClassNameId(name));
      ClassPKContainer classPKContainer=(ClassPKContainer)_classPKContainers.get(classNameIdObj);
      if (classPKContainer != null) {
        ValueMapper valueMapper=classPKContainer.getValueMapper();
        if (classPKContainer.isLong()) {
          primKey=String.valueOf(valueMapper.getNewValue(new Long(GetterUtil.getLong((String)oldValue))));
        }
 else {
          primKey=String.valueOf(valueMapper.getNewValue(oldValue));
        }
      }
 else {
        _log.error("Name " + name + " is invalid");
      }
    }
    return primKey;
  }
 else {
    throw new UpgradeException("Scope " + scope + " is invalid");
  }
}
