{
  initExport();
  Map<String,List<StagedModel>> dependentStagedModelsMap=new HashMap<String,List<StagedModel>>();
  Layout linkedLayout=LayoutTestUtil.addLayout(stagingGroup.getGroupId(),ServiceTestUtil.randomString());
  addDependentStagedModel(dependentStagedModelsMap,Layout.class,linkedLayout);
  addDependentLayoutFriendlyURLs(dependentStagedModelsMap,linkedLayout);
  Layout layout=LayoutTestUtil.addLayoutTypeLinkedToLayout(stagingGroup.getGroupId(),ServiceTestUtil.randomString(),linkedLayout.getLayoutId());
  addDependentLayoutFriendlyURLs(dependentStagedModelsMap,layout);
  StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,layout);
  validateExport(portletDataContext,layout,dependentStagedModelsMap);
  initImport();
  Layout exportedLayout=(Layout)readExportedStagedModel(layout);
  StagedModelDataHandlerUtil.importStagedModel(portletDataContext,exportedLayout);
  LayoutLocalServiceUtil.getLayoutByUuidAndGroupId(linkedLayout.getUuid(),liveGroup.getGroupId(),false);
  LayoutLocalServiceUtil.getLayoutByUuidAndGroupId(layout.getUuid(),liveGroup.getGroupId(),false);
}
