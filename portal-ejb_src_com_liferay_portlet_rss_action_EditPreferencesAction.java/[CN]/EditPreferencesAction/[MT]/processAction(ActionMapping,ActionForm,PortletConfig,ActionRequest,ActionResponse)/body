{
  String cmd=ParamUtil.getString(req,Constants.CMD);
  if (!cmd.equals(Constants.UPDATE)) {
    return;
  }
  PortletPreferences prefs=req.getPreferences();
  String[] urls=req.getParameterValues("url");
  String[] titles=req.getParameterValues("title");
  int entriesPerFeed=ParamUtil.getInteger(req,"entriesPerFeed",4);
  if (urls != null && titles != null) {
    prefs.setValues("urls",urls);
    prefs.setValues("titles",titles);
  }
 else {
    prefs.setValues("urls",new String[0]);
    prefs.setValues("titles",new String[0]);
  }
  prefs.setValue("items-per-channel",String.valueOf(entriesPerFeed));
  try {
    prefs.store();
  }
 catch (  ValidatorException ve) {
    SessionErrors.add(req,ValidatorException.class.getName(),ve);
    return;
  }
  SessionMessages.add(req,config.getPortletName() + ".doEdit");
}
