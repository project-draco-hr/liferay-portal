{
  Stack<String> companyServiceStack=_getCompanyServiceStack();
  if (companyServiceStack.isEmpty()) {
    long companyId=CompanyThreadLocal.getCompanyId();
    return _setShardNameByCompanyId(companyId);
  }
 else {
    String shardName=companyServiceStack.peek();
    _setShardName(shardName);
    return shardName;
  }
}
