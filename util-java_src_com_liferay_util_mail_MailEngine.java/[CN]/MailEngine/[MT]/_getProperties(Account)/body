{
  Properties properties=new Properties();
  String protocol=account.getProtocol();
  if (account.isRequiresAuthentication()) {
    properties.put("mail." + protocol + ".auth","true");
  }
  properties.put("mail." + protocol + ".host",account.getHost());
  properties.put("mail." + protocol + ".port",account.getPort());
  properties.put("mail." + protocol + ".user",account.getUser());
  properties.put("mail." + protocol + ".password",account.getPassword());
  properties.put("mail." + protocol + ".socketFactory.class","javax.net.ssl.SSLSocketFactory");
  properties.put("mail." + protocol + ".socketFactory.fallback","false");
  properties.put("mail." + protocol + ".socketFactory.port",account.getPort());
  return properties;
}
