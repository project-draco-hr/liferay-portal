{
  if ((add == null) || (delimiter == null)) {
    return null;
  }
  if (s == null) {
    s=StringPool.BLANK;
  }
  if (allowDuplicates || !contains(s,add,delimiter)) {
    if (Validator.isNull(s) || s.endsWith(delimiter)) {
      s+=add + delimiter;
    }
 else {
      s+=delimiter + add + delimiter;
    }
  }
  return s;
}
