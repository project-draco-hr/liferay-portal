{
  Properties oldProps=new Properties();
  if (props.size() < 1) {
    return oldProps;
  }
  _messagesWriteLock.lock();
  try {
    Enumeration<Object> names=props.keys();
    while (names.hasMoreElements()) {
      String key=(String)names.nextElement();
      String message=getMessage(LocaleUtil.fromLanguageId(localeKey),key);
      if (message != null) {
        oldProps.put(key,message);
      }
      messages.put(messageKey(localeKey,key),props.getProperty(key));
    }
  }
  finally {
    _messagesWriteLock.unlock();
  }
  return oldProps;
}
