{
  Properties oldProperties=new Properties();
  if (properties.size() < 1) {
    return oldProperties;
  }
  _messagesWriteLock.lock();
  try {
    Enumeration<Object> names=properties.keys();
    while (names.hasMoreElements()) {
      String key=(String)names.nextElement();
      String message=getMessage(LocaleUtil.fromLanguageId(localeKey),key);
      if (message != null) {
        oldProperties.put(key,message);
      }
      messages.put(messageKey(localeKey,key),properties.getProperty(key));
    }
  }
  finally {
    _messagesWriteLock.unlock();
  }
  return oldProperties;
}
