{
  PKUpgradeColumnImpl pkUpgradeColumn=new PKUpgradeColumnImpl(0,true);
  UpgradeTable upgradeTable=new DefaultUpgradeTableImpl(MBCategoryImpl.TABLE_NAME,MBCategoryImpl.TABLE_COLUMNS,pkUpgradeColumn);
  upgradeTable.updateTable();
  ValueMapper categoryIdMapper=new DefaultPKMapper(pkUpgradeColumn.getValueMapper());
  UpgradeColumn upgradeParentCategoryIdColumn=new SwapUpgradeColumnImpl("parentCategoryId",categoryIdMapper);
  upgradeTable=new DefaultUpgradeTableImpl(MBCategoryImpl.TABLE_NAME,MBCategoryImpl.TABLE_COLUMNS,upgradeParentCategoryIdColumn);
  upgradeTable.updateTable();
  UpgradeColumn upgradeCategoryIdColumn=new SwapUpgradeColumnImpl("categoryId",categoryIdMapper);
  pkUpgradeColumn=new PKUpgradeColumnImpl(0,true);
  upgradeTable=new DefaultUpgradeTableImpl(MBMessageImpl.TABLE_NAME,MBMessageImpl.TABLE_COLUMNS,pkUpgradeColumn,upgradeCategoryIdColumn);
  upgradeTable.updateTable();
  ValueMapper messageIdMapper=pkUpgradeColumn.getValueMapper();
  UpgradeColumn upgradeParentMessageIdColumn=new SwapUpgradeColumnImpl("parentMessageId",messageIdMapper);
  upgradeTable=new DefaultUpgradeTableImpl(MBMessageImpl.TABLE_NAME,MBMessageImpl.TABLE_COLUMNS,upgradeParentMessageIdColumn);
  upgradeTable.updateTable();
  UpgradeColumn upgradeMessageIdColumn=new SwapUpgradeColumnImpl("messageId",messageIdMapper);
  UpgradeColumn upgradeRootMessageIdColumn=new SwapUpgradeColumnImpl("rootMessageId",messageIdMapper);
  pkUpgradeColumn=new PKUpgradeColumnImpl(0,true);
  upgradeTable=new DefaultUpgradeTableImpl(MBMessageFlagImpl.TABLE_NAME,MBMessageFlagImpl.TABLE_COLUMNS,pkUpgradeColumn,upgradeMessageIdColumn);
  upgradeTable.updateTable();
  pkUpgradeColumn=new PKUpgradeColumnImpl(0,true);
  upgradeTable=new DefaultUpgradeTableImpl(MBThreadImpl.TABLE_NAME,MBThreadImpl.TABLE_COLUMNS,pkUpgradeColumn,upgradeCategoryIdColumn,upgradeRootMessageIdColumn);
  upgradeTable.updateTable();
  ValueMapper threadIdMapper=pkUpgradeColumn.getValueMapper();
  UpgradeColumn upgradeThreadIdColumn=new SwapUpgradeColumnImpl("threadId",threadIdMapper);
  upgradeTable=new DefaultUpgradeTableImpl(MBMessageImpl.TABLE_NAME,MBMessageImpl.TABLE_COLUMNS,upgradeThreadIdColumn);
  upgradeTable.updateTable();
  upgradeTable=new DefaultUpgradeTableImpl(MBDiscussionImpl.TABLE_NAME,MBDiscussionImpl.TABLE_COLUMNS,new PKUpgradeColumnImpl(),upgradeThreadIdColumn);
  upgradeTable.updateTable();
  CounterLocalServiceUtil.reset(MBCategory.class.getName());
  CounterLocalServiceUtil.reset(MBMessage.class.getName());
  CounterLocalServiceUtil.reset(MBThread.class.getName());
  CounterLocalServiceUtil.reset("com.liferay.portlet.messageboards.model.MBTopic");
  DBUtil.getInstance().executeSQL(_UPGRADE_SCHEMA);
}
