{
  List<KBArticle> kbArticles=getKBArticles(groupId,new long[]{resourcePrimKey},status,null);
  kbArticles=ListUtil.copy(kbArticles);
  Long[][] params=new Long[][]{new Long[]{resourcePrimKey}};
  while ((params=KnowledgeBaseUtil.getParams(params[0])) != null) {
    List<KBArticle> curKBArticles=null;
    if (status == WorkflowConstants.STATUS_ANY) {
      curKBArticles=kbArticlePersistence.filterFindByG_P_L(groupId,ArrayUtil.toArray(params[1]),true);
    }
 else     if (status == WorkflowConstants.STATUS_APPROVED) {
      curKBArticles=kbArticlePersistence.filterFindByG_P_M(groupId,ArrayUtil.toArray(params[1]),true);
    }
 else {
      curKBArticles=kbArticlePersistence.filterFindByG_P_S(groupId,ArrayUtil.toArray(params[1]),status);
    }
    kbArticles.addAll(curKBArticles);
    long[] resourcePrimKeys=StringUtil.split(ListUtil.toString(curKBArticles,"resourcePrimKey"),0L);
    params[0]=ArrayUtil.append(params[0],ArrayUtil.toArray(resourcePrimKeys));
  }
  if (orderByComparator != null) {
    kbArticles=ListUtil.sort(kbArticles,orderByComparator);
  }
  return Collections.unmodifiableList(kbArticles);
}
