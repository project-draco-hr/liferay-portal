{
  List<KBArticle> kbArticles=new ArrayList<>();
  Long[][] params=new Long[][]{ArrayUtil.toArray(resourcePrimKeys)};
  while ((params=KnowledgeBaseUtil.getParams(params[0])) != null) {
    List<KBArticle> curKBArticles=null;
    if (status == WorkflowConstants.STATUS_ANY) {
      curKBArticles=kbArticlePersistence.filterFindByR_G_L(ArrayUtil.toArray(params[1]),groupId,true,start,end);
    }
 else     if (status == WorkflowConstants.STATUS_APPROVED) {
      curKBArticles=kbArticlePersistence.filterFindByR_G_M(ArrayUtil.toArray(params[1]),groupId,true,start,end);
    }
 else {
      curKBArticles=kbArticlePersistence.filterFindByR_G_S(ArrayUtil.toArray(params[1]),groupId,status,start,end);
    }
    kbArticles.addAll(curKBArticles);
  }
  if (orderByComparator != null) {
    kbArticles=ListUtil.sort(kbArticles,orderByComparator);
  }
 else {
    kbArticles=KnowledgeBaseUtil.sort(resourcePrimKeys,kbArticles);
  }
  return Collections.unmodifiableList(kbArticles);
}
