{
  if (reader == null) {
    throw new IOException("Reader is null");
  }
  if (skip <= 0) {
    return 0;
  }
  long available=firstInvalidIndex - index;
  if (available > 0) {
    if (available < skip) {
      skip=available;
    }
  }
 else {
    if (markIndex < 0) {
      skip=reader.skip(skip);
    }
 else {
      readUnderlyingReader();
      available=firstInvalidIndex - index;
      if (available > 0) {
        if (available < skip) {
          skip=available;
        }
      }
    }
  }
  index+=skip;
  return skip;
}
