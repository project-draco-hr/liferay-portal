{
  PortletRequest portletRequest=(PortletRequest)request.getAttribute(JavaConstants.JAVAX_PORTLET_REQUEST);
  if (portletRequest == null) {
    return null;
  }
  String portletName=null;
  if (PropsValues.PORTLET_CONTAINER_IMPL_SUN && _isWARFile(portletRequest)) {
    portletName=(String)portletRequest.getAttribute(_PORTLET_CONTAINER_WINDOW_NAME);
  }
 else {
    PortletConfigImpl portletConfig=(PortletConfigImpl)request.getAttribute(JavaConstants.JAVAX_PORTLET_CONFIG);
    portletName=portletConfig.getPortletId();
  }
  return portletName;
}
