{
  byte[] data=new byte[TEST_ELEMENT_COUNT];
  _random.nextBytes(data);
  Deserializer deserializer=new Deserializer(ByteBuffer.wrap(data));
  Deserializer.BufferInputStream bufferInputStream=deserializer.new BufferInputStream();
  for (int i=0; i < TEST_ELEMENT_COUNT; i++) {
    Assert.assertEquals(data[i],bufferInputStream.read());
  }
  deserializer=new Deserializer(ByteBuffer.wrap(data));
  bufferInputStream=deserializer.new BufferInputStream();
  int size1=TEST_ELEMENT_COUNT * 2 / 3;
  int size2=TEST_ELEMENT_COUNT - size1;
  byte[] newBytes=new byte[size1];
  int count=bufferInputStream.read(newBytes);
  Assert.assertEquals(size1,count);
  for (int i=0; i < size1; i++) {
    Assert.assertEquals(data[i],newBytes[i]);
  }
  newBytes=new byte[size1];
  count=bufferInputStream.read(newBytes);
  Assert.assertEquals(size2,count);
  for (int i=0; i < size2; i++) {
    Assert.assertEquals(data[i + size1],newBytes[i]);
  }
}
