{
  if (!file.exists() || file.isDirectory()) {
    return;
  }
  Jar jar=new Jar(file);
  jar.setDoNotTouchManifest();
  analyzer.addClose(jar);
  String wabLibPath="WEB-INF/lib/" + file.getName();
  wab.putResource(wabLibPath,new JarResource(jar));
  Manifest manifest=null;
  try {
    manifest=jar.getManifest();
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
  if (manifest != null) {
    Attributes attributes=manifest.getMainAttributes();
    String classPathHeader=attributes.getValue("Class-Path");
    if (classPathHeader != null) {
      Collection<String> parts=Analyzer.split(classPathHeader,",");
      for (      String part : parts) {
        File subFile=Analyzer.getFile(file.getParentFile(),part);
        if (!subFile.exists() || !subFile.getParentFile().equals(file.getParentFile())) {
          analyzer.warning("Invalid Class-Path entry %s in %s, must " + "exist and must reside in same directory",subFile,file);
        }
 else {
          wabLibPath="WEB-INF/lib/" + subFile.getName();
          appendProperty(analyzer,Constants.BUNDLE_CLASSPATH,wabLibPath);
          addWabLib(analyzer,wab,subFile);
        }
      }
    }
  }
}
