{
  long companyId=permissionChecker.getCompanyId();
  if (permissionChecker.isCompanyAdmin() || permissionChecker.isGroupAdmin(groupId)) {
    return Boolean.TRUE;
  }
  if (!WorkflowDefinitionLinkLocalServiceUtil.hasWorkflowDefinitionLink(companyId,groupId,className)) {
    return null;
  }
  if (WorkflowInstanceLinkLocalServiceUtil.hasWorkflowInstanceLink(companyId,groupId,className,classPK)) {
    WorkflowInstanceLink workflowInstanceLink=WorkflowInstanceLinkLocalServiceUtil.getWorkflowInstanceLink(companyId,groupId,className,classPK);
    WorkflowInstance workflowInstance=WorkflowInstanceManagerUtil.getWorkflowInstance(companyId,workflowInstanceLink.getWorkflowInstanceId());
    if (workflowInstance.isComplete()) {
      return null;
    }
    boolean hasPermission=hasImplicitPermission(permissionChecker,workflowInstance);
    if (!hasPermission && actionId.equals(ActionKeys.VIEW)) {
      return null;
    }
 else {
      return hasPermission;
    }
  }
  return null;
}
