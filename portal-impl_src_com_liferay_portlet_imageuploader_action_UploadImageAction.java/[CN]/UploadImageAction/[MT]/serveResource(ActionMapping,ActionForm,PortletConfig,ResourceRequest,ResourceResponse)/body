{
  try {
    String cmd=ParamUtil.getString(resourceRequest,Constants.CMD);
    if (cmd.equals(Constants.GET_TEMP)) {
      FileEntry tempFileEntry=getTempImageFileEntry(resourceRequest);
      InputStream inputStream=tempFileEntry.getContentStream();
      PushbackInputStream pushbackInputStream=new PushbackInputStream(inputStream,3);
      byte[] magicBytes=new byte[3];
      pushbackInputStream.read(magicBytes);
      pushbackInputStream.unread(magicBytes);
      inputStream=pushbackInputStream;
      if (ArrayUtil.containsAll(_FLASH_MAGIC_BYTES[0],magicBytes) || ArrayUtil.containsAll(_FLASH_MAGIC_BYTES[1],magicBytes) || ArrayUtil.containsAll(_FLASH_MAGIC_BYTES[2],magicBytes)) {
        return;
      }
      serveTempImageFile(resourceResponse,tempFileEntry.getContentStream());
    }
  }
 catch (  NoSuchFileEntryException nsfee) {
  }
catch (  Exception e) {
    _log.error(e);
  }
}
