{
  String portletId=portletModel.getPortletId();
  EntityID portletEntityId=getEntityID(portletModel,portletId);
  ChannelMode currentPortletWindowMode=new ChannelMode(portletMode.toString());
  ChannelState currentWindowState=new ChannelState(windowState.toString());
  PortletWindowContext portletWindowContext=new PortletWindowContextImpl(request,portletModel,lifecycle);
  ChannelURLFactory channelURLFactory=getPortletWindowURLFactory(request,portletModel,currentPortletWindowMode,currentWindowState,plid,isRemotePortlet);
  GetMarkupRequest getMarkupRequest=getContainer().createGetMarkUpRequest(request,portletEntityId,currentWindowState,currentPortletWindowMode,portletWindowContext,channelURLFactory);
  populateContainerRequest(getMarkupRequest,portletId,plid);
  return getMarkupRequest;
}
