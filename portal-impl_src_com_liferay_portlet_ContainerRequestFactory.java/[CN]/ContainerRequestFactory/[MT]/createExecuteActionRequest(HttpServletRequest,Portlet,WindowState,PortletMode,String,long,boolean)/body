{
  String portletId=portletModel.getPortletId();
  EntityID portletEntityId=getEntityID(portletModel,portletId);
  ChannelMode currentPortletWindowMode=new ChannelMode(portletMode.toString());
  ChannelState currentWindowState=new ChannelState(windowState.toString());
  PortletWindowContext portletWindowContext=new PortletWindowContextImpl(request,portletModel,lifecycle);
  ChannelURLFactory channelURLFactory=getPortletWindowURLFactory(request,portletModel,currentPortletWindowMode,currentWindowState,plid,isRemotePortlet);
  WindowRequestReader windowRequestReader=getWindowRequestReader(isRemotePortlet);
  ChannelState newWindowState=windowRequestReader.readNewWindowState(request);
  ChannelMode newPortletWindowMode=windowRequestReader.readNewPortletWindowMode(request);
  if (newPortletWindowMode != null) {
    currentPortletWindowMode=newPortletWindowMode;
  }
  if (newWindowState != null) {
    currentWindowState=newWindowState;
  }
  ExecuteActionRequest executeActionRequest=getContainer().createExecuteActionRequest(request,portletEntityId,currentWindowState,currentPortletWindowMode,portletWindowContext,channelURLFactory,windowRequestReader);
  populateContainerRequest(executeActionRequest,portletId,plid);
  return executeActionRequest;
}
