{
  if (wabShapedBundle) {
    return null;
  }
  Dictionary<String,Object> properties=new HashMapDictionary<>();
  properties.put(HttpWhiteboardConstants.HTTP_WHITEBOARD_CONTEXT_SELECT,createContextSelectFilterString(servletContextName));
  properties.put(HttpWhiteboardConstants.HTTP_WHITEBOARD_SERVLET_NAME,"Portlet Servlet");
  properties.put(HttpWhiteboardConstants.HTTP_WHITEBOARD_SERVLET_PATTERN,"/portlet-servlet/*");
  return bundleContext.registerService(Servlet.class,new PortletServletWrapper(),properties);
}
