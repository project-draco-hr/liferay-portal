{
  QueryBuilder<SyncFile,Long> queryBuilder=queryBuilder();
  Where<SyncFile,Long> where=queryBuilder.where();
  filePathName=StringUtils.replace(filePathName,"\\","\\\\");
  FileSystem fileSystem=FileSystems.getDefault();
  where.like("filePathName",new SelectArg(filePathName + fileSystem.getSeparator() + "%"));
  where.lt("localSyncTime",localSyncTime);
  where.or(where.eq("state",SyncFile.STATE_SYNCED),where.eq("uiEvent",SyncFile.UI_EVENT_DELETED_LOCAL),where.eq("uiEvent",SyncFile.UI_EVENT_UPLOADING));
  where.ne("type",SyncFile.TYPE_SYSTEM);
  where.and(4);
  return query(queryBuilder.prepare());
}
