{
  Session session=null;
  try {
    if (image.isNew() || image.isModified()) {
      session=openSession();
      if (image.isNew()) {
        ImageHBM imageHBM=new ImageHBM();
        imageHBM.setImageId(image.getImageId());
        imageHBM.setModifiedDate(image.getModifiedDate());
        imageHBM.setText(image.getText());
        session.save(imageHBM);
        session.flush();
      }
 else {
        ImageHBM imageHBM=(ImageHBM)session.get(ImageHBM.class,image.getPrimaryKey());
        if (imageHBM != null) {
          imageHBM.setModifiedDate(image.getModifiedDate());
          imageHBM.setText(image.getText());
          session.flush();
        }
 else {
          imageHBM=new ImageHBM();
          imageHBM.setImageId(image.getImageId());
          imageHBM.setModifiedDate(image.getModifiedDate());
          imageHBM.setText(image.getText());
          session.save(imageHBM);
          session.flush();
        }
      }
      image.setNew(false);
      image.setModified(false);
    }
    return image;
  }
 catch (  HibernateException he) {
    throw new SystemException(he);
  }
 finally {
    closeSession(session);
  }
}
