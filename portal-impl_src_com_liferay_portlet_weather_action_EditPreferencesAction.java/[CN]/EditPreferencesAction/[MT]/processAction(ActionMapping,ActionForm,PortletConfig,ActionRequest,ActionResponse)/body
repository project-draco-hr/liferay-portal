{
  String cmd=ParamUtil.getString(req,Constants.CMD);
  if (!cmd.equals(Constants.UPDATE)) {
    return;
  }
  PortletPreferences prefs=req.getPreferences();
  String[] zips=StringUtil.split(ParamUtil.getString(req,"zips"),"\n");
  boolean fahrenheit=ParamUtil.get(req,"fahrenheit",true);
  prefs.setValues("zips",zips);
  prefs.setValue("fahrenheit",Boolean.toString(fahrenheit));
  try {
    prefs.store();
  }
 catch (  ValidatorException ve) {
    SessionErrors.add(req,ValidatorException.class.getName(),ve);
    return;
  }
  SessionMessages.add(req,config.getPortletName() + ".doEdit");
}
