{
  User user=userPersistence.findByPrimaryKey(userId);
  Date now=new Date();
  TasksReview review=tasksReviewPersistence.findByP_U(proposalId,userId);
  review.setModifiedDate(now);
  review.setCompleted(true);
  review.setRejected(rejected);
  tasksReviewPersistence.update(review,true);
  JSONObject extraData=new JSONObject();
  extraData.put("stage",review.getStage());
  extraData.put("completed",review.getCompleted());
  extraData.put("rejected",review.getRejected());
  activityTrackerLocalService.addActivityTracker(review.getUserId(),review.getGroupId(),TasksProposal.class.getName(),review.getProposalId(),TasksActivityKeys.REVIEW,extraData.toString(),review.getAssigningUserId());
  return review;
}
