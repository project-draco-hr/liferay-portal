{
  Set<Long> assignedUserIds=new HashSet<Long>();
  for (int i=0; i < userIdsPerStage.length; i++) {
    long[] userIds=userIdsPerStage[i];
    for (    long userId : userIds) {
      if (assignedUserIds.contains(userId)) {
        throw new DuplicateReviewUserIdException();
      }
 else {
        assignedUserIds.add(userId);
      }
    }
  }
  for (int i=0; i < userIdsPerStage.length; i++) {
    Set<Long> userIds=SetUtil.fromArray(userIdsPerStage[i]);
    updateReviews(proposalId,assignedByUserId,i + 2,userIds);
  }
}
