{
  Set<Long> reviewUserIds=new HashSet<Long>();
  List<TasksReview> reviews=tasksReviewPersistence.findByP_S(proposalId,stage);
  for (  TasksReview review : reviews) {
    if (!userIds.contains(review.getUserId())) {
      deleteReview(review);
    }
 else {
      reviewUserIds.add(review.getUserId());
    }
  }
  for (  long userId : userIds) {
    if (!reviewUserIds.contains(userId)) {
      addReview(userId,proposalId,assignedByUserId,stage);
    }
  }
}
