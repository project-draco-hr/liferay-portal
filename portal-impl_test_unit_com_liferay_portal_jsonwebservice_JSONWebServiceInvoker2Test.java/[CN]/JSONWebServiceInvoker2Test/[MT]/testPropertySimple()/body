{
  Map<String,Object> map=new LinkedHashMap<String,Object>();
  Map<String,Object> params=new LinkedHashMap<String,Object>();
  map.put("/foo/bar",params);
  Map<String,Object> innerParam=new LinkedHashMap<String,Object>();
  params.put("$new = /foo/hello",innerParam);
  String json=toJSON(map);
  JSONWebServiceAction jsonWebServiceAction=prepareInvokerAction(json);
  Object result=jsonWebServiceAction.invoke();
  JSONWebServiceInvokerAction.InvokerResult invokerResult=(JSONWebServiceInvokerAction.InvokerResult)result;
  json=invokerResult.toJSONString();
  Assert.assertTrue(json.contains("\"array\":[1,2,3]"));
  Assert.assertFalse(json.contains("\"secret\""));
  Assert.assertTrue(json.contains("\"new\":\"world\""));
}
