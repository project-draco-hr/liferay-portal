{
  TemplateResourceThreadLocal.setTemplateResource(TemplateConstants.LANG_TYPE_VM,templateResource);
  try {
    Template template=null;
    if (_privileged) {
      template=AccessController.doPrivileged(new TemplatePrivilegedExceptionAction(templateResource));
    }
 else {
      template=_velocityEngine.getTemplate(getTemplateResourceUUID(templateResource),TemplateConstants.DEFAUT_ENCODING);
    }
    template.merge(_velocityContext,writer);
  }
 catch (  PrivilegedActionException pae) {
    throw pae.getException();
  }
 finally {
    TemplateResourceThreadLocal.setTemplateResource(TemplateConstants.LANG_TYPE_VM,null);
  }
}
