{
  _request=request;
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  _portletDisplay=themeDisplay.getPortletDisplay();
  _companyId=themeDisplay.getCompanyId();
  _fileEntryTypeId=ParamUtil.getLong(request,"fileEntryTypeId",-1);
  if ((_fileEntryTypeId == -1) && (fileEntry != null) && (fileEntry.getModel() instanceof DLFileEntry)) {
    DLFileEntry dlFileEntry=(DLFileEntry)fileEntry.getModel();
    _fileEntryTypeId=dlFileEntry.getFileEntryTypeId();
  }
  _folderId=BeanParamUtil.getLong(fileEntry,request,"folderId");
  _permissionChecker=themeDisplay.getPermissionChecker();
  _scopeGroupId=themeDisplay.getScopeGroupId();
  _dlFileEntryActionsDisplayContextHelper=new DLFileEntryActionsDisplayContextHelper(_permissionChecker,fileEntry,fileVersion);
  _dlActionsDisplayContext=new DLActionsDisplayContext(request,dlPortletInstanceSettings);
}
