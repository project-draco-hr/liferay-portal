{
  long groupId=statsUser.getGroupId();
  long userId=statsUser.getUserId();
  if (entityType.equals("community-role") || entityType.equals("organization-role")) {
    Role role=RoleLocalServiceUtil.getRole(companyId,entityValue);
    if (UserGroupRoleLocalServiceUtil.hasUserGroupRole(userId,groupId,role.getRoleId())) {
      return true;
    }
  }
 else   if (entityType.equals("organization")) {
    Organization organization=OrganizationLocalServiceUtil.getOrganization(companyId,entityValue);
    if (OrganizationLocalServiceUtil.hasUserOrganization(userId,organization.getOrganizationId())) {
      return true;
    }
  }
 else   if (entityType.equals("regular-role")) {
    if (RoleLocalServiceUtil.hasUserRole(userId,companyId,entityValue,true)) {
      return true;
    }
  }
 else   if (entityType.equals("user-group")) {
    UserGroup userGroup=UserGroupLocalServiceUtil.getUserGroup(companyId,entityValue);
    if (UserLocalServiceUtil.hasUserGroupUser(userGroup.getUserGroupId(),userId)) {
      return true;
    }
  }
  return false;
}
