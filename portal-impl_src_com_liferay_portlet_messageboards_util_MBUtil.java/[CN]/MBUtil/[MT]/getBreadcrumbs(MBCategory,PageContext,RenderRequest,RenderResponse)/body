{
  PortletURL categoriesURL=renderResponse.createRenderURL();
  categoriesURL.setWindowState(LiferayWindowState.POP_UP);
  categoriesURL.setParameter("struts_action","/message_boards/select_category");
  String categoriesLink="<a href=\"" + categoriesURL.toString() + "\">"+ LanguageUtil.get(pageContext,"categories")+ "</a>";
  if (category == null) {
    return "<span class=\"first last\">" + categoriesLink + "</span>";
  }
  String breadcrumbs=StringPool.BLANK;
  for (int i=0; ; i++) {
    category=category.toEscapedModel();
    PortletURL portletURL=renderResponse.createRenderURL();
    portletURL.setWindowState(LiferayWindowState.POP_UP);
    portletURL.setParameter("struts_action","/message_boards/select_category");
    portletURL.setParameter("mbCategoryId",String.valueOf(category.getCategoryId()));
    String categoryLink="<a href=\"" + portletURL.toString() + "\">"+ category.getName()+ "</a>";
    if (i == 0) {
      breadcrumbs="<span class=\"last\">" + categoryLink + "</span>";
    }
 else {
      breadcrumbs=categoryLink + " &raquo; " + breadcrumbs;
    }
    if (category.isRoot()) {
      break;
    }
    category=MBCategoryLocalServiceUtil.getCategory(category.getParentCategoryId());
  }
  breadcrumbs="<span class=\"first\">" + categoriesLink + " &raquo; </span>"+ breadcrumbs;
  return breadcrumbs;
}
