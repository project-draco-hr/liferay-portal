{
  String body="";
  String parentAuthor=parentMessage.isAnonymous() ? LanguageUtil.get(request,"anonymous") : HtmlUtil.escape(PortalUtil.getUserName(parentMessage));
  if (quote && (parentMessage != null)) {
    StringBundler sb=new StringBundler(5);
    sb.append("<blockquote><div class=\"quote-title\">");
    sb.append(parentAuthor);
    sb.append(": </div><div class=\"quote\"><div class=\"quote-content\">");
    sb.append(parentMessage.getBody(false));
    sb.append("</div></blockquote><br /><br /><br />");
    body=sb.toString();
  }
 else   if (splitThread) {
    StringBundler sb=new StringBundler(5);
    sb.append("<a href=");
    sb.append(MBThreadConstants.NEW_THREAD_URL);
    sb.append(">");
    sb.append(MBThreadConstants.NEW_THREAD_URL);
    sb.append("</a>");
    body=LanguageUtil.format(request,"the-new-thread-can-be-found-at-x",sb.toString(),false);
  }
  return body;
}
