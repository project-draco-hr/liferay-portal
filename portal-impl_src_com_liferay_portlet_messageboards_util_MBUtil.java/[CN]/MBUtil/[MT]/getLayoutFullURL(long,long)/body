{
  StringBuilder builder=new StringBuilder();
  Company company=CompanyLocalServiceUtil.getCompany(companyId);
  Group group=GroupLocalServiceUtil.getGroup(groupId);
  long plid=PortalUtil.getPlidFromPortletId(groupId,PortletKeys.MESSAGE_BOARDS);
  Layout layout=LayoutLocalServiceUtil.getLayout(plid);
  String portalURL=PortalUtil.getPortalURL(company.getVirtualHost(),PortalUtil.getPortalPort(),false);
  builder.append(portalURL);
  if (layout.isPrivateLayout()) {
    if (group.isUser()) {
      builder.append(PortalUtil.getPathFriendlyURLPrivateUser());
    }
 else {
      builder.append(PortalUtil.getPathFriendlyURLPrivateGroup());
    }
  }
 else {
    builder.append(PortalUtil.getPathFriendlyURLPublic());
  }
  builder.append(group.getFriendlyURL());
  builder.append(layout.getFriendlyURL());
  return builder.toString();
}
