{
  int messageCount=MBMessageLocalServiceUtil.getCategoryMessagesCount(category.getGroupId(),category.getCategoryId(),WorkflowConstants.STATUS_APPROVED);
  QueryDefinition queryDefinition=new QueryDefinition(WorkflowConstants.STATUS_IN_TRASH);
  List<MBThread> threads=MBThreadLocalServiceUtil.getGroupThreads(category.getGroupId(),queryDefinition);
  for (  MBThread thread : threads) {
    messageCount=messageCount - thread.getMessageCount();
  }
  return messageCount;
}
