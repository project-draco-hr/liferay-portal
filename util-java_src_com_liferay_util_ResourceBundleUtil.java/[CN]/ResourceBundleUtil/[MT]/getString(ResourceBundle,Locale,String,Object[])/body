{
  String value=null;
  if (bundle == null) {
    if (_log.isErrorEnabled()) {
      _log.error("Resource bundle is null");
    }
  }
 else {
    value=bundle.getString(key);
    if (value == null) {
      if (_log.isWarnEnabled()) {
        _log.warn("No value found for key " + key);
      }
    }
 else {
      if ((args != null) && (args.length > 0)) {
        MessageFormat format=new MessageFormat(value,locale);
        value=format.format(args);
      }
    }
  }
  if (value == null) {
    value=key;
  }
  return value;
}
