{
  String value=null;
  if (resourceBundle == null) {
    if (_log.isErrorEnabled()) {
      _log.error("Resource bundle is null");
    }
  }
 else {
    value=resourceBundle.getString(key);
    if (value == null) {
      if (_log.isWarnEnabled()) {
        _log.warn("No value found for key " + key);
      }
    }
 else {
      if ((arguments != null) && (arguments.length > 0)) {
        MessageFormat messageFormat=new MessageFormat(value,locale);
        value=messageFormat.format(arguments);
      }
    }
  }
  if (value == null) {
    value=key;
  }
  return value;
}
