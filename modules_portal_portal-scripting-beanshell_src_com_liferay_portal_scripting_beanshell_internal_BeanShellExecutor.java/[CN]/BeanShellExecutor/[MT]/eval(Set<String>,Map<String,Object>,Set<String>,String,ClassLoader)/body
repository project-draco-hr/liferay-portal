{
  if (allowedClasses != null) {
    throw new ExecutionException("Constrained execution not supported for BeanShell");
  }
  try {
    Interpreter interpreter=new Interpreter();
    for (    Map.Entry<String,Object> entry : inputObjects.entrySet()) {
      interpreter.set(entry.getKey(),entry.getValue());
    }
    if (ArrayUtil.isNotEmpty(classLoaders)) {
      ClassLoader aggregateClassLoader=AggregateClassLoader.getAggregateClassLoader(ClassLoaderUtil.getPortalClassLoader(),classLoaders);
      interpreter.setClassLoader(aggregateClassLoader);
    }
    interpreter.eval(script);
    if (outputNames == null) {
      return null;
    }
    Map<String,Object> outputObjects=new HashMap<>();
    for (    String outputName : outputNames) {
      outputObjects.put(outputName,interpreter.get(outputName));
    }
    return outputObjects;
  }
 catch (  Exception e) {
    throw new ScriptingException(e.getMessage(),e);
  }
}
