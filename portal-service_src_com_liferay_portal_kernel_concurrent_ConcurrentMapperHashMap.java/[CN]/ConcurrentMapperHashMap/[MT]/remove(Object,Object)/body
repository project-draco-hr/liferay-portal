{
  if (key == null) {
    throw new NullPointerException("Key is null");
  }
  if (value == null) {
    throw new NullPointerException("Value is null");
  }
  IK innerKey=mapKeyForQuery((K)key);
  IV innerValue=mapValueForQuery((V)value);
  IV previousInnerValue=innerMap.get(innerKey);
  if (!innerValue.equals(previousInnerValue) || !innerMap.remove(innerKey,previousInnerValue)) {
    return false;
  }
  unmapValue(previousInnerValue);
  return true;
}
