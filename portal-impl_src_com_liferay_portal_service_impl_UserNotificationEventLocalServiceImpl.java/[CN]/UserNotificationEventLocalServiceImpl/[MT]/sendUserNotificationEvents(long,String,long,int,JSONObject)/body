{
  List<UserNotificationEvent> userNotificationEvents=new ArrayList<UserNotificationEvent>();
  UserNotificationDefinition userNotificationDefinition=UserNotificationManagerUtil.fetchUserNotificationDefinition(portletId,classNameId,notificationType);
  Map<Integer,UserNotificationDeliveryType> deliveryTypeMaps=userNotificationDefinition.getUserNotificationDeliveryTypes();
  for (  Map.Entry<Integer,UserNotificationDeliveryType> deliveryTypeEntry : deliveryTypeMaps.entrySet()) {
    UserNotificationDeliveryType userNotificationDeliveryType=deliveryTypeEntry.getValue();
    NotificationEvent notificationEvent=NotificationEventFactoryUtil.createNotificationEvent(System.currentTimeMillis(),portletId,notificationEventJSONObject);
    notificationEvent.setDeliveryRequired(0);
    notificationEvent.setDeliveryType(userNotificationDeliveryType.getType());
    if (UserNotificationManagerUtil.isDeliver(userId,notificationEvent.getType(),classNameId,notificationType,userNotificationDeliveryType.getType())) {
      UserNotificationEvent userNotificationEvent=addUserNotificationEvent(userId,notificationEvent);
      userNotificationEvents.add(userNotificationEvent);
    }
  }
  return userNotificationEvents;
}
