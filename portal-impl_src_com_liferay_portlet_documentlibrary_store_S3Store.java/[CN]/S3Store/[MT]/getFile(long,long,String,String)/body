{
  try {
    if (Validator.isNull(versionLabel)) {
      versionLabel=getHeadVersionLabel(companyId,repositoryId,fileName);
    }
    S3Object s3Object=_s3Service.getObject(_s3Bucket.getName(),getKey(companyId,repositoryId,fileName,versionLabel));
    Date lastModifiedDate=s3Object.getLastModifiedDate();
    String tempFilePath=getTempFilePath(fileName,lastModifiedDate.getTime());
    File tempFile=saveTempFile(tempFilePath,lastModifiedDate.getTime(),s3Object.getDataInputStream());
    cleanTempFolder();
    return tempFile;
  }
 catch (  IOException ioe) {
    throw new SystemException(ioe);
  }
catch (  ServiceException se) {
    throw new SystemException(se);
  }
}
