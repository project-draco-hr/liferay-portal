{
  HttpServletRequest request=(HttpServletRequest)pageContext.getRequest();
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  long groupId=ParamUtil.getLong(request,"groupId");
  Group group=GroupLocalServiceUtil.fetchGroup(groupId);
  if (group == null) {
    group=(Group)request.getAttribute(WebKeys.GROUP);
  }
  if (group == null) {
    group=themeDisplay.getScopeGroup();
  }
  if (group == null) {
    return SKIP_BODY;
  }
  Group liveGroup=StagingUtil.getLiveGroup(group.getGroupId());
  Group stagingGroup=StagingUtil.getStagingGroup(group.getGroupId());
  pageContext.setAttribute("group",group);
  pageContext.setAttribute("groupId",group.getGroupId());
  pageContext.setAttribute("liveGroup",liveGroup);
  pageContext.setAttribute("liveGroupId",liveGroup.getGroupId());
  pageContext.setAttribute("privateLayout",ParamUtil.getBoolean(request,"privateLayout"));
  pageContext.setAttribute("stagingGroup",stagingGroup);
  pageContext.setAttribute("stagingGroupId",stagingGroup.getGroupId());
  return SKIP_BODY;
}
