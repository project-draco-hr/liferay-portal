{
  String MN="performBlockingInteraction";
  if (logger.isLogging(Logger.TRACE_HIGH)) {
    logger.entry(Logger.TRACE_HIGH,MN);
  }
  BlockingInteractionResponse interactionResponse=null;
  try {
    paramCheck.check(request);
    checkCookie();
    PortletContext newPortletContext=null;
    newPortletContext=handlePortletStateChange(request);
    PortletDescription portletDescription=null;
    portletDescription=provider.getDescriptionHandler().getPortletDescription(request.getPortletContext().getPortletHandle(),request.getRegistrationContext(),null,request.getMarkupParams().getLocales());
    MarkupType markupType=this.checkMarkupParams(portletDescription,request.getMarkupParams());
    request.getMarkupParams().setLocales(markupType.getLocales());
    request.getMarkupParams().setMimeTypes(new String[]{markupType.getMimeType()});
    request.getMarkupParams().setMode(markupType.getModes()[0]);
    request.getMarkupParams().setWindowState(markupType.getWindowStates()[0]);
    interactionResponse=provider.getPortletInvoker().invokePerformBlockingInteraction(request);
    if (newPortletContext != null) {
      interactionResponse.getUpdateResponse().setPortletContext(newPortletContext);
    }
  }
 catch (  WSRPException e) {
    WSRPXHelper.handleWSRPException(e);
  }
  if (logger.isLogging(Logger.TRACE_HIGH)) {
    logger.exit(Logger.TRACE_HIGH,MN);
  }
  return interactionResponse;
}
