{
  super(req);
  _params=new HashMap();
  _inherit=inherit;
  if (params != null) {
    Iterator itr=params.entrySet().iterator();
    while (itr.hasNext()) {
      Map.Entry entry=(Map.Entry)itr.next();
      _params.put(entry.getKey(),entry.getValue());
    }
  }
  if (_inherit && (req instanceof DynamicRenderRequest)) {
    DynamicRenderRequest dynamicReq=(DynamicRenderRequest)req;
    setPortletRequest(dynamicReq.getPortletRequest());
    params=dynamicReq.getDynamicParameterMap();
    if (params != null) {
      Iterator itr=params.entrySet().iterator();
      while (itr.hasNext()) {
        Map.Entry entry=(Map.Entry)itr.next();
        String name=(String)entry.getKey();
        String[] oldValues=(String[])entry.getValue();
        String[] curValues=(String[])_params.get(name);
        if (curValues == null) {
          _params.put(name,oldValues);
        }
 else {
          String[] newValues=new String[oldValues.length + curValues.length];
          System.arraycopy(oldValues,0,newValues,0,oldValues.length);
          System.arraycopy(curValues,0,newValues,oldValues.length,curValues.length);
          _params.put(name,newValues);
        }
      }
    }
  }
}
