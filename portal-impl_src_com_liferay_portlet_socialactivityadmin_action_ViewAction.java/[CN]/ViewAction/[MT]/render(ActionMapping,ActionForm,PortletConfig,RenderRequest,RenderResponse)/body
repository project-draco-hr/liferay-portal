{
  ThemeDisplay themeDisplay=(ThemeDisplay)renderRequest.getAttribute(WebKeys.THEME_DISPLAY);
  Map<String,Boolean> activitySettingsMap=new LinkedHashMap<String,Boolean>();
  List<SocialActivitySetting> activitySettings=SocialActivitySettingLocalServiceUtil.getActivitySettings(themeDisplay.getScopeGroupIdOrLiveGroupId());
  String[] modelNames=SocialConfigurationUtil.getActivityModelNames();
  Comparator<String> comparator=new ModelResourceComparator(themeDisplay.getLocale());
  Arrays.sort(modelNames,comparator);
  for (  String className : modelNames) {
    activitySettingsMap.put(className,false);
  }
  for (  SocialActivitySetting activitySetting : activitySettings) {
    if (activitySetting.getName().equals("enabled") && activitySettingsMap.containsKey(activitySetting.getClassName())) {
      activitySettingsMap.put(activitySetting.getClassName(),GetterUtil.getBoolean(activitySetting.getValue(),false));
    }
  }
  renderRequest.setAttribute("social-activity-setting-mapping",activitySettingsMap);
  return mapping.findForward("portlet.social_activity_admin.view");
}
