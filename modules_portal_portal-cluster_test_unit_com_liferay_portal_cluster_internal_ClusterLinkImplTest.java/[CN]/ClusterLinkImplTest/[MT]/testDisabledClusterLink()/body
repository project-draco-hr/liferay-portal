{
  ClusterLinkImpl clusterLinkImpl=new ClusterLinkImpl();
  clusterLinkImpl.setClusterChannelFactory(new TestClusterChannelFactory());
  clusterLinkImpl.initialize();
  List<TestClusterChannel> clusterChannels=TestClusterChannel.getClusterChannels();
  Assert.assertTrue(clusterChannels.isEmpty());
  Assert.assertNull(clusterLinkImpl.getExecutorService());
  List<Serializable> multicastMessages=TestClusterChannel.getMulticastMessages();
  List<ObjectValuePair<Serializable,Address>> unicastMessages=TestClusterChannel.getUnicastMessages();
  Message message=new Message();
  Address address=new TestAddress("test.address");
  clusterLinkImpl.sendUnicastMessage(address,message,Priority.LEVEL1);
  Assert.assertTrue(multicastMessages.isEmpty());
  Assert.assertTrue(unicastMessages.isEmpty());
  clusterLinkImpl.sendMulticastMessage(message,Priority.LEVEL1);
  Assert.assertTrue(multicastMessages.isEmpty());
  Assert.assertTrue(unicastMessages.isEmpty());
  clusterLinkImpl.destroy();
}
