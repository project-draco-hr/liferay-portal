{
  ClusterLinkImpl clusterLinkImpl=getClusterLinkImpl(true,1);
  List<Serializable> multicastMessages=TestClusterChannel.getMulticastMessages();
  List<ObjectValuePair<Serializable,Address>> unicastMessages=TestClusterChannel.getUnicastMessages();
  Assert.assertTrue(multicastMessages.isEmpty());
  Assert.assertTrue(unicastMessages.isEmpty());
  Message message=new Message();
  Address address=new TestAddress("test.address");
  clusterLinkImpl.sendUnicastMessage(address,message,Priority.LEVEL1);
  Assert.assertTrue(multicastMessages.isEmpty());
  Assert.assertEquals(1,unicastMessages.size());
  ObjectValuePair<Serializable,Address> unicastMessage=unicastMessages.get(0);
  Assert.assertSame(message,unicastMessage.getKey());
  Assert.assertSame(address,unicastMessage.getValue());
}
