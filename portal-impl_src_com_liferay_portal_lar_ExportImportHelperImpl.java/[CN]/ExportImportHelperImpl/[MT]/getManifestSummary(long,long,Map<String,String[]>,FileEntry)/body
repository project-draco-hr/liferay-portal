{
  File file=FileUtil.createTempFile("lar");
  InputStream inputStream=DLFileEntryLocalServiceUtil.getFileAsStream(userId,fileEntry.getFileEntryId(),fileEntry.getVersion(),false);
  ManifestSummary manifestSummary=null;
  try {
    FileUtil.write(file,inputStream);
    Group group=GroupLocalServiceUtil.getGroup(groupId);
    String userIdStrategy=MapUtil.getString(parameterMap,PortletDataHandlerKeys.USER_ID_STRATEGY);
    ZipReader zipReader=ZipReaderFactoryUtil.getZipReader(file);
    PortletDataContext portletDataContext=PortletDataContextFactoryUtil.createImportPortletDataContext(group.getCompanyId(),groupId,parameterMap,getUserIdStrategy(userId,userIdStrategy),zipReader);
    manifestSummary=getManifestSummary(portletDataContext);
  }
  finally {
    StreamUtil.cleanUp(inputStream);
    FileUtil.delete(file);
  }
  return manifestSummary;
}
