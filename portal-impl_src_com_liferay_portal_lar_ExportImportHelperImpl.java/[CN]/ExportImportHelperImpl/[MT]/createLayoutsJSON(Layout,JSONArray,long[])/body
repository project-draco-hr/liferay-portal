{
  boolean checked=true;
  JSONArray childrenJSONArray=null;
  List<Layout> children=layout.getChildren();
  if (children.size() > 0) {
    childrenJSONArray=JSONFactoryUtil.createJSONArray();
    for (    Layout childLayout : layout.getChildren()) {
      if (!createLayoutsJSON(childLayout,childrenJSONArray,layoutIds)) {
        checked=false;
      }
    }
  }
  JSONObject layoutJSON=null;
  if (!checked && (childrenJSONArray != null)) {
    for (int i=0; i < childrenJSONArray.length(); i++) {
      parentJSONArray.put(childrenJSONArray.getJSONObject(i));
    }
  }
  if (ArrayUtil.contains(layoutIds,layout.getLayoutId())) {
    layoutJSON=JSONFactoryUtil.createJSONObject();
    boolean includeChildren=true;
    if (!checked) {
      includeChildren=false;
    }
    layoutJSON.put("includeChildren",includeChildren);
    layoutJSON.put("plid",layout.getPlid());
    parentJSONArray.put(layoutJSON);
  }
 else {
    checked=false;
  }
  return checked;
}
