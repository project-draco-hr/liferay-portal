{
  Group group=GroupLocalServiceUtil.getGroup(portletDataContext.getScopeGroupId());
  LayoutSet publicLayoutSet=group.getPublicLayoutSet();
  LayoutSet privateLayoutSet=group.getPrivateLayoutSet();
  String publicLayoutSetVirtualHostname=publicLayoutSet.getVirtualHostname();
  String privateLayoutSetVirtualHostname=privateLayoutSet.getVirtualHostname();
  int portalPort=PortalUtil.getPortalPort(false);
  String publicLayoutSetPortalUrl=StringPool.BLANK;
  String privateLayoutSetPortalUrl=StringPool.BLANK;
  String companyPortalUrl=StringPool.BLANK;
  Company company=CompanyLocalServiceUtil.getCompany(group.getCompanyId());
  String companyVirtualHostname=company.getVirtualHostname();
  if (portalPort != -1) {
    if (Validator.isNotNull(publicLayoutSetVirtualHostname)) {
      publicLayoutSetPortalUrl=PortalUtil.getPortalURL(publicLayoutSetVirtualHostname,portalPort,false);
    }
    if (Validator.isNotNull(privateLayoutSetVirtualHostname)) {
      privateLayoutSetPortalUrl=PortalUtil.getPortalURL(privateLayoutSetVirtualHostname,portalPort,false);
    }
    if (Validator.isNotNull(companyVirtualHostname)) {
      companyPortalUrl=PortalUtil.getPortalURL(companyVirtualHostname,portalPort,false);
    }
  }
  int securePortalPort=PortalUtil.getPortalPort(true);
  String publicLayoutSetSecurePortalUrl=StringPool.BLANK;
  String privateLayoutSetSecurePortalUrl=StringPool.BLANK;
  String companySecurePortalUrl=StringPool.BLANK;
  if (securePortalPort != -1) {
    if (Validator.isNotNull(publicLayoutSetVirtualHostname)) {
      publicLayoutSetSecurePortalUrl=PortalUtil.getPortalURL(publicLayoutSetVirtualHostname,securePortalPort,true);
    }
    if (Validator.isNotNull(privateLayoutSetVirtualHostname)) {
      privateLayoutSetSecurePortalUrl=PortalUtil.getPortalURL(privateLayoutSetVirtualHostname,securePortalPort,true);
    }
    if (Validator.isNotNull(companyVirtualHostname)) {
      companySecurePortalUrl=PortalUtil.getPortalURL(companyVirtualHostname,securePortalPort,true);
    }
  }
  content=StringUtil.replace(content,DATA_HANDLER_PUBLIC_LAYOUT_SET_SECURE_URL,publicLayoutSetSecurePortalUrl);
  content=StringUtil.replace(content,DATA_HANDLER_PUBLIC_LAYOUT_SET_URL,publicLayoutSetPortalUrl);
  content=StringUtil.replace(content,DATA_HANDLER_PRIVATE_LAYOUT_SET_SECURE_URL,privateLayoutSetSecurePortalUrl);
  content=StringUtil.replace(content,DATA_HANDLER_PRIVATE_LAYOUT_SET_URL,privateLayoutSetPortalUrl);
  content=StringUtil.replace(content,DATA_HANDLER_COMPANY_SECURE_URL,companySecurePortalUrl);
  content=StringUtil.replace(content,DATA_HANDLER_COMPANY_URL,companyPortalUrl);
  content=StringUtil.replace(content,DATA_HANDLER_GROUP_FRIENDLY_URL,group.getFriendlyURL());
  content=StringUtil.replace(content,DATA_HANDLER_PATH_CONTEXT,PortalUtil.getPathContext());
  content=StringUtil.replace(content,DATA_HANDLER_PRIVATE_GROUP_SERVLET_MAPPING,PropsValues.LAYOUT_FRIENDLY_URL_PRIVATE_GROUP_SERVLET_MAPPING);
  content=StringUtil.replace(content,DATA_HANDLER_PRIVATE_USER_SERVLET_MAPPING,PropsValues.LAYOUT_FRIENDLY_URL_PRIVATE_USER_SERVLET_MAPPING);
  content=StringUtil.replace(content,DATA_HANDLER_PUBLIC_SERVLET_MAPPING,PropsValues.LAYOUT_FRIENDLY_URL_PUBLIC_SERVLET_MAPPING);
  return content;
}
