{
  String portletData=ParamUtil.getString(request,"portletData");
  if (Validator.isNull(portletData)) {
    return;
  }
  String[] portletDataArray=StringUtil.split(portletData);
  if (Validator.isNull(portletDataArray)) {
    return;
  }
  long classPK=GetterUtil.getLong(portletDataArray[0]);
  String className=GetterUtil.getString(portletDataArray[1]);
  if ((classPK <= 0) || Validator.isNull(className)) {
    return;
  }
  AssetRendererFactory assetRendererFactory=AssetRendererFactoryRegistryUtil.getAssetRendererFactoryByClassName(className);
  AssetRenderer assetRenderer=assetRendererFactory.getAssetRenderer(classPK);
  PortletPreferences portletSetup=PortletPreferencesFactoryUtil.getLayoutPortletSetup(layout,portletId);
  assetRenderer.setAddContentPreferences(portletSetup,portletId,themeDisplay);
  portletSetup.store();
}
