{
  PortletPreferences portletSetup=PortletPreferencesFactoryUtil.getLayoutPortletSetup(layout,portletId);
  String[] portletData=StringUtil.split(ParamUtil.getString(request,"portletData"));
  if (portletData.length == 0) {
    return;
  }
  long classPK=GetterUtil.getLong(portletData[0]);
  String className=GetterUtil.getString(portletData[1]);
  if ((classPK <= 0) || Validator.isNull(className)) {
    return;
  }
  AssetRendererFactory assetRendererFactory=AssetRendererFactoryRegistryUtil.getAssetRendererFactoryByClassName(className);
  AssetRenderer assetRenderer=assetRendererFactory.getAssetRenderer(classPK);
  assetRenderer.setAddToPagePreferences(portletSetup,portletId,themeDisplay);
  portletSetup.store();
}
