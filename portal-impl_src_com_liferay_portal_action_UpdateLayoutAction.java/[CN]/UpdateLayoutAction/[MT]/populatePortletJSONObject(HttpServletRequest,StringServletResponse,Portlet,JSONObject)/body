{
  jsonObject.put("refresh",false);
  jsonObject.put("portletHTML",stringResponse.getString().trim());
  Set<String> footerCssSet=new LinkedHashSet<String>();
  Set<String> footerJavaScriptSet=new LinkedHashSet<String>();
  Set<String> headerCssSet=new LinkedHashSet<String>();
  Set<String> headerJavaScriptSet=new LinkedHashSet<String>();
  Portlet rootPortlet=portlet.getRootPortlet();
  for (  String footerPortalCss : portlet.getFooterPortalCss()) {
    if (!HttpUtil.hasProtocol(footerPortalCss)) {
      footerPortalCss=PortalUtil.getStaticResourceURL(request,PortalUtil.getPathContext() + footerPortalCss,rootPortlet.getTimestamp());
    }
    footerCssSet.add(footerPortalCss);
  }
  for (  String footerPortalJavaScript : portlet.getFooterPortalJavaScript()) {
    if (!HttpUtil.hasProtocol(footerPortalJavaScript)) {
      footerPortalJavaScript=PortalUtil.getStaticResourceURL(request,PortalUtil.getPathContext() + footerPortalJavaScript,rootPortlet.getTimestamp());
    }
    footerJavaScriptSet.add(footerPortalJavaScript);
  }
  for (  String footerPortletCss : portlet.getFooterPortletCss()) {
    if (!HttpUtil.hasProtocol(footerPortletCss)) {
      footerPortletCss=PortalUtil.getStaticResourceURL(request,portlet.getStaticResourcePath() + footerPortletCss,rootPortlet.getTimestamp());
    }
    footerCssSet.add(footerPortletCss);
  }
  for (  String footerPortletJavaScript : portlet.getFooterPortletJavaScript()) {
    if (!HttpUtil.hasProtocol(footerPortletJavaScript)) {
      footerPortletJavaScript=PortalUtil.getStaticResourceURL(request,portlet.getStaticResourcePath() + footerPortletJavaScript,rootPortlet.getTimestamp());
    }
    footerJavaScriptSet.add(footerPortletJavaScript);
  }
  for (  String headerPortalCss : portlet.getHeaderPortalCss()) {
    if (!HttpUtil.hasProtocol(headerPortalCss)) {
      headerPortalCss=PortalUtil.getStaticResourceURL(request,PortalUtil.getPathContext() + headerPortalCss,rootPortlet.getTimestamp());
    }
    headerCssSet.add(headerPortalCss);
  }
  for (  String headerPortalJavaScript : portlet.getHeaderPortalJavaScript()) {
    if (!HttpUtil.hasProtocol(headerPortalJavaScript)) {
      headerPortalJavaScript=PortalUtil.getStaticResourceURL(request,PortalUtil.getPathContext() + headerPortalJavaScript,rootPortlet.getTimestamp());
    }
    headerJavaScriptSet.add(headerPortalJavaScript);
  }
  for (  String headerPortletCss : portlet.getHeaderPortletCss()) {
    if (!HttpUtil.hasProtocol(headerPortletCss)) {
      headerPortletCss=PortalUtil.getStaticResourceURL(request,portlet.getStaticResourcePath() + headerPortletCss,rootPortlet.getTimestamp());
    }
    headerCssSet.add(headerPortletCss);
  }
  for (  String headerPortletJavaScript : portlet.getHeaderPortletJavaScript()) {
    if (!HttpUtil.hasProtocol(headerPortletJavaScript)) {
      headerPortletJavaScript=PortalUtil.getStaticResourceURL(request,portlet.getStaticResourcePath() + headerPortletJavaScript,rootPortlet.getTimestamp());
    }
    headerJavaScriptSet.add(headerPortletJavaScript);
  }
  String footerCssPaths=JSONFactoryUtil.serialize(footerCssSet.toArray(new String[footerCssSet.size()]));
  jsonObject.put("footerCssPaths",JSONFactoryUtil.createJSONArray(footerCssPaths));
  String footerJavaScriptPaths=JSONFactoryUtil.serialize(footerJavaScriptSet.toArray(new String[footerJavaScriptSet.size()]));
  jsonObject.put("footerJavaScriptPaths",JSONFactoryUtil.createJSONArray(footerJavaScriptPaths));
  String headerCssPaths=JSONFactoryUtil.serialize(headerCssSet.toArray(new String[headerCssSet.size()]));
  jsonObject.put("headerCssPaths",JSONFactoryUtil.createJSONArray(headerCssPaths));
  String headerJavaScriptPaths=JSONFactoryUtil.serialize(headerJavaScriptSet.toArray(new String[headerJavaScriptSet.size()]));
  jsonObject.put("headerJavaScriptPaths",JSONFactoryUtil.createJSONArray(headerJavaScriptPaths));
}
