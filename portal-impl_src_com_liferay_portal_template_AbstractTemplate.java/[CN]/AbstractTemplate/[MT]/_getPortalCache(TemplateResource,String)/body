{
  if (!(templateResource instanceof CacheTemplateResource)) {
    return MultiVMPoolUtil.getPortalCache(portalCacheName);
  }
  CacheTemplateResource cacheTemplateResource=(CacheTemplateResource)templateResource;
  TemplateResource innerTemplateResource=cacheTemplateResource.getInnerTemplateResource();
  if (innerTemplateResource instanceof URLTemplateResource) {
    return SingleVMPoolUtil.getCache(portalCacheName);
  }
  return MultiVMPoolUtil.getPortalCache(portalCacheName);
}
