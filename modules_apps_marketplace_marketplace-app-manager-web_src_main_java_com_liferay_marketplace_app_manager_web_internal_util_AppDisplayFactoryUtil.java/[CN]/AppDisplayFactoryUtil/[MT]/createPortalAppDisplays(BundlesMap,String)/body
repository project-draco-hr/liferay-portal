{
  Map<String,AppDisplay> appDisplaysMap=new HashMap<>();
  Collection<Bundle> bundles=bundlesMap.values();
  for (  Bundle bundle : bundles) {
    Dictionary<String,String> headers=bundle.getHeaders();
    if (Validator.isNotNull(category)) {
      String[] categories=StringUtil.split(headers.get(BundleConstants.LIFERAY_RELENG_CATEGORY));
      if (!ArrayUtil.contains(categories,category)) {
        continue;
      }
    }
    String appTitle=GetterUtil.getString(headers.get(BundleConstants.LIFERAY_RELENG_APP_TITLE));
    AppDisplay appDisplay=appDisplaysMap.get(appTitle);
    if (appDisplay == null) {
      String appDescription=GetterUtil.getString(headers.get(BundleConstants.LIFERAY_RELENG_APP_DESCRIPTION));
      Version appVersion=bundle.getVersion();
      appDisplay=new SimpleAppDisplay(appTitle,appDescription,appVersion);
      appDisplaysMap.put(appTitle,appDisplay);
    }
    appDisplay.addBundle(bundle);
  }
  return ListUtil.fromMapValues(appDisplaysMap);
}
