{
  JournalArticle article=(JournalArticle)obj;
  long classPK=article.getId();
  if (!PropsValues.JOURNAL_ARTICLE_INDEX_ALL_VERSIONS && (JournalArticleLocalServiceUtil.getArticlesCount(article.getGroupId(),article.getArticleId()) > 0)) {
    doReindex(obj);
    return;
  }
  deleteDocument(article.getCompanyId(),classPK);
  if (!article.isApproved()) {
    return;
  }
  JournalArticle latestIndexableArticle=JournalArticleLocalServiceUtil.fetchLatestIndexableArticle(article.getResourcePrimKey());
  if ((latestIndexableArticle == null) || (latestIndexableArticle.getVersion() > article.getVersion())) {
    return;
  }
  SearchEngineUtil.updateDocument(getSearchEngineId(),article.getCompanyId(),getDocument(latestIndexableArticle),isCommitImmediately());
}
