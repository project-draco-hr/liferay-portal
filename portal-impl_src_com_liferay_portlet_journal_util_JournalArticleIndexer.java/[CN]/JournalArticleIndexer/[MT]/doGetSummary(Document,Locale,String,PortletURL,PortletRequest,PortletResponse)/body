{
  String prefix=Field.SNIPPET + StringPool.UNDERLINE;
  Locale snippetLocale=getSnippetLocale(document,locale);
  if (snippetLocale == null) {
    String[] availableLanguageIds=document.getValues("availableLanguageIds");
    String localizedAssetCategoryTitlesName=prefix + DocumentImpl.getLocalizedName(locale,Field.ASSET_CATEGORY_TITLES);
    if ((document.getField(localizedAssetCategoryTitlesName) != null) && ArrayUtil.contains(availableLanguageIds,LocaleUtil.toLanguageId(locale))) {
      snippetLocale=locale;
    }
 else {
      snippetLocale=LocaleUtil.fromLanguageId(document.get("defaultLanguageId"));
    }
  }
  String title=document.get(snippetLocale,prefix + Field.TITLE,Field.TITLE);
  String content=getDDMContentSummary(document,snippetLocale,portletRequest,portletResponse);
  String articleId=document.get(Field.ARTICLE_ID);
  String groupId=document.get(Field.GROUP_ID);
  String version=document.get(Field.VERSION);
  portletURL.setParameter("struts_action","/journal/edit_article");
  portletURL.setParameter("groupId",groupId);
  portletURL.setParameter("articleId",articleId);
  portletURL.setParameter("version",version);
  return new Summary(snippetLocale,title,content,portletURL);
}
