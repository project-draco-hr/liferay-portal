{
  Collection<Document> documents=new ArrayList<>();
  List<JournalArticle> articles=null;
  if (PropsValues.JOURNAL_ARTICLE_INDEX_ALL_VERSIONS) {
    articles=JournalArticleLocalServiceUtil.getIndexableArticlesByResourcePrimKey(article.getResourcePrimKey());
  }
 else {
    articles=new ArrayList<>();
    JournalArticle latestIndexableArticle=JournalArticleLocalServiceUtil.fetchLatestArticle(article.getResourcePrimKey(),new int[]{WorkflowConstants.STATUS_APPROVED,WorkflowConstants.STATUS_IN_TRASH});
    if ((latestIndexableArticle != null) && latestIndexableArticle.isIndexable()) {
      articles.add(latestIndexableArticle);
    }
  }
  for (  JournalArticle curArticle : articles) {
    Document document=getDocument(curArticle);
    documents.add(document);
  }
  return documents;
}
