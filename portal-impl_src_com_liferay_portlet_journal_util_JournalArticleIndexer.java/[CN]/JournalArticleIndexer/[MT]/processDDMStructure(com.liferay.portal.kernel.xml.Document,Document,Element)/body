{
  LinkedList<Element> queue=new LinkedList<Element>(rootElement.elements());
  Element element=null;
  while ((element=queue.poll()) != null) {
    String elName=element.attributeValue("name",StringPool.BLANK);
    String elType=element.attributeValue("type",StringPool.BLANK);
    String elIndexType=element.attributeValue("index-type",StringPool.BLANK);
    if (ddmStructureDocument != null) {
      String path=element.getPath();
      path=path.concat("[@name=").concat(HtmlUtil.escapeXPathAttribute(elName)).concat("]");
      Node ddmStructureNode=ddmStructureDocument.selectSingleNode(path);
      if (ddmStructureNode != null) {
        Element ddmStructureElement=(Element)ddmStructureNode;
        elType=ddmStructureElement.attributeValue("type",StringPool.BLANK);
        elIndexType=ddmStructureElement.attributeValue("indexType",StringPool.BLANK);
      }
    }
    if (Validator.isNotNull(elType)) {
      indexField(document,element,elType,elIndexType);
    }
    queue.addAll(element.elements());
  }
}
