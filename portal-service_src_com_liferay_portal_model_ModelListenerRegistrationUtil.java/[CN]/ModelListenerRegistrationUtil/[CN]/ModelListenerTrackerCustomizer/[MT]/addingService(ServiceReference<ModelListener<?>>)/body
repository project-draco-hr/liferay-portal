{
  Registry registry=RegistryUtil.getRegistry();
  ModelListener<?> modelListener=registry.getService(serviceReference);
  Class<?> key=ReflectionUtil.getGenericSuperType(service.getClass());
  List<ModelListener<?>> list=_modelListenerMap.get(key);
  if (list == null) {
    list=new ArrayList<ModelListener<?>>();
    List<ModelListener<?>> previousList=_modelListenerMap.putIfAbsent(key,list);
    if (previousList != null) {
      list=previousList;
    }
  }
  list.add(modelListener);
  return modelListener;
}
