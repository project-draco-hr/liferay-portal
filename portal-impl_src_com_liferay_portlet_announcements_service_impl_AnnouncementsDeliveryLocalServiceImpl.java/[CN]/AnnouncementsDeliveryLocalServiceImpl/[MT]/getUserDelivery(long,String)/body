{
  AnnouncementsDelivery delivery=announcementsDeliveryPersistence.fetchByU_T(userId,type);
  if (delivery == null) {
    User user=userPersistence.findByPrimaryKey(userId);
    long deliveryId=counterLocalService.increment();
    delivery=announcementsDeliveryPersistence.create(deliveryId);
    delivery.setCompanyId(user.getCompanyId());
    delivery.setUserId(user.getUserId());
    delivery.setType(type);
    delivery.setEmail(false);
    delivery.setSms(false);
    delivery.setWebsite(true);
    announcementsDeliveryPersistence.update(delivery,false);
  }
  return delivery;
}
