{
  boolean result=false;
  try {
    String xml=readText(fileName);
    Document document=SAXReaderUtil.read(xml);
    List<Node> structureNodes=document.selectNodes("//structure");
    for (    Node structureNode : structureNodes) {
      String structureXML=structureNode.asXML();
      Document structureDocument=SAXReaderUtil.read(structureXML);
      Element rootElement=(Element)structureDocument.selectSingleNode("/structure/root");
      Attribute defaultLocale=rootElement.attribute("default-locale");
      Locale contentDefaultLocale=LocaleUtil.fromLanguageId(defaultLocale.getValue());
      Locale availableDefaultLocale=LocaleUtil.fromLanguageId("es_ES");
      String rootXML=rootElement.asXML();
      structureXML=DDMXMLUtil.updateXMLDefaultLocale(rootXML,contentDefaultLocale,availableDefaultLocale);
      Document updatedXMLDocument=SAXReaderUtil.read(structureXML);
      rootElement=updatedXMLDocument.getRootElement();
      result=checkLocale(rootElement,LocaleUtil.toLanguageId(availableDefaultLocale));
    }
    Assert.assertTrue(result);
  }
 catch (  DocumentException de) {
    Assert.fail("Test failed because the Document is not well-formed: " + de.getMessage());
  }
catch (  IOException ioe) {
    Assert.fail("Test failed because an I/O error: " + ioe.getMessage());
  }
}
