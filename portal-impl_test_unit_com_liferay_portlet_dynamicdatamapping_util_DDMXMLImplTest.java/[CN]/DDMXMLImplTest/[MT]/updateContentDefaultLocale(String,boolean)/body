{
  try {
    String xml=readXML(fileName);
    Document document=SAXReaderUtil.read(xml);
    List<Node> structureNodes=document.selectNodes("//structure");
    for (    Node structureNode : structureNodes) {
      String structureXML=structureNode.asXML();
      Document structureDocument=SAXReaderUtil.read(structureXML);
      Element rootElement=(Element)structureDocument.selectSingleNode("/structure/root");
      Attribute defaultLocale=rootElement.attribute("default-locale");
      Locale contentDefaultLocale=LocaleUtil.fromLanguageId(defaultLocale.getValue());
      Locale availableDefaultLocale=LocaleUtil.fromLanguageId("es_ES");
      String rootXML=rootElement.asXML();
      structureXML=DDMXMLUtil.updateXMLDefaultLocale(rootXML,contentDefaultLocale,availableDefaultLocale);
      Document updatedXMLDocument=SAXReaderUtil.read(structureXML);
      rootElement=updatedXMLDocument.getRootElement();
      if (checkLocale(rootElement,LocaleUtil.toLanguageId(availableDefaultLocale))) {
        Assert.assertTrue(expectedResult);
        return;
      }
    }
    Assert.assertFalse(expectedResult);
  }
 catch (  DocumentException de) {
    Assert.fail(de.getMessage());
  }
catch (  IOException ioe) {
    Assert.fail(ioe.getMessage());
  }
}
