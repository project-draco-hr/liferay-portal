{
  HttpServletRequest request=liferayPortletRequest.getHttpServletRequest();
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  if (!JournalPermission.contains(themeDisplay.getPermissionChecker(),themeDisplay.getScopeGroupId(),ActionKeys.ADD_ARTICLE)) {
    return null;
  }
  long classTypeId=GetterUtil.getLong((String)liferayPortletRequest.getAttribute("classTypeId"));
  if ((classTypeId > 0) && (!JournalStructurePermission.contains(themeDisplay.getPermissionChecker(),classTypeId,ActionKeys.VIEW))) {
    return null;
  }
  PortletURL portletURL=PortletURLFactoryUtil.create(request,PortletKeys.JOURNAL,getControlPanelPlid(themeDisplay),PortletRequest.RENDER_PHASE);
  portletURL.setParameter("struts_action","/journal/edit_article");
  return portletURL;
}
