{
  StringBundler sb=new StringBundler();
  sb.append(" AND (");
  long[] roleIds=getRoleIds(groupId);
  if (roleIds.length == 0) {
    roleIds=_NO_ROLE_IDS;
  }
  for (int i=0; i < roleIds.length; i++) {
    if (i > 0) {
      sb.append(" OR ");
    }
    sb.append("InlineSQLResourcePermission.roleId = ");
    sb.append(roleIds[i]);
  }
  if (permissionChecker.isSignedIn()) {
    sb.append(" OR ");
    long userId=permissionChecker.getUserId();
    if (Validator.isNotNull(userIdField)) {
      sb.append(StringPool.OPEN_PARENTHESIS);
      sb.append(userIdField);
      sb.append(" = ");
      sb.append(userId);
      sb.append(StringPool.CLOSE_PARENTHESIS);
    }
 else {
      sb.append("(InlineSQLResourcePermission.ownerId = ");
      sb.append(userId);
      sb.append(StringPool.CLOSE_PARENTHESIS);
    }
  }
  sb.append(StringPool.CLOSE_PARENTHESIS);
  return sb.toString();
}
