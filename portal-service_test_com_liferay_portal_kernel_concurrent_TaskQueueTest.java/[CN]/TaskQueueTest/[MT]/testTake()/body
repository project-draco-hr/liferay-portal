{
  final TaskQueue taskQueue=new TaskQueue();
  final Object object=new Object();
  assertTrue(taskQueue.offer(object,new boolean[1]));
  assertSame(object,taskQueue.take());
  long startTime=System.currentTimeMillis();
  new Thread(){
    public void run(){
      try {
        Thread.sleep(100);
      }
 catch (      InterruptedException ex) {
      }
      assertTrue(taskQueue.offer(object,new boolean[1]));
    }
  }
.start();
  assertSame(object,taskQueue.take());
  assertTrue(System.currentTimeMillis() - startTime > 100);
  startTime=System.currentTimeMillis();
  new Thread(){
    public void run(){
      try {
        Thread.sleep(100);
      }
 catch (      InterruptedException ex) {
      }
      assertTrue(taskQueue.offer(object,new boolean[1]));
      assertTrue(taskQueue.offer(object,new boolean[1]));
    }
  }
.start();
  assertSame(object,taskQueue.take());
  assertTrue(System.currentTimeMillis() - startTime > 100);
}
