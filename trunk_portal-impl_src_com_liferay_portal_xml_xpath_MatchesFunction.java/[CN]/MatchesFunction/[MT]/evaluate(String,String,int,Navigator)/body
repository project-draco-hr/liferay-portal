{
  ThreadLocalCache<Map<String,Pattern>> threadLocalPatterns=ThreadLocalCacheManager.getThreadLocalCache(Lifecycle.ETERNAL,MatchesFunction.class.getName());
  Map<String,Pattern> patterns=threadLocalPatterns.get(_THREAD_LOCAL_PATTERNS_KEY);
  if (patterns == null) {
    patterns=new HashMap<String,Pattern>();
  }
  Pattern pattern=patterns.get(regex);
  if (pattern != null) {
    Matcher matcher=pattern.matcher(string);
    return matcher.find();
  }
  pattern=Pattern.compile(regex,flags);
  patterns.put(regex,pattern);
  threadLocalPatterns.put(_THREAD_LOCAL_PATTERNS_KEY,patterns);
  Matcher matcher=pattern.matcher(string);
  return matcher.find();
}
