{
  if (_categoriesSearchContainer != null) {
    return _categoriesSearchContainer;
  }
  SearchContainer categoriesSearchContainer=new SearchContainer(_renderRequest,getIteratorURL(),null,"there-are-no-categories.-you-can-add-a-category-by-clicking-the" + "-plus-button-on-the-bottom-right-corner");
  categoriesSearchContainer.setSearch(Validator.isNotNull(getKeywords()));
  categoriesSearchContainer.setOrderByCol(getOrderByCol());
  boolean orderByAsc=false;
  String orderByType=getOrderByType();
  if (orderByType.equals("asc")) {
    orderByAsc=true;
  }
  OrderByComparator<AssetCategory> orderByComparator=new AssetCategoryCreateDateComparator(orderByAsc);
  categoriesSearchContainer.setOrderByComparator(orderByComparator);
  categoriesSearchContainer.setOrderByType(orderByType);
  EmptyOnClickRowChecker rowChecker=new EmptyOnClickRowChecker(_renderResponse);
  StringBundler sb=new StringBundler(7);
  sb.append("^(?!.*");
  sb.append(_renderResponse.getNamespace());
  sb.append("redirect).*(/vocabulary/");
  sb.append(getVocabularyId());
  sb.append("/category/");
  sb.append(getCategoryId());
  sb.append(")");
  rowChecker.setRememberCheckBoxStateURLRegex(sb.toString());
  categoriesSearchContainer.setRowChecker(rowChecker);
  List<AssetCategory> categories=null;
  int categoriesCount=0;
  ThemeDisplay themeDisplay=(ThemeDisplay)_request.getAttribute(WebKeys.THEME_DISPLAY);
  long scopeGroupId=themeDisplay.getScopeGroupId();
  if (Validator.isNotNull(getKeywords())) {
    Sort sort=new Sort("createDate",Sort.LONG_TYPE,orderByAsc);
    AssetCategoryDisplay assetCategoryDisplay=AssetCategoryServiceUtil.searchCategoriesDisplay(scopeGroupId,getKeywords(),getVocabularyId(),getCategoryId(),categoriesSearchContainer.getStart(),categoriesSearchContainer.getEnd(),sort);
    categoriesCount=assetCategoryDisplay.getTotal();
    categoriesSearchContainer.setTotal(categoriesCount);
    categories=assetCategoryDisplay.getCategories();
  }
 else {
    categoriesCount=AssetCategoryServiceUtil.getVocabularyCategoriesCount(scopeGroupId,getCategoryId(),getVocabularyId());
    categoriesSearchContainer.setTotal(categoriesCount);
    categories=AssetCategoryServiceUtil.getVocabularyCategories(scopeGroupId,getCategoryId(),getVocabularyId(),categoriesSearchContainer.getStart(),categoriesSearchContainer.getEnd(),categoriesSearchContainer.getOrderByComparator());
  }
  categoriesSearchContainer.setResults(categories);
  _categoriesSearchContainer=categoriesSearchContainer;
  return _categoriesSearchContainer;
}
