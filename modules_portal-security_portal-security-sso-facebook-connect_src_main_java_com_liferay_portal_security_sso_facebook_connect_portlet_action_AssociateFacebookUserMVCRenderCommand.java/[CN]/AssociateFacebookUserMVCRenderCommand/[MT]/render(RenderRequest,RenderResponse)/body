{
  ThemeDisplay themeDisplay=(ThemeDisplay)renderRequest.getAttribute(WebKeys.THEME_DISPLAY);
  if (!_facebookConnect.isEnabled(themeDisplay.getCompanyId())) {
    throw new PortletException(new PrincipalException.MustBeEnabled(themeDisplay.getCompanyId(),FacebookConnect.class.getName()));
  }
  long facebookIncompleteUserId=ParamUtil.getLong(renderRequest,"userId");
  if (!Validator.isNull(facebookIncompleteUserId)) {
    User user=_userLocalService.fetchUser(facebookIncompleteUserId);
    return renderUpdateAccount(renderRequest,user);
  }
  return "/login.jsp";
}
