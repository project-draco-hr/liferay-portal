{
  JSONObject jo=new JSONObject();
  try {
    String email=ParamUtil.getString(req,"email");
    String userId=ParamUtil.getString(req,"userId");
    String companyId=PortalUtil.getCompanyId(req);
    User user;
    if (Validator.isNotNull(userId)) {
      user=UserLocalServiceUtil.getUserById(companyId,userId);
    }
 else {
      user=UserLocalServiceUtil.getUserByEmailAddress(companyId,email);
    }
    jo=MessagingUtil.addRosterEntry(req.getSession(),user);
  }
 catch (  Exception e) {
    jo.put("status","failure");
  }
  return jo;
}
