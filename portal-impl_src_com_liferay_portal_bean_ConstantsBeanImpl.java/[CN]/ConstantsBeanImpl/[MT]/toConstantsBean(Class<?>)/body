{
  Reference<?> constantsBeanReference=constantsBeans.get(new EqualityWeakReference<Class<?>>(constantsClass));
  Object constantsBean=null;
  if (constantsBeanReference != null) {
    constantsBean=constantsBeanReference.get();
  }
  if (constantsBean == null) {
    constantsBean=createConstantsBean(constantsClass);
    constantsBeans.put(new EqualityWeakReference<Class<?>>(constantsClass,constantsClassReferenceQueue),new WeakReference<Object>(constantsBean));
  }
  while (true) {
    EqualityWeakReference<Class<?>> staleConstantsClassReference=(EqualityWeakReference<Class<?>>)constantsClassReferenceQueue.poll();
    if (staleConstantsClassReference == null) {
      break;
    }
    constantsBeans.remove(staleConstantsClassReference);
  }
  return constantsBean;
}
