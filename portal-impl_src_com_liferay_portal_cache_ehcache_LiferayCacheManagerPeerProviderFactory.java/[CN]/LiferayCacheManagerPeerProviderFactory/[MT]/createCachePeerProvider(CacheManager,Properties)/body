{
  String portalPropertyKey=properties.getProperty("portalPropertyKey");
  if (Validator.isNull(portalPropertyKey)) {
    throw new RuntimeException("portalPropertyKey is null");
  }
  String[] portalPropertiesArray=PropsUtil.getArray(portalPropertyKey);
  if (_log.isInfoEnabled()) {
    _log.info("portalPropertyKey " + portalPropertyKey + " has value "+ Arrays.toString(portalPropertiesArray));
  }
  Properties portalProperties=new Properties();
  for (  String portalProperty : portalPropertiesArray) {
    String[] elements=StringUtil.split(portalProperty,CharPool.EQUAL);
    if (elements.length != 2) {
      if (_log.isWarnEnabled()) {
        _log.warn("Ignore deformed property :" + portalProperty);
      }
    }
    portalProperties.put(elements[0],_htmlUtil.unescape(elements[1]));
  }
  if (_log.isDebugEnabled()) {
    _log.debug(PropertiesUtil.list(portalProperties));
  }
  return _cacheManagerPeerProviderFactory.createCachePeerProvider(cacheManager,portalProperties);
}
