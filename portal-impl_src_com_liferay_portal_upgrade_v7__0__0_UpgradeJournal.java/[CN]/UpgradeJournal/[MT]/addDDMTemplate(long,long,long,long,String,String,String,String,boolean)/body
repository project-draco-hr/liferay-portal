{
  Timestamp now=new Timestamp(System.currentTimeMillis());
  Connection con=null;
  PreparedStatement ps=null;
  try {
    con=DataAccess.getUpgradeOptimizedConnection();
    StringBundler sb=new StringBundler(6);
    sb.append("insert into DDMTemplate (uuid_, templateId, groupId, ");
    sb.append("companyId, userId, userName, createDate, modifiedDate,");
    sb.append("classNameId, classPK , templateKey, name, description,");
    sb.append("type_, mode_, language, script, cacheable, smallImage,");
    sb.append("smallImageId, smallImageURL) values (?, ?, ?, ?, ?, ?,");
    sb.append("?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)");
    String sql=sb.toString();
    ps=con.prepareStatement(sql);
    ps.setString(1,PortalUUIDUtil.generate());
    ps.setLong(2,ddmTemplateId);
    ps.setLong(3,groupId);
    ps.setLong(4,companyId);
    ps.setLong(5,getDefaultUserId(companyId));
    ps.setString(6,StringPool.BLANK);
    ps.setTimestamp(7,now);
    ps.setTimestamp(8,now);
    ps.setLong(9,PortalUtil.getClassNameId(DDMStructure.class));
    ps.setLong(10,ddmStructureId);
    ps.setString(11,templateKey);
    ps.setString(12,localizedName);
    ps.setString(13,localizedDescription);
    ps.setString(14,DDMTemplateConstants.TEMPLATE_TYPE_DISPLAY);
    ps.setString(15,DDMTemplateConstants.TEMPLATE_MODE_CREATE);
    ps.setString(16,TemplateConstants.LANG_TYPE_FTL);
    ps.setString(17,script);
    ps.setBoolean(18,cacheable);
    ps.setBoolean(19,false);
    ps.setLong(20,0);
    ps.setString(21,StringPool.BLANK);
    ps.executeUpdate();
    Map<String,Long> bitwiseValues=getBitwiseValues(DDMTemplate.class.getName());
    List<String> actionIds=new ArrayList<String>();
    actionIds.add(ActionKeys.VIEW);
    long bitwiseValue=getBitwiseValue(bitwiseValues,actionIds);
    addResourcePermission(companyId,DDMTemplate.class.getName(),ddmTemplateId,getRoleId(companyId,RoleConstants.GUEST),bitwiseValue);
    addResourcePermission(companyId,DDMTemplate.class.getName(),ddmTemplateId,getRoleId(companyId,RoleConstants.SITE_MEMBER),bitwiseValue);
  }
 catch (  Exception e) {
    _log.error("Unable to create the basic web content template");
    throw e;
  }
 finally {
    DataAccess.cleanUp(con,ps);
  }
  return ddmTemplateId;
}
