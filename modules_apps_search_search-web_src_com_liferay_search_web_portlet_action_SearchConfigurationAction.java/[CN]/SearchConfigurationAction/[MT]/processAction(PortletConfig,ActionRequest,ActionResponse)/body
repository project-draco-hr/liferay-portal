{
  JSONArray newFacetsJSONArray=JSONFactoryUtil.createJSONArray();
  for (  SearchFacet searchFacet : _searchFacetTracker.getSearchFacets()) {
    boolean displaySearchFacet=GetterUtil.getBoolean(getParameter(actionRequest,searchFacet.getClassName()));
    if (displaySearchFacet) {
      newFacetsJSONArray.put(StringPool.BLANK);
    }
  }
  JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
  jsonObject.put("facets",newFacetsJSONArray);
  setPreference(actionRequest,"searchConfiguration",jsonObject.toString());
  super.processAction(portletConfig,actionRequest,actionResponse);
}
