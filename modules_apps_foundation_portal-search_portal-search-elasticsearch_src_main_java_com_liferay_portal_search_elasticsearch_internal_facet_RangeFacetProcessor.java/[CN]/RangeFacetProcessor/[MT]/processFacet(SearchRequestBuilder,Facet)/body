{
  FacetConfiguration facetConfiguration=facet.getFacetConfiguration();
  JSONObject jsonObject=facetConfiguration.getData();
  JSONArray jsonArray=jsonObject.getJSONArray("ranges");
  SearchContext searchContext=facet.getSearchContext();
  Serializable modified=searchContext.getAttribute("modified");
  if ((jsonArray == null) && Validator.isNull(modified)) {
    return;
  }
  DefaultRangeBuilder defaultRangeBuilder=new DefaultRangeBuilder(facetConfiguration.getFieldName());
  defaultRangeBuilder.field(facetConfiguration.getFieldName());
  for (int i=0; i < jsonArray.length(); i++) {
    JSONObject rangeJSONObject=jsonArray.getJSONObject(i);
    addRange(defaultRangeBuilder,rangeJSONObject.getString("range"));
  }
  if (Validator.isNotNull(modified)) {
    addRange(defaultRangeBuilder,GetterUtil.getString(modified));
  }
  searchRequestBuilder.addAggregation(defaultRangeBuilder);
}
