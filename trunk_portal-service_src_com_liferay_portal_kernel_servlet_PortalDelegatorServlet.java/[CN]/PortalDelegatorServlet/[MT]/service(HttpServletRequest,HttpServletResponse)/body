{
  String uri=request.getPathInfo();
  if ((uri == null) || (uri.length() == 0)) {
    throw new ServletException("Path information is not specified");
  }
  String[] paths=uri.split(StringPool.SLASH);
  if (paths.length < 2) {
    throw new ServletException("Path " + uri + " is invalid");
  }
  HttpServlet delegate=_delegates.get(paths[1]);
  if (delegate == null) {
    throw new ServletException("No servlet registred for context " + paths[1]);
  }
  Thread currentThread=Thread.currentThread();
  ClassLoader contextClassLoader=currentThread.getContextClassLoader();
  try {
    ClassLoader delegateClassLoader=delegate.getClass().getClassLoader();
    currentThread.setContextClassLoader(delegateClassLoader);
    delegate.service(request,response);
  }
  finally {
    currentThread.setContextClassLoader(contextClassLoader);
  }
}
