{
  String xml=null;
  Locale[] locales=LanguageUtil.getAvailableLocales();
  Locale defaultLocale=LocaleUtil.getDefault();
  String defaultLanguageId=LocaleUtil.toLanguageId(defaultLocale);
  for (  Locale locale : locales) {
    String languageId=LocaleUtil.toLanguageId(locale);
    String localParameter=parameter + StringPool.UNDERLINE + languageId;
    String value=PrefsParamUtil.getString(preferences,portletRequest,localParameter,null);
    if (value != null) {
      xml=updateLocalization(xml,parameter,value,languageId);
    }
  }
  if (getLocalization(xml,defaultLanguageId,true,null) == null) {
    String oldValue=PrefsParamUtil.getString(preferences,portletRequest,parameter,defaultValue);
    if (Validator.isNotNull(oldValue)) {
      xml=updateLocalization(xml,parameter,oldValue);
    }
  }
  return xml;
}
