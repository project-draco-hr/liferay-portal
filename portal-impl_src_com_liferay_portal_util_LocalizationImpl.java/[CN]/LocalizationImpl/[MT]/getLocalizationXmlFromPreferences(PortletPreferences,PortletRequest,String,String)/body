{
  String xml=StringPool.BLANK;
  Locale[] locales=LanguageUtil.getAvailableLocales();
  Locale defaultLocale=LocaleUtil.getDefault();
  String defaultLanguageId=LocaleUtil.toLanguageId(defaultLocale);
  for (  Locale locale : locales) {
    String languageId=LocaleUtil.toLanguageId(locale);
    String localParameter=parameter + StringPool.UNDERLINE + languageId;
    String value=PrefsParamUtil.getString(preferences,portletRequest,localParameter,defaultValue);
    if (Validator.isNotNull(value)) {
      xml=updateLocalization(xml,parameter,value,languageId);
    }
  }
  if (Validator.isNull(getLocalization(xml,defaultLanguageId))) {
    String oldValue=PrefsParamUtil.getString(preferences,portletRequest,parameter,defaultValue);
    if (Validator.isNotNull(oldValue)) {
      xml=updateLocalization(xml,parameter,oldValue);
    }
  }
  return xml;
}
