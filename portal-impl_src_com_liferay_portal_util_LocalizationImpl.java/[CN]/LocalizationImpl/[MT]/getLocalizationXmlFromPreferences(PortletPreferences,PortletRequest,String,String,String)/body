{
  String xml=null;
  Locale[] locales=LanguageUtil.getAvailableLocales();
  Locale defaultLocale=LocaleUtil.getSiteDefault();
  String defaultLanguageId=LocaleUtil.toLanguageId(defaultLocale);
  for (  Locale locale : locales) {
    String languageId=LocaleUtil.toLanguageId(locale);
    String localizedKey=getLocalizedName(parameter,languageId);
    String prefixedLocalizedKey=localizedKey;
    if (Validator.isNotNull(prefix)) {
      prefixedLocalizedKey=prefix + "--" + localizedKey+ "--";
    }
    String value=ParamUtil.getString(portletRequest,prefixedLocalizedKey,preferences.getValue(localizedKey,null));
    if (value != null) {
      xml=updateLocalization(xml,parameter,value,languageId);
    }
  }
  if (getLocalization(xml,defaultLanguageId,true,null) == null) {
    String oldValue=PrefsParamUtil.getString(preferences,portletRequest,parameter,defaultValue);
    if (Validator.isNotNull(oldValue)) {
      xml=updateLocalization(xml,parameter,oldValue);
    }
  }
  return xml;
}
