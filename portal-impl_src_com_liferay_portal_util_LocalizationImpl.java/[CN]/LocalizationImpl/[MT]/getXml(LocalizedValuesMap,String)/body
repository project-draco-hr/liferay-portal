{
  XMLStreamWriter xmlStreamWriter=null;
  try {
    UnsyncStringWriter unsyncStringWriter=new UnsyncStringWriter();
    XMLOutputFactory xmlOutputFactory=XMLOutputFactory.newInstance();
    xmlStreamWriter=xmlOutputFactory.createXMLStreamWriter(unsyncStringWriter);
    xmlStreamWriter.writeStartDocument();
    xmlStreamWriter.writeStartElement("root");
    Set<Locale> availableLocales=LanguageUtil.getAvailableLocales();
    xmlStreamWriter.writeAttribute("available-locales",StringUtil.merge(availableLocales));
    Locale defaultLocale=LocaleUtil.getSiteDefault();
    xmlStreamWriter.writeAttribute("default-locale",defaultLocale.toString());
    for (    Locale locale : availableLocales) {
      String value=localizedValuesMap.get(locale);
      if (value != null) {
        xmlStreamWriter.writeStartElement(key);
        xmlStreamWriter.writeAttribute("language-id",locale.toString());
        xmlStreamWriter.writeCharacters(value);
        xmlStreamWriter.writeEndElement();
      }
    }
    xmlStreamWriter.writeEndElement();
    xmlStreamWriter.writeEndDocument();
    return unsyncStringWriter.toString();
  }
 catch (  XMLStreamException xmlse) {
    throw new RuntimeException(xmlse);
  }
 finally {
    _close(xmlStreamWriter);
  }
}
