{
  DDLRecord record=_ddlRecordLocalService.fetchDDLRecord(classPK);
  DDLRecordVersion recordVersion=null;
  if (Validator.isNull(record)) {
    recordVersion=_ddlRecordVersionLocalService.getRecordVersion(classPK);
    record=recordVersion.getRecord();
  }
 else {
    if (type == TYPE_LATEST) {
      recordVersion=record.getLatestRecordVersion();
    }
 else     if (type == TYPE_LATEST_APPROVED) {
      recordVersion=record.getRecordVersion();
    }
 else {
      throw new IllegalArgumentException("Unknown asset renderer type " + type);
    }
  }
  DDLRecordAssetRenderer ddlRecordAssetRenderer=new DDLRecordAssetRenderer(record,recordVersion);
  ddlRecordAssetRenderer.setAssetRendererType(type);
  ddlRecordAssetRenderer.setServletContext(_servletContext);
  return ddlRecordAssetRenderer;
}
