{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  request.setAttribute("liferay-ui:navigation:bulletStyle",_bulletStyle);
  request.setAttribute("liferay-ui:navigation:headerType",getHeaderType());
  request.setAttribute("liferay-ui:navigation:preview",String.valueOf(_preview));
  request.setAttribute("liferay-ui:navigation:navigationString",getNavigationString(themeDisplay));
  try {
    List<Layout> branchLayouts=getBranchLayouts(themeDisplay.getLayout());
    request.setAttribute("liferay-ui:navigation:rootLayout",getRootLayout(branchLayouts));
  }
 catch (  PortalException e) {
    _log.error(e);
  }
}
