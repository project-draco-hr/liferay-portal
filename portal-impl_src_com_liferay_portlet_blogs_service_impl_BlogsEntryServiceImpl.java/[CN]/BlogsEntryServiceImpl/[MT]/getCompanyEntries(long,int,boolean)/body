{
  List<BlogsEntry> entries=new ArrayList<BlogsEntry>();
  int lastIntervalStart=0;
  boolean listNotExhausted=true;
  while ((entries.size() < max) && listNotExhausted) {
    List<BlogsEntry> entryList;
    if (onlyPublished) {
      entryList=blogsEntryLocalService.getPublishedCompanyEntries(companyId,false,lastIntervalStart,lastIntervalStart + max,new EntryDisplayDateComparator());
    }
 else {
      entryList=blogsEntryLocalService.getCompanyEntries(companyId,false,lastIntervalStart,lastIntervalStart + max,new EntryDisplayDateComparator());
    }
    Iterator<BlogsEntry> itr=entryList.iterator();
    lastIntervalStart+=max;
    listNotExhausted=(entryList.size() == max);
    while (itr.hasNext() && (entries.size() < max)) {
      BlogsEntry entry=itr.next();
      if (BlogsEntryPermission.contains(getPermissionChecker(),entry,ActionKeys.VIEW)) {
        entries.add(entry);
      }
    }
  }
  return entries;
}
