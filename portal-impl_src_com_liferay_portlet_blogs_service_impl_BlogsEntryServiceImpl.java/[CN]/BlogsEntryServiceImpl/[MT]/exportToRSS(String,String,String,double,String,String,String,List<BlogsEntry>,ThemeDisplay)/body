{
  SyndFeed syndFeed=new SyndFeedImpl();
  syndFeed.setDescription(description);
  List<SyndEntry> syndEntries=new ArrayList<SyndEntry>();
  syndFeed.setEntries(syndEntries);
  for (  BlogsEntry entry : blogsEntries) {
    SyndEntry syndEntry=new SyndEntryImpl();
    String author=PortalUtil.getUserName(entry);
    syndEntry.setAuthor(author);
    SyndContent syndContent=new SyndContentImpl();
    syndContent.setType(RSSUtil.ENTRY_TYPE_DEFAULT);
    String value=null;
    if (displayStyle.equals(RSSUtil.DISPLAY_STYLE_ABSTRACT)) {
      String summary=entry.getDescription();
      if (Validator.isNull(summary)) {
        summary=entry.getContent();
      }
      value=StringUtil.shorten(HtmlUtil.extractText(summary),PropsValues.BLOGS_RSS_ABSTRACT_LENGTH,StringPool.BLANK);
    }
 else     if (displayStyle.equals(RSSUtil.DISPLAY_STYLE_TITLE)) {
      value=StringPool.BLANK;
    }
 else {
      value=StringUtil.replace(entry.getContent(),new String[]{"href=\"/","src=\"/"},new String[]{"href=\"" + themeDisplay.getURLPortal() + "/","src=\"" + themeDisplay.getURLPortal() + "/"});
    }
    syndContent.setValue(value);
    syndEntry.setDescription(syndContent);
    StringBundler sb=new StringBundler(4);
    if (entryURL.endsWith("/blogs/rss")) {
      sb.append(entryURL.substring(0,entryURL.length() - 3));
      sb.append(entry.getUrlTitle());
    }
 else {
      sb.append(entryURL);
      if (!entryURL.endsWith(StringPool.QUESTION)) {
        sb.append(StringPool.AMPERSAND);
      }
      sb.append("entryId=");
      sb.append(entry.getEntryId());
    }
    String link=sb.toString();
    syndEntry.setLink(link);
    syndEntry.setPublishedDate(entry.getCreateDate());
    syndEntry.setTitle(entry.getTitle());
    syndEntry.setUpdatedDate(entry.getModifiedDate());
    syndEntry.setUri(link);
    syndEntries.add(syndEntry);
  }
  syndFeed.setFeedType(RSSUtil.getFeedType(type,version));
  syndFeed.setLink(feedURL);
  syndFeed.setPublishedDate(new Date());
  syndFeed.setTitle(name);
  syndFeed.setUri(feedURL);
  try {
    return RSSUtil.export(syndFeed);
  }
 catch (  FeedException fe) {
    throw new SystemException(fe);
  }
}
