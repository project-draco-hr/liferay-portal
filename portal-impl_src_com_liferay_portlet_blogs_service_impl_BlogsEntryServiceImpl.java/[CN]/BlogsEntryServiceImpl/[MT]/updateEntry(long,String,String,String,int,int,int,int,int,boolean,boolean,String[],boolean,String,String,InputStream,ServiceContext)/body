{
  BlogsPermission.check(getPermissionChecker(),serviceContext.getScopeGroupId(),ActionKeys.UPDATE);
  ImageSelector coverImageImageSelector=null;
  ImageSelector smallImageImageSelector=null;
  if (smallImage && Validator.isNotNull(smallImageFileName) && (smallImageInputStream != null)) {
    try {
      byte[] bytes=FileUtil.getBytes(smallImageInputStream);
      smallImageImageSelector=new ImageSelector(bytes,smallImageFileName,MimeTypesUtil.getContentType(smallImageFileName),null);
    }
 catch (    IOException ioe) {
      if (_log.isErrorEnabled()) {
        _log.error("Could not create the imageSelector",ioe);
      }
    }
  }
 else   if (smallImage && Validator.isNotNull(smallImageURL)) {
    smallImageImageSelector=new ImageSelector(smallImageURL);
  }
  return updateEntry(entryId,title,StringPool.BLANK,description,content,displayDateMonth,displayDateDay,displayDateYear,displayDateHour,displayDateMinute,allowPingbacks,allowTrackbacks,trackbacks,StringPool.BLANK,coverImageImageSelector,smallImageImageSelector,serviceContext);
}
