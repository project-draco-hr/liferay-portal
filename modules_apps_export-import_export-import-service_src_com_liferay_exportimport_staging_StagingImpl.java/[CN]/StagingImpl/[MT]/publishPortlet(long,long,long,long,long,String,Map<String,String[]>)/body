{
  User user=UserLocalServiceUtil.getUser(userId);
  Map<String,Serializable> publishPortletSettingsMap=ExportImportConfigurationSettingsMapFactory.buildPublishPortletSettingsMap(userId,sourceGroupId,sourcePlid,targetGroupId,targetPlid,portletId,parameterMap,user.getLocale(),user.getTimeZone());
  ExportImportConfiguration exportImportConfiguration=ExportImportConfigurationLocalServiceUtil.addDraftExportImportConfiguration(userId,ExportImportConfigurationConstants.TYPE_PUBLISH_PORTLET,publishPortletSettingsMap);
  publishPortlet(userId,exportImportConfiguration);
}
