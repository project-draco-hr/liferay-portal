{
  long groupId=ParamUtil.getLong(req,"groupId");
  String articleId=ParamUtil.getString(req,"articleId");
  double version=ParamUtil.getDouble(req,"version");
  String languageId=LanguageUtil.getLanguageId(req);
  String fieldName=ParamUtil.getString(req,"fieldName");
  String fieldData=ParamUtil.getString(req,"fieldData");
  JournalArticle article=JournalArticleLocalServiceUtil.getArticle(groupId,articleId,version);
  String content=article.getContent();
  SAXReader reader=new SAXReader();
  Document doc=reader.read(new StringReader(content));
  if (_log.isDebugEnabled()) {
    _log.debug("Before\n" + content);
  }
  String path="/root/dynamic-element[@name='" + fieldName + "']/dynamic-content[@language-id='"+ languageId+ "']";
  Node node=doc.selectSingleNode(path);
  if (node == null) {
    path="/root/dynamic-element[@name='" + fieldName + "']/dynamic-content";
    node=doc.selectSingleNode(path);
  }
  node.setText(fieldData);
  content=JournalUtil.formatXML(doc);
  if (_log.isDebugEnabled()) {
    _log.debug("After\n" + content);
  }
  JournalArticleServiceUtil.updateContent(groupId,articleId,version,content);
}
