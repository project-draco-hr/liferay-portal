{
  InputStream inputStream=null;
  Bundle bundle=FrameworkUtil.getBundle(clazz);
  Package pkg=clazz.getPackage();
  String packageName=pkg.getName();
  String path=packageName.replaceAll("\\.","/") + "/" + resource;
  try {
    URL url=bundle.getEntry(path);
    inputStream=url.openStream();
    return StringUtil.read(inputStream);
  }
 catch (  IOException ioe) {
    throw new SystemException("Unable to read " + path + " in bundle "+ bundle.getSymbolicName(),ioe);
  }
 finally {
    StreamUtil.cleanUp(inputStream);
  }
}
