{
  InputStream is=null;
  Bundle bundle=FrameworkUtil.getBundle(clazz);
  Package classPackage=clazz.getPackage();
  String packageName=classPackage.getName();
  String path=packageName.replaceAll("\\.","/") + "/" + resource;
  try {
    URL entry=bundle.getEntry(path);
    is=entry.openStream();
    return StringUtil.read(is);
  }
 catch (  IOException e) {
    throw new SystemException("Unable to get content of entry " + path + " in bundle "+ bundle.getSymbolicName(),e);
  }
 finally {
    StreamUtil.cleanUp(is);
  }
}
