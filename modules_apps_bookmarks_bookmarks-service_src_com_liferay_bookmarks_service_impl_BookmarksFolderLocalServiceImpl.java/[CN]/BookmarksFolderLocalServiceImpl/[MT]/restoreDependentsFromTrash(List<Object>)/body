{
  for (  Object object : foldersAndEntries) {
    if (object instanceof BookmarksEntry) {
      BookmarksEntry entry=(BookmarksEntry)object;
      if (!entry.isInTrashImplicitly()) {
        continue;
      }
      TrashVersion trashVersion=trashVersionLocalService.fetchVersion(BookmarksEntry.class.getName(),entry.getEntryId());
      int oldStatus=WorkflowConstants.STATUS_APPROVED;
      if (trashVersion != null) {
        oldStatus=trashVersion.getStatus();
      }
      entry.setStatus(oldStatus);
      bookmarksEntryPersistence.update(entry);
      if (trashVersion != null) {
        trashVersionLocalService.deleteTrashVersion(trashVersion);
      }
      if (oldStatus == WorkflowConstants.STATUS_APPROVED) {
        assetEntryLocalService.updateVisible(BookmarksEntry.class.getName(),entry.getEntryId(),true);
      }
      Indexer<BookmarksEntry> indexer=IndexerRegistryUtil.nullSafeGetIndexer(BookmarksEntry.class);
      indexer.reindex(entry);
    }
 else     if (object instanceof BookmarksFolder) {
      BookmarksFolder folder=(BookmarksFolder)object;
      if (!folder.isInTrashImplicitly()) {
        continue;
      }
      TrashVersion trashVersion=trashVersionLocalService.fetchVersion(BookmarksFolder.class.getName(),folder.getFolderId());
      int oldStatus=WorkflowConstants.STATUS_APPROVED;
      if (trashVersion != null) {
        oldStatus=trashVersion.getStatus();
      }
      folder.setStatus(oldStatus);
      bookmarksFolderPersistence.update(folder);
      List<Object> curFoldersAndEntries=getFoldersAndEntries(folder.getGroupId(),folder.getFolderId(),WorkflowConstants.STATUS_IN_TRASH);
      restoreDependentsFromTrash(curFoldersAndEntries);
      if (trashVersion != null) {
        trashVersionLocalService.deleteTrashVersion(trashVersion);
      }
      assetEntryLocalService.updateVisible(BookmarksFolder.class.getName(),folder.getFolderId(),true);
      Indexer<BookmarksFolder> indexer=IndexerRegistryUtil.nullSafeGetIndexer(BookmarksFolder.class);
      indexer.reindex(folder);
    }
  }
}
