{
  if (layout == null) {
    return false;
  }
  LayoutSet layoutSet=layout.getLayoutSet();
  if (layoutSet.isLayoutSetPrototypeLinkEnabled()) {
    Layout templateLayout=LayoutTypePortletImpl.getTemplateLayout(layout);
    Date layoutModifiedDate=layout.getModifiedDate();
    if (layoutModifiedDate == null) {
      layoutModifiedDate=new Date();
    }
    Date lastCopyDate=null;
    String lastCopyDateString=layout.getTypeSettingsProperty("layoutSetPrototypeLastCopyDate");
    if (lastCopyDateString != null) {
      lastCopyDate=new Date(GetterUtil.getLong(lastCopyDateString));
    }
    if (SitesUtil.isLayoutLocked(layout)) {
      if (lastCopyDate == null || lastCopyDate.before(templateLayout.getModifiedDate())) {
        return true;
      }
    }
 else     if (!layoutModifiedDate.after(templateLayout.getModifiedDate())) {
      return true;
    }
  }
  return false;
}
