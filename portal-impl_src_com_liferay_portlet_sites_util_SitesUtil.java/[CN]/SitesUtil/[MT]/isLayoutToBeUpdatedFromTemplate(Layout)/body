{
  if (layout == null) {
    return false;
  }
  LayoutSet layoutSet=layout.getLayoutSet();
  if (!layoutSet.isLayoutSetPrototypeLinkEnabled()) {
    return false;
  }
  Layout templateLayout=LayoutTypePortletImpl.getTemplateLayout(layout);
  Date layoutModifiedDate=layout.getModifiedDate();
  Date lastCopyDate=null;
  String lastCopyDateString=layout.getTypeSettingsProperty("layoutSetPrototypeLastCopyDate");
  if (Validator.isNotNull(lastCopyDateString)) {
    lastCopyDate=new Date(GetterUtil.getLong(lastCopyDateString));
  }
  if ((lastCopyDate != null) && lastCopyDate.after(templateLayout.getModifiedDate())) {
    return false;
  }
  if (isLayoutLocked(layout)) {
    return true;
  }
 else   if ((layoutModifiedDate == null) || ((lastCopyDate != null) && layoutModifiedDate.before(lastCopyDate))) {
    return true;
  }
  return false;
}
