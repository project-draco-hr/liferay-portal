{
  Layout layoutPrototypeLayout=layoutPrototype.getLayout();
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setAttribute("layoutPrototypeLinkEnabled",linkEnabled);
  serviceContext.setAttribute("layoutPrototypeUuid",layoutPrototype.getUuid());
  targetLayout=LayoutServiceUtil.updateLayout(targetLayout.getGroupId(),targetLayout.isPrivateLayout(),targetLayout.getLayoutId(),targetLayout.getParentLayoutId(),targetLayout.getNameMap(),targetLayout.getTitleMap(),targetLayout.getDescriptionMap(),targetLayout.getKeywordsMap(),targetLayout.getRobotsMap(),layoutPrototypeLayout.getType(),targetLayout.getHidden(),targetLayout.getFriendlyURL(),targetLayout.getIconImage(),null,serviceContext);
  targetLayout=LayoutServiceUtil.updateLayout(targetLayout.getGroupId(),targetLayout.isPrivateLayout(),targetLayout.getLayoutId(),layoutPrototypeLayout.getTypeSettings());
  copyLayoutPrototypePermissions(targetLayout,layoutPrototype);
  copyPortletPermissions(targetLayout,layoutPrototypeLayout);
  copyPortletSetups(layoutPrototypeLayout,targetLayout);
  copyLookAndFeel(targetLayout,layoutPrototypeLayout);
}
