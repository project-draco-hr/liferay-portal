{
  if (layout == null) {
    return false;
  }
  LayoutSet layoutSet=layout.getLayoutSet();
  if (!layoutSet.isLayoutSetPrototypeLinkActive()) {
    return false;
  }
  Layout sourcePrototypeLayout=LayoutTypePortletImpl.getSourcePrototypeLayout(layout);
  if (sourcePrototypeLayout == null) {
    return false;
  }
  Date layoutModifiedDate=layout.getModifiedDate();
  Date lastCopyDate=null;
  String lastCopyDateString=layout.getTypeSettingsProperty("layoutSetPrototypeLastCopyDate");
  if (Validator.isNotNull(lastCopyDateString)) {
    lastCopyDate=new Date(GetterUtil.getLong(lastCopyDateString));
  }
  if ((lastCopyDate != null) && lastCopyDate.after(sourcePrototypeLayout.getModifiedDate())) {
    return false;
  }
  if (!isLayoutUpdateable(layout)) {
    return true;
  }
  if ((layoutModifiedDate == null) || ((lastCopyDate != null) && layoutModifiedDate.before(lastCopyDate))) {
    return true;
  }
  return false;
}
