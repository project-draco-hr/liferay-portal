{
  Map<String,String[]> parameterMap=getLayoutSetPrototypeParameters(serviceContext);
  parameterMap.put(PortletDataHandlerKeys.DELETE_MISSING_LAYOUTS,new String[]{Boolean.FALSE.toString()});
  File file=LayoutLocalServiceUtil.exportLayoutsAsFile(sourceLayout.getGroupId(),sourceLayout.isPrivateLayout(),new long[]{sourceLayout.getLayoutId()},parameterMap,null,null);
  try {
    LayoutLocalServiceUtil.importLayouts(userId,targetLayout.getGroupId(),targetLayout.isPrivateLayout(),parameterMap,file);
  }
  finally {
    file.delete();
  }
}
