{
  LayoutTypePortlet sourceLayoutTypePortlet=(LayoutTypePortlet)sourceLayout.getLayoutType();
  List<String> sourcePortletIds=sourceLayoutTypePortlet.getPortletIds();
  for (  String sourcePortletId : sourcePortletIds) {
    PortletPreferences sourcePreferences=PortletPreferencesFactoryUtil.getPortletSetup(sourceLayout,sourcePortletId,null);
    PortletPreferences targetPreferences=PortletPreferencesFactoryUtil.getPortletSetup(targetLayout,sourcePortletId,null);
    PortletPreferencesImpl targetPreferencesImpl=(PortletPreferencesImpl)targetPreferences;
    PortletPreferencesLocalServiceUtil.updatePreferences(targetPreferencesImpl.getOwnerId(),targetPreferencesImpl.getOwnerType(),targetPreferencesImpl.getPlid(),sourcePortletId,sourcePreferences);
  }
}
