{
  Map<String,String[]> parameterMap=getLayoutSetPrototypeParameters(serviceContext);
  setLayoutSetPrototypeLinkEnabled(parameterMap,targetLayoutSet,serviceContext);
  if (!targetLayoutSet.isPrivateLayout()) {
    parameterMap.put(PortletDataHandlerKeys.PUBLIC_LAYOUT_PERMISSIONS,new String[]{Boolean.TRUE.toString()});
  }
  File file=LayoutLocalServiceUtil.exportLayoutsAsFile(sourceLayoutSet.getGroupId(),sourceLayoutSet.isPrivateLayout(),null,parameterMap,null,null);
  try {
    LayoutServiceUtil.importLayouts(targetLayoutSet.getGroupId(),targetLayoutSet.isPrivateLayout(),parameterMap,file);
  }
  finally {
    file.delete();
  }
}
