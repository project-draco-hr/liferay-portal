{
  List<Role> roles=RoleLocalServiceUtil.getRoles(targetLayout.getCompanyId());
  for (  Role role : roles) {
    String roleName=role.getName();
    if (roleName.equals(RoleConstants.ADMINISTRATOR)) {
      continue;
    }
    List<String> actionIds=ResourceActionsUtil.getResourceActions(LayoutPrototype.class.getName());
    List<String> actions=ResourcePermissionLocalServiceUtil.getAvailableResourcePermissionActionIds(targetLayout.getCompanyId(),LayoutPrototype.class.getName(),ResourceConstants.SCOPE_INDIVIDUAL,String.valueOf(sourceLayoutPrototype.getLayoutPrototypeId()),role.getRoleId(),actionIds);
    ResourcePermissionLocalServiceUtil.setResourcePermissions(targetLayout.getCompanyId(),Layout.class.getName(),ResourceConstants.SCOPE_INDIVIDUAL,String.valueOf(targetLayout.getPlid()),role.getRoleId(),actions.toArray(new String[actions.size()]));
  }
}
