{
  Folder folder=FolderLocalServiceUtil.getFolder(folderId);
  if (folderId != 0) {
    Mailbox mailbox=MailboxFactoryUtil.getMailbox(_user.getUserId(),folder.getAccountId(),_passwordRetriever.getPassword(folder.getAccountId()));
    return mailbox.getMessagesDisplay(folderId,keywords,pageNumber,messagesPerPage,orderByField,orderByType);
  }
  return new MessagesDisplay(new ArrayList<Message>(),pageNumber,messagesPerPage,0);
}
