{
  File tempDir=new File(System.getProperty("java.io.tmpdir"));
  try {
    Future<ObjectValuePair<Void,Void>> future=ProcessUtil.execute(ProcessUtil.LOGGING_OUTPUT_PROCESSOR,"ant","direct-deploy","-Dapp.server.deploy.dir=" + tempDir.getAbsolutePath(),"-Dauto.deploy.unpack.war=false");
    future.get();
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  Project project=_getProject();
  File warFile=new File(tempDir.getAbsolutePath(),project.getProperty("plugin.name") + ".war");
  return ShrinkWrap.createFromZipFile(WebArchive.class,warFile);
}
