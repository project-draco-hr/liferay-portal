{
  Iterator<Map.Entry<String,Object>> it=map.entrySet().iterator();
  while (it.hasNext()) {
    Map.Entry<String,Object> entry=it.next();
    if (!_isValidAttributeName(entry.getKey()) || !_isValidAttributeValue(entry.getValue())) {
      it.remove();
    }
  }
  return map;
}
