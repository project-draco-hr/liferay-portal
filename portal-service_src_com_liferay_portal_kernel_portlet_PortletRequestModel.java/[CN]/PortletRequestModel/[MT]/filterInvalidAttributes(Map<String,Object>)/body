{
  Set<Map.Entry<String,Object>> set=map.entrySet();
  Iterator<Map.Entry<String,Object>> iterator=set.iterator();
  while (iterator.hasNext()) {
    Map.Entry<String,Object> entry=iterator.next();
    if (!_isValidAttributeName(entry.getKey()) || !_isValidAttributeValue(entry.getValue())) {
      iterator.remove();
    }
  }
  return map;
}
