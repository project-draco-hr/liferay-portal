{
  DDMForm ddmForm=DDMStructureTestUtil.getSampleDDMForm("name");
  LocalizedValue value=new LocalizedValue(LocaleUtil.US);
  value.addString(LocaleUtil.US,"Test1");
  value.getAvailableLocales();
  DDMFormField ddmFormField=ddmForm.getDDMFormFields().get(0);
  ddmFormField.setPredefinedValue(value);
  DDMStructure ddmStructure=DDMStructureTestUtil.addStructure(JournalArticle.class.getName(),ddmForm);
  ddmFormField=ddmStructure.getDDMFormField("name");
  Assert.assertEquals("Test1",ddmFormField.getPredefinedValue().getString(LocaleUtil.US));
  DDMTemplate ddmTemplate=DDMTemplateTestUtil.addTemplate(ddmStructure.getStructureId(),PortalUtil.getClassNameId(JournalArticle.class),TemplateConstants.LANG_TYPE_VM,JournalTestUtil.getSampleTemplateXSL());
  Map<Locale,String> values=new HashMap<>();
  values.put(LocaleUtil.US,"Test2");
  String content=DDMStructureTestUtil.getSampleStructuredContent(values,LocaleUtil.US.toString());
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(TestPropsValues.getGroupId());
  Map<Locale,String> titleMap=new HashMap<>();
  titleMap.put(LocaleUtil.US,"Test Article");
  JournalArticle journal=JournalArticleLocalServiceUtil.addArticle(serviceContext.getUserId(),serviceContext.getScopeGroupId(),JournalFolderConstants.DEFAULT_PARENT_FOLDER_ID,ClassNameLocalServiceUtil.getClassNameId(DDMStructure.class),ddmStructure.getStructureId(),StringPool.BLANK,true,0,titleMap,null,content,ddmStructure.getStructureKey(),ddmTemplate.getTemplateKey(),null,1,1,1965,0,0,0,0,0,0,0,true,0,0,0,0,0,true,true,false,null,null,null,null,serviceContext);
  Assert.assertEquals(journal.getDDMStructure().getStructureId(),ddmStructure.getStructureId());
  ddmStructure=DDMStructureLocalServiceUtil.getDDMStructure(ddmStructure.getStructureId());
  ddmFormField=ddmStructure.getDDMFormField("name");
  Assert.assertNotEquals(ddmFormField,null);
  Assert.assertEquals("Test2",ddmFormField.getPredefinedValue().getString(LocaleUtil.US));
}
