{
  Map<String,Facet> facetsMap=searchContext.getFacets();
  List<FacetField> facetFields=queryResponse.getFacetFields();
  if (ListUtil.isEmpty(facetFields)) {
    return;
  }
  for (  FacetField facetField : facetFields) {
    Facet facet=facetsMap.get(facetField.getName());
    FacetCollector facetCollector=null;
    if (facet instanceof RangeFacet) {
      facetCollector=new SolrFacetQueryCollector(facetField.getName(),queryResponse.getFacetQuery());
    }
 else {
      facetCollector=new SolrFacetFieldCollector(facetField.getName(),facetField);
    }
    facet.setFacetCollector(facetCollector);
  }
}
