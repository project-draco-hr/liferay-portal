{
  long startTime=System.currentTimeMillis();
  SolrDocumentList solrDocumentList=queryResponse.getResults();
  updateFacetCollectors(queryResponse,searchContext);
  Hits hits=new HitsImpl();
  List<Document> documents=new ArrayList<>();
  Set<String> queryTerms=new HashSet<>();
  List<Float> scores=new ArrayList<>();
  QueryConfig queryConfig=query.getQueryConfig();
  Map<String,Map<String,List<String>>> highlights=queryResponse.getHighlighting();
  for (  SolrDocument solrDocument : solrDocumentList) {
    Document document=processSolrDocument(solrDocument,queryConfig);
    documents.add(document);
    addSnippets(solrDocument,document,queryConfig,queryTerms,highlights);
    float score=GetterUtil.getFloat(String.valueOf(solrDocument.getFieldValue("score")));
    scores.add(score);
  }
  hits.setDocs(documents.toArray(new Document[documents.size()]));
  hits.setLength((int)solrDocumentList.getNumFound());
  hits.setQuery(query);
  hits.setQueryTerms(queryTerms.toArray(new String[queryTerms.size()]));
  hits.setScores(ArrayUtil.toFloatArray(scores));
  hits.setSearchTime(queryResponse.getQTime());
  hits.setStart(startTime);
  return hits;
}
