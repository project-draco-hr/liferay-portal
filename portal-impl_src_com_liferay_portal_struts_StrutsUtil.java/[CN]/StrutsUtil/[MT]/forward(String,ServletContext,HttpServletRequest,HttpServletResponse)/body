{
  if (_log.isDebugEnabled()) {
    _log.debug("Forward URI " + uri);
  }
  if (uri.equals(ActionConstants.COMMON_NULL)) {
    return;
  }
  if (!res.isCommitted()) {
    String path=TEXT_HTML_DIR + uri;
    if (BrowserSnifferUtil.is_wap_xhtml(req)) {
      path=TEXT_WAP_DIR + uri;
    }
    if (_log.isDebugEnabled()) {
      _log.debug("Forward path " + path);
    }
    RequestDispatcher rd=ctx.getRequestDispatcher(path);
    try {
      rd.forward(req,res);
    }
 catch (    IOException ioe1) {
      _log.warn(ioe1,ioe1);
    }
catch (    ServletException se1) {
      req.setAttribute(PageContext.EXCEPTION,se1.getRootCause());
      String errorPath=TEXT_HTML_DIR + ActionConstants.COMMON_ERROR;
      if (BrowserSnifferUtil.is_wap_xhtml(req)) {
        path=TEXT_WAP_DIR + ActionConstants.COMMON_ERROR;
      }
      rd=ctx.getRequestDispatcher(errorPath);
      try {
        rd.forward(req,res);
      }
 catch (      IOException ioe2) {
        _log.warn(ioe2,ioe2);
      }
catch (      ServletException se2) {
        throw se2;
      }
    }
  }
 else {
    _log.warn(uri + " is already committed");
  }
}
