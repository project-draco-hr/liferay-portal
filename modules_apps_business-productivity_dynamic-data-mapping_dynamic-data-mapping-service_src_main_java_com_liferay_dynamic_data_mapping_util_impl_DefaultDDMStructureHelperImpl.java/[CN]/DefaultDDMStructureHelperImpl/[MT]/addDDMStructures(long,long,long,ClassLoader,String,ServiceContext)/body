{
  Locale locale=PortalUtil.getSiteDefaultLocale(groupId);
  List<Element> structureElements=getDDMStructures(classLoader,fileName,locale);
  for (  Element structureElement : structureElements) {
    boolean dynamicStructure=GetterUtil.getBoolean(structureElement.elementText("dynamic-structure"));
    if (dynamicStructure) {
      continue;
    }
    String name=structureElement.elementText("name");
    String description=structureElement.elementText("description");
    String ddmStructureKey=name;
    DDMStructure ddmStructure=_ddmStructureLocalService.fetchStructure(groupId,classNameId,ddmStructureKey);
    if (ddmStructure != null) {
      continue;
    }
    Map<Locale,String> nameMap=new HashMap<>();
    Map<Locale,String> descriptionMap=new HashMap<>();
    for (    Locale curLocale : LanguageUtil.getAvailableLocales(groupId)) {
      nameMap.put(curLocale,LanguageUtil.get(curLocale,name));
      descriptionMap.put(curLocale,LanguageUtil.get(curLocale,description));
    }
    if (name.equals(DLFileEntryTypeConstants.NAME_IG_IMAGE) && !UpgradeProcessUtil.isCreateIGImageDocumentType()) {
      continue;
    }
    DDMForm ddmForm=getDDMForm(structureElement,locale);
    DDMFormLayout ddmFormLayout=getDDMFormLayout(structureElement,ddmForm);
    serviceContext.setAttribute("status",WorkflowConstants.STATUS_APPROVED);
    ddmStructure=_ddmStructureLocalService.addStructure(userId,groupId,DDMStructureConstants.DEFAULT_PARENT_STRUCTURE_ID,classNameId,ddmStructureKey,nameMap,descriptionMap,ddmForm,ddmFormLayout,StorageType.JSON.toString(),DDMStructureConstants.TYPE_DEFAULT,serviceContext);
    Element templateElement=structureElement.element("template");
    if (templateElement == null) {
      continue;
    }
    String templateFileName=templateElement.elementText("file-name");
    String script=StringUtil.read(classLoader,FileUtil.getPath(fileName) + StringPool.SLASH + templateFileName);
    boolean cacheable=GetterUtil.getBoolean(templateElement.elementText("cacheable"));
    String ddmTemplateKey=name;
    _ddmTemplateLocalService.addTemplate(userId,groupId,PortalUtil.getClassNameId(DDMStructure.class),ddmStructure.getStructureId(),ddmStructure.getClassNameId(),ddmTemplateKey,nameMap,null,DDMTemplateConstants.TEMPLATE_TYPE_DISPLAY,DDMTemplateConstants.TEMPLATE_MODE_CREATE,TemplateConstants.LANG_TYPE_FTL,script,cacheable,false,StringPool.BLANK,null,serviceContext);
  }
}
