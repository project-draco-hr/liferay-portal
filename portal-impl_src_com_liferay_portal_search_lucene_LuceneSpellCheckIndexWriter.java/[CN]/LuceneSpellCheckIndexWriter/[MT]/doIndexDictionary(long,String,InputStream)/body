{
  if (_log.isInfoEnabled()) {
    _log.info("Start indexing dictionaries for " + languageId);
  }
  IndexAccessor indexAccessor=LuceneHelperUtil.getIndexAccessor(companyId);
  IndexSearcher indexSearcher=null;
  try {
    String localizedFieldName=DocumentImpl.getLocalizedName(languageId,com.liferay.portal.kernel.search.Field.SPELL_CHECK_WORD);
    indexSearcher=LuceneHelperUtil.getSearcher(indexAccessor.getCompanyId(),true);
    List<IndexReader> indexReaders=new ArrayList<IndexReader>();
    if (indexSearcher.maxDoc() > 0) {
      ReaderUtil.gatherSubReaders(indexReaders,indexSearcher.getIndexReader());
    }
    Collection<Document> documents=new ArrayList<Document>();
    Dictionary dictionary=new PlainTextDictionary(inputStream);
    Iterator<String> iterator=dictionary.getWordsIterator();
    while (iterator.hasNext()) {
      String word=iterator.next();
      boolean validWord=isValidWord(localizedFieldName,word,indexReaders);
      if (!validWord) {
        continue;
      }
      Document document=createDocument(localizedFieldName,word,languageId);
      documents.add(document);
    }
    indexAccessor.addDocuments(documents);
  }
  finally {
    LuceneHelperUtil.cleanUp(indexSearcher);
  }
  if (_log.isInfoEnabled()) {
    _log.info("Finished indexing dictionaries for " + languageId);
  }
}
