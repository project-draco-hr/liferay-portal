{
  DynamicQuery dynamicQuery=DynamicQueryFactoryUtil.forClass(CalendarBooking.class,getClassLoader());
  Property property=PropertyFactoryUtil.forName("calendarId");
  dynamicQuery.add(property.eq(calendarId));
  if (startTime >= 0) {
    Property propertyStartTime=PropertyFactoryUtil.forName("startTime");
    dynamicQuery.add(propertyStartTime.gt(startTime));
  }
  if (endTime >= 0) {
    Property propertyEndTime=PropertyFactoryUtil.forName("endTime");
    dynamicQuery.add(propertyEndTime.lt(endTime));
  }
  if (max > 0) {
    dynamicQuery.setLimit(0,max);
  }
  return dynamicQuery(dynamicQuery);
}
