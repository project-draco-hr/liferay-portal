{
  MessageDigest messageDigest=null;
  try {
    messageDigest=MessageDigest.getInstance(algorithm);
    byte[] buffer=new byte[StreamUtil.BUFFER_SIZE];
    int read=0;
    while ((read=inputStream.read(buffer)) != -1) {
      if (read > 0) {
        messageDigest.update(buffer,0,read);
      }
    }
  }
 catch (  IOException ioe) {
    _log.error(ioe,ioe);
  }
catch (  NoSuchAlgorithmException nsae) {
    _log.error(nsae,nsae);
  }
 finally {
    StreamUtil.cleanUp(inputStream);
  }
  return messageDigest.digest();
}
