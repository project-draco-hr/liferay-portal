{
  List<String> services=new ArrayList<>();
  DocumentBuilderFactory documentBuilderFactory=DocumentBuilderFactory.newInstance();
  DocumentBuilder documentBuilder=documentBuilderFactory.newDocumentBuilder();
  Enumeration<URL> enumeration=bundle.findEntries("/OSGI-INF","*.xml",false);
  while (enumeration.hasMoreElements()) {
    URL url=enumeration.nextElement();
    try (InputStream is=url.openStream()){
      Document document=documentBuilder.parse(is);
      Element element=document.getDocumentElement();
      String enabled=element.getAttribute("enabled");
      if (!enabled.isEmpty() && !Boolean.valueOf(enabled)) {
        services.add(element.getAttribute("name"));
      }
    }
   }
  return services;
}
