{
  List<JournalFolder> folders=journalFolderPersistence.findByG_P(fromFolder.getGroupId(),fromFolder.getFolderId());
  for (  JournalFolder folder : folders) {
    mergeFolders(folder,toFolderId);
  }
  List<JournalArticle> articles=journalArticlePersistence.findByG_F(fromFolder.getGroupId(),fromFolder.getFolderId());
  for (  JournalArticle article : articles) {
    article.setFolderId(toFolderId);
    article.setTreePath(article.buildTreePath());
    journalArticlePersistence.update(article);
    Indexer<JournalArticle> indexer=IndexerRegistryUtil.nullSafeGetIndexer(JournalArticle.class);
    indexer.reindex(article);
  }
  journalFolderLocalService.deleteFolder(fromFolder);
}
