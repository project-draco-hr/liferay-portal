{
  long parentFolderId=ParamUtil.getLong(resourceRequest,"parentFolderId");
  Folder parentFolder=DLAppServiceUtil.getFolder(parentFolderId);
  String folderName=ParamUtil.getString(resourceRequest,"folderName");
  ServiceContext serviceContext=ServiceContextFactory.getInstance(resourceRequest);
  serviceContext.setAddGroupPermissions(true);
  serviceContext.setAddGuestPermissions(true);
  serviceContext.setScopeGroupId(parentFolder.getGroupId());
  Folder folder=DLAppServiceUtil.addFolder(parentFolder.getRepositoryId(),parentFolderId,folderName,StringPool.BLANK,serviceContext);
  JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
  jsonObject.put("folderId",folder.getFolderId());
  writeJSON(resourceRequest,resourceResponse,jsonObject);
}
