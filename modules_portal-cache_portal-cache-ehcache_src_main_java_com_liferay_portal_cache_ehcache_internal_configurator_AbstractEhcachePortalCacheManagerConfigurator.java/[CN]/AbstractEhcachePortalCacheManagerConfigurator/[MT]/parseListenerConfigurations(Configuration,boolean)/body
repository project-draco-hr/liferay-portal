{
  Set<Properties> cacheManagerListenerPropertiesSet=parseCacheManagerEventListenerConfigurations(configuration.getCacheManagerEventListenerFactoryConfiguration());
  PortalCacheConfiguration defaultPortalCacheConfiguration=parseCacheListenerConfigurations(configuration.getDefaultCacheConfiguration(),usingDefault);
  Set<PortalCacheConfiguration> portalCacheConfigurations=new HashSet<>();
  Map<String,CacheConfiguration> cacheConfigurations=configuration.getCacheConfigurations();
  for (  Map.Entry<String,CacheConfiguration> entry : cacheConfigurations.entrySet()) {
    portalCacheConfigurations.add(parseCacheListenerConfigurations(entry.getValue(),usingDefault));
  }
  return new PortalCacheManagerConfiguration(cacheManagerListenerPropertiesSet,defaultPortalCacheConfiguration,portalCacheConfigurations);
}
