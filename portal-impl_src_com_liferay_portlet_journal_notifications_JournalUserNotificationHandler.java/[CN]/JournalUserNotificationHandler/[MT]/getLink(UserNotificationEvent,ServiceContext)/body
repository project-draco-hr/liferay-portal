{
  JSONObject jsonObject=JSONFactoryUtil.createJSONObject(userNotificationEvent.getPayload());
  long classPK=jsonObject.getLong("classPK");
  JournalArticle article=null;
  try {
    article=JournalArticleServiceUtil.getArticle(classPK);
  }
 catch (  NoSuchArticleException nsae) {
    return null;
  }
  ThemeDisplay themeDisplay=serviceContext.getThemeDisplay();
  User user=themeDisplay.getUser();
  Group group=user.getGroup();
  long portletPlid=PortalUtil.getPlidFromPortletId(group.getGroupId(),true,PortletKeys.JOURNAL);
  PortletURL portletURL=null;
  if (portletPlid != 0) {
    portletURL=PortletURLFactoryUtil.create(serviceContext.getLiferayPortletRequest(),PortletKeys.JOURNAL,portletPlid,PortletRequest.RENDER_PHASE);
    portletURL.setParameter("struts_action","/journal/edit_article");
    portletURL.setParameter("groupId",String.valueOf(article.getGroupId()));
    portletURL.setParameter("articleId",String.valueOf(article.getId()));
    portletURL.setParameter("version",String.valueOf(article.getVersion()));
  }
 else {
    LiferayPortletResponse liferayPortletResponse=serviceContext.getLiferayPortletResponse();
    portletURL=liferayPortletResponse.createRenderURL(PortletKeys.JOURNAL);
    portletURL.setParameter("struts_action","/journal/edit_article");
    portletURL.setParameter("groupId",String.valueOf(article.getGroupId()));
    portletURL.setParameter("articleId",String.valueOf(article.getArticleId()));
    portletURL.setParameter("version",String.valueOf(article.getVersion()));
    portletURL.setWindowState(WindowState.MAXIMIZED);
  }
  return portletURL.toString();
}
