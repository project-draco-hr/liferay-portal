{
  WebSocketContainer webSocketContainer=ContainerProvider.getWebSocketContainer();
  SynchronousQueue<ByteBuffer> synchronousQueue=new SynchronousQueue<>();
  BinaryWebSocketClient testWebSocketClient=new BinaryWebSocketClient(synchronousQueue);
  StringBuilder sb=new StringBuilder();
  sb.append("ws://");
  sb.append(_url.getHost());
  sb.append(":");
  sb.append(_url.getPort());
  sb.append("/o/websocket/test");
  URI uri=new URI(sb.toString());
  webSocketContainer.connectToServer(testWebSocketClient,uri);
  testWebSocketClient.sendMessage(ByteBuffer.wrap("echo".getBytes()));
  ByteBuffer byteBuffer=synchronousQueue.poll(1,TimeUnit.HOURS);
  Assert.assertEquals("echo",new String(byteBuffer.array(),Charset.forName("UTF-8")));
}
