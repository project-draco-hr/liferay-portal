{
  WebSocketContainer webSocketContainer=ContainerProvider.getWebSocketContainer();
  StringBuilder sb=new StringBuilder(4);
  sb.append("ws://");
  sb.append(_url.getHost());
  sb.append(":");
  sb.append(_url.getPort());
  sb.append("/o/websocket/test");
  URI liferayWebsocketURI=new URI(sb.toString());
  TestWebSocketClient socket=new TestWebSocketClient();
  webSocketContainer.connectToServer(socket,liferayWebsocketURI);
  socket.sendText("echo");
  Thread.sleep(1000);
  Assert.assertEquals("echo",socket.popReceivedTexts());
}
