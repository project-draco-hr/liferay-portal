{
  WebSocketContainer webSocketContainer=ContainerProvider.getWebSocketContainer();
  TestWebSocketClient testWebSocketClient=new TestWebSocketClient();
  StringBuilder sb=new StringBuilder();
  sb.append("ws://");
  sb.append(_url.getHost());
  sb.append(":");
  sb.append(_url.getPort());
  sb.append("/o/websocket/test");
  URI uri=new URI(sb.toString());
  webSocketContainer.connectToServer(testWebSocketClient,uri);
  testWebSocketClient.setInitialOnTextCount(1);
  testWebSocketClient.sendText("echo");
  testWebSocketClient.await(1,TimeUnit.SECONDS);
  Assert.assertEquals(0,testWebSocketClient.getOnTextCount());
  Assert.assertEquals("echo",testWebSocketClient.popReceivedTexts());
}
