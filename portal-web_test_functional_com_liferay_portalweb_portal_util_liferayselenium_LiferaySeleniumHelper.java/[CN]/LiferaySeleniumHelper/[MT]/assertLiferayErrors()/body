{
  String currentDate=DateUtil.getCurrentDate("yyyy-MM-dd",LocaleUtil.getDefault());
  String fileName=PropsValues.LIFERAY_HOME + "/logs/liferay." + currentDate+ ".xml";
  if (!FileUtil.exists(fileName)) {
    return;
  }
  String content=FileUtil.read(fileName);
  if (content.equals("")) {
    return;
  }
  content="<log4j>" + content + "</log4j>";
  content=content.replaceAll("log4j:","");
  Document document=UnsecureSAXReaderUtil.read(content,true);
  Element rootElement=document.getRootElement();
  List<Element> eventElements=rootElement.elements("event");
  for (  Element eventElement : eventElements) {
    String level=eventElement.attributeValue("level");
    if (level.equals("ERROR")) {
      String fileContent=FileUtil.read(fileName);
      fileContent=fileContent.replaceFirst("level=\"ERROR\"","level=\"ERROR_FOUND\"");
      FileUtil.write(fileName,fileContent);
      Element messageElement=eventElement.element("message");
      String messageText=messageElement.getText();
      if (isIgnorableErrorLine(messageText)) {
        continue;
      }
      Element throwableElement=eventElement.element("throwable");
      Exception exception=null;
      if (throwableElement != null) {
        exception=new Exception(messageText + throwableElement.getText());
        addToLiferayExceptions(exception);
        throw exception;
      }
      exception=new Exception(messageText);
      addToLiferayExceptions(exception);
      throw exception;
    }
  }
}
