{
  String[] fileEntryTypeUuids=StringUtil.split(folderElement.attributeValue("fileEntryTypeUuids"));
  List<Long> fileEntryTypeIds=new ArrayList<Long>();
  String defaultFileEntryTypeUuid=GetterUtil.getString(folderElement.attributeValue("defaultFileEntryTypeUuid"));
  long defaultFileEntryTypeId=0;
  for (  String fileEntryTypeUuid : fileEntryTypeUuids) {
    DLFileEntryType dlFileEntryType=DLFileEntryTypeUtil.fetchByUUID_G(fileEntryTypeUuid,portletDataContext.getScopeGroupId());
    if (dlFileEntryType == null) {
      dlFileEntryType=DLFileEntryTypeUtil.fetchByUUID_G(fileEntryTypeUuid,GroupLocalServiceUtil.getCompanyGroup(folder.getCompanyId()).getGroupId());
    }
    if (dlFileEntryType == null) {
      dlFileEntryType=DLFileEntryTypeUtil.fetchByUUID_G(fileEntryTypeUuid,0);
    }
    if (dlFileEntryType == null) {
      continue;
    }
    fileEntryTypeIds.add(dlFileEntryType.getFileEntryTypeId());
    if (defaultFileEntryTypeUuid.equals(dlFileEntryType.getUuid())) {
      defaultFileEntryTypeId=dlFileEntryType.getFileEntryTypeId();
    }
  }
  if (!fileEntryTypeIds.isEmpty()) {
    DLFolder dlFolder=(DLFolder)folder.getModel();
    if (Validator.isNotNull(defaultFileEntryTypeId)) {
      dlFolder.setDefaultFileEntryTypeId(defaultFileEntryTypeId);
    }
    if (!dlFolder.getOverrideFileEntryTypes()) {
      dlFolder.setOverrideFileEntryTypes(true);
    }
    DLFolderLocalServiceUtil.updateDLFolder(dlFolder);
    DLFileEntryTypeLocalServiceUtil.updateFolderFileEntryTypes(dlFolder,fileEntryTypeIds,defaultFileEntryTypeId,serviceContext);
  }
}
