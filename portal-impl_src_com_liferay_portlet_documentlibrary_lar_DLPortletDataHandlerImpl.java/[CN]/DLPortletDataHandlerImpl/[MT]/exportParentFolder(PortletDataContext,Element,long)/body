{
  portletDataContext.addExpandoColumns(DLFolder.class.getName());
  if (folderId == DLFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
    return;
  }
  Folder folder=FolderUtil.findByPrimaryKey(folderId);
  exportParentFolder(portletDataContext,foldersElement,folder.getParentFolderId());
  String path=getFolderPath(portletDataContext,folder);
  if (portletDataContext.isPathNotProcessed(path)) {
    Element folderElement=foldersElement.addElement("folder");
    folderElement.addAttribute("path",path);
    folder.prepare();
    portletDataContext.addPermissions(Folder.class,folder.getFolderId());
    Map<String,Serializable> expandoAttributes=null;
    if (folder.getModel() instanceof DLFolder) {
      expandoAttributes=folder.getAttributes();
    }
    addZipEntry(portletDataContext,path,folderElement,folder,expandoAttributes);
  }
}
