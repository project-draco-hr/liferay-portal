{
  if (context.isWithinDateRange(folder.getModifiedDate())) {
    exportParentFolder(context,foldersElement,folder.getParentFolderId());
    String path=getFolderPath(context,folder);
    if (context.isPathNotProcessed(path)) {
      Element folderElement=foldersElement.addElement("folder");
      folderElement.addAttribute("path",path);
      folder.setUserUuid(folder.getUserUuid());
      context.addPermissions(DLFolder.class,folder.getFolderId());
      context.addZipEntry(path,folder);
    }
  }
  List<DLFileEntry> fileEntries=DLFileEntryUtil.findByG_F(folder.getGroupId(),folder.getFolderId());
  for (  DLFileEntry fileEntry : fileEntries) {
    exportFileEntry(context,foldersElement,fileEntriesElement,fileRanksElement,fileEntry,true);
  }
  if (context.getBooleanParameter(_NAMESPACE,"shortcuts")) {
    List<DLFileShortcut> fileShortcuts=DLFileShortcutUtil.findByG_F(folder.getGroupId(),folder.getFolderId());
    for (    DLFileShortcut fileShortcut : fileShortcuts) {
      exportFileShortcut(context,foldersElement,fileShortcutsElement,fileShortcut);
    }
  }
}
