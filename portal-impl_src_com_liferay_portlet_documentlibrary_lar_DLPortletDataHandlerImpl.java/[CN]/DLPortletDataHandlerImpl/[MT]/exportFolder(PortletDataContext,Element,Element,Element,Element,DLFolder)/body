{
  if (context.isWithinDateRange(folder.getModifiedDate())) {
    String path=getFolderPath(context,folder);
    foldersEl.addElement("folder").addAttribute("path",path);
    if (context.isPathNotProcessed(path)) {
      folder.setUserUuid(folder.getUserUuid());
      context.addZipEntry(path,folder);
    }
    exportParentFolder(context,foldersEl,folder.getParentFolderId());
  }
  List<DLFileEntry> folderEntries=DLFileEntryUtil.findByFolderId(folder.getFolderId());
  for (  DLFileEntry entry : folderEntries) {
    exportEntry(context,foldersEl,entriesEl,ranksEl,entry);
  }
  if (context.getBooleanParameter(_NAMESPACE,"shortcuts")) {
    List<DLFileShortcut> folderShortcuts=DLFileShortcutUtil.findByFolderId(folder.getFolderId());
    for (    DLFileShortcut shortcut : folderShortcuts) {
      exportShortcut(context,foldersEl,shortcutsEl,shortcut);
    }
  }
}
