{
  long userId=context.getUserId(shortcut.getUserUuid());
  long folderId=MapUtil.getLong(folderPKs,shortcut.getFolderId(),shortcut.getFolderId());
  long toFolderId=MapUtil.getLong(folderPKs,shortcut.getToFolderId(),shortcut.getToFolderId());
  String toName=MapUtil.getString(entryNames,shortcut.getToName(),shortcut.getToName());
  boolean addCommunityPermissions=true;
  boolean addGuestPermissions=true;
  try {
    DLFolderUtil.findByPrimaryKey(folderId);
    DLFolderUtil.findByPrimaryKey(toFolderId);
    if (context.getDataStrategy().equals(PortletDataHandlerKeys.DATA_STRATEGY_MIRROR)) {
      try {
        DLFileShortcut existingShortcut=DLFileShortcutFinderUtil.findByUuid_G(shortcut.getUuid(),context.getGroupId());
        DLFileShortcutLocalServiceUtil.updateFileShortcut(userId,existingShortcut.getFileShortcutId(),folderId,toFolderId,toName);
      }
 catch (      NoSuchFileShortcutException nsfse) {
        DLFileShortcutLocalServiceUtil.addFileShortcut(shortcut.getUuid(),userId,folderId,toFolderId,toName,addCommunityPermissions,addGuestPermissions);
      }
    }
 else {
      DLFileShortcutLocalServiceUtil.addFileShortcut(userId,folderId,toFolderId,toName,addCommunityPermissions,addGuestPermissions);
    }
  }
 catch (  NoSuchFolderException nsfe) {
    _log.error("Could not find the folder for shortcut " + shortcut.getFileShortcutId());
  }
}
