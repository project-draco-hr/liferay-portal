{
  String path=fileEntryTypeElement.attributeValue("path");
  if (!portletDataContext.isPathNotProcessed(path)) {
    return;
  }
  DLFileEntryType dlFileEntryType=(DLFileEntryType)portletDataContext.getZipEntryAsObject(path);
  long userId=portletDataContext.getUserId(dlFileEntryType.getUserUuid());
  String name=getFileEntryTypeName(dlFileEntryType.getUuid(),portletDataContext.getScopeGroupId(),dlFileEntryType.getName(),2);
  List<Element> structureElements=fileEntryTypeElement.elements("structure");
  for (  Element structureElement : structureElements) {
    DDMPortletDataHandlerImpl.importStructure(portletDataContext,structureElement);
  }
  String[] ddmStructureUuids=StringUtil.split(fileEntryTypeElement.attributeValue("structureUuids"));
  long[] ddmStrutureIds=new long[ddmStructureUuids.length];
  for (int i=0; i < ddmStructureUuids.length; i++) {
    DDMStructure existingStructure=DDMStructureUtil.fetchByUUID_G(ddmStructureUuids[i],portletDataContext.getScopeGroupId());
    ddmStrutureIds[i]=existingStructure.getStructureId();
  }
  ServiceContext serviceContext=portletDataContext.createServiceContext(path,dlFileEntryType,_NAMESPACE);
  DLFileEntryType importedDLFileEntryType=null;
  if (portletDataContext.isDataStrategyMirror()) {
    DLFileEntryType existingDLFileEntryType=DLFileEntryTypeUtil.fetchByUUID_G(dlFileEntryType.getUuid(),portletDataContext.getScopeGroupId());
    if (existingDLFileEntryType == null) {
      serviceContext.setUuid(dlFileEntryType.getUuid());
      importedDLFileEntryType=DLFileEntryTypeLocalServiceUtil.addFileEntryType(userId,portletDataContext.getScopeGroupId(),name,dlFileEntryType.getDescription(),ddmStrutureIds,serviceContext);
    }
 else {
      DLFileEntryTypeLocalServiceUtil.updateFileEntryType(userId,existingDLFileEntryType.getFileEntryTypeId(),name,dlFileEntryType.getDescription(),ddmStrutureIds,serviceContext);
      importedDLFileEntryType=existingDLFileEntryType;
    }
  }
 else {
    importedDLFileEntryType=DLFileEntryTypeLocalServiceUtil.addFileEntryType(userId,portletDataContext.getScopeGroupId(),name,dlFileEntryType.getDescription(),ddmStrutureIds,serviceContext);
  }
  portletDataContext.importClassedModel(dlFileEntryType,importedDLFileEntryType,_NAMESPACE);
  String importedDLFileEntryDDMStructureKey=DLUtil.getDDMStructureKey(importedDLFileEntryType);
  List<DDMStructure> ddmStructures=importedDLFileEntryType.getDDMStructures();
  for (  DDMStructure ddmStructure : ddmStructures) {
    String ddmStructureKey=ddmStructure.getStructureKey();
    if (!DLUtil.isAutoGeneratedDLFileEntryTypeDDMStructureKey(ddmStructureKey)) {
      continue;
    }
    if (ddmStructureKey.equals(importedDLFileEntryDDMStructureKey)) {
      continue;
    }
    ddmStructure.setStructureKey(importedDLFileEntryDDMStructureKey);
    DDMStructureLocalServiceUtil.updateDDMStructure(ddmStructure);
  }
}
