{
  if (!(fileEntry instanceof LiferayFileEntry)) {
    return;
  }
  LiferayFileEntry liferayFileEntry=(LiferayFileEntry)fileEntry;
  long fileEntryTypeId=liferayFileEntry.getDLFileEntry().getFileEntryTypeId();
  DLFileEntryType fileEntryType=DLFileEntryTypeLocalServiceUtil.getDLFileEntryType(fileEntryTypeId);
  exportFileEntryType(portletDataContext,fileEntryTypesElement,fileEntryType);
  fileEntryElement.addAttribute("fileEntryTypeUuid",fileEntryType.getUuid());
  List<DDMStructure> ddmStructures=fileEntryType.getDDMStructures();
  for (  DDMStructure ddmStructure : ddmStructures) {
    String structureFieldsPath=getFileEntryFileEntryTypeStructureFieldsPath(portletDataContext,fileEntry,fileEntryType.getUuid(),ddmStructure.getStructureId());
    DLFileEntryMetadata fileEntryMetadata=DLFileEntryMetadataLocalServiceUtil.getFileEntryMetadata(ddmStructure.getStructureId(),fileEntry.getFileVersion().getFileVersionId());
    Fields fields=StorageEngineUtil.getFields(fileEntryMetadata.getDDMStorageId());
    Element structureFields=fileEntryElement.addElement("structure-fields");
    structureFields.addAttribute("path",structureFieldsPath);
    structureFields.addAttribute("structureUuid",ddmStructure.getUuid());
    portletDataContext.addZipEntry(structureFieldsPath,fields);
  }
}
