{
  long userId=context.getUserId(shortcut.getUserUuid());
  Long folderId=(Long)folderPKs.get(new Long(shortcut.getFolderId()));
  if (folderId == null) {
    folderId=new Long(shortcut.getFolderId());
  }
  Long toFolderId=(Long)folderPKs.get(new Long(shortcut.getToFolderId()));
  if (toFolderId == null) {
    toFolderId=new Long(shortcut.getToFolderId());
  }
  String toName=(String)entryNames.get(shortcut.getToName());
  if (toName == null) {
    toName=shortcut.getToName();
  }
  boolean addCommunityPermissions=true;
  boolean addGuestPermissions=true;
  try {
    DLFolderUtil.findByPrimaryKey(folderId.longValue());
    DLFolderUtil.findByPrimaryKey(toFolderId.longValue());
    if (mergeData) {
      DLFileShortcut existingShortcut=DLFileShortcutFinderUtil.findByUuid_G(shortcut.getUuid(),context.getGroupId());
      if (existingShortcut == null) {
        DLFileShortcutLocalServiceUtil.addFileShortcut(shortcut.getUuid(),userId,folderId.longValue(),toFolderId.longValue(),toName,addCommunityPermissions,addGuestPermissions);
      }
 else {
        DLFileShortcutLocalServiceUtil.updateFileShortcut(userId,existingShortcut.getFileShortcutId(),folderId.longValue(),toFolderId.longValue(),toName);
      }
    }
 else {
      DLFileShortcutLocalServiceUtil.addFileShortcut(userId,folderId.longValue(),toFolderId.longValue(),toName,addCommunityPermissions,addGuestPermissions);
    }
  }
 catch (  NoSuchFolderException nsfe) {
    _log.error("Could not find the folder for shortcut " + shortcut.getFileShortcutId());
  }
}
