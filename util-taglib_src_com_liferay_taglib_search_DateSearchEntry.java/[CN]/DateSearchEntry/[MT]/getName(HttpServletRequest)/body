{
  if (_date != null) {
    Object[] localeAndTimeZone=getLocaleAndTimeZone(request);
    Locale locale=(Locale)localeAndTimeZone[0];
    Format dateFormatDateTime=FastDateFormatFactoryUtil.getDateTime(locale,(TimeZone)localeAndTimeZone[1]);
    StringBundler sb=new StringBundler(5);
    sb.append("<span onmouseover=\"Liferay.Portal.ToolTip.show(this, '");
    sb.append(dateFormatDateTime.format(_date));
    sb.append("')\">");
    if (_date.before(new Date())) {
      sb.append(LanguageUtil.format(locale,"x-ago",LanguageUtil.getTimeDescription(locale,System.currentTimeMillis() - _date.getTime(),true),false));
    }
 else {
      sb.append(LanguageUtil.format(locale,"within-x",LanguageUtil.getTimeDescription(locale,_date.getTime() - System.currentTimeMillis(),true),false));
    }
    sb.append("</span>");
    return sb.toString();
  }
 else {
    return StringPool.BLANK;
  }
}
