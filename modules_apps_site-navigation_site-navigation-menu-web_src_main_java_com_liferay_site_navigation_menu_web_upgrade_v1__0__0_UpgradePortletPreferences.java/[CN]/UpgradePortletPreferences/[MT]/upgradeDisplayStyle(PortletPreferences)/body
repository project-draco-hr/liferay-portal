{
  String displayStyle=GetterUtil.getString(portletPreferences.getValue("displayStyle",null));
  if (Validator.isNull(displayStyle) || displayStyle.startsWith(PortletDisplayTemplateManager.DISPLAY_STYLE_PREFIX)) {
    return;
  }
  portletPreferences.setValue("displayStyle",PortletDisplayTemplateManager.DISPLAY_STYLE_PREFIX + "list-menu-ftl");
  if (displayStyle.equals("from-level-0")) {
    _upgradeDisplayStylePreferences(portletPreferences,"absolute","0","auto");
  }
 else   if (displayStyle.equals("from-level-1") || displayStyle.equals("from-level-1-with-title")) {
    _upgradeDisplayStylePreferences(portletPreferences,"absolute","1","auto");
  }
 else   if (displayStyle.equals("from-level-1-to-all-sublevels")) {
    _upgradeDisplayStylePreferences(portletPreferences,"absolute","1","all");
  }
 else   if (displayStyle.equals("from-level-2-with-title")) {
    _upgradeDisplayStylePreferences(portletPreferences,"absolute","2","auto");
  }
 else   if (displayStyle.equals("relative-with-breadcrumb")) {
    _upgradeDisplayStylePreferences(portletPreferences,"relative","0","auto");
  }
  portletPreferences.reset("bulletStyle");
  portletPreferences.reset("headerType");
  portletPreferences.reset("nestedChildren");
}
