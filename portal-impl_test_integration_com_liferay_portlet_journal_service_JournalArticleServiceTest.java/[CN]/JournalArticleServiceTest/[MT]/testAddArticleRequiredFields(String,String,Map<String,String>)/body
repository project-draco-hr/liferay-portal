{
  String xsd=readText(ddmStructureContent);
  DDMStructure ddmStructure=DDMStructureTestUtil.addStructure(_group.getGroupId(),JournalArticle.class.getName(),xsd);
  DDMTemplate ddmTemplate=DDMTemplateTestUtil.addTemplate(_group.getGroupId(),ddmStructure.getStructureId());
  String xmlContent=readText(journalArticleContent);
  ServiceContext serviceContext=ServiceTestUtil.getServiceContext(_group.getGroupId());
  for (  String requiredFieldName : requiredFields.keySet()) {
    Assert.assertTrue(ddmStructure.getFieldRequired(requiredFieldName));
    serviceContext.setAttribute(requiredFieldName,requiredFields.get(requiredFieldName));
  }
  JournalTestUtil.addArticleWithXMLContent(JournalFolderConstants.DEFAULT_PARENT_FOLDER_ID,JournalArticleConstants.CLASSNAME_ID_DEFAULT,xmlContent,ddmStructure.getStructureKey(),ddmTemplate.getTemplateKey(),LocaleUtil.fromLanguageId(ddmStructure.getDefaultLanguageId()),serviceContext);
}
