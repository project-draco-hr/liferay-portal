{
  ExpandoTable expandoTable=null;
  try {
    expandoTable=ExpandoTableLocalServiceUtil.getTable(companyId,User.class.getName(),"MP");
  }
 catch (  NoSuchTableException nste) {
    return;
  }
  ExpandoColumn oldExpandoColumn=ExpandoColumnLocalServiceUtil.getColumn(companyId,User.class.getName(),expandoTable.getName(),"client-id");
  if (oldExpandoColumn == null) {
    return;
  }
  ExpandoColumn newExpandoColumn=ExpandoColumnLocalServiceUtil.getColumn(companyId,User.class.getName(),expandoTable.getName(),"clientId");
  if (newExpandoColumn == null) {
    newExpandoColumn=ExpandoColumnLocalServiceUtil.updateColumn(oldExpandoColumn.getColumnId(),"clientId",ExpandoColumnConstants.STRING);
  }
  List<ExpandoValue> expandoValues=ExpandoValueLocalServiceUtil.getColumnValues(oldExpandoColumn.getColumnId(),QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  for (  ExpandoValue expandoValue : expandoValues) {
    ExpandoValueLocalServiceUtil.addValue(expandoValue.getCompanyId(),User.class.getName(),expandoTable.getName(),newExpandoColumn.getName(),expandoValue.getClassPK(),expandoValue.getString());
  }
  ExpandoColumnLocalServiceUtil.deleteColumn(oldExpandoColumn.getColumnId());
}
