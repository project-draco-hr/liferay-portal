{
  if (types == null) {
    return map;
  }
  if (types.length != 2) {
    return map;
  }
  Map<Object,Object> newMap=new HashMap<Object,Object>(map.size());
  for (  Map.Entry<?,?> entry : map.entrySet()) {
    Object key=ReflectUtil.castType(entry.getKey(),types[0]);
    Object value=entry.getValue();
    if (value != null) {
      value=ReflectUtil.castType(value,types[1]);
    }
    newMap.put(key,value);
  }
  return newMap;
}
