{
  PortletPreferences portletPreferences=PortletPreferencesFactoryUtil.fromXML(companyId,ownerId,ownerType,plid,portletId,xml);
  Map<String,String[]> preferencesMap=portletPreferences.getMap();
  for (  String oldName : preferencesMap.keySet()) {
    if (oldName.startsWith("portlet-setup-title-")) {
      String newName=StringUtil.replaceFirst(oldName,"portlet-setup-title-","portlet-setup-title_");
      String[] values=preferencesMap.get(oldName);
      portletPreferences.reset(oldName);
      portletPreferences.setValues(newName,values);
    }
  }
  return PortletPreferencesFactoryUtil.toXML(portletPreferences);
}
