{
  Attribute attribute=attributes.get(groupMappings.getProperty("user"));
  if (attribute == null) {
    return null;
  }
  String postfix=_ldapSettings.getPropertyPostfix(ldapServerId);
  String baseDN=PrefsPropsUtil.getString(companyId,PropsKeys.LDAP_BASE_DN + postfix);
  StringBundler sb=new StringBundler(7);
  sb.append("(&");
  String importGroupSearchFilter=PrefsPropsUtil.getString(companyId,PropsKeys.LDAP_IMPORT_GROUP_SEARCH_FILTER + postfix);
  LDAPUtil.validateFilter(importGroupSearchFilter,PropsKeys.LDAP_IMPORT_GROUP_SEARCH_FILTER + postfix);
  sb.append(importGroupSearchFilter);
  sb.append(StringPool.OPEN_PARENTHESIS);
  sb.append(groupMappings.getProperty("groupName"));
  sb.append("=");
  sb.append(escapeValue(userGroup.getName()));
  sb.append("))");
  return _portalLDAP.getMultivaluedAttribute(companyId,ldapContext,baseDN,sb.toString(),attribute);
}
