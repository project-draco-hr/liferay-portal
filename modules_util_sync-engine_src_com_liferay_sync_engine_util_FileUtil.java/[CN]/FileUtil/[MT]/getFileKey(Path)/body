{
  if (!Files.exists(filePath)) {
    return "";
  }
  try {
    if (OSDetector.isApple()) {
      Xattrj xattrj=_getXattrj();
      if (xattrj == null) {
        return "";
      }
      String[] list=xattrj.listAttributes(filePath.toFile());
      if (!ArrayUtils.contains(list,"fileKey")) {
        return "";
      }
      String fileKey=xattrj.readAttribute(filePath.toFile(),"fileKey");
      if (fileKey == null) {
        return "";
      }
 else {
        return fileKey;
      }
    }
 else {
      UserDefinedFileAttributeView userDefinedFileAttributeView=Files.getFileAttributeView(filePath,UserDefinedFileAttributeView.class);
      List<String> list=userDefinedFileAttributeView.list();
      if (!list.contains("fileKey")) {
        return "";
      }
      ByteBuffer byteBuffer=ByteBuffer.allocate(userDefinedFileAttributeView.size("fileKey"));
      userDefinedFileAttributeView.read("fileKey",byteBuffer);
      CharBuffer charBuffer=_CHARSET.decode((ByteBuffer)byteBuffer.flip());
      return charBuffer.toString();
    }
  }
 catch (  Exception e) {
    _logger.error(e.getMessage(),e);
    return "";
  }
}
