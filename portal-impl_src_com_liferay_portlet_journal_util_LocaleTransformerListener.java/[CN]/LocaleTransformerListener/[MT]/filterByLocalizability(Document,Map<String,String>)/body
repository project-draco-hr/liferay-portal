{
  long structureId=Long.parseLong(tokens.get("structure_id"));
  DDMStructure structure=null;
  try {
    structure=DDMStructureLocalServiceUtil.getDDMStructure(structureId);
    if (Validator.isNull(structure)) {
      return;
    }
    Element rootElement=document.getRootElement();
    String defaultLanguageId=LocaleUtil.toLanguageId(LocaleUtil.getSiteDefault());
    String defaultLocale=rootElement.attributeValue("default-locale",defaultLanguageId);
    filterByLocalizability(rootElement,defaultLocale,structure);
  }
 catch (  PortalException e) {
    e.printStackTrace();
  }
}
