{
  ServiceContext serviceContext=new ServiceContext();
  Class<?> clazz=getClass();
  byte[] testFileBytes=FileUtil.getBytes(clazz.getResourceAsStream(_TEST_DDM_STRUCTURE));
  serviceContext.setAttribute("xsd",new String(testFileBytes));
  User user=TestPropsValues.getUser();
  serviceContext.setLanguageId(LocaleUtil.toLanguageId(user.getLocale()));
  DLFileEntryType dlFileEntryType=DLFileEntryTypeLocalServiceUtil.addFileEntryType(TestPropsValues.getUserId(),_group.getGroupId(),"Test Structure",StringPool.BLANK,new long[0],serviceContext);
  List<DDMStructure> ddmStructures=dlFileEntryType.getDDMStructures();
  Assert.assertEquals(1,ddmStructures.size());
  DDMStructure ddmStructure=ddmStructures.get(0);
  Locale[] availableLocales=LocaleUtil.fromLanguageIds(ddmStructure.getAvailableLanguageIds());
  boolean hasDefaultLocale=ArrayUtil.contains(availableLocales,LocaleUtil.getSiteDefault());
  Assert.assertTrue(hasDefaultLocale);
  boolean hasHungarianLocale=ArrayUtil.contains(availableLocales,new Locale("hu","HU"));
  Assert.assertTrue(hasHungarianLocale);
  boolean hasUserLocale=ArrayUtil.contains(availableLocales,user.getLocale());
  Assert.assertTrue(hasUserLocale);
  DLFileEntryTypeLocalServiceUtil.deleteDLFileEntryType(dlFileEntryType);
}
