{
  try {
    _keyField=AccessController.doPrivileged(new PrivilegedExceptionAction<Field>(){
      public Field run() throws Exception {
        Field keyField=ProtectionDomain.class.getDeclaredField("key");
        keyField.setAccessible(true);
        return keyField;
      }
    }
);
  }
 catch (  PrivilegedActionException e) {
    throw new IllegalStateException("Lifray needs to be able to change the accessibility of " + "the ProtectionDomain.key field. Try granting ",e);
  }
  _policyProtectionDomain=AccessController.doPrivileged(new PrivilegedAction<ProtectionDomain>(){
    public ProtectionDomain run(){
      return this.getClass().getProtectionDomain();
    }
  }
);
  PermissionCollection policyPerms=new Permissions();
  policyPerms.add(_ALL_PERMISSION);
  _protectionDomainMapping.put(getKey(_policyProtectionDomain),policyPerms);
  _defaultPaclPolicy=PACLPolicyManager.getDefaultPACLPolicy();
}
