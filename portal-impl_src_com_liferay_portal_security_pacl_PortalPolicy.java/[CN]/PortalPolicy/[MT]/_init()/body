{
  try {
    _field=AccessController.doPrivileged(new PrivilegedExceptionAction<Field>(){
      public Field run() throws Exception {
        Field field=ProtectionDomain.class.getDeclaredField("key");
        field.setAccessible(true);
        return field;
      }
    }
);
  }
 catch (  PrivilegedActionException pae) {
    throw new IllegalStateException("Lifray needs to be able to change the accessibility of the " + "key field in ProtectionDomain",pae);
  }
  _protectionDomain=AccessController.doPrivileged(new PrivilegedAction<ProtectionDomain>(){
    public ProtectionDomain run(){
      Class<?> clazz=getClass();
      return clazz.getProtectionDomain();
    }
  }
);
  PermissionCollection permissionCollection=new Permissions();
  permissionCollection.add(_allPermission);
  _permissionCollections.put(_getKey(_protectionDomain),permissionCollection);
}
