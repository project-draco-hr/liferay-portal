{
  PortalCacheClusterEvent portalCacheClusterEvent=(PortalCacheClusterEvent)message.getPayload();
  if (portalCacheClusterEvent == null) {
    if (_log.isWarnEnabled()) {
      _log.warn("Payload is null");
    }
    return;
  }
  String cacheName=portalCacheClusterEvent.getCacheName();
  Ehcache ehcache=_portalCacheManager.getEhcache(cacheName);
  if (ehcache == null) {
    ehcache=_hibernateCacheManager.getEhcache(cacheName);
  }
  if (ehcache != null) {
    PortalCacheClusterEventType portalCacheClusterEventType=portalCacheClusterEvent.getEventType();
    if (portalCacheClusterEventType.equals(PortalCacheClusterEventType.REMOVEALL)) {
      ehcache.removeAll(true);
    }
 else {
      ehcache.remove(portalCacheClusterEvent.getElementKey(),true);
    }
  }
}
