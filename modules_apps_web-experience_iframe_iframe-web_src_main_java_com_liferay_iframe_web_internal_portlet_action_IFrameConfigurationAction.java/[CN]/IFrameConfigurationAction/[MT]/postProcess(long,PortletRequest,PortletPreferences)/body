{
  String formPassword=portletPreferences.getValue("formPassword",StringPool.BLANK);
  if (Validator.isNotNull(formPassword) && formPassword.contains("@password@")) {
    if (!IFrameUtil.isPasswordTokenEnabled(portletRequest)) {
      formPassword=formPassword.replaceAll("@password@","");
      try {
        portletPreferences.setValue("formPassword",formPassword);
      }
 catch (      ReadOnlyException roe) {
        throw new PortalException(roe);
      }
    }
  }
}
