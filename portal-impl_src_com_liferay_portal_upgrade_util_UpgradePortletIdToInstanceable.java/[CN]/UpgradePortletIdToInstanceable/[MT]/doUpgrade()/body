{
  String[] portletIds=getPortletIds();
  for (  String portletId : portletIds) {
    if (portletId.contains(PortletConstants.INSTANCE_SEPARATOR)) {
      if (_log.isWarnEnabled()) {
        _log.warn("Portlet " + portletId + " is already instanceable");
      }
      continue;
    }
    String instanceId=LayoutTypePortletImpl.generateInstanceId();
    String newPortletId=PortletConstants.assemblePortletId(portletId,instanceId);
    updateResourcePermission(portletId,newPortletId,false);
    updateInstanceablePortletPreferences(portletId,newPortletId);
    updateLayouts(portletId,newPortletId);
  }
}
