{
  if (_rootPanelCategoryKey != null) {
    return _rootPanelCategoryKey;
  }
  _rootPanelCategoryKey=StringPool.BLANK;
  List<PanelCategory> childPanelCategories=getChildPanelCategories();
  if (!childPanelCategories.isEmpty()) {
    PanelCategory firstChildPanelCategory=childPanelCategories.get(0);
    _rootPanelCategoryKey=firstChildPanelCategory.getKey();
    ThemeDisplay themeDisplay=(ThemeDisplay)_portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
    if (Validator.isNotNull(themeDisplay.getPpid())) {
      PanelCategoryHelper panelCategoryHelper=new PanelCategoryHelper(_panelAppRegistry,_panelCategoryRegistry);
      for (      PanelCategory panelCategory : _panelCategoryRegistry.getChildPanelCategories(PanelCategoryKeys.ROOT)) {
        if (panelCategoryHelper.containsPortlet(themeDisplay.getPpid(),panelCategory)) {
          _rootPanelCategoryKey=panelCategory.getKey();
          return _rootPanelCategoryKey;
        }
      }
    }
  }
  return _rootPanelCategoryKey;
}
