{
  JSONObject jsonObj=new JSONObject();
  try {
    String userId=PortalUtil.getUserId(req);
    String password=PortalUtil.getUserPassword(req);
    String folderId=ParamUtil.getString(req,"folderId");
    MailUtil.setCurrentFolder(userId,password,folderId);
    List list=MailUtil.getEnvelopes(userId);
    JSONArray meArray=new JSONArray();
    for (int i=0; i < list.size(); i++) {
      MailEnvelope me=(MailEnvelope)list.get(i);
      JSONObject jMe=new JSONObject();
      jMe.put("id",me.getMsgUID());
      jMe.put("email",me.getEmail());
      jMe.put("subject",me.getSubject());
      jMe.put("date",me.getDate().toString());
      meArray.put(jMe);
    }
    jsonObj.put("headers",meArray);
  }
 catch (  Exception e) {
  }
  return jsonObj.toString();
}
