{
  if (keyType.equals(OAuthConsumerConstants.KEY_TYPE_RSA_PRIVATE)) {
    consumerSecret=StringPool.BLANK;
  }
  Date now=new Date();
  long oAuthConsumerId=counterLocalService.increment();
  OAuthConsumer oAuthConsumer=oAuthConsumerPersistence.create(oAuthConsumerId);
  oAuthConsumer.setCompanyId(companyId);
  oAuthConsumer.setCreateDate(now);
  oAuthConsumer.setModifiedDate(now);
  oAuthConsumer.setGadgetKey(gadgetKey);
  oAuthConsumer.setServiceName(serviceName);
  oAuthConsumer.setConsumerKey(consumerKey);
  oAuthConsumer.setConsumerSecret(consumerSecret);
  oAuthConsumer.setKeyType(keyType);
  oAuthConsumerPersistence.update(oAuthConsumer);
  return oAuthConsumer;
}
