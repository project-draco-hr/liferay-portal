{
  Thread currentThread=Thread.currentThread();
  ClassLoader contextClassLoader=currentThread.getContextClassLoader();
  try {
    ClassLoader portalClusterLoader=PortalClassLoaderUtil.getClassLoader();
    currentThread.setContextClassLoader(portalClusterLoader);
    Method getKeyMethod=portalClusterLoader.loadClass(_CLASS_NAME).getMethod("getLockKey",String.class);
    MethodHandler methodHandler=new MethodHandler(getKeyMethod,contextPath);
    Object returnValue=methodHandler.invoke(false);
    return returnValue.toString();
  }
 catch (  Exception e) {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to get lock key by class :" + _CLASS_NAME + " loaded by portal class loader",e);
    }
    throw new IllegalStateException("Unable to get lock key",e);
  }
 finally {
    currentThread.setContextClassLoader(contextClassLoader);
  }
}
