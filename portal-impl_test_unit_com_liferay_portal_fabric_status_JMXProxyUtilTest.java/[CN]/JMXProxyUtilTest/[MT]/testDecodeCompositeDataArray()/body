{
  MBeanServer mBeanServer=ManagementFactory.getPlatformMBeanServer();
  CompositeData[] compositeDatas=(CompositeData[])mBeanServer.invoke(createObjectName(ManagementFactory.THREAD_MXBEAN_NAME),"dumpAllThreads",new Object[]{true,true},new String[]{boolean.class.getName(),boolean.class.getName()});
  ThreadInfo[] threadInfos=(ThreadInfo[])JMXProxyUtil.decode(ThreadInfo[].class,compositeDatas);
  assertEquals(createThreadInfos(compositeDatas),threadInfos);
  Assert.assertSame(compositeDatas,JMXProxyUtil.decode(ThreadInfo.class,compositeDatas));
}
