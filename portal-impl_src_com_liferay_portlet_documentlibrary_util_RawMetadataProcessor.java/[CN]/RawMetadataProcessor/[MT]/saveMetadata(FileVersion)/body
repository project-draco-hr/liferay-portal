{
  InputStream inputStream=fileVersion.getContentStream(false);
  Map<String,Fields> rawMetadataMap=RawMetadataProcessorUtil.getRawMetadataMap(inputStream);
  List<DDMStructure> ddmStructures=DDMStructureLocalServiceUtil.getClassStructures(PortalUtil.getClassNameId(DLFileEntry.class),QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setScopeGroupId(fileVersion.getGroupId());
  serviceContext.setUserId(fileVersion.getUserId());
  DLFileEntryMetadataLocalServiceUtil.updateFileEntryMetadata(fileVersion.getCompanyId(),ddmStructures,0L,fileVersion.getFileEntryId(),fileVersion.getFileVersionId(),rawMetadataMap,serviceContext);
}
