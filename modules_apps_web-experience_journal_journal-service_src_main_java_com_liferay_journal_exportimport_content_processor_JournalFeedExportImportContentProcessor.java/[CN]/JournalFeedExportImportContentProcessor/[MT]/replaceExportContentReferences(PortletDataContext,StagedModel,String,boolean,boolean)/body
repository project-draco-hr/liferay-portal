{
  JournalFeed feed=(JournalFeed)stagedModel;
  Group group=_groupLocalService.getGroup(portletDataContext.getScopeGroupId());
  String newGroupFriendlyURL=group.getFriendlyURL();
  newGroupFriendlyURL=newGroupFriendlyURL.substring(1);
  String[] friendlyURLParts=StringUtil.split(feed.getTargetLayoutFriendlyUrl(),StringPool.FORWARD_SLASH);
  String oldGroupFriendlyURL=friendlyURLParts[2];
  if (newGroupFriendlyURL.equals(oldGroupFriendlyURL)) {
    String targetLayoutFriendlyUrl=StringUtil.replaceFirst(feed.getTargetLayoutFriendlyUrl(),StringPool.SLASH + newGroupFriendlyURL + StringPool.SLASH,StringPool.SLASH + DATA_HANDLER_GROUP_FRIENDLY_URL + StringPool.SLASH);
    feed.setTargetLayoutFriendlyUrl(targetLayoutFriendlyUrl);
  }
  Group targetLayoutGroup=_groupLocalService.fetchFriendlyURLGroup(portletDataContext.getCompanyId(),StringPool.SLASH + oldGroupFriendlyURL);
  boolean privateLayout=false;
  if (!PropsValues.LAYOUT_FRIENDLY_URL_PUBLIC_SERVLET_MAPPING.equals(StringPool.SLASH + friendlyURLParts[1])) {
    privateLayout=true;
  }
  String targetLayoutFriendlyURL=StringPool.SLASH + friendlyURLParts[3];
  Layout targetLayout=_layoutLocalService.fetchLayoutByFriendlyURL(targetLayoutGroup.getGroupId(),privateLayout,targetLayoutFriendlyURL);
  Element feedElement=portletDataContext.getExportDataElement(feed);
  portletDataContext.addReferenceElement(feed,feedElement,targetLayout,PortletDataContext.REFERENCE_TYPE_DEPENDENCY,true);
  return content;
}
