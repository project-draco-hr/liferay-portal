{
  final BuildThemeTask buildThemeTask=GradleUtil.addTask(project,BUILD_THEME_TASK_NAME,BuildThemeTask.class);
  buildThemeTask.setDescription("Builds the theme files.");
  buildThemeTask.setDiffsDir(new Callable<File>(){
    @Override public File call() throws Exception {
      return new File(warPluginConvention.getWebAppDir(),"_diffs");
    }
  }
);
  buildThemeTask.setGroup(BasePlugin.BUILD_GROUP);
  buildThemeTask.setOutputDir(new Callable<File>(){
    @Override public File call() throws Exception {
      return warPluginConvention.getWebAppDir();
    }
  }
);
  buildThemeTask.setParentDir(new Callable<File>(){
    @Override public File call() throws Exception {
      String parentName=buildThemeTask.getParentName();
      if (Validator.isNull(parentName)) {
        return null;
      }
      return _getThemeFile(parentThemeFiles,parentName);
    }
  }
);
  buildThemeTask.setParentName("_styled");
  buildThemeTask.setTemplateExtension("ftl");
  buildThemeTask.setThemeName(project.getName());
  buildThemeTask.setUnstyledDir(new Callable<File>(){
    @Override public File call() throws Exception {
      return _getThemeFile(parentThemeFiles,"_unstyled");
    }
  }
);
  return buildThemeTask;
}
