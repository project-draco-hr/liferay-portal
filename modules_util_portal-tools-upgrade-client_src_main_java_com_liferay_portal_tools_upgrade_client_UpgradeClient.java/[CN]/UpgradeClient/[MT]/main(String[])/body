{
  try {
    Options options=_getOptions();
    CommandLineParser parser=new DefaultParser();
    CommandLine cmd=parser.parse(options,args);
    if (cmd.hasOption("help")) {
      HelpFormatter formatter=new HelpFormatter();
      formatter.printHelp("Liferay Database Upgrade Tool",options);
      return;
    }
    String jvmOpts;
    if (cmd.hasOption("jvmOpts")) {
      jvmOpts=cmd.getOptionValue("jvmOpts");
    }
 else {
      jvmOpts="-Xmx2048m -Dfile.encoding=UTF8 -Duser.country=US " + "-Duser.language=en -Duser.timezone=GMT";
    }
    File logFile;
    if (cmd.hasOption("logFile")) {
      logFile=new File(cmd.getOptionValue("logFile"));
    }
 else {
      logFile=new File("upgrade.log");
    }
    if (logFile.exists()) {
      String fileName=logFile.getName();
      logFile.renameTo(new File(fileName + "." + logFile.lastModified()));
      logFile=new File(fileName);
    }
    UpgradeClient upgradeClient=new UpgradeClient(jvmOpts,logFile);
    upgradeClient.upgrade();
  }
 catch (  ParseException pe) {
    System.err.println("Failed to parse command line properties");
    pe.printStackTrace();
  }
catch (  Exception e) {
    System.err.println("Error running upgrade");
    e.printStackTrace();
  }
}
