{
  String value=_serverProperties.getProperty("dir");
  if ((value == null) || value.isEmpty()) {
    String response;
    while (_appServer == null) {
      System.out.print("[ ");
      for (      String appServer : _appServers.keySet()) {
        System.out.print(appServer + " ");
      }
      System.out.println("]");
      System.out.println("Please enter your app server (tomcat): ");
      response=_consoleReader.readLine();
      if (response.isEmpty()) {
        response="tomcat";
      }
      _appServer=_appServers.get(response);
      if (_appServer == null) {
        System.err.println(response + " is not a supported app server");
      }
    }
    File dir=_appServer.getDir();
    File globalLibDir=_appServer.getGlobalLibDir();
    File portalDir=_appServer.getPortalDir();
    System.out.println("Please enter your app server dir (" + dir + "): ");
    response=_consoleReader.readLine();
    if (!response.isEmpty()) {
      _appServer.setDir(response);
    }
    System.out.println("Please enter your global lib dir (" + globalLibDir + "): ");
    response=_consoleReader.readLine();
    if (!response.isEmpty()) {
      _appServer.setGlobalLibDir(response);
    }
    System.out.println("Please enter your portal dir (" + portalDir + "): ");
    response=_consoleReader.readLine();
    if (!response.isEmpty()) {
      _appServer.setPortalDir(response);
    }
    _serverProperties.setProperty("dir",dir.getCanonicalPath());
    _serverProperties.setProperty("global.dir.lib",_getRelativePath(dir,globalLibDir));
    _serverProperties.setProperty("portal.dir",_getRelativePath(dir,portalDir));
  }
 else {
    _appServer=new AppServer(value,_serverProperties.getProperty("global.dir.lib"),_serverProperties.getProperty("portal.dir"));
  }
}
