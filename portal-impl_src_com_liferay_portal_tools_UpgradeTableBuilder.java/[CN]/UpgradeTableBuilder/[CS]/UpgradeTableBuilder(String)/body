{
  File[] files=new File("src/com/liferay/portal/upgrade").listFiles();
  for (  File file : files) {
    if (!file.isDirectory()) {
      continue;
    }
    String folderName=file.getName();
    if (!folderName.startsWith("v")) {
      continue;
    }
    File utilFolder=new File(file,"util");
    if (!utilFolder.exists()) {
      continue;
    }
    String version=StringUtil.replace(folderName.substring(1),"_",".");
    int pos=version.indexOf(".to.");
    if (pos != -1) {
      version=version.substring(pos + 4);
    }
    File upgradeDir=new File(upgradeTableDir,version);
    checkUpgradeTable(upgradeDir,utilFolder.listFiles(),version);
  }
}
