{
  String action="accept";
  if (!accept) {
    action="connect";
  }
  int pos=networkPart.indexOf(StringPool.COLON);
  if (pos == -1) {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to determine socket " + action + " host and port from "+ networkPart+ " because it is missing a colon delimeter");
    }
    return;
  }
  String host=networkPart.substring(0,pos);
  if (!Validator.isDomain(host)) {
    if (_log.isWarnEnabled()) {
      _log.warn("Socket " + action + " host "+ host+ " is not a valid domain");
    }
    return;
  }
  String portString=networkPart.substring(pos + 1);
  int port=GetterUtil.getInteger(portString);
  if (port <= 0) {
    if (_log.isWarnEnabled()) {
      _log.warn("Socket " + action + " port "+ portString+ " is less than or equal to 0");
    }
    return;
  }
  InetAddress[] inetAddresses=null;
  try {
    inetAddresses=InetAddress.getAllByName(host);
  }
 catch (  UnknownHostException uhe) {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to resolve host " + host);
    }
    return;
  }
  Map<String,Set<Integer>> hostsAndPorts=_acceptHostsAndPorts;
  if (!accept) {
    hostsAndPorts=_connectHostsAndPorts;
  }
  for (  InetAddress inetAddress : inetAddresses) {
    Set<Integer> ports=hostsAndPorts.get(inetAddress.getHostAddress());
    if (ports == null) {
      ports=new HashSet<Integer>();
      if (_log.isDebugEnabled()) {
        _log.debug("Allowing socket " + action + " host "+ host+ " with IP "+ inetAddress.getHostAddress()+ " on port "+ port);
      }
      hostsAndPorts.put(inetAddress.getHostAddress(),ports);
    }
    ports.add(port);
  }
}
