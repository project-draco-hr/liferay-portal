{
  UpgradeColumn upgradeGroupIdColumn=new SwapUpgradeColumnImpl("groupId",AvailableMappersUtil.getGroupIdMapper());
  UpgradeColumn upgradeUserIdColumn=new SwapUpgradeColumnImpl("userId",new Integer(Types.VARCHAR),AvailableMappersUtil.getUserIdMapper());
  PKUpgradeColumnImpl upgradePKColumn=new PKUpgradeColumnImpl("questionId",true);
  UpgradeTable upgradeTable=UpgradeTableFactoryUtil.getUpgradeTable(PollsQuestionTable.TABLE_NAME,PollsQuestionTable.TABLE_COLUMNS,upgradePKColumn,upgradeGroupIdColumn,upgradeUserIdColumn);
  upgradeTable.setCreateSQL(PollsQuestionTable.TABLE_SQL_CREATE);
  upgradeTable.setIndexesSQL(PollsQuestionTable.TABLE_SQL_ADD_INDEXES);
  upgradeTable.updateTable();
  ValueMapper questionIdMapper=upgradePKColumn.getValueMapper();
  AvailableMappersUtil.setPollsQuestionIdMapper(questionIdMapper);
  UpgradeColumn upgradeQuestionIdColumn=new SwapUpgradeColumnImpl("questionId",questionIdMapper);
  PKUpgradeColumnImpl upgradeChoiceId=new PollsChoiceIdUpgradeColumnImpl(upgradeQuestionIdColumn);
  upgradeTable=UpgradeTableFactoryUtil.getUpgradeTable(PollsChoiceTable.TABLE_NAME,PollsChoiceTable.TABLE_COLUMNS,upgradeQuestionIdColumn,upgradeChoiceId);
  upgradeTable.setCreateSQL(PollsChoiceTable.TABLE_SQL_CREATE);
  upgradeTable.setIndexesSQL(PollsChoiceTable.TABLE_SQL_ADD_INDEXES);
  upgradeTable.updateTable();
  ValueMapper choiceIdMapper=upgradeChoiceId.getValueMapper();
  UpgradeColumn upgradeVoteChoiceIdColumn=new PollsVoteChoiceIdUpgradeColumnImpl(upgradeQuestionIdColumn,choiceIdMapper);
  upgradeTable=UpgradeTableFactoryUtil.getUpgradeTable(PollsVoteTable.TABLE_NAME,PollsVoteTable.TABLE_COLUMNS,new PKUpgradeColumnImpl("voteId",false),upgradeUserIdColumn,upgradeQuestionIdColumn,upgradeVoteChoiceIdColumn);
  upgradeTable.setCreateSQL(PollsVoteTable.TABLE_SQL_CREATE);
  upgradeTable.setIndexesSQL(PollsVoteTable.TABLE_SQL_ADD_INDEXES);
  upgradeTable.updateTable();
}
