{
synchronized (IndexWriter.class) {
    if ((content != null) && (content.indexOf("<root>") != -1) && (content.indexOf("<dynamic-content>") != -1)) {
      content=StringUtil.replace(content,"<![CDATA[",StringPool.BLANK);
      content=StringUtil.replace(content,"]]>",StringPool.BLANK);
    }
    content=Html.stripHtml(content);
    IndexWriter writer=LuceneUtil.getWriter(companyId);
    Document doc=new Document();
    doc.add(LuceneFields.getKeyword(LuceneFields.UID,LuceneFields.getUID(PORTLET_ID,articleId)));
    doc.add(LuceneFields.getKeyword(LuceneFields.COMPANY_ID,companyId));
    doc.add(LuceneFields.getKeyword(LuceneFields.PORTLET_ID,PORTLET_ID));
    doc.add(LuceneFields.getKeyword(LuceneFields.GROUP_ID,groupId));
    doc.add(LuceneFields.getText(LuceneFields.TITLE,title));
    doc.add(LuceneFields.getText(LuceneFields.CONTENT,content));
    doc.add(LuceneFields.getDate(LuceneFields.MODIFIED));
    doc.add(LuceneFields.getKeyword("articleId",articleId));
    doc.add(LuceneFields.getKeyword("version",Double.toString(version)));
    doc.add(LuceneFields.getKeyword("type",type));
    doc.add(LuceneFields.getDate("displayDate",displayDate));
    writer.addDocument(doc);
    LuceneUtil.write(writer);
  }
}
