{
  long groupId=ParamUtil.getLong(actionRequest,"groupId");
  long recordSetId=ParamUtil.getLong(actionRequest,"recordSetId");
  String portletId=PortalUtil.getPortletId(actionRequest);
  DDLRecordSet recordSet=_ddlRecordSetService.getRecordSet(recordSetId);
  DDMForm ddmForm=getDDMForm(recordSet);
  DDMFormValues ddmFormValues=_ddmFormValuesFactory.create(actionRequest,ddmForm);
  ServiceContext serviceContext=ServiceContextFactory.getInstance(DDLRecord.class.getName(),actionRequest);
  _ddlRecordService.addRecord(groupId,recordSetId,DDLRecordConstants.DISPLAY_INDEX_DEFAULT,ddmFormValues,serviceContext);
  String successURL=GetterUtil.getString(recordSet.getSettingsProperty("successURL",StringPool.BLANK));
  if (SessionErrors.isEmpty(actionRequest) && Validator.isNotNull(successURL)) {
    SessionMessages.add(actionRequest,portletId,SessionMessages.KEY_SUFFIX_HIDE_DEFAULT_SUCCESS_MESSAGE);
    actionResponse.sendRedirect(successURL);
  }
}
