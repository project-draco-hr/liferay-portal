{
  try {
    String companyId=PortalUtil.getCompanyId(req);
    String groupId=PortalUtil.getPortletGroupId(req);
    String structureId=ParamUtil.getString(req,"structureId");
    JournalStructure structure=JournalStructureLocalServiceUtil.getStructure(companyId,groupId,structureId);
    String fileName=structure.getStructureId() + ".xml";
    byte[] byteArray=structure.getXsd().getBytes();
    ServletResponseUtil.sendFile(res,fileName,byteArray,Constants.TEXT_XML);
    return null;
  }
 catch (  Exception e) {
    req.setAttribute(PageContext.EXCEPTION,e);
    return mapping.findForward(Constants.COMMON_ERROR);
  }
}
