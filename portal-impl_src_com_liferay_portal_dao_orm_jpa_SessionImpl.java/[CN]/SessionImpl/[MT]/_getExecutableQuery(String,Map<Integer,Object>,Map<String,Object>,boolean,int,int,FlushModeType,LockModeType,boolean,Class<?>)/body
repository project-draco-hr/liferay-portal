{
  javax.persistence.Query query=null;
  if (sqlQuery) {
    if (entityClass != null) {
      query=_entityManager.createNativeQuery(queryString,entityClass);
    }
 else {
      query=_entityManager.createNativeQuery(queryString);
    }
  }
 else {
    query=_entityManager.createQuery(queryString);
  }
  _setParameters(query,positionalParameterMap,namedParameterMap,strictName);
  if (firstResult != -1) {
    query.setFirstResult(firstResult);
  }
  if (maxResults != -1) {
    query.setMaxResults(maxResults);
  }
  if (flushMode != null) {
    query.setFlushMode(flushMode);
  }
  if (lockModeType != null) {
    query.setLockMode(lockModeType);
  }
  return query;
}
