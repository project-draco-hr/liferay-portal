{
  String title=dlFileEntry.getTitle();
  String titleWithoutExtension=dlFileEntry.getTitle();
  String titleExtension=StringPool.BLANK;
  if (title.endsWith(StringPool.PERIOD.concat(dlFileEntry.getExtension()))) {
    titleWithoutExtension=FileUtil.stripExtension(title);
    titleExtension=dlFileEntry.getExtension();
  }
  int count=1;
  while (true) {
    String uniqueTitle=titleWithoutExtension + StringPool.UNDERLINE + String.valueOf(count);
    if (Validator.isNotNull(titleExtension)) {
      uniqueTitle=uniqueTitle.concat(StringPool.PERIOD.concat(titleExtension));
    }
    String uniqueFileName=DLUtil.getSanitizedFileName(uniqueTitle,dlFileEntry.getExtension());
    try {
      DLFileEntryLocalServiceUtil.validateFile(dlFileEntry.getGroupId(),dlFileEntry.getFolderId(),dlFileEntry.getFileEntryId(),uniqueFileName,uniqueTitle);
      renameFileEntryTitle(dlFileEntry,uniqueTitle);
      return;
    }
 catch (    PortalException e) {
      if (!(e instanceof DuplicateFolderNameException) && !(e instanceof DuplicateFileException)) {
        throw e;
      }
      count++;
    }
  }
}
