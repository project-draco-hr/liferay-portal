{
  String title=dlFileEntry.getTitle();
  dlFileEntry.setTitle(newTitle);
  String fileName=DLUtil.getSanitizedFileName(newTitle,dlFileEntry.getExtension());
  dlFileEntry.setFileName(fileName);
  DLFileEntry renamedFileEntry=DLFileEntryLocalServiceUtil.updateDLFileEntry(dlFileEntry);
  DLFileVersion dlFileVersion=dlFileEntry.getFileVersion();
  dlFileVersion.setTitle(newTitle);
  dlFileVersion.setFileName(fileName);
  DLFileVersionLocalServiceUtil.updateDLFileVersion(dlFileVersion);
  if (_log.isDebugEnabled()) {
    _log.debug("Invalid title " + title + " renamed to "+ newTitle+ " for file entry "+ dlFileEntry.getFileEntryId());
  }
  return renamedFileEntry;
}
