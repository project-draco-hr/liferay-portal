{
  String symbolicName=event.getBundle().getSymbolicName();
  if (event instanceof OsgiBundleContextRefreshedEvent) {
    PortletBeanLocatorUtil.setBeanLocator(symbolicName,_buildBeanLocator(event));
  }
 else   if (event instanceof OsgiBundleContextClosedEvent) {
    OsgiBundleContextClosedEvent closedEvent=(OsgiBundleContextClosedEvent)event;
    Throwable error=closedEvent.getFailureCause();
    if (error != null) {
      PortletBeanLocatorUtil.setBeanLocator(symbolicName,null);
    }
  }
}
