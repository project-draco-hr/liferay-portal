{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  Group group=themeDisplay.getScopeGroup();
  if (!group.isControlPanel()) {
    return null;
  }
  Portlet portlet=getPortlet();
  String controlPanelEntryCategory=portlet.getControlPanelEntryCategory();
  if (Validator.isNull(controlPanelEntryCategory) || !controlPanelEntryCategory.startsWith(PortletCategoryKeys.SITE_ADMINISTRATION)) {
    return null;
  }
  if (groupProvider == null) {
    return null;
  }
  return groupProvider.getGroup(request);
}
