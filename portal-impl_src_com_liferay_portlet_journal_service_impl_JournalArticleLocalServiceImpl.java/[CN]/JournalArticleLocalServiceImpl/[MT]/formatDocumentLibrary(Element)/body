{
  for (  Element dynamicContentElement : dynamicElementElement.elements("dynamic-content")) {
    JSONObject jsonObject=JSONFactoryUtil.createJSONObject(dynamicContentElement.getText());
    String uuid=jsonObject.getString("uuid");
    long groupId=jsonObject.getLong("groupId");
    boolean tempFile=jsonObject.getBoolean("tempFile");
    FileEntry fileEntry=dlAppLocalService.getFileEntryByUuidAndGroupId(uuid,groupId);
    if (tempFile) {
      String fileEntryName=DLUtil.getFileName(fileEntry.getGroupId(),fileEntry.getFolderId(),fileEntry.getFileName());
      fileEntry=dlAppLocalService.addFileEntry(fileEntry.getUserId(),fileEntry.getGroupId(),0,fileEntryName,fileEntry.getMimeType(),fileEntryName,StringPool.BLANK,StringPool.BLANK,fileEntry.getContentStream(),fileEntry.getSize(),new ServiceContext());
    }
    String previewURL=DLUtil.getPreviewURL(fileEntry,fileEntry.getFileVersion(),null,StringPool.BLANK,false,true);
    dynamicContentElement.clearContent();
    dynamicContentElement.addCDATA(previewURL);
  }
}
