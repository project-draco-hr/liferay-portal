{
  User user=userPersistence.findByPrimaryKey(userId);
  Date now=new Date();
  JournalArticle article=journalArticlePersistence.findByG_A_V(groupId,articleId,version);
  article.setModifiedDate(now);
  article.setApproved(true);
  article.setApprovedByUserId(user.getUserId());
  article.setApprovedByUserName(user.getFullName());
  article.setApprovedDate(now);
  article.setExpired(false);
  if ((article.getExpirationDate() != null) && (article.getExpirationDate().before(now))) {
    article.setExpirationDate(null);
  }
  journalArticlePersistence.update(article,false);
  ExpandoBridge expandoBridge=article.getExpandoBridge();
  expandoBridge.setAttributes(serviceContext);
  tagsAssetLocalService.updateVisible(JournalArticle.class.getName(),article.getResourcePrimKey(),true);
  PortletPreferences preferences=ServiceContextUtil.getPortletPreferences(serviceContext);
  try {
    sendEmail(article,articleURL,preferences,"granted");
  }
 catch (  IOException ioe) {
    throw new SystemException(ioe);
  }
  reIndex(article);
  return article;
}
