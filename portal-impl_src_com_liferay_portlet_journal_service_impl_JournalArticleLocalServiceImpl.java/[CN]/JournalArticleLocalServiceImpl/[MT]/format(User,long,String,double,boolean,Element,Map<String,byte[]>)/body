{
  for (  Element element : root.elements()) {
    String elInstanceId=element.attributeValue("instance-id",StringPool.BLANK);
    String elType=element.attributeValue("type",StringPool.BLANK);
    if (elType.equals("document_library")) {
      formatDocumentLibrary(element);
    }
 else     if (elType.equals("image")) {
      String elName=element.attributeValue("name",StringPool.BLANK);
      String elIndex=element.attributeValue("index",StringPool.BLANK);
      String name=elName + "_" + elIndex;
      formatImage(groupId,articleId,version,incrementVersion,element,elInstanceId,name,images);
    }
 else     if (elType.equals("text_area") || elType.equals("text") || elType.equals("text_box")) {
      List<Element> dynamicContentElements=element.elements("dynamic-content");
      for (      Element dynamicContentElement : dynamicContentElements) {
        String dynamicContent=dynamicContentElement.getText();
        if (Validator.isNotNull(dynamicContent)) {
          String contentType=ContentTypes.TEXT_PLAIN;
          if (elType.equals("text_area")) {
            contentType=ContentTypes.TEXT_HTML;
          }
          dynamicContent=SanitizerUtil.sanitize(user.getCompanyId(),groupId,user.getUserId(),JournalArticle.class.getName(),0,contentType,dynamicContent);
          dynamicContentElement.clearContent();
          dynamicContentElement.addCDATA(dynamicContent);
        }
      }
    }
    format(user,groupId,articleId,version,incrementVersion,element,images);
  }
}
