{
  JournalArticle oldArticle=journalArticlePersistence.findByG_A_V(groupId,articleId,version);
  Date displayDate=oldArticle.getDisplayDate();
  Date expirationDate=oldArticle.getExpirationDate();
  boolean neverExpire=true;
  int expirationDateMonth=0;
  int expirationDateDay=0;
  int expirationDateYear=0;
  int expirationDateHour=0;
  int expirationDateMinute=0;
  if (expirationDate != null) {
    neverExpire=false;
    expirationDateMonth=expirationDate.getMonth();
    expirationDateDay=expirationDate.getDay();
    expirationDateYear=expirationDate.getYear();
    expirationDateHour=expirationDate.getHours();
    expirationDateMinute=expirationDate.getMinutes();
  }
  Date reviewDate=oldArticle.getReviewDate();
  boolean neverReview=true;
  int reviewDateMonth=0;
  int reviewDateDay=0;
  int reviewDateYear=0;
  int reviewDateHour=0;
  int reviewDateMinute=0;
  if (reviewDate != null) {
    neverReview=false;
    reviewDateMonth=reviewDate.getMonth();
    reviewDateDay=reviewDate.getDay();
    reviewDateYear=reviewDate.getYear();
    reviewDateHour=reviewDate.getHours();
    reviewDateMinute=reviewDate.getMinutes();
  }
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setTagsEntries(getTagsEntries(oldArticle));
  serviceContext.setTagsCategories(getTagsCategories(oldArticle));
  PortletPreferencesIds portletPreferencesIds=new PortletPreferencesIds(oldArticle.getCompanyId(),PortletKeys.PREFS_OWNER_ID_DEFAULT,PortletKeys.PREFS_OWNER_TYPE_LAYOUT,PortletKeys.PREFS_PLID_SHARED,PortletKeys.JOURNAL);
  serviceContext.setPortletPreferencesIds(portletPreferencesIds);
  return updateArticle(oldArticle.getUserId(),groupId,articleId,version,incrementVersion,oldArticle.getTitle(),oldArticle.getDescription(),content,oldArticle.getType(),oldArticle.getStructureId(),oldArticle.getTemplateId(),displayDate.getMonth(),displayDate.getDay(),displayDate.getYear(),displayDate.getHours(),displayDate.getMinutes(),expirationDateMonth,expirationDateDay,expirationDateYear,expirationDateHour,expirationDateMinute,neverExpire,reviewDateMonth,reviewDateDay,reviewDateYear,reviewDateHour,reviewDateMinute,neverReview,oldArticle.getIndexable(),true,oldArticle.getSmallImageURL(),null,null,null,serviceContext);
}
