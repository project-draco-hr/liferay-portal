{
  Iterator itr=root.elements().iterator();
  while (itr.hasNext()) {
    Element el=(Element)itr.next();
    String elName=el.attributeValue("name",StringPool.BLANK);
    String elType=el.attributeValue("type",StringPool.BLANK);
    if (elType.equals("image")) {
      formatImage(groupId,articleId,version,incrementVersion,el,elName,images);
    }
 else     if (elType.equals("text_area")) {
      Element dynamicContent=el.element("dynamic-content");
      String text=dynamicContent.getText();
      try {
        text=ParserUtils.trimTags(text,new String[]{"script"},false,true);
      }
 catch (      ParserException pe) {
        text=pe.getLocalizedMessage();
      }
catch (      UnsupportedEncodingException uee) {
        text=uee.getLocalizedMessage();
      }
      dynamicContent.setText(text);
    }
    format(groupId,articleId,version,incrementVersion,el,images);
  }
}
