{
  List<JournalArticle> approvedArticles=journalArticlePersistence.findByG_A_ST(article.getGroupId(),article.getArticleId(),WorkflowConstants.STATUS_APPROVED,0,2);
  if ((article.getStatus() != WorkflowConstants.STATUS_APPROVED) && (approvedArticles.size() > 0)) {
    JournalArticle previousApprovedArticle=approvedArticles.get(0);
    if (article.isIndexable()) {
      Indexer indexer=IndexerRegistryUtil.getIndexer(JournalArticle.class);
      indexer.reindex(previousApprovedArticle);
    }
  }
 else   if (approvedArticles.size() > 1) {
    JournalArticle previousApprovedArticle=approvedArticles.get(1);
    if (article.isIndexable()) {
      Indexer indexer=IndexerRegistryUtil.getIndexer(JournalArticle.class);
      indexer.reindex(previousApprovedArticle);
    }
  }
 else {
    if (article.isIndexable()) {
      Indexer indexer=IndexerRegistryUtil.getIndexer(JournalArticle.class);
      indexer.delete(article);
    }
    assetEntryLocalService.updateVisible(JournalArticle.class.getName(),article.getResourcePrimKey(),false);
  }
}
