{
  Locale defaultLocale=LocaleUtil.fromLanguageId(LocalizationUtil.getDefaultLocale(content));
  if ((classNameId == 0) && (titleMap.isEmpty() || Validator.isNull(titleMap.get(defaultLocale)))) {
    throw new ArticleTitleException();
  }
 else   if (Validator.isNull(type)) {
    throw new ArticleTypeException();
  }
  validateContent(content);
  if (Validator.isNotNull(structureId)) {
    Group companyGroup=groupLocalService.getCompanyGroup(companyId);
    try {
      journalStructurePersistence.findByG_S(groupId,structureId);
    }
 catch (    NoSuchStructureException nsse) {
      journalStructurePersistence.findByG_S(companyGroup.getGroupId(),structureId);
    }
    JournalTemplate template=null;
    if (Validator.isNotNull(templateId)) {
      try {
        template=journalTemplatePersistence.findByG_T(groupId,templateId);
      }
 catch (      NoSuchTemplateException nste) {
        template=journalTemplatePersistence.findByG_T(companyGroup.getGroupId(),templateId);
      }
      if (!template.getStructureId().equals(structureId)) {
        throw new NoSuchTemplateException();
      }
    }
 else     if (classNameId == 0) {
      throw new NoSuchTemplateException();
    }
  }
  String[] imageExtensions=PrefsPropsUtil.getStringArray(PropsKeys.JOURNAL_IMAGE_EXTENSIONS,StringPool.COMMA);
  if (smallImage && Validator.isNull(smallImageURL) && (smallImageFile != null)&& (smallImageBytes != null)) {
    String smallImageName=smallImageFile.getName();
    if (smallImageName != null) {
      boolean validSmallImageExtension=false;
      for (      String _imageExtension : imageExtensions) {
        if (StringPool.STAR.equals(_imageExtension) || StringUtil.endsWith(smallImageName,_imageExtension)) {
          validSmallImageExtension=true;
          break;
        }
      }
      if (!validSmallImageExtension) {
        throw new ArticleSmallImageNameException(smallImageName);
      }
    }
    long smallImageMaxSize=PrefsPropsUtil.getLong(PropsKeys.JOURNAL_IMAGE_SMALL_MAX_SIZE);
    if ((smallImageMaxSize > 0) && ((smallImageBytes == null) || (smallImageBytes.length > smallImageMaxSize))) {
      throw new ArticleSmallImageSizeException();
    }
  }
}
