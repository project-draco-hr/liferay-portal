{
  Date[] dateInterval=getDateInterval(article.getGroupId(),article.getArticleId(),article.getDisplayDate(),article.getExpirationDate());
  Date displayDate=dateInterval[0];
  Date expirationDate=dateInterval[1];
  boolean visible=article.isApproved();
  boolean addDraftAssetEntry=false;
  if (!article.isApproved() && (article.getVersion() != JournalArticleConstants.DEFAULT_VERSION)) {
    int approvedArticlesCount=journalArticlePersistence.countByG_A_S(article.getGroupId(),article.getArticleId(),WorkflowConstants.STATUS_APPROVED);
    if (approvedArticlesCount > 0) {
      addDraftAssetEntry=true;
    }
  }
  if (addDraftAssetEntry) {
    assetEntryLocalService.updateEntry(userId,article.getGroupId(),JournalArticle.class.getName(),article.getPrimaryKey(),assetCategoryIds,assetTagNames,false,null,null,displayDate,expirationDate,ContentTypes.TEXT_HTML,article.getTitle(),article.getDescription(),null,null,0,0,null,false);
  }
 else {
    assetEntryLocalService.updateEntry(userId,article.getGroupId(),JournalArticle.class.getName(),article.getResourcePrimKey(),assetCategoryIds,assetTagNames,visible,null,null,displayDate,expirationDate,ContentTypes.TEXT_HTML,article.getTitle(),article.getDescription(),null,null,0,0,null,false);
  }
}
