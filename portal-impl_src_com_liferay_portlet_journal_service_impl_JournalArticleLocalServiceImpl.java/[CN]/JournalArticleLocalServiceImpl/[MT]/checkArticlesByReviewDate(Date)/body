{
  List<JournalArticle> articles=journalArticleFinder.findByReviewDate(JournalArticleConstants.CLASSNAME_ID_DEFAULT,reviewDate,_previousCheckDate);
  List<JournalArticle> latestArticles=new ArrayList<JournalArticle>();
  for (  JournalArticle article : articles) {
    long groupId=article.getGroupId();
    String articleId=article.getArticleId();
    double version=article.getVersion();
    if (!journalArticleLocalService.isLatestVersion(groupId,articleId,version)) {
      article=journalArticleLocalService.getLatestArticle(groupId,articleId);
    }
    if (!latestArticles.contains(article)) {
      latestArticles.add(article);
    }
  }
  if (_log.isDebugEnabled()) {
    _log.debug("Sending review notifications for " + latestArticles.size() + " articles");
  }
  for (  JournalArticle article : latestArticles) {
    String articleURL=StringPool.BLANK;
    long ownerId=article.getGroupId();
    int ownerType=PortletKeys.PREFS_OWNER_TYPE_GROUP;
    long plid=PortletKeys.PREFS_PLID_SHARED;
    String portletId=PortletKeys.JOURNAL;
    PortletPreferences preferences=portletPreferencesLocalService.getPreferences(article.getCompanyId(),ownerId,ownerType,plid,portletId);
    sendEmail(article,articleURL,preferences,"review",new ServiceContext());
  }
}
