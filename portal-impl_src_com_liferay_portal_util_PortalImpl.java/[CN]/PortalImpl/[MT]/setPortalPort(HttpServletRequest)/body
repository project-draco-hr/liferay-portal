{
  if (request.isSecure()) {
    if (_securePortalPort.get() == -1) {
      int securePortalPort=request.getServerPort();
      _securePortalPort.compareAndSet(-1,securePortalPort);
    }
  }
 else {
    if (_portalPort.get() == -1) {
      int portalPort=request.getServerPort();
      if (_portalPort.compareAndSet(-1,portalPort)) {
        notifyPortalPortEventListeners(portalPort);
      }
    }
  }
}
