{
  long plid=getPlidFromPortletId(groupId,portletId);
  if (plid == LayoutConstants.DEFAULT_PLID) {
    return null;
  }
  StringBundler sb=new StringBundler(4);
  Layout layout=LayoutLocalServiceUtil.getLayout(plid);
  Company company=CompanyLocalServiceUtil.getCompany(layout.getCompanyId());
  Group group=GroupLocalServiceUtil.getGroup(groupId);
  String portalURL=getPortalURL(company.getVirtualHost(),getPortalPort(),false);
  sb.append(portalURL);
  if (layout.isPrivateLayout()) {
    if (group.isUser()) {
      sb.append(PortalUtil.getPathFriendlyURLPrivateUser());
    }
 else {
      sb.append(PortalUtil.getPathFriendlyURLPrivateGroup());
    }
  }
 else {
    sb.append(PortalUtil.getPathFriendlyURLPublic());
  }
  sb.append(group.getFriendlyURL());
  sb.append(layout.getFriendlyURL());
  return sb.toString();
}
