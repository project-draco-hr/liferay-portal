{
  if (!canonicalURL || isValidVirtualHost(themeDisplay.getServerName())) {
    return false;
  }
  long refererPlid=themeDisplay.getRefererPlid();
  if (refererPlid > 0) {
    Layout refererLayout=LayoutLocalServiceUtil.fetchLayout(refererPlid);
    if ((refererLayout != null) && ((refererLayout.getGroupId() != group.getGroupId()) || (refererLayout.isPrivateLayout() != privateLayoutSet))) {
      return false;
    }
  }
  return true;
}
