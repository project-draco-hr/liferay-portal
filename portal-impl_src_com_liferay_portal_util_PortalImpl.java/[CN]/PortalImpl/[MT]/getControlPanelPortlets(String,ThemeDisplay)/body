{
  Set<Portlet> portletsSet=new TreeSet<Portlet>(new PortletControlPanelWeightComparator());
  List<Portlet> portletsList=PortletLocalServiceUtil.getPortlets(themeDisplay.getCompanyId());
  for (  Portlet portlet : portletsList) {
    if (category.equals(portlet.getControlPanelEntryCategory())) {
      portletsSet.add(portlet);
    }
  }
  return filterControlPanelPortlets(portletsSet,category,themeDisplay);
}
