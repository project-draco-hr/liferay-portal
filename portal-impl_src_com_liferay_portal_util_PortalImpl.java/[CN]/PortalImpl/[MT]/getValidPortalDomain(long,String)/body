{
  for (  String virtualHost : PropsValues.VIRTUAL_HOSTS_VALID_HOSTS) {
    if (StringUtil.equalsIgnoreCase(domain,virtualHost) || StringUtil.wildcardMatches(domain,virtualHost,CharPool.QUESTION,CharPool.STAR,CharPool.PERCENT,false)) {
      return domain;
    }
  }
  if (_log.isWarnEnabled()) {
    _log.warn("Set the property \"" + PropsKeys.VIRTUAL_HOSTS_VALID_HOSTS + "\" in portal.properties to allow \""+ domain+ "\" as a domain");
  }
  try {
    Company company=CompanyLocalServiceUtil.getCompanyById(getDefaultCompanyId());
    return company.getVirtualHostname();
  }
 catch (  Exception e) {
    _log.error("Unable to load default portal instance",e);
  }
  return _LOCALHOST;
}
