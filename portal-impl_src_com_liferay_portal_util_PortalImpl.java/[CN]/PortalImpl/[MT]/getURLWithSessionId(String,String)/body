{
  if (!PropsValues.SESSION_ENABLE_URL_WITH_SESSION_ID) {
    return url;
  }
  if (Validator.isNull(url)) {
    return url;
  }
  int x=url.indexOf(CharPool.SEMICOLON);
  if (x != -1) {
    return url;
  }
  x=url.indexOf(CharPool.QUESTION);
  if (x != -1) {
    StringBundler sb=new StringBundler(4);
    sb.append(url.substring(0,x));
    sb.append(_JSESSIONID);
    sb.append(sessionId);
    sb.append(url.substring(x));
    return sb.toString();
  }
  x=url.indexOf(StringPool.DOUBLE_SLASH);
  StringBundler sb=new StringBundler(4);
  sb.append(url);
  if (x != -1) {
    int y=url.lastIndexOf(CharPool.SLASH);
    if ((x + 1) == y) {
      sb.append(StringPool.SLASH);
    }
  }
  sb.append(_JSESSIONID);
  sb.append(sessionId);
  return sb.toString();
}
