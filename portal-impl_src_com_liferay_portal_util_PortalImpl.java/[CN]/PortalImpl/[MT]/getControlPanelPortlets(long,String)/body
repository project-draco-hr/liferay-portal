{
  Set<Portlet> portletsSet=new TreeSet<Portlet>(new PortletControlPanelWeightComparator());
  if (Validator.isNull(category)) {
    return portletsSet;
  }
  List<Portlet> portletsList=PortletLocalServiceUtil.getPortlets(companyId);
  for (  Portlet portlet : portletsList) {
    String portletCategory=portlet.getControlPanelEntryCategory();
    if (category.equals(portletCategory) || (category.endsWith(StringPool.PERIOD) && Validator.startsWith(portletCategory,category))) {
      portletsSet.add(portlet);
    }
  }
  return portletsSet;
}
