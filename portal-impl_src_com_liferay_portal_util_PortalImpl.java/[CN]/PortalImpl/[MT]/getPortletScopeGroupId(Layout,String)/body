{
  try {
    PortletPreferences prefs=PortletPreferencesFactoryUtil.getLayoutPortletSetup(layout,portletId);
    long scopeLayoutId=GetterUtil.getLong(prefs.getValue("lfr-scope-layout-id",StringPool.BLANK));
    if (scopeLayoutId > 0) {
      Layout scopeLayout=LayoutLocalServiceUtil.getLayout(layout.getGroupId(),layout.isPrivateLayout(),scopeLayoutId);
      return scopeLayout.getScopeGroup().getGroupId();
    }
  }
 catch (  Exception e) {
  }
  return getPortletGroupId(layout);
}
