{
  Set<Group> groups=new LinkedHashSet<>();
  long siteGroupId=getSiteGroupId(groupId);
  Group siteGroup=GroupLocalServiceUtil.fetchGroup(siteGroupId);
  if (siteGroup == null) {
    return groups;
  }
  for (  Group group : siteGroup.getAncestors()) {
    if (checkContentSharingWithChildrenEnabled && !SitesUtil.isContentSharingWithChildrenEnabled(group)) {
      continue;
    }
    groups.add(group);
  }
  if (!siteGroup.isCompany()) {
    groups.add(GroupLocalServiceUtil.getCompanyGroup(siteGroup.getCompanyId()));
  }
  return groups;
}
