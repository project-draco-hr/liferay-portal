{
  Locale locale=(Locale)request.getAttribute(WebKeys.LOCALE);
  if (locale == _NULL_LOCALE) {
    return null;
  }
  if (locale == null) {
    locale=getLocale(request,null,false);
    if (locale == null) {
      request.setAttribute(WebKeys.LOCALE,_NULL_LOCALE);
    }
 else {
      request.setAttribute(WebKeys.LOCALE,locale);
    }
  }
  return locale;
}
