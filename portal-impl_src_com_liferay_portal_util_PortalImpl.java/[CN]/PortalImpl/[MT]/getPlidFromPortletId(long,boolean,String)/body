{
  long plid=LayoutImpl.DEFAULT_PLID;
  StringMaker sm=new StringMaker();
  sm.append(groupId);
  sm.append(StringPool.SPACE);
  sm.append(privateLayout);
  sm.append(StringPool.SPACE);
  sm.append(portletId);
  String key=sm.toString();
  Long plidObj=_plidToPortletIdCache.get(key);
  if (plidObj == null) {
    plid=_getPlidFromPortletId(groupId,privateLayout,portletId);
    if (plid != LayoutImpl.DEFAULT_PLID) {
      _plidToPortletIdCache.put(key,plid);
    }
  }
 else {
    plid=plidObj.longValue();
    boolean validPlid=false;
    try {
      Layout layout=LayoutLocalServiceUtil.getLayout(plid);
      LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
      if (layoutTypePortlet.hasPortletId(portletId)) {
        validPlid=true;
      }
    }
 catch (    Exception e) {
    }
    if (!validPlid) {
      _plidToPortletIdCache.remove(key);
      plid=_getPlidFromPortletId(groupId,privateLayout,portletId);
      if (plid != LayoutImpl.DEFAULT_PLID) {
        _plidToPortletIdCache.put(key,plid);
      }
    }
  }
  return plid;
}
