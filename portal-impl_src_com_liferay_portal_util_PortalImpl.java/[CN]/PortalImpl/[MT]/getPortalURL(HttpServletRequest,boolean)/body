{
  String serverName=request.getServerName();
  if (!Validator.isDomain(serverName)) {
    throw new RuntimeException("Invalid server name " + serverName);
  }
  return getPortalURL(serverName,request.getServerPort(),secure);
}
