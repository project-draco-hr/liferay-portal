{
  if (StringUtil.equalsIgnoreCase(domain,_LOCALHOST)) {
    return _LOCALHOST;
  }
  if (StringUtil.equalsIgnoreCase(domain,PropsValues.WEB_SERVER_HOST)) {
    return PropsValues.WEB_SERVER_HOST;
  }
  if (isValidVirtualHostname(domain)) {
    return domain;
  }
  if (StringUtil.equalsIgnoreCase(domain,getCDNHostHttp(companyId))) {
    return domain;
  }
  if (StringUtil.equalsIgnoreCase(domain,getCDNHostHttps(companyId))) {
    return domain;
  }
  try {
    Company company=CompanyLocalServiceUtil.getCompanyById(getDefaultCompanyId());
    return company.getVirtualHostname();
  }
 catch (  Exception e) {
    _log.error("Unable to load default portal instance",e);
  }
  return _LOCALHOST;
}
