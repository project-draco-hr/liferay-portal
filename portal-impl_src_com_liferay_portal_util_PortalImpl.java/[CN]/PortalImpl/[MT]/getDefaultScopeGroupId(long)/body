{
  long doAsGroupId=0;
  Collection<Portlet> portlets=PortalUtil.getControlPanelPortlets(companyId,PortletCategoryKeys.CONTENT);
  List<Group> manageableSites=GroupServiceUtil.getManageableSites(portlets,1);
  if (!manageableSites.isEmpty()) {
    doAsGroupId=manageableSites.get(0).getGroupId();
  }
 else {
    Group guestGroup=GroupLocalServiceUtil.fetchGroup(companyId,GroupConstants.GUEST);
    if (guestGroup != null) {
      doAsGroupId=guestGroup.getGroupId();
    }
  }
  return doAsGroupId;
}
