{
  long doAsGroupId=0;
  Collection<Portlet> portlets=getControlPanelPortlets(companyId,PortletCategoryKeys.SITE_ADMINISTRATION);
  List<Group> groups=GroupServiceUtil.getManageableSiteGroups(portlets,1);
  if (!groups.isEmpty()) {
    Group group=groups.get(0);
    doAsGroupId=group.getGroupId();
  }
 else {
    Group guestGroup=GroupLocalServiceUtil.fetchGroup(companyId,GroupConstants.GUEST);
    if (guestGroup != null) {
      doAsGroupId=guestGroup.getGroupId();
    }
  }
  return doAsGroupId;
}
