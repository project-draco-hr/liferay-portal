{
  if (portletRequest instanceof PortletRequestImpl) {
    PortletRequestImpl portletRequestImpl=(PortletRequestImpl)portletRequest;
    return portletRequestImpl.getHttpServletRequest();
  }
 else   if (portletRequest instanceof PortletRequestWrapper) {
    PortletRequestWrapper portletRequestWrapper=(PortletRequestWrapper)portletRequest;
    return getHttpServletRequest(portletRequestWrapper.getRequest());
  }
 else   if (portletRequest instanceof com.sun.portal.portletcontainer.portlet.impl.PortletRequestImpl) {
    com.sun.portal.portletcontainer.portlet.impl.PortletRequestImpl portletRequestImpl=(com.sun.portal.portletcontainer.portlet.impl.PortletRequestImpl)portletRequest;
    return portletRequestImpl.getHttpServletRequest();
  }
 else {
    throw new RuntimeException("Unable to get the HTTP servlet request from " + portletRequest.getClass().getName());
  }
}
