{
  Map<String,Object> customAttributes=new HashMap<String,Object>();
  Enumeration<String> enu=actionRequest.getParameterNames();
  List<String> names=new ArrayList<String>();
  while (enu.hasMoreElements()) {
    String param=enu.nextElement();
    if (param.indexOf("ExpandoAttributeName(") != -1) {
      String name=ParamUtil.getString(actionRequest,param);
      names.add(name);
    }
  }
  for (  String name : names) {
    int type=expandoBridge.getAttributeType(name);
    Object value=EditExpandoAction.getValue(actionRequest,"ExpandoAttribute(" + name + ")",type);
    customAttributes.put(name,value);
  }
  return customAttributes;
}
