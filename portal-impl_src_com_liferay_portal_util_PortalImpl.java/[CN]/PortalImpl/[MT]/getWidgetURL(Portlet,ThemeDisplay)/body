{
  String layoutURLNoCtx=getLayoutURL(themeDisplay).replace(PortalUtil.getPathContext(),StringPool.BLANK);
  String widgetURL=themeDisplay.getPortalURL() + PortalUtil.getPathContext() + "/widget"+ layoutURLNoCtx+ "/-/";
  FriendlyURLMapper friendlyURLMapper=portlet.getFriendlyURLMapperInstance();
  if (friendlyURLMapper != null) {
    widgetURL+=friendlyURLMapper.getMapping();
  }
 else {
    widgetURL+=portlet.getPortletId();
  }
  return widgetURL;
}
