{
  String widgetURL=themeDisplay.getPortalURL() + "/widget" + getLayoutURL(themeDisplay)+ "/-/";
  FriendlyURLMapper friendlyURLMapper=portlet.getFriendlyURLMapperInstance();
  if (friendlyURLMapper != null) {
    widgetURL+=friendlyURLMapper.getMapping();
  }
 else {
    widgetURL+=portlet.getPortletId();
  }
  return widgetURL;
}
