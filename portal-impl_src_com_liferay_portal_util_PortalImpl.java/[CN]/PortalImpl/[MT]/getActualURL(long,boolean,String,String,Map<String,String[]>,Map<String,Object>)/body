{
  String actualURL=null;
  if (friendlyURL != null) {
    if (friendlyURL.startsWith(JournalArticleConstants.CANONICAL_URL_SEPARATOR)) {
      try {
        actualURL=getJournalArticleActualURL(groupId,mainPath,friendlyURL,params,requestContext,privateLayout);
      }
 catch (      Exception e) {
        throw new NoSuchLayoutException(e);
      }
    }
 else     if (friendlyURL.startsWith(VirtualLayoutConstants.CANONICAL_URL_SEPARATOR)) {
      try {
        actualURL=getVirtualLayoutActualURL(groupId,privateLayout,mainPath,friendlyURL,params,requestContext);
      }
 catch (      Exception e) {
        throw new NoSuchLayoutException(e);
      }
    }
  }
  if (actualURL == null) {
    actualURL=getLayoutActualURL(groupId,privateLayout,mainPath,friendlyURL,params,requestContext);
  }
  return actualURL;
}
