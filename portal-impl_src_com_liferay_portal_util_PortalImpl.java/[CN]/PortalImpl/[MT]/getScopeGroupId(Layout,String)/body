{
  if (layout == null) {
    return 0;
  }
 else {
    if (Validator.isNotNull(portletId)) {
      try {
        PortletPreferences portletSetup=PortletPreferencesFactoryUtil.getLayoutPortletSetup(layout,portletId);
        String scopeLayoutUuid=GetterUtil.getString(portletSetup.getValue("lfr-scope-layout-uuid",null));
        if (Validator.isNotNull(scopeLayoutUuid)) {
          Layout scopeLayout=LayoutLocalServiceUtil.getLayoutByUuidAndGroupId(scopeLayoutUuid,layout.getGroupId());
          return scopeLayout.getScopeGroup().getGroupId();
        }
      }
 catch (      Exception e) {
      }
    }
    return layout.getGroupId();
  }
}
