{
  int pos=className.indexOf(".model.impl.");
  String packagePath=className.substring(0,pos);
  String modelName=className.substring(pos + 12,className.length() - 9);
  StringBundler sb=new StringBundler(4);
  sb.append(packagePath);
  sb.append(".service.persistence.");
  sb.append(modelName);
  sb.append("Persistence");
  String beanName=sb.toString();
  if (Validator.isNull(servletContextName)) {
    return (BasePersistence<?>)PortalBeanLocatorUtil.locate(beanName);
  }
 else {
    return (BasePersistence<?>)PortletBeanLocatorUtil.locate(servletContextName,beanName);
  }
}
