{
  StringBundler sb=new StringBundler();
  Map<String,String[]> actualParams=null;
  Group group=GroupLocalServiceUtil.getGroup(scopeGroupId);
  Company company=CompanyLocalServiceUtil.getCompany(group.getCompanyId());
  sb.append(getPortalURL(company.getVirtualHost(),getPortalPort(),false));
  sb.append(PortalUtil.getPathFriendlyURLPrivateGroup());
  sb.append(StringPool.SLASH);
  sb.append(GroupConstants.CONTROL_PANEL_GROUP_NAME);
  sb.append(PropsValues.CONTROL_PANEL_LAYOUT_FRIENDLY_URL);
  if (params != null) {
    actualParams=new HashMap<String,String[]>(params);
  }
 else {
    actualParams=new HashMap<String,String[]>();
  }
  actualParams.put("p_p_id",new String[]{ppid});
  actualParams.put("p_p_lifecycle",new String[]{"0"});
  actualParams.put("p_p_state",new String[]{WindowState.MAXIMIZED.toString()});
  actualParams.put("p_p_mode",new String[]{PortletMode.VIEW.toString()});
  sb.append(HttpUtil.parameterMapToString(actualParams,true));
  return sb.toString();
}
