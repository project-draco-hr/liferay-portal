{
  StringBundler sb=new StringBundler(4);
  boolean https=false;
  if (secure || StringUtil.equalsIgnoreCase(Http.HTTPS,PropsValues.WEB_SERVER_PROTOCOL)) {
    https=true;
  }
  if (https) {
    sb.append(Http.HTTPS_WITH_SLASH);
  }
 else {
    sb.append(Http.HTTP_WITH_SLASH);
  }
  if (Validator.isNull(PropsValues.WEB_SERVER_HOST)) {
    sb.append(serverName);
  }
 else {
    sb.append(PropsValues.WEB_SERVER_HOST);
  }
  if (!https) {
    if (PropsValues.WEB_SERVER_HTTP_PORT == -1) {
      if ((serverPort != -1) && (serverPort != Http.HTTP_PORT) && (serverPort != Http.HTTPS_PORT)) {
        sb.append(StringPool.COLON);
        sb.append(serverPort);
      }
    }
 else {
      if (PropsValues.WEB_SERVER_HTTP_PORT != Http.HTTP_PORT) {
        sb.append(StringPool.COLON);
        sb.append(PropsValues.WEB_SERVER_HTTP_PORT);
      }
    }
  }
 else {
    if (PropsValues.WEB_SERVER_HTTPS_PORT == -1) {
      if ((serverPort != -1) && (serverPort != Http.HTTP_PORT) && (serverPort != Http.HTTPS_PORT)) {
        sb.append(StringPool.COLON);
        sb.append(serverPort);
      }
    }
 else {
      if (PropsValues.WEB_SERVER_HTTPS_PORT != Http.HTTPS_PORT) {
        sb.append(StringPool.COLON);
        sb.append(PropsValues.WEB_SERVER_HTTPS_PORT);
      }
    }
  }
  return sb.toString();
}
