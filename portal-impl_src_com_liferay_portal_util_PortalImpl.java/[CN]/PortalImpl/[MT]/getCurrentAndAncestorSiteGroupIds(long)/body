{
  List<Group> groups=new ArrayList<Group>();
  Group scopeGroup=GroupLocalServiceUtil.getGroup(groupId);
  if (scopeGroup.isLayout()) {
    scopeGroup=scopeGroup.getParentGroup();
  }
  if (!scopeGroup.isLayoutPrototype()) {
    groups.add(scopeGroup);
  }
  groups.addAll(scopeGroup.getAncestors());
  if (!scopeGroup.isCompany()) {
    groups.add(GroupLocalServiceUtil.getCompanyGroup(scopeGroup.getCompanyId()));
  }
  long[] groupIds=new long[groups.size()];
  for (int i=0; i < groups.size(); i++) {
    Group group=groups.get(i);
    groupIds[i]=group.getGroupId();
  }
  return groupIds;
}
