{
  long userId=0;
  HttpAuthorizationHeader httpAuthorizationHeader=HttpAuthManagerUtil.parse(request);
  String scheme=httpAuthorizationHeader.getScheme();
  if (!StringUtil.equalsIgnoreCase(scheme,HttpAuthorizationHeader.SCHEME_BASIC)) {
    return userId;
  }
  String login=httpAuthorizationHeader.getAuthParameter(HttpAuthorizationHeader.AUTHPARAM_USERID);
  String password=httpAuthorizationHeader.getAuthParameter(HttpAuthorizationHeader.AUTHPARAM_PASSWORD);
  if (login.endsWith("@uid")) {
    int pos=login.indexOf("@uid");
    login=login.substring(0,pos);
  }
 else   if (login.endsWith("@sn")) {
    int pos=login.indexOf("@sn");
    login=login.substring(0,pos);
  }
  try {
    userId=AuthenticatedSessionManagerUtil.getAuthenticatedUserId(request,login,password,null);
  }
 catch (  AuthException ae) {
  }
  return userId;
}
