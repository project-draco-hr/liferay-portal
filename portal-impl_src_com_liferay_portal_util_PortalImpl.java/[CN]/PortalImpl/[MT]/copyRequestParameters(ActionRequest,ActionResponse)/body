{
  if (actionResponse instanceof StateAwareResponseImpl) {
    StateAwareResponseImpl stateAwareResponseImpl=(StateAwareResponseImpl)actionResponse;
    if (stateAwareResponseImpl.getRedirectLocation() != null) {
      if (_log.isDebugEnabled()) {
        _log.debug("Can not copy parameters on a redirected " + "StateAwareResponseImpl.");
      }
      return;
    }
  }
  ActionResponseImpl actionResponseImpl=(ActionResponseImpl)actionResponse;
  Map<String,String[]> renderParameters=actionResponseImpl.getRenderParameterMap();
  actionResponse.setRenderParameter("p_p_lifecycle","1");
  Enumeration<String> enu=actionRequest.getParameterNames();
  while (enu.hasMoreElements()) {
    String param=enu.nextElement();
    String[] values=actionRequest.getParameterValues(param);
    if (renderParameters.get(actionResponseImpl.getNamespace() + param) == null) {
      actionResponse.setRenderParameter(param,values);
    }
  }
}
