{
  String serverName=themeDisplay.getServerName();
  Layout layout=themeDisplay.getLayout();
  if (layout != null) {
    LayoutSet layoutSet=layout.getLayoutSet();
    String virtualHost=layoutSet.getVirtualHost();
    if (Validator.isNotNull(virtualHost)) {
      serverName=virtualHost;
    }
  }
  return getPortalURL(serverName,themeDisplay.getServerPort(),themeDisplay.isSecure());
}
