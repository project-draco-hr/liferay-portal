{
  String rootPortletId=portlet.getRootPortletId();
  Group group=GroupLocalServiceUtil.fetchGroup(groupId);
  if ((group != null) && group.isStagingGroup()) {
    groupId=group.getLiveGroupId();
  }
  String name=ResourceActionsUtil.getPortletBaseResource(rootPortletId);
  String primaryKey=String.valueOf(groupId);
  if (Validator.isNull(name)) {
    return;
  }
  int count=ResourcePermissionLocalServiceUtil.getResourcePermissionsCount(companyId,name,ResourceConstants.SCOPE_INDIVIDUAL,primaryKey);
  if (count > 0) {
    return;
  }
  ResourceLocalServiceUtil.addResources(companyId,groupId,0,name,primaryKey,false,true,true);
}
