{
  Map<String,Object> attributes=new HashMap<String,Object>();
  List<String> names=new ArrayList<String>();
  Enumeration<String> enu=portletRequest.getParameterNames();
  while (enu.hasMoreElements()) {
    String param=enu.nextElement();
    if (param.indexOf("ExpandoAttributeName(") != -1) {
      String name=ParamUtil.getString(portletRequest,param);
      names.add(name);
    }
  }
  for (  String name : names) {
    int type=expandoBridge.getAttributeType(name);
    Object value=EditExpandoAction.getValue(portletRequest,"ExpandoAttribute(" + name + ")",type);
    attributes.put(name,value);
  }
  return attributes;
}
