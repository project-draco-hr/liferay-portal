{
  Layout layout=null;
  String layoutFriendlyURL=friendlyURL;
  if (friendlyURL != null) {
    if (friendlyURL.startsWith(JournalArticleConstants.CANONICAL_URL_SEPARATOR)) {
      try {
        layout=getJournalArticleLayout(groupId,privateLayout,friendlyURL);
      }
 catch (      Exception e) {
        throw new NoSuchLayoutException(e);
      }
    }
 else     if (friendlyURL.startsWith(VirtualLayoutConstants.CANONICAL_URL_SEPARATOR)) {
      try {
        LayoutFriendlyURLComposite layoutFriendlyURLComposite=getVirtualLayoutFriendlyURLComposite(privateLayout,friendlyURL,params,requestContext);
        layout=layoutFriendlyURLComposite.getLayout();
        layoutFriendlyURL=layoutFriendlyURLComposite.getFriendlyURL();
      }
 catch (      Exception e) {
        throw new NoSuchLayoutException(e);
      }
    }
  }
  if (layout == null) {
    LayoutQueryStringComposite layoutQueryStringComposite=getActualLayoutQueryStringComposite(groupId,privateLayout,friendlyURL,params,requestContext);
    layout=layoutQueryStringComposite.getLayout();
  }
  return new LayoutFriendlyURLComposite(layout,layoutFriendlyURL);
}
