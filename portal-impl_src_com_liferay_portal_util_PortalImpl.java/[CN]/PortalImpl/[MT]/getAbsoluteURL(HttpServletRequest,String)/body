{
  String portalURL=getPortalURL(request);
  if (url.charAt(0) == CharPool.SLASH) {
    if (Validator.isNotNull(portalURL)) {
      url=portalURL.concat(url);
    }
  }
  if (!CookieKeys.hasSessionId(request) && url.startsWith(portalURL)) {
    url=getURLWithSessionId(url,request.getSession().getId());
  }
  return url;
}
