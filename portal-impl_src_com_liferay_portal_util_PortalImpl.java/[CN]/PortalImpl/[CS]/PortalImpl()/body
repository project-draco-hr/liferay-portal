{
  _computerName=System.getProperty("env.COMPUTERNAME");
  if (Validator.isNull(_computerName)) {
    _computerName=System.getProperty("env.HOST");
  }
  if (Validator.isNull(_computerName)) {
    _computerName=System.getProperty("env.HOSTNAME");
  }
  if (Validator.isNull(_computerName)) {
    try {
      _computerName=InetAddress.getLocalHost().getHostName();
    }
 catch (    UnknownHostException uhe) {
    }
  }
  try {
    _computerAddress=InetAddress.getByName(_computerName).getHostAddress();
  }
 catch (  UnknownHostException uhe) {
  }
  if (Validator.isNull(_computerAddress)) {
    try {
      _computerAddress=InetAddress.getLocalHost().getHostAddress();
    }
 catch (    UnknownHostException uhe) {
    }
  }
  ClassLoader classLoader=getClass().getClassLoader();
  URL url=classLoader.getResource("com/liferay/portal/util/PortalImpl.class");
  String file=null;
  try {
    file=new URI(url.getPath()).getPath();
  }
 catch (  URISyntaxException urise) {
    file=url.getFile();
  }
  if (_log.isInfoEnabled()) {
    _log.info("Portal lib url " + file);
  }
  int pos=file.indexOf("/com/liferay/portal/util/");
  _portalLibDir=file.substring(0,pos + 1);
  if (_portalLibDir.endsWith("/WEB-INF/classes/")) {
    _portalLibDir=_portalLibDir.substring(0,_portalLibDir.length() - 8) + "lib/";
  }
 else {
    pos=_portalLibDir.indexOf("/WEB-INF/lib/");
    if (pos != -1) {
      _portalLibDir=_portalLibDir.substring(0,pos) + "/WEB-INF/lib/";
    }
  }
  if (_portalLibDir.startsWith("file:/")) {
    _portalLibDir=_portalLibDir.substring(5,_portalLibDir.length());
  }
  String pLibDir=System.getProperty("liferay.portal.lib.dir");
  if (pLibDir != null) {
    if (!pLibDir.endsWith("/")) {
      pLibDir+="/";
    }
    _portalLibDir=pLibDir;
  }
  if (_log.isInfoEnabled()) {
    _log.info("Portal lib directory " + _portalLibDir);
  }
  _cdnHost=PropsUtil.get(PropsKeys.CDN_HOST);
  _pathContext=PropsUtil.get(PropsKeys.PORTAL_CTX);
  if (_pathContext.equals(StringPool.SLASH)) {
    _pathContext=StringPool.BLANK;
  }
  _pathFriendlyURLPrivateGroup=_pathContext + PropsValues.LAYOUT_FRIENDLY_URL_PRIVATE_GROUP_SERVLET_MAPPING;
  _pathFriendlyURLPrivateUser=_pathContext + PropsValues.LAYOUT_FRIENDLY_URL_PRIVATE_USER_SERVLET_MAPPING;
  _pathFriendlyURLPublic=_pathContext + PropsValues.LAYOUT_FRIENDLY_URL_PUBLIC_SERVLET_MAPPING;
  _pathImage=_cdnHost + _pathContext + PATH_IMAGE;
  _pathMain=_pathContext + PATH_MAIN;
  String customSystemGroups[]=PropsUtil.getArray(PropsKeys.SYSTEM_GROUPS);
  if ((customSystemGroups == null) || (customSystemGroups.length == 0)) {
    _allSystemGroups=GroupImpl.SYSTEM_GROUPS;
  }
 else {
    _allSystemGroups=ArrayUtil.append(GroupImpl.SYSTEM_GROUPS,customSystemGroups);
  }
  _sortedSystemGroups=new String[_allSystemGroups.length];
  System.arraycopy(_allSystemGroups,0,_sortedSystemGroups,0,_allSystemGroups.length);
  Arrays.sort(_sortedSystemGroups,new StringComparator());
  String customSystemRoles[]=PropsUtil.getArray(PropsKeys.SYSTEM_ROLES);
  if ((customSystemRoles == null) || (customSystemRoles.length == 0)) {
    _allSystemRoles=RoleImpl.SYSTEM_ROLES;
  }
 else {
    _allSystemRoles=ArrayUtil.append(RoleImpl.SYSTEM_ROLES,customSystemRoles);
  }
  _sortedSystemRoles=new String[_allSystemRoles.length];
  System.arraycopy(_allSystemRoles,0,_sortedSystemRoles,0,_allSystemRoles.length);
  Arrays.sort(_sortedSystemRoles,new StringComparator());
  String customSystemCommunityRoles[]=PropsUtil.getArray(PropsKeys.SYSTEM_COMMUNITY_ROLES);
  if ((customSystemCommunityRoles == null) || (customSystemCommunityRoles.length == 0)) {
    _allSystemCommunityRoles=RoleImpl.SYSTEM_COMMUNITY_ROLES;
  }
 else {
    _allSystemCommunityRoles=ArrayUtil.append(RoleImpl.SYSTEM_COMMUNITY_ROLES,customSystemCommunityRoles);
  }
  _sortedSystemCommunityRoles=new String[_allSystemCommunityRoles.length];
  System.arraycopy(_allSystemCommunityRoles,0,_sortedSystemCommunityRoles,0,_allSystemCommunityRoles.length);
  Arrays.sort(_sortedSystemCommunityRoles,new StringComparator());
  String customSystemOrganizationRoles[]=PropsUtil.getArray(PropsKeys.SYSTEM_ORGANIZATION_ROLES);
  if ((customSystemOrganizationRoles == null) || (customSystemOrganizationRoles.length == 0)) {
    _allSystemOrganizationRoles=RoleImpl.SYSTEM_ORGANIZATION_ROLES;
  }
 else {
    _allSystemOrganizationRoles=ArrayUtil.append(RoleImpl.SYSTEM_ORGANIZATION_ROLES,customSystemOrganizationRoles);
  }
  _sortedSystemOrganizationRoles=new String[_allSystemOrganizationRoles.length];
  System.arraycopy(_allSystemOrganizationRoles,0,_sortedSystemOrganizationRoles,0,_allSystemOrganizationRoles.length);
  Arrays.sort(_sortedSystemOrganizationRoles,new StringComparator());
  _reservedParams=new HashSet<String>();
  _reservedParams.add("p_l_id");
  _reservedParams.add("p_l_reset");
  _reservedParams.add("p_p_id");
  _reservedParams.add("p_p_lifecycle");
  _reservedParams.add("p_p_url_type");
  _reservedParams.add("p_p_state");
  _reservedParams.add("p_p_mode");
  _reservedParams.add("p_p_resource_id");
  _reservedParams.add("p_p_cacheability");
  _reservedParams.add("p_p_width");
  _reservedParams.add("p_p_col_id");
  _reservedParams.add("p_p_col_pos");
  _reservedParams.add("p_p_col_count");
  _reservedParams.add("p_p_static");
  _reservedParams.add("saveLastPath");
}
