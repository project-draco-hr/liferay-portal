{
  ExpandoTable table=expandoTablePersistence.fetchByC_C_N(companyId,classNameId,tableName);
  if (table == null) {
    return 0;
  }
  List<ExpandoColumn> columns=expandoColumnPersistence.findByT_N(table.getTableId(),columnName);
  if (columns.isEmpty()) {
    return 0;
  }
  ExpandoColumn column=columns.get(0);
  if (data == null) {
    return expandoValuePersistence.countByT_C(table.getTableId(),column.getColumnId());
  }
 else {
    return expandoValuePersistence.countByT_C_D(table.getTableId(),column.getColumnId(),data);
  }
}
