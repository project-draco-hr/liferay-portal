{
  ExpandoTable table=expandoTableLocalService.getTable(companyId,classNameId,tableName);
  long tableId=table.getTableId();
  List<ExpandoColumn> columns=expandoColumnLocalService.getColumns(tableId,attributes.keySet());
  ExpandoValue value=new ExpandoValueImpl();
  value.setCompanyId(companyId);
  for (  ExpandoColumn column : columns) {
    String columnName=column.getName();
    long columnId=column.getColumnId();
    Serializable attributeValue=attributes.get(columnName);
    value.setColumn(column);
    value.setColumnId(columnId);
    int type=column.getType();
    if (type == ExpandoColumnConstants.BOOLEAN) {
      value.setBoolean((Boolean)attributeValue);
    }
 else     if (type == ExpandoColumnConstants.BOOLEAN_ARRAY) {
      value.setBooleanArray((boolean[])attributeValue);
    }
 else     if (type == ExpandoColumnConstants.DATE) {
      value.setDate((Date)attributeValue);
    }
 else     if (type == ExpandoColumnConstants.DATE_ARRAY) {
      value.setDateArray((Date[])attributeValue);
    }
 else     if (type == ExpandoColumnConstants.DOUBLE) {
      value.setDouble((Double)attributeValue);
    }
 else     if (type == ExpandoColumnConstants.DOUBLE_ARRAY) {
      value.setDoubleArray((double[])attributeValue);
    }
 else     if (type == ExpandoColumnConstants.FLOAT) {
      value.setFloat((Float)attributeValue);
    }
 else     if (type == ExpandoColumnConstants.FLOAT_ARRAY) {
      value.setFloatArray((float[])attributeValue);
    }
 else     if (type == ExpandoColumnConstants.INTEGER) {
      value.setInteger((Integer)attributeValue);
    }
 else     if (type == ExpandoColumnConstants.INTEGER_ARRAY) {
      value.setIntegerArray((int[])attributeValue);
    }
 else     if (type == ExpandoColumnConstants.LONG) {
      value.setLong((Long)attributeValue);
    }
 else     if (type == ExpandoColumnConstants.LONG_ARRAY) {
      value.setLongArray((long[])attributeValue);
    }
 else     if (type == ExpandoColumnConstants.SHORT) {
      value.setShort((Short)attributeValue);
    }
 else     if (type == ExpandoColumnConstants.SHORT_ARRAY) {
      value.setShortArray((short[])attributeValue);
    }
 else     if (type == ExpandoColumnConstants.STRING_ARRAY) {
      value.setStringArray((String[])attributeValue);
    }
 else {
      value.setString((String)attributeValue);
    }
    doAddValue(companyId,classNameId,tableId,columnId,classPK,value.getData());
  }
}
