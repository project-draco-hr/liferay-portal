{
  Thread currentThread=Thread.currentThread();
  ClassLoader contextClassLoader=currentThread.getContextClassLoader();
  boolean forceSync=ProxyModeThreadLocal.isForceSync();
  ProxyModeThreadLocal.setForceSync(true);
  try {
    ClassLoader portalClassLoader=PortalClassLoaderUtil.getClassLoader();
    currentThread.setContextClassLoader(portalClassLoader);
    for (    SchedulerEntry schedulerEntry : _schedulerEntries) {
      try {
        MessageListener messageListener=(MessageListener)InstanceFactory.newInstance(PortletClassLoaderUtil.getClassLoader(),schedulerEntry.getEventListenerClass());
        SchedulerEngineHelperUtil.register(messageListener,schedulerEntry,DestinationNames.SCHEDULER_DISPATCH);
        _messageListeners.put(schedulerEntry.getEventListenerClass(),messageListener);
      }
 catch (      Exception e) {
        _log.error("Unable to schedule " + schedulerEntry,e);
      }
    }
  }
  finally {
    ProxyModeThreadLocal.setForceSync(forceSync);
    currentThread.setContextClassLoader(contextClassLoader);
  }
}
