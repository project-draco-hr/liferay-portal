{
  StringBundler sb=new StringBundler(_simpleNestedSetsTreeNodes.size() * 7);
  Collections.sort(_simpleNestedSetsTreeNodes);
  Deque<SimpleNestedSetsTreeNode> deque=new LinkedList<SimpleNestedSetsTreeNode>();
  for (  SimpleNestedSetsTreeNode simpleNestedSetsTreeNode : _simpleNestedSetsTreeNodes) {
    long nestedSetsLeft=simpleNestedSetsTreeNode.getNestedSetsLeft();
    long nestedSetsRight=simpleNestedSetsTreeNode.getNestedSetsRight();
    sb.append(StringPool.OPEN_PARENTHESIS);
    sb.append(nestedSetsLeft);
    sb.append(StringPool.POUND);
    sb.append(simpleNestedSetsTreeNode.getPrimaryKey());
    if ((nestedSetsLeft + 1) != nestedSetsRight) {
      deque.push(simpleNestedSetsTreeNode);
      continue;
    }
    sb.append(StringPool.COMMA_AND_SPACE);
    sb.append(nestedSetsRight);
    sb.append(StringPool.CLOSE_PARENTHESIS);
    SimpleNestedSetsTreeNode previousNode=null;
    while (((previousNode=deque.peek()) != null) && ((nestedSetsRight + 1) == previousNode.getNestedSetsRight())) {
      sb.append(StringPool.COMMA_AND_SPACE);
      sb.append(previousNode.getNestedSetsRight());
      sb.append(StringPool.CLOSE_PARENTHESIS);
      nestedSetsRight=previousNode.getNestedSetsRight();
      deque.pop();
    }
  }
  return sb.toString();
}
