{
  Map<String,String> queryParameters=new HashMap<String,String>();
  String[] urlParts=url.split("\\?",2);
  if (urlParts.length > 1) {
    String query=urlParts[1];
    url=urlParts[0];
    try {
      queryStringToParameters(query,queryParameters);
    }
 catch (    Exception e) {
      if (_log.isWarnEnabled()) {
        _log.warn(e,e);
      }
    }
  }
  for (  Route route : _routes) {
    Map<String,String> parameters=route.urlToParameters(url);
    if (parameters != null) {
      queryParameters.putAll(parameters);
      return queryParameters;
    }
  }
  throw new RouteNotFoundException("No route could be found to match url " + url);
}
