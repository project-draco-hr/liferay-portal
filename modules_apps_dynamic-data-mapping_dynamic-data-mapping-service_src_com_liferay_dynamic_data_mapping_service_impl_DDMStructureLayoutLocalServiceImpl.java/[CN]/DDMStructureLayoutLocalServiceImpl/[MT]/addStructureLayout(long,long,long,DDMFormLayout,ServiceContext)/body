{
  User user=userPersistence.findByPrimaryKey(userId);
  validateDDMFormLayout(ddmFormLayout);
  long structureLayoutId=counterLocalService.increment();
  DDMStructureLayout structureLayout=ddmStructureLayoutPersistence.create(structureLayoutId);
  structureLayout.setUuid(serviceContext.getUuid());
  structureLayout.setGroupId(groupId);
  structureLayout.setCompanyId(user.getCompanyId());
  structureLayout.setUserId(user.getUserId());
  structureLayout.setUserName(user.getFullName());
  structureLayout.setStructureVersionId(structureVersionId);
  structureLayout.setDefinition(DDMFormLayoutJSONSerializerUtil.serialize(ddmFormLayout));
  return ddmStructureLayoutPersistence.update(structureLayout);
}
