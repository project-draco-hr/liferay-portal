{
  if (PropsValues.IMAGEMAGICK_ENABLED) {
    String id=DLUtil.getTempFileId(fileEntry.getFileEntryId(),fileEntry.getVersion());
    if (_isGeneratePreview(id)) {
      _generateImagesIM(file,id,_PREVIEW_DPI,_PREVIEW_WIDTH_DIMENSION,0,false);
      File singlePagePreviewFile=_getPreviewFile(id,-1);
      if (singlePagePreviewFile.exists()) {
        singlePagePreviewFile.renameTo(_getPreviewFile(id,1));
      }
      if (_log.isInfoEnabled()) {
        _log.info("ImageMagick generated " + _getPreviewPageCount(fileEntry) + " preview pages for "+ id);
      }
    }
    if (_isGenerateThumbnail(id)) {
      _generateImagesIM(file,id,_THUMBNAIL_DPI,_THUMBNAIL_DIMENSION,_THUMBNAIL_DIMENSION,true);
      if (_log.isInfoEnabled()) {
        _log.info("ImageMagick generated a thumbnail for " + id);
      }
    }
  }
 else {
    _generateImages(fileEntry,new FileInputStream(file));
  }
}
