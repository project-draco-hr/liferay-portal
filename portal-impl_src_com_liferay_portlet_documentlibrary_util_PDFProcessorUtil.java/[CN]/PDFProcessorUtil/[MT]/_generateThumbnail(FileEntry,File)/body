{
  String id=DLUtil.getTempFileId(fileEntry.getFileEntryId(),fileEntry.getVersion());
  if (getFile(id).exists()) {
    return;
  }
  if (PropsValues.IMAGEMAGICK_ENABLED) {
    IMOperation op=new IMOperation();
    op.addImage(file.getPath() + "[0]");
    op.scale(_DIMENSION,_DIMENSION);
    op.addImage(getFilePath(id));
    try {
      _convertCommand.run(op);
    }
 catch (    IOException ioe) {
      throw ioe;
    }
catch (    Exception e) {
      throw new SystemException(e);
    }
  }
 else {
    _generateThumbnail(fileEntry,new FileInputStream(file));
  }
}
