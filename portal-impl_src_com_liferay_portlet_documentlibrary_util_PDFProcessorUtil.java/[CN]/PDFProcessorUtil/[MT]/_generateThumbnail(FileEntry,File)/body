{
  String id=DLUtil.getTempFileId(fileEntry.getFileEntryId(),fileEntry.getVersion());
  File thumbnailFile=_getThumbnailFile(id);
  if (thumbnailFile.exists()) {
    return;
  }
  if (PropsValues.IMAGEMAGICK_ENABLED) {
    IMOperation imOperation=new IMOperation();
    imOperation.addImage(file.getPath() + "[0]");
    imOperation.scale(_DIMENSION,_DIMENSION);
    imOperation.addImage(_getThumbnailFilePath(id));
    try {
      _convertCmd.run(imOperation);
    }
 catch (    IOException ioe) {
      throw ioe;
    }
catch (    Exception e) {
      throw new SystemException(e);
    }
  }
 else {
    _generateThumbnail(fileEntry,new FileInputStream(file));
  }
}
