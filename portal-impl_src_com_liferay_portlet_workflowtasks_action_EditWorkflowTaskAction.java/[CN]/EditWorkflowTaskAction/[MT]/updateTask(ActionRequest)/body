{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  long workflowTaskId=ParamUtil.getLong(actionRequest,"workflowTaskId");
  String transitionName=ParamUtil.getString(actionRequest,"transitionName");
  String comment=ParamUtil.getString(actionRequest,"comment");
  if (cmd.equals(Constants.UPDATE)) {
    int dueDateMonth=ParamUtil.getInteger(actionRequest,"dueDateMonth");
    int dueDateDay=ParamUtil.getInteger(actionRequest,"dueDateDay");
    int dueDateYear=ParamUtil.getInteger(actionRequest,"dueDateYear");
    int dueDateHour=ParamUtil.getInteger(actionRequest,"dueDateHour");
    int dueDateMinute=ParamUtil.getInteger(actionRequest,"dueDateMinute");
    int dueDateAmPm=ParamUtil.getInteger(actionRequest,"dueDateAmPm");
    if (dueDateAmPm == Calendar.PM) {
      dueDateHour+=12;
    }
    Calendar dueDate=CalendarFactoryUtil.getCalendar(LocaleUtil.getDefault());
    dueDate.set(Calendar.MONTH,dueDateMonth);
    dueDate.set(Calendar.DATE,dueDateDay);
    dueDate.set(Calendar.YEAR,dueDateYear);
    dueDate.set(Calendar.HOUR_OF_DAY,dueDateHour);
    dueDate.set(Calendar.MINUTE,dueDateMinute);
    dueDate.set(Calendar.SECOND,0);
    dueDate.set(Calendar.MILLISECOND,0);
    WorkflowTaskManagerUtil.updateDueDate(themeDisplay.getCompanyId(),themeDisplay.getUserId(),workflowTaskId,comment,dueDate.getTime());
  }
 else {
    WorkflowTaskManagerUtil.completeWorkflowTask(themeDisplay.getCompanyId(),themeDisplay.getUserId(),workflowTaskId,transitionName,comment,null);
  }
}
