{
  try {
    PortletMode portletMode=request.getPortletMode();
    if (portletMode.equals(PortletMode.VIEW)) {
      ActionUtil.getWorkflowDefinitions(request);
    }
    ActionUtil.getWorkflowDefinition(request);
  }
 catch (  Exception e) {
    if (e instanceof WorkflowException) {
      hideDefaultErrorMessage(request);
      SessionErrors.add(request,e.getClass());
      include("/error.jsp",request,response);
    }
 else {
      throw new PortletException(e);
    }
  }
  super.render(request,response);
}
