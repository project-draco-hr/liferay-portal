{
  clearInstalledAppsCache();
  appPersistence.remove(app);
  List<Module> modules=modulePersistence.findByAppId(app.getAppId());
  for (  Module module : modules) {
    moduleLocalService.deleteModule(module);
  }
  try {
    DLStoreUtil.deleteFile(app.getCompanyId(),CompanyConstants.SYSTEM,app.getFilePath());
  }
 catch (  Exception e) {
    if (_log.isWarnEnabled()) {
      _log.warn(e,e);
    }
  }
  return app;
}
