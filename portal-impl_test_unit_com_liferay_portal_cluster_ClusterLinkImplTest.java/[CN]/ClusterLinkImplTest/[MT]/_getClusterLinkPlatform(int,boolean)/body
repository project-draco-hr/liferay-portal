{
  _handlePropsValues(channelCount,enableClusterLink);
  _handleLog(ClusterBase.class,Level.FINE);
  ClusterLinkImpl clusterLinkImpl=new ClusterLinkImpl();
  clusterLinkImpl.setClusterForwardMessageListener(new ClusterForwardMessageListener());
  clusterLinkImpl.afterPropertiesSet();
  Field channelField=ReflectionUtil.getDeclaredField(ClusterLinkImpl.class,"_transportChannels");
  Object channelFieldValue=channelField.get(clusterLinkImpl);
  JChannel[] channelArray=null;
  if (channelFieldValue != null) {
    List<JChannel> channelList=(List<JChannel>)channelFieldValue;
    if (!channelList.isEmpty()) {
      channelArray=new JChannel[channelList.size()];
      for (int i=0; i < channelList.size(); i++) {
        JChannel channel=channelList.get(i);
        channel.setReceiver(new TestReceiver(new AddressImpl(channel.getAddress())));
        channelArray[i]=channel;
      }
    }
  }
  return new ObjectValuePair<ClusterLinkImpl,JChannel[]>(clusterLinkImpl,channelArray);
}
