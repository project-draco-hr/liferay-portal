{
  CaptureHandler captureHandler=JDKLoggerTestUtil.configureJDKLogger(ClusterLinkImpl.class.getName(),Level.OFF);
  try {
    TransportationConfigurationAdvice.setChannelCount(ClusterLinkImpl.MAX_CHANNEL_COUNT + 1);
    List<LogRecord> logRecords=captureHandler.getLogRecords();
    try {
      getClusterLinkImpl();
      Assert.fail();
    }
 catch (    IllegalStateException ise) {
      Assert.assertEquals(0,logRecords.size());
      Assert.assertEquals("java.lang.IllegalArgumentException: Channel count must " + "be between 1 and " + ClusterLinkImpl.MAX_CHANNEL_COUNT,ise.getMessage());
    }
    TransportationConfigurationAdvice.setChannelCount(0);
    logRecords=captureHandler.resetLogLevel(Level.SEVERE);
    try {
      getClusterLinkImpl();
      Assert.fail();
    }
 catch (    IllegalStateException ise) {
      Assert.assertEquals(1,logRecords.size());
      LogRecord logRecord=logRecords.get(0);
      Assert.assertEquals("Unable to initialize channels",logRecord.getMessage());
      Assert.assertEquals("java.lang.IllegalArgumentException: Channel count must " + "be between 1 and " + ClusterLinkImpl.MAX_CHANNEL_COUNT,ise.getMessage());
    }
  }
  finally {
    captureHandler.close();
  }
}
