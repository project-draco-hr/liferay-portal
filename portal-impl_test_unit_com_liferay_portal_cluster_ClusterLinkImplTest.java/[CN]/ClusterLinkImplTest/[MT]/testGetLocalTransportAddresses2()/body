{
  Callable<Void> callable=new Callable<Void>(){
    public Void call() throws Exception {
      ClusterLinkImpl clusterLinkImpl=_getClusterLinkImpl(2,true);
      List<Address> addresses=clusterLinkImpl.getLocalTransportAddresses();
      assertEquals(2,addresses.size());
      List<JChannel> jChannels=_getJChannels(clusterLinkImpl);
      assertSame(_getJGroupsAddress(jChannels,0),_getRealAddress(addresses,0));
      assertSame(_getJGroupsAddress(jChannels,1),_getRealAddress(addresses,1));
      clusterLinkImpl.destroy();
      return null;
    }
  }
;
  runInNewClassLoader((Class<? extends Callable<Void>>)callable.getClass());
}
