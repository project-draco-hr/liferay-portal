{
  Callable<Void> callable=new Callable<Void>(){
    public Void call() throws Exception {
      ClusterLinkImpl clusterLinkImpl=_getClusterLinkImpl(2,true);
      List<Address> addresses=clusterLinkImpl.getLocalTransportAddresses();
      assertEquals(2,addresses.size());
      List<JChannel> channelList=_getChannelList(clusterLinkImpl);
      assertEquals(2,addresses.size());
      org.jgroups.Address expectedAddress1=channelList.get(0).getAddress();
      org.jgroups.Address expectedAddress2=channelList.get(1).getAddress();
      assertEquals(2,addresses.size());
      assertSame(expectedAddress1,addresses.get(0).getRealAddress());
      assertSame(expectedAddress2,addresses.get(1).getRealAddress());
      clusterLinkImpl.destroy();
      return null;
    }
  }
;
  runInNewClassLoader((Class<? extends Callable<Void>>)callable.getClass());
}
