{
  Callable<Void> callable=new Callable<Void>(){
    public Void call() throws Exception {
      ClusterLinkImpl clusterLinkImpl=_getClusterLinkImpl(2,true);
      _handleLog(ClusterLinkImpl.class,Level.FINE);
      List<JChannel> jChannels=_getJChannels(clusterLinkImpl);
      assertEquals(2,jChannels.size());
      JChannel jChannel=jChannels.get(0);
      assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL1));
      assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL2));
      assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL3));
      assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL4));
      assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL5));
      jChannel=jChannels.get(1);
      assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL6));
      assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL7));
      assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL8));
      assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL9));
      assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL10));
      clusterLinkImpl.destroy();
      return null;
    }
  }
;
  runInNewClassLoader((Class<? extends Callable<Void>>)callable.getClass());
}
