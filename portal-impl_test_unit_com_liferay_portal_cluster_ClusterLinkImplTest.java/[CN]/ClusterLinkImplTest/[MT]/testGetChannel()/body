{
  JDKLoggerTestUtil.configureJDKLogger(ClusterLinkImpl.class.getName(),Level.FINE);
  TransportationConfigurationAdvice.setChannelCount(2);
  ClusterLinkImpl clusterLinkImpl=getClusterLinkImpl();
  List<JChannel> jChannels=getJChannels(clusterLinkImpl);
  Assert.assertEquals(2,jChannels.size());
  JChannel jChannel=jChannels.get(0);
  Assert.assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL1));
  Assert.assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL2));
  Assert.assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL3));
  Assert.assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL4));
  Assert.assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL5));
  jChannel=jChannels.get(1);
  Assert.assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL6));
  Assert.assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL7));
  Assert.assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL8));
  Assert.assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL9));
  Assert.assertSame(jChannel,clusterLinkImpl.getChannel(Priority.LEVEL10));
  clusterLinkImpl.destroy();
}
