{
  Callable<Void> callable=new Callable<Void>(){
    public Void call() throws Exception {
      ClusterLinkImpl clusterLinkImpl=_getClusterLinkImpl(2,true);
      List<JChannel> channelList=_getChannelList(clusterLinkImpl);
      assertEquals(2,channelList.size());
      assertTrue(channelList.get(0).isOpen());
      assertTrue(channelList.get(1).isOpen());
      clusterLinkImpl.destroy();
      channelList=_getChannelList(clusterLinkImpl);
      assertEquals(2,channelList.size());
      assertFalse(channelList.get(0).isOpen());
      assertFalse(channelList.get(1).isOpen());
      return null;
    }
  }
;
  runInNewClassLoader((Class<? extends Callable<Void>>)callable.getClass());
}
