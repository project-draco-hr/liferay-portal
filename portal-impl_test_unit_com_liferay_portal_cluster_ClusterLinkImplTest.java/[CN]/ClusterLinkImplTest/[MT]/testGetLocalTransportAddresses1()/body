{
  Callable<Void> callable=new Callable<Void>(){
    public Void call() throws Exception {
      ObjectValuePair<ClusterLinkImpl,JChannel[]> clusterPlatform=_getClusterLinkPlatform(2,true);
      ClusterLinkImpl clusterLinkImpl=clusterPlatform.getKey();
      List<Address> addresses=null;
      try {
        addresses=clusterLinkImpl.getLocalTransportAddresses();
      }
 catch (      Exception e) {
        fail();
      }
      org.jgroups.Address expectedAddress1=clusterPlatform.getValue()[0].getAddress();
      org.jgroups.Address expectedAddress2=clusterPlatform.getValue()[1].getAddress();
      assertEquals(2,addresses.size());
      assertEquals(expectedAddress1,addresses.get(0).getRealAddress());
      assertEquals(expectedAddress2,addresses.get(1).getRealAddress());
      clusterLinkImpl.destroy();
      return null;
    }
  }
;
  runInNewClassLoader((Class<? extends Callable<Void>>)callable.getClass());
}
