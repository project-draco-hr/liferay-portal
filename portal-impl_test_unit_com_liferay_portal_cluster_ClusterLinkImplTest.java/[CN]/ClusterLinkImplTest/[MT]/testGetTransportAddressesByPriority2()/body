{
  TransportationConfigurationAdvice.setChannelCount(2);
  ClusterLinkImpl clusterLinkImpl1=_getClusterLinkImpl();
  ClusterLinkImpl clusterLinkImpl2=_getClusterLinkImpl();
  List<JChannel> jChannels1=_getJChannels(clusterLinkImpl1);
  assertEquals(2,jChannels1.size());
  List<JChannel> jChannels2=_getJChannels(clusterLinkImpl2);
  assertEquals(2,jChannels2.size());
  List<Address> addresses1=clusterLinkImpl1.getTransportAddresses(Priority.LEVEL1);
  assertEquals(2,addresses1.size());
  List<Address> addresses2=clusterLinkImpl1.getTransportAddresses(Priority.LEVEL6);
  assertEquals(2,addresses2.size());
  assertEquals(_getJGroupsAddress(jChannels1,0),_getRealAddress(addresses1,0));
  assertEquals(_getJGroupsAddress(jChannels1,1),_getRealAddress(addresses2,0));
  assertEquals(_getJGroupsAddress(jChannels2,0),_getRealAddress(addresses1,1));
  assertEquals(_getJGroupsAddress(jChannels2,1),_getRealAddress(addresses2,1));
  clusterLinkImpl1.destroy();
  clusterLinkImpl2.destroy();
}
