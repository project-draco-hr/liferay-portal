{
  Callable<Void> callable=new Callable<Void>(){
    public Void call() throws Exception {
      ClusterLinkImpl clusterLinkImpl1=_getClusterLinkImpl(2,true);
      ClusterLinkImpl clusterLinkImpl2=_getClusterLinkImpl(2,true);
      List<JChannel> channelList1=_getChannelList(clusterLinkImpl1);
      List<JChannel> channelList2=_getChannelList(clusterLinkImpl2);
      assertEquals(2,channelList1.size());
      assertEquals(2,channelList2.size());
      List<Address> addresses1=clusterLinkImpl1.getTransportAddresses(Priority.LEVEL1);
      List<Address> addresses2=clusterLinkImpl1.getTransportAddresses(Priority.LEVEL6);
      assertEquals(2,addresses1.size());
      assertEquals(2,addresses2.size());
      org.jgroups.Address exceptedAddress1=channelList1.get(0).getAddress();
      org.jgroups.Address exceptedAddress2=channelList1.get(1).getAddress();
      org.jgroups.Address exceptedAddress3=channelList2.get(0).getAddress();
      org.jgroups.Address exceptedAddress4=channelList2.get(1).getAddress();
      assertEquals(exceptedAddress1,addresses1.get(0).getRealAddress());
      assertEquals(exceptedAddress3,addresses1.get(1).getRealAddress());
      assertEquals(exceptedAddress2,addresses2.get(0).getRealAddress());
      assertEquals(exceptedAddress4,addresses2.get(1).getRealAddress());
      clusterLinkImpl1.destroy();
      clusterLinkImpl2.destroy();
      return null;
    }
  }
;
  runInNewClassLoader((Class<? extends Callable<Void>>)callable.getClass());
}
