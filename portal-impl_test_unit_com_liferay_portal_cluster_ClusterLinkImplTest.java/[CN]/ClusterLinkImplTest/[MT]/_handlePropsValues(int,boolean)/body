{
  if (channelsCount == 0) {
    Field instanceField=ReflectionUtil.getDeclaredField(PropsUtil.class,"_instance");
    Object instance=instanceField.get(null);
    Field configurationField=ReflectionUtil.getDeclaredField(PropsUtil.class,"_configuration");
    configurationField.set(instance,new MockConfigurationImpl(PropsUtil.class.getClassLoader(),PropsFiles.PORTAL));
  }
 else {
    Properties properties=PropsUtil.getProperties(PropsKeys.CLUSTER_LINK_CHANNEL_PROPERTIES_TRANSPORT,true);
    for (int i=properties.size(); i < channelsCount; i++) {
      PropsUtil.set(PropsKeys.CLUSTER_LINK_CHANNEL_PROPERTIES_TRANSPORT + CharPool.POUND + i,"udp.xml");
    }
  }
  PropsUtil.set(PropsKeys.CLUSTER_LINK_ENABLED,String.valueOf(enableClusterLink));
}
