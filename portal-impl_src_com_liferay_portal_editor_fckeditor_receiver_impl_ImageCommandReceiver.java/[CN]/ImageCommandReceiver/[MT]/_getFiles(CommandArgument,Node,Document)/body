{
  Element filesEl=doc.createElement("Files");
  root.appendChild(filesEl);
  if (!arg.getCurrentGroupName().equals("")) {
    Group group=GroupServiceUtil.getGroup(arg.getCompanyId(),arg.getCurrentGroupName());
    IGFolder folder=_getFolder(group.getGroupId(),arg.getCurrentFolder());
    List images=IGImageLocalServiceUtil.getImages(folder.getFolderId());
    for (int i=0; i < images.size(); i++) {
      IGImage image=(IGImage)images.get(i);
      long largeImageId=image.getLargeImageId();
      Image portalImage=ImageLocalUtil.getImageOrDefault(largeImageId);
      Element fileEl=doc.createElement("File");
      filesEl.appendChild(fileEl);
      fileEl.setAttribute("name",String.valueOf(image.getImageId()));
      fileEl.setAttribute("desc",image.getDescription());
      fileEl.setAttribute("size",getSize(portalImage.getSize()));
      fileEl.setAttribute("url","/image/image_gallery?img_id=" + largeImageId + "&t="+ ImageServletToken.getToken(largeImageId));
    }
  }
}
