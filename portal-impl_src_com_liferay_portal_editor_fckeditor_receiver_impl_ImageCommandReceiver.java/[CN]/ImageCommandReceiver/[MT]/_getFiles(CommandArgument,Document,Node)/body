{
  Element filesEl=doc.createElement("Files");
  root.appendChild(filesEl);
  if (Validator.isNull(arg.getCurrentGroupName())) {
    return;
  }
  Group group=arg.getCurrentGroup();
  IGFolder folder=_getFolder(group.getGroupId(),arg.getCurrentFolder());
  List<IGImage> images=IGImageServiceUtil.getImages(folder.getFolderId());
  for (  IGImage image : images) {
    long largeImageId=image.getLargeImageId();
    Image portalImage=ImageLocalServiceUtil.getImageOrDefault(largeImageId);
    Element fileEl=doc.createElement("File");
    filesEl.appendChild(fileEl);
    fileEl.setAttribute("name",image.getNameWithExtension());
    fileEl.setAttribute("desc",image.getNameWithExtension());
    fileEl.setAttribute("size",getSize(portalImage.getSize()));
    StringBuilder url=new StringBuilder();
    ThemeDisplay themeDisplay=arg.getThemeDisplay();
    url.append(themeDisplay.getPathContext());
    url.append("/image/image_gallery?img_id=");
    url.append(largeImageId);
    url.append("&t=");
    url.append(ImageServletTokenUtil.getToken(largeImageId));
    fileEl.setAttribute("url",url.toString());
  }
}
