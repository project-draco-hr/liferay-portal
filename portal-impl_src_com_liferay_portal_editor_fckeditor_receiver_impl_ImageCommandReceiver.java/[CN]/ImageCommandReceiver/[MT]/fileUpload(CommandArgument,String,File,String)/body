{
  try {
    Group group=commandArgument.getCurrentGroup();
    long groupId=group.getGroupId();
    IGFolder igFolder=_getFolder(groupId,commandArgument.getCurrentFolder());
    long folderId=igFolder.getFolderId();
    String name=fileName;
    String description=StringPool.BLANK;
    String contentType=extension.toLowerCase();
    ServiceContext serviceContext=new ServiceContext();
    serviceContext.setAddGroupPermissions(true);
    serviceContext.setAddGuestPermissions(true);
    IGImageServiceUtil.addImage(groupId,folderId,name,description,file,contentType,serviceContext);
  }
 catch (  Exception e) {
    throw new FCKException(e);
  }
  return "0";
}
