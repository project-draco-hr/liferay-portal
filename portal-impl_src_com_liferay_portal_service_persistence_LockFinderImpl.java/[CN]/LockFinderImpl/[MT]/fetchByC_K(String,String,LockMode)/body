{
  if (lockMode == null) {
    return lockPersistence.fetchByC_K(className,key);
  }
  if (Validator.isNull(className)) {
    throw new IllegalArgumentException("null className");
  }
  if ((Validator.isNull(key))) {
    throw new IllegalArgumentException("null key");
  }
  Session session=null;
  try {
    session=openSession();
    Query q=session.createQuery(_SQL_SELECT_BY_CK);
    q.setLockMode("lock",lockMode);
    QueryPos qPos=QueryPos.getInstance(q);
    if (className != null) {
      qPos.add(className);
    }
    if (key != null) {
      qPos.add(key);
    }
    List<Lock> list=q.list();
    Lock lock=null;
    if (!list.isEmpty()) {
      lock=list.get(0);
    }
    return lock;
  }
 catch (  Exception e) {
    throw processException(e);
  }
 finally {
    closeSession(session);
  }
}
