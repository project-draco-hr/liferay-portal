{
  Set<Long> newRolePKsSet=SetUtil.fromArray(rolePKs);
  Set<Long> oldRolePKsSet=SetUtil.fromArray(userToRoleTableMapper.getRightPrimaryKeys(companyProvider.getCompanyId(),pk));
  Set<Long> removeRolePKsSet=new HashSet<Long>(oldRolePKsSet);
  removeRolePKsSet.removeAll(newRolePKsSet);
  for (  long removeRolePK : removeRolePKsSet) {
    userToRoleTableMapper.deleteTableMapping(companyProvider.getCompanyId(),pk,removeRolePK);
  }
  newRolePKsSet.removeAll(oldRolePKsSet);
  for (  long newRolePK : newRolePKsSet) {
    userToRoleTableMapper.addTableMapping(companyProvider.getCompanyId(),pk,newRolePK);
  }
}
