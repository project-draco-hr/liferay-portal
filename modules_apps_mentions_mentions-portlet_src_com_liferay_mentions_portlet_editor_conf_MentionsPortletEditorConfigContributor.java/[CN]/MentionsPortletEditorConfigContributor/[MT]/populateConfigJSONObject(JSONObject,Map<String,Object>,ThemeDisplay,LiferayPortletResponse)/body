{
  JSONObject triggerJSONObject=JSONFactoryUtil.createJSONObject();
  triggerJSONObject.put("resultFilters","function(query, results) {return results;}");
  triggerJSONObject.put("resultTextLocator","screenName");
  LiferayPortletURL autoCompleteUserURL=liferayPortletResponse.createResourceURL("1_WAR_mentionsportlet");
  String source=autoCompleteUserURL.toString() + "&" + PortalUtil.getPortletNamespace("1_WAR_mentionsportlet");
  triggerJSONObject.put("source",source);
  triggerJSONObject.put("term","@");
  triggerJSONObject.put("tplReplace","{mention}");
  StringBundler sb=new StringBundler(8);
  sb.append("<div class=\"display-style-3 taglib-user-display\">");
  sb.append("<span>");
  sb.append("<span class=\"user-profile-image\" ");
  sb.append("style=\"background-image: url('{portraitURL}');");
  sb.append("background-size: 32px 32px; height: 32px; width: 32px;\">");
  sb.append("</span><span class=\"user-name\">{fullName}</span>");
  sb.append("<span class=\"user-details\">@{screenName}</span></span>");
  sb.append("</div>");
  triggerJSONObject.put("tplResults",sb.toString());
  JSONArray triggerJSONArray=JSONFactoryUtil.createJSONArray();
  triggerJSONArray.put(triggerJSONObject);
  JSONObject autoCompleteConfigJSONObject=JSONFactoryUtil.createJSONObject();
  String extraPlugins=jsonObject.getString("extraPlugins");
  if (Validator.isNotNull(extraPlugins)) {
    extraPlugins+=",autocomplete";
  }
 else {
    extraPlugins="autocomplete";
  }
  autoCompleteConfigJSONObject.put("requestTemplate","query={query}");
  autoCompleteConfigJSONObject.put("trigger",triggerJSONArray);
  jsonObject.put("extraPlugins",extraPlugins);
  jsonObject.put("autocomplete",autoCompleteConfigJSONObject);
}
