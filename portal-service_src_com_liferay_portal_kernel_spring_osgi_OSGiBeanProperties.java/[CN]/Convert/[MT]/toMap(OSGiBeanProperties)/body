{
  Map<String,Object> properties=new HashMap<String,Object>();
  String[] propertiesArray=osgiBeanProperties.property();
  for (  String propertyString : propertiesArray) {
    String[] parts=propertyString.split(StringPool.EQUAL,2);
    if (parts.length <= 1) {
      continue;
    }
    String keyPart=parts[0];
    String valuePart=parts[1];
    String typePart=String.class.getSimpleName();
    if (keyPart.indexOf(StringPool.COLON) != -1) {
      String[] keyAndTypeParts=StringUtil.split(keyPart,StringPool.COLON);
      keyPart=keyAndTypeParts[0];
      typePart=keyAndTypeParts[1];
    }
    _put(keyPart,valuePart,typePart,properties);
  }
  String portalPropertyPrefix=osgiBeanProperties.portalPropertyPrefix();
  if (Validator.isNotNull(portalPropertyPrefix)) {
    Properties portalProperties=PropsUtil.getProperties(portalPropertyPrefix,osgiBeanProperties.portalPropertiesRemovePrefix());
    properties.putAll(PropertiesUtil.toMap(portalProperties));
  }
  return properties;
}
