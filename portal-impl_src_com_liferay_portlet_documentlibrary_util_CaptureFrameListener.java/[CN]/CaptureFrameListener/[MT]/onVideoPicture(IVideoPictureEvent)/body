{
  try {
    if (_written) {
      return;
    }
    if (iVideoPictureEvent.getStreamIndex() != _streamIndex) {
      if (_streamIndex == -1) {
        _streamIndex=iVideoPictureEvent.getStreamIndex();
      }
 else {
        return;
      }
    }
    _written=true;
    _file.createNewFile();
    RenderedImage renderedImage=ImageProcessorUtil.scale(iVideoPictureEvent.getImage(),_height,_width);
    ImageIO.write(renderedImage,_extension,new FileOutputStream(_file));
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
}
