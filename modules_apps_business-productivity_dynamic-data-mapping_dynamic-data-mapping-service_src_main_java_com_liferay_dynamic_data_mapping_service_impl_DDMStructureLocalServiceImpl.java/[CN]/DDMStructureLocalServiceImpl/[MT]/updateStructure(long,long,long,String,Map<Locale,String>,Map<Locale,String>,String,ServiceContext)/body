{
  DDMStructure structure=ddmStructurePersistence.findByG_C_S(groupId,classNameId,structureKey);
  long userId=PortalUtil.getValidUserId(structure.getCompanyId(),serviceContext.getUserId());
  DDMXMLUtil.validateXML(definition);
  DDMForm ddmForm=DDMFormXSDDeserializerUtil.deserialize(definition);
  DDMFormLayout ddmFormLayout=DDMUtil.getDefaultDDMFormLayout(ddmForm);
  structureKey=getStructureKey(structureKey);
  return doUpdateStructure(userId,parentStructureId,nameMap,descriptionMap,ddmForm,ddmFormLayout,serviceContext,structure);
}
