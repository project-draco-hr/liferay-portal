{
  long pk=nextLong();
  ShortURL newShortURL=_persistence.create(pk);
  newShortURL.setCreateDate(nextDate());
  newShortURL.setModifiedDate(nextDate());
  newShortURL.setOriginalURL(randomString());
  newShortURL.setHash(randomString());
  newShortURL.setDescriptor(randomString());
  _persistence.update(newShortURL,false);
  ShortURL existingShortURL=_persistence.findByPrimaryKey(newShortURL.getPrimaryKey());
  assertEquals(existingShortURL.getShortURLId(),newShortURL.getShortURLId());
  assertEquals(Time.getShortTimestamp(existingShortURL.getCreateDate()),Time.getShortTimestamp(newShortURL.getCreateDate()));
  assertEquals(Time.getShortTimestamp(existingShortURL.getModifiedDate()),Time.getShortTimestamp(newShortURL.getModifiedDate()));
  assertEquals(existingShortURL.getOriginalURL(),newShortURL.getOriginalURL());
  assertEquals(existingShortURL.getHash(),newShortURL.getHash());
  assertEquals(existingShortURL.getDescriptor(),newShortURL.getDescriptor());
}
