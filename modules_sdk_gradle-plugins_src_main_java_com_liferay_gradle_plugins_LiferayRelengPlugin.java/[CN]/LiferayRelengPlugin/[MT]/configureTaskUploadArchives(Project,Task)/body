{
  Task uploadArchivesTask=GradleUtil.getTask(project,BasePlugin.UPLOAD_ARCHIVES_TASK_NAME);
  Spec<Task> releaseProjectSpec=new Spec<Task>(){
    @Override public boolean isSatisfiedBy(    Task task){
      Project project=task.getProject();
      if (GradleUtil.hasStartParameterTask(project,task.getName()) || GradleUtil.isSnapshot(project)) {
        return true;
      }
      return false;
    }
  }
;
  uploadArchivesTask.dependsOn(recordArtifactTask);
  recordArtifactTask.onlyIf(releaseProjectSpec);
}
