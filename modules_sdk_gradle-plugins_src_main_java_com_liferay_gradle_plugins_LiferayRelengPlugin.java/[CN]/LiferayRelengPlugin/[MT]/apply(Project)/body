{
  File relengDir=getRelengDir(project);
  if (relengDir == null) {
    return;
  }
  GradleUtil.applyPlugin(project,ChangeLogBuilderPlugin.class);
  GradleUtil.applyPlugin(project,MavenPlugin.class);
  final BuildChangeLogTask buildChangeLogTask=(BuildChangeLogTask)GradleUtil.getTask(project,ChangeLogBuilderPlugin.BUILD_CHANGE_LOG_TASK_NAME);
  final WritePropertiesTask recordArtifactTask=addTaskRecordArtifact(project,relengDir);
  final Task printStaleArtifactTask=addTaskPrintStaleArtifact(project,recordArtifactTask);
  configureTaskBuildChangeLog(buildChangeLogTask,relengDir);
  configureTaskUploadArchives(project,recordArtifactTask);
  GradleUtil.withPlugin(project,JavaPlugin.class,new Action<JavaPlugin>(){
    @Override public void execute(    JavaPlugin javaPlugin){
      configureTaskProcessResources(project,buildChangeLogTask);
    }
  }
);
  GradleUtil.withPlugin(project,LiferayOSGiPlugin.class,new Action<LiferayOSGiPlugin>(){
    @Override public void execute(    LiferayOSGiPlugin liferayOSGiPlugin){
      if (GradleUtil.hasStartParameterTask(project,LiferayBasePlugin.DEPLOY_TASK_NAME)) {
        configureTaskDeploy(project,recordArtifactTask);
      }
      if (LiferayOSGiDefaultsPlugin.isTestProject(project)) {
        printStaleArtifactTask.setEnabled(false);
      }
    }
  }
);
}
