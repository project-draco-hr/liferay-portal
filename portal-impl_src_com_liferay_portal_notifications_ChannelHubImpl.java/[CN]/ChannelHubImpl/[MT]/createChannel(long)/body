{
  if (_channels.containsKey(userId)) {
    return _channels.get(userId);
  }
  Channel channel=new ChannelImpl(_companyId,userId);
  Channel oldChannel=_channels.putIfAbsent(userId,channel);
  if (oldChannel != null) {
    channel.sendNotificationEvents(oldChannel.getNotificationEvents());
  }
  channel.init();
  return channel;
}
