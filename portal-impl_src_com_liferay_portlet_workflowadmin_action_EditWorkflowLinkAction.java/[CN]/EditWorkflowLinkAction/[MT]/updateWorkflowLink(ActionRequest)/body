{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long companyId=themeDisplay.getCompanyId();
  long userId=themeDisplay.getUserId();
  long groupId=0;
  Enumeration<String> enu=actionRequest.getParameterNames();
  while (enu.hasMoreElements()) {
    String name=enu.nextElement();
    if (!name.startsWith(_PREFIX)) {
      continue;
    }
    long classNameId=GetterUtil.getLong(name.substring(_PREFIX.length(),name.length()));
    String value=ParamUtil.getString(actionRequest,name);
    if (Validator.isNull(value)) {
      WorkflowLinkLocalServiceUtil.deleteWorkflowLink(userId,companyId,groupId,classNameId);
    }
 else {
      String values[]=value.split(StringPool.AT);
      String workflowDefinitionName=values[0];
      int workflowDefinitionVersion=Integer.valueOf(values[1]);
      WorkflowLinkLocalServiceUtil.updateWorkflowLink(userId,companyId,0,classNameId,workflowDefinitionName,workflowDefinitionVersion);
    }
  }
}
