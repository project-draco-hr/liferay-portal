{
  StringMaker sm=new StringMaker();
  if (parameterMap.size() > 0) {
    if (addQuestion) {
      sm.append(StringPool.QUESTION);
    }
    Iterator itr=parameterMap.entrySet().iterator();
    while (itr.hasNext()) {
      Map.Entry entry=(Map.Entry)itr.next();
      String name=(String)entry.getKey();
      Object valueObj=entry.getValue();
      String[] values;
      if (valueObj instanceof String[]) {
        values=(String[])entry.getValue();
      }
 else       if (valueObj instanceof String) {
        values=new String[]{(String)valueObj};
      }
 else {
        throw new IllegalArgumentException("Values of type " + valueObj.getClass() + " are not"+ " supported");
      }
      for (int i=0; i < values.length; i++) {
        sm.append(name);
        sm.append(StringPool.EQUAL);
        sm.append(Http.encodeURL(values[i]));
        sm.append(StringPool.AMPERSAND);
      }
    }
    sm.deleteCharAt(sm.length() - 1);
  }
  return sm.toString();
}
