{
  UnsyncByteArrayOutputStream unsyncByteArrayOutputStream=new UnsyncByteArrayOutputStream();
  UnsyncPrintWriter unsyncPrintWriter=new UnsyncPrintWriter(unsyncByteArrayOutputStream);
  Map<String,Object> inputObjects=new HashMap<String,Object>();
  inputObjects.put("content",content);
  inputObjects.put("out",unsyncPrintWriter);
  if (_rubyScriptRealPath == null) {
    _rubyScriptRealPath=ServletContextUtil.getRealPath(_servletContext,_RUBY_SCRIPT);
  }
  _rubyExecutor.evalFile(null,inputObjects,null,_rubyScriptRealPath);
  unsyncPrintWriter.flush();
  String parsedContent=unsyncByteArrayOutputStream.toString();
  if (Validator.isNotNull(parsedContent)) {
    return parsedContent;
  }
  return content;
}
