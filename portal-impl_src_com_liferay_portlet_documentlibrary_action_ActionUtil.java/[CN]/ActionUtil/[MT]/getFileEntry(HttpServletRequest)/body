{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  long groupId=ParamUtil.getLong(request,"groupId",themeDisplay.getScopeGroupId());
  long fileEntryId=ParamUtil.getLong(request,"fileEntryId");
  long folderId=ParamUtil.getLong(request,"folderId");
  long newFolderId=ParamUtil.getLong(request,"newFolderId");
  String name=ParamUtil.getString(request,"name");
  DLFileEntry fileEntry=null;
  if (Validator.isNotNull(name)) {
    try {
      fileEntry=DLAppServiceUtil.getFileEntry(groupId,folderId,name);
    }
 catch (    NoSuchFileEntryException nsfe) {
      fileEntry=DLAppServiceUtil.getFileEntry(groupId,newFolderId,name);
    }
  }
 else {
    fileEntry=DLAppServiceUtil.getFileEntry(fileEntryId);
  }
  request.setAttribute(WebKeys.DOCUMENT_LIBRARY_FILE_ENTRY,fileEntry);
}
