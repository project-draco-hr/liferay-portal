{
  long companyId=GetterUtil.getLong(ids[0]);
  String portletId=ids[1];
  long groupId=GetterUtil.getLong(ids[2]);
  long repositoryId=GetterUtil.getLong(ids[3]);
  IndexWriter writer=null;
  try {
    writer=LuceneUtil.getWriter(companyId);
    File repistoryDir=getRepositoryDir(companyId,repositoryId);
    String[] fileNames=FileUtil.listDirs(repistoryDir);
    for (int i=0; i < fileNames.length; i++) {
      String fileName=fileNames[i];
      try {
        Document doc=IndexerImpl.getAddFileDocument(companyId,portletId,groupId,repositoryId,fileName);
        writer.addDocument(doc);
      }
 catch (      Exception e) {
        _log.error("Reindexing " + fileName,e);
      }
    }
  }
 catch (  IOException ioe) {
    throw new SearchException(ioe);
  }
 finally {
    try {
      if (writer != null) {
        LuceneUtil.write(companyId);
      }
    }
 catch (    Exception e) {
      _log.error(e);
    }
  }
}
