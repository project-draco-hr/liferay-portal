{
  int width=pi.getWidth();
  int height=pi.getHeight();
  SampleModel sm=pi.getSampleModel();
  int nbands=sm.getNumBands();
  Raster inputRaster=pi.getData();
  int[] pixels=new int[nbands * width * height];
  inputRaster.getPixels(0,0,width,height,pixels);
  int offset;
  for (int h=0; h < height; h++)   for (int w=0; w < width; w++) {
    offset=h * width * nbands + w * nbands;
    System.out.print("at (" + w + ","+ h+ "): ");
    for (int band=0; band < nbands; band++)     System.out.print(pixels[offset + band] + " ");
    System.out.println();
  }
}
