{
  String basedir="../portal-web/docroot/html/themes/_unstyled/images";
  DirectoryScanner ds=new DirectoryScanner();
  ds.setBasedir(basedir);
  ds.setIncludes(new String[]{"**\\*.png"});
  ds.scan();
  List<RenderedImage> renderedImages=new ArrayList<RenderedImage>();
  String[] files=ds.getIncludedFiles();
  float x=0;
  float y=0;
  for (int i=0; i < files.length; i++) {
    String file=files[i];
    RenderedOp renderedOp=FileLoadDescriptor.create(basedir + "/" + file,null,null,null);
    RenderedImage renderedImage=convert(renderedOp);
    renderedImage=TranslateDescriptor.create(renderedImage,x,y,null,null);
    if ((renderedImage.getHeight() <= 16) && (renderedImage.getWidth() <= 16)) {
      renderedImages.add(renderedImage);
      y+=renderedOp.getHeight();
    }
  }
  RenderedOp renderedOp=MosaicDescriptor.create((RenderedImage[])renderedImages.toArray(new RenderedImage[renderedImages.size()]),MosaicDescriptor.MOSAIC_TYPE_OVERLAY,null,null,null,null,null);
  ImageIO.write(renderedOp,"png",new File("out.png"));
}
