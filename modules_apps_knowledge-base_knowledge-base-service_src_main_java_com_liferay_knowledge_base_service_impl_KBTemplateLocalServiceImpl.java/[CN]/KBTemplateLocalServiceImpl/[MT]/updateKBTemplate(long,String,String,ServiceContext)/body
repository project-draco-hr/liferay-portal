{
  validate(title,content);
  KBTemplate kbTemplate=kbTemplatePersistence.findByPrimaryKey(kbTemplateId);
  kbTemplate.setModifiedDate(serviceContext.getModifiedDate(null));
  kbTemplate.setTitle(title);
  kbTemplate.setContent(content);
  kbTemplatePersistence.update(kbTemplate);
  if ((serviceContext.getGroupPermissions() != null) || (serviceContext.getGuestPermissions() != null)) {
    updateKBTemplateResources(kbTemplate,serviceContext.getGroupPermissions(),serviceContext.getGuestPermissions());
  }
  JSONObject extraDataJSONObject=JSONFactoryUtil.createJSONObject();
  extraDataJSONObject.put("title",kbTemplate.getTitle());
  socialActivityLocalService.addActivity(kbTemplate.getUserId(),kbTemplate.getGroupId(),KBTemplate.class.getName(),kbTemplateId,AdminActivityKeys.UPDATE_KB_TEMPLATE,extraDataJSONObject.toString(),0);
  return kbTemplate;
}
