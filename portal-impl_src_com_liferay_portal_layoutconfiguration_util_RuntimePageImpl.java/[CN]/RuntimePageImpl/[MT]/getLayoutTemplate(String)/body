{
  String separator=LayoutTemplateConstants.CUSTOM_SEPARATOR;
  boolean standard=false;
  if (velocityTemplateId.contains(LayoutTemplateConstants.STANDARD_SEPARATOR)) {
    separator=LayoutTemplateConstants.STANDARD_SEPARATOR;
    standard=true;
  }
  String layoutTemplateId=null;
  String themeId=null;
  int pos=velocityTemplateId.indexOf(separator);
  if (pos != -1) {
    layoutTemplateId=velocityTemplateId.substring(pos + separator.length());
    themeId=velocityTemplateId.substring(0,pos);
  }
  pos=layoutTemplateId.indexOf(PortletConstants.INSTANCE_SEPARATOR);
  if (pos != -1) {
    layoutTemplateId=layoutTemplateId.substring(pos + PortletConstants.INSTANCE_SEPARATOR.length() + 1);
    pos=layoutTemplateId.indexOf(StringPool.UNDERLINE);
    layoutTemplateId=layoutTemplateId.substring(pos + 1);
  }
  return LayoutTemplateLocalServiceUtil.getLayoutTemplate(layoutTemplateId,standard,themeId);
}
