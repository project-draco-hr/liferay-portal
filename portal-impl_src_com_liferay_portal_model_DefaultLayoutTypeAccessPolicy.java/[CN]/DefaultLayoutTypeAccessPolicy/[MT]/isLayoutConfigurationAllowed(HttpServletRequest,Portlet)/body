{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  if (!themeDisplay.isSignedIn()) {
    return false;
  }
  String portletId=portlet.getPortletId();
  if (!portletId.equals(PortletKeys.LAYOUTS_ADMIN)) {
    return false;
  }
  PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
  Layout layout=themeDisplay.getLayout();
  Group group=layout.getGroup();
  if (group.isSite()) {
    if (LayoutPermissionUtil.contains(permissionChecker,layout,ActionKeys.CUSTOMIZE) || LayoutPermissionUtil.contains(permissionChecker,layout,ActionKeys.UPDATE)) {
      return true;
    }
  }
  if (group.isCompany()) {
    if (permissionChecker.isCompanyAdmin()) {
      return true;
    }
  }
 else   if (group.isLayoutPrototype()) {
    long layoutPrototypeId=group.getClassPK();
    if (LayoutPrototypePermissionUtil.contains(permissionChecker,layoutPrototypeId,ActionKeys.UPDATE)) {
      return true;
    }
  }
 else   if (group.isLayoutSetPrototype()) {
    long layoutSetPrototypeId=group.getClassPK();
    if (LayoutSetPrototypePermissionUtil.contains(permissionChecker,layoutSetPrototypeId,ActionKeys.UPDATE)) {
      return true;
    }
  }
 else   if (group.isOrganization()) {
    long organizationId=group.getOrganizationId();
    if (OrganizationPermissionUtil.contains(permissionChecker,organizationId,ActionKeys.UPDATE)) {
      return true;
    }
  }
 else   if (group.isUserGroup()) {
    long scopeGroupId=themeDisplay.getScopeGroupId();
    if (GroupPermissionUtil.contains(permissionChecker,scopeGroupId,ActionKeys.UPDATE)) {
      return true;
    }
  }
 else   if (group.isUser()) {
    return true;
  }
  return false;
}
