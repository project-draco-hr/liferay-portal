{
  if (e instanceof AssetCategoryException || e instanceof AssetTagException) {
    SessionErrors.add(actionRequest,e.getClass(),e);
  }
 else   if (e instanceof AntivirusScannerException || e instanceof DuplicateFileException || e instanceof DuplicateFolderNameException|| e instanceof FileExtensionException|| e instanceof FileMimeTypeException|| e instanceof FileNameException|| e instanceof FileSizeException|| e instanceof LiferayFileItemException|| e instanceof NoSuchFolderException|| e instanceof SourceFileNameException|| e instanceof StorageFieldRequiredException) {
    UploadException uploadException=(UploadException)actionRequest.getAttribute(WebKeys.UPLOAD_EXCEPTION);
    if (uploadException != null) {
      String uploadExceptionRedirect=ParamUtil.getString(actionRequest,"uploadExceptionRedirect");
      actionResponse.sendRedirect(uploadExceptionRedirect);
      SessionErrors.add(actionRequest,e.getClass());
      return;
    }
    if (e instanceof AntivirusScannerException) {
      SessionErrors.add(actionRequest,e.getClass(),e);
    }
 else {
      SessionErrors.add(actionRequest,e.getClass());
    }
  }
 else   if (e instanceof InvalidFileVersionException || e instanceof NoSuchFileEntryException || e instanceof PrincipalException) {
    SessionErrors.add(actionRequest,e.getClass());
    setForward(actionRequest,"portlet.document_library.error");
  }
 else {
    throw e;
  }
}
