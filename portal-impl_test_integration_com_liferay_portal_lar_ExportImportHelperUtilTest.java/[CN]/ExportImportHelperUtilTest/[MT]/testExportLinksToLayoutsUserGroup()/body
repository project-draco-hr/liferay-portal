{
  User user=UserTestUtil.addUser();
  Group group=user.getGroup();
  Layout privateLayout=LayoutTestUtil.addLayout(group.getGroupId(),ServiceTestUtil.randomString(),true);
  Layout publicLayout=LayoutTestUtil.addLayout(group.getGroupId(),ServiceTestUtil.randomString(),false);
  PortletDataContext portletDataContextExport=PortletDataContextFactoryUtil.createExportPortletDataContext(group.getCompanyId(),group.getGroupId(),new HashMap<String,String[]>(),new Date(System.currentTimeMillis() - Time.HOUR),new Date(),new TestReaderWriter());
  StagedModel referrerStagedModel=JournalTestUtil.addArticle(group.getGroupId(),ServiceTestUtil.randomString(),ServiceTestUtil.randomString());
  Element rootElement=SAXReaderUtil.createElement("root");
  rootElement.addElement("entry");
  String content=replaceLinksToLayoutsParameters(getContent("layout_links_user_group.txt"),privateLayout,publicLayout);
  content=ExportImportHelperUtil.replaceExportContentReferences(portletDataContextExport,referrerStagedModel,rootElement.element("entry"),content,true);
  assertLinksToLayouts(content,privateLayout,false);
  assertLinksToLayouts(content,privateLayout,true);
  assertLinksToLayouts(content,publicLayout,false);
  assertLinksToLayouts(content,publicLayout,true);
}
