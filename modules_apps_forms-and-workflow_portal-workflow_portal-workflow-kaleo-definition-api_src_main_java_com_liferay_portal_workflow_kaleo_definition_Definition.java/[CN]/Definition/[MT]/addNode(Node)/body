{
  if (_nodesMap.containsKey(node.getName())) {
    throw new IllegalArgumentException("Duplicate node " + node.getName());
  }
  _nodesMap.put(node.getName(),node);
  if (node instanceof State) {
    State state=(State)node;
    if (state.isInitial()) {
      _initialState=state;
    }
  }
 else   if (node instanceof Fork) {
    _forks.add((Fork)node);
  }
 else   if (node instanceof Join) {
    _joins.add((Join)node);
  }
}
