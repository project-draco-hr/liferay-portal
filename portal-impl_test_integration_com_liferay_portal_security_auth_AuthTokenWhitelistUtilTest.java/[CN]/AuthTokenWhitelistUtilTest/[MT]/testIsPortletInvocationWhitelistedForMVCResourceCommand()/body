{
  MockHttpServletRequest mockHttpServletRequest=new MockHttpServletRequest();
  mockHttpServletRequest.setParameter("p_p_id",TestMVCResourceCommand.TEST_PORTLET_ID);
  mockHttpServletRequest.setParameter("p_p_resource_id",TestMVCResourceCommand.TEST_MVC_COMMAND_NAME);
  ThemeDisplay themeDisplay=new ThemeDisplay();
  themeDisplay.setLifecycleResource(true);
  mockHttpServletRequest.setAttribute(WebKeys.THEME_DISPLAY,themeDisplay);
  Portlet portlet=PortletLocalServiceUtil.getPortletById(TestMVCResourceCommand.TEST_PORTLET_ID);
  Assert.assertTrue(AuthTokenWhitelistUtil.isPortletInvocationWhitelisted(mockHttpServletRequest,portlet));
}
