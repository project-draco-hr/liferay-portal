{
  Portlet portlet=PortletLocalServiceUtil.getPortletById(TestMVCActionCommand.TEST_PORTLET_ID);
  MockHttpServletRequest mockHttpServletRequest=new MockHttpServletRequest();
  String namespace=PortalUtil.getPortletNamespace(TestMVCActionCommand.TEST_PORTLET_ID);
  mockHttpServletRequest.setParameter(namespace + ActionRequest.ACTION_NAME,TestMVCActionCommand.TEST_MVC_COMMAND_NAME);
  ThemeDisplay themeDisplay=new ThemeDisplay();
  themeDisplay.setLifecycleAction(true);
  mockHttpServletRequest.setAttribute(WebKeys.THEME_DISPLAY,themeDisplay);
  Assert.assertTrue(AuthTokenWhitelistUtil.isPortletInvocationWhitelisted(mockHttpServletRequest,portlet));
}
