{
  MockHttpServletRequest mockHttpServletRequest=new MockHttpServletRequest();
  String namespace=PortalUtil.getPortletNamespace(TestMVCRenderCommand.TEST_PORTLET_ID);
  mockHttpServletRequest.setParameter(namespace + "mvcRenderCommandName",TestMVCRenderCommand.TEST_MVC_COMMAND_NAME);
  ThemeDisplay themeDisplay=new ThemeDisplay();
  themeDisplay.setLifecycleRender(true);
  mockHttpServletRequest.setAttribute(WebKeys.THEME_DISPLAY,themeDisplay);
  Portlet portlet=PortletLocalServiceUtil.getPortletById(TestMVCRenderCommand.TEST_PORTLET_ID);
  Assert.assertTrue(AuthTokenWhitelistUtil.isPortletInvocationWhitelisted(mockHttpServletRequest,portlet));
}
