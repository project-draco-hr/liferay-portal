{
  try (PreparedStatement preparedStatement=AutoBatchPreparedStatementUtil.concurrentAutoBatch((Connection)ProxyUtil.newProxyInstance(ClassLoader.getSystemClassLoader(),new Class<?>[]{Connection.class},new ConnectionInvocationHandler(new PreparedStatementInvocationHandler(supportBatchUpdates))),StringPool.BLANK)){
    preparedStatement.addBatch();
    preparedStatement.executeBatch();
    preparedStatement.addBatch();
    preparedStatement.executeBatch();
  }
 catch (  Throwable t) {
    Assert.assertSame(CancellationException.class,t.getClass());
    Throwable[] throwables=t.getSuppressed();
    Assert.assertEquals(1,throwables.length);
    Throwable throwable=throwables[0];
    Assert.assertSame(CancellationException.class,throwable.getClass());
    return;
  }
  Assert.fail();
}
