{
  MockMultiVMPool mockMultiVMPool=(MockMultiVMPool)MultiVMPoolUtil.getMultiVMPool();
  Map<String,PortalCache<?,?>> portalCaches=mockMultiVMPool.getPortalCaches();
  Assert.assertEquals(2,portalCaches.size());
  if (tableMapper instanceof ReverseTableMapper) {
    Assert.assertSame(ReflectionTestUtil.getFieldValue(tableMapper.getReverseTableMapper(),"leftToRightPortalCache"),portalCaches.get(TableMapper.class.getName() + "-" + _tableName+ "-LeftToRight"));
    Assert.assertSame(ReflectionTestUtil.getFieldValue(tableMapper.getReverseTableMapper(),"rightToLeftPortalCache"),portalCaches.get(TableMapper.class.getName() + "-" + _tableName+ "-RightToLeft"));
  }
 else {
    Assert.assertSame(ReflectionTestUtil.getFieldValue(tableMapper,"leftToRightPortalCache"),portalCaches.get(TableMapper.class.getName() + "-" + _tableName+ "-LeftToRight"));
    Assert.assertSame(ReflectionTestUtil.getFieldValue(tableMapper,"rightToLeftPortalCache"),portalCaches.get(TableMapper.class.getName() + "-" + _tableName+ "-RightToLeft"));
  }
  tableMapper.destroy();
  Assert.assertTrue(portalCaches.isEmpty());
}
