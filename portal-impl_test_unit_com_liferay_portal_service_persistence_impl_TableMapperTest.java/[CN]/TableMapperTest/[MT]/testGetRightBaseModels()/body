{
  long companyId=0;
  long leftPrimaryKey=1;
  List<Right> rights=_tableMapperImpl.getRightBaseModels(companyId,leftPrimaryKey,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  Assert.assertSame(Collections.emptyList(),rights);
  PortalCache<Long,long[]> leftToRightPortalCache=_tableMapperImpl.getLeftToRightPortalCache(companyId);
  leftToRightPortalCache.remove(leftPrimaryKey);
  long rightPrimaryKey1=2;
  Map<Long,long[]> mappingStore=getMappingStore(companyId);
  mappingStore.put(leftPrimaryKey,new long[]{rightPrimaryKey1});
  rights=_tableMapperImpl.getRightBaseModels(companyId,leftPrimaryKey,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  Assert.assertEquals(1,rights.size());
  Right right1=rights.get(0);
  Assert.assertEquals(rightPrimaryKey1,right1.getPrimaryKeyObj());
  leftToRightPortalCache.remove(leftPrimaryKey);
  long rightPrimaryKey2=3;
  mappingStore.put(leftPrimaryKey,new long[]{rightPrimaryKey2,rightPrimaryKey1});
  rights=_tableMapperImpl.getRightBaseModels(companyId,leftPrimaryKey,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  Assert.assertEquals(2,rights.size());
  right1=rights.get(0);
  Right right2=rights.get(1);
  Assert.assertEquals(rightPrimaryKey1,right1.getPrimaryKeyObj());
  Assert.assertEquals(rightPrimaryKey2,right2.getPrimaryKeyObj());
  leftToRightPortalCache.remove(leftPrimaryKey);
  mappingStore.put(leftPrimaryKey,new long[]{rightPrimaryKey2,rightPrimaryKey1});
  rights=_tableMapperImpl.getRightBaseModels(companyId,leftPrimaryKey,QueryUtil.ALL_POS,QueryUtil.ALL_POS,new OrderByComparator<Right>(){
    @Override public int compare(    Right right1,    Right right2){
      Long rightPrimaryKey1=(Long)right1.getPrimaryKeyObj();
      Long rightPrimaryKey2=(Long)right2.getPrimaryKeyObj();
      return rightPrimaryKey2.compareTo(rightPrimaryKey1);
    }
  }
);
  Assert.assertEquals(2,rights.size());
  right1=rights.get(0);
  right2=rights.get(1);
  Assert.assertEquals(rightPrimaryKey2,right1.getPrimaryKeyObj());
  Assert.assertEquals(rightPrimaryKey1,right2.getPrimaryKeyObj());
  leftToRightPortalCache.remove(leftPrimaryKey);
  long rightPrimaryKey3=4;
  mappingStore.put(leftPrimaryKey,new long[]{rightPrimaryKey3,rightPrimaryKey2,rightPrimaryKey1});
  rights=_tableMapperImpl.getRightBaseModels(companyId,leftPrimaryKey,1,2,null);
  Assert.assertEquals(1,rights.size());
  Right right=rights.get(0);
  Assert.assertEquals(rightPrimaryKey2,right.getPrimaryKeyObj());
  leftToRightPortalCache.remove(leftPrimaryKey);
  _rightBasePersistence.setNoSuchModelException(true);
  try {
    _tableMapperImpl.getRightBaseModels(companyId,leftPrimaryKey,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  }
 catch (  SystemException se) {
    Throwable cause=se.getCause();
    Assert.assertSame(NoSuchModelException.class,cause.getClass());
    Assert.assertEquals(String.valueOf(rightPrimaryKey1),cause.getMessage());
  }
 finally {
    _rightBasePersistence.setNoSuchModelException(false);
  }
}
