{
  Assert.assertEquals(2,params.length);
  Assert.assertSame(Long.class,params[0].getClass());
  Assert.assertSame(Long.class,params[1].getClass());
  if (_databaseError) {
    throw new RuntimeException("Database error");
  }
  int count=0;
  Long companyId=(Long)params[0];
  Long rightPrimaryKey=(Long)params[1];
  Map<Long,long[]> mappingStore=getMappingStore(companyId);
  for (  Map.Entry<Long,long[]> entry : mappingStore.entrySet()) {
    long[] rightPrimaryKeys=entry.getValue();
    if (ArrayUtil.contains(rightPrimaryKeys,rightPrimaryKey)) {
      count++;
      rightPrimaryKeys=ArrayUtil.remove(rightPrimaryKeys,rightPrimaryKey);
      entry.setValue(rightPrimaryKeys);
    }
  }
  return count;
}
