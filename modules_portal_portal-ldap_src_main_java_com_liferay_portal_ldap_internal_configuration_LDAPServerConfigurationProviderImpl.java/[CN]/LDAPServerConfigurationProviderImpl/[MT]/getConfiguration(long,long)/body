{
  Map<Long,Configuration> configurations=_configurations.get(companyId);
  if (MapUtil.isEmpty(configurations)) {
    configurations=_configurations.get(0L);
  }
  if (MapUtil.isEmpty(configurations)) {
    throw new IllegalArgumentException("No default LDAP server configuration found");
  }
  Configuration configuration=configurations.get(ldapServerId);
  if (configuration == null) {
    throw new IllegalArgumentException("No LDAP server configuration found for company " + companyId + " and LDAP server "+ ldapServerId);
  }
  Dictionary<String,Object> properties=configuration.getProperties();
  LDAPServerConfiguration ldapServerConfiguration=Configurable.createConfigurable(getMetatype(),properties);
  return ldapServerConfiguration;
}
