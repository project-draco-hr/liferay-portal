{
  Dictionary<String,Object> properties=configuration.getProperties();
  if (properties == null) {
    properties=new HashMapDictionary<>();
  }
  LDAPServerConfiguration ldapServerConfiguration=Configurable.createConfigurable(getMetatype(),properties);
  Tuple tuple=new Tuple(ldapServerConfiguration.companyId(),ldapServerConfiguration.ldapServerId());
  _pidToCompanyIdLDAPServerId.put(configuration.getPid(),tuple);
synchronized (_configurations) {
    Map<Long,Configuration> ldapServerConfigurations=_configurations.get(ldapServerConfiguration.companyId());
    if (ldapServerConfigurations == null) {
      ldapServerConfigurations=new TreeMap<>();
      _configurations.put(ldapServerConfiguration.companyId(),ldapServerConfigurations);
    }
    ldapServerConfigurations.put(ldapServerConfiguration.ldapServerId(),configuration);
  }
}
