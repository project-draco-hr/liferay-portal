{
  Map<Long,Configuration> configurations=_configurations.get(companyId);
  Map<Long,Configuration> defaultCompanyConfigurations=_configurations.get(CompanyConstants.SYSTEM);
  if (MapUtil.isEmpty(configurations) && MapUtil.isEmpty(defaultCompanyConfigurations)) {
    return new HashMapDictionary<>();
  }
 else   if (MapUtil.isEmpty(configurations)) {
    configurations=defaultCompanyConfigurations;
  }
  Configuration configuration=configurations.get(ldapServerId);
  if ((configuration == null) && !MapUtil.isEmpty(defaultCompanyConfigurations)) {
    configuration=defaultCompanyConfigurations.get(LDAPServerConfiguration.LDAP_SERVER_ID_DEFAULT);
  }
  if (configuration == null) {
    return new HashMapDictionary<>();
  }
  return configuration.getProperties();
}
