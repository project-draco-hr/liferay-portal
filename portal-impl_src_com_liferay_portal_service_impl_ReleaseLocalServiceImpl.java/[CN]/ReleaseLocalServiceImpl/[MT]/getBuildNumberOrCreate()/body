{
  Connection con=null;
  PreparedStatement ps=null;
  ResultSet rs=null;
  try {
    con=DataAccess.getConnection();
    ps=con.prepareStatement(_GET_BUILD_NUMBER);
    rs=ps.executeQuery();
    if (rs.next()) {
      int buildNumber=rs.getInt("buildNumber");
      if (_log.isDebugEnabled()) {
        _log.debug("Build number " + buildNumber);
      }
      return buildNumber;
    }
  }
 catch (  Exception e) {
    if (_log.isWarnEnabled()) {
      _log.warn(e.getMessage());
    }
  }
 finally {
    DataAccess.cleanUp(con,ps,rs);
  }
  if (GetterUtil.getBoolean(PropsUtil.get(PropsKeys.SCHEMA_RUN_ENABLED))) {
    if (_log.isInfoEnabled()) {
      _log.info("Create tables and populate with default data");
    }
    createTablesAndPopulate();
    return getRelease().getBuildNumber();
  }
 else {
    throw new NoSuchReleaseException("The database needs to be populated");
  }
}
