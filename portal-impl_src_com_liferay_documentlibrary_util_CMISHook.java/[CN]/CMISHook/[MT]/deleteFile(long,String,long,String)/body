{
  Entry versioningFolderEntry=getVersioningFolderEntry(companyId,repositoryId,fileName,false);
  if (versioningFolderEntry == null) {
    throw new NoSuchFileException();
  }
  CMISUtil.delete(versioningFolderEntry);
  Indexer indexer=IndexerRegistryUtil.getIndexer(FileModel.class);
  FileModel fileModel=new FileModel();
  fileModel.setCompanyId(companyId);
  fileModel.setFileName(fileName);
  fileModel.setPortletId(portletId);
  fileModel.setRepositoryId(repositoryId);
  indexer.delete(fileModel);
}
