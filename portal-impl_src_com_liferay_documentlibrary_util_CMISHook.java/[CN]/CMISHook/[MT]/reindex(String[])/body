{
  Map<String,Document> documents=new HashMap<String,Document>();
  long companyId=GetterUtil.getLong(ids[0]);
  try {
    String portletId=ids[1];
    long groupId=GetterUtil.getLong(ids[2]);
    long repositoryId=GetterUtil.getLong(ids[3]);
    Entry repositoryFolderEntry=getRepositoryFolderEntry(companyId,repositoryId);
    List<String> fileNames=CMISUtil.getFolders(repositoryFolderEntry);
    for (    String fileName : fileNames) {
      try {
        Indexer indexer=IndexerRegistryUtil.getIndexer(FileModel.class);
        FileModel fileModel=new FileModel();
        fileModel.setCompanyId(companyId);
        fileModel.setFileName(fileName);
        fileModel.setGroupId(groupId);
        fileModel.setPortletId(portletId);
        fileModel.setRepositoryId(repositoryId);
        Document document=indexer.getDocument(fileModel);
        if (document == null) {
          continue;
        }
        documents.put(document.get(Field.UID),document);
      }
 catch (      Exception e) {
        _log.error("Reindexing " + fileName,e);
      }
    }
  }
 catch (  Exception e) {
    if (_log.isErrorEnabled()) {
      _log.error("Error while reindexing files",e);
    }
  }
  SearchEngineUtil.updateDocuments(companyId,documents);
}
