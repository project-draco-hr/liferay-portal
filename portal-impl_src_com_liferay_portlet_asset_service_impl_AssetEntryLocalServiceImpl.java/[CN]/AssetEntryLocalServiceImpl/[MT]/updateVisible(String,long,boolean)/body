{
  long classNameId=PortalUtil.getClassNameId(className);
  AssetEntry entry=assetEntryPersistence.findByC_C(classNameId,classPK);
  List<AssetTag> tags=assetEntryPersistence.getAssetTags(entry.getEntryId());
  if (visible && !entry.isVisible()) {
    for (    AssetTag tag : tags) {
      assetTagLocalService.incrementAssetCount(tag.getTagId(),classNameId);
    }
  }
 else   if (!visible && entry.isVisible()) {
    for (    AssetTag tag : tags) {
      assetTagLocalService.decrementAssetCount(tag.getTagId(),classNameId);
    }
  }
  entry.setVisible(visible);
  assetEntryPersistence.update(entry,false);
  return entry;
}
