{
  PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
  if (permissionChecker == null) {
    return categoryIds;
  }
  List<AssetCategory> oldCategories=assetCategoryLocalService.getCategories(className,classPK);
  for (  AssetCategory category : oldCategories) {
    if (!ArrayUtil.contains(categoryIds,category.getCategoryId()) && !AssetCategoryPermission.contains(permissionChecker,category,ActionKeys.VIEW)) {
      categoryIds=ArrayUtil.append(categoryIds,category.getCategoryId());
    }
  }
  return categoryIds;
}
