{
  try {
    SearchContext searchContext=new SearchContext();
    Facet assetEntriesFacet=new AssetEntriesFacet(searchContext);
    assetEntriesFacet.setStatic(true);
    searchContext.addFacet(assetEntriesFacet);
    Facet scopeFacet=new ScopeFacet(searchContext);
    scopeFacet.setStatic(true);
    searchContext.addFacet(scopeFacet);
    searchContext.setAndSearch(andSearch);
    searchContext.setAssetCategoryIds(StringUtil.split(assetCategoryIds,0L));
    searchContext.setAssetTagNames(StringUtil.split(assetTagNames));
    searchContext.setAttribute(Field.DESCRIPTION,description);
    searchContext.setAttribute(Field.TITLE,title);
    searchContext.setAttribute(Field.USER_NAME,userName);
    searchContext.setAttribute("paginationType","regular");
    searchContext.setAttribute("status",status);
    if (classTypeId > 0) {
      searchContext.setClassTypeIds(new long[]{classTypeId});
    }
    searchContext.setCompanyId(companyId);
    searchContext.setEnd(end);
    searchContext.setEntryClassNames(getClassNames(companyId,className));
    searchContext.setGroupIds(groupIds);
    QueryConfig queryConfig=searchContext.getQueryConfig();
    queryConfig.setHighlightEnabled(false);
    queryConfig.setScoreEnabled(false);
    searchContext.setStart(start);
    searchContext.setUserId(userId);
    Indexer indexer=FacetedSearcher.getInstance();
    return indexer.search(searchContext);
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
