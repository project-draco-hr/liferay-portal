{
  PortletRequest portletRequest=(PortletRequest)request.getAttribute(JavaConstants.JAVAX_PORTLET_REQUEST);
  request.setAttribute("liferay-ui:error:key",_key);
  request.setAttribute("liferay-ui:error:message",_message);
  request.setAttribute("liferay-ui:error:rowBreak",_rowBreak);
  request.setAttribute("liferay-ui:error:targetNode",_targetNode);
  request.setAttribute("liferay-ui:error:translateMessage",String.valueOf(_translateMessage));
  if (SessionErrors.contains(portletRequest,_key)) {
    String errorMarkerKey=(String)request.getAttribute("liferay-ui:error-marker:key");
    String errorMarkerValue=(String)request.getAttribute("liferay-ui:error-marker:value");
    if (Validator.isNotNull(errorMarkerKey) && Validator.isNotNull(errorMarkerValue)) {
      request.setAttribute(errorMarkerKey,errorMarkerValue);
      Object exception=getException(portletRequest);
      if (exception instanceof Exception) {
        request.setAttribute("liferay-ui:error:exception",exception);
      }
      request.setAttribute("liferay-ui:error:focusField",_focusField);
    }
  }
}
