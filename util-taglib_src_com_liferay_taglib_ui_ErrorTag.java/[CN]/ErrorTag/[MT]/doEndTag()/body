{
  try {
    HttpServletRequest request=(HttpServletRequest)pageContext.getRequest();
    RenderRequest renderRequest=(RenderRequest)request.getAttribute(JavaConstants.JAVAX_PORTLET_REQUEST);
    boolean includeEndPage=false;
    if (_key == null) {
      if (!SessionErrors.isEmpty(renderRequest)) {
        includeEndPage=true;
      }
    }
 else {
      if (SessionErrors.contains(renderRequest,_key)) {
        includeEndPage=true;
      }
    }
    if (includeEndPage) {
      PortalIncludeUtil.include(pageContext,getEndPage());
    }
    return EVAL_PAGE;
  }
 catch (  Exception e) {
    throw new JspException(e);
  }
}
