{
  try {
    ServletRequest req=pageContext.getRequest();
    RenderRequest renderRequest=(RenderRequest)req.getAttribute(WebKeys.JAVAX_PORTLET_REQUEST);
    boolean includeEndPage=false;
    if (_key == null) {
      if (!SessionErrors.isEmpty(renderRequest)) {
        includeEndPage=true;
      }
    }
 else {
      if (SessionErrors.contains(renderRequest,_key)) {
        includeEndPage=true;
      }
    }
    if (includeEndPage) {
      pageContext.include(getEndPage());
    }
    return EVAL_PAGE;
  }
 catch (  Exception e) {
    throw new JspException(e);
  }
}
