{
  try {
    HttpServletRequest request=(HttpServletRequest)pageContext.getRequest();
    RenderRequest renderRequest=(RenderRequest)request.getAttribute(JavaConstants.JAVAX_PORTLET_REQUEST);
    boolean includeEndPage=false;
    if (_key == null) {
      if (!SessionErrors.isEmpty(renderRequest)) {
        includeEndPage=true;
      }
    }
 else {
      if (SessionErrors.contains(renderRequest,_key)) {
        includeEndPage=true;
      }
    }
    if (includeEndPage) {
      PortalIncludeUtil.include(pageContext,getEndPage());
      String errorMarkerKey=(String)request.getAttribute("liferay-ui:error-marker:key");
      String errorMarkerValue=(String)request.getAttribute("liferay-ui:error-marker:value");
      if (Validator.isNotNull(errorMarkerKey) && Validator.isNotNull(errorMarkerValue)) {
        request.setAttribute(errorMarkerKey,errorMarkerValue);
      }
    }
    return EVAL_PAGE;
  }
 catch (  Exception e) {
    throw new JspException(e);
  }
}
