{
  if (Validator.isNull(autodetectAddress)) {
    return;
  }
  String host=autodetectAddress;
  int port=80;
  int index=autodetectAddress.indexOf(CharPool.COLON);
  if (index != -1) {
    host=autodetectAddress.substring(0,index);
    port=GetterUtil.getInteger(autodetectAddress.substring(index + 1),port);
  }
  if (_log.isInfoEnabled()) {
    _log.info("Autodetecting JGroups outgoing IP address and interface for " + host + ":"+ port);
  }
  try {
    SocketUtil.BindInfo bindInfo=SocketUtil.getBindInfo(host,port);
    _bindInetAddress=bindInfo.getInetAddress();
    _bindNetworkInterface=bindInfo.getNetworkInterface();
  }
 catch (  IOException e) {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to detect bind address for JGroups, using " + "loopback");
      if (_log.isDebugEnabled()) {
        _log.debug(e,e);
      }
    }
    _bindInetAddress=InetAddress.getLoopbackAddress();
    try {
      _bindNetworkInterface=NetworkInterface.getByInetAddress(_bindInetAddress);
    }
 catch (    IOException ie) {
      if (_log.isErrorEnabled()) {
        _log.error("Unable to bind to lopoback interface",ie);
      }
    }
  }
  System.setProperty("jgroups.bind_addr",_bindInetAddress.getHostAddress());
  System.setProperty("jgroups.bind_interface",_bindNetworkInterface.getName());
  if (_log.isInfoEnabled()) {
    String hostAddress=_bindInetAddress.getHostAddress();
    String name=_bindNetworkInterface.getName();
    _log.info("Setting JGroups outgoing IP address to " + hostAddress + " and interface to "+ name);
  }
}
