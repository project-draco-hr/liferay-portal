{
  Map<String,String[]> parameterMap=null;
  if (_portletRequestDispatcherRequest != null) {
    parameterMap=_portletRequestDispatcherRequest.getParameterMap();
  }
 else {
    parameterMap=_request.getParameterMap();
  }
  Map<String,String[]> privateParameterMap=null;
  for (  Map.Entry<String,String[]> entry : parameterMap.entrySet()) {
    String name=entry.getKey();
    if (_portlet.getPublicRenderParameter(name) != null) {
      continue;
    }
    if (privateParameterMap == null) {
      privateParameterMap=new HashMap<String,String[]>(parameterMap.size(),1);
    }
    privateParameterMap.put(name,entry.getValue());
  }
  if (privateParameterMap == null) {
    return Collections.emptyMap();
  }
  return Collections.unmodifiableMap(privateParameterMap);
}
