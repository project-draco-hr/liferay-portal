{
  if (_remoteUserId <= 0) {
    return false;
  }
  try {
    long companyId=PortalUtil.getCompanyId(_request);
    String roleLink=_portlet.getRoleMappers().get(role);
    if (Validator.isNotNull(roleLink)) {
      return RoleLocalServiceUtil.hasUserRole(_remoteUserId,companyId,roleLink,true);
    }
 else {
      return RoleLocalServiceUtil.hasUserRole(_remoteUserId,companyId,role,true);
    }
  }
 catch (  Exception e) {
    _log.error(e);
  }
  return _request.isUserInRole(role);
}
