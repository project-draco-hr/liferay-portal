{
  if (!attributeAndValue.endsWith(StringPool.QUOTE) || attributeAndValue.contains("\"<%=")) {
    return line;
  }
  if (tag.startsWith("liferay-")) {
    tag=tag.substring(8);
  }
  JavaClass tagJavaClass=getTagJavaClass(tag);
  if (tagJavaClass == null) {
    return line;
  }
  int pos=attributeAndValue.indexOf("=\"");
  String attribute=attributeAndValue.substring(0,pos);
  String setAttributeMethodName="set" + TextFormatter.format(attribute,TextFormatter.G);
  for (  String dataType : getPrimitiveTagAttributeDataTypes()) {
    Type javaType=new Type(dataType);
    JavaMethod setAttributeMethod=tagJavaClass.getMethodBySignature(setAttributeMethodName,new Type[]{javaType},true);
    if (setAttributeMethod != null) {
      String value=attributeAndValue.substring(pos + 2,attributeAndValue.length() - 1);
      String newAttributeAndValue=StringUtil.replace(attributeAndValue,StringPool.QUOTE + value + StringPool.QUOTE,"\"<%= " + value + " %>\"");
      return StringUtil.replace(line,attributeAndValue,newAttributeAndValue);
    }
  }
  return line;
}
