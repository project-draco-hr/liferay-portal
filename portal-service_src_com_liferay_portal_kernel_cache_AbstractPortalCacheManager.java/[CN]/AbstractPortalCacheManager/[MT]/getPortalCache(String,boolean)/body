{
  PortalCache<K,V> portalCache=portalCaches.get(portalCacheName);
  if (portalCache != null) {
    return portalCache;
  }
  PortalCacheConfiguration portalCacheConfiguration=_portalCacheManagerConfiguration.getPortalCacheConfiguration(portalCacheName);
  if (portalCacheConfiguration == null) {
    portalCacheConfiguration=_defaultPortalCacheConfiguration.newPortalCacheConfiguration(portalCacheName);
    _portalCacheManagerConfiguration.putPortalCacheConfiguration(portalCacheName,portalCacheConfiguration);
  }
  portalCache=createPortalCache(portalCacheConfiguration);
  _initPortalCacheListeners(portalCache,portalCacheConfiguration);
  if (isTransactionalPortalCacheEnabled() && isTransactionalPortalCache(portalCacheName)) {
    portalCache=new TransactionalPortalCache<>(portalCache);
  }
  if (isBlockingPortalCacheAllowed() && blocking) {
    portalCache=new BlockingPortalCache<>(portalCache);
  }
  PortalCache<K,V> previousPortalCache=portalCaches.putIfAbsent(portalCacheName,portalCache);
  if (previousPortalCache != null) {
    portalCache=previousPortalCache;
  }
 else   if (isPortalCacheBootstrapLoaderEnabled() && (portalCacheConfiguration != null)) {
    CallbackConfiguration bootstrapLoaderConfiguration=portalCacheConfiguration.getBootstrapLoaderConfiguration();
    if (bootstrapLoaderConfiguration != null) {
      CallbackFactory callbackFactory=bootstrapLoaderConfiguration.getCallbackFactory();
      PortalCacheBootstrapLoader bootstrapLoader=callbackFactory.createPortalCacheBootstrapLoader(bootstrapLoaderConfiguration.getProperties());
      if (bootstrapLoader != null) {
        bootstrapLoader.loadPortalCache(getPortalCacheManagerName(),portalCacheName);
      }
    }
  }
  return portalCache;
}
