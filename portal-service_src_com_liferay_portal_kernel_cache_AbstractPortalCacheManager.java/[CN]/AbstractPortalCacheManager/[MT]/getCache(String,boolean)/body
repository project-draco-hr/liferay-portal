{
  PortalCache<K,V> portalCache=portalCaches.get(name);
  if (portalCache != null) {
    return portalCache;
  }
  portalCache=createPortalCache(name);
  PortalCacheConfiguration portalCacheConfiguration=_portalCacheManagerConfiguration.getPortalCacheConfiguration(portalCache.getName());
  if (portalCacheConfiguration == null) {
    portalCacheConfiguration=new PortalCacheConfiguration(name,_defaultPortalCacheConfiguration.getCacheListenerConfigurations(),_defaultPortalCacheConfiguration.getBootstrapLoaderConfiguration());
    _portalCacheManagerConfiguration.putPortalCacheConfiguration(name,portalCacheConfiguration);
  }
  _initPortalCacheListeners(portalCache,portalCacheConfiguration);
  if (isTransactionalCacheEnabled() && isTransactionalPortalCache(name)) {
    portalCache=new TransactionalPortalCache<>(portalCache);
  }
  if (isBlockingCacheAllowed() && blocking) {
    portalCache=new BlockingPortalCache<>(portalCache);
  }
  PortalCache<K,V> previousPortalCache=portalCaches.putIfAbsent(name,portalCache);
  if (previousPortalCache != null) {
    portalCache=previousPortalCache;
  }
 else   if (isBootstrapCacheLoaderEnabled() && (portalCacheConfiguration != null)) {
    CallbackConfiguration bootstrapLoaderConfiguration=portalCacheConfiguration.getBootstrapLoaderConfiguration();
    if (bootstrapLoaderConfiguration != null) {
      CallbackFactory callbackFactory=bootstrapLoaderConfiguration.getCallbackFactory();
      BootstrapLoader bootstrapLoader=callbackFactory.createBootstrapLoader(bootstrapLoaderConfiguration.getProperties());
      if (bootstrapLoader != null) {
        bootstrapLoader.load(getName(),name);
      }
    }
  }
  return portalCache;
}
