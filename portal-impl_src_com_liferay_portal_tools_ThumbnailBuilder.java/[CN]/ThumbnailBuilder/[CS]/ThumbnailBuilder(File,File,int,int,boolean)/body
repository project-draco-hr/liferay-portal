{
  try {
    if (!originalFile.exists()) {
      return;
    }
    if (!overwrite) {
      if (thumbnailFile.lastModified() > originalFile.lastModified()) {
        return;
      }
    }
    ImageProcessor imageProcessor=new ImageProcessorImpl();
    ImageBag imageBag=imageProcessor.read(originalFile);
    RenderedImage thumbnail=imageProcessor.scale(imageBag.getRenderedImage(),height,width);
    ImageIO.write(thumbnail,imageBag.getType(),thumbnailFile);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}
