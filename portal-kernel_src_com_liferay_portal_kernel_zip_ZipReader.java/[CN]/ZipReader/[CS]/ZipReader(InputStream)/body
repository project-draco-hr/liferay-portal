{
  try {
    _zis=new ZipInputStream(stream);
    while (true) {
      ZipEntry entry=_zis.getNextEntry();
      if (entry == null) {
        break;
      }
      String currentName=entry.getName();
      ByteArrayMaker bam=new ByteArrayMaker();
      while (true) {
        int count=_zis.read(_data,0,_BUFFER);
        if (count == -1) {
          break;
        }
        bam.write(_data,0,count);
      }
      byte[] byteArray=bam.toByteArray();
      _entries.put(currentName,byteArray);
      int pos=currentName.lastIndexOf(StringPool.SLASH);
      String folderPath=StringPool.BLANK;
      String fileName=currentName;
      if (pos > 0) {
        folderPath=currentName.substring(0,pos + 1);
        fileName=currentName.substring(pos + 1);
      }
      List files=(List)_folderEntries.get(folderPath);
      if (files == null) {
        files=new ArrayList();
        _folderEntries.put(folderPath,files);
      }
      files.add(new ObjectValuePair(fileName,byteArray));
    }
  }
 catch (  IOException ioe) {
    _log.error(ioe,ioe);
  }
 finally {
    try {
      _zis.close();
    }
 catch (    Exception e) {
      if (_log.isWarnEnabled()) {
        _log.warn(e);
      }
    }
  }
}
