{
  long userId=portletDataContext.getUserId(entry.getUserUuid());
  Map<Long,Long> relatedClassPKs=(Map<Long,Long>)portletDataContext.getNewPrimaryKeysMap(entry.getClassName());
  long newClassPK=MapUtil.getLong(relatedClassPKs,entry.getClassPK(),entry.getClassPK());
  try {
    PersistedModelLocalService persistedModelLocalService=PersistedModelLocalServiceRegistryUtil.getPersistedModelLocalService(entry.getClassName());
    persistedModelLocalService.getPersistedModel(newClassPK);
  }
 catch (  PortalException pe) {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to import ratings entry with id " + entry.getEntryId());
    }
    return;
  }
  ServiceContext serviceContext=portletDataContext.createServiceContext(entry);
  RatingsEntry importedEntry=_ratingsEntryLocalService.updateEntry(userId,entry.getClassName(),newClassPK,entry.getScore(),serviceContext);
  portletDataContext.importClassedModel(entry,importedEntry);
}
