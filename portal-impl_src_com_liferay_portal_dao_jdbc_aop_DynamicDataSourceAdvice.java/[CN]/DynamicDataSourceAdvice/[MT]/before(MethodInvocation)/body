{
  Operation operation=Operation.WRITE;
  Object targetBean=methodInvocation.getThis();
  Class<?> targetClass=targetBean.getClass();
  Method targetMethod=methodInvocation.getMethod();
  MasterDataSource masterDataSource=ServiceBeanAopCacheManager.getAnnotation(methodInvocation,MasterDataSource.class,_nullMasterDataSource);
  if (masterDataSource == _nullMasterDataSource) {
    TransactionAttribute transactionAttribute=_transactionAttributeSource.getTransactionAttribute(targetMethod,targetClass);
    if ((transactionAttribute != null) && transactionAttribute.isReadOnly()) {
      operation=Operation.READ;
    }
  }
  _dynamicDataSourceTargetSource.setOperation(operation);
  _dynamicDataSourceTargetSource.pushMethod(targetClass.getName().concat(StringPool.PERIOD).concat(targetMethod.getName()));
  return null;
}
