{
  ServletContext servletContext=servletConfig.getServletContext();
  _portletClassLoader=(ClassLoader)servletContext.getAttribute(PortletServlet.PORTLET_CLASS_LOADER);
  if (_portletClassLoader == null) {
    super.init(servletConfig);
  }
 else {
    Thread currentThread=Thread.currentThread();
    ClassLoader contextClassLoader=currentThread.getContextClassLoader();
    try {
      currentThread.setContextClassLoader(_portletClassLoader);
      super.init(servletConfig);
    }
  finally {
      currentThread.setContextClassLoader(contextClassLoader);
    }
  }
}
