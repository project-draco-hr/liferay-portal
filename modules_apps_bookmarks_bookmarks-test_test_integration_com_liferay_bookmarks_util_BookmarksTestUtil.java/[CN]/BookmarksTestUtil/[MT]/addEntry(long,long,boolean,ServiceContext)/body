{
  boolean workflowEnabled=WorkflowThreadLocal.isEnabled();
  String name=PrincipalThreadLocal.getName();
  try {
    PrincipalThreadLocal.setName(userId);
    return addEntry(folderId,approved,serviceContext);
  }
  finally {
    WorkflowThreadLocal.setEnabled(workflowEnabled);
    PrincipalThreadLocal.setName(name);
  }
}
