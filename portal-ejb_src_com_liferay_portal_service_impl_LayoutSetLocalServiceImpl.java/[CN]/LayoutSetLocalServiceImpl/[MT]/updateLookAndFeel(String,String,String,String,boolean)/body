{
  LayoutSet layoutSet=LayoutSetUtil.findByPrimaryKey(ownerId);
  if (wapTheme) {
    layoutSet.setWapThemeId(themeId);
    layoutSet.setWapColorSchemeId(colorSchemeId);
  }
 else {
    layoutSet.setThemeId(themeId);
    layoutSet.setColorSchemeId(colorSchemeId);
    layoutSet.setCss(css);
  }
  LayoutSetUtil.update(layoutSet);
  if (PrefsPropsUtil.getBoolean(PropsUtil.THEME_SYNC_ON_GROUP)) {
    String otherOwnerId=null;
    if (layoutSet.isPrivateLayout()) {
      otherOwnerId=LayoutImpl.PUBLIC + layoutSet.getGroupId();
    }
 else {
      otherOwnerId=LayoutImpl.PRIVATE + layoutSet.getGroupId();
    }
    LayoutSet otherLayoutSet=LayoutSetUtil.findByPrimaryKey(otherOwnerId);
    if (wapTheme) {
      otherLayoutSet.setWapThemeId(themeId);
      otherLayoutSet.setWapColorSchemeId(colorSchemeId);
    }
 else {
      otherLayoutSet.setThemeId(themeId);
      otherLayoutSet.setColorSchemeId(colorSchemeId);
    }
    LayoutSetUtil.update(otherLayoutSet);
  }
  return layoutSet;
}
