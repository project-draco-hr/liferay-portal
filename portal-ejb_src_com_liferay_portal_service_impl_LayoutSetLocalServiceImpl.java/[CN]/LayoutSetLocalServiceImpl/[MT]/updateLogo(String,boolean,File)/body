{
  try {
    LayoutSet layoutSet=LayoutSetUtil.findByPrimaryKey(ownerId);
    layoutSet.setLogo(logo);
    LayoutSetUtil.update(layoutSet);
    if (logo) {
      ImageLocalUtil.put(layoutSet.getLogoImageId(),FileUtil.getBytes(file));
      BufferedImage thumbnail=ImageUtil.scale(ImageIO.read(file),.6);
      ByteArrayOutputStream baos=new ByteArrayOutputStream();
      ImageIO.write(thumbnail,"png",baos);
      ImageLocalUtil.put(layoutSet.getPngLogoImageId(),baos.toByteArray());
      baos=new ByteArrayOutputStream();
      ImageUtil.encodeWBMP(thumbnail,baos);
      ImageLocalUtil.put(layoutSet.getWbmpLogoImageId(),baos.toByteArray());
    }
 else {
      ImageLocalUtil.remove(layoutSet.getLogoImageId());
      ImageLocalUtil.remove(layoutSet.getPngLogoImageId());
      ImageLocalUtil.remove(layoutSet.getWbmpLogoImageId());
    }
  }
 catch (  InterruptedException ie) {
    throw new SystemException(ie);
  }
catch (  IOException ioe) {
    throw new SystemException(ioe);
  }
}
