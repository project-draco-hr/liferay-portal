{
  Map<String,TemplateVariableGroup> templateVariableGroups=new LinkedHashMap<String,TemplateVariableGroup>();
  TemplateVariableGroup fieldsTemplateVariableGroup=new TemplateVariableGroup("fields");
  fieldsTemplateVariableGroup.addCollectionVariable("entries",List.class,PortletDisplayTemplateConstants.ENTRIES,"entries-item",null,"curEntry");
  fieldsTemplateVariableGroup.addVariable("entry",null,PortletDisplayTemplateConstants.ENTRY);
  templateVariableGroups.put("fields",fieldsTemplateVariableGroup);
  TemplateVariableGroup generalVariablesTemplateVariableGroup=new TemplateVariableGroup("general-variables");
  generalVariablesTemplateVariableGroup.addVariable("current-url",String.class,PortletDisplayTemplateConstants.CURRENT_URL);
  generalVariablesTemplateVariableGroup.addVariable("locale",Locale.class,PortletDisplayTemplateConstants.LOCALE);
  generalVariablesTemplateVariableGroup.addVariable("portlet-preferences",Map.class,PortletDisplayTemplateConstants.PORTLET_PREFERENCES);
  generalVariablesTemplateVariableGroup.addVariable("template-id",null,PortletDisplayTemplateConstants.DDM_TEMPLATE_ID);
  generalVariablesTemplateVariableGroup.addVariable("theme-display",ThemeDisplay.class,PortletDisplayTemplateConstants.THEME_DISPLAY);
  templateVariableGroups.put("general-variables",generalVariablesTemplateVariableGroup);
  TemplateVariableGroup utilTemplateVariableGroup=new TemplateVariableGroup("util");
  utilTemplateVariableGroup.addVariable("http-request",HttpServletRequest.class,PortletDisplayTemplateConstants.REQUEST);
  utilTemplateVariableGroup.addVariable("render-request",RenderRequest.class,PortletDisplayTemplateConstants.RENDER_REQUEST);
  utilTemplateVariableGroup.addVariable("render-response",RenderResponse.class,PortletDisplayTemplateConstants.RENDER_RESPONSE);
  if (language.equals(TemplateConstants.LANG_TYPE_VM)) {
    utilTemplateVariableGroup.addVariable("liferay-taglib",VelocityTaglib.class,PortletDisplayTemplateConstants.TAGLIB_LIFERAY);
  }
  templateVariableGroups.put("util",utilTemplateVariableGroup);
  return templateVariableGroups;
}
