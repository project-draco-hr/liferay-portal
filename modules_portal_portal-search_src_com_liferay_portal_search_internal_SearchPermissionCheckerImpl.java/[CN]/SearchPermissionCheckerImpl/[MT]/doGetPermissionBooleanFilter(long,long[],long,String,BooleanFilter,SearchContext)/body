{
  Indexer<?> indexer=_indexerRegistry.getIndexer(className);
  if (!indexer.isPermissionAware()) {
    return booleanFilter;
  }
  PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
  if (permissionChecker.getGuestUserBag() == null) {
    return booleanFilter;
  }
  PermissionCheckerBag permissionCheckerBag=getPermissionCheckerBag(permissionChecker,userId);
  if (permissionCheckerBag == null) {
    return booleanFilter;
  }
  Set<Group> groups=new LinkedHashSet<>();
  Set<Role> roles=new LinkedHashSet<>();
  Set<UserGroupRole> userGroupRoles=new LinkedHashSet<>();
  Map<Long,List<Role>> groupIdsToRoles=new HashMap<>();
  populate(companyId,groupIds,userId,permissionChecker,permissionCheckerBag,groups,roles,userGroupRoles,groupIdsToRoles);
  return doGetPermissionFilter_6(companyId,groupIds,userId,permissionChecker,className,booleanFilter,groups,roles,userGroupRoles,groupIdsToRoles);
}
