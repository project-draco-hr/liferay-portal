{
  String[] threadFileNames=null;
  try {
    threadFileNames=DLStoreUtil.getFileNames(companyId,repositoryId,"messageboards");
  }
 catch (  NoSuchDirectoryException nsde) {
    return;
  }
  for (  String threadFileName : threadFileNames) {
    String[] messageFileNames=null;
    try {
      messageFileNames=DLStoreUtil.getFileNames(companyId,repositoryId,threadFileName);
    }
 catch (    NoSuchDirectoryException nsde) {
      continue;
    }
    for (    String messageFileName : messageFileNames) {
      String fileTitle=StringUtil.extractLast(messageFileName,StringPool.FORWARD_SLASH);
      if (fileTitle.startsWith(TrashUtil.TRASH_ATTACHMENTS_DIR)) {
        String[] attachmentFileNames=DLStoreUtil.getFileNames(companyId,repositoryId,threadFileName + StringPool.FORWARD_SLASH + fileTitle);
        deleteAttachments(companyId,repositoryId,maxAge,attachmentFileNames);
      }
    }
  }
}
