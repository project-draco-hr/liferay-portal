{
  long companyId=group.getCompanyId();
  long repositoryId=CompanyConstants.SYSTEM;
  Date date=getMaxAge(group);
  String[] fileNames=null;
  try {
    fileNames=DLStoreUtil.getFileNames(companyId,repositoryId,"wiki");
  }
 catch (  NoSuchDirectoryException nsde) {
    return;
  }
  for (  String fileName : fileNames) {
    String fileTitle=StringUtil.extractLast(fileName,StringPool.FORWARD_SLASH);
    if (fileTitle.startsWith(".trashed_")) {
      String[] attachmentFileNames=DLStoreUtil.getFileNames(companyId,repositoryId,"wiki/" + fileTitle);
      for (      String attachmentFileName : attachmentFileNames) {
        String trashNamespace=DLAppUtil.getTrashNamespace(attachmentFileName,TrashUtil.TRASH_SEPARATOR);
        long timeStamp=GetterUtil.getLong(trashNamespace);
        if (timeStamp < date.getTime()) {
          DLStoreUtil.deleteDirectory(companyId,repositoryId,attachmentFileName);
        }
      }
    }
  }
}
