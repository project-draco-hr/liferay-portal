{
  ActionableDynamicQuery actionableDynamicQuery=groupLocalService.getActionableDynamicQuery();
  actionableDynamicQuery.setPerformActionMethod(new ActionableDynamicQuery.PerformActionMethod(){
    @Override public void performAction(    Object object) throws PortalException {
      Group group=(Group)object;
      if (!TrashUtil.isTrashEnabled(group.getGroupId())) {
        return;
      }
      Date date=getMaxAge(group);
      List<TrashEntry> entries=trashEntryPersistence.findByG_LtCD(group.getGroupId(),date);
      for (      TrashEntry entry : entries) {
        TrashHandler trashHandler=TrashHandlerRegistryUtil.getTrashHandler(entry.getClassName());
        trashHandler.deleteTrashEntry(entry.getClassPK());
      }
    }
  }
);
  actionableDynamicQuery.setTransactionAttribute(BaseActionableDynamicQuery.REQUIRES_NEW_TRANSACTION_ATTRIBUTE);
  actionableDynamicQuery.performActions();
}
