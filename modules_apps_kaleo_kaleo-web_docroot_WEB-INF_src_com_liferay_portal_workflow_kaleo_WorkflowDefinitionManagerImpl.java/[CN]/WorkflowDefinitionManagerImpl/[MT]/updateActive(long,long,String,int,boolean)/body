{
  try {
    ServiceContext serviceContext=new ServiceContext();
    serviceContext.setCompanyId(companyId);
    serviceContext.setUserId(userId);
    if (active) {
      KaleoDefinitionLocalServiceUtil.activateKaleoDefinition(name,version,serviceContext);
    }
 else {
      KaleoDefinitionLocalServiceUtil.deactivateKaleoDefinition(name,version,serviceContext);
    }
    return getWorkflowDefinition(companyId,name,version);
  }
 catch (  Exception e) {
    throw new WorkflowException(e);
  }
}
