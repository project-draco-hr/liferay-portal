{
  Map<String,String[]> map=new ConcurrentHashMap<String,String[]>();
  for (  Map.Entry<String,Preference> entry : getPreferences().entrySet()) {
    String key=entry.getKey();
    Preference preference=entry.getValue();
    String[] actualValues=getActualValues(preference.getValues());
    if (actualValues != null) {
      map.put(key,actualValues);
    }
  }
  return Collections.unmodifiableMap(map);
}
