{
  String MN="rewrite";
  if (this.urlGenerator != null) {
    if (rewriteURL.startsWith(Constants.REWRITE_START + Constants.PARAMS_START)) {
      Map params=createParameterMap(rewriteURL);
      if (rewriteURL.indexOf(Constants.URL_TYPE_BLOCKINGACTION) != -1) {
        markup.append(urlGenerator.getBlockingActionURL(params));
      }
 else       if (rewriteURL.indexOf(Constants.URL_TYPE_RENDER) != -1) {
        markup.append(urlGenerator.getRenderURL(params));
      }
 else       if (rewriteURL.indexOf(Constants.URL_TYPE_RESOURCE) != -1) {
        markup.append(urlGenerator.getResourceURL(params));
      }
    }
 else     if (rewriteURL.startsWith(Constants.REWRITE_START + Constants.NAMESPACE_START)) {
      markup.append(urlGenerator.getNamespacedToken(""));
    }
 else {
      if (logger.isLogging(Logger.ERROR)) {
        logger.text(Logger.ERROR,MN,"no valid rewrite expression found in: " + rewriteURL);
      }
    }
  }
 else {
    if (logger.isLogging(Logger.ERROR)) {
      String message="URLGenerator has not been set for class URLRewriterImpl. URL-Rewriting not possible.";
      logger.text(Logger.ERROR,MN,message);
    }
  }
}
