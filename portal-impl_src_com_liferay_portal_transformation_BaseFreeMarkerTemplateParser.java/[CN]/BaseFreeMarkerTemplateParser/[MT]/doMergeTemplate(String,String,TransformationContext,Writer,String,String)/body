{
  FreeMarkerContext freeMarkerContext=(FreeMarkerContext)context;
  boolean load=false;
  try {
    load=FreeMarkerEngineUtil.mergeTemplate(templateId,script,freeMarkerContext,writer);
  }
 catch (  Exception e) {
    if (Validator.isNotNull(errorTemplateId) && Validator.isNotNull(errorTemplateContent)) {
      if (e instanceof ParseException) {
        ParseException pe=(ParseException)e;
        freeMarkerContext.put("column",pe.getColumnNumber());
        freeMarkerContext.put("exception",pe.getMessage());
        freeMarkerContext.put("line",pe.getLineNumber());
        freeMarkerContext.put("script",script);
        load=FreeMarkerEngineUtil.mergeTemplate(errorTemplateId,errorTemplateContent,freeMarkerContext,writer);
      }
 else       if (e instanceof TemplateException) {
        TemplateException te=(TemplateException)e;
        freeMarkerContext.put("exception",te.getMessage());
        freeMarkerContext.put("script",script);
        load=FreeMarkerEngineUtil.mergeTemplate(errorTemplateId,errorTemplateContent,freeMarkerContext,writer);
      }
    }
 else {
      throw e;
    }
  }
  return load;
}
