{
  ResourceRequest resourceReq=(ResourceRequest)getPortletRequest();
  String cacheability=resourceReq.getCacheability();
  if (cacheability.equals(ResourceURL.PAGE)) {
  }
 else   if (lifecycle.equals(PortletRequest.ACTION_PHASE)) {
    throw new IllegalStateException("Unable to create an action URL from a resource response " + "when the cacheability is not set to PAGE");
  }
 else   if (lifecycle.equals(PortletRequest.RENDER_PHASE)) {
    throw new IllegalStateException("Unable to create a render URL from a resource response when " + "the cacheability is not set to PAGE");
  }
  return super.createPortletURLImpl(portletName,lifecycle);
}
