{
  if (_fabricAgents.addIfAbsent(fabricAgent)) {
    if (onRegistration != null) {
      onRegistration.run();
    }
    for (    FabricAgentListener fabricAgentListener : _fabricAgentListeners) {
      fabricAgentListener.registered(fabricAgent);
    }
    return true;
  }
  return false;
}
