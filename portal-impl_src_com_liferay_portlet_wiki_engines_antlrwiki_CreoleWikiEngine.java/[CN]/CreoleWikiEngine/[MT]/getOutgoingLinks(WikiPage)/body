{
  Map<String,Boolean> outgoingLinks=new HashMap<String,Boolean>();
  List<ASTNode> linkNodes=new LinkNodeCollectorVisitor().collect(parse(page.getContent()));
  try {
    for (    ASTNode node : linkNodes) {
      LinkNode linkNode=(LinkNode)node;
      String title=linkNode.getLink();
      boolean existingLink=false;
      if (WikiPageLocalServiceUtil.getPagesCount(page.getNodeId(),title,true) > 0) {
        existingLink=true;
      }
      outgoingLinks.put(title,existingLink);
    }
  }
 catch (  SystemException se) {
    throw new PageContentException(se);
  }
  return outgoingLinks;
}
