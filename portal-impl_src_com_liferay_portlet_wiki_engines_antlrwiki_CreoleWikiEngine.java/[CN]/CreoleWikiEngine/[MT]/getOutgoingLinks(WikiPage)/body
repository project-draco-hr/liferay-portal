{
  Map<String,Boolean> outgoingLinks=new HashMap<String,Boolean>();
  LinkNodeCollectorVisitor linkNodeCollectorVisitor=new LinkNodeCollectorVisitor();
  List<ASTNode> astNodes=linkNodeCollectorVisitor.collect(parse(page.getContent()));
  try {
    for (    ASTNode astNode : astNodes) {
      LinkNode linkNode=(LinkNode)astNode;
      String title=linkNode.getLink();
      boolean existingLink=false;
      if (WikiPageLocalServiceUtil.getPagesCount(page.getNodeId(),title,true) > 0) {
        existingLink=true;
      }
      if (existingLink) {
        title=title.toLowerCase();
      }
      outgoingLinks.put(title,existingLink);
    }
  }
 catch (  SystemException se) {
    throw new PageContentException(se);
  }
  return outgoingLinks;
}
