{
  AssetEntryQuery assetEntryQuery=assetPublisherDisplayContext.getAssetEntryQuery();
  String portletName=portletPreferences.getValue("portletName",AssetPublisherPortletKeys.RELATED_ASSETS);
  if (!showAssetEntryResults(portletName,assetEntryQuery)) {
    return Collections.emptyList();
  }
  long[] classNameIds=assetPublisherDisplayContext.getClassNameIds();
  long assetVocabularyId=GetterUtil.getLong(portletPreferences.getValue("assetVocabularyId",null));
  if (assetVocabularyId > 0) {
    return getAssetEntryResultsByVocabulary(assetVocabularyId,searchContainer,locale,portletName,classNameIds,assetEntryQuery);
  }
 else   if (assetVocabularyId != -1) {
    return getAssetEntryResultsByClassName(searchContainer,locale,assetEntryQuery,classNameIds,portletName);
  }
  return getAssetEntryResultsByDefault(searchContainer,assetEntryQuery,classNameIds,portletName);
}
