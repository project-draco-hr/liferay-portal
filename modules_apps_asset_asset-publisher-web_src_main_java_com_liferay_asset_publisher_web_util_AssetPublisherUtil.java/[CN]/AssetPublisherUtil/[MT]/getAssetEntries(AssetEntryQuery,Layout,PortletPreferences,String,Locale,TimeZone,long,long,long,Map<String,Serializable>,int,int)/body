{
  if (isSearchWithIndex(portletName,assetEntryQuery)) {
    long[] assetCategoryIds=getAssetCategoryIds(portletPreferences);
    String[] assetTagNames=getAssetTagNames(portletPreferences);
    String keywords=assetEntryQuery.getKeywords();
    return AssetUtil.searchAssetEntries(assetCategoryIds,assetTagNames,keywords,locale,assetEntryQuery,companyId,scopeGroupId,layout,timeZone,userId,start,end,attributes);
  }
  int total=_assetEntryService.getEntriesCount(assetEntryQuery);
  assetEntryQuery.setStart(start);
  assetEntryQuery.setEnd(end);
  List<AssetEntry> results=_assetEntryService.getEntries(assetEntryQuery);
  return new BaseModelSearchResult<>(results,total);
}
