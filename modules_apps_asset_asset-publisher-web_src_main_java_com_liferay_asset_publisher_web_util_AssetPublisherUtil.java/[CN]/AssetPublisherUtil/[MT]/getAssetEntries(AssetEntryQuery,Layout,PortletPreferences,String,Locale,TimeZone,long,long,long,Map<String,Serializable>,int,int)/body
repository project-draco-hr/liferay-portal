{
  List<AssetEntry> results=new ArrayList<>();
  int total=0;
  if (isSearchWithIndex(portletName,assetEntryQuery)) {
    long[] assetCategoryIds=getAssetCategoryIds(portletPreferences);
    String[] assetTagNames=getAssetTagNames(portletPreferences);
    String keywords=assetEntryQuery.getKeywords();
    return AssetUtil.searchAssetEntries(assetCategoryIds,assetTagNames,keywords,locale,assetEntryQuery,companyId,scopeGroupId,layout,timeZone,userId,start,end,attributes);
  }
  total=_assetEntryService.getEntriesCount(assetEntryQuery);
  assetEntryQuery.setStart(start);
  assetEntryQuery.setEnd(end);
  results=_assetEntryService.getEntries(assetEntryQuery);
  return new BaseModelSearchResult<>(results,total);
}
