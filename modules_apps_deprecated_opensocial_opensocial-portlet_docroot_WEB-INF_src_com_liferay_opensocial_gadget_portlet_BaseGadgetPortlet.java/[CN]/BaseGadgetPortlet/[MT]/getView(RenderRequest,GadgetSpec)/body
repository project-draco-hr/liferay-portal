{
  WindowState windowState=renderRequest.getWindowState();
  String view=ParamUtil.getString(renderRequest,"view");
  if (gadgetSpec.getView(view) != null) {
    return view;
  }
  if (windowState.equals(WindowState.NORMAL)) {
    if (gadgetSpec.getView("default") != null) {
      view="default";
    }
 else     if (gadgetSpec.getView("home") != null) {
      view="home";
    }
 else     if (gadgetSpec.getView("profile") != null) {
      view="profile";
    }
 else     if (gadgetSpec.getView("canvas") != null) {
      view="canvas";
    }
  }
 else   if (windowState.equals(WindowState.MAXIMIZED)) {
    if (gadgetSpec.getView("canvas") != null) {
      view="canvas";
    }
 else     if (gadgetSpec.getView("default") != null) {
      view="default";
    }
 else     if (gadgetSpec.getView("home") != null) {
      view="home";
    }
 else     if (gadgetSpec.getView("profile") != null) {
      view="profile";
    }
  }
  return view;
}
