{
  Thread currentThread=Thread.currentThread();
  ClassLoader contextClassLoader=currentThread.getContextClassLoader();
  String scriptingLanguage=message.getString(ScriptingExecutorMessagingConstants.MESSAGE_KEY_SCRIPTING_LANGUAGE);
  List<URL> urls=(List<URL>)message.get(ScriptingExecutorMessagingConstants.MESSAGE_KEY_URLS);
  for (  URL url : urls) {
    try (InputStream inputStream=url.openStream()){
      ClassLoader bundleClassLoader=(ClassLoader)message.get(ScriptingExecutorMessagingConstants.BUNDLE_CLASS_LOADER);
      if (bundleClassLoader != null) {
        ClassLoader aggregateClassLoader=AggregateClassLoader.getAggregateClassLoader(contextClassLoader,bundleClassLoader);
        currentThread.setContextClassLoader(aggregateClassLoader);
      }
      _scripting.exec(null,new HashMap<String,Object>(),scriptingLanguage,StringUtil.read(inputStream));
    }
 catch (    Exception e) {
      if (_log.isWarnEnabled()) {
        _log.warn("Unable to execute script " + url.getFile(),e);
      }
    }
 finally {
      currentThread.setContextClassLoader(contextClassLoader);
    }
  }
}
