{
  try {
    DLFileVersion dlFileVersion=_dlFileEntry.getFileVersion();
    DLFileEntryMetadata dlFileEntryMetadata=DLFileEntryMetadataLocalServiceUtil.fetchFileEntryMetadata(_ddmStructure.getStructureId(),dlFileVersion.getFileVersionId());
    _ddmStructure.setCompanyId(12345);
    DDMStructureLocalServiceUtil.updateDDMStructure(_ddmStructure);
    List<DLFileEntryMetadata> dlFileEntryMetadatas=DLFileEntryMetadataLocalServiceUtil.getMismatchedCompanyIdFileEntryMetadatas();
    Assert.assertEquals(1,dlFileEntryMetadatas.size());
    Assert.assertEquals(dlFileEntryMetadata,dlFileEntryMetadatas.get(0));
  }
  finally {
    if (_ddmStructure != null) {
      _ddmStructure.setCompanyId(_dlFileEntry.getCompanyId());
      DDMStructureLocalServiceUtil.updateDDMStructure(_ddmStructure);
    }
  }
}
