{
  PreparedStatement ps1=null;
  ResultSet rs=null;
  try {
    ps1=connection.prepareStatement("select companyId, scope, primKey from ResourcePermission " + "where name = '" + _PORTLET_ID_DOCUMENT_LIBRARY + "'");
    rs=ps1.executeQuery();
    while (rs.next()) {
      PreparedStatement ps2=null;
      try {
        ps2=connection.prepareStatement("delete from ResourcePermission where companyId = ? " + "and name = ? and scope = ? and primKey = ?");
        ps2.setLong(1,rs.getLong("companyId"));
        ps2.setString(2,_PORTLET_ID_DL_DISPLAY);
        ps2.setInt(3,rs.getInt("scope"));
        ps2.setString(4,rs.getString("primKey"));
        ps2.execute();
      }
  finally {
        DataAccess.cleanUp(ps2);
      }
    }
  }
  finally {
    DataAccess.cleanUp(ps1,rs);
  }
}
