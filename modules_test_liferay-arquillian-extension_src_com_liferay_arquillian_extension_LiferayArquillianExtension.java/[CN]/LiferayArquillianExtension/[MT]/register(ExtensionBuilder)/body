{
  URL url=LiferayArquillianExtension.class.getResource("/arquillian.remote.marker");
  if (url == null) {
    extensionBuilder.observer(DeploymentObserver.class);
    extensionBuilder.service(AuxiliaryArchiveAppender.class,JUnitBridgeAuxiliaryArchiveAppender.class);
    extensionBuilder.service(DeployableContainer.class,LiferayJMXDeployableContainer.class);
    extensionBuilder.service(DeploymentScenarioGenerator.class,ModuleDeploymentScenarioGenerator.class);
    extensionBuilder.service(Protocol.class,JMXOSGiProtocol.class);
  }
 else {
    extensionBuilder.observer(JUnitBridgeObserver.class);
  }
}
