{
  String key=encodeKey(companyId,name,scope);
  ResourceCode resourceCode=(ResourceCode)_resourceCodes.get(key);
  if (resourceCode == null) {
    resourceCode=ResourceCodeUtil.fetchByC_N_S(companyId,name,scope);
    if (resourceCode == null) {
      long codeId=CounterLocalServiceUtil.increment(ResourceCode.class.getName());
      resourceCode=ResourceCodeUtil.create(codeId);
      resourceCode.setCompanyId(companyId);
      resourceCode.setName(name);
      resourceCode.setScope(scope);
      ResourceCodeUtil.update(resourceCode);
    }
    _resourceCodes.put(key,resourceCode);
  }
  return resourceCode;
}
