{
  ResourceCode rsrcCode=null;
  ResourceCodePK pk=new ResourceCodePK(companyId,name,scope);
  try {
    rsrcCode=ResourceCodeUtil.findByPrimaryKey(pk);
  }
 catch (  NoSuchResourceCodeException e) {
    rsrcCode=ResourceCodeUtil.create(pk);
    long code=CounterLocalServiceUtil.increment(ResourceCode.class.getName());
    rsrcCode.setCode(code);
    ResourceCodeUtil.update(rsrcCode);
  }
  return rsrcCode.getCode();
}
