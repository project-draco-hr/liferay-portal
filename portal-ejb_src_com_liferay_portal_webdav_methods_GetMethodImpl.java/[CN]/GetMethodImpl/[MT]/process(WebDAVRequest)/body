{
  try {
    WebDAVStorage storage=webDavReq.getWebDAVStorage();
    HttpServletRequest req=webDavReq.getHttpServletRequest();
    HttpServletResponse res=webDavReq.getHttpServletResponse();
    Resource resource=storage.getResource(webDavReq);
    InputStream is=resource.getContentAsStream();
    if (is == null) {
      res.setStatus(HttpServletResponse.SC_NOT_FOUND);
    }
 else {
      res.setStatus(HttpServletResponse.SC_OK);
      OutputStream out=res.getOutputStream();
      try {
        if (!res.isCommitted()) {
          int c=is.read();
          while (c != -1) {
            out.write(c);
            c=is.read();
          }
        }
      }
 catch (      Exception e) {
        if (_log.isWarnEnabled()) {
          _log.warn(e,e);
        }
      }
 finally {
        try {
          is.close();
        }
 catch (        Exception e) {
          _log.warn(e);
        }
        try {
          out.flush();
        }
 catch (        Exception e) {
          _log.warn(e);
        }
        try {
          out.close();
        }
 catch (        Exception e) {
          _log.warn(e);
        }
      }
    }
  }
 catch (  Exception e) {
    throw new WebDAVException(e);
  }
}
