{
  Connection con=null;
  try {
    con=DataAccess.getConnection(Constants.DATA_SOURCE);
    DatabaseMetaData metaData=con.getMetaData();
    String dbName=metaData.getDatabaseProductName();
    int dbMajorVersion=metaData.getDatabaseMajorVersion();
    _dialect=DialectFactory.determineDialect(dbName,dbMajorVersion);
  }
 catch (  Exception e) {
    _log.error(e);
  }
 finally {
    DataAccess.cleanUp(con);
  }
  if (_dialect == null) {
    throw new DynamicDialectException("No dialect found");
  }
  Properties dynamicDefaultProps=getDefaultProperties();
  Properties dialectDefaultProps=_dialect.getDefaultProperties();
  dynamicDefaultProps.clear();
  Enumeration enu=dialectDefaultProps.propertyNames();
  while (enu.hasMoreElements()) {
    String key=(String)enu.nextElement();
    String value=dialectDefaultProps.getProperty(key);
    dynamicDefaultProps.setProperty(key,value);
  }
}
