{
  User user=userPersistence.findByPrimaryKey(userId);
  validate(nameMap,ddmFormValues);
  DDMDataProviderInstance dataProviderInstance=ddmDataProviderInstancePersistence.findByPrimaryKey(dataProviderInstanceId);
  dataProviderInstance.setUserId(user.getUserId());
  dataProviderInstance.setUserName(user.getFullName());
  dataProviderInstance.setNameMap(nameMap);
  dataProviderInstance.setDescriptionMap(descriptionMap);
  dataProviderInstance.setDefinition(ddmFormValuesJSONSerializer.serialize(ddmFormValues));
  ddmDataProviderInstancePersistence.update(dataProviderInstance);
  return dataProviderInstance;
}
