{
  long fileEntryId=ParamUtil.getLong(actionRequest,"fileEntryId");
  if (fileEntryId == 0) {
    return;
  }
  String version=ParamUtil.getString(actionRequest,"version");
  if (Validator.isNotNull(version)) {
    _dlAppService.deleteFileVersion(fileEntryId,version);
    return;
  }
  if (!moveToTrash) {
    _dlAppService.deleteFileEntry(fileEntryId);
    return;
  }
  FileEntry fileEntry=_dlAppService.getFileEntry(fileEntryId);
  if (fileEntry.isRepositoryCapabilityProvided(TrashCapability.class)) {
    fileEntry=_dlTrashService.moveFileEntryToTrash(fileEntryId);
    TrashUtil.addTrashSessionMessages(actionRequest,(TrashedModel)fileEntry.getModel());
  }
  hideDefaultSuccessMessage(actionRequest);
}
