{
  long lastBitwiseValue=1;
  if (!resourceActions.isEmpty()) {
    ResourceAction resourceAction=resourceActions.get(resourceActions.size() - 1);
    lastBitwiseValue=resourceAction.getBitwiseValue();
  }
  List<String> communityDefaultActions=ResourceActionsUtil.getModelResourceCommunityDefaultActions(name);
  List<String> guestDefaultActions=ResourceActionsUtil.getModelResourceGuestDefaultActions(name);
  int lastBitwiseLogValue=MathUtil.base2Log(lastBitwiseValue);
  for (  String actionId : actionIds) {
    String key=encodeKey(name,actionId);
    ResourceAction resourceAction=_resourceActions.get(key);
    if (resourceAction == null) {
      resourceAction=resourceActionPersistence.fetchByN_A(name,actionId);
    }
    if (resourceAction == null) {
      long bitwiseValue=1;
      if (!actionId.equals(ActionKeys.VIEW)) {
        bitwiseValue=MathUtil.base2Pow(++lastBitwiseLogValue);
      }
      long resourceActionId=counterLocalService.increment(ResourceAction.class.getName());
      resourceAction=resourceActionPersistence.create(resourceActionId);
      resourceAction.setName(name);
      resourceAction.setActionId(actionId);
      resourceAction.setBitwiseValue(bitwiseValue);
      resourceActionPersistence.update(resourceAction,false);
      _resourceActions.put(key,resourceAction);
      if (communityDefaultActions.contains(actionId)) {
        try {
          resourcePermissionLocalService.addResourcePermissions(name,RoleConstants.COMMUNITY_MEMBER,ResourceConstants.SCOPE_INDIVIDUAL,actionId);
        }
 catch (        PortalException pe) {
          _log.error(pe,pe);
        }
      }
      if (guestDefaultActions.contains(actionId)) {
        try {
          resourcePermissionLocalService.addResourcePermissions(name,RoleConstants.GUEST,ResourceConstants.SCOPE_INDIVIDUAL,actionId);
        }
 catch (        PortalException pe) {
          _log.error(pe,pe);
        }
      }
      try {
        resourcePermissionLocalService.addResourcePermissions(name,RoleConstants.OWNER,ResourceConstants.SCOPE_INDIVIDUAL,actionId);
      }
 catch (      PortalException pe) {
        _log.error(pe,pe);
      }
    }
  }
}
