{
  Class<?> sessionFactoryInterface=SessionFactory.class;
  if (sessionFactory instanceof SessionFactoryImplementor) {
    sessionFactoryInterface=SessionFactoryImplementor.class;
  }
  return (SessionFactory)Proxy.newProxyInstance(sessionFactoryInterface.getClassLoader(),new Class[]{sessionFactoryInterface},new SessionFactoryInvocationHandler(sessionFactory));
}
