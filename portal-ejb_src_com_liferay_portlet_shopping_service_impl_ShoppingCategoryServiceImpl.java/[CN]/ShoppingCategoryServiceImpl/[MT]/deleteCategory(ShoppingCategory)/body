{
  if (!hasAdmin(category.getCategoryId())) {
    throw new PrincipalException();
  }
  Iterator itr=ShoppingCategoryUtil.findByC_P(category.getCompanyId(),category.getCategoryId()).iterator();
  while (itr.hasNext()) {
    deleteCategory((ShoppingCategory)itr.next());
  }
  itr=ShoppingItemUtil.findByC_C(category.getCompanyId(),category.getCategoryId()).iterator();
  while (itr.hasNext()) {
    ShoppingItemServiceUtil.deleteItem((ShoppingItem)itr.next());
  }
  ShoppingCategoryUtil.remove(category.getCategoryId());
}
