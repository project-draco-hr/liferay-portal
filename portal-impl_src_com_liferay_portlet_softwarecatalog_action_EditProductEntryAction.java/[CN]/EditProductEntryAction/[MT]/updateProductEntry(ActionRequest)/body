{
  UploadPortletRequest uploadRequest=PortalUtil.getUploadPortletRequest(actionRequest);
  Layout layout=(Layout)actionRequest.getAttribute(WebKeys.LAYOUT);
  long productEntryId=ParamUtil.getLong(actionRequest,"productEntryId");
  String name=ParamUtil.getString(actionRequest,"name");
  String type=ParamUtil.getString(actionRequest,"type");
  String tags=ParamUtil.getString(actionRequest,"tags");
  String shortDescription=ParamUtil.getString(actionRequest,"shortDescription");
  String longDescription=ParamUtil.getString(actionRequest,"longDescription");
  String pageURL=ParamUtil.getString(actionRequest,"pageURL");
  String author=ParamUtil.getString(actionRequest,"author");
  String repoGroupId=ParamUtil.getString(actionRequest,"repoGroupId");
  String repoArtifactId=ParamUtil.getString(actionRequest,"repoArtifactId");
  long[] licenseIds=ParamUtil.getLongValues(actionRequest,"licenses");
  List<byte[]> thumbnails=getThumbnails(uploadRequest);
  List<byte[]> fullImages=getFullImages(uploadRequest);
  String[] communityPermissions=actionRequest.getParameterValues("communityPermissions");
  String[] guestPermissions=actionRequest.getParameterValues("guestPermissions");
  if (productEntryId <= 0) {
    SCProductEntryServiceUtil.addProductEntry(layout.getPlid(),name,type,tags,shortDescription,longDescription,pageURL,author,repoGroupId,repoArtifactId,licenseIds,thumbnails,fullImages,communityPermissions,guestPermissions);
  }
 else {
    SCProductEntryServiceUtil.updateProductEntry(productEntryId,name,type,tags,shortDescription,longDescription,pageURL,author,repoGroupId,repoArtifactId,licenseIds,thumbnails,fullImages);
  }
}
