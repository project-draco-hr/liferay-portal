{
  UploadPortletRequest uploadReq=PortalUtil.getUploadPortletRequest(req);
  Layout layout=(Layout)req.getAttribute(WebKeys.LAYOUT);
  long productEntryId=ParamUtil.getLong(req,"productEntryId");
  String name=ParamUtil.getString(req,"name");
  String type=ParamUtil.getString(req,"type");
  String tags=ParamUtil.getString(req,"tags");
  String shortDescription=ParamUtil.getString(req,"shortDescription");
  String longDescription=ParamUtil.getString(req,"longDescription");
  String pageURL=ParamUtil.getString(req,"pageURL");
  String author=ParamUtil.getString(req,"author");
  String repoGroupId=ParamUtil.getString(req,"repoGroupId");
  String repoArtifactId=ParamUtil.getString(req,"repoArtifactId");
  long[] licenseIds=ParamUtil.getLongValues(req,"licenses");
  List<byte[]> thumbnails=getThumbnails(uploadReq);
  List<byte[]> fullImages=getFullImages(uploadReq);
  String[] communityPermissions=req.getParameterValues("communityPermissions");
  String[] guestPermissions=req.getParameterValues("guestPermissions");
  if (productEntryId <= 0) {
    SCProductEntryServiceUtil.addProductEntry(layout.getPlid(),name,type,tags,shortDescription,longDescription,pageURL,author,repoGroupId,repoArtifactId,licenseIds,thumbnails,fullImages,communityPermissions,guestPermissions);
  }
 else {
    SCProductEntryServiceUtil.updateProductEntry(productEntryId,name,type,tags,shortDescription,longDescription,pageURL,author,repoGroupId,repoArtifactId,licenseIds,thumbnails,fullImages);
  }
}
