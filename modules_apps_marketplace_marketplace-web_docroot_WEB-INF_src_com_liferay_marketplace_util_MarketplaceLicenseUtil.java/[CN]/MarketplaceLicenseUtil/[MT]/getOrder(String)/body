{
  JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
  jsonObject.put("cmd","GET_ORDER");
  jsonObject.put("hostName",LicenseManagerUtil.getHostName());
  jsonObject.put("ipAddresses",StringUtil.merge(LicenseManagerUtil.getIpAddresses()));
  jsonObject.put("macAddresses",StringUtil.merge(LicenseManagerUtil.getMacAddresses()));
  jsonObject.put("productEntryName",productEntryName);
  jsonObject.put("serverId",Arrays.toString(getServerIdBytes()));
  Thread currentThread=Thread.currentThread();
  ClassLoader classLoader=currentThread.getContextClassLoader();
  String response=null;
  try {
    currentThread.setContextClassLoader(PortalClassLoaderUtil.getClassLoader());
    MethodKey methodKey=new MethodKey("com.liferay.portal.license.util.LicenseUtil","sendRequest",String.class);
    response=(String)PortalClassInvoker.invoke(methodKey,jsonObject.toString());
  }
  finally {
    currentThread.setContextClassLoader(classLoader);
  }
  JSONObject responseJSONObject=JSONFactoryUtil.createJSONObject(response);
  return responseJSONObject.getString("orderUuid");
}
