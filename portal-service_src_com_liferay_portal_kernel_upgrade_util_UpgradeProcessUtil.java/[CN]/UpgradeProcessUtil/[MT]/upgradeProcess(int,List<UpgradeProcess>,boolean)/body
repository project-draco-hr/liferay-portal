{
  boolean ranUpgradeProcess=false;
  boolean tempIndexReadOnly=IndexWriterHelperUtil.isIndexReadOnly();
  if (indexOnUpgrade) {
    IndexWriterHelperUtil.setIndexReadOnly(true);
  }
  try {
    for (    UpgradeProcess upgradeProcess : upgradeProcesses) {
      boolean tempRanUpgradeProcess=_upgradeProcess(buildNumber,upgradeProcess);
      if (tempRanUpgradeProcess) {
        ranUpgradeProcess=true;
      }
    }
  }
  finally {
    IndexWriterHelperUtil.setIndexReadOnly(tempIndexReadOnly);
    if (_log.isDebugEnabled()) {
      _log.debug("Clear cache if upgrade process was run");
    }
    if (ranUpgradeProcess) {
      MultiVMPoolUtil.clear();
    }
  }
  return ranUpgradeProcess;
}
