{
  if (_serverChannel == null) {
    throw new IllegalStateException("Netty fabric server is not started");
  }
  EventLoop eventLoop=_serverChannel.eventLoop();
  EventLoopGroup bossEventLoopGroup=eventLoop.parent();
  DefaultNoticeableFuture<?> defaultNoticeableFuture=new DefaultNoticeableFuture<>();
  try {
    ChannelFuture channelFuture=_serverChannel.close();
    channelFuture.sync();
  }
  finally {
    Future<?> future=bossEventLoopGroup.shutdownGracefully(_nettyFabricServerConfig.getShutdownQuietPeriod(),_nettyFabricServerConfig.getShutdownTimeout(),TimeUnit.MILLISECONDS);
    future.addListener(new PostShutdownChannelListener(defaultNoticeableFuture));
  }
  return defaultNoticeableFuture;
}
