{
  if (_serverChannel == null) {
    throw new IllegalStateException("Netty fabric server has not started");
  }
  try {
    ChannelFuture channelFuture=_serverChannel.close();
    channelFuture.sync();
  }
  finally {
    EventLoop eventLoop=_serverChannel.eventLoop();
    EventLoopGroup bossGroup=eventLoop.parent();
    bossGroup.shutdownGracefully();
    shutdownEventExecutorGroup(_serverChannel,_workerEventLoopGroupAttributeKey);
    shutdownEventExecutorGroup(_serverChannel,_fileServerEventExecutorGroupAttributeKey);
    shutdownEventExecutorGroup(_serverChannel,_registrationEventExecutorGroupAttributeKey);
    shutdownEventExecutorGroup(_serverChannel,_rpcEventExecutorGroupAttributeKey);
    FileHelperUtil.delete(_nettyFabricServerConfig.getRepositoryParentPath());
    _serverChannel=null;
  }
}
