{
  PortletPreferences portletPreferences=PrefsPropsUtil.getPreferences(companyId,true);
  SocialInteractionsType socialInteractionsType=SocialInteractionsType.parse(PrefsParamUtil.getString(portletPreferences,request,"socialInteractionsType" + serviceName,SocialInteractionsType.ALL_USERS.toString()));
  boolean socialInteractionsSitesEnabled=PrefsParamUtil.getBoolean(portletPreferences,request,"socialInteractionsSitesEnabled" + serviceName,true);
  String socialInteractionsSocialRelationTypes=portletPreferences.getValue("socialInteractionsSocialRelationTypes" + serviceName,StringPool.BLANK);
  boolean socialInteractionsSocialRelationTypesEnabled=PrefsParamUtil.getBoolean(portletPreferences,request,"socialInteractionsSocialRelationTypesEnabled" + serviceName,true);
  SocialInteractionsConfiguration defaultSocialInteractionsConfiguration=SocialInteractionsConfigurationUtil.getSocialInteractionsConfiguration(companyId,request);
  return new SocialInteractionsConfiguration(socialInteractionsType,socialInteractionsSitesEnabled,socialInteractionsSocialRelationTypes,socialInteractionsSocialRelationTypesEnabled,defaultSocialInteractionsConfiguration);
}
