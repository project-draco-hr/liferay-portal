{
  PortletPreferences preferences=PortletPreferencesFactoryUtil.fromXML(companyId,ownerId,ownerType,plid,portletId,xml);
  Map<String,String[]> preferencesMap=preferences.getMap();
  for (  String oldPreferenceName : _oldPreferenceNamesMap.keySet()) {
    String[] values=preferencesMap.get(oldPreferenceName);
    if (values != null) {
      preferences.reset(oldPreferenceName);
      preferences.setValues(_oldPreferenceNamesMap.get(oldPreferenceName),values);
    }
  }
  return PortletPreferencesFactoryUtil.toXML(preferences);
}
