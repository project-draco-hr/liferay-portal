{
  List<String> stringConstants=_stringConstantsExtractor.extract(expressionString);
  expressionString=createVariable(expressionString,stringConstants);
  _tokensExtractor.extract(expressionString);
  List<String> constants=_tokensExtractor.getConstants();
  expressionString=createVariable(expressionString,constants);
  List<String> variableNames=_tokensExtractor.getVariables();
  for (  String variableName : variableNames) {
    Variable variable=new Variable(variableName);
    String token=_variableMap.get(variableName);
    if (token != null) {
      variable.setValue(encode(token));
    }
 else {
      _variableMap.put(variableName,variableName);
    }
    _variables.put(variableName,variable);
  }
  _expressionString=expressionString;
  _expressionClass=expressionClass;
}
