{
  VariableDependencies variableDependencies=variableDependenciesMap.get(variable.getName());
  if (variableDependencies != null) {
    return variableDependencies;
  }
  variableDependencies=new VariableDependencies(variable.getName());
  if (variable.getExpressionString() != null) {
    TokenExtractor tokensExtractor=new TokenExtractor();
    Map<String,String> variableMap=tokensExtractor.extract(variable.getExpressionString());
    Set<String> variableNames=variableMap.keySet();
    for (    String variableName : variableNames) {
      if (!_variables.containsKey(variableName)) {
        Variable newVariable=new Variable(variableName);
        _variables.put(variableName,newVariable);
        String token=variableMap.get(variableName);
        if (token != null) {
          setStringVariableValue(variableName,token);
        }
      }
      VariableDependencies variableVariableDependencies=populateVariableDependenciesMap(_variables.get(variableName),variableDependenciesMap);
      variableVariableDependencies.addAffectedVariable(variableDependencies.getVariableName());
      variableDependencies.addRequiredVariable(variableVariableDependencies.getVariableName());
    }
  }
  variableDependenciesMap.put(variable.getName(),variableDependencies);
  return variableDependencies;
}
