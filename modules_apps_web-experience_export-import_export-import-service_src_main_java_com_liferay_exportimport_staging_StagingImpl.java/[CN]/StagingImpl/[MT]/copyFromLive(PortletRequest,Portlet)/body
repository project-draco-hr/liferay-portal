{
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long plid=ParamUtil.getLong(portletRequest,"plid");
  Layout targetLayout=_layoutLocalService.getLayout(plid);
  Group stagingGroup=targetLayout.getGroup();
  Group liveGroup=stagingGroup.getLiveGroup();
  Layout sourceLayout=_layoutLocalService.getLayoutByUuidAndGroupId(targetLayout.getUuid(),liveGroup.getGroupId(),targetLayout.isPrivateLayout());
  Map<String,String[]> parameterMap=ExportImportConfigurationParameterMapFactory.buildParameterMap(portletRequest);
  return publishPortlet(themeDisplay.getUserId(),liveGroup.getGroupId(),stagingGroup.getGroupId(),sourceLayout.getPlid(),targetLayout.getPlid(),portlet.getPortletId(),parameterMap);
}
