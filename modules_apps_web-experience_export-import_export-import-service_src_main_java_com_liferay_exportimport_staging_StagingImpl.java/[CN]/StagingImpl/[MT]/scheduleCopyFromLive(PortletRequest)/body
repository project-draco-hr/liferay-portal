{
  long targetGroupId=ParamUtil.getLong(portletRequest,"stagingGroupId");
  Group targetGroup=_groupLocalService.getGroup(targetGroupId);
  long sourceGroupId=targetGroup.getLiveGroupId();
  boolean privateLayout=getPrivateLayout(portletRequest);
  long[] layoutIds=ExportImportHelperUtil.getLayoutIds(portletRequest,targetGroupId);
  Map<String,String[]> parameterMap=ExportImportConfigurationParameterMapFactory.buildParameterMap(portletRequest);
  String groupName=getSchedulerGroupName(DestinationNames.LAYOUTS_LOCAL_PUBLISHER,targetGroupId);
  int recurrenceType=ParamUtil.getInteger(portletRequest,"recurrenceType");
  Calendar startCalendar=ExportImportDateUtil.getCalendar(portletRequest,"schedulerStartDate",true);
  String cronText=SchedulerEngineHelperUtil.getCronText(portletRequest,startCalendar,true,recurrenceType);
  Date schedulerEndDate=null;
  int endDateType=ParamUtil.getInteger(portletRequest,"endDateType");
  if (endDateType == 1) {
    Calendar endCalendar=ExportImportDateUtil.getCalendar(portletRequest,"schedulerEndDate",true);
    schedulerEndDate=endCalendar.getTime();
  }
  String name=ParamUtil.getString(portletRequest,"name");
  _layoutService.schedulePublishToLive(sourceGroupId,targetGroupId,privateLayout,layoutIds,parameterMap,groupName,cronText,startCalendar.getTime(),schedulerEndDate,name);
}
