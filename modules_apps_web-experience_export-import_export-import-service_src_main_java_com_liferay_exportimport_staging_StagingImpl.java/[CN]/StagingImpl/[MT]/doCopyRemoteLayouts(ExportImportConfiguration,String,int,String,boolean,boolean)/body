{
  Map<String,Serializable> settingsMap=exportImportConfiguration.getSettingsMap();
  Map<String,String[]> parameterMap=(Map<String,String[]>)settingsMap.get("parameterMap");
  String backgroundTaskName=MapUtil.getString(parameterMap,"name",exportImportConfiguration.getName());
  Map<String,Serializable> taskContextMap=new HashMap<>();
  taskContextMap.put("exportImportConfigurationId",exportImportConfiguration.getExportImportConfigurationId());
  String remoteURL=buildRemoteURL(remoteAddress,remotePort,remotePathContext,secureConnection);
  PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
  User user=permissionChecker.getUser();
  HttpPrincipal httpPrincipal=new HttpPrincipal(remoteURL,user.getLogin(),user.getPassword(),user.getPasswordEncrypted());
  taskContextMap.put("httpPrincipal",httpPrincipal);
  BackgroundTask backgroundTask=BackgroundTaskManagerUtil.addBackgroundTask(user.getUserId(),exportImportConfiguration.getGroupId(),backgroundTaskName,BackgroundTaskExecutorNames.LAYOUT_REMOTE_STAGING_BACKGROUND_TASK_EXECUTOR,taskContextMap,new ServiceContext());
  return backgroundTask.getBackgroundTaskId();
}
