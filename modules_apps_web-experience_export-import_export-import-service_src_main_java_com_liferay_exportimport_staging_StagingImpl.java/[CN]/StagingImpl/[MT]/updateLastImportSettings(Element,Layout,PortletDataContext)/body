{
  Map<String,String[]> parameterMap=portletDataContext.getParameterMap();
  String cmd=MapUtil.getString(parameterMap,Constants.CMD);
  if (!cmd.equals(Constants.PUBLISH_TO_LIVE) && !cmd.equals("schedule_publish_to_live")) {
    return;
  }
  UnicodeProperties typeSettingsProperties=layout.getTypeSettingsProperties();
  typeSettingsProperties.setProperty("last-import-date",String.valueOf(System.currentTimeMillis()));
  String layoutRevisionId=GetterUtil.getString(layoutElement.attributeValue("layout-revision-id"));
  typeSettingsProperties.setProperty("last-import-layout-revision-id",layoutRevisionId);
  String layoutSetBranchId=MapUtil.getString(parameterMap,"layoutSetBranchId");
  typeSettingsProperties.setProperty("last-import-layout-set-branch-id",layoutSetBranchId);
  String layoutSetBranchName=MapUtil.getString(parameterMap,"layoutSetBranchName");
  typeSettingsProperties.setProperty("last-import-layout-set-branch-name",layoutSetBranchName);
  String lastImportUserName=MapUtil.getString(parameterMap,"lastImportUserName");
  typeSettingsProperties.setProperty("last-import-user-name",lastImportUserName);
  String lastImportUserUuid=MapUtil.getString(parameterMap,"lastImportUserUuid");
  typeSettingsProperties.setProperty("last-import-user-uuid",lastImportUserUuid);
  String layoutBranchId=GetterUtil.getString(layoutElement.attributeValue("layout-branch-id"));
  typeSettingsProperties.setProperty("last-import-layout-branch-id",layoutBranchId);
  String layoutBranchName=GetterUtil.getString(layoutElement.attributeValue("layout-branch-name"));
  typeSettingsProperties.setProperty("last-import-layout-branch-name",layoutBranchName);
  layout.setTypeSettingsProperties(typeSettingsProperties);
}
