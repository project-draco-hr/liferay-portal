{
  if (workflowEnabled) {
    serviceContext.setWorkflowAction(WorkflowConstants.ACTION_SAVE_DRAFT);
    if (approved) {
      serviceContext.setWorkflowAction(WorkflowConstants.ACTION_PUBLISH);
    }
  }
  List<ObjectValuePair<String,InputStream>> inputStreamOVPs=Collections.emptyList();
  MBMessage message=MBMessageLocalServiceUtil.addMessage(TestPropsValues.getUserId(),ServiceTestUtil.randomString(),groupId,categoryId,0,0,ServiceTestUtil.randomString(),ServiceTestUtil.randomString(),MBMessageConstants.DEFAULT_FORMAT,inputStreamOVPs,false,0.0,false,serviceContext);
  return MBMessageLocalServiceUtil.getMessage(message.getMessageId());
}
