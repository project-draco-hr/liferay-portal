{
  if (actionId.equals(ActionKeys.ADD_CATEGORY)) {
    actionId=ActionKeys.ADD_SUBCATEGORY;
  }
  if (MBBanLocalServiceUtil.hasBan(category.getGroupId(),permissionChecker.getUserId())) {
    return false;
  }
  long categoryId=category.getCategoryId();
  if (PropsValues.PERMISSIONS_VIEW_DYNAMIC_INHERITANCE) {
    long originalCategoryId=categoryId;
    try {
      while (categoryId != MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID) {
        category=MBCategoryLocalServiceUtil.getCategory(categoryId);
        if (!_hasPermission(permissionChecker,category,ActionKeys.VIEW)) {
          return false;
        }
        categoryId=category.getParentCategoryId();
      }
    }
 catch (    NoSuchCategoryException nsce) {
      if (!category.isInTrash()) {
        throw nsce;
      }
    }
    if (actionId.equals(ActionKeys.VIEW)) {
      return true;
    }
    categoryId=originalCategoryId;
  }
  try {
    while (categoryId != MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID) {
      category=MBCategoryLocalServiceUtil.getCategory(categoryId);
      if (_hasPermission(permissionChecker,category,actionId)) {
        return true;
      }
      categoryId=category.getParentCategoryId();
    }
  }
 catch (  NoSuchCategoryException nsce) {
    if (!category.isInTrash()) {
      throw nsce;
    }
  }
  return false;
}
