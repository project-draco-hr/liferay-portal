{
  if (actionId.equals(ActionKeys.ADD_CATEGORY)) {
    actionId=ActionKeys.ADD_SUBCATEGORY;
  }
  if (MBBanLocalServiceUtil.hasBan(category.getGroupId(),permissionChecker.getUserId())) {
    return false;
  }
  long categoryId=category.getCategoryId();
  if (PropsValues.PERMISSIONS_VIEW_DYNAMIC_INHERITANCE) {
    MBCategory originalCategory=category;
    try {
      while (categoryId != MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID) {
        category=MBCategoryLocalServiceUtil.getCategory(categoryId);
        if (!permissionChecker.hasOwnerPermission(category.getCompanyId(),MBCategory.class.getName(),categoryId,category.getUserId(),ActionKeys.VIEW) && !permissionChecker.hasPermission(category.getGroupId(),MBCategory.class.getName(),categoryId,ActionKeys.VIEW)) {
          return false;
        }
        categoryId=category.getParentCategoryId();
      }
    }
 catch (    NoSuchCategoryException nsce) {
      if (!category.isInTrash()) {
        throw nsce;
      }
    }
    if (Validator.equals(actionId,ActionKeys.VIEW)) {
      return true;
    }
    categoryId=originalCategory.getCategoryId();
  }
  try {
    while (categoryId != MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID) {
      category=MBCategoryLocalServiceUtil.getCategory(categoryId);
      if (permissionChecker.hasOwnerPermission(category.getCompanyId(),MBCategory.class.getName(),categoryId,category.getUserId(),actionId) || permissionChecker.hasPermission(category.getGroupId(),MBCategory.class.getName(),categoryId,actionId)) {
        return true;
      }
      categoryId=category.getParentCategoryId();
    }
  }
 catch (  NoSuchCategoryException nsce) {
    if (!category.isInTrash()) {
      throw nsce;
    }
  }
  return false;
}
