{
  long groupId=0;
  String name=null;
  String primKey=null;
  if (plid != null) {
    String layoutId=LayoutImpl.getLayoutId(plid);
    String ownerId=LayoutImpl.getOwnerId(plid);
    groupId=LayoutImpl.getGroupId(ownerId);
    name=PortletImpl.getRootPortletId(portletId);
    primKey=getPrimaryKey(plid,portletId);
    if (LayoutPermission.contains(permissionChecker,layoutId,ownerId,ActionKeys.UPDATE)) {
      return true;
    }
  }
 else {
    name=portletId;
    primKey=portletId;
  }
  return permissionChecker.hasPermission(groupId,name,primKey,actionId);
}
