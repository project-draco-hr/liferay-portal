{
  SocialEquityValue equityValue=new SocialEquityValue();
  for (  SocialEquityLog equityLog : equityLogs) {
    AssetEntry assetEntry=assetEntryLocalService.getEntry(equityLog.getAssetEntryId());
    User user=userPersistence.findByPrimaryKey(assetEntry.getUserId());
    if (!isSocialEquityEnabled(assetEntry.getGroupId(),assetEntry.getClassName(),equityLog.getType())) {
      continue;
    }
    SocialEquityIncrementPayload equityIncrementPayload=new SocialEquityIncrementPayload();
    equityIncrementPayload.setAssetEntry(assetEntry);
    double k=calculateK(equityLog.getValue(),equityLog.getLifespan());
    double b=calculateB(equityLog.getActionDate(),equityLog.getValue(),equityLog.getLifespan());
    equityValue.setValue(0,0);
    equityValue.subtract(k,b);
    equityIncrementPayload.setEquityValue(equityValue);
    equityIncrementPayload.setUser(user);
    if (equityLog.getType() == SocialEquitySettingConstants.TYPE_INFORMATION) {
      socialEquityLogLocalService.incrementSocialEquityAssetEntry_IQ(assetEntry.getEntryId(),equityIncrementPayload);
      socialEquityLogLocalService.incrementSocialEquityUser_CQ(assetEntry.getGroupId(),assetEntry.getUserId(),equityIncrementPayload);
    }
 else {
      socialEquityLogLocalService.incrementSocialEquityUser_PQ(equityLog.getGroupId(),equityLog.getUserId(),equityIncrementPayload);
    }
    socialEquityLogPersistence.remove(equityLog);
  }
}
