{
  LiferayPortletURL newURLImpl=null;
  if (lifecycle.equals(PortletRequest.ACTION_PHASE)) {
    newURLImpl=(LiferayPortletURL)res.createActionURL();
  }
 else   if (lifecycle.equals(PortletRequest.RENDER_PHASE)) {
    newURLImpl=(LiferayPortletURL)res.createRenderURL();
  }
  newURLImpl.setPortletId(liferayPortletURL.getPortletId());
  WindowState windowState=liferayPortletURL.getWindowState();
  if (windowState != null) {
    newURLImpl.setWindowState(windowState);
  }
  PortletMode portletMode=liferayPortletURL.getPortletMode();
  if (portletMode != null) {
    newURLImpl.setPortletMode(portletMode);
  }
  newURLImpl.setParameters(liferayPortletURL.getParameterMap());
  return newURLImpl;
}
