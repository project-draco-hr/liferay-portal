{
  Address sourceAddress=message.getSrc();
  Address localAddress=_channel.getLocalAddress();
  if ((!localAddress.equals(sourceAddress)) || (message.getDest() != null)) {
    Message responseMessage=new Message();
    responseMessage.setDest(sourceAddress);
    responseMessage.setSrc(localAddress);
    Object payload=message.getObject();
    if (payload instanceof MethodWrapper) {
      MethodWrapper methodWrapper=(MethodWrapper)payload;
      try {
        Object returnValue=MethodInvoker.invoke(methodWrapper);
        if (returnValue instanceof Serializable) {
          responseMessage.setObject((Serializable)returnValue);
        }
 else {
          responseMessage.setObject(new ClusterException("Return value is not Serializable"));
        }
      }
 catch (      Exception e) {
        responseMessage.setObject(e);
      }
    }
 else {
      if (_log.isWarnEnabled()) {
        _log.warn("Payload is not a MethodWrapper");
      }
    }
    try {
      _channel.send(responseMessage);
    }
 catch (    ChannelException ce) {
      _log.error("Unable to send response message " + responseMessage,ce);
    }
  }
 else {
    if (_log.isDebugEnabled()) {
      _log.debug("Block received message " + message);
    }
  }
}
