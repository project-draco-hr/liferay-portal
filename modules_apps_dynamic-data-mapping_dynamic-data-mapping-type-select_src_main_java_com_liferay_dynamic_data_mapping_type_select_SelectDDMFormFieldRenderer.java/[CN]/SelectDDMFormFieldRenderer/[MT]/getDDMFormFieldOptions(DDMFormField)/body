{
  String dataSourceType=(String)ddmFormField.getProperty("dataSourceType");
  if (Validator.equals(dataSourceType,"manual")) {
    return ddmFormField.getDDMFormFieldOptions();
  }
  DDMFormFieldOptions ddmFormFieldOptions=new DDMFormFieldOptions();
  long ddmDataProviderInstanceId=GetterUtil.getLong(ddmFormField.getProperty("ddmDataProviderInstanceId"));
  try {
    DDMDataProviderInstance ddmDataProviderInstance=_ddmDataProviderInstanceService.getDataProviderInstance(ddmDataProviderInstanceId);
    List<KeyValuePair> data=ddmDataProviderInstance.getData();
    for (    KeyValuePair keyValuePair : data) {
      ddmFormFieldOptions.addOptionLabel(keyValuePair.getKey(),LocaleUtil.getDefault(),keyValuePair.getValue());
    }
    return ddmFormFieldOptions;
  }
 catch (  PortalException pe) {
    _log.error("Unable to retrieve data from DDM data provider ID " + ddmDataProviderInstanceId,pe);
  }
  return ddmFormFieldOptions;
}
