{
  long scopeGroupId=groupId;
  try {
    Group group=GroupLocalServiceUtil.getGroup(groupId);
    if (group.isLayout()) {
      groupId=group.getParentGroupId();
    }
  }
 catch (  Exception e) {
  }
  userName=PortalUtil.getUserName(userId,userName);
  shortDescription=HtmlUtil.extractText(shortDescription);
  longDescription=HtmlUtil.extractText(longDescription);
  String content=userId + " " + userName+ " "+ type+ " "+ shortDescription+ " "+ longDescription+ " "+ pageURL+ repoGroupId+ " "+ repoArtifactId;
  Document document=new DocumentImpl();
  document.addUID(PORTLET_ID,productEntryId);
  document.addModifiedDate(modifiedDate);
  document.addKeyword(Field.COMPANY_ID,companyId);
  document.addKeyword(Field.PORTLET_ID,PORTLET_ID);
  document.addKeyword(Field.GROUP_ID,groupId);
  document.addKeyword(Field.SCOPE_GROUP_ID,scopeGroupId);
  document.addKeyword(Field.USER_ID,userId);
  document.addText(Field.USER_NAME,userName);
  document.addText(Field.TITLE,name);
  document.addText(Field.CONTENT,content);
  document.addKeyword(Field.ENTRY_CLASS_NAME,SCProductEntry.class.getName());
  document.addKeyword(Field.ENTRY_CLASS_PK,productEntryId);
  document.addKeyword("version",version);
  document.addKeyword("type",type);
  document.addText("shortDescription",shortDescription);
  document.addText("longDescription",longDescription);
  document.addText("pageURL",pageURL);
  document.addKeyword("repoGroupId",repoGroupId);
  document.addKeyword("repoArtifactId",repoArtifactId);
  ExpandoBridgeIndexerUtil.addAttributes(document,expandoBridge);
  return document;
}
