{
  _channelCount=channelPropertiesStrings.size();
  if ((_channelCount <= 0) || (_channelCount > MAX_CHANNEL_COUNT)) {
    throw new IllegalArgumentException("Channel count must be between 1 and " + MAX_CHANNEL_COUNT);
  }
  _localAddresses=new ArrayList<>(_channelCount);
  _clusterChannels=new ArrayList<>(_channelCount);
  _clusterReceivers=new ArrayList<>(_channelCount);
  List<String> keys=new ArrayList<>(channelPropertiesStrings.keySet());
  Collections.sort(keys);
  for (  String key : keys) {
    String channelPropertiesString=channelPropertiesStrings.get(key);
    String channelName=channelNames.get(key);
    if (Validator.isNull(channelPropertiesString) || Validator.isNull(channelName)) {
      continue;
    }
    ClusterReceiver clusterReceiver=new ClusterForwardReceiver(this);
    ClusterChannel clusterChannel=_clusterChannelFactory.createClusterChannel(channelPropertiesString,channelName,clusterReceiver);
    _clusterChannels.add(clusterChannel);
    _clusterReceivers.add(clusterReceiver);
    _localAddresses.add(clusterChannel.getLocalAddress());
  }
}
