{
  ServerCapabilities serverCapabilities=null;
  if (ServerDetector.isGlassfish()) {
    serverCapabilities=new GlassfishServerCapabilities();
  }
 else   if (ServerDetector.isJBoss()) {
    serverCapabilities=new JBossServerCapabilities();
  }
 else   if (ServerDetector.isJetty()) {
    serverCapabilities=new JettyServerCapabilities();
  }
 else   if (ServerDetector.isTomcat()) {
    serverCapabilities=new TomcatServerCapabilities();
  }
  if (serverCapabilities == null) {
    serverCapabilities=new DefaultServerCapabilities();
  }
  if (_log.isInfoEnabled()) {
    Class<?> clazz=serverCapabilities.getClass();
    _log.info("Using " + clazz.getName());
  }
  try {
    serverCapabilities.determine(servletContext);
  }
 catch (  Exception e) {
    _log.error("Unable to determine server capabilities",e);
  }
  ServerDetector.setSupportsHotDeploy(serverCapabilities.isSupportsHotDeploy());
}
