{
  LiferayPortletURL liferayViewPageURL=(LiferayPortletURL)viewPageURL;
  LiferayPortletURL liferayEditPageURL=(LiferayPortletURL)editPageURL;
  WikiEngine engine=_getEngine(page.getFormat());
  String content=engine.convert(page,editPageURL);
  content=_replaceLinks(page.getTitle(),content,liferayViewPageURL,liferayEditPageURL);
  Iterator itr=engine.getOutgoingLinks(page).keySet().iterator();
  while (itr.hasNext()) {
    String title=(String)itr.next();
    content=_replaceLinks(title,content,liferayViewPageURL,liferayEditPageURL);
  }
  content=_replaceAttachments(content,page.getTitle(),attachmentURLPrefix);
  return content;
}
