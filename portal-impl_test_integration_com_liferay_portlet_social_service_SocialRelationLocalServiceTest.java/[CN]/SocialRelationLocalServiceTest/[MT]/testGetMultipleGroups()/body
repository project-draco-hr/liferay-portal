{
  User dlc2=UserLocalServiceUtil.getUserByScreenName(TestPropsValues.getCompanyId(),"dlc2");
  User dlc3=UserLocalServiceUtil.getUserByScreenName(TestPropsValues.getCompanyId(),"dlc3");
  User dlc4=UserLocalServiceUtil.getUserByScreenName(TestPropsValues.getCompanyId(),"dlc4");
  long[] dlc3GroupIds=dlc3.getGroupIds();
  long[] dlc4GroupIds=dlc4.getGroupIds();
  Arrays.sort(dlc4GroupIds);
  long[] groupIds=intersection(dlc3GroupIds,dlc4GroupIds);
  List<User> users=UserLocalServiceUtil.getUsersByGroups("dlc",dlc2.getUserId(),groupIds,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  Assert.assertEquals(2,users.size());
}
