{
  User dlc3User=UserLocalServiceUtil.getUserByScreenName(TestPropsValues.getCompanyId(),"dlc3");
  User dlc4User=UserLocalServiceUtil.getUserByScreenName(TestPropsValues.getCompanyId(),"dlc4");
  GroupLocalServiceUtil.addUserGroup(dlc3User.getUserId(),TestPropsValues.getGroupId());
  GroupLocalServiceUtil.addUserGroup(dlc4User.getUserId(),TestPropsValues.getGroupId());
  long[] dlc3GroupIds=dlc3User.getGroupIds();
  long[] dlc4GroupIds=dlc4User.getGroupIds();
  Set<Long> groupIdsSet=SetUtil.fromArray(dlc3GroupIds);
  groupIdsSet.retainAll(SetUtil.fromArray(dlc4GroupIds));
  long[] groupIds=ArrayUtil.toArray(groupIdsSet.toArray(new Long[]{}));
  List<User> users=UserLocalServiceUtil.getUsersByKeywordsAndGroupIds(TestPropsValues.getCompanyId(),"dlc",groupIds,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  Assert.assertEquals(2,users.size());
}
