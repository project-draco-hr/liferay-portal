{
  User dlc3User=UserLocalServiceUtil.getUserByScreenName(TestPropsValues.getCompanyId(),"dlc3");
  GroupLocalServiceUtil.addUserGroup(dlc3User.getUserId(),TestPropsValues.getGroupId());
  User dlc4User=UserLocalServiceUtil.getUserByScreenName(TestPropsValues.getCompanyId(),"dlc4");
  GroupLocalServiceUtil.addUserGroup(dlc4User.getUserId(),TestPropsValues.getGroupId());
  Set<Long> groupIds=SetUtil.intersect(dlc3User.getGroupIds(),dlc4User.getGroupIds());
  List<User> users=UserLocalServiceUtil.searchSocial(TestPropsValues.getCompanyId(),ArrayUtil.toArray(groupIds.toArray(new Long[groupIds.size()])),"dlc",QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  Assert.assertEquals(2,users.size());
  GroupLocalServiceUtil.deleteUserGroup(dlc3User.getUserId(),TestPropsValues.getGroupId());
  GroupLocalServiceUtil.deleteUserGroup(dlc4User.getUserId(),TestPropsValues.getGroupId());
}
