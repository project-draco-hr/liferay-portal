{
  Template template=new VelocityTemplate(templateResource,errorTemplateResource,helperUtilities,_velocityEngine,templateContextHelper,_velocityEngineConfiguration.resourceModificationCheckInterval(),privileged);
  if (restricted) {
    template=new RestrictedTemplate(template,templateContextHelper.getRestrictedVariables());
  }
  return template;
}
