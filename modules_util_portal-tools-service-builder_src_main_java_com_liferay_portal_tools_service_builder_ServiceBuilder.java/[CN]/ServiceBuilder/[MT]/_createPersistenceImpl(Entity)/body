{
  Map<String,Object> context=_getContext();
  context.put("entity",entity);
  context.put("referenceList",_mergeReferenceList(entity));
  JavaClass modelImplJavaClass=_getJavaClass(_outputPath + "/model/impl/" + entity.getName()+ "Impl.java");
  context=_putDeprecatedKeys(context,modelImplJavaClass);
  Logger.selectLoggerLibrary(Logger.LIBRARY_NONE);
  String content=_processTemplate(_tplPersistenceImpl,context);
  Logger.selectLoggerLibrary(Logger.LIBRARY_AUTO);
  File ejbFile=new File(_outputPath + "/service/persistence/impl/" + entity.getName()+ "PersistenceImpl.java");
  ToolsUtil.writeFile(ejbFile,content,_author,_modifiedFileNames);
  ejbFile=new File(_outputPath + "/service/persistence/" + entity.getName()+ "PersistenceImpl.java");
  if (ejbFile.exists()) {
    System.out.println("Relocating " + ejbFile);
    ejbFile.delete();
  }
}
