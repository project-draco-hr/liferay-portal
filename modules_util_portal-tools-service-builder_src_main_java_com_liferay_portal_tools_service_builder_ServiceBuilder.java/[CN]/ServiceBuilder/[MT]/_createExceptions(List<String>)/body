{
  for (  Entity entity : _ejbList) {
    if (!_isTargetEntity(entity)) {
      continue;
    }
    if (entity.hasColumns()) {
      exceptions.add(getNoSuchEntityException(entity));
    }
  }
  for (  String exception : exceptions) {
    File oldExceptionFile=new File(_oldServiceOutputPath + "/" + exception+ "Exception.java");
    if (!oldExceptionFile.exists()) {
      oldExceptionFile=new File(_oldServiceOutputPath + "/exception/" + exception+ "Exception.java");
    }
    if (!oldExceptionFile.exists()) {
      oldExceptionFile=new File(_serviceOutputPath + "/" + exception+ "Exception.java");
    }
    File exceptionFile=new File(_serviceOutputPath + "/exception/" + exception+ "Exception.java");
    if (oldExceptionFile.exists() && !oldExceptionFile.equals(exceptionFile)) {
      exceptionFile.delete();
      Files.createDirectories(Paths.get(_serviceOutputPath,"exception"));
      Files.move(oldExceptionFile.toPath(),exceptionFile.toPath());
      String content=_read(exceptionFile);
      content=StringUtil.replace(content,new String[]{"package " + _packagePath + ";","package " + _packagePath + ".exception;","package " + _apiPackagePath + ";","com.liferay.portal.NoSuchModelException"},new String[]{"package " + _apiPackagePath + ".exception;","package " + _apiPackagePath + ".exception;","package " + _apiPackagePath + ".exception;","com.liferay.portal.kernel.exception.NoSuchModelException"});
      _write(exceptionFile,content);
    }
    if (!exceptionFile.exists()) {
      Map<String,Object> context=_getContext();
      context.put("exception",exception);
      String content=_processTemplate(_tplException,context);
      if (exception.startsWith("NoSuch")) {
        content=StringUtil.replace(content,"PortalException","NoSuchModelException");
      }
      content=StringUtil.replace(content,"\r\n","\n");
      ToolsUtil.writeFileRaw(exceptionFile,content,_modifiedFileNames);
    }
    if (exception.startsWith("NoSuch")) {
      String content=_read(exceptionFile);
      if (!content.contains("NoSuchModelException")) {
        content=StringUtil.replace(content,"PortalException","NoSuchModelException");
        content=StringUtil.replace(content,"portal.exception.NoSuchModelException","portal.kernel.exception.NoSuchModelException");
        ToolsUtil.writeFileRaw(exceptionFile,content,_modifiedFileNames);
      }
 else       if (content.contains("portal.exception.NoSuchModelException")) {
        content=StringUtil.replace(content,"portal.exception.NoSuchModelException","portal.kernel.exception.NoSuchModelException");
        ToolsUtil.writeFileRaw(exceptionFile,content,_modifiedFileNames);
      }
    }
  }
}
