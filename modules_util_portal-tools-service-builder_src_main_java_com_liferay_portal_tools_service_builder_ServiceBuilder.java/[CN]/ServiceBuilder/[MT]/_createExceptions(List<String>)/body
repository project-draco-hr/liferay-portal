{
  for (int i=0; i < _ejbList.size(); i++) {
    Entity entity=_ejbList.get(i);
    if (!_isTargetEntity(entity)) {
      continue;
    }
    if (entity.hasColumns()) {
      exceptions.add(getNoSuchEntityException(entity));
    }
  }
  for (  String exception : exceptions) {
    File oldExceptionFile=new File(_serviceOutputPath + "/" + exception+ "Exception.java");
    File exceptionFile=new File(_serviceOutputPath + "/exception/" + exception+ "Exception.java");
    if (oldExceptionFile.exists()) {
      exceptionFile.delete();
      Files.createDirectories(Paths.get(_serviceOutputPath,"exception"));
      Files.move(oldExceptionFile.toPath(),exceptionFile.toPath());
      String content=_read(exceptionFile);
      content=StringUtil.replace(content,"package " + _packagePath,"package " + _packagePath + ".exception");
      _write(exceptionFile,content);
    }
    if (!exceptionFile.exists()) {
      Map<String,Object> context=_getContext();
      context.put("exception",exception);
      String content=_processTemplate(_tplException,context);
      if (exception.startsWith("NoSuch")) {
        content=StringUtil.replace(content,"PortalException","NoSuchModelException");
        content=StringUtil.replace(content,"kernel.exception.NoSuchModelException","NoSuchModelException");
      }
      content=StringUtil.replace(content,"\r\n","\n");
      ToolsUtil.writeFileRaw(exceptionFile,content,_modifiedFileNames);
    }
    if (exception.startsWith("NoSuch")) {
      String content=_read(exceptionFile);
      if (!content.contains("NoSuchModelException")) {
        content=StringUtil.replace(content,"PortalException","NoSuchModelException");
        content=StringUtil.replace(content,"kernel.exception.NoSuchModelException","NoSuchModelException");
        ToolsUtil.writeFileRaw(exceptionFile,content,_modifiedFileNames);
      }
    }
  }
}
