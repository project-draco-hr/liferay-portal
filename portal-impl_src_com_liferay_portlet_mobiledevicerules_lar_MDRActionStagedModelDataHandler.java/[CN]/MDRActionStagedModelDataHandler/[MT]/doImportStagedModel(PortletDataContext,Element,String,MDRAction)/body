{
  String ruleGroupInstancePath=StagedModelPathUtil.getPath(portletDataContext,MDRRuleGroupInstance.class.getName(),action.getRuleGroupInstanceId());
  MDRRuleGroupInstance ruleGroupInstance=(MDRRuleGroupInstance)portletDataContext.getZipEntryAsObject(ruleGroupInstancePath);
  StagedModelDataHandlerUtil.importStagedModel(portletDataContext,element,ruleGroupInstancePath,ruleGroupInstance);
  Map<Long,Long> ruleGroupInstanceIds=(Map<Long,Long>)portletDataContext.getNewPrimaryKeysMap(MDRRuleGroupInstance.class);
  long ruleGroupInstanceId=MapUtil.getLong(ruleGroupInstanceIds,action.getRuleGroupInstanceId(),action.getRuleGroupInstanceId());
  ServiceContext serviceContext=portletDataContext.createServiceContext(element,action,MDRPortletDataHandler.NAMESPACE);
  serviceContext.setUserId(portletDataContext.getUserId(action.getUserUuid()));
  validateLayout(element,action);
  MDRAction importedAction=null;
  if (portletDataContext.isDataStrategyMirror()) {
    MDRAction existingAction=MDRActionUtil.fetchByUUID_G(action.getUuid(),portletDataContext.getScopeGroupId());
    if (existingAction == null) {
      serviceContext.setUuid(action.getUuid());
      importedAction=MDRActionLocalServiceUtil.addAction(ruleGroupInstanceId,action.getNameMap(),action.getDescriptionMap(),action.getType(),action.getTypeSettingsProperties(),serviceContext);
    }
 else {
      importedAction=MDRActionLocalServiceUtil.updateAction(existingAction.getActionId(),action.getNameMap(),action.getDescriptionMap(),action.getType(),action.getTypeSettingsProperties(),serviceContext);
    }
  }
 else {
    importedAction=MDRActionLocalServiceUtil.addAction(ruleGroupInstanceId,action.getNameMap(),action.getDescriptionMap(),action.getType(),action.getTypeSettingsProperties(),serviceContext);
  }
  portletDataContext.importClassedModel(action,importedAction,MDRPortletDataHandler.NAMESPACE);
}
