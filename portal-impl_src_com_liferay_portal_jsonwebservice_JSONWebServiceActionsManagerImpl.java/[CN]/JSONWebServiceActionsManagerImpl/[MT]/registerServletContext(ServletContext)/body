{
  String contextName=servletContext.getServletContextName();
  String contextPath=servletContext.getContextPath();
  BeanLocator beanLocator=null;
  if (contextPath.equals(PortalContextLoaderListener.getPortalServletContextPath()) || contextPath.isEmpty()) {
    beanLocator=PortalBeanLocatorUtil.getBeanLocator();
  }
 else {
    beanLocator=PortletBeanLocatorUtil.getBeanLocator(contextName);
  }
  if (beanLocator == null) {
    if (_log.isInfoEnabled()) {
      _log.info("Bean locator not available for " + contextPath);
    }
    return -1;
  }
  JSONWebServiceRegistrator jsonWebServiceRegistrator=new JSONWebServiceRegistrator();
  jsonWebServiceRegistrator.processAllBeans(contextName,contextPath,beanLocator);
  int count=getJSONWebServiceActionsCount(contextPath);
  if (_log.isInfoEnabled()) {
    _log.info("Configured " + count + " actions for "+ contextPath);
  }
  return count;
}
