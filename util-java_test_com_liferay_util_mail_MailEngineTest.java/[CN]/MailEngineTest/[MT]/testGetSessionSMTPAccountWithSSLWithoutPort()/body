{
  SMTPAccount smtpAccount=new SMTPAccount();
  smtpAccount.setServerName("smtp.liferay.com");
  smtpAccount.setUserName("thiagom");
  smtpAccount.setPassword("");
  smtpAccount.setUseSSL(true);
  Session session=MailEngine.getSession(smtpAccount);
  Properties properties=session.getProperties();
  assertEquals("smtps",properties.get(_MAIL_TRANSPORT_PROTOCOL));
  assertEquals("true",properties.get(_MAIL_SMTPS_AUTH));
  assertEquals(smtpAccount.getServerName(),properties.get(_MAIL_SMTPS_HOST));
  assertEquals(MailEngine.DEFAULT_SMTPS_PORT,properties.get(_MAIL_SMTPS_PORT));
  assertEquals(smtpAccount.getUserName(),properties.get(_MAIL_SMTPS_USER));
  assertEquals(smtpAccount.getPassword(),properties.get(_MAIL_SMTPS_PASSWORD));
  assertEquals("false",properties.get(_MAIL_SMTPS_SOCKETFACTORY_FALLBACK));
  assertEquals("javax.net.ssl.SSLSocketFactory",properties.get(_MAIL_SMTPS_SOCKETFACTORY_CLASS));
  assertEquals(MailEngine.DEFAULT_SMTPS_PORT,properties.get(_MAIL_SMTPS_SOCKETFACTORY_PORT));
}
