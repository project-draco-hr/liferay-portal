{
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  if (!cmd.equals(Constants.UPDATE)) {
    return;
  }
  long rootLayoutId=ParamUtil.getLong(actionRequest,"rootLayoutId");
  String displayDepth=ParamUtil.getString(actionRequest,"displayDepth");
  boolean showHiddenPages=ParamUtil.getBoolean(actionRequest,"showHiddenPages");
  String portletResource=ParamUtil.getString(actionRequest,"portletResource");
  PortletPreferences prefs=PortletPreferencesFactoryUtil.getPortletSetup(actionRequest,portletResource);
  prefs.setValue("root-layout-id",String.valueOf(rootLayoutId));
  prefs.setValue("display-depth",displayDepth);
  prefs.setValue("show-hidden-pages",String.valueOf(showHiddenPages));
  prefs.store();
  SessionMessages.add(actionRequest,portletConfig.getPortletName() + ".doConfigure");
}
