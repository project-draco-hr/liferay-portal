{
  List<Calendar> otherCalendars=new ArrayList<>();
  for (  long calendarId : calendarIds) {
    Calendar calendar=_calendarService.fetchCalendar(calendarId);
    if (calendar == null) {
      continue;
    }
    CalendarResource calendarResource=calendar.getCalendarResource();
    if (!calendarResource.isActive()) {
      continue;
    }
    Group scopeGroup=_themeDisplay.getScopeGroup();
    long scopeGroupId=scopeGroup.getGroupId();
    long scopeLiveGroupId=scopeGroup.getLiveGroupId();
    Group calendarGroup=_groupLocalService.getGroup(calendar.getGroupId());
    long calendarGroupId=calendarGroup.getGroupId();
    if (scopeGroup.isStagingGroup()) {
      if (calendarGroup.isStagingGroup()) {
        if (scopeGroupId != calendarGroupId) {
          calendar=_calendarLocalService.fetchCalendarByUuidAndGroupId(calendar.getUuid(),calendarGroup.getLiveGroupId());
        }
      }
 else       if (scopeLiveGroupId == calendarGroupId) {
        Group stagingGroup=calendarGroup.getStagingGroup();
        calendar=_calendarLocalService.fetchCalendarByUuidAndGroupId(calendar.getUuid(),stagingGroup.getGroupId());
      }
    }
 else     if (calendarGroup.isStagingGroup()) {
      calendar=_calendarLocalService.fetchCalendarByUuidAndGroupId(calendar.getUuid(),calendarGroup.getLiveGroupId());
    }
    if (calendar == null) {
      continue;
    }
    otherCalendars.add(calendar);
  }
  return otherCalendars;
}
