{
  List<Calendar> otherCalendars=new ArrayList<>();
  for (  long calendarId : calendarIds) {
    Calendar calendar=_calendarService.fetchCalendar(calendarId);
    if (calendar == null) {
      continue;
    }
    CalendarResource calendarResource=calendar.getCalendarResource();
    if (!calendarResource.isActive()) {
      continue;
    }
    Group scopeGroup=_themeDisplay.getScopeGroup();
    Group calendarGroup=_groupLocalService.getGroup(calendar.getGroupId());
    if (calendarGroup.isStagingGroup() && (!scopeGroup.isStagingGroup() || (scopeGroup.getGroupId() != calendarGroup.getGroupId()))) {
      calendar=_calendarLocalService.fetchCalendarByUuidAndGroupId(calendar.getUuid(),calendarGroup.getLiveGroupId());
      if (calendar == null) {
        continue;
      }
    }
 else     if (scopeGroup.isStagingGroup() && (scopeGroup.getLiveGroupId() == calendarGroup.getGroupId())) {
      Group stagingGroup=calendarGroup.getStagingGroup();
      calendar=_calendarLocalService.fetchCalendarByUuidAndGroupId(calendar.getUuid(),stagingGroup.getGroupId());
    }
    otherCalendars.add(calendar);
  }
  return otherCalendars;
}
