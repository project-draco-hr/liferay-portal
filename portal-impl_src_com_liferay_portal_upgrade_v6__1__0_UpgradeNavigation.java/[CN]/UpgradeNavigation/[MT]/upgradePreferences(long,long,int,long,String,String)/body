{
  PortletPreferencesImpl preferences=PortletPreferencesSerializer.fromXML(companyId,ownerId,ownerType,plid,portletId,xml);
  String displayStyle=preferences.getValue("display-style",null);
  if (Validator.isNumber(displayStyle)) {
    int index=GetterUtil.getInteger(displayStyle);
    if ((index < 0) || (index > 6)) {
      index=0;
    }
    preferences.setValue("display-style",_DISPLAY_STYLES[index]);
  }
  return PortletPreferencesSerializer.toXML(preferences);
}
