{
  FileEntry fileEntry=fetchFileEntry(themeDisplay.getUserId(),themeDisplay.getScopeGroupId(),folderId,fileName);
  if (fileEntry == null) {
    return fileName;
  }
  int suffix=1;
  for (int i=0; i < _UNIQUE_FILE_NAME_TRIES; i++) {
    String curFileName=FileUtil.appendParentheticalSuffix(fileName,String.valueOf(suffix));
    fileEntry=fetchFileEntry(themeDisplay.getUserId(),themeDisplay.getScopeGroupId(),folderId,curFileName);
    if (fileEntry == null) {
      return curFileName;
    }
    suffix++;
  }
  throw new PortalException("Unable to get a unique file name for " + fileName);
}
