{
  super.init(portletRequestImpl,response,portletName,layout.getCompanyId(),layout.getPlid());
  _portletRequestImpl=portletRequestImpl;
  _portletName=portletName;
  _user=user;
  _layout=layout;
  Portlet portlet=portletRequestImpl.getPortlet();
  PortletApp portletApp=portlet.getPortletApp();
  _publicRenderParameters=PublicRenderParametersPool.get(getHttpServletRequest(),layout.getPlid(),portletApp.isWARFile());
  if (windowState != null) {
    setWindowState(windowState);
  }
  if (portletMode != null) {
    setPortletMode(portletMode);
  }
  _calledSetRenderParameter=false;
}
