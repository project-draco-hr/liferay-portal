{
  Document document=saxReaderUtil.read(content);
  Element rootElement=document.getRootElement();
  rootElement.sortAttributes(true);
  boolean checkNumericalPortletNameElement=!isExcluded(_numericalPortletNameElementExclusions,fileName);
  List<Element> portletElements=rootElement.elements("portlet");
  for (  Element portletElement : portletElements) {
    if (checkNumericalPortletNameElement) {
      Element portletNameElement=portletElement.element("portlet-name");
      String portletNameText=portletNameElement.getText();
      if (!Validator.isNumber(portletNameText)) {
        processErrorMessage(fileName,fileName + " contains a nonstandard portlet-name element " + portletNameText);
      }
    }
    if (fileName.endsWith("/liferay-portlet.xml")) {
      continue;
    }
    portletElement.sortElementsByChildElement("init-param","name");
    Element portletPreferencesElement=portletElement.element("portlet-preferences");
    if (portletPreferencesElement != null) {
      portletPreferencesElement.sortElementsByChildElement("preference","name");
    }
  }
  return document.formattedString();
}
