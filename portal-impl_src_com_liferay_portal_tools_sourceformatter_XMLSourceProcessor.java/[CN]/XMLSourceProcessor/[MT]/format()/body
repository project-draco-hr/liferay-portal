{
  String[] excludes=new String[]{"**\\.bnd\\**","**\\.idea\\**","**\\.ivy\\**","portal-impl\\**\\*.action","portal-impl\\**\\*.function","portal-impl\\**\\*.macro","portal-impl\\**\\*.testcase","tools\\sdk\\**"};
  String[] includes=new String[]{"**\\*.action","**\\*.function","**\\*.macro","**\\*.testcase","**\\*.xml"};
  List<String> exclusions=getExclusions("xml.excludes");
  _friendlyUrlRoutesSortExclusions=getExclusions("friendly.url.routes.sort.excludes");
  _numericalPortletNameElementExclusions=getExclusions("numerical.portlet.name.element.excludes");
  List<String> fileNames=getFileNames(excludes,includes);
  for (  String fileName : fileNames) {
    File file=new File(BASEDIR + fileName);
    fileName=StringUtil.replace(fileName,StringPool.BACK_SLASH,StringPool.SLASH);
    if (isExcluded(exclusions,fileName)) {
      continue;
    }
    String content=fileUtil.read(file);
    String newContent=content;
    if (!fileName.contains("/build")) {
      newContent=trimContent(newContent,false);
    }
    if (fileName.contains("/build") && !fileName.contains("/tools/")) {
      newContent=formatAntXML(fileName,newContent);
    }
 else     if (fileName.endsWith("structures.xml")) {
      newContent=formatDDLStructuresXML(newContent);
    }
 else     if (fileName.endsWith("routes.xml")) {
      newContent=formatFriendlyURLRoutesXML(fileName,newContent);
    }
 else     if (fileName.endsWith("/liferay-portlet.xml") || (portalSource && fileName.endsWith("/portlet-custom.xml")) || (!portalSource && fileName.endsWith("/portlet.xml"))) {
      newContent=formatPortletXML(fileName,newContent);
    }
 else     if (portalSource && (fileName.endsWith(".action") || fileName.endsWith(".function") || fileName.endsWith(".macro")|| fileName.endsWith(".testcase"))) {
      newContent=formatPoshiXML(fileName,newContent);
    }
 else     if (fileName.endsWith("/service.xml")) {
      formatServiceXML(fileName,newContent);
    }
 else     if (portalSource && fileName.endsWith("/struts-config.xml")) {
      formatStrutsConfigXML(fileName,newContent);
    }
 else     if (portalSource && fileName.endsWith("/tiles-defs.xml")) {
      formatTilesDefsXML(fileName,newContent);
    }
 else     if ((portalSource && fileName.endsWith("portal-web/docroot/WEB-INF/web.xml")) || (!portalSource && fileName.endsWith("/web.xml"))) {
      newContent=formatWebXML(fileName,newContent);
    }
    newContent=formatXML(newContent);
    compareAndAutoFixContent(file,fileName,content,newContent);
  }
}
