{
  String newContent=StringUtil.replace(content,"\"/>\n","\" />\n");
  Pattern pattern1=Pattern.compile(">\n\t+<!--[\n ]");
  Pattern pattern2=Pattern.compile("[\t ]-->\n[\t<]");
  for (; ; ) {
    Matcher matcher=pattern1.matcher(newContent);
    if (matcher.find()) {
      String match=matcher.group();
      String replacement=StringUtil.replaceFirst(match,">\n",">\n\n");
      newContent=StringUtil.replace(newContent,match,replacement);
      continue;
    }
    matcher=pattern2.matcher(newContent);
    if (!matcher.find()) {
      break;
    }
    String match=matcher.group();
    String replacement=StringUtil.replaceFirst(match,"-->\n","-->\n\n");
    newContent=StringUtil.replace(newContent,match,replacement);
  }
  return newContent;
}
