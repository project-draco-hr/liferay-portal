{
  DDMForm ddmForm=createDDMForm();
  DDMFormField nameDDMFormField=new DDMFormField("Name","textarea");
  ddmForm.addDDMFormField(nameDDMFormField);
  DDMFormField phoneDDMFormField=new DDMFormField("Phone","text");
  DDMFormField contactDDMFormField=new DDMFormField("Name","text");
  nameDDMFormField.addNestedDDMFormField(phoneDDMFormField);
  nameDDMFormField.addNestedDDMFormField(contactDDMFormField);
  DDMFormField addressDDMFormField=new DDMFormField("ZipCode","text");
  contactDDMFormField.addNestedDDMFormField(addressDDMFormField);
  com.liferay.portlet.dynamicdatamapping.DDMForm copiedForm=BeanPropertiesUtil.deepCopyProperties(com.liferay.portlet.dynamicdatamapping.DDMForm.class,ddmForm);
  Assert.assertEquals(1,copiedForm.getDDMFormFields().size());
  com.liferay.portlet.dynamicdatamapping.DDMFormField formField=copiedForm.getDDMFormFields().get(0);
  Assert.assertEquals("Name",formField.getName());
  Assert.assertEquals("textarea",formField.getType());
  Assert.assertEquals(2,formField.getNestedDDMFormFields().size());
  com.liferay.portlet.dynamicdatamapping.DDMFormField nestedFormField=formField.getNestedDDMFormFields().get(0);
  Assert.assertEquals("Phone",nestedFormField.getName());
  Assert.assertEquals("text",nestedFormField.getType());
  nestedFormField=formField.getNestedDDMFormFields().get(1);
  Assert.assertEquals("Name",nestedFormField.getName());
  Assert.assertEquals("text",nestedFormField.getType());
  Assert.assertEquals(1,formField.getNestedDDMFormFields().get(1).getNestedDDMFormFields().size());
  nestedFormField=formField.getNestedDDMFormFields().get(1).getNestedDDMFormFields().get(0);
  Assert.assertEquals("ZipCode",nestedFormField.getName());
  Assert.assertEquals("text",nestedFormField.getType());
}
