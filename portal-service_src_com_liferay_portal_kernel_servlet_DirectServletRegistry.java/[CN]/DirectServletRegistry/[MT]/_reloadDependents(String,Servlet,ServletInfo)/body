{
  try {
    if (!_reloadDependents) {
      return servlet;
    }
    Method method=ReflectionUtil.getDeclaredMethod(servlet.getClass(),"getDependants");
    Collection<String> dependants=null;
    String jasperVersion=JasperVersionDetector.getJasperVersion();
    if (jasperVersion.contains("7.0")) {
      Map<String,?> dependantsMap=(Map<String,?>)method.invoke(servlet);
      if (dependantsMap != null) {
        dependants=dependantsMap.keySet();
      }
    }
 else {
      dependants=(List<String>)method.invoke(servlet);
    }
    if (dependants == null) {
      return servlet;
    }
    for (    String dependant : dependants) {
      long lastModified=_getFileLastModified(dependant,servlet);
      if ((lastModified == 0) || (lastModified > servletInfo.getLastModified())) {
        _servletInfos.remove(path);
        _updateFileLastModified(path,servlet);
        servlet=null;
        if (_log.isDebugEnabled()) {
          _log.debug("Reload dependent " + dependant);
        }
        break;
      }
    }
  }
 catch (  NoSuchMethodException nsme) {
    if (_log.isWarnEnabled()) {
      _log.warn("Reloading of dependant JSP is disabled because your " + "Servlet container is not a variant of Jasper");
    }
    _reloadDependents=false;
  }
catch (  Exception e) {
    _log.error(e,e);
  }
  return servlet;
}
