{
  Dictionary<String,Object> properties=new HashMapDictionary<String,Object>();
  properties.put("bundle",bundle);
  properties.put("bundle.id",bundle.getBundleId());
  properties.put("bundle.symbolicName",bundle.getSymbolicName());
  properties.put("bundle.version",bundle.getVersion());
  String contextPath=GetterUtil.getString(WabUtil.getWebContextPath(bundle));
  if (collision) {
    properties.put("collision",contextPath);
    List<Long> collidedBundleIds=new ArrayList<Long>();
    BundleContext bundleContext=bundle.getBundleContext();
    for (    Bundle curBundle : bundleContext.getBundles()) {
      if (curBundle.equals(bundle) || (curBundle.getState() != Bundle.ACTIVE)) {
        continue;
      }
      String curContextPath=WabUtil.getWebContextPath(curBundle);
      if ((curContextPath != null) && curContextPath.equals(contextPath)) {
        collidedBundleIds.add(curBundle.getBundleId());
      }
    }
    properties.put("collision.bundles",collidedBundleIds);
  }
  properties.put("context.path",contextPath);
  if (exception != null) {
    properties.put("exception",exception);
  }
  properties.put("extender.bundle",_webExtenderBundle);
  properties.put("extender.bundle.id",_webExtenderBundle.getBundleId());
  properties.put("extender.bundle.symbolicName",_webExtenderBundle.getSymbolicName());
  properties.put("extender.bundle.version",_webExtenderBundle.getVersion());
  String symbolicName=bundle.getSymbolicName();
  properties.put("servlet.context.name",symbolicName.replaceAll("[^a-zA-Z0-9]",""));
  properties.put("timestamp",System.currentTimeMillis());
  Event event=new Event(eventTopic,properties);
  if (_eventAdmin == null) {
    return;
  }
  _eventAdmin.sendEvent(event);
}
