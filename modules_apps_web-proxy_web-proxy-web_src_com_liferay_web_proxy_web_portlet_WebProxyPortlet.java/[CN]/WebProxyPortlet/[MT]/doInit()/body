{
  PortletConfig portletConfig=getPortletConfig();
  PortletContext portletContext=getPortletContext();
  Dictionary<String,Object> properties=new Hashtable<String,Object>();
  properties.put(HttpWhiteboardConstants.HTTP_WHITEBOARD_CONTEXT_SELECT,portletContext.getPortletContextName());
  properties.put(HttpWhiteboardConstants.HTTP_WHITEBOARD_SERVLET_NAME,"Portlet Bridge Servlet");
  properties.put(HttpWhiteboardConstants.HTTP_WHITEBOARD_SERVLET_PATTERN,"/pbhs/*");
  properties.put("servlet.init.mementoSessionKey",portletConfig.getInitParameter("mementoSessionKey"));
  properties.put("servlet.init.cssRegex",portletConfig.getInitParameter("cssRegex"));
  properties.put("servlet.init.jsRegex",portletConfig.getInitParameter("jsRegex"));
  properties.put("servlet.init.ignoreRequestHeaders","accept-encoding,connection,keep-alive");
  properties.put("servlet.init.ignorePostToGetRequestHeaders","content-type,content-length");
  BundleContext bundleContext=_componentContext.getBundleContext();
  _serviceRegistration=bundleContext.registerService(Servlet.class,new PortletBridgeServlet(),properties);
}
