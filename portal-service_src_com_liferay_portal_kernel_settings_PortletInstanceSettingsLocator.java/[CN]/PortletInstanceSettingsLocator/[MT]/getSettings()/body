{
  long companyId=getCompanyId(_layout.getGroupId());
  Settings portalPropertiesSettings=_settingsLocatorHelper.getPortalPropertiesSettings();
  Settings configurationBeanSettings=_settingsLocatorHelper.getConfigurationBeanSettings(_configurationPid,portalPropertiesSettings);
  Settings portalPreferencesSettings=_settingsLocatorHelper.getPortalPreferencesSettings(companyId,configurationBeanSettings);
  Settings companyPortletPreferencesSettings=_settingsLocatorHelper.getCompanyPortletPreferencesSettings(companyId,_portletInstanceKey,portalPreferencesSettings);
  Settings groupPortletPreferencesSettings=_settingsLocatorHelper.getGroupPortletPreferencesSettings(_layout.getGroupId(),_portletInstanceKey,companyPortletPreferencesSettings);
  return _settingsLocatorHelper.getPortletInstancePortletPreferencesSettings(_layout.getCompanyId(),getOwnerId(),PortletKeys.PREFS_OWNER_TYPE_LAYOUT,getPlid(),_portletInstanceKey,groupPortletPreferencesSettings);
}
