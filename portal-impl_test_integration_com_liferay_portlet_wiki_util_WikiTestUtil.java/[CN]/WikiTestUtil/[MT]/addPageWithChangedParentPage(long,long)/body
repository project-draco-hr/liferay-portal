{
  WikiPage initialParentPage=WikiTestUtil.addPage(TestPropsValues.getUserId(),groupId,nodeId,ServiceTestUtil.randomString(),true);
  ServiceContext serviceContext=ServiceTestUtil.getServiceContext(groupId);
  WikiPage childPage=WikiTestUtil.addPage(TestPropsValues.getUserId(),nodeId,ServiceTestUtil.randomString(),ServiceTestUtil.randomString(),initialParentPage.getTitle(),true,serviceContext);
  WikiPage finalParentPage=WikiTestUtil.addPage(TestPropsValues.getUserId(),groupId,nodeId,ServiceTestUtil.randomString(),true);
  WikiPageLocalServiceUtil.changeParent(TestPropsValues.getUserId(),nodeId,childPage.getTitle(),finalParentPage.getTitle(),serviceContext);
  childPage=WikiPageLocalServiceUtil.getPage(nodeId,childPage.getTitle());
  initialParentPage=WikiPageLocalServiceUtil.getPageByPageId(initialParentPage.getPageId());
  finalParentPage=WikiPageLocalServiceUtil.getPageByPageId(finalParentPage.getPageId());
  return new WikiPage[]{childPage,finalParentPage,initialParentPage};
}
