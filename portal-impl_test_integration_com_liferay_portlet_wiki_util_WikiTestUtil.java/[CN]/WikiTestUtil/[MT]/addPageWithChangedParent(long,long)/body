{
  ServiceContext serviceContext=ServiceTestUtil.getServiceContext(groupId);
  WikiPage initialParentPage=WikiTestUtil.addPage(TestPropsValues.getUserId(),groupId,nodeId,"InitialTestParentPage",true);
  WikiPage childPage=WikiTestUtil.addPage(TestPropsValues.getUserId(),nodeId,"TestChildPage",ServiceTestUtil.randomString(),"InitialTestParentPage",true,serviceContext);
  WikiPage finalParentPage=WikiTestUtil.addPage(TestPropsValues.getUserId(),groupId,nodeId,"FinalTestParentPage",true);
  WikiPageLocalServiceUtil.changeParent(TestPropsValues.getUserId(),nodeId,"TestChildPage","FinalTestParentPage",serviceContext);
  childPage=WikiPageLocalServiceUtil.getPage(nodeId,childPage.getTitle());
  initialParentPage=WikiPageLocalServiceUtil.getPageByPageId(initialParentPage.getPageId());
  finalParentPage=WikiPageLocalServiceUtil.getPageByPageId(finalParentPage.getPageId());
  return new WikiPage[]{childPage,finalParentPage,initialParentPage};
}
