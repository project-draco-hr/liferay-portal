{
  Thread currentThread=Thread.currentThread();
  ClassLoader currentClassLoader=currentThread.getContextClassLoader();
  PortalClassLoaderUtil.setClassLoader(currentClassLoader);
  setUpPortalUUIDUtil();
  _quartzSchedulerEngine=new QuartzSchedulerEngine();
  _quartzSchedulerEngine.setJsonFactory(setUpJSONFactory());
  _quartzSchedulerEngine.setMessageBus(setUpMessageBus());
  _quartzSchedulerEngine.setPortletLocalService(setUpPortletLocalService());
  _quartzSchedulerEngine.setProps(setUpProps());
  _quartzSchedulerEngine.setQuartzTriggerFactory(_quartzTriggerFactory);
  ReflectionTestUtil.setFieldValue(_quartzSchedulerEngine,"_memoryScheduler",new MockScheduler(StorageType.MEMORY,_MEMORY_TEST_GROUP_NAME));
  ReflectionTestUtil.setFieldValue(_quartzSchedulerEngine,"_persistedScheduler",new MockScheduler(StorageType.PERSISTED,_PERSISTED_TEST_GROUP_NAME));
  _quartzSchedulerEngine.start();
}
