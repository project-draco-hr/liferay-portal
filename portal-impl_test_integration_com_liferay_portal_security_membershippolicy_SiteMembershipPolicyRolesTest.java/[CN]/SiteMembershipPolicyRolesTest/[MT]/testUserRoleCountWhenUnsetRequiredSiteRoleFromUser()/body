{
  addUsers();
  addRequiredRoles();
  Group group=getGroup();
  UserGroupRoleServiceUtil.addUserGroupRoles(getUserIds()[0],group.getGroupId(),getRequiredRoleIds());
  User user=getUser();
  List<UserGroupRole> expectedUserGroupRoles=UserGroupRoleLocalServiceUtil.getUserGroupRoles(user.getUserId());
  int expectedUserGroupRolesCount=expectedUserGroupRoles.size();
  List<UserGroupRole> emptyNonAbstractList=new ArrayList<UserGroupRole>();
  MembershipPolicyTestUtil.updateUser(getUser(),null,null,null,null,emptyNonAbstractList);
  List<UserGroupRole> currentUserGroupRoles=UserGroupRoleLocalServiceUtil.getUserGroupRoles(user.getUserId());
  int currentUserGroupRolesCount=currentUserGroupRoles.size();
  Assert.assertEquals(expectedUserGroupRoles,currentUserGroupRoles);
}
