{
  long liveGroupId=ParamUtil.getLong(req,"liveGroupId");
  long stagingGroupId=ParamUtil.getLong(req,"stagingGroupId");
  long proposalId=ParamUtil.getLong(req,"proposalId");
  TasksProposal proposal=TasksProposalLocalServiceUtil.getProposal(proposalId);
  Layout layout=LayoutLocalServiceUtil.getLayout(proposal.getClassPK());
  Map<Long,Boolean> layoutIdMap=new LinkedHashMap<Long,Boolean>();
  layoutIdMap.put(new Long(layout.getPlid()),Boolean.FALSE);
  publishLayouts(layoutIdMap,stagingGroupId,liveGroupId,layout.isPrivateLayout());
  TasksProposalServiceUtil.deleteProposal(liveGroupId,proposal.getProposalId());
}
