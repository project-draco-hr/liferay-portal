{
  ModelPermissions modelPermissions=new ModelPermissions();
  for (  String param : parameterMap.keySet()) {
    if (!param.startsWith(MODEL_PERMISSIONS_PREFIX)) {
      continue;
    }
    String roleName=param.substring(MODEL_PERMISSIONS_PREFIX.length());
    String[] actionIds=parameterMap.get(param);
    Role role=null;
    try {
      role=RoleLocalServiceUtil.getRole(CompanyThreadLocal.getCompanyId(),roleName);
    }
 catch (    PortalException pe) {
      if (_log.isInfoEnabled()) {
        _log.info("Couldn't find role named " + roleName + ". Ignoring it.");
      }
      continue;
    }
    modelPermissions.addRolePermissions(role,actionIds);
  }
  return modelPermissions;
}
