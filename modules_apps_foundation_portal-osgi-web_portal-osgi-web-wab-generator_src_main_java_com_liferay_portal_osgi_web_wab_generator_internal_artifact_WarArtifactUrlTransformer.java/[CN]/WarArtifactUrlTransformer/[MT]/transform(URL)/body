{
  if ("file".equals(artifact.getProtocol()) && ManifestUtil.isValidOSGiBundle(artifact.getPath())) {
    return artifact;
  }
  String path=artifact.getPath();
  int x=path.lastIndexOf('/');
  int y=path.lastIndexOf(".war");
  String contextName=path.substring(x + 1,y);
  Matcher matcher=_pattern.matcher(contextName);
  if (matcher.matches()) {
    contextName=matcher.group(1);
  }
  String pathWithQueryString=artifact.getPath() + "?Web-ContextPath=/" + contextName;
  URL url=new URL("file",null,pathWithQueryString);
  url=new URL("webbundle",null,url.toString());
  return url;
}
