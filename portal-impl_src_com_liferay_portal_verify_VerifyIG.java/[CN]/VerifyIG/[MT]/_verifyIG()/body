{
  long classNameId=ClassNameLocalServiceUtil.getClassName(IGImage.class.getName()).getClassNameId();
  DetachedCriteria existingTagsAssetEntriesIds=DetachedCriteria.forClass(TagsAssetImpl.class,"ta").add(Property.forName("ta.classNameId").eq(new Long(classNameId))).setProjection(Property.forName("ta.classPK"));
  DetachedCriteria entriesWithMissingTagsAssets=DetachedCriteria.forClass(IGImageImpl.class,"igi").add(Restrictions.not(Subqueries.propertyIn("igi.imageId",existingTagsAssetEntriesIds)));
  DynamicQueryInitializer dqi=new DynamicQueryInitializerImpl(entriesWithMissingTagsAssets);
  try {
    List entries=IGImageLocalServiceUtil.dynamicQuery(dqi);
    if (_log.isDebugEnabled()) {
      _log.debug("Processing " + entries.size() + " entries");
    }
    for (int i=0; i < entries.size(); i++) {
      IGImage image=(IGImage)entries.get(i);
      Image largeImage=ImageLocalUtil.getImage(image.getLargeImageId());
      TagsAssetLocalServiceUtil.updateAsset(image.getUserId(),IGImage.class.getName(),image.getImageId(),new String[0],null,null,null,null,largeImage.getType(),image.getDescription(),image.getDescription(),image.getDescription(),null,largeImage.getHeight(),largeImage.getWidth());
    }
  }
 catch (  SystemException se) {
    _log.error(se);
  }
  if (_log.isDebugEnabled()) {
    _log.debug("TagsAssets verified for IG Image entries");
  }
}
