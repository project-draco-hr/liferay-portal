{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  String portletResource=ParamUtil.getString(actionRequest,"portletResource");
  Portlet portlet=PortletLocalServiceUtil.getPortletById(themeDisplay.getCompanyId(),portletResource);
  PermissionPropagator permissionPropagator=portlet.getPermissionPropagatorInstance();
  if (permissionPropagator != null && PropsValues.PERMISSIONS_PROPAGATION_ENABLED) {
    permissionPropagator.propagateRolePermissions(actionRequest);
  }
}
