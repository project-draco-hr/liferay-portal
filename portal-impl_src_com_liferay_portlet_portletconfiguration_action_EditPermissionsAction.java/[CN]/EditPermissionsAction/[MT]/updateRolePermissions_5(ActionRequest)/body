{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long resourceId=ParamUtil.getLong(actionRequest,"resourceId");
  long[] roleIds=StringUtil.split(ParamUtil.getString(actionRequest,"rolesSearchContainerPrimaryKeys"),0L);
  Map<Long,String[]> roleIdsToActionIds=new HashMap<Long,String[]>();
  for (  long roleId : roleIds) {
    String[] actionIds=getActionIds(actionRequest,roleId,false);
    roleIdsToActionIds.put(roleId,actionIds);
  }
  PermissionServiceUtil.setIndividualPermissions(themeDisplay.getScopeGroupId(),themeDisplay.getCompanyId(),roleIdsToActionIds,resourceId);
}
