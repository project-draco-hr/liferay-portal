{
  Layout layout=(Layout)req.getAttribute(WebKeys.LAYOUT);
  long resourceId=ParamUtil.getLong(req,"resourceId");
  long groupId=ParamUtil.getLong(req,"groupId");
  String[] actionIds=StringUtil.split(ParamUtil.getString(req,"groupIdActionIds"));
  PermissionServiceUtil.setGroupPermissions(groupId,actionIds,resourceId);
  if (!layout.isPrivateLayout()) {
    Resource resource=ResourceLocalServiceUtil.getResource(resourceId);
    if (resource.getPrimKey().startsWith(layout.getPlid() + PortletConstants.LAYOUT_SEPARATOR)) {
      LayoutCacheUtil.clearCache(layout.getCompanyId());
    }
  }
}
