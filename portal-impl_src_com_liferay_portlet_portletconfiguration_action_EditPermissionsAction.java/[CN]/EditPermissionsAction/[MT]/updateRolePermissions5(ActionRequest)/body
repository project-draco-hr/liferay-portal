{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  Layout layout=themeDisplay.getLayout();
  long resourceId=ParamUtil.getLong(actionRequest,"resourceId");
  String modelResource=ParamUtil.getString(actionRequest,"modelResource");
  List<Role> roles=ResourceActionsUtil.getRoles(layout.getGroup(),modelResource);
  for (  Role role : roles) {
    String[] actionIds=getActionIds(actionRequest,role.getRoleId());
    PermissionServiceUtil.setRolePermissions(role.getRoleId(),themeDisplay.getScopeGroupId(),actionIds,resourceId);
  }
}
