{
  StringMaker sm=new StringMaker();
  Iterator itr=ImageLocalServiceUtil.search(COMPANY_ID + "%").iterator();
  while (itr.hasNext()) {
    Image image=(Image)itr.next();
    String imageId=image.getImageId();
    boolean insert=true;
    if (imageId.startsWith("liferay.com.")) {
      String suffix=StringUtil.replace(imageId,"liferay.com.","");
      if (Validator.isNumber(suffix)) {
        insert=false;
      }
    }
    if (imageId.indexOf(".image_gallery.") != -1) {
      insert=false;
    }
    if ((imageId.indexOf(".shopping.item.") != -1)) {
      insert=false;
    }
    if (insert) {
      sm.append("insert into Image (");
      sm.append("imageId, modifiedDate, text_, type_");
      sm.append(") values (");
      addColumn(sm,image.getImageId());
      addColumn(sm,image.getModifiedDate());
      addColumn(sm,image.getText(),false);
      addColumn(sm,image.getType());
      removeTrailingComma(sm);
      sm.append(");\n");
    }
  }
  removeTrailingNewLine(sm);
  zipWriter.addEntry("portal-data-image.sql",sm);
}
