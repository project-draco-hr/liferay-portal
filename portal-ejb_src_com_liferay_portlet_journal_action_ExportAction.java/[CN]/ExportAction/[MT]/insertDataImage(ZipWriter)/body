{
  StringBuffer sb=new StringBuffer();
  Iterator itr=ImageLocalServiceUtil.search(COMPANY_ID + "%").iterator();
  while (itr.hasNext()) {
    Image image=(Image)itr.next();
    String imageId=image.getImageId();
    boolean insert=true;
    if (imageId.startsWith("liferay.com.")) {
      String suffix=StringUtil.replace(imageId,"liferay.com.","");
      if (Validator.isNumber(suffix)) {
        insert=false;
      }
    }
    if (imageId.indexOf(".image_gallery.") != -1) {
      insert=false;
    }
    if ((imageId.indexOf(".shopping.item.") != -1)) {
      insert=false;
    }
    if (insert) {
      sb.append("insert into Image (");
      sb.append("imageId, modifiedDate, text_");
      sb.append(") values (");
      addColumn(sb,image.getImageId());
      addColumn(sb,image.getModifiedDate());
      addColumn(sb,image.getText(),false);
      removeTrailingComma(sb);
      sb.append(");\n");
    }
  }
  removeTrailingNewLine(sb);
  zipWriter.addEntry("portal-data-image.sql",sb);
}
