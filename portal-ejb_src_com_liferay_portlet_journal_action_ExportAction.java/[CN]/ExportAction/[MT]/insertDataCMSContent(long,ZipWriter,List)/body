{
  StringBuffer sb=new StringBuffer();
  List igImages=new ArrayList();
  Iterator itr=IGFolderLocalServiceUtil.getFolders(cmsGroupId).iterator();
  while (itr.hasNext()) {
    IGFolder folder=(IGFolder)itr.next();
    sb.append("insert into IGFolder (");
    sb.append("folderId, groupId, companyId, userId, createDate, ");
    sb.append("modifiedDate, parentFolderId, name");
    sb.append(") values (");
    addColumn(sb,folder.getFolderId());
    addColumn(sb,folder.getGroupId());
    addColumn(sb,folder.getCompanyId());
    addColumn(sb,folder.getUserId());
    addColumn(sb,folder.getCreateDate());
    addColumn(sb,folder.getModifiedDate());
    addColumn(sb,folder.getParentFolderId());
    addColumn(sb,folder.getName());
    removeTrailingComma(sb);
    sb.append(");\n");
    igImages.addAll(IGImageLocalServiceUtil.getImages(folder.getFolderId()));
  }
  Collections.sort(igImages);
  itr=igImages.iterator();
  while (itr.hasNext()) {
    IGImage image=(IGImage)itr.next();
    sb.append("insert into IGImage (");
    sb.append("imageId, companyId, userId, createDate, modifiedDate, ");
    sb.append("folderId, description, height, width, size_");
    sb.append(") values (");
    addColumn(sb,image.getImageId());
    addColumn(sb,image.getCompanyId());
    addColumn(sb,image.getUserId());
    addColumn(sb,image.getCreateDate());
    addColumn(sb,image.getModifiedDate());
    addColumn(sb,image.getFolderId());
    addColumn(sb,image.getDescription());
    addColumn(sb,image.getHeight());
    addColumn(sb,image.getWidth());
    addColumn(sb,image.getSize());
    removeTrailingComma(sb);
    sb.append(");\n");
  }
  itr=JournalArticleLocalServiceUtil.getArticles(cmsGroupId).iterator();
  while (itr.hasNext()) {
    JournalArticle article=(JournalArticle)itr.next();
    if (article.isApproved() && JournalArticleLocalServiceUtil.isLatestVersion(article.getCompanyId(),article.getGroupId(),article.getArticleId(),article.getVersion())) {
      sb.append("insert into JournalArticle (");
      sb.append("companyId, groupId, articleId, version, userId, ");
      sb.append("userName, createDate, modifiedDate, title, ");
      sb.append("description, content, type_, structureId, ");
      sb.append("templateId, displayDate, approved, ");
      sb.append("approvedByUserId, approvedByUserName, expired");
      sb.append(") values (");
      addColumn(sb,article.getCompanyId());
      addColumn(sb,article.getGroupId());
      addColumn(sb,article.getArticleId());
      addColumn(sb,JournalArticleImpl.DEFAULT_VERSION);
      addColumn(sb,"liferay.com.1");
      addColumn(sb,"Joe Bloggs");
      addColumn(sb,article.getCreateDate());
      addColumn(sb,article.getModifiedDate());
      addColumn(sb,article.getTitle());
      addColumn(sb,article.getDescription());
      addColumn(sb,article.getContent());
      addColumn(sb,article.getType());
      addColumn(sb,article.getStructureId());
      addColumn(sb,article.getTemplateId());
      addColumn(sb,article.getDisplayDate(),false);
      addColumn(sb,article.getApproved());
      addColumn(sb,"liferay.com.1");
      addColumn(sb,"Joe Bloggs");
      addColumn(sb,article.getExpired());
      removeTrailingComma(sb);
      sb.append(");\n");
    }
  }
  sb.append("\n");
  itr=journalContentSearches.iterator();
  while (itr.hasNext()) {
    JournalContentSearch contentSearch=(JournalContentSearch)itr.next();
    sb.append("insert into JournalContentSearch (");
    sb.append("portletId, layoutId, ownerId, articleId, companyId, ");
    sb.append("groupId");
    sb.append(") values (");
    addColumn(sb,contentSearch.getPortletId());
    addColumn(sb,contentSearch.getLayoutId());
    addColumn(sb,contentSearch.getOwnerId());
    addColumn(sb,contentSearch.getArticleId());
    addColumn(sb,contentSearch.getCompanyId());
    addColumn(sb,contentSearch.getGroupId());
    removeTrailingComma(sb);
    sb.append(");\n");
  }
  sb.append("\n");
  itr=JournalStructureLocalServiceUtil.getStructures(cmsGroupId).iterator();
  while (itr.hasNext()) {
    JournalStructure structure=(JournalStructure)itr.next();
    sb.append("insert into JournalStructure (");
    sb.append("companyId, structureId, groupId, userId, userName, ");
    sb.append("createDate, modifiedDate, name, description, xsd");
    sb.append(") values (");
    addColumn(sb,structure.getCompanyId());
    addColumn(sb,structure.getStructureId());
    addColumn(sb,structure.getGroupId());
    addColumn(sb,structure.getUserId());
    addColumn(sb,structure.getUserName());
    addColumn(sb,structure.getCreateDate());
    addColumn(sb,structure.getModifiedDate());
    addColumn(sb,structure.getName());
    addColumn(sb,structure.getDescription());
    addColumn(sb,structure.getXsd());
    removeTrailingComma(sb);
    sb.append(");\n");
  }
  sb.append("\n");
  itr=JournalTemplateLocalServiceUtil.getTemplates(cmsGroupId).iterator();
  while (itr.hasNext()) {
    JournalTemplate template=(JournalTemplate)itr.next();
    sb.append("insert into JournalTemplate (");
    sb.append("companyId, templateId, groupId, userId, userName, ");
    sb.append("createDate, modifiedDate, structureId, name, ");
    sb.append("description, xsl, langType, smallImage, smallImageURL");
    sb.append(") values (");
    addColumn(sb,template.getCompanyId());
    addColumn(sb,template.getTemplateId());
    addColumn(sb,template.getGroupId());
    addColumn(sb,template.getUserId());
    addColumn(sb,template.getUserName());
    addColumn(sb,template.getCreateDate());
    addColumn(sb,template.getModifiedDate());
    addColumn(sb,template.getStructureId());
    addColumn(sb,template.getName());
    addColumn(sb,template.getDescription());
    addColumn(sb,template.getXsl());
    addColumn(sb,template.getLangType());
    addColumn(sb,template.getSmallImage());
    addColumn(sb,template.getSmallImageURL());
    removeTrailingComma(sb);
    sb.append(");\n");
  }
  removeTrailingNewLine(sb);
  zipWriter.addEntry("portal-data-cms-content.sql",sb);
}
