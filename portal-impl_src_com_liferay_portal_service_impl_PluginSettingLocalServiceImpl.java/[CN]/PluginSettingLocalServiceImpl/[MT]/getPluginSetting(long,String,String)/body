{
  PluginSetting pluginSetting=pluginSettingPersistence.fetchByC_I_T(companyId,pluginId,pluginType);
  if (pluginSetting != null) {
    return pluginSetting;
  }
  Plugin plugin=null;
  if (pluginType.equals(Plugin.TYPE_LAYOUT_TEMPLATE)) {
    plugin=layoutTemplateLocalService.getLayoutTemplate(pluginId,false,null);
  }
 else   if (pluginType.equals(Plugin.TYPE_THEME)) {
    plugin=themeLocalService.getTheme(companyId,pluginId);
  }
  if ((plugin == null) || (plugin.getDefaultPluginSetting() == null)) {
    pluginSetting=getDefaultPluginSetting();
    pluginSetting.setCompanyId(companyId);
  }
 else {
    pluginSetting=plugin.getDefaultPluginSetting(companyId);
  }
  return pluginSetting;
}
