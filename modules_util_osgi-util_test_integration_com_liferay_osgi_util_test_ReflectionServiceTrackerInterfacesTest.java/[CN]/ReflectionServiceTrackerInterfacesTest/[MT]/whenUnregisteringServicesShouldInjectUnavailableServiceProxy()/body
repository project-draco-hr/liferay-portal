{
  TestInterface testInterface=new TestInterface();
  ReflectionServiceTracker reflectionServiceTracker=new ReflectionServiceTracker(testInterface);
  TrackedOne trackedOne=new TrackedOne();
  ServiceRegistration<InterfaceOne> sr1=registerServiceWithRanking(InterfaceOne.class,trackedOne,0);
  TrackedTwo trackedTwo=new TrackedTwo();
  ServiceRegistration<InterfaceTwo> sr2=registerServiceWithRanking(InterfaceTwo.class,trackedTwo,0);
  sr1.unregister();
  sr2.unregister();
  Assert.assertNotNull(testInterface.getTrackedOne());
  Assert.assertNotNull(testInterface.getTrackedTwo());
  try {
    testInterface.getTrackedOne().noop();
    Assert.fail("Should throw UnavailableServiceException");
  }
 catch (  UnavailableServiceException sue) {
    Assert.assertEquals(InterfaceOne.class,sue.getUnavailableServiceClass());
  }
  try {
    testInterface.getTrackedTwo().noop2();
    Assert.fail("Should throw UnavailableServiceException");
  }
 catch (  UnavailableServiceException sue) {
    Assert.assertEquals(InterfaceTwo.class,sue.getUnavailableServiceClass());
  }
  reflectionServiceTracker.close();
}
