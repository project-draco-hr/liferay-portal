{
  try {
    String login=ParamUtil.getString(req,getLoginParam());
    if (Validator.isNull(login)) {
      return null;
    }
    String password=ParamUtil.getString(req,getPasswordParam());
    if (Validator.isNull(password)) {
      return null;
    }
    Company company=PortalUtil.getCompany(req);
    String authType=company.getAuthType();
    long userId=0;
    if (authType.equals(CompanyConstants.AUTH_TYPE_EA)) {
      userId=UserLocalServiceUtil.getUserIdByEmailAddress(company.getCompanyId(),login);
    }
 else     if (authType.equals(CompanyConstants.AUTH_TYPE_SN)) {
      userId=UserLocalServiceUtil.getUserIdByScreenName(company.getCompanyId(),login);
    }
 else     if (authType.equals(CompanyConstants.AUTH_TYPE_ID)) {
      userId=GetterUtil.getLong(login);
    }
 else {
      return null;
    }
    String[] credentials=new String[]{String.valueOf(userId),password,Boolean.FALSE.toString()};
    return credentials;
  }
 catch (  Exception e) {
    throw new AutoLoginException(e);
  }
}
