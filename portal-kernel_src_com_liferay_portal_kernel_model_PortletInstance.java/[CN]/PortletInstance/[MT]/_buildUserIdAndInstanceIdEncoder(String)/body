{
  if (userIdAndInstanceId == null) {
    throw new InvalidParameterException("User ID and instance ID are null");
  }
  if (userIdAndInstanceId.isEmpty()) {
    return new UserIdAndInstanceIdEncoder(0,null);
  }
  int slashCount=StringUtil.count(userIdAndInstanceId,StringPool.SLASH);
  if (slashCount > 0) {
    throw new InvalidParameterException("User ID and instance ID contain slashes");
  }
  int underlineCount=StringUtil.count(userIdAndInstanceId,StringPool.UNDERLINE);
  if (underlineCount > 1) {
    throw new InvalidParameterException("User ID and instance ID has more than one underscore");
  }
  if (underlineCount == 1) {
    int index=userIdAndInstanceId.indexOf(CharPool.UNDERLINE);
    long userId=GetterUtil.getLong(userIdAndInstanceId.substring(0,index),-1);
    if (userId == -1) {
      throw new InvalidParameterException("User ID is not a number");
    }
    String instanceId=null;
    if (index < (userIdAndInstanceId.length() - 1)) {
      instanceId=userIdAndInstanceId.substring(index + 1);
    }
    return new UserIdAndInstanceIdEncoder(userId,instanceId);
  }
  return new UserIdAndInstanceIdEncoder(0,userIdAndInstanceId);
}
