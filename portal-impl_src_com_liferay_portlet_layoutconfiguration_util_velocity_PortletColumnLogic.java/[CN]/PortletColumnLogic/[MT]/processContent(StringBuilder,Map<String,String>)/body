{
  LayoutTypePortlet layoutTypePortlet=_themeDisplay.getLayoutTypePortlet();
  String columnId=attributes.get("id");
  List<Portlet> portlets=layoutTypePortlet.getAllPortlets(columnId);
  String columnCssClass="lfr-portlet-column";
  if (portlets.size() == 0) {
    columnCssClass+=" empty";
  }
  String additionalClassNames=attributes.get("classNames");
  if (Validator.isNotNull(additionalClassNames)) {
    columnCssClass+=" " + additionalClassNames;
  }
  sb.append("<div class=\"");
  sb.append(columnCssClass);
  sb.append("\" id=\"layout-column_");
  sb.append(columnId);
  sb.append("\">");
  for (int i=0; i < portlets.size(); i++) {
    Portlet portlet=portlets.get(i);
    String queryString=null;
    Integer columnPos=new Integer(i);
    Integer columnCount=new Integer(portlets.size());
    String path=null;
    if (_parallelRenderEnable) {
      path="/html/portal/load_render_portlet.jsp";
      if (portlet.getRenderWeight() >= 1) {
        _portletsMap.put(portlet,new Object[]{queryString,columnId,columnPos,columnCount});
      }
    }
    RuntimePortletUtil.processPortlet(sb,_servletContext,_request,_response,portlet,queryString,columnId,columnPos,columnCount,path);
  }
  sb.append("</div>");
}
