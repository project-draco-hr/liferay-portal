{
  if (!_monitoringConfiguration.monitorPortalRequest()) {
    return;
  }
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  DataSample dataSample=_dataSampleFactory.createPortalRequestDataSample(themeDisplay.getCompanyId(),request.getRemoteUser(),request.getRequestURI(),request.getRequestURL().toString() + ".jsp_display");
  dataSample.setDescription("Portal Request");
  dataSample.prepare();
  DataSampleThreadLocal.initialize();
  request.setAttribute(MonitoringWebKeys.PORTAL_REQUEST_DATA_SAMPLE,dataSample);
}
