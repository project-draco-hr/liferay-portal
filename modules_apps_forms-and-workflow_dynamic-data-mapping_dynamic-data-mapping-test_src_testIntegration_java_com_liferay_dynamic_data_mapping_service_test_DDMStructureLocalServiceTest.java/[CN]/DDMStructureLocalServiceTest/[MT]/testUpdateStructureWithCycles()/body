{
  DDMStructure structureNode1=addStructure(_classNameId,"Test Structure1");
  DDMStructure structureNode2=addStructure(_classNameId,"Test Structure2");
  DDMStructure structureNode3=addStructure(_classNameId,"Test Structure3");
  structureNode2.setParentStructureId(structureNode1.getStructureId());
  structureNode2.setDDMForm(createDDMFormWithOneField("FieldNode2","select","string"));
  updateStructure(structureNode2);
  structureNode3.setParentStructureId(structureNode2.getStructureId());
  structureNode3.setDDMForm(createDDMFormWithOneField("FieldNode3","select","string"));
  updateStructure(structureNode3);
  structureNode1.setParentStructureId(structureNode3.getStructureId());
  structureNode1.setDDMForm(createDDMFormWithOneField("FieldNode1","select","string"));
  Exception expectedException=null;
  try {
    updateStructure(structureNode1);
  }
 catch (  Exception e) {
    expectedException=e;
  }
  Assert.assertNotNull(expectedException);
  Assert.assertEquals(expectedException.getClass(),StructureDefinitionException.class);
  Assert.assertTrue(expectedException.getMessage().contains("cycle"));
}
