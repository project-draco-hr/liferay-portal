{
  DDMStructure structureNode1=addStructure(0,_classNameId,null,"Test Structure1",null,read("ddm-structure-text-field.xsd"),StorageType.JSON.getValue(),DDMStructureConstants.TYPE_DEFAULT);
  DDMStructure structureNode2=addStructure(structureNode1.getStructureId(),_classNameId,null,"Test Structure2",null,read("ddm-structure-radio-field.xsd"),StorageType.JSON.getValue(),DDMStructureConstants.TYPE_DEFAULT);
  DDMStructure structureNode3=addStructure(structureNode2.getStructureId(),_classNameId,null,"Test Structure3",null,read("ddm-structure-select-field.xsd"),StorageType.JSON.getValue(),DDMStructureConstants.TYPE_DEFAULT);
  structureNode1.setParentStructureId(structureNode3.getStructureId());
  Exception expectedException=null;
  try {
    updateStructure(structureNode1);
  }
 catch (  Exception e) {
    expectedException=e;
  }
  Assert.assertNotNull(expectedException);
  Assert.assertEquals(expectedException.getClass(),StructureDefinitionException.class);
  Assert.assertTrue(expectedException.getMessage().contains("cycle"));
}
