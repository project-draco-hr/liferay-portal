{
  DDMForm ddmForm=DDMFormTestUtil.createDDMForm();
  DDMFormField ddmFormField=new DDMFormField("Field","select");
  ddmFormField.setDataType("string");
  long ddmDataProviderInstanceId=RandomTestUtil.randomLong();
  ddmFormField.setProperty("ddmDataProviderInstanceId",ddmDataProviderInstanceId);
  ddmForm.addDDMFormField(ddmFormField);
  DDMStructure structure=ddmStructureTestHelper.addStructure(ddmForm,StorageType.JSON.getValue());
  DDMDataProviderInstanceLink dataProviderInstanceLink=DDMDataProviderInstanceLinkLocalServiceUtil.fetchDataProviderInstanceLink(ddmDataProviderInstanceId,structure.getStructureId());
  Assert.assertNotNull(dataProviderInstanceLink);
  DDMStructureLocalServiceUtil.deleteStructure(structure);
  dataProviderInstanceLink=DDMDataProviderInstanceLinkLocalServiceUtil.fetchDataProviderInstanceLink(ddmDataProviderInstanceId,structure.getStructureId());
  Assert.assertNull(dataProviderInstanceLink);
}
