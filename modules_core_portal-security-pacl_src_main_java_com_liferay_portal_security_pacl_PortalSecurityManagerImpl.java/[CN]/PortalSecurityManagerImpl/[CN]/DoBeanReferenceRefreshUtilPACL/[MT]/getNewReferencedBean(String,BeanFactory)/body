{
  Object newReferencedBean=null;
  try {
    newReferencedBean=beanFactory.getBean(referencedBeanName);
  }
 catch (  NoSuchBeanDefinitionException nsbde) {
    newReferencedBean=PortalBeanLocatorUtil.locate(referencedBeanName);
  }
  Object doPrivilegedBean=_doPrivilegedBeans.get(newReferencedBean);
  if ((doPrivilegedBean == null) && DoPrivilegedFactory.isEarlyBeanReference(referencedBeanName)) {
    doPrivilegedBean=DoPrivilegedFactory.wrap(newReferencedBean);
    _doPrivilegedBeans.put(newReferencedBean,doPrivilegedBean);
  }
  if (doPrivilegedBean != null) {
    newReferencedBean=doPrivilegedBean;
  }
  return newReferencedBean;
}
