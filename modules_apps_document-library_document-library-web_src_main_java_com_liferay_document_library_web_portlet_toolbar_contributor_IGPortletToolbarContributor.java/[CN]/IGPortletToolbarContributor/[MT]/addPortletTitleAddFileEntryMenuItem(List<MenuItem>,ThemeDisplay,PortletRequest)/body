{
  URLMenuItem urlMenuItem=new URLMenuItem();
  urlMenuItem.setLabel(LanguageUtil.get(PortalUtil.getHttpServletRequest(portletRequest),"add-file-entry"));
  Folder folder=_getFolder(themeDisplay,portletRequest);
  if ((folder != null) && !folder.isMountPoint() && containsPermission(themeDisplay.getPermissionChecker(),themeDisplay.getScopeGroupId(),folder.getFolderId(),ActionKeys.ADD_DOCUMENT)) {
    PortletURL portletURL=_getAddFileEntryPortletURL(themeDisplay,portletRequest,folder.getFolderId(),folder.getRepositoryId());
    urlMenuItem.setURL(portletURL.toString());
    menuItems.add(urlMenuItem);
  }
 else   if ((folder == null) && containsPermission(themeDisplay.getPermissionChecker(),themeDisplay.getScopeGroupId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,ActionKeys.ADD_DOCUMENT)) {
    PortletURL portletURL=_getAddFileEntryPortletURL(themeDisplay,portletRequest,DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,themeDisplay.getScopeGroupId());
    urlMenuItem.setURL(portletURL.toString());
    menuItems.add(urlMenuItem);
  }
}
