{
  URLMenuItem urlMenuItem=new URLMenuItem();
  Folder folder=_getFolder(themeDisplay,portletRequest);
  if ((folder != null) && containsPermission(themeDisplay.getPermissionChecker(),themeDisplay.getScopeGroupId(),folder.getFolderId(),ActionKeys.ADD_FOLDER) && !folder.isMountPoint()) {
    urlMenuItem.setLabel(LanguageUtil.get(PortalUtil.getHttpServletRequest(portletRequest),"add-subfolder"));
    PortletURL portletURL=_getAddFolderPortletURL(themeDisplay,portletRequest,folder.getFolderId(),folder.getRepositoryId());
    urlMenuItem.setURL(portletURL.toString());
    menuItems.add(urlMenuItem);
  }
 else   if ((folder == null) && containsPermission(themeDisplay.getPermissionChecker(),themeDisplay.getScopeGroupId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,ActionKeys.ADD_FOLDER)) {
    urlMenuItem.setLabel(LanguageUtil.get(PortalUtil.getHttpServletRequest(portletRequest),"add-folder"));
    PortletURL portletURL=_getAddFolderPortletURL(themeDisplay,portletRequest,DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,themeDisplay.getScopeGroupId());
    urlMenuItem.setURL(portletURL.toString());
    menuItems.add(urlMenuItem);
  }
}
