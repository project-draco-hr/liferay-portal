{
  URLMenuItem urlMenuItem=new URLMenuItem();
  urlMenuItem.setLabel(LanguageUtil.get(PortalUtil.getHttpServletRequest(portletRequest),"add-shortcut"));
  Folder folder=_getFolder(themeDisplay,portletRequest);
  if ((folder != null) && !folder.isMountPoint() && folder.isSupportsShortcuts()&& containsPermission(themeDisplay.getPermissionChecker(),themeDisplay.getScopeGroupId(),folder.getFolderId(),ActionKeys.ADD_SHORTCUT)) {
    PortletURL portletURL=_getShortcutPortletURL(themeDisplay,portletRequest,folder.getFolderId(),folder.getRepositoryId());
    urlMenuItem.setURL(portletURL.toString());
    menuItems.add(urlMenuItem);
  }
 else   if ((folder == null) && containsPermission(themeDisplay.getPermissionChecker(),themeDisplay.getScopeGroupId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,ActionKeys.ADD_SHORTCUT)) {
    PortletURL portletURL=_getShortcutPortletURL(themeDisplay,portletRequest,DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,themeDisplay.getScopeGroupId());
    urlMenuItem.setURL(portletURL.toString());
    menuItems.add(urlMenuItem);
  }
}
