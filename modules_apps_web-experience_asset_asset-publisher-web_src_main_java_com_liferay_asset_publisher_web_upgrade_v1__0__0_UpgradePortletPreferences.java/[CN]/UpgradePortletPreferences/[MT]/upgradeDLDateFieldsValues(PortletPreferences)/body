{
  long fileEntryTypeId=GetterUtil.getLong(portletPreferences.getValue(_DL_CLASS_TYPE,"0"));
  if (fileEntryTypeId > 0) {
    long fileEntryTypeClassNameId=PortalUtil.getClassNameId(DLFileEntryType.class);
    try (PreparedStatement ps=connection.prepareStatement("select structureId from DDMStructureLink where " + "classNameId = ? and classPK = ?")){
      ps.setLong(1,fileEntryTypeClassNameId);
      ps.setLong(2,fileEntryTypeId);
      try (ResultSet rs=ps.executeQuery()){
        String selectedFieldName=GetterUtil.getString(portletPreferences.getValue(_DDM_STRUCTURE_FIELD_NAME,null));
        while (rs.next()) {
          long structureId=rs.getLong("structureId");
          DDMForm ddmForm=getDDMForm(structureId);
          if (isDateField(ddmForm,selectedFieldName)) {
            transformDateFieldValue(portletPreferences);
            break;
          }
        }
      }
     }
   }
}
