{
  ClassLoader contextClassLoader=PACLClassLoaderUtil.getContextClassLoader();
  ClassLoader portalClassLoader=PACLClassLoaderUtil.getPortalClassLoader();
  if (contextClassLoader == portalClassLoader) {
    return contextClassLoader;
  }
 else {
    Map<String,Class<?>> classMap=new HashMap<String,Class<?>>();
    try {
      for (      String className : _PRELOAD_CLASS_NAMES) {
        Class<?> hibernateProxyClass=portalClassLoader.loadClass(className);
        classMap.put(className,hibernateProxyClass);
      }
    }
 catch (    ClassNotFoundException cnfe) {
      throw new RuntimeException(cnfe);
    }
    return new PreloadClassLoader(contextClassLoader,classMap);
  }
}
