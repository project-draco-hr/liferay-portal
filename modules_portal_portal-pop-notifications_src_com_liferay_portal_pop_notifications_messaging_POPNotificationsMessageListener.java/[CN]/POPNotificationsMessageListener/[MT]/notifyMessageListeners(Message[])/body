{
  if (_log.isDebugEnabled()) {
    _log.debug("Messages " + messages.length);
  }
  for (  Message message : messages) {
    if (_log.isDebugEnabled()) {
      _log.debug("Message " + message);
    }
    String from=getEmailAddress(message.getFrom());
    String recipient=getEmailAddress(message.getRecipients(RecipientType.TO));
    if (_log.isDebugEnabled()) {
      _log.debug("From " + from);
      _log.debug("Recipient " + recipient);
    }
    for (    MessageListener messageListener : _messageListeners.values()) {
      try {
        if (messageListener.accept(from,recipient,message)) {
          messageListener.deliver(from,recipient,message);
        }
      }
 catch (      MessageListenerException mle) {
        _log.error(mle,mle);
      }
    }
  }
}
