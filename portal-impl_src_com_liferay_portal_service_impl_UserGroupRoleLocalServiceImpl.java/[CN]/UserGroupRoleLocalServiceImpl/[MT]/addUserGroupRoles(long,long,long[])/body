{
  checkGroupResource(groupId);
  for (  long roleId : roleIds) {
    UserGroupRolePK pk=new UserGroupRolePK(userId,groupId,roleId);
    UserGroupRole userGroupRole=userGroupRolePersistence.fetchByPrimaryKey(pk);
    if (userGroupRole == null) {
      userGroupRole=userGroupRolePersistence.create(pk);
      userGroupRolePersistence.update(userGroupRole,false);
    }
  }
  PermissionCacheUtil.clearCache();
}
