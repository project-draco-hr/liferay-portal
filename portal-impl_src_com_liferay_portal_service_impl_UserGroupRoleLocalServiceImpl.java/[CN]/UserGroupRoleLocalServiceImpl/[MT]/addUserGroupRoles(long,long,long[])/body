{
  checkGroupResource(groupId);
  for (int i=0; i < roleIds.length; i++) {
    long roleId=roleIds[i];
    UserGroupRolePK pk=new UserGroupRolePK(userId,groupId,roleId);
    UserGroupRole userGroupRole=userGroupRolePersistence.fetchByPrimaryKey(pk);
    if (userGroupRole == null) {
      userGroupRole=userGroupRolePersistence.create(pk);
      userGroupRolePersistence.update(userGroupRole,false);
    }
  }
  PermissionCacheUtil.clearCache();
}
