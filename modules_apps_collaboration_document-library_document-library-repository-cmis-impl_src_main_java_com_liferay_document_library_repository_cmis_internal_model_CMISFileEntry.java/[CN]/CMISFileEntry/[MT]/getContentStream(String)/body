{
  if (Validator.isNull(version)) {
    return getContentStream();
  }
  for (  Document document : getAllVersions()) {
    if (version.equals(document.getVersionLabel())) {
      ContentStream contentStream=document.getContentStream();
      try {
        DLAppHelperLocalServiceUtil.getFileAsStream(PrincipalThreadLocal.getUserId(),this,true);
      }
 catch (      Exception e) {
        _log.error(e,e);
      }
      return contentStream.getStream();
    }
  }
  throw new NoSuchFileVersionException("No CMIS file version with {fileEntryId=" + getFileEntryId() + ", version="+ version+ "}");
}
