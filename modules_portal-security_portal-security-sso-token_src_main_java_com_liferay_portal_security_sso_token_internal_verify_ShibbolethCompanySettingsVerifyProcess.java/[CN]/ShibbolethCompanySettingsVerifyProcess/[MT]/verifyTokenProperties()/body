{
  List<Company> companies=getCompanyLocalService().getCompanies(false);
  for (  Company company : companies) {
    long companyId=company.getCompanyId();
    Dictionary<String,String> dictionary=getPropertyValues(companyId);
    storeSettings(companyId,getSettingsId(),dictionary);
    Set<String> keys=new HashSet<>();
    keys.addAll(Arrays.asList(LegacyTokenPropsKeys.TOKEN_KEYS));
    if (_log.isDebugEnabled()) {
      _log.debug("Removing preference keys " + keys + " for company "+ companyId);
    }
    getCompanyLocalService().removePreferences(companyId,keys.toArray(new String[keys.size()]));
  }
}
