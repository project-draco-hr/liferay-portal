{
  String contextRoot=pluginFileName;
  int pos=contextRoot.lastIndexOf(".war");
  if (pos != -1) {
    contextRoot=contextRoot.substring(0,pos);
  }
  if (contextRoot.equals("liferay-portal")) {
    contextRoot=PropsValues.PORTAL_CTX;
    if (contextRoot.equals(StringPool.SLASH)) {
      contextRoot=StringPool.BLANK;
    }
 else     if (contextRoot.startsWith(StringPool.SLASH)) {
      contextRoot=contextRoot.substring(1);
    }
  }
  return StringPool.SLASH.concat(contextRoot);
}
