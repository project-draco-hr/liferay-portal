{
  LayoutTemplate layoutTemplate=getLayoutTemplate(layoutTemplateId,standard,themeId);
  if (layoutTemplate == null) {
    if (_log.isWarnEnabled()) {
      _log.warn("Layout template " + layoutTemplateId + " does not exist");
    }
    layoutTemplate=getLayoutTemplate(PropsValues.DEFAULT_LAYOUT_TEMPLATE_ID,standard,themeId);
    if (layoutTemplate == null) {
      _log.error("Layout template " + layoutTemplateId + " and default layout template "+ PropsValues.DEFAULT_LAYOUT_TEMPLATE_ID+ " do not exist");
      return StringPool.BLANK;
    }
  }
  if (GetterUtil.getBoolean(PropsUtil.get(PropsUtil.LAYOUT_TEMPLATE_CACHE_ENABLED))) {
    return layoutTemplate.getWapContent();
  }
 else {
    try {
      return layoutTemplate.getUncachedWapContent();
    }
 catch (    IOException ioe) {
      throw new SystemException(ioe);
    }
  }
}
