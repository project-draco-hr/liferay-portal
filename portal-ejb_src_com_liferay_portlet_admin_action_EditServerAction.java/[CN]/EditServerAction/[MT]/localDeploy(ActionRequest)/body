{
  UploadPortletRequest uploadReq=PortalUtil.getUploadPortletRequest(req);
  String recommendedWARName=ParamUtil.getString(req,"localDeployWARName");
  File file=uploadReq.getFile("file");
  String fileName=recommendedWARName;
  if (Validator.isNull(fileName)) {
    fileName=uploadReq.getFileName("file");
  }
  byte[] bytes=FileUtil.getBytes(file);
  if ((bytes != null) && (bytes.length > 0)) {
    String source=file.toString();
    String deployDir=PrefsPropsUtil.getString(PropsUtil.AUTO_DEPLOY_DEPLOY_DIR);
    String destination=deployDir + StringPool.SLASH + fileName;
    FileUtil.copyFile(source,destination);
    SessionMessages.add(req,"pluginUploaded");
  }
 else {
    SessionErrors.add(req,UploadException.class.getName());
  }
}
