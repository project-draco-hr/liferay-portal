{
  String categoryId=ParamUtil.getString(req,"category_id");
  String parentCategoryId=ParamUtil.getString(req,"parent_category_id");
  String name=ParamUtil.getString(req,"category_name");
  if (Validator.isNull(categoryId)) {
    ShoppingCategoryServiceUtil.addCategory(parentCategoryId,name);
  }
 else {
    ShoppingCategoryServiceUtil.updateCategory(categoryId,parentCategoryId,name);
    SessionMessages.add(req,"category_updated");
  }
  res.sendRedirect(ParamUtil.getString(req,"redirect"));
}
