{
  long categoryId=mailing.getCategoryId();
  while (categoryId != MBCategoryImpl.DEFAULT_PARENT_CATEGORY_ID) {
    try {
      mailing=MBMailingLocalServiceUtil.getMailingByCategory(categoryId);
      if (permissionChecker.hasPermission(mailing.getGroupId(),MBMailing.class.getName(),mailing.getMailingId(),actionId)) {
        return true;
      }
    }
 catch (    NoSuchMailingException e) {
    }
    MBCategory category=MBCategoryLocalServiceUtil.getCategory(categoryId);
    categoryId=category.getParentCategoryId();
    if (actionId.equals(ActionKeys.VIEW)) {
      break;
    }
  }
  return false;
}
