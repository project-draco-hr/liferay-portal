{
  User user=UserLocalServiceUtil.getUser(userId);
  Map<String,String[]> parameterMap=new HashMap<>();
  parameterMap.put(PortletDataHandlerKeys.PERMISSIONS,new String[]{Boolean.TRUE.toString()});
  parameterMap.put(PortletDataHandlerKeys.PORTLET_ARCHIVED_SETUPS_ALL,new String[]{Boolean.TRUE.toString()});
  parameterMap.put(PortletDataHandlerKeys.PORTLET_CONFIGURATION,new String[]{Boolean.TRUE.toString()});
  parameterMap.put(PortletDataHandlerKeys.PORTLET_CONFIGURATION_ALL,new String[]{Boolean.TRUE.toString()});
  parameterMap.put(PortletDataHandlerKeys.PORTLET_DATA,new String[]{Boolean.TRUE.toString()});
  parameterMap.put(PortletDataHandlerKeys.PORTLET_DATA_ALL,new String[]{Boolean.TRUE.toString()});
  parameterMap.put(PortletDataHandlerKeys.PORTLET_DATA_CONTROL_DEFAULT,new String[]{Boolean.TRUE.toString()});
  parameterMap.put(PortletDataHandlerKeys.PORTLET_SETUP_ALL,new String[]{Boolean.TRUE.toString()});
  parameterMap.put(PortletDataHandlerKeys.PORTLET_USER_PREFERENCES_ALL,new String[]{Boolean.TRUE.toString()});
  parameterMap.put(PortletDataHandlerKeys.THEME_REFERENCE,new String[]{Boolean.TRUE.toString()});
  Map<String,Serializable> importSettingsMap=ExportImportConfigurationSettingsMapFactory.buildImportSettingsMap(user.getUserId(),groupId,privateLayout,null,parameterMap,Constants.IMPORT,user.getLocale(),user.getTimeZone(),larFile.getName());
  ExportImportConfiguration exportImportConfiguration=ExportImportConfigurationLocalServiceUtil.addExportImportConfiguration(user.getUserId(),groupId,StringPool.BLANK,StringPool.BLANK,ExportImportConfigurationConstants.TYPE_IMPORT_LAYOUT,importSettingsMap,WorkflowConstants.STATUS_DRAFT,new ServiceContext());
  ExportImportLocalServiceUtil.importLayouts(exportImportConfiguration,larFile);
}
