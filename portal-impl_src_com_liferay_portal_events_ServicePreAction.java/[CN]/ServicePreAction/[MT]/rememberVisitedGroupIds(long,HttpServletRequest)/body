{
  String requestURI=GetterUtil.getString(req.getRequestURI());
  if (!requestURI.endsWith(_PATH_PORTAL_LAYOUT)) {
    return;
  }
  HttpSession ses=req.getSession();
  Long recentGroupId=(Long)ses.getAttribute(WebKeys.LIFERAY_SHARED_VISITED_GROUP_ID_RECENT);
  Long previousGroupId=(Long)ses.getAttribute(WebKeys.LIFERAY_SHARED_VISITED_GROUP_ID_PREVIOUS);
  if (recentGroupId == null) {
    recentGroupId=new Long(currentGroupId);
    ses.setAttribute(WebKeys.LIFERAY_SHARED_VISITED_GROUP_ID_RECENT,recentGroupId);
  }
 else   if (recentGroupId.longValue() != currentGroupId) {
    previousGroupId=new Long(recentGroupId.longValue());
    recentGroupId=new Long(currentGroupId);
    ses.setAttribute(WebKeys.LIFERAY_SHARED_VISITED_GROUP_ID_RECENT,recentGroupId);
    ses.setAttribute(WebKeys.LIFERAY_SHARED_VISITED_GROUP_ID_PREVIOUS,previousGroupId);
  }
  if (_log.isDebugEnabled()) {
    _log.debug("Current group id " + currentGroupId);
    _log.debug("Recent group id " + recentGroupId);
    _log.debug("Previous group id " + previousGroupId);
  }
}
