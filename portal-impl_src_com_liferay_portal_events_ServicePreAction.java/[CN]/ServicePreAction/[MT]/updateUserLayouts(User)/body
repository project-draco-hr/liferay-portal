{
  boolean addDefaultUserPrivateLayouts=false;
  if (PropsValues.LAYOUT_USER_PRIVATE_LAYOUTS_ENABLED && PropsValues.LAYOUT_USER_PRIVATE_LAYOUTS_AUTO_CREATE) {
    addDefaultUserPrivateLayouts=true;
    if (PropsValues.LAYOUT_USER_PRIVATE_LAYOUTS_POWER_USER_REQUIRED) {
      Role powerUserRole=RoleLocalServiceUtil.getRole(user.getCompanyId(),RoleConstants.POWER_USER);
      if (!UserLocalServiceUtil.hasRoleUser(powerUserRole.getRoleId(),user.getUserId())) {
        addDefaultUserPrivateLayouts=false;
      }
    }
  }
  if (addDefaultUserPrivateLayouts && !user.hasPrivateLayouts()) {
    addDefaultUserPrivateLayouts(user);
  }
  boolean deleteDefaultUserPrivateLayouts=false;
  if (!PropsValues.LAYOUT_USER_PRIVATE_LAYOUTS_ENABLED) {
    deleteDefaultUserPrivateLayouts=true;
  }
 else   if (PropsValues.LAYOUT_USER_PRIVATE_LAYOUTS_POWER_USER_REQUIRED) {
    Role powerUserRole=RoleLocalServiceUtil.getRole(user.getCompanyId(),RoleConstants.POWER_USER);
    if (!UserLocalServiceUtil.hasRoleUser(powerUserRole.getRoleId(),user.getUserId())) {
      deleteDefaultUserPrivateLayouts=true;
    }
  }
  if (deleteDefaultUserPrivateLayouts && user.hasPrivateLayouts()) {
    deleteDefaultUserPrivateLayouts(user);
  }
  boolean addDefaultUserPublicLayouts=false;
  if (PropsValues.LAYOUT_USER_PUBLIC_LAYOUTS_ENABLED && PropsValues.LAYOUT_USER_PUBLIC_LAYOUTS_AUTO_CREATE) {
    addDefaultUserPublicLayouts=true;
    if (PropsValues.LAYOUT_USER_PUBLIC_LAYOUTS_POWER_USER_REQUIRED) {
      Role powerUserRole=RoleLocalServiceUtil.getRole(user.getCompanyId(),RoleConstants.POWER_USER);
      if (!UserLocalServiceUtil.hasRoleUser(powerUserRole.getRoleId(),user.getUserId())) {
        addDefaultUserPublicLayouts=false;
      }
    }
  }
  if (addDefaultUserPublicLayouts && !user.hasPublicLayouts()) {
    addDefaultUserPublicLayouts(user);
  }
  boolean deleteDefaultUserPublicLayouts=false;
  if (!PropsValues.LAYOUT_USER_PUBLIC_LAYOUTS_ENABLED) {
    deleteDefaultUserPublicLayouts=true;
  }
 else   if (PropsValues.LAYOUT_USER_PUBLIC_LAYOUTS_POWER_USER_REQUIRED) {
    Role powerUserRole=RoleLocalServiceUtil.getRole(user.getCompanyId(),RoleConstants.POWER_USER);
    if (!UserLocalServiceUtil.hasRoleUser(powerUserRole.getRoleId(),user.getUserId())) {
      deleteDefaultUserPublicLayouts=true;
    }
  }
  if (deleteDefaultUserPublicLayouts && user.hasPublicLayouts()) {
    deleteDefaultUserPublicLayouts(user);
  }
}
