{
  if ((layouts == null) || (layouts.size() == 0)) {
    return new Object[]{layout,layouts};
  }
  Layout junctionLayout=layout.getJunctionLayout(req,true);
  if ((layout == junctionLayout) && (junctionLayout.getType().equals(LayoutConstants.TYPE_JUNCTION_POINT))) {
    layout.setType(LayoutConstants.TYPE_PORTLET);
  }
  Layout junctionAncestor=junctionLayout.getJunctionAncestor(req);
  if (junctionAncestor.getGroupId() != layout.getGroupId()) {
    layouts=LayoutLocalServiceUtil.getLayouts(junctionAncestor.getGroupId(),junctionAncestor.isPrivateLayout(),LayoutConstants.DEFAULT_PARENT_LAYOUT_ID);
  }
  for (int i=0; i < layouts.size(); i++) {
    Layout curLayout=layouts.get(i);
    Layout curJunctionLayout=curLayout.getJunctionLayout(req,false);
    layouts.set(i,curJunctionLayout);
  }
  return new Object[]{layout,layouts};
}
