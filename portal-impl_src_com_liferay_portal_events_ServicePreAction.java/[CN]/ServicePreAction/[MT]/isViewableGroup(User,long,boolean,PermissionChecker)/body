{
  Group group=GroupLocalServiceUtil.getGroup(groupId);
  if (!group.isActive()) {
    return false;
  }
 else   if (group.isStagingGroup()) {
    Group liveGroup=group.getLiveGroup();
    if (!liveGroup.isActive()) {
      return false;
    }
  }
  if (group.isUser()) {
    long groupUserId=group.getClassPK();
    if (groupUserId == user.getUserId()) {
      return true;
    }
 else {
      User groupUser=UserLocalServiceUtil.getUserById(groupUserId);
      if (!groupUser.isActive()) {
        return false;
      }
      if (privateLayout) {
        if (UserPermissionUtil.contains(permissionChecker,groupUserId,groupUser.getOrganizationIds(),ActionKeys.UPDATE)) {
          return true;
        }
 else {
          return false;
        }
      }
    }
  }
  if (group.isStagingGroup()) {
    if (user.isDefaultUser()) {
      return false;
    }
    if (GroupPermissionUtil.contains(permissionChecker,groupId,ActionKeys.APPROVE_PROPOSAL) || GroupPermissionUtil.contains(permissionChecker,groupId,ActionKeys.ASSIGN_REVIEWER) || GroupPermissionUtil.contains(permissionChecker,groupId,ActionKeys.MANAGE_LAYOUTS)|| GroupPermissionUtil.contains(permissionChecker,groupId,ActionKeys.MANAGE_STAGING)|| GroupPermissionUtil.contains(permissionChecker,groupId,ActionKeys.PUBLISH_STAGING)) {
      return true;
    }
    return false;
  }
  if (!privateLayout) {
    return true;
  }
  if (group.getName().equals(GroupConstants.CONTROL_PANEL)) {
    if (user.isDefaultUser()) {
      return false;
    }
 else {
      return true;
    }
  }
  if (group.isCommunity()) {
    if (GroupLocalServiceUtil.hasUserGroup(user.getUserId(),groupId)) {
      return true;
    }
 else     if (GroupPermissionUtil.contains(permissionChecker,groupId,ActionKeys.UPDATE)) {
      return true;
    }
  }
 else   if (group.isOrganization()) {
    long organizationId=group.getClassPK();
    if (OrganizationLocalServiceUtil.hasUserOrganization(user.getUserId(),organizationId)) {
      return true;
    }
 else     if (OrganizationPermissionUtil.contains(permissionChecker,organizationId,ActionKeys.UPDATE)) {
      return true;
    }
    if (!PropsValues.ORGANIZATIONS_MEMBERSHIP_STRICT) {
      for (      Organization curOrganization : user.getOrganizations()) {
        for (        Organization curAncestor : curOrganization.getAncestors()) {
          if (groupId == curAncestor.getGroup().getGroupId()) {
            return true;
          }
        }
      }
    }
  }
 else   if (group.isUserGroup()) {
    if (GroupPermissionUtil.contains(permissionChecker,groupId,ActionKeys.MANAGE_LAYOUTS)) {
      return true;
    }
  }
  return false;
}
