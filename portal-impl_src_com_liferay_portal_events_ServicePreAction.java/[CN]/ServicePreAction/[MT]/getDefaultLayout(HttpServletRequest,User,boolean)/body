{
  Object[] defaultLayout=getDefaultVirtualLayout(request);
  if (signedIn) {
    if (defaultLayout[0] == null) {
      defaultLayout=getDefaultUserPersonalLayout(user);
    }
    if (defaultLayout[0] == null) {
      defaultLayout=getDefaultUserSiteLayout(user);
    }
  }
  if (defaultLayout[0] == null) {
    defaultLayout=getDefaultSiteLayout(user);
  }
  return defaultLayout;
}
