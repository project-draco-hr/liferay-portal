{
  if (SitesUtil.isLayoutToBeUpdatedFromTemplate(layout)) {
    Layout templateLayout=LayoutTypePortletImpl.getTemplateLayout(layout);
    SitesUtil.copyLayout(user.getUserId(),templateLayout,layout,new ServiceContext());
    layout=LayoutLocalServiceUtil.getLayout(layout.getPlid());
    UnicodeProperties typeSettings=layout.getTypeSettingsProperties();
    typeSettings.put("layoutSetPrototypeLastCopyDate",String.valueOf((new Date()).getTime()));
    LayoutLocalServiceUtil.updateLayout(layout);
    return true;
  }
  return false;
}
