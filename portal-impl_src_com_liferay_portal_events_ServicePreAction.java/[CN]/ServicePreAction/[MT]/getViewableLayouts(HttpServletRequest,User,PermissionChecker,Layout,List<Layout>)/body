{
  if ((layouts == null) || (layouts.size() == 0)) {
    return new Object[]{layout,layouts};
  }
  boolean layoutViewPermission=false;
  if (LayoutPermissionUtil.contains(permissionChecker,layout,ActionKeys.VIEW)) {
    layoutViewPermission=true;
  }
  List<Layout> accessibleLayouts=new ArrayList<Layout>();
  for (int i=0; i < layouts.size(); i++) {
    Layout curLayout=layouts.get(i);
    if (!curLayout.isHidden() && LayoutPermissionUtil.contains(permissionChecker,curLayout,ActionKeys.VIEW)) {
      if ((accessibleLayouts.size() == 0) && !layoutViewPermission) {
        layout=curLayout;
      }
      accessibleLayouts.add(curLayout);
    }
  }
  if (accessibleLayouts.size() == 0) {
    layouts=null;
    if (!layoutViewPermission) {
      SessionErrors.add(request,LayoutPermissionException.class.getName());
    }
  }
 else {
    layouts=accessibleLayouts;
  }
  return new Object[]{layout,layouts};
}
