{
  if ((layouts != null) && (layouts.size() > 0)) {
    boolean replaceLayout=true;
    if (LayoutPermissionUtil.contains(permissionChecker,layout,ActionKeys.VIEW)) {
      replaceLayout=false;
    }
    List<Layout> accessibleLayouts=new ArrayList<Layout>();
    for (int i=0; i < layouts.size(); i++) {
      Layout curLayout=layouts.get(i);
      if (!curLayout.isHidden() && LayoutPermissionUtil.contains(permissionChecker,curLayout,ActionKeys.VIEW)) {
        if ((accessibleLayouts.size() == 0) && replaceLayout) {
          layout=curLayout;
        }
        accessibleLayouts.add(curLayout);
      }
    }
    if (accessibleLayouts.size() == 0) {
      layouts=null;
      SessionErrors.add(req,LayoutPermissionException.class.getName());
    }
 else {
      layouts=accessibleLayouts;
    }
  }
  return new Object[]{layout,layouts};
}
