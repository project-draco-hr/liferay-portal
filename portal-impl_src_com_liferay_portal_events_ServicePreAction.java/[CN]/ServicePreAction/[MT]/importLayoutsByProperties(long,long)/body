{
  String name=PropsValues.DEFAULT_USER_LAYOUT_NAME;
  Layout layout=LayoutLocalServiceUtil.addLayout(userId,groupId,true,LayoutImpl.DEFAULT_PARENT_LAYOUT_ID,name,StringPool.BLANK,StringPool.BLANK,LayoutImpl.TYPE_PORTLET,false,StringPool.BLANK);
  LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
  String layoutTemplateId=PropsValues.DEFAULT_USER_LAYOUT_TEMPLATE_ID;
  layoutTypePortlet.setLayoutTemplateId(0,layoutTemplateId,false);
  for (int i=0; i < 10; i++) {
    String columnId="column-" + i;
    String portletIds=PropsUtil.get(PropsUtil.DEFAULT_USER_LAYOUT_COLUMN + i);
    String[] portletIdsArray=StringUtil.split(portletIds);
    layoutTypePortlet.addPortletIds(0,portletIdsArray,columnId,false);
  }
  LayoutLocalServiceUtil.updateLayout(layout.getGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),layout.getTypeSettings());
  if (Validator.isNotNull(_DEFAULT_USER_THEME_ID)) {
    LayoutSet layoutSet=layout.getLayoutSet();
    layoutSet.setThemeId(_DEFAULT_USER_THEME_ID);
    LayoutSetLocalServiceUtil.updateLayoutSet(layoutSet);
  }
}
