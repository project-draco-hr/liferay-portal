{
  UnicodeProperties typeSettingsProperties=layout.getTypeSettingsProperties();
  if (layout.isHidden() || !PortalUtil.isLayoutSitemapable(layout) || !GetterUtil.getBoolean(typeSettingsProperties.getProperty("sitemap-include"),true)) {
    return;
  }
  String layoutFullURL=PortalUtil.getLayoutFullURL(layout,themeDisplay);
  layoutFullURL=PortalUtil.getCanonicalURL(layoutFullURL,themeDisplay,layout);
  Map<Locale,String> alternateURLs=getAlternateURLs(layoutFullURL,themeDisplay,layout);
  addURLElement(element,layoutFullURL,typeSettingsProperties,layout.getModifiedDate(),alternateURLs);
  Locale[] availableLocales=LanguageUtil.getAvailableLocales();
  if (availableLocales.length > 1) {
    Locale defaultLocale=LocaleUtil.getDefault();
    for (    Locale availableLocale : availableLocales) {
      if (availableLocale.equals(defaultLocale)) {
        continue;
      }
      String alternateURL=PortalUtil.getAlternateURL(layoutFullURL,themeDisplay,availableLocale,layout);
      alternateURLs=getAlternateURLs(layoutFullURL,themeDisplay,layout);
      addURLElement(element,alternateURL,typeSettingsProperties,layout.getModifiedDate(),alternateURLs);
    }
  }
  visitArticles(element,layout,themeDisplay);
  visitLayouts(element,layout.getChildren(),themeDisplay);
}
