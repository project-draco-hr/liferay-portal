{
  UnicodeProperties typeSettingsProperties=layout.getTypeSettingsProperties();
  if (layout.isHidden() || !PortalUtil.isLayoutSitemapable(layout) || !GetterUtil.getBoolean(typeSettingsProperties.getProperty("sitemap-include"),true)) {
    return;
  }
  String layoutFullURL=PortalUtil.getLayoutFullURL(layout,themeDisplay);
  layoutFullURL=PortalUtil.getCanonicalURL(layoutFullURL,themeDisplay,layout);
  generateSitemapTag(element,layoutFullURL,typeSettingsProperties);
  Locale defaultLocale=LocaleUtil.getDefault();
  Locale[] availableLocales=LanguageUtil.getAvailableLocales();
  if (availableLocales.length > 1) {
    for (    Locale curLocale : availableLocales) {
      if (curLocale.equals(defaultLocale)) {
        continue;
      }
      String alternateURL=PortalUtil.getAlternateURL(layoutFullURL,themeDisplay,curLocale);
      generateSitemapTag(element,alternateURL,null);
    }
  }
  visitArticles(element,layout,themeDisplay);
  List<Layout> children=layout.getChildren();
  visitLayouts(element,children,themeDisplay);
}
