{
  List<JournalArticle> journalArticles=JournalArticleServiceUtil.getArticlesByLayoutUuid(layout.getGroupId(),layout.getUuid());
  if (journalArticles.isEmpty()) {
    return;
  }
  Set<String> processedArticleIds=new HashSet<String>();
  for (  JournalArticle journalArticle : journalArticles) {
    if (processedArticleIds.contains(journalArticle.getArticleId()) || (journalArticle.getStatus() != WorkflowConstants.STATUS_APPROVED)) {
      continue;
    }
    String portalURL=PortalUtil.getPortalURL(layout,themeDisplay);
    String groupFriendlyURL=PortalUtil.getGroupFriendlyURL(GroupLocalServiceUtil.getGroup(journalArticle.getGroupId()),false,themeDisplay);
    StringBundler sb=new StringBundler(4);
    if (!groupFriendlyURL.startsWith(portalURL)) {
      sb.append(portalURL);
    }
    sb.append(groupFriendlyURL);
    sb.append(JournalArticleConstants.CANONICAL_URL_SEPARATOR);
    sb.append(journalArticle.getUrlTitle());
    String articleURL=PortalUtil.getCanonicalURL(sb.toString(),themeDisplay,layout);
    Map<Locale,String> alternateURLs=getAlternateURLs(articleURL,themeDisplay,layout);
    addURLElement(element,articleURL,null,journalArticle.getModifiedDate(),alternateURLs);
    Locale[] availableLocales=LanguageUtil.getAvailableLocales();
    if (availableLocales.length > 1) {
      Locale defaultLocale=LocaleUtil.getDefault();
      for (      Locale availableLocale : availableLocales) {
        if (!availableLocale.equals(defaultLocale)) {
          String alternateURL=PortalUtil.getAlternateURL(articleURL,themeDisplay,availableLocale,layout);
          alternateURLs=getAlternateURLs(articleURL,themeDisplay,layout);
          addURLElement(element,alternateURL,null,journalArticle.getModifiedDate(),alternateURLs);
        }
      }
    }
    processedArticleIds.add(journalArticle.getArticleId());
  }
}
