{
  List<JournalArticle> journalArticles=JournalArticleServiceUtil.getArticlesByLayoutUuid(layout.getGroupId(),layout.getUuid());
  if (journalArticles.isEmpty()) {
    return;
  }
  List<String> processedArticleIds=new ArrayList<String>();
  for (  JournalArticle journalArticle : journalArticles) {
    if (processedArticleIds.contains(journalArticle.getArticleId()) || (journalArticle.getStatus() != WorkflowConstants.STATUS_APPROVED)) {
      continue;
    }
    String portalURL=PortalUtil.getPortalURL(layout,themeDisplay);
    String groupFriendlyURL=PortalUtil.getGroupFriendlyURL(GroupLocalServiceUtil.getGroup(journalArticle.getGroupId()),false,themeDisplay);
    StringBundler sb=new StringBundler(4);
    sb.append(portalURL);
    sb.append(groupFriendlyURL);
    sb.append(JournalArticleConstants.CANONICAL_URL_SEPARATOR);
    sb.append(journalArticle.getUrlTitle());
    String articleURL=PortalUtil.getCanonicalURL(sb.toString(),themeDisplay,layout);
    Element urlElement=element.addElement("url");
    Element locElement=urlElement.addElement("loc");
    locElement.addText(encodeXML(articleURL));
    processedArticleIds.add(journalArticle.getArticleId());
  }
}
