{
  StringBundler sb=null;
  int lastReplacementIndex=0;
  for (int i=0; i < input.length(); i++) {
    char c=input.charAt(i);
    String html=null;
    if (c == '&') {
      html="&amp;";
    }
 else     if (c == '<') {
      html="&lt;";
    }
 else     if (c == '>') {
      html="&gt;";
    }
 else     if (c == '\'') {
      html="&apos;";
    }
 else     if (c == '"') {
      html="&quot;";
    }
    if (html != null) {
      if (sb == null) {
        sb=new StringBundler();
      }
      if (i > lastReplacementIndex) {
        sb.append(input.substring(lastReplacementIndex,i));
      }
      sb.append(html);
      lastReplacementIndex=i + 1;
    }
  }
  if (sb == null) {
    return input;
  }
  if (lastReplacementIndex < input.length()) {
    sb.append(input.substring(lastReplacementIndex));
  }
  return sb.toString();
}
