{
  try {
    NodeIterator itr=dirNode.getNodes();
    while (itr.hasNext()) {
      Node node=(Node)itr.next();
      String primaryNodeTypeName=node.getPrimaryNodeType().getName();
      if (primaryNodeTypeName.equals(JCRConstants.NT_FOLDER)) {
        _deleteDirectory(companyId,portletId,repositoryId,node);
      }
 else       if (primaryNodeTypeName.equals(JCRConstants.NT_FILE)) {
        Indexer.deleteFile(companyId,portletId,repositoryId,node.getName());
      }
    }
    Indexer.deleteFile(companyId,portletId,repositoryId,dirNode.getName());
  }
 catch (  RepositoryException e) {
    _log.error(e);
  }
}
