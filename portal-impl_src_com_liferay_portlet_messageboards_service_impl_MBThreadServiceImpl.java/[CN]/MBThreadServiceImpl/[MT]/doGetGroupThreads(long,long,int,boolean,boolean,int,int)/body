{
  long[] categoryIds=mbCategoryService.getCategoryIds(groupId,MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID);
  if (categoryIds.length == 0) {
    return Collections.emptyList();
  }
  QueryDefinition queryDefinition=new QueryDefinition(status,start,end,null);
  if (userId <= 0) {
    return mbThreadFinder.findByG_C(groupId,categoryIds,queryDefinition);
  }
 else   if (subscribed) {
    return mbThreadFinder.findByS_G_U_C(groupId,userId,categoryIds,queryDefinition);
  }
 else   if (includeAnonymous) {
    return mbThreadFinder.findByG_U_C(groupId,userId,categoryIds,queryDefinition);
  }
 else {
    return mbThreadFinder.findByG_U_C_A(groupId,userId,categoryIds,false,queryDefinition);
  }
}
