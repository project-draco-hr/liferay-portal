{
  if (!InlineSQLHelperUtil.isEnabled(groupId)) {
    return doGetGroupThreads(groupId,userId,status,subscribed,includeAnonymous,start,end);
  }
  long[] categoryIds=mbCategoryService.getCategoryIds(groupId,MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID);
  if (categoryIds.length == 0) {
    return Collections.emptyList();
  }
  List<Long> threadIds=null;
  if (userId <= 0) {
    threadIds=mbMessageFinder.filterFindByG_C_S(groupId,categoryIds,status,start,end);
  }
 else {
    if (subscribed) {
      return mbThreadFinder.filterFindByS_G_U_C_S(groupId,userId,categoryIds,status,start,end);
    }
 else {
      if (includeAnonymous) {
        threadIds=mbMessageFinder.filterFindByG_U_C_S(groupId,userId,categoryIds,status,start,end);
      }
 else {
        threadIds=mbMessageFinder.filterFindByG_U_C_A_S(groupId,userId,categoryIds,false,status,start,end);
      }
    }
  }
  List<MBThread> threads=new ArrayList<MBThread>(threadIds.size());
  for (  long threadId : threadIds) {
    MBThread thread=mbThreadPersistence.findByPrimaryKey(threadId);
    threads.add(thread);
  }
  return threads;
}
