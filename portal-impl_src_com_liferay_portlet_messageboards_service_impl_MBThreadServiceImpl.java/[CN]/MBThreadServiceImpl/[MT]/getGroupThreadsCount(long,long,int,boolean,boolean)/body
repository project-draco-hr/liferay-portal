{
  if (!InlineSQLHelperUtil.isEnabled(groupId)) {
    return doGetGroupThreadsCount(groupId,userId,status,subscribed,includeAnonymous);
  }
  long[] categoryIds=mbCategoryService.getCategoryIds(groupId,MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID);
  if (categoryIds.length == 0) {
    return 0;
  }
  if (userId <= 0) {
    return mbMessageFinder.filterCountByG_U_C_S(groupId,0,categoryIds,status);
  }
 else {
    if (subscribed) {
      QueryDefinition<MBThread> queryDefinition=new QueryDefinition<MBThread>(status);
      return mbThreadFinder.filterCountByS_G_U_C(groupId,userId,categoryIds,queryDefinition);
    }
 else {
      if (includeAnonymous) {
        return mbMessageFinder.filterCountByG_U_C_S(groupId,userId,categoryIds,status);
      }
 else {
        return mbMessageFinder.filterCountByG_U_C_A_S(groupId,userId,categoryIds,false,status);
      }
    }
  }
}
