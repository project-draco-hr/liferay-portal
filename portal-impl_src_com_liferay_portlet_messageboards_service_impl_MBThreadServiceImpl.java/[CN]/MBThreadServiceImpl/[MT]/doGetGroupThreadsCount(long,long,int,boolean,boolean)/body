{
  long[] categoryIds=mbCategoryService.getCategoryIds(groupId,MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID);
  if (categoryIds.length == 0) {
    return 0;
  }
  QueryDefinition queryDefinition=new QueryDefinition(status);
  if (userId <= 0) {
    return mbThreadFinder.countByG_C(groupId,categoryIds,queryDefinition);
  }
 else   if (subscribed) {
    return mbThreadFinder.countByS_G_U_C(groupId,userId,categoryIds,queryDefinition);
  }
 else   if (includeAnonymous) {
    return mbThreadFinder.countByG_U_C(groupId,userId,categoryIds,queryDefinition);
  }
 else {
    return mbThreadFinder.countByG_U_C_A(groupId,userId,categoryIds,false,queryDefinition);
  }
}
