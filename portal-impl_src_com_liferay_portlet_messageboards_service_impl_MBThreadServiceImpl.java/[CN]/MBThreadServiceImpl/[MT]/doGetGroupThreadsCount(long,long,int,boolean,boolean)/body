{
  if (userId <= 0) {
    if (status == WorkflowConstants.STATUS_ANY) {
      return mbThreadPersistence.countByGroupId(groupId);
    }
 else {
      return mbThreadPersistence.countByG_S(groupId,status);
    }
  }
 else   if (subscribed) {
    QueryDefinition queryDefinition=new QueryDefinition(status);
    return mbThreadFinder.countByS_G_U(groupId,userId,queryDefinition);
  }
 else   if (includeAnonymous) {
    QueryDefinition queryDefinition=new QueryDefinition(status);
    return mbThreadFinder.countByG_U(groupId,userId,queryDefinition);
  }
 else {
    QueryDefinition queryDefinition=new QueryDefinition(status);
    return mbThreadFinder.countByG_U_A(groupId,userId,false,queryDefinition);
  }
}
