{
  PermissionChecker permissionChecker=getPermissionChecker();
  MBMessage message=mbMessageLocalService.getMessage(messageId);
  MBCategoryPermission.check(permissionChecker,message.getGroupId(),message.getCategoryId(),ActionKeys.MOVE_THREAD);
  MBMessagePermission.check(permissionChecker,messageId,ActionKeys.VIEW);
  return mbThreadLocalService.splitThread(getGuestOrUserId(),messageId,subject,serviceContext);
}
