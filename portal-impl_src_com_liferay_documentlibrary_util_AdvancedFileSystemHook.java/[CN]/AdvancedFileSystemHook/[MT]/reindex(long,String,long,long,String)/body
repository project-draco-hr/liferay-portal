{
  String shortFileName=FileUtil.getShortFileName(folderName);
  if (shortFileName.equals("DLFE") || Validator.isNumber(shortFileName)) {
    String[] fileNames=FileUtil.listDirs(folderName);
    for (int i=0; i < fileNames.length; i++) {
      reindex(companyId,portletId,groupId,repositoryId,folderName + StringPool.SLASH + fileNames[i]);
    }
  }
 else {
    try {
      Indexer indexer=IndexerRegistryUtil.getIndexer(FileModel.class);
      FileModel fileModel=new FileModel();
      if (shortFileName.endsWith(_HOOK_EXTENSION)) {
        shortFileName=FileUtil.stripExtension(shortFileName);
      }
      fileModel.setCompanyId(companyId);
      fileModel.setFileName(shortFileName);
      fileModel.setGroupId(groupId);
      fileModel.setPortletId(portletId);
      fileModel.setRepositoryId(repositoryId);
      Document document=indexer.getDocument(fileModel);
      SearchEngineUtil.updateDocument(companyId,document);
    }
 catch (    SearchException se) {
      throw se;
    }
catch (    Exception e) {
      _log.error("Reindexing " + shortFileName,e);
    }
  }
}
