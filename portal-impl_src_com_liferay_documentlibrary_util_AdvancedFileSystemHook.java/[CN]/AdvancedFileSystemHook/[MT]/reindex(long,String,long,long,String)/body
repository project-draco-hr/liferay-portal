{
  String shortFileName=FileUtil.getShortFileName(fileName);
  if (shortFileName.equals("DLFE") || Validator.isNumber(shortFileName)) {
    String[] curFileNames=FileUtil.listDirs(fileName);
    for (    String curFileName : curFileNames) {
      reindex(companyId,portletId,groupId,repositoryId,fileName + StringPool.SLASH + curFileName);
    }
  }
 else {
    try {
      Indexer indexer=IndexerRegistryUtil.getIndexer(FileModel.class);
      FileModel fileModel=new FileModel();
      if (shortFileName.endsWith(_HOOK_EXTENSION)) {
        shortFileName=FileUtil.stripExtension(shortFileName);
      }
      fileModel.setCompanyId(companyId);
      fileModel.setFileName(shortFileName);
      fileModel.setGroupId(groupId);
      fileModel.setPortletId(portletId);
      fileModel.setRepositoryId(repositoryId);
      Document document=indexer.getDocument(fileModel);
      if (document != null) {
        SearchEngineUtil.updateDocument(companyId,document);
      }
    }
 catch (    Exception e) {
      _log.error("Reindexing " + shortFileName,e);
    }
  }
}
