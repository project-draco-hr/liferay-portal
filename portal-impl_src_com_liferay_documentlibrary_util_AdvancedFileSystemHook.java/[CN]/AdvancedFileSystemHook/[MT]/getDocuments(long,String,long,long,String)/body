{
  Collection<Document> documents=new ArrayList<Document>();
  String shortFileName=FileUtil.getShortFileName(fileName);
  if (shortFileName.equals("DLFE") || Validator.isNumber(shortFileName)) {
    String[] curFileNames=FileUtil.listDirs(fileName);
    for (    String curFileName : curFileNames) {
      documents.addAll(getDocuments(companyId,portletId,groupId,repositoryId,fileName + StringPool.SLASH + curFileName));
    }
  }
 else {
    Indexer indexer=IndexerRegistryUtil.getIndexer(FileModel.class);
    FileModel fileModel=new FileModel();
    if (shortFileName.endsWith(_HOOK_EXTENSION)) {
      shortFileName=FileUtil.stripExtension(shortFileName);
    }
    fileModel.setCompanyId(companyId);
    fileModel.setFileName(shortFileName);
    fileModel.setGroupId(groupId);
    fileModel.setPortletId(portletId);
    fileModel.setRepositoryId(repositoryId);
    Document document=indexer.getDocument(fileModel);
    if (document != null) {
      documents.add(document);
    }
  }
  return documents;
}
