{
  String ext=StringPool.PERIOD + FileUtil.getExtension(fileName);
  StringBuilder sb=new StringBuilder();
  String fileNameFragment=FileUtil.stripExtension(fileName);
  if (fileNameFragment.startsWith("DLFE-")) {
    fileNameFragment=fileNameFragment.substring(5);
    sb.append("DLFE" + StringPool.SLASH);
  }
  buildPath(sb,fileNameFragment);
  File repositoryDir=getRepositoryDir(companyId,repositoryId);
  File fileNameDir=new File(repositoryDir + StringPool.SLASH + sb.toString()+ StringPool.SLASH+ fileNameFragment+ ext);
  return fileNameDir;
}
