{
  if (socialInteractionsConfiguration.isSocialInteractionsAnyUserEnabled()) {
    LinkedHashMap<String,Object> params=new LinkedHashMap<>();
    params.put("wildcardMode",WildcardMode.TRAILING);
    return UserLocalServiceUtil.search(companyId,query,WorkflowConstants.STATUS_APPROVED,params,0,_MAX_USERS,new UserScreenNameComparator());
  }
  User user=UserLocalServiceUtil.getUser(userId);
  int[] types=socialInteractionsConfiguration.getSocialInteractionsSocialRelationTypesArray();
  if (socialInteractionsConfiguration.isSocialInteractionsSocialRelationTypesEnabled() && socialInteractionsConfiguration.isSocialInteractionsSitesEnabled()) {
    return UserLocalServiceUtil.searchSocial(user.getGroupIds(),userId,types,query,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  }
  if (socialInteractionsConfiguration.isSocialInteractionsSitesEnabled()) {
    return UserLocalServiceUtil.searchSocial(companyId,user.getGroupIds(),query,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  }
  if (socialInteractionsConfiguration.isSocialInteractionsSocialRelationTypesEnabled()) {
    return UserLocalServiceUtil.searchSocial(userId,types,query,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  }
  return Collections.emptyList();
}
