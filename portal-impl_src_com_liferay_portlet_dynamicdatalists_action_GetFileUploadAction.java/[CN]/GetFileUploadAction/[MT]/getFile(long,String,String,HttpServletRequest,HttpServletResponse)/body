{
  DDLRecord record=DDLRecordLocalServiceUtil.getRecord(recordId);
  DDLRecordVersion recordVersion=record.getLatestRecordVersion();
  StringBundler sb=new StringBundler();
  sb.append(DDLUtil.getRecordFileUploadPath(record));
  sb.append(StringPool.SLASH);
  sb.append(recordVersion.getVersion());
  sb.append(StringPool.SLASH);
  sb.append(fieldName);
  String path=sb.toString();
  InputStream is=DLStoreUtil.getFileAsStream(record.getCompanyId(),CompanyConstants.SYSTEM,path);
  long contentLength=DLStoreUtil.getFileSize(record.getCompanyId(),CompanyConstants.SYSTEM,path);
  String contentType=MimeTypesUtil.getContentType(fileName);
  ServletResponseUtil.sendFile(request,response,fileName,is,contentLength,contentType);
}
