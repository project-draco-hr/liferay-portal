{
  DDLRecord record=DDLRecordLocalServiceUtil.getRecord(recordId);
  Serializable fieldValue=record.getFieldValue(fieldName);
  JSONObject fileJSONObject=JSONFactoryUtil.createJSONObject(String.valueOf(fieldValue));
  String fileName=fileJSONObject.getString("name");
  String filePath=fileJSONObject.getString("path");
  InputStream is=DLStoreUtil.getFileAsStream(record.getCompanyId(),CompanyConstants.SYSTEM,filePath);
  long contentLength=DLStoreUtil.getFileSize(record.getCompanyId(),CompanyConstants.SYSTEM,filePath);
  String contentType=MimeTypesUtil.getContentType(fileName);
  ServletResponseUtil.sendFile(request,response,fileName,is,contentLength,contentType);
}
