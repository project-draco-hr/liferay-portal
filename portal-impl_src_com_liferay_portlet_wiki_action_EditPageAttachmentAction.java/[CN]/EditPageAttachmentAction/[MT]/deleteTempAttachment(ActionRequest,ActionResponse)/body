{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long nodeId=ParamUtil.getLong(actionRequest,"nodeId");
  String fileName=ParamUtil.getString(actionRequest,"fileName");
  JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
  try {
    WikiPageServiceUtil.deleteTempPageAttachment(nodeId,fileName,_TEMP_PATHNAME);
    jsonObject.put("deleted",Boolean.TRUE);
  }
 catch (  Exception e) {
    String errorMessage=LanguageUtil.get(themeDisplay.getLocale(),"an-unexpected-error-occurred-while-deleting-the-file");
    jsonObject.put("deleted",Boolean.FALSE);
    jsonObject.put("errorMessage",errorMessage);
  }
  HttpServletRequest request=PortalUtil.getHttpServletRequest(actionRequest);
  HttpServletResponse response=PortalUtil.getHttpServletResponse(actionResponse);
  InputStream is=new UnsyncByteArrayInputStream(jsonObject.toString().getBytes());
  String contentType=ContentTypes.TEXT_JAVASCRIPT;
  ServletResponseUtil.sendFile(request,response,null,is,contentType);
}
