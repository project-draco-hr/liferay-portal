{
  for (  Object object : foldersAndEntries) {
    if (object instanceof BookmarksEntry) {
      BookmarksEntry entry=(BookmarksEntry)object;
      if (status == WorkflowConstants.STATUS_IN_TRASH) {
        if (entry.getStatus() == WorkflowConstants.STATUS_APPROVED) {
          assetEntryLocalService.updateVisible(BookmarksEntry.class.getName(),entry.getEntryId(),false);
        }
        socialActivityCounterLocalService.disableActivityCounters(BookmarksEntry.class.getName(),entry.getEntryId());
        Indexer indexer=IndexerRegistryUtil.nullSafeGetIndexer(BookmarksEntry.class);
        indexer.reindex(entry);
        if (entry.getStatus() == WorkflowConstants.STATUS_PENDING) {
          entry.setStatus(WorkflowConstants.STATUS_DRAFT);
          bookmarksEntryPersistence.update(entry);
          workflowInstanceLinkLocalService.deleteWorkflowInstanceLink(entry.getCompanyId(),entry.getGroupId(),BookmarksEntry.class.getName(),entry.getEntryId());
        }
      }
 else {
        if (entry.getStatus() == WorkflowConstants.STATUS_APPROVED) {
          assetEntryLocalService.updateVisible(BookmarksEntry.class.getName(),entry.getEntryId(),true);
        }
        socialActivityCounterLocalService.enableActivityCounters(BookmarksEntry.class.getName(),entry.getEntryId());
        Indexer indexer=IndexerRegistryUtil.nullSafeGetIndexer(BookmarksEntry.class);
        indexer.reindex(entry);
      }
    }
 else     if (object instanceof BookmarksFolder) {
      BookmarksFolder folder=(BookmarksFolder)object;
      if (folder.isInTrash()) {
        continue;
      }
      List<Object> curFoldersAndEntries=bookmarksFolderLocalService.getFoldersAndEntries(folder.getGroupId(),folder.getFolderId());
      updateDependentStatus(curFoldersAndEntries,status);
    }
  }
}
