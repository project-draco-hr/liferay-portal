{
  BookmarksFolder folder=bookmarksFolderPersistence.findByPrimaryKey(folderId);
  TrashEntry trashEntry=folder.getTrashEntry();
  if (trashEntry.isTrashEntry(BookmarksFolder.class,folderId)) {
    restoreFolderFromTrash(userId,folderId);
  }
 else {
    TrashVersion trashVersion=trashVersionLocalService.fetchVersion(trashEntry.getEntryId(),BookmarksFolder.class.getName(),folderId);
    int status=WorkflowConstants.STATUS_APPROVED;
    if (trashVersion != null) {
      status=trashVersion.getStatus();
    }
    updateStatus(userId,folder,status);
    if (trashVersion != null) {
      trashVersionLocalService.deleteTrashVersion(trashVersion);
    }
    List<Object> foldersAndEntries=bookmarksFolderLocalService.getFoldersAndEntries(folder.getGroupId(),folder.getFolderId(),WorkflowConstants.STATUS_IN_TRASH);
    restoreDependentsFromTrash(foldersAndEntries,trashEntry.getEntryId());
  }
  return bookmarksFolderLocalService.moveFolder(folderId,parentFolderId);
}
