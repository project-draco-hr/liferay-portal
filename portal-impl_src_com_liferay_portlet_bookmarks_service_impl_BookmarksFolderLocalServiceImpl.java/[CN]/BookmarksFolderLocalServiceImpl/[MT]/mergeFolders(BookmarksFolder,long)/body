{
  List<BookmarksFolder> folders=bookmarksFolderPersistence.findByG_P(fromFolder.getGroupId(),fromFolder.getFolderId());
  for (  BookmarksFolder folder : folders) {
    mergeFolders(folder,toFolderId);
  }
  List<BookmarksEntry> entries=bookmarksEntryPersistence.findByG_F(fromFolder.getGroupId(),fromFolder.getFolderId());
  for (  BookmarksEntry entry : entries) {
    entry.setFolderId(toFolderId);
    bookmarksEntryPersistence.update(entry,false);
    Indexer indexer=IndexerRegistryUtil.getIndexer(BookmarksEntry.class);
    indexer.reindex(entry);
  }
  deleteFolder(fromFolder);
}
