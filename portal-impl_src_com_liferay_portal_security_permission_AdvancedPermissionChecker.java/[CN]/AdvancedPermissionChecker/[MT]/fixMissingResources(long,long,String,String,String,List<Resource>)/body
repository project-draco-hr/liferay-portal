{
  int count=ResourcePermissionLocalServiceUtil.getResourcePermissionsCount(companyId,name,ResourceConstants.SCOPE_INDIVIDUAL,primKey);
  if (count > 0) {
    return resources;
  }
  if ((groupId > 0) && ResourceActionsUtil.isRootModelResource(name)) {
    Resource individualResource=resources.get(0);
    if (individualResource.getScope() != ResourceConstants.SCOPE_INDIVIDUAL) {
      throw new IllegalArgumentException("The first resource must be an individual scope");
    }
    individualResource.setPrimKey(name);
    return resources;
  }
  return resources;
}
