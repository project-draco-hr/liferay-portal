{
  logHasUserPermission(groupId,name,primKey,actionId,stopWatch,1);
  if (ResourceBlockLocalServiceUtil.isSupported(name)) {
    ResourceBlockIdsBag resourceBlockIdsBag=getResourceBlockIdsBag(companyId,groupId,getUserId(),name);
    boolean value=ResourceBlockLocalServiceUtil.hasPermission(name,GetterUtil.getLong(primKey),actionId,resourceBlockIdsBag);
    logHasUserPermission(groupId,name,primKey,actionId,stopWatch,2);
    return value;
  }
  List<Resource> resources=getResources(companyId,groupId,name,primKey,actionId);
  logHasUserPermission(groupId,name,primKey,actionId,stopWatch,3);
  boolean value=ResourceLocalServiceUtil.hasUserPermissions(user.getUserId(),groupId,resources,actionId,getRoleIds(user.getUserId(),groupId));
  logHasUserPermission(groupId,name,primKey,actionId,stopWatch,4);
  return value;
}
