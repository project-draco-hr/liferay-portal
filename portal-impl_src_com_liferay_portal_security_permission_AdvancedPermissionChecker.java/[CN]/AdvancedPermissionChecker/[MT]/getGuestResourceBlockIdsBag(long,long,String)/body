{
  ResourceBlockIdsBag resourceBlockIdsBag=PermissionCacheUtil.getResourceBlockIdsBag(companyId,groupId,defaultUserId,name);
  if (resourceBlockIdsBag != null) {
    return resourceBlockIdsBag;
  }
  try {
    resourceBlockIdsBag=ResourceBlockLocalServiceUtil.getResourceBlockIdsBag(getCompanyId(),groupId,name,getGuestUserRoleIds());
    PermissionCacheUtil.putResourceBlockIdsBag(companyId,groupId,defaultUserId,name,resourceBlockIdsBag);
    return resourceBlockIdsBag;
  }
 catch (  Exception e) {
    PermissionCacheUtil.removeResourceBlockIdsBag(getCompanyId(),groupId,defaultUserId,name);
    throw e;
  }
}
