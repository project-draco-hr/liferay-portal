{
  if (ownerId != getUserId()) {
    return false;
  }
  boolean ownerIsDefaultUser=false;
  if (ownerId == defaultUserId) {
    ownerIsDefaultUser=true;
  }
  if (ownerIsDefaultUser) {
    List<String> guestUnsupportedActions;
    if (name.indexOf(CharPool.PERIOD) != -1) {
      guestUnsupportedActions=ResourceActionsUtil.getModelResourceGuestUnsupportedActions(name);
    }
 else {
      guestUnsupportedActions=ResourceActionsUtil.getPortletResourceGuestUnsupportedActions(name);
    }
    if (guestUnsupportedActions.contains(actionId)) {
      return false;
    }
  }
  try {
    if (ResourceBlockLocalServiceUtil.isSupported(name)) {
      PermissionedModel permissionedModel=ResourceBlockLocalServiceUtil.getPermissionedModel(name,GetterUtil.getLong(primKey));
      long groupId=0;
      if (permissionedModel instanceof GroupedModel) {
        GroupedModel groupedModel=(GroupedModel)permissionedModel;
        groupId=groupedModel.getGroupId();
      }
      ResourceBlockIdsBag resourceBlockIdsBag=null;
      if (ownerIsDefaultUser) {
        resourceBlockIdsBag=getGuestResourceBlockIdsBag(companyId,groupId,name);
      }
 else {
        resourceBlockIdsBag=getOwnerResourceBlockIdsBag(companyId,groupId,name);
      }
      return ResourceBlockLocalServiceUtil.hasPermission(name,permissionedModel,actionId,resourceBlockIdsBag);
    }
    long ownerRoleId=getOwnerRoleId();
    if (ownerIsDefaultUser) {
      Role guestRole=RoleLocalServiceUtil.getRole(companyId,RoleConstants.GUEST);
      ownerRoleId=guestRole.getRoleId();
    }
    return ResourcePermissionLocalServiceUtil.hasResourcePermission(companyId,name,ResourceConstants.SCOPE_INDIVIDUAL,primKey,ownerRoleId,actionId);
  }
 catch (  Exception e) {
    if (_log.isDebugEnabled()) {
      _log.debug(e,e);
    }
  }
  return false;
}
