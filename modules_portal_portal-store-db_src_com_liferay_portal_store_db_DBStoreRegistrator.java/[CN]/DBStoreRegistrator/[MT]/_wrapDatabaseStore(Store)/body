{
  DB db=DBFactoryUtil.getDB();
  String dbType=db.getType();
  if (!dbType.equals(DB.TYPE_POSTGRESQL)) {
    return store;
  }
  ClassLoader classLoader=ClassLoaderUtil.getPortalClassLoader();
  MethodInterceptor transactionAdviceMethodInterceptor=(MethodInterceptor)PortalBeanLocatorUtil.locate("transactionAdvice");
  MethodInterceptor tempFileMethodInterceptor=new TempFileMethodInterceptor();
  List<MethodInterceptor> methodInterceptors=Arrays.asList(transactionAdviceMethodInterceptor,tempFileMethodInterceptor);
  store=(Store)ProxyUtil.newProxyInstance(classLoader,new Class<?>[]{Store.class},new MethodInterceptorInvocationHandler(store,methodInterceptors));
  return new ProxyDelegatorDBStore(store);
}
