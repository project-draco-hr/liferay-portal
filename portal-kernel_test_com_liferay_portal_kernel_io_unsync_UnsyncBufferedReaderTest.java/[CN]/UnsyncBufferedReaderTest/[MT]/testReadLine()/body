{
  UnsyncBufferedReader ubr=new UnsyncBufferedReader(new StringReader("abc\rde"),5);
  String line=ubr.readLine();
  assertEquals("abc",line);
  assertEquals(4,ubr.index);
  ubr=new UnsyncBufferedReader(new StringReader("abc\nde"),5);
  line=ubr.readLine();
  assertEquals("abc",line);
  assertEquals(4,ubr.index);
  ubr=new UnsyncBufferedReader(new StringReader("abc\r\nde"),5);
  line=ubr.readLine();
  assertEquals("abc",line);
  assertEquals(5,ubr.index);
  ubr=new UnsyncBufferedReader(new StringReader("abc"),5);
  line=ubr.readLine();
  assertEquals("abc",line);
  assertEquals(0,ubr.index);
  line=ubr.readLine();
  assertNull(line);
  ubr=new UnsyncBufferedReader(new StringReader("abcdefghijklmn\r"),5);
  line=ubr.readLine();
  assertEquals("abcdefghijklmn",line);
  assertEquals(5,ubr.index);
}
