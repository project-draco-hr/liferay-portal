{
  UnsyncBufferedReader ubr=new UnsyncBufferedReader(new StringReader("abcdefghijklmnopqrstuvwxyz"),5);
  assertEquals(0,ubr.index);
  assertEquals(0,ubr.firstInvalidIndex);
  assertEquals('a',ubr.read());
  assertEquals(1,ubr.index);
  assertEquals(5,ubr.firstInvalidIndex);
  assertEquals(3,ubr.skip(3));
  assertEquals(4,ubr.index);
  assertEquals(5,ubr.firstInvalidIndex);
  assertEquals(1,ubr.skip(3));
  assertEquals(5,ubr.index);
  assertEquals(5,ubr.firstInvalidIndex);
  assertEquals(6,ubr.skip(6));
  assertEquals(11,ubr.index);
  assertEquals(5,ubr.firstInvalidIndex);
  assertEquals('l',ubr.read());
  assertEquals(1,ubr.index);
  assertEquals(5,ubr.firstInvalidIndex);
  ubr.mark(10);
  assertEquals(4,ubr.skip(4));
  assertEquals(5,ubr.index);
  assertEquals(5,ubr.firstInvalidIndex);
  assertEquals(5,ubr.skip(6));
  assertEquals(10,ubr.index);
  assertEquals(10,ubr.firstInvalidIndex);
  ubr.reset();
  assertEquals(1,ubr.index);
  assertEquals(10,ubr.firstInvalidIndex);
  assertEquals('m',ubr.read());
}
