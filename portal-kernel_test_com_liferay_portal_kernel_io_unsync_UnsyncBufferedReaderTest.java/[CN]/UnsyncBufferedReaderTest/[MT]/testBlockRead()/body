{
  StringReader stringReader=new StringReader("abcdefghi");
  UnsyncBufferedReader unsyncBufferedReader=new UnsyncBufferedReader(stringReader,5);
  assertEquals(5,unsyncBufferedReader.buffer.length);
  assertTrue(stringReader.ready());
  assertTrue(unsyncBufferedReader.ready());
  assertEquals('a',unsyncBufferedReader.read());
  assertEquals(1,unsyncBufferedReader.index);
  assertEquals(5,unsyncBufferedReader.firstInvalidIndex);
  char[] buffer=new char[3];
  int read=unsyncBufferedReader.read(buffer);
  assertEquals(buffer.length,read);
  assertEquals('b',buffer[0]);
  assertEquals('c',buffer[1]);
  assertEquals('d',buffer[2]);
  assertEquals(4,unsyncBufferedReader.index);
  assertEquals(5,unsyncBufferedReader.firstInvalidIndex);
  assertEquals('e',unsyncBufferedReader.read());
  assertEquals(5,unsyncBufferedReader.index);
  assertEquals(5,unsyncBufferedReader.firstInvalidIndex);
  read=unsyncBufferedReader.read(buffer);
  assertEquals(buffer.length,read);
  assertEquals('f',buffer[0]);
  assertEquals('g',buffer[1]);
  assertEquals('h',buffer[2]);
  assertEquals(3,unsyncBufferedReader.index);
  assertEquals(4,unsyncBufferedReader.firstInvalidIndex);
  read=unsyncBufferedReader.read(buffer);
  assertEquals(1,read);
  assertEquals('i',buffer[0]);
  assertEquals(-1,unsyncBufferedReader.read(buffer));
}
