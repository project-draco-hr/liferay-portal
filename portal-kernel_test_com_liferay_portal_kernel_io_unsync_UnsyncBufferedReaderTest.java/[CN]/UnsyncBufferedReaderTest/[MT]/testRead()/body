{
  UnsyncBufferedReader ubr=new UnsyncBufferedReader(new StringReader("ab\r\nef"),3);
  assertEquals(3,ubr.buffer.length);
  assertEquals(0,ubr.index);
  assertEquals('a',ubr.read());
  assertEquals(1,ubr.index);
  assertEquals('b',ubr.read());
  assertEquals(2,ubr.index);
  assertEquals('\r',ubr.read());
  assertEquals(3,ubr.index);
  assertEquals('\n',ubr.read());
  assertEquals(1,ubr.index);
  assertEquals('e',ubr.read());
  assertEquals(2,ubr.index);
  assertEquals('f',ubr.read());
  assertEquals(3,ubr.index);
  assertEquals(-1,ubr.read());
}
