{
  StringBuilder sb=new StringBuilder();
  boolean upperCase=false;
  boolean afterDot=false;
  for (int i=0; i < s.length(); i++) {
    char c=s.charAt(i);
    if (afterDot) {
      sb.append(c);
      continue;
    }
    if (c == '.') {
      afterDot=true;
      sb.append(c);
      continue;
    }
    boolean nextUpperCase=true;
    if (i < (s.length() - 1)) {
      char nextChar=s.charAt(i + 1);
      if (nextChar != '.') {
        nextUpperCase=Character.isUpperCase(nextChar);
      }
    }
    if ((i > 0) && Character.isUpperCase(c)) {
      if (upperCase && nextUpperCase) {
        c=Character.toLowerCase(c);
      }
      upperCase=true;
    }
 else {
      upperCase=false;
    }
    sb.append(c);
  }
  return sb.toString();
}
