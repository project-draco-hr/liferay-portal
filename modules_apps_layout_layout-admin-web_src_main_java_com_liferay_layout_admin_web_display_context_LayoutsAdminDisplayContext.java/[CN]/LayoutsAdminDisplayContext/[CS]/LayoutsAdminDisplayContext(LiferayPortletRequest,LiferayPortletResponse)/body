{
  _liferayPortletRequest=liferayPortletRequest;
  _liferayPortletResponse=liferayPortletResponse;
  _groupDisplayContextHelper=new GroupDisplayContextHelper(PortalUtil.getHttpServletRequest(liferayPortletRequest));
  _themeDisplay=(ThemeDisplay)liferayPortletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  boolean privateLayout=ParamUtil.getBoolean(liferayPortletRequest,"privateLayout");
  Layout selLayout=getSelLayout();
  if (selLayout != null) {
    privateLayout=selLayout.isPrivateLayout();
  }
  Group liveGroup=getLiveGroup();
  if (liveGroup.isUser() && !isPublicLayoutsModifiable() && isPrivateLayoutsModifiable()&& !privateLayout) {
    privateLayout=true;
  }
  Group selGroup=getSelGroup();
  if (selGroup.isLayoutSetPrototype()) {
    privateLayout=true;
  }
  _privateLayout=privateLayout;
  _liferayPortletRequest.setAttribute(com.liferay.portal.kernel.util.WebKeys.LAYOUT_DESCRIPTIONS,getLayoutDescriptions());
}
