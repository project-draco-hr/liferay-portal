{
  File repositoryRoot=new File(JCRFactoryImpl.REPOSITORY_ROOT);
  if (repositoryRoot.exists()) {
    return;
  }
  repositoryRoot.mkdirs();
  File tempFile=new File(SystemProperties.get(SystemProperties.TMP_DIR) + File.separator + Time.getTimestamp());
  String repositoryXmlPath="com/liferay/portal/jcr/jackrabbit/dependencies/repository-ext.xml";
  ClassLoader classLoader=getClass().getClassLoader();
  if (classLoader.getResource(repositoryXmlPath) == null) {
    repositoryXmlPath="com/liferay/portal/jcr/jackrabbit/dependencies/repository.xml";
  }
  String content=StringUtil.read(classLoader,repositoryXmlPath);
  FileUtil.write(tempFile,content);
  FileUtil.copyFile(tempFile,new File(JCRFactoryImpl.CONFIG_FILE_PATH));
  tempFile.delete();
}
