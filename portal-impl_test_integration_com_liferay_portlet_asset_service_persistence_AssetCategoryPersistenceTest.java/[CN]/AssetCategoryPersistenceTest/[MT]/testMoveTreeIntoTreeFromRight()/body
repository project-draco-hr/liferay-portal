{
  long groupId=nextLong();
  AssetCategory rootAssetCategory=addAssetCategory(groupId,null);
  AssetCategory leftRootChildAssetCategory=addAssetCategory(groupId,rootAssetCategory.getCategoryId());
  rootAssetCategory=_persistence.fetchByPrimaryKey(rootAssetCategory.getPrimaryKey());
  AssetCategory rightRootChildAssetCategory=addAssetCategory(groupId,rootAssetCategory.getCategoryId());
  rootAssetCategory=_persistence.fetchByPrimaryKey(rootAssetCategory.getPrimaryKey());
  long previousRootLeftCategoryId=rootAssetCategory.getLeftCategoryId();
  long previousRootRightCategoryId=rootAssetCategory.getRightCategoryId();
  AssetCategory parentAssetCategory=addAssetCategory(groupId,null);
  AssetCategory parentChildAssetCategory=addAssetCategory(groupId,parentAssetCategory.getCategoryId());
  parentAssetCategory=_persistence.fetchByPrimaryKey(parentAssetCategory.getPrimaryKey());
  parentAssetCategory.setParentCategoryId(leftRootChildAssetCategory.getCategoryId());
  _persistence.update(parentAssetCategory,false);
  rootAssetCategory=_persistence.fetchByPrimaryKey(rootAssetCategory.getPrimaryKey());
  leftRootChildAssetCategory=_persistence.fetchByPrimaryKey(leftRootChildAssetCategory.getPrimaryKey());
  rightRootChildAssetCategory=_persistence.fetchByPrimaryKey(rightRootChildAssetCategory.getPrimaryKey());
  parentChildAssetCategory=_persistence.fetchByPrimaryKey(parentChildAssetCategory.getPrimaryKey());
  assertEquals(previousRootLeftCategoryId,rootAssetCategory.getLeftCategoryId());
  assertEquals(previousRootRightCategoryId + 4,rootAssetCategory.getRightCategoryId());
  assertEquals(rootAssetCategory.getLeftCategoryId() + 1,leftRootChildAssetCategory.getLeftCategoryId());
  assertEquals(rootAssetCategory.getRightCategoryId() - 3,leftRootChildAssetCategory.getRightCategoryId());
  assertEquals(rootAssetCategory.getLeftCategoryId() + 7,rightRootChildAssetCategory.getLeftCategoryId());
  assertEquals(rootAssetCategory.getRightCategoryId() - 1,rightRootChildAssetCategory.getRightCategoryId());
  assertEquals(leftRootChildAssetCategory.getLeftCategoryId() + 1,parentAssetCategory.getLeftCategoryId());
  assertEquals(leftRootChildAssetCategory.getRightCategoryId() - 1,parentAssetCategory.getRightCategoryId());
  assertEquals(parentAssetCategory.getLeftCategoryId() + 1,parentChildAssetCategory.getLeftCategoryId());
  assertEquals(parentAssetCategory.getRightCategoryId() - 1,parentChildAssetCategory.getRightCategoryId());
}
