{
  validate(nameMap,script);
  if (!smallImage || Validator.isNotNull(smallImageURL) || (smallImageFile == null)|| (smallImageBytes == null)) {
    return;
  }
  String smallImageName=smallImageFile.getName();
  boolean validSmallImageExtension=false;
  DDMServiceConfiguration ddmServiceConfiguration=getDDMServiceConfiguration(groupId);
  for (  String smallImageExtension : ddmServiceConfiguration.smallImageExtensions()) {
    if (StringPool.STAR.equals(smallImageExtension) || StringUtil.endsWith(smallImageName,smallImageExtension)) {
      validSmallImageExtension=true;
      break;
    }
  }
  if (!validSmallImageExtension) {
    throw new TemplateSmallImageNameException(smallImageName);
  }
  long smallImageMaxSize=ddmServiceConfiguration.smallImageMaxSize();
  if ((smallImageMaxSize > 0) && (smallImageBytes.length > smallImageMaxSize)) {
    throw new TemplateSmallImageSizeException("Image " + smallImageName + " has "+ smallImageBytes.length+ " bytes and exceeds the maximum size of "+ smallImageMaxSize);
  }
}
