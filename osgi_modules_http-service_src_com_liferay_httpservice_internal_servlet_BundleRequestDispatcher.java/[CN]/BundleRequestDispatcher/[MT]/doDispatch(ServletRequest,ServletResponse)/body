{
  ClassLoader contextClassLoader=ClassLoaderUtil.getContextClassLoader();
  PACLPolicy paclPolicy=PortalSecurityManagerThreadLocal.getPACLPolicy();
  try {
    ClassLoader pluginClassLoader=_bundleServletContext.getClassLoader();
    PACLPolicy pluginPACLPolicy=PACLPolicyManager.getPACLPolicy(pluginClassLoader);
    PortalSecurityManagerThreadLocal.setPACLPolicy(pluginPACLPolicy);
    ClassLoaderUtil.setContextClassLoader(pluginClassLoader);
    for (    ServletRequestListener servletRequestListener : _bundleServletContext.getServletRequestListeners()) {
      ServletRequestEvent servletRequestEvent=new ServletRequestEvent(_bundleServletContext,servletRequest);
      servletRequestListener.requestInitialized(servletRequestEvent);
    }
    _bundleFilterChain.doFilter(servletRequest,servletResponse);
    for (    ServletRequestListener servletRequestListener : _bundleServletContext.getServletRequestListeners()) {
      ServletRequestEvent servletRequestEvent=new ServletRequestEvent(_bundleServletContext,servletRequest);
      servletRequestListener.requestDestroyed(servletRequestEvent);
    }
  }
  finally {
    ClassLoaderUtil.setContextClassLoader(contextClassLoader);
    PortalSecurityManagerThreadLocal.setPACLPolicy(paclPolicy);
  }
}
