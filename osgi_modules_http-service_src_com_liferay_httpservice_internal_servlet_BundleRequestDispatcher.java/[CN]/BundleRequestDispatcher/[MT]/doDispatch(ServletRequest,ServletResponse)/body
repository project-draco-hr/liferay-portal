{
  ClassLoader contextClassLoader=ClassLoaderUtil.getContextClassLoader();
  ClassLoader pluginClassLoader=_bundleServletContext.getClassLoader();
  PACLPolicy paclPolicy=PortalSecurityManagerThreadLocal.getPACLPolicy();
  try {
    PACLPolicy pluginPACLPolicy=PACLPolicyManager.getPACLPolicy(pluginClassLoader);
    PortalSecurityManagerThreadLocal.setPACLPolicy(pluginPACLPolicy);
    ClassLoaderUtil.setContextClassLoader(pluginClassLoader);
    for (    ServletRequestListener servletRequestListener : _bundleServletContext.getServletRequestListeners()) {
      servletRequestListener.requestInitialized(new ServletRequestEvent(_bundleServletContext,request));
    }
    _bundleFilterChain.doFilter(request,response);
    for (    ServletRequestListener servletRequestListener : _bundleServletContext.getServletRequestListeners()) {
      servletRequestListener.requestDestroyed(new ServletRequestEvent(_bundleServletContext,request));
    }
  }
  finally {
    ClassLoaderUtil.setContextClassLoader(contextClassLoader);
    PortalSecurityManagerThreadLocal.setPACLPolicy(paclPolicy);
  }
}
