{
  try {
    String keywords=searchContext.getKeywords();
    Analyzer analyzer=LuceneHelperUtil.getAnalyzer();
    BooleanQuery suggestKeywordQuery=new BooleanQuery();
    addTermQuery(suggestKeywordQuery,Field.COMPANY_ID,String.valueOf(searchContext.getCompanyId()),null,BooleanClause.Occur.MUST);
    String localizedKeywordFieldName=DocumentImpl.getLocalizedName(searchContext.getLocale(),Field.KEYWORD_SEARCH);
    QueryParser queryPaser=new QueryParser(LuceneHelperUtil.getVersion(),localizedKeywordFieldName,analyzer);
    Query query=queryPaser.parse(keywords);
    BooleanClause keywordTermQuery=new BooleanClause(query,BooleanClause.Occur.MUST);
    suggestKeywordQuery.add(keywordTermQuery);
    Locale locale=searchContext.getLocale();
    addTermQuery(suggestKeywordQuery,Field.LOCALE,locale.toString(),null,BooleanClause.Occur.MUST);
    addTermQuery(suggestKeywordQuery,Field.PORTLET_ID,PortletKeys.SEARCH,null,BooleanClause.Occur.MUST);
    IndexSearcher indexSearcher=LuceneHelperUtil.getSearcher(searchContext.getCompanyId(),true);
    return doPerformSearch(indexSearcher,suggestKeywordQuery,localizedKeywordFieldName,_defaultRelevancyChecker,maxResults);
  }
 catch (  Exception e) {
    throw new SearchException("Unable to suggest query",e);
  }
}
