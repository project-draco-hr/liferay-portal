{
  try {
    IndexSearcher indexSearcher=LuceneHelperUtil.getSearcher(searchContext.getCompanyId(),true);
    BooleanQuery suggestKeywordQuery=new BooleanQuery();
    addTermQuery(suggestKeywordQuery,Field.COMPANY_ID,String.valueOf(searchContext.getCompanyId()),null,BooleanClause.Occur.MUST);
    String localizedKeywordFieldName=DocumentImpl.getLocalizedName(searchContext.getLanguageId(),Field.KEYWORD_SEARCH);
    QueryParser queryParser=new QueryParser(LuceneHelperUtil.getVersion(),localizedKeywordFieldName,LuceneHelperUtil.getAnalyzer());
    Query query=queryParser.parse(searchContext.getKeywords());
    BooleanClause keywordTermQuery=new BooleanClause(query,BooleanClause.Occur.MUST);
    suggestKeywordQuery.add(keywordTermQuery);
    String languageId=searchContext.getLanguageId();
    addTermQuery(suggestKeywordQuery,Field.LANGUAGE_ID,languageId,null,BooleanClause.Occur.MUST);
    addTermQuery(suggestKeywordQuery,Field.PORTLET_ID,PortletKeys.SEARCH,null,BooleanClause.Occur.MUST);
    return performSearch(indexSearcher,suggestKeywordQuery,localizedKeywordFieldName,_defaultRelevancyChecker,max);
  }
 catch (  Exception e) {
    throw new SearchException("Unable to suggest query",e);
  }
}
