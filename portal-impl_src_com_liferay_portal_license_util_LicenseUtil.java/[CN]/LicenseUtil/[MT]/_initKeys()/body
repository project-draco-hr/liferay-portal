{
  ClassLoader classLoader=PortalClassLoaderUtil.getClassLoader();
  if (_symmetricKey == null) {
    try {
      KeyGenerator keyGenerator=KeyGenerator.getInstance("AES");
      keyGenerator.init(128,new SecureRandom());
      _symmetricKey=keyGenerator.generateKey();
      URL url=classLoader.getResource("com/liferay/portal/license/public.key");
      byte[] bytes=IOUtils.toByteArray(url.openStream());
      X509EncodedKeySpec publicKeySpec=new X509EncodedKeySpec(bytes);
      KeyFactory keyFactory=KeyFactory.getInstance("RSA");
      PublicKey publicKey=keyFactory.generatePublic(publicKeySpec);
      byte[] encryptedSymmetricKey=Encryptor.encryptUnencoded(publicKey,_symmetricKey.getEncoded());
      _encryptedSymmetricKey=Base64.objectToString(encryptedSymmetricKey);
    }
 catch (    Exception e) {
      _log.error(e,e);
    }
  }
}
