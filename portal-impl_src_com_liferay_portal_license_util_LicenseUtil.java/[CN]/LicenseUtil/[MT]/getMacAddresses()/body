{
  if (_macAddresses != null) {
    return new HashSet<String>(_macAddresses);
  }
  Set<String> macAddresses=new HashSet<String>();
  String osName=System.getProperty("os.name");
  String executable=null;
  String arguments=null;
  if (StringUtil.startsWith(osName,"win")) {
    executable="ipconfig";
    arguments="/all";
  }
 else {
    if (StringUtil.startsWith(osName,"aix")) {
      executable="netstat";
      arguments="-ina";
    }
 else {
      executable="ifconfig";
      arguments="-a";
    }
    File sbinDir=new File("/sbin",executable);
    if (sbinDir.exists()) {
      executable="/sbin/".concat(executable);
    }
  }
  try {
    Runtime runtime=Runtime.getRuntime();
    Process process=runtime.exec(new String[]{executable,arguments});
    macAddresses=getMacAddresses(osName,process.getInputStream());
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
  _macAddresses=macAddresses;
  return new HashSet<String>(macAddresses);
}
