{
  if (_macAddresses == null) {
    _macAddresses=new HashSet<String>();
    try {
      Process process=null;
      Runtime runtime=Runtime.getRuntime();
      File ifconfigFile=new File("/sbin/ifconfig");
      if (ifconfigFile.exists()) {
        process=runtime.exec(new String[]{"/sbin/ifconfig","-a"},null);
      }
 else {
        process=runtime.exec(new String[]{"ipconfig","/all"},null);
      }
      BufferedReader bufferedReader=new BufferedReader(new InputStreamReader(process.getInputStream()),128);
      String line=null;
      while ((line=bufferedReader.readLine()) != null) {
        Matcher matcher=_macAddressPattern.matcher(line);
        if (matcher.find()) {
          String macAddress=matcher.group(1);
          if (Validator.isNotNull(macAddress)) {
            macAddress=macAddress.toLowerCase();
            macAddress=StringUtil.replace(macAddress,"-",":");
            _macAddresses.add(macAddress);
          }
        }
      }
      bufferedReader.close();
    }
 catch (    Exception e) {
      _log.error(e,e);
    }
  }
  return new HashSet<String>(_macAddresses);
}
