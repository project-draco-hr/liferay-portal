{
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  if (!cmd.equals(Constants.UPDATE)) {
    return;
  }
  boolean allAssetVocabularies=ParamUtil.getBoolean(actionRequest,"allAssetVocabularies");
  long[] assetVocabularyIds=StringUtil.split(ParamUtil.getString(actionRequest,"assetVocabularyIds"),0L);
  String portletResource=ParamUtil.getString(actionRequest,"portletResource");
  PortletPreferences preferences=PortletPreferencesFactoryUtil.getPortletSetup(actionRequest,portletResource);
  preferences.setValue("all-asset-vocabularies",String.valueOf(allAssetVocabularies));
  preferences.setValues("asset-vocabulary-ids",ArrayUtil.toStringArray(assetVocabularyIds));
  preferences.store();
  SessionMessages.add(actionRequest,portletConfig.getPortletName() + ".doConfigure");
}
