{
  OutputStream os=null;
  try {
    if (!response.isCommitted() || ServerDetector.isPramati()) {
      if (contentLength == 0) {
        contentLength=bytes.length;
      }
      response.setContentLength(contentLength);
      os=new BufferedOutputStream(response.getOutputStream());
      os.write(bytes,0,contentLength);
    }
  }
 catch (  SocketException e) {
    if (_log.isWarnEnabled()) {
      _log.warn(e);
    }
  }
catch (  ClientAbortException e) {
    if (_log.isWarnEnabled()) {
      _log.warn(e);
    }
  }
 finally {
    cleanUp(os);
  }
}
