{
  AssetEntry entry=assetEntryLocalService.getEntry(entryId);
  String className=entry.getClassName();
  long classPK=entry.getClassPK();
  AssetRendererFactory factory=AssetRendererFactoryRegistryUtil.getAssetRendererFactoryByClassName(className);
  try {
    if (!factory.hasPermission(getPermissionChecker(),classPK,ActionKeys.DELETE)) {
      throw new PrincipalException();
    }
  }
 catch (  Exception e) {
    throw new PortalException(e);
  }
  assetEntryLocalService.deleteAssetEntry(entryId);
}
