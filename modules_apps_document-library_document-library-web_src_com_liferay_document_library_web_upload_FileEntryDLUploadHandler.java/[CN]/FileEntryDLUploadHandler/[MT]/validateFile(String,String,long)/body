{
  long maxSize=PrefsPropsUtil.getLong(PropsKeys.DL_FILE_MAX_SIZE);
  if ((maxSize > 0) && (size > maxSize)) {
    throw new FileSizeException();
  }
  String extension=FileUtil.getExtension(fileName);
  String[] imageExtensions=PrefsPropsUtil.getStringArray(PropsKeys.DL_IMAGE_EXTENSIONS,StringPool.COMMA);
  for (  String imageExtension : imageExtensions) {
    if (StringPool.STAR.equals(imageExtension) || imageExtension.equals(StringPool.PERIOD + extension)) {
      return;
    }
  }
  throw new ImageNameException("Invalid image for file name " + fileName);
}
