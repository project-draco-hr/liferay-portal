{
  Session session=null;
  try {
    if (phone.isNew() || phone.isModified()) {
      session=openSession();
      if (phone.isNew()) {
        PhoneHBM phoneHBM=new PhoneHBM();
        phoneHBM.setPhoneId(phone.getPhoneId());
        phoneHBM.setCompanyId(phone.getCompanyId());
        phoneHBM.setUserId(phone.getUserId());
        phoneHBM.setUserName(phone.getUserName());
        phoneHBM.setCreateDate(phone.getCreateDate());
        phoneHBM.setModifiedDate(phone.getModifiedDate());
        phoneHBM.setClassName(phone.getClassName());
        phoneHBM.setClassPK(phone.getClassPK());
        phoneHBM.setNumber(phone.getNumber());
        phoneHBM.setExtension(phone.getExtension());
        phoneHBM.setTypeId(phone.getTypeId());
        phoneHBM.setPrimary(phone.getPrimary());
        session.save(phoneHBM);
        session.flush();
      }
 else {
        PhoneHBM phoneHBM=(PhoneHBM)session.get(PhoneHBM.class,phone.getPrimaryKey());
        if (phoneHBM != null) {
          phoneHBM.setCompanyId(phone.getCompanyId());
          phoneHBM.setUserId(phone.getUserId());
          phoneHBM.setUserName(phone.getUserName());
          phoneHBM.setCreateDate(phone.getCreateDate());
          phoneHBM.setModifiedDate(phone.getModifiedDate());
          phoneHBM.setClassName(phone.getClassName());
          phoneHBM.setClassPK(phone.getClassPK());
          phoneHBM.setNumber(phone.getNumber());
          phoneHBM.setExtension(phone.getExtension());
          phoneHBM.setTypeId(phone.getTypeId());
          phoneHBM.setPrimary(phone.getPrimary());
          session.flush();
        }
 else {
          phoneHBM=new PhoneHBM();
          phoneHBM.setPhoneId(phone.getPhoneId());
          phoneHBM.setCompanyId(phone.getCompanyId());
          phoneHBM.setUserId(phone.getUserId());
          phoneHBM.setUserName(phone.getUserName());
          phoneHBM.setCreateDate(phone.getCreateDate());
          phoneHBM.setModifiedDate(phone.getModifiedDate());
          phoneHBM.setClassName(phone.getClassName());
          phoneHBM.setClassPK(phone.getClassPK());
          phoneHBM.setNumber(phone.getNumber());
          phoneHBM.setExtension(phone.getExtension());
          phoneHBM.setTypeId(phone.getTypeId());
          phoneHBM.setPrimary(phone.getPrimary());
          session.save(phoneHBM);
          session.flush();
        }
      }
      phone.setNew(false);
      phone.setModified(false);
    }
    return phone;
  }
 catch (  HibernateException he) {
    throw new SystemException(he);
  }
 finally {
    closeSession(session);
  }
}
