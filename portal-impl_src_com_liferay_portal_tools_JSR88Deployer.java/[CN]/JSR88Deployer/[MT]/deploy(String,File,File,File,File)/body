{
  String appServerId=GetterUtil.getString(ServerDetector.getServerId());
  String jsr88DeployEnabled=PropsUtil.get(appServerId + StringPool.PERIOD + PropsKeys.JSR88_DEPLOYMENT_ENABLED);
  if (jsr88DeployEnabled.equalsIgnoreCase("true")) {
    File tempDirWar=new File(tempDir.getParent(),deployDir.getName());
    if (tempDirWar.exists()) {
      tempDirWar.delete();
    }
    boolean success=tempDir.renameTo(tempDirWar);
    if (success) {
      _doJsr88Deploy(displayName,tempDirWar);
    }
 else {
      _doJsr88Deploy(displayName,tempDir);
    }
  }
 else {
    if (!tempDir.renameTo(deployDir)) {
      WarTask.war(srcFile,deployDir,"WEB-INF/web.xml",webXml);
    }
    DeleteTask.deleteDirectory(tempDir);
  }
}
