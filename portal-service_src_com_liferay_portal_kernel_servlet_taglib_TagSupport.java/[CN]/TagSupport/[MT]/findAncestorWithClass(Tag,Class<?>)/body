{
  boolean isInterface=false;
  if ((fromTag == null) || (clazz == null) || (!Tag.class.isAssignableFrom(clazz) && !(isInterface=clazz.isInterface()))) {
    return null;
  }
  while (true) {
    Tag parentTag=fromTag.getParent();
    if (parentTag == null) {
      return null;
    }
    if ((isInterface && clazz.isInstance(parentTag)) || clazz.isAssignableFrom(parentTag.getClass())) {
      return parentTag;
    }
 else {
      fromTag=parentTag;
    }
  }
}
