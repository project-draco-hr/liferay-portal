{
  boolean isInterface=false;
  if ((from == null) || (clazz == null) || (!Tag.class.isAssignableFrom(clazz) && !(isInterface=clazz.isInterface()))) {
    return null;
  }
  while (true) {
    Tag tag=from.getParent();
    if (tag == null) {
      return null;
    }
    if ((isInterface && clazz.isInstance(tag)) || clazz.isAssignableFrom(tag.getClass())) {
      return tag;
    }
 else {
      from=tag;
    }
  }
}
