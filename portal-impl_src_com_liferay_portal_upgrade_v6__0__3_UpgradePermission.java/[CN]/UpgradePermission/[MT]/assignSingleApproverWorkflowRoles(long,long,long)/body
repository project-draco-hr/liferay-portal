{
  try (PreparedStatement ps1=connection.prepareStatement("select classNameId from Group_ where groupId = ?")){
    ps1.setLong(1,groupId);
    try (ResultSet rs1=ps1.executeQuery()){
      long classNameId=0;
      if (rs1.next()) {
        classNameId=rs1.getLong("classNameId");
      }
      String className=PortalUtil.getClassName(classNameId);
      long communityContentReviewerRoleId=getRoleId(companyId,_ROLE_COMMUNITY_CONTENT_REVIEWER);
      long organizationContentReviewerRoleId=getRoleId(companyId,_ROLE_ORGANIZATION_CONTENT_REVIEWER);
      long portalContentReviewerRoleId=getRoleId(companyId,_ROLE_PORTAL_CONTENT_REVIEWER);
      StringBundler sb=new StringBundler(5);
      sb.append("(select User_.* from User_, Users_Roles where ");
      sb.append("User_.userId = Users_Roles.userId and ");
      sb.append("Users_Roles.roleId = ?) union all (select User_.* ");
      sb.append("from User_, UserGroupRole where User_.userId = ");
      sb.append("UserGroupRole.userId and UserGroupRole.roleId = ?)");
      try (PreparedStatement ps2=connection.prepareStatement(sb.toString())){
        ps2.setLong(1,roleId);
        ps2.setLong(2,roleId);
        try (ResultSet rs2=ps2.executeQuery()){
          while (rs2.next()) {
            long userId=rs2.getLong("userId");
            if (className.equals("com.liferay.portal.model.Company")) {
              addUserRole(userId,portalContentReviewerRoleId);
            }
 else             if (className.equals("com.liferay.portal.model.Group")) {
              addUserGroupRole(userId,groupId,communityContentReviewerRoleId);
            }
 else             if (className.equals("com.liferay.portal.model." + "Organization")) {
              addUserGroupRole(userId,groupId,organizationContentReviewerRoleId);
            }
          }
        }
       }
     }
   }
 }
