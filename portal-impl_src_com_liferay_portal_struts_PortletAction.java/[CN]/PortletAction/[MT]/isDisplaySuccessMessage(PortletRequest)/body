{
  if (!SessionErrors.isEmpty(portletRequest)) {
    return false;
  }
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  Layout layout=themeDisplay.getLayout();
  if (layout.isTypeControlPanel()) {
    return true;
  }
  String portletId=(String)portletRequest.getAttribute(WebKeys.PORTLET_ID);
  try {
    LayoutTypePortlet layoutTypePortlet=themeDisplay.getLayoutTypePortlet();
    if (layoutTypePortlet.hasPortletId(portletId)) {
      return true;
    }
  }
 catch (  PortalException pe) {
    if (_log.isDebugEnabled()) {
      _log.debug(pe,pe);
    }
  }
  Portlet portlet=PortletLocalServiceUtil.getPortletById(themeDisplay.getCompanyId(),portletId);
  if (portlet.isAddDefaultResource()) {
    return true;
  }
  return false;
}
