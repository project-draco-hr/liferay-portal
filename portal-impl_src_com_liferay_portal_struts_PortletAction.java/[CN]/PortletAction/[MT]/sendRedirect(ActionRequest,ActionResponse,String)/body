{
  if (SessionErrors.isEmpty(actionRequest)) {
    String successMessage=ParamUtil.getString(actionRequest,"successMessage");
    SessionMessages.add(actionRequest,"request_processed",successMessage);
  }
  if (redirect == null) {
    redirect=ParamUtil.getString(actionRequest,"redirect");
  }
  if (Validator.isNotNull(redirect)) {
    HttpServletRequest request=PortalUtil.getHttpServletRequest(actionRequest);
    if (BrowserSnifferUtil.isIe(request) && (BrowserSnifferUtil.getMajorVersion(request) == 6.0)) {
      redirect=StringUtil.replace(redirect,StringPool.POUND,"&#");
    }
    actionResponse.sendRedirect(redirect);
  }
}
