{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  LayoutTypePortlet layoutTypePortlet=themeDisplay.getLayoutTypePortlet();
  boolean hasPortletId=false;
  String portletId=(String)actionRequest.getAttribute(WebKeys.PORTLET_ID);
  try {
    hasPortletId=layoutTypePortlet.hasPortletId(portletId);
  }
 catch (  Exception e) {
  }
  Layout layout=layoutTypePortlet.getLayout();
  if (layout.isTypeControlPanel()) {
    hasPortletId=true;
  }
  Portlet portlet=PortletLocalServiceUtil.getPortletById(themeDisplay.getCompanyId(),portletId);
  return hasPortletId || portlet.isAddDefaultResource();
}
