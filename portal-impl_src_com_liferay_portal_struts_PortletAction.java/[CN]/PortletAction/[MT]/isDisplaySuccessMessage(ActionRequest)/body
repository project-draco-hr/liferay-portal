{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  LayoutTypePortlet layoutTypePortlet=themeDisplay.getLayoutTypePortlet();
  Layout layout=layoutTypePortlet.getLayout();
  if (layout.isTypeControlPanel()) {
    return true;
  }
  String portletId=(String)actionRequest.getAttribute(WebKeys.PORTLET_ID);
  boolean hasPortletId=false;
  try {
    hasPortletId=layoutTypePortlet.hasPortletId(portletId);
  }
 catch (  Exception e) {
  }
  Portlet portlet=PortletLocalServiceUtil.getPortletById(themeDisplay.getCompanyId(),portletId);
  if (hasPortletId || portlet.isAddDefaultResource()) {
    return true;
  }
 else {
    return false;
  }
}
