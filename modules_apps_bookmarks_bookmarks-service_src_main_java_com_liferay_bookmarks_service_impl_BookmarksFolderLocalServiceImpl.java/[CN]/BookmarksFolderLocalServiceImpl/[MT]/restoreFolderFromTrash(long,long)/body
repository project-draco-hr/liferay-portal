{
  BookmarksFolder folder=bookmarksFolderPersistence.findByPrimaryKey(folderId);
  TrashEntry trashEntry=trashEntryLocalService.getEntry(BookmarksFolder.class.getName(),folderId);
  updateStatus(userId,folder,trashEntry.getStatus());
  List<Object> foldersAndEntries=bookmarksFolderLocalService.getFoldersAndEntries(folder.getGroupId(),folder.getFolderId(),WorkflowConstants.STATUS_IN_TRASH);
  restoreDependentsFromTrash(foldersAndEntries);
  trashEntryLocalService.deleteEntry(trashEntry.getEntryId());
  JSONObject extraDataJSONObject=JSONFactoryUtil.createJSONObject();
  extraDataJSONObject.put("title",folder.getName());
  socialActivityLocalService.addActivity(userId,folder.getGroupId(),BookmarksFolder.class.getName(),folder.getFolderId(),SocialActivityConstants.TYPE_RESTORE_FROM_TRASH,extraDataJSONObject.toString(),0);
  return folder;
}
