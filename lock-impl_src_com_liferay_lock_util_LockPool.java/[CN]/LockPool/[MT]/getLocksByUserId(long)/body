{
  Set<Lock> locksByUserId=_instance._getLocksByUserId(userId);
  Iterator<Lock> itr=locksByUserId.iterator();
  while (itr.hasNext()) {
    Lock lock=itr.next();
    if (lock.isExpired()) {
      itr.remove();
      _instance._getLocks(lock.getClassName(),lock.getPrimaryKey()).remove(lock);
      _instance._getLocksByCompanyId(lock.getCompanyId()).remove(lock);
    }
  }
  return locksByUserId;
}
