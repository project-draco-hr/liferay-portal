{
  File file=FileUtil.createTempFile("lar");
  InputStream inputStream=_dlFileEntryLocalService.getFileAsStream(fileEntry.getFileEntryId(),fileEntry.getVersion(),false);
  ZipReader zipReader=null;
  ManifestSummary manifestSummary=null;
  try {
    FileUtil.write(file,inputStream);
    Group group=_groupLocalService.getGroup(groupId);
    String userIdStrategy=MapUtil.getString(parameterMap,PortletDataHandlerKeys.USER_ID_STRATEGY);
    zipReader=ZipReaderFactoryUtil.getZipReader(file);
    PortletDataContext portletDataContext=PortletDataContextFactoryUtil.createImportPortletDataContext(group.getCompanyId(),groupId,parameterMap,getUserIdStrategy(userId,userIdStrategy),zipReader);
    manifestSummary=getManifestSummary(portletDataContext);
  }
  finally {
    StreamUtil.cleanUp(inputStream);
    if (zipReader != null) {
      zipReader.close();
    }
    FileUtil.delete(file);
  }
  return manifestSummary;
}
