{
  List<String> headerNames=new ArrayList<>();
  List<DDMFormField> ddmFormfields=ddmStructure.getDDMFormFields(false);
  int totalColumns=_COLUMS_TO_SHOW_ON_LIST;
  if (ddmFormfields.size() < totalColumns) {
    totalColumns=ddmFormfields.size();
  }
  for (int i=0; i < totalColumns; i++) {
    DDMFormField ddmFormField=ddmFormfields.get(i);
    _ddmFormFields.add(ddmFormField);
    LocalizedValue label=ddmFormField.getLabel();
    headerNames.add(label.getString(_liferayPortletRequest.getLocale()));
  }
  PortletURL currentURLObj=PortletURLUtil.getCurrent(_liferayPortletRequest,_liferayPortletResponse);
  _recordSearchContainer=new RecordSearch(_liferayPortletRequest,currentURLObj,headerNames);
  RowChecker rowChecker=new RowChecker(_liferayPortletResponse);
  rowChecker.setCssClass("entry-selector");
  _recordSearchContainer.setRowChecker(rowChecker);
  String orderByCol=ParamUtil.getString(_liferayPortletRequest,"orderByCol");
  String orderByType=ParamUtil.getString(_liferayPortletRequest,"orderByType");
  PortalPreferences preferences=PortletPreferencesFactoryUtil.getPortalPreferences(_liferayPortletRequest);
  if (Validator.isNull(orderByCol)) {
    orderByCol=preferences.getValue(DDLFormPortletKeys.DYNAMIC_DATA_LISTS_FORM_ADMIN,"view-entries-order-by-col","modified-date");
    orderByType=preferences.getValue(DDLFormPortletKeys.DYNAMIC_DATA_LISTS_FORM_ADMIN,"view-entries-order-by-type","asc");
  }
 else {
    preferences.setValue(DDLFormPortletKeys.DYNAMIC_DATA_LISTS_FORM_ADMIN,"view-entries-order-by-col",orderByCol);
    preferences.setValue(DDLFormPortletKeys.DYNAMIC_DATA_LISTS_FORM_ADMIN,"view-entries-order-by-type",orderByType);
  }
  OrderByComparator<DDLRecord> orderByComparator=DDLFormAdminPortletUtil.getRecordOrderByComparator(orderByCol,orderByType);
  _recordSearchContainer.setOrderByCol(orderByCol);
  _recordSearchContainer.setOrderByComparator(orderByComparator);
  _recordSearchContainer.setOrderByType(orderByType);
  loadRecordSearchContainer();
}
