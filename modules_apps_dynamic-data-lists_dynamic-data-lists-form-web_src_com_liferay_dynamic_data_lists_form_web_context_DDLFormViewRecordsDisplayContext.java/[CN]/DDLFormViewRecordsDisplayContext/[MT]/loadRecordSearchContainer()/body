{
  List<DDLRecord> results=null;
  int total=0;
  DisplayTerms displayTerms=_recordSearchContainer.getDisplayTerms();
  int status=WorkflowConstants.STATUS_ANY;
  if (Validator.isNull(displayTerms.getKeywords())) {
    total=DDLRecordLocalServiceUtil.getRecordsCount(_recordSet.getRecordSetId(),status);
    _recordSearchContainer.setTotal(total);
    results=DDLRecordLocalServiceUtil.getRecords(_recordSet.getRecordSetId(),status,_recordSearchContainer.getStart(),_recordSearchContainer.getEnd(),_recordSearchContainer.getOrderByComparator());
  }
 else {
    SearchContext searchContext=SearchContextFactory.getInstance(_liferayPortletRequest.getHttpServletRequest());
    searchContext.setAttribute("recordSetId",_recordSet.getRecordSetId());
    searchContext.setAttribute(Field.STATUS,status);
    searchContext.setEnd(_recordSearchContainer.getEnd());
    searchContext.setKeywords(displayTerms.getKeywords());
    searchContext.setStart(_recordSearchContainer.getStart());
    BaseModelSearchResult<DDLRecord> baseModelSearchResult=DDLRecordLocalServiceUtil.searchDDLRecords(searchContext);
    results=baseModelSearchResult.getBaseModels();
    total=baseModelSearchResult.getLength();
    _recordSearchContainer.setTotal(total);
  }
  _recordSearchContainer.setResults(results);
}
