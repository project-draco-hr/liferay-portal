{
  ScriptingRequest request=new ScriptingRequest(invocation);
  Message message=new Message();
  message.setPayload(request);
  try {
    if (request.hasReturnValue()) {
      ScriptingResultContainer response=(ScriptingResultContainer)MessageBusUtil.sendSynchronousMessage(DestinationNames.SCRIPTING,message);
      if (response.hasError()) {
        throw response.getException();
      }
 else {
        return response.getResult();
      }
    }
 else {
      MessageBusUtil.sendMessage(DestinationNames.SCRIPTING,message);
      return null;
    }
  }
 catch (  MessageBusException ex) {
    throw new ScriptingException("Unable to invoke scripting method",ex);
  }
}
