{
  Company company=CompanyLocalServiceUtil.getCompany(_companyId);
  _domain=company.getMx();
  _userName=PrefsPropsUtil.getString(_companyId,PropsKeys.GOOGLE_APPS_USERNAME);
  _password=PrefsPropsUtil.getString(_companyId,PropsKeys.GOOGLE_APPS_PASSWORD);
  if (!_userName.contains(StringPool.AT)) {
    _userName+=StringPool.AT + _domain;
  }
  Http.Options options=new Http.Options();
  options.addPart("Email",_userName);
  options.addPart("Passwd",_password);
  options.addPart("accountType","HOSTED");
  options.addPart("service","apps");
  options.setLocation("https://www.google.com/accounts/ClientLogin");
  options.setPost(true);
  String content=HttpUtil.URLtoString(options);
  Properties properties=PropertiesUtil.load(content);
  String error=properties.getProperty("Error");
  if (error != null) {
    _log.info("Unable to initialize authentication token: " + error);
  }
  _authenticationToken=properties.getProperty("Auth");
  _initTime=System.currentTimeMillis();
}
