{
  if (ServerDetector.isWebLogic()) {
    doDestroy();
  }
 else {
    DestroyThread destroyThread=new DestroyThread();
    destroyThread.start();
    try {
      destroyThread.join();
    }
 catch (    InterruptedException ie) {
      throw new RuntimeException(ie);
    }
    Exception e=destroyThread.getException();
    if (e != null) {
      if (e instanceof RuntimeException) {
        throw (RuntimeException)e;
      }
 else {
        throw new RuntimeException(e);
      }
    }
  }
}
