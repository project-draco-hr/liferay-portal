{
  boolean myLock=false;
  boolean otherLock=false;
  while ((!myLock) || (!otherLock)) {
    try {
      myLock=lock.tryLock();
      otherLock=other.lock.tryLock();
    }
  finally {
      if ((!myLock) || (!otherLock)) {
        if (myLock) {
          lock.unlock();
        }
        if (otherLock) {
          other.lock.unlock();
        }
        Thread.yield();
      }
    }
  }
}
