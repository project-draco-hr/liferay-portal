{
  Map<String,String> tokens=getTokens();
  _ddmStructure=DDMStructureTestUtil.addStructure(TestPropsValues.getGroupId(),"name");
  String xsl="$name.getData()";
  _ddmTemplate=DDMTemplateTestUtil.addTemplate(_ddmStructure.getStructureId(),TemplateConstants.LANG_TYPE_VM,xsl);
  String xml=DDMStructureTestUtil.getSampleStructuredContent("name","Joe Bloggs");
  String script="#parse(\"$templatesPath/" + _ddmTemplate.getTemplateKey() + "\")";
  String content=JournalUtil.transform(null,tokens,Constants.VIEW,"en_US",SAXReaderUtil.read(xml),null,script,TemplateConstants.LANG_TYPE_VM);
  Assert.assertEquals("Joe Bloggs",content);
  String legacyScript="#parse(\"$journalTemplatesPath/" + _ddmTemplate.getTemplateKey() + "\")";
  content=JournalUtil.transform(null,tokens,Constants.VIEW,"en_US",SAXReaderUtil.read(xml),null,legacyScript,TemplateConstants.LANG_TYPE_VM);
  Assert.assertEquals("Joe Bloggs",content);
}
