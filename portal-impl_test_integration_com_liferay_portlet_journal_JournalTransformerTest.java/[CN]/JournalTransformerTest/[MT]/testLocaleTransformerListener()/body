{
  Map<String,String> tokens=getTokens();
  Document document=JournalTestUtil.createDocument("en_US,pt_BR","en_US");
  Element dynamicElementElement=JournalTestUtil.addDynamicElement(document.getRootElement(),"text","name");
  JournalTestUtil.addDynamicContent(dynamicElementElement,"en_US","Joe Bloggs");
  JournalTestUtil.addDynamicContent(dynamicElementElement,"pt_BR","Joao da Silva");
  String xml=document.asXML();
  String script="$name.getData()";
  String content=JournalUtil.transform(null,tokens,Constants.VIEW,"en_US",xml,script,JournalTemplateConstants.LANG_TYPE_VM);
  Assert.assertEquals("Joe Bloggs",content);
  content=JournalUtil.transform(null,tokens,Constants.VIEW,"pt_BR",xml,script,JournalTemplateConstants.LANG_TYPE_VM);
  Assert.assertEquals("Joao da Silva",content);
  content=JournalUtil.transform(null,tokens,Constants.VIEW,"fr_CA",xml,script,JournalTemplateConstants.LANG_TYPE_VM);
  Assert.assertEquals("Joe Bloggs",content);
}
