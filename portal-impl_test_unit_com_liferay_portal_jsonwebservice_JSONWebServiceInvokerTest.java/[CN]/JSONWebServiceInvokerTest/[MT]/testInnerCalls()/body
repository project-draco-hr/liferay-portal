{
  Map<String,Object> map=new LinkedHashMap<String,Object>();
  Map<String,Object> params=new LinkedHashMap<String,Object>();
  map.put("$data = /foo/get-foo-data",params);
  params.put("id",Integer.valueOf(173));
  Map<String,Object> map2=new LinkedHashMap<String,Object>();
  params.put("$world = /foo/hello-world",map2);
  map2.put("@userId","$data.id");
  map2.put("worldName","Jupiter");
  String command=toJSON(map);
  JSONWebServiceAction jsonWebServiceAction=prepareInvokerAction(command);
  Object result=jsonWebServiceAction.invoke();
  assertTrue(result instanceof Map);
  String jsonResult=toJSON(result);
  assertEquals("{\"id\":173,\"height\":177,\"name\":\"John Doe\"," + "\"value\":\"foo!\",\"world\":\"Welcome 173 to Jupiter\"}",jsonResult);
}
