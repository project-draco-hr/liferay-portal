{
  try {
    Set<Long> permissionPKSet=SetUtil.fromArray(permissionPKs);
    List<com.liferay.portal.model.Permission> permissions=getPermissions(pk);
    for (    com.liferay.portal.model.Permission permission : permissions) {
      if (!permissionPKSet.contains(permission.getPrimaryKey())) {
        removePermission.remove(pk,permission.getPrimaryKey());
      }
 else {
        permissionPKSet.remove(permission.getPrimaryKey());
      }
    }
    for (    Long permissionPK : permissionPKSet) {
      addPermission.add(pk,permissionPK);
    }
  }
 catch (  Exception e) {
    throw processException(e);
  }
 finally {
    FinderCacheUtil.clearCache(RoleModelImpl.MAPPING_TABLE_ROLES_PERMISSIONS_NAME);
  }
}
