{
  try {
    Set<Long> userPKSet=SetUtil.fromArray(userPKs);
    List<com.liferay.portal.model.User> users=getUsers(pk);
    for (    com.liferay.portal.model.User user : users) {
      if (!userPKSet.contains(user.getPrimaryKey())) {
        removeUser.remove(pk,user.getPrimaryKey());
      }
 else {
        userPKSet.remove(user.getPrimaryKey());
      }
    }
    for (    Long userPK : userPKSet) {
      addUser.add(pk,userPK);
    }
  }
 catch (  Exception e) {
    throw processException(e);
  }
 finally {
    FinderCacheUtil.clearCache(RoleModelImpl.TABLE_USERS_ROLES);
  }
}
