{
  JobDetail jobDetail=scheduler.getJobDetail(jobKey);
  TriggerKey triggerKey=new TriggerKey(jobKey.getName(),jobKey.getGroup());
  if (jobDetail == null) {
    return;
  }
  unregisterMessageListener(scheduler,jobKey);
  if (scheduler == _memoryScheduler) {
    scheduler.unscheduleJob(triggerKey);
    return;
  }
  JobDataMap jobDataMap=jobDetail.getJobDataMap();
  JobState jobState=getJobState(jobDataMap);
  Trigger trigger=scheduler.getTrigger(triggerKey);
  jobState.setTriggerDate(END_TIME,new Date());
  jobState.setTriggerDate(FINAL_FIRE_TIME,trigger.getPreviousFireTime());
  jobState.setTriggerDate(NEXT_FIRE_TIME,null);
  jobState.setTriggerDate(PREVIOUS_FIRE_TIME,trigger.getPreviousFireTime());
  jobState.setTriggerDate(START_TIME,trigger.getStartTime());
  jobState.setTriggerState(TriggerState.UNSCHEDULED);
  jobState.clearExceptions();
  jobDataMap.put(JOB_STATE,JobStateSerializeUtil.serialize(jobState));
  scheduler.unscheduleJob(triggerKey);
  scheduler.addJob(jobDetail,true);
}
