{
  List<Throwable> throwables=new ArrayList<Throwable>();
  Throwable tempThrowable=throwable;
  while (tempThrowable != null) {
    throwables.add(tempThrowable);
    tempThrowable=tempThrowable.getCause();
  }
  Throwable resultThrowable=null;
  boolean sanitized=false;
  for (int i=throwables.size() - 1; i > -1; i--) {
    Throwable curThrowable=throwables.get(i);
    String message=curThrowable.toString();
    String sanitizedMessage=sanitize(message,null);
    if (!sanitized && (sanitizedMessage == null)) {
      resultThrowable=curThrowable;
      continue;
    }
    if (sanitizedMessage == null) {
      sanitizedMessage=message;
    }
    sanitized=true;
    resultThrowable=new LogSanitizerException(sanitizedMessage,curThrowable.getStackTrace(),resultThrowable);
  }
  return resultThrowable;
}
