{
  LayoutSet layoutSet=LayoutSetLocalServiceUtil.getLayoutSet(groupId,privateLayout);
  if (dateRange != null) {
    Date startDate=dateRange.getStartDate();
    Date originalLastPublishDate=getLastPublishDate(layoutSet);
    if ((originalLastPublishDate != null) && (startDate != null) && startDate.after(originalLastPublishDate)) {
      return;
    }
  }
  if (lastPublishDate == null) {
    lastPublishDate=new Date();
  }
  UnicodeProperties settingsProperties=layoutSet.getSettingsProperties();
  settingsProperties.setProperty(_LAST_PUBLISH_DATE,String.valueOf(lastPublishDate.getTime()));
  LayoutSetLocalServiceUtil.updateSettings(layoutSet.getGroupId(),layoutSet.isPrivateLayout(),settingsProperties.toString());
}
