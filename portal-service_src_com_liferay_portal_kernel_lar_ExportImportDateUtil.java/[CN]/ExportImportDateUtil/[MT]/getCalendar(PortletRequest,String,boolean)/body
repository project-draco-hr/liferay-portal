{
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  int dateMonth=ParamUtil.getInteger(portletRequest,paramPrefix + "Month");
  int dateDay=ParamUtil.getInteger(portletRequest,paramPrefix + "Day");
  int dateYear=ParamUtil.getInteger(portletRequest,paramPrefix + "Year");
  int dateHour=ParamUtil.getInteger(portletRequest,paramPrefix + "Hour");
  int dateMinute=ParamUtil.getInteger(portletRequest,paramPrefix + "Minute");
  int dateAmPm=ParamUtil.getInteger(portletRequest,paramPrefix + "AmPm");
  if (dateAmPm == Calendar.PM) {
    dateHour+=12;
  }
  Locale locale=null;
  TimeZone timeZone=null;
  if (timeZoneSensitive) {
    locale=themeDisplay.getLocale();
    timeZone=themeDisplay.getTimeZone();
  }
 else {
    locale=LocaleUtil.getDefault();
    timeZone=TimeZoneUtil.getTimeZone(StringPool.UTC);
  }
  Calendar calendar=CalendarFactoryUtil.getCalendar(timeZone,locale);
  calendar.set(Calendar.MONTH,dateMonth);
  calendar.set(Calendar.DATE,dateDay);
  calendar.set(Calendar.YEAR,dateYear);
  calendar.set(Calendar.HOUR_OF_DAY,dateHour);
  calendar.set(Calendar.MINUTE,dateMinute);
  calendar.set(Calendar.SECOND,0);
  calendar.set(Calendar.MILLISECOND,0);
  return calendar;
}
