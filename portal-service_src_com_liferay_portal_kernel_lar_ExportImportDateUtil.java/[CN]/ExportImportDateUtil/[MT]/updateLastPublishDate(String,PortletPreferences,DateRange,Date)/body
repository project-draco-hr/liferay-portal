{
  if (lastPublishDate == null) {
    lastPublishDate=new Date();
  }
  try {
    portletPreferences.setValue("last-publish-date",String.valueOf(lastPublishDate.getTime()));
    portletPreferences.store();
  }
 catch (  UnsupportedOperationException uoe) {
    if (_log.isDebugEnabled()) {
      _log.debug("Not updating the portlet setup for " + portletId + " because no setup was returned for the current "+ "page");
    }
  }
catch (  Exception e) {
    _log.error(e,e);
  }
}
