{
  if (_initialized) {
    return;
  }
  _initialized=true;
  Company company=CompanyLocalServiceUtil.getCompany(companyId);
  setContextAttribute("[$COMPANY_ID$]",company.getCompanyId());
  setContextAttribute("[$COMPANY_MX$]",company.getMx());
  setContextAttribute("[$COMPANY_NAME$]",company.getName());
  setContextAttribute("[$PORTAL_URL$]",getPortalURL(company));
  if (groupId > 0) {
    Group group=GroupLocalServiceUtil.getGroup(groupId);
    setContextAttribute("[$SITE_NAME$]",group.getDescriptiveName());
  }
  if ((userId > 0) && Validator.isNotNull(_contextUserPrefix)) {
    setContextAttribute("[$" + _contextUserPrefix + "_USER_ADDRESS$]",HtmlUtil.escape(PortalUtil.getUserEmailAddress(userId)));
    setContextAttribute("[$" + _contextUserPrefix + "_USER_NAME$]",HtmlUtil.escape(PortalUtil.getUserName(userId,StringPool.BLANK)));
  }
  mailId=PortalUtil.getMailId(company.getMx(),_mailIdPopPortletPrefix,_mailIdIds);
}
