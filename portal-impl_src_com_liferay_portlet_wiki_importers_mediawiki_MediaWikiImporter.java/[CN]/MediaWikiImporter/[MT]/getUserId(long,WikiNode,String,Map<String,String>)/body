{
  User user=null;
  String emailAddress=usersMap.get(author);
  if (Validator.isNotNull(emailAddress)) {
    user=UserLocalServiceUtil.fetchUserByEmailAddress(node.getCompanyId(),emailAddress);
  }
 else {
    user=UserLocalServiceUtil.fetchUserByScreenName(node.getCompanyId(),StringUtil.toLowerCase(author));
  }
  if (user != null) {
    return user.getUserId();
  }
  return userId;
}
