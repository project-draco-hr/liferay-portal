{
  Matcher matcher=_categoriesPattern.matcher(content);
  List<String> tagsEntries=new ArrayList<String>();
  while (matcher.find()) {
    String categoryName=matcher.group(1);
    categoryName=normalize(categoryName,75);
    TagsEntry tagsEntry=null;
    try {
      tagsEntry=TagsEntryLocalServiceUtil.getEntry(node.getCompanyId(),categoryName);
    }
 catch (    NoSuchEntryException nsee) {
      ServiceContext serviceContext=new ServiceContext();
      serviceContext.setAddCommunityPermissions(true);
      serviceContext.setAddGuestPermissions(true);
      serviceContext.setScopeGroupId(node.getGroupId());
      tagsEntry=TagsEntryLocalServiceUtil.addEntry(userId,null,categoryName,null,null,serviceContext);
    }
    tagsEntries.add(tagsEntry.getName());
  }
  if (content.indexOf(_WORK_IN_PROGRESS) != -1) {
    tagsEntries.add(_WORK_IN_PROGRESS_TAG);
  }
  return tagsEntries.toArray(new String[tagsEntries.size()]);
}
