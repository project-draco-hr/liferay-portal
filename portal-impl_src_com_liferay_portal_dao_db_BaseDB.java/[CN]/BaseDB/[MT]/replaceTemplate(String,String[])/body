{
  if ((template == null) || (TEMPLATE == null) || (actual == null)) {
    return null;
  }
  if (TEMPLATE.length != actual.length) {
    return template;
  }
  StringBundler sb=null;
  int endIndex=0;
  Matcher matcher=_templatePattern.matcher(template);
  while (matcher.find()) {
    int startIndex=matcher.start();
    if (sb == null) {
      sb=new StringBundler();
    }
    sb.append(template.substring(endIndex,startIndex));
    endIndex=matcher.end();
    String matched=template.substring(startIndex,endIndex);
    sb.append(_templateMap.get(matched));
  }
  if (sb == null) {
    return template;
  }
  if (template.length() > endIndex) {
    sb.append(template.substring(endIndex));
  }
  return sb.toString();
}
