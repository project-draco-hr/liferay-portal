{
  if ((template == null) || (TEMPLATE == null) || (actual == null)) {
    return null;
  }
  if (TEMPLATE.length != actual.length) {
    return template;
  }
  Matcher matcher=_bundledPattern.matcher(template);
  StringBundler sb=new StringBundler();
  int endIndex=0;
  while (matcher.find()) {
    int startIndex=matcher.start();
    sb.append(template.substring(endIndex,startIndex));
    endIndex=matcher.end();
    String matched=template.substring(startIndex,endIndex);
    sb.append(_replaceMap.get(matched));
  }
  if (template.length() > endIndex) {
    sb.append(template.substring(endIndex));
  }
  return sb.toString();
}
