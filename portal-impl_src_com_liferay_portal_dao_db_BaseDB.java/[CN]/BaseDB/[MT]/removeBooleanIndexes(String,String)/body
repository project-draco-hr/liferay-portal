{
  String portalData=readFile(sqlDir + "/portal-tables.sql");
  if (Validator.isNull(portalData)) {
    return StringPool.BLANK;
  }
  UnsyncBufferedReader unsyncBufferedReader=new UnsyncBufferedReader(new UnsyncStringReader(data));
  StringBundler sb=new StringBundler();
  String line=null;
  while ((line=unsyncBufferedReader.readLine()) != null) {
    boolean append=true;
    int x=line.indexOf(" on ");
    if (x != -1) {
      int y=line.indexOf(" (",x);
      String table=line.substring(x + 4,y);
      x=y + 2;
      y=line.indexOf(")",x);
      String[] columns=StringUtil.split(line.substring(x,y));
      x=portalData.indexOf("create table " + table + " (");
      y=portalData.indexOf(");",x);
      String portalTableData=portalData.substring(x,y);
      for (int i=0; i < columns.length; i++) {
        if (portalTableData.contains(columns[i].trim() + " BOOLEAN")) {
          append=false;
          break;
        }
      }
    }
    if (append) {
      sb.append(line);
      sb.append("\n");
    }
  }
  unsyncBufferedReader.close();
  return sb.toString();
}
