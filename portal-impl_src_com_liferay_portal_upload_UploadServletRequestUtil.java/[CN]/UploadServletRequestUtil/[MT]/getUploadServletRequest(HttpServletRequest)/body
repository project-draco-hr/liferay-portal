{
  HttpServletRequestWrapper httpReqWrapper=null;
  if (httpReq instanceof HttpServletRequestWrapper) {
    httpReqWrapper=(HttpServletRequestWrapper)httpReq;
  }
  UploadServletRequest uploadReq=null;
  while (uploadReq == null) {
    if (httpReqWrapper instanceof UploadServletRequest) {
      uploadReq=(UploadServletRequest)httpReqWrapper;
    }
 else {
      HttpServletRequest req=(HttpServletRequest)httpReqWrapper.getRequest();
      if (!(req instanceof HttpServletRequestWrapper)) {
        uploadReq=new UploadServletRequest(req);
        break;
      }
 else {
        httpReqWrapper=(HttpServletRequestWrapper)httpReqWrapper.getRequest();
      }
    }
  }
  return uploadReq;
}
