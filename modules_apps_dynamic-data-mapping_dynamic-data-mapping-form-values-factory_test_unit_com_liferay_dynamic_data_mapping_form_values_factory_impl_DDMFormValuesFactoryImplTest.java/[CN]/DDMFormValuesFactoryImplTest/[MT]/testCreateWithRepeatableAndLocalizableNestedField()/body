{
  DDMForm ddmForm=DDMFormTestUtil.createDDMForm();
  DDMFormField nameDDMFormField=DDMFormTestUtil.createTextDDMFormField("Name",true,true,false);
  DDMFormField phoneDDMFormField=DDMFormTestUtil.createTextDDMFormField("Phone",true,true,false);
  nameDDMFormField.addNestedDDMFormField(phoneDDMFormField);
  ddmForm.addDDMFormField(nameDDMFormField);
  DDMFormValues expectedDDMFormValues=createDDMFormValues(ddmForm,createAvailableLocales(LocaleUtil.BRAZIL,LocaleUtil.US),LocaleUtil.US);
  DDMFormFieldValue paulDDMFormFieldValue=createDDMFormFieldValue("wqer","Name",createLocalizedValue("Paul","Paulo",LocaleUtil.US));
  paulDDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("gatu","Phone",createLocalizedValue("12","34",LocaleUtil.US)));
  paulDDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("hato","Phone",createLocalizedValue("56","78",LocaleUtil.US)));
  expectedDDMFormValues.addDDMFormFieldValue(paulDDMFormFieldValue);
  DDMFormFieldValue joeDDMFormFieldValue=createDDMFormFieldValue("fahu","Name",createLocalizedValue("Joe","Joao",LocaleUtil.US));
  joeDDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("jamh","Phone",createLocalizedValue("90","01",LocaleUtil.US)));
  expectedDDMFormValues.addDDMFormFieldValue(joeDDMFormFieldValue);
  MockHttpServletRequest httpServletRequest=new MockHttpServletRequest();
  httpServletRequest.addParameter("availableLanguageIds","en_US,pt_BR");
  httpServletRequest.addParameter("defaultLanguageId",LocaleUtil.toLanguageId(LocaleUtil.US));
  httpServletRequest.addParameter("ddm__Name_wqer_0__en_US","Paul");
  httpServletRequest.addParameter("ddm__Name_wqer_0__pt_BR","Paulo");
  httpServletRequest.addParameter("ddm__Name_fahu_1__en_US","Joe");
  httpServletRequest.addParameter("ddm__Name_fahu_1__pt_BR","Joao");
  httpServletRequest.addParameter("ddm__Name_wqer_0#Phone_gatu_0__en_US","12");
  httpServletRequest.addParameter("ddm__Name_wqer_0#Phone_gatu_0__pt_BR","34");
  httpServletRequest.addParameter("ddm__Name_wqer_0#Phone_hato_1__en_US","56");
  httpServletRequest.addParameter("ddm__Name_wqer_0#Phone_hato_1__pt_BR","78");
  httpServletRequest.addParameter("ddm__Name_fahu_1#Phone_jamh_0__en_US","90");
  httpServletRequest.addParameter("ddm__Name_fahu_1#Phone_jamh_0__pt_BR","01");
  DDMFormValues actualDDMFormValues=_ddmFormValuesFactory.create(httpServletRequest,ddmForm);
  assertEquals(expectedDDMFormValues,actualDDMFormValues);
}
