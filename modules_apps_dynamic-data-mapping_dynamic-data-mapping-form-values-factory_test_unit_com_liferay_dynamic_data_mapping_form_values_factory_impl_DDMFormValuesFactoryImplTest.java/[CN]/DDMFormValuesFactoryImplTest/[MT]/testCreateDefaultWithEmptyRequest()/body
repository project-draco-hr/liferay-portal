{
  DDMForm ddmForm=DDMFormTestUtil.createDDMForm();
  DDMFormField nameDDMFormField=DDMFormTestUtil.createTextDDMFormField("Name",true,false,false);
  LocalizedValue namePredefinedValue=createLocalizedValue("Joe",LocaleUtil.US);
  nameDDMFormField.setPredefinedValue(namePredefinedValue);
  DDMFormField phoneDDMFormField=DDMFormTestUtil.createTextDDMFormField("Phone",true,false,false);
  LocalizedValue phonePredefinedValue=createLocalizedValue("123",LocaleUtil.US);
  phoneDDMFormField.setPredefinedValue(phonePredefinedValue);
  nameDDMFormField.addNestedDDMFormField(phoneDDMFormField);
  ddmForm.addDDMFormField(nameDDMFormField);
  DDMFormValues expectedDDMFormValues=createDDMFormValues(ddmForm,createAvailableLocales(LocaleUtil.US),LocaleUtil.US);
  DDMFormFieldValue nameDDMFormFieldValue=createDDMFormFieldValue("gatu","Name",namePredefinedValue);
  nameDDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("waht","Phone",phonePredefinedValue));
  expectedDDMFormValues.addDDMFormFieldValue(nameDDMFormFieldValue);
  DDMFormValues actualDDMFormValues=_ddmFormValuesFactory.create(new MockHttpServletRequest(),ddmForm);
  List<DDMFormFieldValue> actualDDMFormFieldValues=actualDDMFormValues.getDDMFormFieldValues();
  DDMFormFieldValue actualNameDDMFormFieldValue=actualDDMFormFieldValues.get(0);
  Value actualNameDDMFormFieldValueValue=actualNameDDMFormFieldValue.getValue();
  Assert.assertEquals(LocaleUtil.US,actualNameDDMFormFieldValueValue.getDefaultLocale());
  Assert.assertEquals("Joe",actualNameDDMFormFieldValueValue.getString(LocaleUtil.US));
  List<DDMFormFieldValue> actualPhoneDDMFormFieldValues=actualNameDDMFormFieldValue.getNestedDDMFormFieldValues();
  DDMFormFieldValue actualPhoneDDMFormFieldValue=actualPhoneDDMFormFieldValues.get(0);
  Value actualPhoneDDMFormFieldValueValue=actualPhoneDDMFormFieldValue.getValue();
  Assert.assertEquals(LocaleUtil.US,actualPhoneDDMFormFieldValueValue.getDefaultLocale());
  Assert.assertEquals("123",actualPhoneDDMFormFieldValueValue.getString(LocaleUtil.US));
}
