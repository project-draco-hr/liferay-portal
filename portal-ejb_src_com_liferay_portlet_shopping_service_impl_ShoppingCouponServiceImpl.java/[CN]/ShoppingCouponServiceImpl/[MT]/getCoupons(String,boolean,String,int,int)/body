{
  if (!ShoppingCategoryServiceUtil.hasAdmin() || !getUser().getCompanyId().equals(companyId)) {
    throw new PrincipalException();
  }
  if (Validator.isNull(discountType)) {
    return ShoppingCouponUtil.findByC_A(companyId,active,begin,end);
  }
 else {
    return ShoppingCouponUtil.findByC_A_D(companyId,active,discountType,begin,end);
  }
}
