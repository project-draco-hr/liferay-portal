{
  if (_themeDisplay == null) {
    return getUrl();
  }
  if (getType().equals("link_to_layout")) {
    String layoutType=getLayoutType();
    long layoutId=getLayoutId();
    boolean privateLayout=layoutType.startsWith("private");
    try {
      Layout layout=LayoutLocalServiceUtil.getLayout(_themeDisplay.getScopeGroupId(),privateLayout,layoutId);
      return PortalUtil.getLayoutFriendlyURL(layout,_themeDisplay);
    }
 catch (    Exception e) {
      if (_log.isDebugEnabled()) {
        _log.debug("Error finding friendly Url on page " + _themeDisplay.getURLCurrent(),e);
      }
      return getUrl();
    }
  }
  return StringPool.BLANK;
}
