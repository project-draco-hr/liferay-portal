{
  if ((start == ALL_POS) && (end == ALL_POS)) {
    return query.list();
  }
 else {
    if (dialect.supportsLimit()) {
      query.setMaxResults(end - start);
      query.setFirstResult(start);
      return query.list();
    }
 else {
      List<Object> list=new ArrayList<Object>();
      ScrollableResults sr=query.scroll();
      if (sr.first() && sr.scroll(start)) {
        for (int i=start; i < end; i++) {
          Object obj=sr.get(0);
          list.add(obj);
          if (!sr.next()) {
            break;
          }
        }
      }
      return list;
    }
  }
}
