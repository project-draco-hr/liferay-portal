{
  if (!_running) {
    return;
  }
  SyncAccount syncAccount=ServerEventUtil.synchronizeSyncAccount(syncAccountId);
  Path filePath=Paths.get(syncAccount.getFilePathName());
  SyncFile syncFile=SyncFileService.fetchSyncFile(syncAccount.getFilePathName());
  if (FileUtil.getFileKey(filePath) != syncFile.getSyncFileId()) {
    syncAccount.setActive(false);
    syncAccount.setUiEvent(SyncAccount.UI_EVENT_SYNC_ACCOUNT_FOLDER_MISSING);
    SyncAccountService.update(syncAccount);
    return;
  }
 else   if (!syncAccount.isActive()) {
    SyncAccountService.activateSyncAccount(syncAccountId,false);
    return;
  }
  SyncWatchEventService.deleteSyncWatchEvents(syncAccountId);
  Path dataFilePath=FileUtil.getFilePath(syncAccount.getFilePathName(),".data");
  if (Files.exists(dataFilePath)) {
    FileUtils.cleanDirectory(dataFilePath.toFile());
  }
  if (!ConnectionRetryUtil.retryInProgress(syncAccountId)) {
    syncAccount.setState(SyncAccount.STATE_CONNECTED);
    syncAccount.setUiEvent(SyncAccount.UI_EVENT_NONE);
    SyncAccountService.update(syncAccount);
    ServerEventUtil.synchronizeSyncSites(syncAccountId);
  }
  SyncWatchEventProcessor syncWatchEventProcessor=new SyncWatchEventProcessor(syncAccountId);
  ScheduledFuture<?> scheduledFuture=_localEventsScheduledExecutorService.scheduleAtFixedRate(syncWatchEventProcessor,0,3,TimeUnit.SECONDS);
  WatchEventListener watchEventListener=new SyncSiteWatchEventListener(syncAccountId);
  Watcher watcher=new Watcher(filePath,true,watchEventListener);
  _executorService.execute(watcher);
  if (!ConnectionRetryUtil.retryInProgress(syncAccountId)) {
    synchronizeSyncFiles(filePath,syncAccountId);
  }
  scheduleGetSyncDLObjectUpdateEvent(syncAccount,syncWatchEventProcessor,scheduledFuture,watcher);
}
