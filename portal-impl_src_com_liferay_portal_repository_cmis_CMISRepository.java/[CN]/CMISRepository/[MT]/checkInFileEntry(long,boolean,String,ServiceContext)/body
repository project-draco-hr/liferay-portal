{
  try {
    boolean webDAVCheckInMode=GetterUtil.getBoolean(serviceContext.getAttribute(DLUtil.WEBDAV_CHECK_IN_MODE));
    RepositoryEntry repositoryEntry=RepositoryEntryUtil.findByPrimaryKey(fileEntryId);
    boolean manualCheckInRequired=repositoryEntry.getManualCheckInRequired();
    if (!webDAVCheckInMode && manualCheckInRequired) {
      repositoryEntry.setManualCheckInRequired(false);
      RepositoryEntryUtil.update(repositoryEntry,false);
    }
    Session session=getSession();
    String versionSeriesId=toFileEntryId(fileEntryId);
    Document document=(Document)session.getObject(versionSeriesId);
    document.refresh();
    String versionSeriesCheckedOutId=document.getVersionSeriesCheckedOutId();
    if (Validator.isNotNull(versionSeriesCheckedOutId)) {
      if (!isSupportsMinorVersions()) {
        major=true;
      }
      document=(Document)session.getObject(versionSeriesCheckedOutId);
      document.checkIn(major,null,null,changeLog);
      document=(Document)session.getObject(versionSeriesId);
      document.refresh();
    }
  }
 catch (  Exception e) {
    _log.error("Unable to check in file entry with {fileEntryId=" + fileEntryId + "}",e);
  }
}
