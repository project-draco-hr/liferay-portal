{
  try {
    Session session=getSession();
    String versionSeriesId=toFileEntryId(fileEntryId);
    boolean manualCheckInRequired=GetterUtil.getBoolean(serviceContext.getAttribute(DLUtil.MANUAL_CHECK_IN_REQUIRED));
    if (manualCheckInRequired) {
      RepositoryEntry repositoryEntry=RepositoryEntryUtil.findByPrimaryKey(fileEntryId);
      repositoryEntry.setManualCheckInRequired(manualCheckInRequired);
      RepositoryEntryUtil.update(repositoryEntry,false);
    }
    Document document=(Document)session.getObject(versionSeriesId);
    document.refresh();
    document.checkOut();
    document=(Document)session.getObject(versionSeriesId);
    document.refresh();
  }
 catch (  Exception e) {
    _log.error("Unable checkout file entry with {fileEntryId=" + fileEntryId + "}",e);
  }
  return getFileEntry(fileEntryId);
}
