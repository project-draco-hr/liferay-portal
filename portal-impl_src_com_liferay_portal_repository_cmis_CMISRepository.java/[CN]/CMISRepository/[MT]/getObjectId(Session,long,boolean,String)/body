{
  try {
    ObjectId objectId=toFolderId(session,folderId);
    StringBundler sb=new StringBundler(7);
    sb.append("SELECT cmis:objectId FROM ");
    if (fileEntry) {
      sb.append("cmis:document ");
    }
 else {
      sb.append("cmis:folder ");
    }
    sb.append("WHERE cmis:name = '");
    sb.append(name);
    sb.append("' AND IN_FOLDER('");
    sb.append(objectId.getId());
    sb.append("')");
    String queryString=sb.toString();
    if (_log.isDebugEnabled()) {
      _log.debug("Calling query " + queryString);
    }
    ItemIterable<QueryResult> queryResults=session.query(queryString,false);
    Iterator<QueryResult> itr=queryResults.iterator();
    if (itr.hasNext()) {
      QueryResult queryResult=itr.next();
      PropertyData<String> propertyData=queryResult.getPropertyById(PropertyIds.OBJECT_ID);
      List<String> values=propertyData.getValues();
      return values.get(0);
    }
    return null;
  }
 catch (  SystemException se) {
    throw se;
  }
catch (  Exception e) {
    throw new RepositoryException(e);
  }
}
