{
  Object[] ids=null;
  if (isDocumentRetrievableByVersionSeriesId()) {
    ids=getRepositoryEntryIds(document.getVersionSeriesId());
  }
 else {
    ids=getRepositoryEntryIds(document.getId());
  }
  long fileEntryId=(Long)ids[0];
  String uuid=(String)ids[1];
  FileEntry fileEntry=new CMISFileEntry(this,uuid,fileEntryId,document);
  try {
    dlAppHelperLocalService.checkAssetEntry(PrincipalThreadLocal.getUserId(),fileEntry,fileEntry.getFileVersion());
  }
 catch (  Exception e) {
    _log.error("Unable to update asset",e);
  }
  return fileEntry;
}
