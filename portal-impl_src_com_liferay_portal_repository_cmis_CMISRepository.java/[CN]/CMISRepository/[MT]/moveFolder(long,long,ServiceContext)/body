{
  try {
    Session session=getSession();
    ObjectId objectId=toFolderId(session,folderId);
    org.apache.chemistry.opencmis.client.api.Folder cmisFolder=(org.apache.chemistry.opencmis.client.api.Folder)session.getObject(objectId);
    validateTitle(session,parentFolderId,cmisFolder.getName());
    org.apache.chemistry.opencmis.client.api.Folder currentParentFolder=cmisFolder.getFolderParent();
    if (currentParentFolder == null) {
      throw new RepositoryException("Cannot move CMIS root folder " + folderId);
    }
    ObjectId sourceFolderId=new ObjectIdImpl(currentParentFolder.getId());
    ObjectId targetFolderId=toFolderId(session,parentFolderId);
    if (!sourceFolderId.getId().equals(targetFolderId.getId()) && !targetFolderId.getId().equals(objectId.getId())) {
      cmisFolder=(org.apache.chemistry.opencmis.client.api.Folder)cmisFolder.move(sourceFolderId,targetFolderId);
    }
    return toFolder(cmisFolder);
  }
 catch (  PortalException pe) {
    throw pe;
  }
catch (  SystemException se) {
    throw se;
  }
catch (  Exception e) {
    processException(e);
    throw new RepositoryException(e);
  }
}
