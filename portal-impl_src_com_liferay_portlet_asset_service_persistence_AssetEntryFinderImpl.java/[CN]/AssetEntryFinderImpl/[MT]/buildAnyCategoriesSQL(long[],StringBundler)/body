{
  String sql=CustomSQLUtil.get(FIND_BY_AND_CATEGORY_IDS);
  String categoryIdsString=null;
  if (PropsValues.ASSET_CATEGORIES_SEARCH_HIERARCHICAL) {
    List<Long> categoryIdsList=new ArrayList<Long>();
    for (    long categoryId : categoryIds) {
      categoryIdsList.addAll(AssetCategoryFinderUtil.findByG_L(categoryId));
    }
    if (categoryIdsList.isEmpty()) {
      return;
    }
    categoryIdsString=StringUtil.merge(categoryIdsList);
  }
 else {
    categoryIdsString=StringUtil.merge(categoryIds);
  }
  sb.append(" AND (");
  sb.append(StringUtil.replace(sql,"[$CATEGORY_ID$]",categoryIdsString));
  sb.append(StringPool.CLOSE_PARENTHESIS);
}
