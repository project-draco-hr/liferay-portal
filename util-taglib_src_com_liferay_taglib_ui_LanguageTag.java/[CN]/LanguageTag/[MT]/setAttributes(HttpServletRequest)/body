{
  request.setAttribute("liferay-ui:language:displayCurrentLocale",String.valueOf(_displayCurrentLocale));
  String displayStyle=_displayStyle;
  if (!ArrayUtil.contains(_DISPLAY_STYLE_OPTIONS,displayStyle)) {
    displayStyle=_DISPLAY_STYLE_OPTIONS[0];
  }
  request.setAttribute("liferay-ui:language:displayStyle",String.valueOf(displayStyle));
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  String formAction=_formAction;
  if (Validator.isNull(formAction)) {
    formAction=themeDisplay.getPathMain() + "/portal/update_language?p_l_id=" + themeDisplay.getPlid();
    formAction=HttpUtil.setParameter(formAction,"redirect",PortalUtil.getCurrentURL(request));
  }
  request.setAttribute("liferay-ui:language:formAction",formAction);
  request.setAttribute("liferay-ui:language:formName",_formName);
  request.setAttribute("liferay-ui:language:languageId",_languageId);
  Locale[] locales=null;
  if (ArrayUtil.isEmpty(_languageIds)) {
    locales=LanguageUtil.getAvailableLocales(themeDisplay.getSiteGroupId());
  }
 else {
    locales=LocaleUtil.fromLanguageIds(_languageIds);
  }
  request.setAttribute("liferay-ui:language:locales",locales);
  request.setAttribute("liferay-ui:language:name",_name);
  request.setAttribute("liferay-ui:language:languageEntries",getLanguageEntries(locales,themeDisplay.getLocale(),_displayCurrentLocale,formAction,_name));
}
