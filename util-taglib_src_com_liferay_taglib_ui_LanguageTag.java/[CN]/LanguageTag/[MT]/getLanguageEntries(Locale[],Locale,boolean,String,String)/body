{
  Map langCounts=new HashMap();
  for (  Locale locale : locales) {
    Integer count=(Integer)langCounts.get(locale.getLanguage());
    if (count == null) {
      count=new Integer(1);
    }
 else {
      count=new Integer(count.intValue() + 1);
    }
    langCounts.put(locale.getLanguage(),count);
  }
  Set<String> duplicateLanguages=new HashSet<>();
  for (  Locale locale : locales) {
    Integer count=(Integer)langCounts.get(locale.getLanguage());
    if (count.intValue() != 1) {
      duplicateLanguages.add(locale.getLanguage());
    }
  }
  List<LanguageEntry> languageEntries=new ArrayList<>();
  for (  Locale locale : locales) {
    String url=null;
    if (!LocaleUtil.equals(locale,currentLocale)) {
      url=HttpUtil.addParameter(formAction,parameterName,LocaleUtil.toLanguageId(locale));
    }
 else     if (!displayCurrentLocale) {
      continue;
    }
    languageEntries.add(new LanguageEntry(duplicateLanguages,currentLocale,locale,url));
  }
  return languageEntries;
}
