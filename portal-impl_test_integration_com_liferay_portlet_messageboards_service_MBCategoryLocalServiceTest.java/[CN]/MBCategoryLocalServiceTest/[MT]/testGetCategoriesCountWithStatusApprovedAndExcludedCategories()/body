{
  int initialCategoriesCount=MBCategoryLocalServiceUtil.getCategoriesCount(_group.getGroupId(),MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID,WorkflowConstants.STATUS_APPROVED);
  addCategory();
  MBCategory excludedCategory1=addCategory();
  MBCategory excludedCategory2=addCategory();
  MBCategory draftCategory=addCategory();
  MBCategoryLocalServiceUtil.updateStatus(draftCategory.getUserId(),draftCategory.getCategoryId(),WorkflowConstants.STATUS_DRAFT);
  Assert.assertEquals(initialCategoriesCount + 3,MBCategoryLocalServiceUtil.getCategoriesCount(_group.getGroupId(),MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID,WorkflowConstants.STATUS_APPROVED));
  Assert.assertEquals(initialCategoriesCount + 1,MBCategoryLocalServiceUtil.getCategoriesCount(_group.getGroupId(),new long[]{excludedCategory1.getCategoryId(),excludedCategory2.getCategoryId()},new long[]{MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID},WorkflowConstants.STATUS_APPROVED));
}
