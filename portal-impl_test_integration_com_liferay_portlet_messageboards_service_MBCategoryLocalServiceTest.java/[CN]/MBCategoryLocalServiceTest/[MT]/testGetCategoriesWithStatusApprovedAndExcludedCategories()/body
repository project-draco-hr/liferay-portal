{
  List<MBCategory> initialCategories=MBCategoryLocalServiceUtil.getCategories(_group.getGroupId(),WorkflowConstants.STATUS_APPROVED);
  List<MBCategory> expectedCategories=new ArrayList<>();
  expectedCategories.addAll(initialCategories);
  expectedCategories.add(MBTestUtil.addCategory(_group.getGroupId()));
  MBCategory excludedCategory1=MBTestUtil.addCategory(_group.getGroupId());
  expectedCategories.add(excludedCategory1);
  MBCategory excludedCategory2=MBTestUtil.addCategory(_group.getGroupId());
  expectedCategories.add(excludedCategory2);
  MBCategory draftCategory=MBTestUtil.addCategory(_group.getGroupId());
  MBCategoryLocalServiceUtil.updateStatus(draftCategory.getUserId(),draftCategory.getCategoryId(),WorkflowConstants.STATUS_DRAFT);
  List<MBCategory> categories=MBCategoryLocalServiceUtil.getCategories(_group.getGroupId(),WorkflowConstants.STATUS_APPROVED);
  AssertUtils.assertEquals(expectedCategories,categories);
  expectedCategories.remove(excludedCategory1);
  expectedCategories.remove(excludedCategory2);
  categories=MBCategoryLocalServiceUtil.getCategories(_group.getGroupId(),new long[]{excludedCategory1.getCategoryId(),excludedCategory2.getCategoryId()},new long[]{MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID},WorkflowConstants.STATUS_APPROVED,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  AssertUtils.assertEquals(expectedCategories,categories);
}
