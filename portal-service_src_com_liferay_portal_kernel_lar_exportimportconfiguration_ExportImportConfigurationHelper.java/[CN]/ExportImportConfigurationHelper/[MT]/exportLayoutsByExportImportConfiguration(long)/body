{
  ExportImportConfiguration exportImportConfiguration=ExportImportConfigurationLocalServiceUtil.getExportImportConfiguration(exportImportConfigurationId);
  String fileName=exportImportConfiguration.getName() + StringPool.DASH + Time.getShortTimestamp();
  fileName=fileName.replace(StringPool.SPACE,StringPool.UNDERLINE);
  Map<String,Serializable> settingsMap=exportImportConfiguration.getSettingsMap();
  Map<String,String[]> parameterMap=(Map<String,String[]>)settingsMap.get("parameterMap");
  long groupId=MapUtil.getLong(settingsMap,"sourceGroupId");
  boolean privateLayout=GetterUtil.getBoolean(settingsMap.get("privateLayout"));
  Map<Long,Boolean> layoutIdMap=(Map<Long,Boolean>)settingsMap.get("layoutIdMap");
  long[] layoutIds=ExportImportHelperUtil.getLayoutIds(layoutIdMap);
  DateRange dateRange=ExportImportDateUtil.getDateRange(exportImportConfiguration);
  LayoutServiceUtil.exportLayoutsAsFileInBackground(fileName,groupId,privateLayout,layoutIds,parameterMap,dateRange.getStartDate(),dateRange.getEndDate(),fileName);
}
