{
  ExportImportConfiguration exportImportConfiguration=ExportImportConfigurationLocalServiceUtil.getExportImportConfiguration(exportImportConfigurationId);
  Map<String,Serializable> settingsMap=exportImportConfiguration.getSettingsMap();
  Map<String,String[]> parameterMap=(Map<String,String[]>)settingsMap.get("parameterMap");
  long groupId=MapUtil.getLong(settingsMap,"sourceGroupId");
  boolean privateLayout=GetterUtil.getBoolean(settingsMap.get("privateLayout"));
  Map<Long,Boolean> layoutIdMap=(Map<Long,Boolean>)settingsMap.get("layoutIdMap");
  long[] layoutIds=ExportImportHelperUtil.getLayoutIds(layoutIdMap);
  DateRange dateRange=ExportImportDateUtil.getDateRange(exportImportConfiguration);
  StringBundler sb=new StringBundler(4);
  String name=exportImportConfiguration.getName();
  sb.append(name.replace(StringPool.SPACE,StringPool.UNDERLINE));
  sb.append(StringPool.DASH);
  sb.append(Time.getShortTimestamp());
  sb.append(".lar");
  String fileName=sb.toString();
  LayoutServiceUtil.exportLayoutsAsFileInBackground(fileName,groupId,privateLayout,layoutIds,parameterMap,dateRange.getStartDate(),dateRange.getEndDate(),fileName);
}
