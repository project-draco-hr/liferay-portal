{
  long fileEntryTypeId=GetterUtil.getLong(portletPreferences.getValue(_DL_CLASS_TYPE,"0"));
  if (fileEntryTypeId > 0) {
    PreparedStatement ps=null;
    ResultSet rs=null;
    try {
      long fileEntryTypeClassNameId=PortalUtil.getClassNameId(DLFileEntryType.class);
      ps=connection.prepareStatement("select structureId from DDMStructureLink where " + "classNameId = ? and classPK = ?");
      ps.setLong(1,fileEntryTypeClassNameId);
      ps.setLong(2,fileEntryTypeId);
      rs=ps.executeQuery();
      String selectedFieldName=GetterUtil.getString(portletPreferences.getValue(_DDM_STRUCTURE_FIELD_NAME,null));
      while (rs.next()) {
        long structureId=rs.getLong("structureId");
        JSONObject ddmStructureJSONObject=getDDMStructureJSONObject(structureId);
        if (isDateField(ddmStructureJSONObject,selectedFieldName)) {
          transformDateFieldValue(portletPreferences);
          break;
        }
      }
    }
  finally {
      DataAccess.cleanUp(ps,rs);
    }
  }
}
