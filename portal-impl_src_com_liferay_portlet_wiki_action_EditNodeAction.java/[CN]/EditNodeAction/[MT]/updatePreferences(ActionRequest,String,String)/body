{
  PortletPreferences preferences=actionRequest.getPreferences();
  String hiddenNodes=preferences.getValue("hidden-nodes",StringPool.BLANK);
  String visibleNodes=preferences.getValue("visible-nodes",StringPool.BLANK);
  String regex=oldName + ",?";
  preferences.setValue("hidden-nodes",hiddenNodes.replaceFirst(regex,newName));
  preferences.setValue("visible-nodes",visibleNodes.replaceFirst(regex,newName));
  preferences.store();
}
