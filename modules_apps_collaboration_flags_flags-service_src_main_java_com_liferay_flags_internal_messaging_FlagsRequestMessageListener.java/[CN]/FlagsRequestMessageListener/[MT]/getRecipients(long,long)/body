{
  Set<User> recipients=new LinkedHashSet<>();
  List<String> roleNames=new ArrayList<>();
  Group group=_groupLocalService.getGroup(groupId);
  if (group.isSite()) {
    roleNames.add(RoleConstants.SITE_ADMINISTRATOR);
    roleNames.add(RoleConstants.SITE_OWNER);
  }
  if (group.isCompany()) {
    roleNames.add(RoleConstants.ADMINISTRATOR);
  }
 else   if (group.isOrganization()) {
    roleNames.add(RoleConstants.ORGANIZATION_ADMINISTRATOR);
    roleNames.add(RoleConstants.ORGANIZATION_OWNER);
  }
  for (  String roleName : roleNames) {
    Role role=_roleLocalService.getRole(companyId,roleName);
    List<UserGroupRole> userGroupRoles=_userGroupRoleLocalService.getUserGroupRolesByGroupAndRole(groupId,role.getRoleId());
    for (    UserGroupRole userGroupRole : userGroupRoles) {
      recipients.add(userGroupRole.getUser());
    }
  }
  if (recipients.isEmpty()) {
    Role role=_roleLocalService.getRole(companyId,RoleConstants.ADMINISTRATOR);
    recipients.addAll(_userLocalService.getRoleUsers(role.getRoleId()));
  }
  return recipients;
}
