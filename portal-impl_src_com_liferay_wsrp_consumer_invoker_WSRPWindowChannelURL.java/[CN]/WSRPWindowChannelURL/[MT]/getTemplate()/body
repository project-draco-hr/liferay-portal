{
  StringBuffer sb=new StringBuffer();
  sb.append(_portletURL.toString());
  sb.append(StringPool.AMPERSAND);
  sb.append(PORTLET_ACTION);
  sb.append(StringPool.EQUAL);
  sb.append("{wsrp-urlType}");
  sb.append(StringPool.AMPERSAND);
  sb.append(NEW_WINDOW_STATE);
  sb.append(StringPool.EQUAL);
  sb.append("{wsrp-windowState}");
  sb.append(StringPool.AMPERSAND);
  sb.append(NEW_CHANNEL_MODE);
  sb.append(StringPool.EQUAL);
  sb.append("{wsrp-mode}");
  sb.append("&wsrp-navigationalState={wsrp-navigationalState}");
  if (ChannelURLType.ACTION.equals(_urlType)) {
    sb.append("&wsrp-interactionState={wsrp-interactionState}");
  }
 else   if (ChannelURLType.RESOURCE.equals(_urlType)) {
    sb.append(StringPool.AMPERSAND);
    sb.append(RESOURCE_ID);
    sb.append(StringPool.EQUAL);
    sb.append("{wsrp-resourceID}");
    sb.append(StringPool.AMPERSAND);
    sb.append(RESOURCE_STATE);
    sb.append(StringPool.EQUAL);
    sb.append("{wsrp-resourceState}");
    sb.append(StringPool.AMPERSAND);
    sb.append(RESOURCE_CACHE_LEVEL);
    sb.append(StringPool.EQUAL);
    sb.append("{wsrp-resourceCacheability}");
  }
  return sb.toString();
}
