{
  if (result == null) {
    return;
  }
  Indexable indexable=findAnnotation(methodInvocation);
  if (indexable == _nullIndexable) {
    return;
  }
  Method method=methodInvocation.getMethod();
  Class<?> returnType=method.getReturnType();
  if (!BaseModel.class.isAssignableFrom(returnType)) {
    if (_log.isWarnEnabled()) {
      _log.warn(methodInvocation + " does not have a valid return type");
    }
    return;
  }
  if (StagedModel.class.isAssignableFrom(returnType) && ExportImportThreadLocal.isImportInProcess()) {
    if (_log.isDebugEnabled()) {
      _log.debug("Skipping indexing until the import is finished");
    }
    return;
  }
  Indexer indexer=IndexerRegistryUtil.getIndexer(returnType.getName());
  if (indexer == null) {
    serviceBeanAopCacheManager.removeMethodInterceptor(methodInvocation,this);
    return;
  }
  Object[] arguments=methodInvocation.getArguments();
  for (int i=arguments.length - 1; i >= 0; i--) {
    if (arguments[i] instanceof ServiceContext) {
      ServiceContext serviceContext=(ServiceContext)arguments[i];
      if (serviceContext.isIndexingEnabled()) {
        break;
      }
      return;
    }
  }
  if (indexable.type() == IndexableType.DELETE) {
    indexer.delete(result);
  }
 else {
    indexer.reindex(result);
  }
}
