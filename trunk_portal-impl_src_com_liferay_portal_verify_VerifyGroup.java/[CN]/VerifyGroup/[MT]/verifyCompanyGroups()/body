{
  List<Company> companies=CompanyLocalServiceUtil.getCompanies();
  String currentShardName=ShardUtil.getCurrentShardName();
  for (  Company company : companies) {
    String shardName=null;
    try {
      shardName=company.getShardName();
    }
 catch (    NoSuchShardException nsse) {
      Shard shard=ShardLocalServiceUtil.addShard(Company.class.getName(),company.getCompanyId(),PropsValues.SHARD_DEFAULT_NAME);
      shardName=shard.getName();
    }
    if (!ShardUtil.isEnabled() || shardName.equals(currentShardName)) {
      GroupLocalServiceUtil.checkCompanyGroup(company.getCompanyId());
    }
  }
}
