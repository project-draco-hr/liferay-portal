{
  try {
    WorkflowURL url=getWorkflowURL();
    String formattedXml=StringUtil.replace(xml,new String[]{"\n","\r","\t"},new String[]{"","",""});
    url.setParameter(Constants.CMD,"deploy");
    url.setParameter("xml",formattedXml);
    String content=url.getContent();
    String definitionId=WorkflowXMLUtil.parseString(content,"definitionId");
    WorkflowDefinitionServiceUtil.addDefinition(GetterUtil.getLong(definitionId),xml);
    return definitionId;
  }
 catch (  Exception e) {
    throw new WorkflowComponentException(e);
  }
}
