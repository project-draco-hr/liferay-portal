{
  UnicodeProperties properties=new UnicodeProperties();
  properties.put(LegacyLDAPPropsKeys.LDAP_AUTH_ENABLED,"true");
  properties.put(LegacyLDAPPropsKeys.LDAP_AUTH_REQUIRED,"true");
  properties.put(LegacyLDAPPropsKeys.LDAP_IMPORT_ENABLED,"true");
  properties.put(LegacyLDAPPropsKeys.LDAP_IMPORT_ON_STARTUP,"true");
  properties.put(LegacyLDAPPropsKeys.LDAP_EXPORT_ENABLED,"true");
  properties.put(LegacyLDAPPropsKeys.LDAP_PASSWORD_POLICY_ENABLED,"true");
  properties.put(LegacyLDAPPropsKeys.LDAP_IMPORT_USER_PASSWORD_AUTOGENERATED,"true");
  properties.put(LegacyLDAPPropsKeys.LDAP_FACTORY_INITIAL,"com.sun.jndi.ldap.LdapCtxFactory");
  addLDAPServer(properties,0L);
  addLDAPServer(properties,1L);
  properties.put("ldap.server.ids","0,1");
  List<Company> companies=CompanyLocalServiceUtil.getCompanies(false);
  for (  Company company : companies) {
    CompanyLocalServiceUtil.updatePreferences(company.getCompanyId(),properties);
  }
  Bundle bundle=FrameworkUtil.getBundle(LDAPPropertiesVerifyProcessTest.class);
  _bundleContext=bundle.getBundleContext();
  ServiceReference<ConfigurationAdmin> configurationAdminServiceReference=_bundleContext.getServiceReference(ConfigurationAdmin.class);
  _configurationAdmin=_bundleContext.getService(configurationAdminServiceReference);
}
