{
  if (!item.getCategoryId().equals(categoryId)) {
    ShoppingCategory oldCategory=ShoppingCategoryUtil.findByPrimaryKey(item.getCategoryId());
    ShoppingCategory newCategory=ShoppingCategoryUtil.fetchByPrimaryKey(categoryId);
    if ((newCategory == null) || (!oldCategory.getGroupId().equals(newCategory.getGroupId()))) {
      categoryId=item.getCategoryId();
    }
  }
  return ShoppingCategoryUtil.findByPrimaryKey(categoryId);
}
