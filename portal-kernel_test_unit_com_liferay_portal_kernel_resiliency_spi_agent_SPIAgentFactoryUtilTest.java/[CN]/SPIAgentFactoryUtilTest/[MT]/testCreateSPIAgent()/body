{
  SPIAgentFactoryUtil.registerSPIAgentClass(BadMockSPIAgent.class);
  SPIAgentFactoryUtil.registerSPIAgentClass(MockSPIAgent.class);
  try {
    SPIAgentFactoryUtil.createSPIAgent(new SPIConfiguration("testId",null,8081,"",new String[0],new String[0],null),null);
    Assert.fail();
  }
 catch (  NullPointerException npe) {
  }
  String badName="badName";
  try {
    SPIAgentFactoryUtil.createSPIAgent(new SPIConfiguration("testId",badName,8081,"",new String[0],new String[0],null),null);
    Assert.fail();
  }
 catch (  IllegalArgumentException iae) {
    Assert.assertEquals("Unkown SPI agent class name " + badName,iae.getMessage());
  }
  try {
    SPIAgentFactoryUtil.createSPIAgent(new SPIConfiguration("testId",BadMockSPIAgent.class.getName(),8081,"",new String[0],new String[0],null),null);
    Assert.fail();
  }
 catch (  RuntimeException re) {
    Assert.assertEquals("Unable to instantiate " + BadMockSPIAgent.class,re.getMessage());
  }
  SPIAgent spiAgent=SPIAgentFactoryUtil.createSPIAgent(new SPIConfiguration("testId",MockSPIAgent.class.getName(),8081,"",new String[0],new String[0],null),null);
  Assert.assertSame(MockSPIAgent.class,spiAgent.getClass());
}
