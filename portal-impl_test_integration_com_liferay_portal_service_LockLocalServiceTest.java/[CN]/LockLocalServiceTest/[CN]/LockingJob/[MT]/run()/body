{
  int count=0;
  while (true) {
    try {
      Lock lock=LockLocalServiceUtil.lock(_className,_key,_owner,false);
      if (lock.isNew()) {
        while (true) {
          try {
            LockLocalServiceUtil.unlock(_className,_key,_owner,false);
            if (++count >= _requiredSuccessCount) {
              return;
            }
 else {
              break;
            }
          }
 catch (          SystemException se) {
            if (_isExpectedException(se)) {
              continue;
            }
 else {
              _systemException=se;
              return;
            }
          }
        }
      }
    }
 catch (    SystemException se) {
      if (_isExpectedException(se)) {
        continue;
      }
      _systemException=se;
      break;
    }
  }
}
