{
  LayoutSet layoutSet=layoutSetPersistence.findByG_P(groupId,privateLayout);
  layoutSet=wrapLayoutSet(layoutSet);
  LayoutSetBranch layoutSetBranch=LayoutStagingUtil.getLayoutSetBranch(layoutSet);
  if (layoutSetBranch == null) {
    return layoutSetLocalService.updateLogo(groupId,privateLayout,logo,is,cleanUpStream);
  }
  layoutSetBranch.setModifiedDate(new Date());
  layoutSetBranch.setLogo(logo);
  if (logo) {
    long logoId=layoutSetBranch.getLogoId();
    if (logoId <= 0) {
      logoId=counterLocalService.increment();
      layoutSet.setLogoId(logoId);
    }
  }
 else {
    layoutSet.setLogoId(0);
  }
  layoutSetBranchPersistence.update(layoutSetBranch);
  if (logo) {
    imageLocalService.updateImage(layoutSetBranch.getLogoId(),is,cleanUpStream);
  }
 else {
    imageLocalService.deleteImage(layoutSetBranch.getLogoId());
  }
  return layoutSet;
}
