{
  LayoutSet layoutSet=layoutSetPersistence.findByG_P(groupId,privateLayout);
  layoutSet=wrapLayoutSet(layoutSet);
  LayoutSetBranch layoutSetBranch=LayoutStagingUtil.getLayoutSetBranch(layoutSet);
  if (layoutSetBranch == null) {
    layoutSetLocalService.updateLayoutSetPrototypeLinkEnabled(groupId,privateLayout,layoutSetPrototypeLinkEnabled,layoutSetPrototypeUuid);
    return;
  }
  if (Validator.isNull(layoutSetPrototypeUuid)) {
    layoutSetPrototypeUuid=layoutSetBranch.getLayoutSetPrototypeUuid();
  }
  if (Validator.isNull(layoutSetPrototypeUuid) && layoutSetPrototypeLinkEnabled) {
    throw new IllegalStateException("Cannot set layoutSetPrototypeLinkEnabled to true when " + "layoutSetPrototypeUuid is null");
  }
  layoutSetBranch.setLayoutSetPrototypeLinkEnabled(layoutSetPrototypeLinkEnabled);
  layoutSetBranch.setLayoutSetPrototypeUuid(layoutSetPrototypeUuid);
  layoutSetBranchPersistence.update(layoutSetBranch,false);
}
