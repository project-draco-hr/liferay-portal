{
  try {
    ObjectInputStream objectInputStream=null;
    UnsyncByteArrayOutputStream ubaos=new UnsyncByteArrayOutputStream();
    while (true) {
      try {
        _ubis.mark(4);
        objectInputStream=new PortalClassLoaderObjectInputStream(_ubis);
        if (ubaos.size() > 0) {
          if (_log.isWarnEnabled()) {
            _log.warn("Found corrupted leading log : " + ubaos.toString());
          }
        }
        ubaos=null;
        break;
      }
 catch (      StreamCorruptedException sce) {
        _ubis.reset();
        ubaos.write(_ubis.read());
      }
    }
    while (true) {
      ProcessCallable processCallable=(ProcessCallable)objectInputStream.readObject();
      if (processCallable instanceof ReturnProcessCallable<?>) {
        return processCallable;
      }
      if (processCallable instanceof ExceptionProcessCallable) {
        return processCallable;
      }
      Serializable result=processCallable.call();
      if (_log.isDebugEnabled()) {
        _log.debug("Invoked generic ProcessCallable : " + processCallable + ", with return value : "+ result);
      }
    }
  }
 catch (  EOFException eofe) {
  }
  return null;
}
