{
  ObjectOutputStream objectOutputStream=new ObjectOutputStream(System.out);
  ProcessOutputStream outProcessOutputStream=new ProcessOutputStream(objectOutputStream,false);
  PrintStream outPrintStream=new PrintStream(outProcessOutputStream,true);
  System.setOut(outPrintStream);
  ProcessOutputStream errProcessOutputStream=new ProcessOutputStream(objectOutputStream,true);
  PrintStream errPrintStream=new PrintStream(errProcessOutputStream,true);
  System.setErr(errPrintStream);
  try {
    ProcessCallable<?> processCallable=(ProcessCallable<?>)_readObject(System.in,false);
    Serializable result=processCallable.call();
    outPrintStream.flush();
    outProcessOutputStream.writeProcessCallable(new ReturnProcessCallable<Serializable>(result));
    outProcessOutputStream.close();
  }
 catch (  ProcessException pe) {
    errPrintStream.flush();
    errProcessOutputStream.writeProcessCallable(new ExceptionProcessCallable(pe));
    errProcessOutputStream.close();
  }
}
