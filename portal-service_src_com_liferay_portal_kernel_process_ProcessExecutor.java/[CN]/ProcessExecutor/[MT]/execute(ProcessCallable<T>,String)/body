{
  try {
    ProcessBuilder processBuilder=new ProcessBuilder("java","-cp",classPath,ProcessExecutor.class.getName());
    Process process=processBuilder.start();
    _writeObject(process.getOutputStream(),processCallable,true);
    int exitCode=process.waitFor();
    if (exitCode != 0) {
      throw new ProcessException("Subprocess terminated with exit code " + exitCode);
    }
    InputStream errorInputStream=process.getErrorStream();
    if (errorInputStream.available() > 0) {
      ProcessException processException=(ProcessException)_readObject(errorInputStream,System.err,true);
      if (processException != null) {
        throw processException;
      }
    }
    return (T)_readObject(process.getInputStream(),System.out,true);
  }
 catch (  Exception e) {
    throw new ProcessException(e);
  }
}
