{
  Element permissionsElement=layoutElement.element("permissions");
  if (permissionsElement != null) {
    String resourceName=Layout.class.getName();
    String resourcePrimKey=String.valueOf(layout.getPlid());
    if (PropsValues.PERMISSIONS_USER_CHECK_ALGORITHM == 5) {
      importPermissions_5(layoutCache,companyId,groupId,userId,resourceName,resourcePrimKey,permissionsElement,false);
    }
 else     if (PropsValues.PERMISSIONS_USER_CHECK_ALGORITHM == 6) {
      importPermissions_6(layoutCache,companyId,groupId,userId,resourceName,resourcePrimKey,permissionsElement,false);
    }
 else {
      Group guestGroup=GroupLocalServiceUtil.getGroup(companyId,GroupConstants.GUEST);
      importLayoutPermissions_1to4(layoutCache,companyId,groupId,guestGroup,layout,resourceName,resourcePrimKey,permissionsElement,importUserPermissions);
    }
    if ((userId > 0) && ((PropsValues.PERMISSIONS_USER_CHECK_ALGORITHM == 5) || (PropsValues.PERMISSIONS_USER_CHECK_ALGORITHM == 6))) {
      Indexer indexer=IndexerRegistryUtil.getIndexer(User.class);
      indexer.reindex(userId);
    }
  }
  Element rolesElement=parentElement.element("roles");
  if ((PropsValues.PERMISSIONS_USER_CHECK_ALGORITHM < 5) && (rolesElement != null)) {
    importLayoutRoles(layoutCache,companyId,groupId,rolesElement);
  }
}
