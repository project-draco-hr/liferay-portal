{
  Iterator<Element> itr=rolesEl.elements("portlet").iterator();
  while (itr.hasNext()) {
    Element portletEl=itr.next();
    String portletId=portletEl.attributeValue("portlet-id");
    String resourceName=PortletConstants.getRootPortletId(portletId);
    Portlet portlet=PortletLocalServiceUtil.getPortletById(companyId,resourceName);
    if (portlet == null) {
      if (_log.isDebugEnabled()) {
        _log.debug("Do not import portlet roles for " + portletId + " because the portlet does not exist");
      }
    }
 else {
      importGroupRoles(layoutCache,companyId,groupId,resourceName,"community",portletEl);
      importUserRoles(layoutCache,companyId,groupId,resourceName,portletEl);
      importInheritedRoles(layoutCache,companyId,groupId,resourceName,"organization",portletEl);
      importInheritedRoles(layoutCache,companyId,groupId,resourceName,"user-group",portletEl);
    }
  }
}
