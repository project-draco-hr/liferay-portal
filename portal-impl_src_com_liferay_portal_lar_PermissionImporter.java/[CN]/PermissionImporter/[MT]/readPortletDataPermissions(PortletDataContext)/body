{
  try {
    String xml=context.getZipEntryAsString(context.getSourceRootPath() + "/portlet-data-permissions.xml");
    if (xml == null) {
      return;
    }
    Document doc=SAXReaderUtil.read(xml);
    Element root=doc.getRootElement();
    List<Element> portletDataEls=root.elements("portlet-data");
    for (    Element portletDataEl : portletDataEls) {
      String className=portletDataEl.attributeValue("class-name");
      long classPK=GetterUtil.getLong(portletDataEl.attributeValue("class-pk"));
      List<KeyValuePair> permissions=new ArrayList<KeyValuePair>();
      List<Element> permissionsEls=portletDataEl.elements("permissions");
      for (      Element permissionsEl : permissionsEls) {
        String roleName=permissionsEl.attributeValue("role-name");
        String actions=permissionsEl.attributeValue("actions");
        KeyValuePair permission=new KeyValuePair(roleName,actions);
        permissions.add(permission);
      }
      context.addPermissions(className,classPK,permissions);
    }
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
