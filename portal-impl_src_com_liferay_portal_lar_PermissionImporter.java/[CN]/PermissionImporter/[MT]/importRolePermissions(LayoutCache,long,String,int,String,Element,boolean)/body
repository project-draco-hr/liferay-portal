{
  List<Element> roleElements=parentElement.elements("role");
  for (  Element roleElement : roleElements) {
    String roleName=roleElement.attributeValue("name");
    Role role=layoutCache.getRole(companyId,roleName);
    if (role == null) {
      _log.warn("Ignoring permissions for role with name " + roleName);
    }
 else {
      List<String> actions=getActions(roleElement);
      PermissionLocalServiceUtil.setRolePermissions(role.getRoleId(),companyId,resourceName,scope,resourcePrimKey,actions.toArray(new String[actions.size()]));
      if (communityRole) {
        long[] groupIds={GetterUtil.getLong(resourcePrimKey)};
        GroupLocalServiceUtil.addRoleGroups(role.getRoleId(),groupIds);
      }
    }
  }
}
