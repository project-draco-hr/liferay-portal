{
  Organization organization=OrganizationTestUtil.addOrganization(true);
  Group organizationSite=GroupLocalServiceUtil.getOrganizationGroup(TestPropsValues.getCompanyId(),organization.getOrganizationId());
  organizationSite.setManualMembership(true);
  User user=UserTestUtil.addOrganizationOwnerUser(organization);
  UserLocalServiceUtil.addGroupUser(organizationSite.getGroupId(),user.getUserId());
  UserLocalServiceUtil.addOrganizationUsers(organization.getOrganizationId(),new long[]{user.getUserId()});
  Role siteRole=RoleTestUtil.addRole(2);
  UserGroupRoleLocalServiceUtil.addUserGroupRoles(user.getUserId(),organizationSite.getGroupId(),new long[]{siteRole.getRoleId()});
  GroupLocalServiceUtil.deleteGroup(organizationSite);
  Assert.assertEquals(1,UserGroupRoleLocalServiceUtil.getUserGroupRolesCount(user.getUserId(),organizationSite.getGroupId()));
}
