{
  Organization parentOrganization=OrganizationTestUtil.addOrganization(true);
  Group parentOrganizationGroup=parentOrganization.getGroup();
  LayoutTestUtil.addLayout(parentOrganizationGroup);
  Organization organization=OrganizationTestUtil.addOrganization(parentOrganization.getOrganizationId(),RandomTestUtil.randomString(),false);
  _organizations.add(organization);
  _organizations.add(parentOrganization);
  UserLocalServiceUtil.addOrganizationUsers(organization.getOrganizationId(),new long[]{TestPropsValues.getUserId()});
  try {
    List<Group> groups=GroupServiceUtil.getUserSitesGroups(TestPropsValues.getUserId(),null,QueryUtil.ALL_POS);
    Assert.assertTrue(groups.contains(parentOrganizationGroup));
  }
  finally {
    UserLocalServiceUtil.unsetOrganizationUsers(organization.getOrganizationId(),new long[]{TestPropsValues.getUserId()});
  }
}
