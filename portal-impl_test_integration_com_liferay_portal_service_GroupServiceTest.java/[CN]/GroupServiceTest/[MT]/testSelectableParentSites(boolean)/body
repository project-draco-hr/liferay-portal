{
  Group group=GroupTestUtil.addGroup();
  Assert.assertTrue(group.isRoot());
  LinkedHashMap<String,Object> params=new LinkedHashMap<>();
  params.put("site",Boolean.TRUE);
  List<Long> excludedGroupIds=new ArrayList<>();
  excludedGroupIds.add(group.getGroupId());
  if (staging) {
    GroupTestUtil.enableLocalStaging(group);
    Assert.assertTrue(group.hasStagingGroup());
    excludedGroupIds.add(group.getStagingGroup().getGroupId());
  }
  params.put("excludedGroupIds",excludedGroupIds);
  List<Group> selectableGroups=GroupLocalServiceUtil.search(group.getCompanyId(),null,StringPool.BLANK,params,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  for (  Group selectableGroup : selectableGroups) {
    long selectableGroupId=selectableGroup.getGroupId();
    Assert.assertNotEquals("A group cannot be its own parent",group.getGroupId(),selectableGroupId);
    if (staging) {
      Assert.assertNotEquals("A group cannot have its live group as parent",group.getLiveGroupId(),selectableGroupId);
    }
  }
}
