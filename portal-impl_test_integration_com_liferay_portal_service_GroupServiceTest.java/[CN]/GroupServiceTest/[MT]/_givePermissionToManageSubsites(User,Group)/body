{
  Role role=null;
  try {
    role=RoleLocalServiceUtil.getRole(TestPropsValues.getCompanyId(),"subsitesAdmin");
  }
 catch (  NoSuchRoleException nsre) {
    role=RoleLocalServiceUtil.addRole(TestPropsValues.getUserId(),TestPropsValues.getCompanyId(),"subsitesAdmin",null,null,RoleConstants.TYPE_SITE);
  }
  ResourcePermissionLocalServiceUtil.addResourcePermission(group.getCompanyId(),Group.class.getName(),ResourceConstants.SCOPE_GROUP_TEMPLATE,String.valueOf(GroupConstants.DEFAULT_PARENT_GROUP_ID),role.getRoleId(),ActionKeys.MANAGE_SUBGROUPS);
  long[] roleIds=new long[]{role.getRoleId()};
  UserGroupRoleLocalServiceUtil.addUserGroupRoles(user.getUserId(),group.getGroupId(),roleIds);
}
