{
  Locale[] availableLocales=LanguageUtil.getAvailableLocales();
  CompanyTestUtil.resetCompanyLocales(TestPropsValues.getCompanyId(),portalAvailableLocales);
  Group group=GroupTestUtil.addGroup(GroupConstants.DEFAULT_PARENT_GROUP_ID,ServiceTestUtil.randomString());
  try {
    GroupTestUtil.updateDisplaySettings(group.getGroupId(),groupAvailableLocales,groupDefaultLocale);
    if (expectFailure) {
      Assert.fail();
    }
  }
 catch (  LocaleException le) {
    if (!expectFailure) {
      Assert.fail();
    }
  }
 finally {
    CompanyTestUtil.resetCompanyLocales(TestPropsValues.getCompanyId(),availableLocales);
  }
}
