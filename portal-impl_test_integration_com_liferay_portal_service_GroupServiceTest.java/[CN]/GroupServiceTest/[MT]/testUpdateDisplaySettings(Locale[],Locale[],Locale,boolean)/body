{
  Locale[] availableLocales=LanguageUtil.getAvailableLocales();
  CompanyTestUtil.resetCompanyLocales(TestPropsValues.getCompanyId(),portalAvailableLocales,LocaleUtil.getDefault());
  Group group=GroupTestUtil.addGroup(GroupConstants.DEFAULT_PARENT_GROUP_ID,RandomTestUtil.randomString());
  try {
    GroupTestUtil.updateDisplaySettings(group.getGroupId(),groupAvailableLocales,groupDefaultLocale);
    if (expectFailure) {
      Assert.fail();
    }
  }
 catch (  LocaleException le) {
    if (!expectFailure) {
      Assert.fail();
    }
  }
 finally {
    CompanyTestUtil.resetCompanyLocales(TestPropsValues.getCompanyId(),availableLocales,LocaleUtil.getDefault());
  }
}
