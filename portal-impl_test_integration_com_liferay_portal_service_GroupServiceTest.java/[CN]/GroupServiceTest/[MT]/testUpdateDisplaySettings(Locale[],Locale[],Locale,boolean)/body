{
  UnicodeProperties properties=new UnicodeProperties();
  properties.put(PropsKeys.LOCALES,StringUtil.merge(LocaleUtil.toLanguageIds(portalAvailableLocales)));
  CompanyLocalServiceUtil.updatePreferences(TestPropsValues.getCompanyId(),properties);
  Group group=GroupTestUtil.addGroup(GroupConstants.DEFAULT_PARENT_GROUP_ID,ServiceTestUtil.randomString());
  try {
    GroupTestUtil.updateDisplaySettings(group.getGroupId(),groupAvailableLocales,groupDefaultLocale);
    if (expectFailure) {
      Assert.fail();
    }
  }
 catch (  LocaleException le) {
    if (!expectFailure) {
      Assert.fail();
    }
  }
 finally {
    LanguageUtil.resetAvailableLocales(TestPropsValues.getCompanyId());
  }
}
