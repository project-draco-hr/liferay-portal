{
  Map<Object,Object> resources=_resourcesThreadLocal.get();
  if (resources == null) {
    return null;
  }
  Object resource=resources.get(key);
  if (resource instanceof ResourceHolder) {
    ResourceHolder resourceHolder=(ResourceHolder)resource;
    if (resourceHolder.isVoid()) {
      resources.remove(key);
      if (resources.isEmpty()) {
        _resourcesThreadLocal.remove();
      }
      return null;
    }
  }
  return (T)resource;
}
