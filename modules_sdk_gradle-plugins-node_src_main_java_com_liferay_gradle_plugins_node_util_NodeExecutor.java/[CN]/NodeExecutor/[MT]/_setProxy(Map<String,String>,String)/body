{
  String key=protocol + "_proxy";
  if (environment.containsKey(key) || environment.containsKey(key.toUpperCase())) {
    if (_logger.isInfoEnabled()) {
      _logger.info("{} proxy is already set",protocol.toUpperCase());
    }
    return;
  }
  String host=System.getProperty(protocol + ".proxyHost");
  String port=System.getProperty(protocol + ".proxyPort");
  if (Validator.isNull(host) || Validator.isNull(port)) {
    return;
  }
  StringBuilder sb=new StringBuilder();
  sb.append(protocol);
  sb.append("://");
  String user=System.getProperty(protocol + ".proxyUser");
  if (Validator.isNotNull(user)) {
    sb.append(user);
    String password=System.getProperty(protocol + ".proxyPassword");
    if (Validator.isNotNull(password)) {
      sb.append(':');
      sb.append(password);
      sb.append('@');
    }
  }
  sb.append(host);
  sb.append(':');
  sb.append(port);
  String url=sb.toString();
  if (_logger.isInfoEnabled()) {
    _logger.info("{} proxy set to {}",protocol.toUpperCase(),url);
  }
  environment.put(key,sb.toString());
}
