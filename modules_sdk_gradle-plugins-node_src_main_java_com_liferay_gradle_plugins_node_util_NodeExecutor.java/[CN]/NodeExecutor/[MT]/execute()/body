{
  return _project.exec(new Action<ExecSpec>(){
    @Override public void execute(    ExecSpec execSpec){
      if (OSDetector.isWindows()) {
        execSpec.setArgs(getWindowsArgs());
        execSpec.setExecutable("cmd");
      }
 else {
        execSpec.setArgs(_args);
        execSpec.setExecutable(getExecutable());
      }
      Map<String,String> environment=getEnvironment();
      if (environment != null) {
        execSpec.setEnvironment(getEnvironment());
      }
      execSpec.setWorkingDir(_workingDir);
    }
  }
);
}
