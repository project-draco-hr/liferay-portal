{
  ConfigurationContainer configurationContainer=project.getConfigurations();
  final Configuration configuration=configurationContainer.create(POSHI_RUNNER_CONFIGURATION_NAME);
  configuration.setDescription("Configures Poshi Runner for this project.");
  configuration.setVisible(false);
  ResolvableDependencies resolvableDependencies=configuration.getIncoming();
  resolvableDependencies.beforeResolve(new Action<ResolvableDependencies>(){
    @Override public void execute(    ResolvableDependencies resolvableDependencies){
      Set<Dependency> dependencies=configuration.getDependencies();
      if (dependencies.isEmpty()) {
        DependencyHandler dependencyHandler=project.getDependencies();
        Dependency dependency=dependencyHandler.create("com.liferay:com.liferay.poshi.runner:" + poshiRunnerExtension.getVersion());
        dependencies.add(dependency);
      }
    }
  }
);
}
