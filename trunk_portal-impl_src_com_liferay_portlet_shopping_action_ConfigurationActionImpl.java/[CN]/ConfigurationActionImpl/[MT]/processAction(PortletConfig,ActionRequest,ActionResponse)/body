{
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  if (!cmd.equals(Constants.UPDATE)) {
    return;
  }
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  ShoppingPreferences preferences=ShoppingPreferences.getInstance(themeDisplay.getCompanyId(),themeDisplay.getScopeGroupId());
  String tabs2=ParamUtil.getString(actionRequest,"tabs2");
  String tabs3=ParamUtil.getString(actionRequest,"tabs3");
  if (tabs2.equals("payment-settings")) {
    updatePayment(actionRequest,preferences);
  }
 else   if (tabs2.equals("shipping-calculation")) {
    updateShippingCalculation(actionRequest,preferences);
  }
 else   if (tabs2.equals("insurance-calculation")) {
    updateInsuranceCalculation(actionRequest,preferences);
  }
 else   if (tabs2.equals("emails")) {
    if (tabs3.equals("email-from")) {
      updateEmailFrom(actionRequest,preferences);
    }
 else     if (tabs3.equals("confirmation-email")) {
      updateEmailOrderConfirmation(actionRequest,preferences);
    }
 else     if (tabs3.equals("shipping-email")) {
      updateEmailOrderShipping(actionRequest,preferences);
    }
  }
  if (SessionErrors.isEmpty(actionRequest)) {
    preferences.store();
    SessionMessages.add(actionRequest,portletConfig.getPortletName() + ".doConfigure");
  }
}
