{
  while (true) {
    long readSize=fileResponse.getSize() - fileChannel.position();
    int readableBytes=byteBuf.readableBytes();
    if (readSize > readableBytes) {
      readSize=readableBytes;
    }
    if (byteBuf.readBytes(fileChannel,(int)readSize) == readSize) {
      break;
    }
  }
  if (!byteBuf.isReadable()) {
    byteBuf.release();
  }
  if (fileChannel.position() < fileResponse.getSize()) {
    return false;
  }
  return true;
}
