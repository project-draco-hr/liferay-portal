{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long structureId=ParamUtil.getLong(actionRequest,"structureId");
  String availableFields=ParamUtil.getString(actionRequest,"availableFields");
  String saveCallback=ParamUtil.getString(actionRequest,"saveCallback");
  PortletURLImpl portletURL=new PortletURLImpl(actionRequest,portletConfig.getPortletName(),themeDisplay.getPlid(),PortletRequest.RENDER_PHASE);
  portletURL.setWindowState(actionRequest.getWindowState());
  portletURL.setParameter(Constants.CMD,Constants.UPDATE,false);
  portletURL.setParameter("struts_action","/dynamic_data_mapping/edit_template");
  portletURL.setParameter("redirect",redirect,false);
  portletURL.setParameter("templateId",String.valueOf(template.getTemplateId()),false);
  portletURL.setParameter("groupId",String.valueOf(template.getGroupId()),false);
  portletURL.setParameter("structureId",String.valueOf(structureId),false);
  portletURL.setParameter("type",template.getType(),false);
  portletURL.setParameter("availableFields",availableFields,false);
  portletURL.setParameter("saveCallback",saveCallback,false);
  return portletURL.toString();
}
