{
  String scriptContent=ParamUtil.getString(uploadPortletRequest,"scriptContent");
  File file=uploadPortletRequest.getFile("script");
  if (file != null) {
    scriptContent=FileUtil.read(file);
    if (Validator.isNotNull(scriptContent) && !isValidFile(file)) {
      throw new TemplateScriptException();
    }
  }
  String type=ParamUtil.getString(uploadPortletRequest,"type");
  if (type.equals(DDMTemplateConstants.TEMPLATE_TYPE_FORM)) {
    try {
      scriptContent=DDMXSDUtil.getXSD(scriptContent);
    }
 catch (    PortalException pe) {
      throw new TemplateScriptException();
    }
  }
  return scriptContent;
}
