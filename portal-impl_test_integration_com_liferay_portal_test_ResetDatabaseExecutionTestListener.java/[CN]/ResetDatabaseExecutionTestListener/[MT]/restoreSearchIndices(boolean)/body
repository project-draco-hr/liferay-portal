{
  Map<Long,String> backupFileNames=_indexNames;
  if (initialize) {
    backupFileNames=_initializedIndexNames;
  }
  for (  Map.Entry<Long,String> entry : backupFileNames.entrySet()) {
    String backupFileName=entry.getValue();
    try {
      SearchEngineUtil.restore(entry.getKey(),backupFileName);
    }
 catch (    Exception e) {
      throw new RuntimeException(e);
    }
 finally {
      if (!initialize) {
        try {
          SearchEngineUtil.removeBackup(entry.getKey(),backupFileName);
        }
 catch (        SearchException e) {
          if (_log.isInfoEnabled()) {
            _log.info("Unable to remove backup",e);
          }
        }
      }
    }
  }
  if (!initialize) {
    backupFileNames.clear();
  }
}
