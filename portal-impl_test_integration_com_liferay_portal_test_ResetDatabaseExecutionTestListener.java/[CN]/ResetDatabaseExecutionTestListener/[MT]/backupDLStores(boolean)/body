{
  String dlFileSystemStoreDirName=null;
  if (initialize) {
    dlFileSystemStoreDirName=SystemProperties.get(SystemProperties.TMP_DIR) + "/temp-init-dl-file-system-" + System.currentTimeMillis();
    _initializedDLFileSystemStoreDirName=dlFileSystemStoreDirName;
    Runtime runtime=Runtime.getRuntime();
    runtime.addShutdownHook(new DeleteFileShutdownHook(dlFileSystemStoreDirName));
  }
 else {
    dlFileSystemStoreDirName=SystemProperties.get(SystemProperties.TMP_DIR) + "/temp-dl-file-system-" + System.currentTimeMillis();
    _dlFileSystemStoreDirName=dlFileSystemStoreDirName;
  }
  try {
    FileUtil.copyDirectory(new File(PropsValues.DL_STORE_FILE_SYSTEM_ROOT_DIR),new File(dlFileSystemStoreDirName));
  }
 catch (  IOException ioe) {
    throw new RuntimeException(ioe);
  }
  String dlJCRStoreDirName=null;
  if (initialize) {
    dlJCRStoreDirName=SystemProperties.get(SystemProperties.TMP_DIR) + "/temp-init-dl-jcr-" + System.currentTimeMillis();
    _initializedDLJCRStoreDirName=dlJCRStoreDirName;
    Runtime runtime=Runtime.getRuntime();
    runtime.addShutdownHook(new DeleteFileShutdownHook(dlJCRStoreDirName));
  }
 else {
    dlJCRStoreDirName=SystemProperties.get(SystemProperties.TMP_DIR) + "/temp-dl-jcr-" + System.currentTimeMillis();
    _dlJCRStoreDirName=dlJCRStoreDirName;
  }
  try {
    FileUtil.copyDirectory(new File(PropsUtil.get(PropsKeys.JCR_JACKRABBIT_REPOSITORY_ROOT)),new File(dlJCRStoreDirName));
  }
 catch (  IOException ioe) {
    throw new RuntimeException(ioe);
  }
}
