{
  String parentStructureId=getParentStructureId();
  String xsd=getXsd();
  if (Validator.isNull(parentStructureId)) {
    return xsd;
  }
  try {
    JournalStructure parentStructure=null;
    try {
      parentStructure=JournalStructureLocalServiceUtil.getStructure(getGroupId(),parentStructureId);
    }
 catch (    NoSuchStructureException nsse1) {
      long groupId=getGroupId();
      Group group=GroupLocalServiceUtil.getGroup(groupId);
      Group companyGroup=GroupLocalServiceUtil.getCompanyGroup(group.getCompanyId());
      if (groupId != companyGroup.getGroupId()) {
        try {
          parentStructure=JournalStructureLocalServiceUtil.getStructure(companyGroup.getGroupId(),parentStructureId);
        }
 catch (        NoSuchStructureException nsse2) {
          throw new Exception("No JournalStructure exists with the structure id " + parentStructureId);
        }
      }
    }
    Document doc=SAXReaderUtil.read(getXsd());
    Element root=doc.getRootElement();
    Document parentDoc=SAXReaderUtil.read(parentStructure.getMergedXsd());
    Element parentRoot=parentDoc.getRootElement();
    addParentStructureId(parentRoot,parentStructureId);
    root.content().addAll(0,parentRoot.content());
    xsd=root.asXML();
  }
 catch (  Exception e) {
  }
  return xsd;
}
