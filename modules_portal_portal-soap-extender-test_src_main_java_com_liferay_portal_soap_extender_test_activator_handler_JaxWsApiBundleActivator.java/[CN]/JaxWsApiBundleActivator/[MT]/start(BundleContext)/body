{
  _configurationAdminBundleActivator=new ConfigurationAdminBundleActivator();
  _configurationAdminBundleActivator.start(bundleContext);
  String filterString="(&(objectClass=" + Provider.class.getName() + ")"+ "("+ HttpWhiteboardConstants.HTTP_WHITEBOARD_CONTEXT_PATH+ "=/soap-test))";
  if (!WaiterUtil.waitForFilter(bundleContext,filterString,10000)) {
    throw new TimeoutException("Provider register waiting timeout");
  }
  try {
    _endpoint=Endpoint.publish("/greeterApi",new GreeterImpl());
    Binding binding=_endpoint.getBinding();
    @SuppressWarnings("rawtypes") List<Handler> handlers=binding.getHandlerChain();
    Handler<?> handler=new SampleHandler();
    handlers.add(handler);
    binding.setHandlerChain(handlers);
  }
 catch (  Exception e) {
    cleanUp(bundleContext);
  }
}
