{
  ResourceBundle resourceBundleA=_createResourceBundle("common-key","th_TH_TH","th_TH_TH","th_TH_TH");
  ResourceBundle resourceBundleB=_createResourceBundle("common-key","th_TH","th_TH","th_TH");
  ResourceBundle resourceBundleC=_createResourceBundle("common-key","th","th","th");
  ResourceBundle resourceBundleD=_createResourceBundle("common-key","root-bundle","root-bundle","root-bundle");
  PortletConfig portletConfig=_genericPortlet.getPortletConfig();
  ResourceBundle portletResourceBundleA=portletConfig.getResourceBundle(new Locale("th","TH","TH"));
  ResourceBundle portletResourceBundleB=portletConfig.getResourceBundle(new Locale("th","TH"));
  ResourceBundle portletResourceBundleC=portletConfig.getResourceBundle(new Locale("th"));
  ResourceBundle portletResourceBundleD=portletConfig.getResourceBundle(new Locale(""));
  ServiceRegistration<ResourceBundle> serviceRegistrationA=registerResourceBundle(resourceBundleA,"th_TH_TH");
  ServiceRegistration<ResourceBundle> serviceRegistrationB=registerResourceBundle(resourceBundleB,"th_TH");
  ServiceRegistration<ResourceBundle> serviceRegistrationC=registerResourceBundle(resourceBundleC,"th");
  ServiceRegistration<ResourceBundle> serviceRegistrationD=registerResourceBundle(resourceBundleD,"");
  Assert.assertEquals("th_TH_TH",ResourceBundleUtil.getString(portletResourceBundleA,"th_TH_TH"));
  Assert.assertEquals("th_TH",ResourceBundleUtil.getString(portletResourceBundleA,"th_TH"));
  Assert.assertEquals("th",ResourceBundleUtil.getString(portletResourceBundleA,"th"));
  Assert.assertEquals("root-bundle",ResourceBundleUtil.getString(portletResourceBundleA,"root-bundle"));
  Assert.assertEquals("th_TH_TH",ResourceBundleUtil.getString(portletResourceBundleA,"common-key"));
  Assert.assertEquals("th_TH",ResourceBundleUtil.getString(portletResourceBundleB,"common-key"));
  Assert.assertTrue(!portletResourceBundleB.containsKey("th_TH_TH"));
  Assert.assertEquals("th",ResourceBundleUtil.getString(portletResourceBundleC,"common-key"));
  Assert.assertTrue(!portletResourceBundleC.containsKey("th_TH"));
  Assert.assertEquals("root-bundle",ResourceBundleUtil.getString(portletResourceBundleD,"common-key"));
  Assert.assertTrue(!portletResourceBundleD.containsKey("th"));
  serviceRegistrationA.unregister();
  Assert.assertTrue(!portletResourceBundleA.containsKey("th_TH_TH"));
  Assert.assertEquals("th_TH",ResourceBundleUtil.getString(portletResourceBundleA,"common-key"));
  serviceRegistrationB.unregister();
  Assert.assertTrue(!portletResourceBundleA.containsKey("th_TH"));
  Assert.assertEquals("th",ResourceBundleUtil.getString(portletResourceBundleA,"common-key"));
  serviceRegistrationC.unregister();
  Assert.assertTrue(!portletResourceBundleA.containsKey("th"));
  Assert.assertEquals("root-bundle",ResourceBundleUtil.getString(portletResourceBundleA,"common-key"));
  serviceRegistrationD.unregister();
  Assert.assertTrue(!portletResourceBundleA.containsKey("root-bundle"));
  Assert.assertTrue(!portletResourceBundleA.containsKey("common-key"));
}
