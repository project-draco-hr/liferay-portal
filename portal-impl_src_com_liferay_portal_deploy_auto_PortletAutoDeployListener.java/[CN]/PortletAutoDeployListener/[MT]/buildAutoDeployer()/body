{
  AutoDeployer autoDeployer=null;
  if (_portletDeployer) {
    autoDeployer=new PortletAutoDeployer();
  }
 else   if (_mvcDeployer) {
    autoDeployer=new MVCPortletAutoDeployer();
  }
 else   if (_phpDeployer) {
    autoDeployer=new PHPPortletAutoDeployer();
  }
 else   if (_waiDeployer) {
    if (_log.isInfoEnabled()) {
      _log.info("Deploying package as a web application");
    }
    autoDeployer=new WAIAutoDeployer();
  }
  if (autoDeployer == null) {
    throw new AutoDeployException("No Portlet auto deployers have been found.");
  }
  if (_log.isDebugEnabled()) {
    Class<?> clazz=autoDeployer.getClass();
    _log.debug("Using deployer " + clazz.getName());
  }
  return new ThreadSafeAutoDeployer(autoDeployer);
}
