{
  AutoDeployer autoDeployer=null;
  if (_isPortletDeployer) {
    autoDeployer=new PortletAutoDeployer();
  }
 else   if (_isMvcDeployer) {
    autoDeployer=new MVCPortletAutoDeployer();
  }
 else   if (_isPhpDeployer) {
    autoDeployer=new PHPPortletAutoDeployer();
  }
 else   if (_isWaiDeployer) {
    if (_log.isInfoEnabled()) {
      _log.info("Deploying package as a web application");
    }
    autoDeployer=new WAIAutoDeployer();
  }
  if (_log.isDebugEnabled()) {
    Class<?> clazz=autoDeployer.getClass();
    _log.debug("Using deployer " + clazz.getName());
  }
  return new ThreadSafeAutoDeployer(autoDeployer);
}
