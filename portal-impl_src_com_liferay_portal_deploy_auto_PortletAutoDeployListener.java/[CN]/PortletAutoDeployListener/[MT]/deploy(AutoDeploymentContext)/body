{
  File file=autoDeploymentContext.getFile();
  if (_log.isDebugEnabled()) {
    _log.debug("Invoking deploy for " + file.getPath());
  }
  if (!isDeployable(file)) {
    return AutoDeployer.CODE_NOT_APPLICABLE;
  }
  if (_log.isInfoEnabled()) {
    _log.info("Copying portlets for " + file.getPath());
  }
  if (_log.isDebugEnabled()) {
    Class<?> clazz=_autoDeployer.getClass();
    _log.debug("Using deployer " + clazz.getName());
  }
  _autoDeployer=new ThreadSafeAutoDeployer(_autoDeployer);
  int code=_autoDeployer.autoDeploy(autoDeploymentContext);
  if ((code == AutoDeployer.CODE_DEFAULT) && _log.isInfoEnabled()) {
    _log.info("Portlets for " + file.getPath() + " copied successfully. "+ "Deployment will start in a few seconds.");
  }
  return code;
}
