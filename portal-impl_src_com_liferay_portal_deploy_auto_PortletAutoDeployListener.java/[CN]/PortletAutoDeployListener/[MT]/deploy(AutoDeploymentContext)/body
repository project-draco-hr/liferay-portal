{
  File file=autoDeploymentContext.getFile();
  if (_log.isDebugEnabled()) {
    _log.debug("Invoking deploy for " + file.getPath());
  }
  AutoDeployer autoDeployer=null;
  if (isMatchingFile(file,"WEB-INF/" + Portal.PORTLET_XML_FILE_NAME_STANDARD)) {
    autoDeployer=_autoDeployer;
  }
 else   if (isMatchingFile(file,"index_mvc.jsp")) {
    autoDeployer=getMvcDeployer();
  }
 else   if (isMatchingFile(file,"index.php")) {
    autoDeployer=getPhpDeployer();
  }
 else   if (!isExtPlugin(file) && !isHookPlugin(file) && !isMatchingFile(file,"WEB-INF/liferay-layout-templates.xml")&& !isThemePlugin(file)&& !isWebPlugin(file)&& file.getName().endsWith(".war")) {
    if (_log.isInfoEnabled()) {
      _log.info("Deploying package as a web application");
    }
    autoDeployer=getWaiDeployer();
  }
 else {
    return;
  }
  if (_log.isInfoEnabled()) {
    _log.info("Copying portlets for " + file.getPath());
  }
  if (_log.isDebugEnabled()) {
    _log.debug("Using deployer " + autoDeployer.getClass().getName());
  }
  autoDeployer=new ThreadSafeAutoDeployer(autoDeployer);
  int code=autoDeployer.autoDeploy(autoDeploymentContext);
  if ((code == AutoDeployer.CODE_DEFAULT) && _log.isInfoEnabled()) {
    _log.info("Portlets for " + file.getPath() + " copied successfully. "+ "Deployment will start in a few seconds.");
  }
}
