{
  List<ItemSelectorReturnType> desiredItemSelectorReturnTypes=new ArrayList<>();
  desiredItemSelectorReturnTypes.add(new FileEntryItemSelectorReturnType());
  ItemSelectorCriterion imageItemSelectorCriterion=getImageItemSelectorCriterion(desiredItemSelectorReturnTypes);
  ItemSelectorCriterion urlItemSelectorCriterion=getURLItemSelectorCriterion();
  PortletURL itemSelectorURL=null;
  if (wikiPageResourcePrimKey == 0) {
    itemSelectorURL=_itemSelector.getItemSelectorURL(requestBackedPortletURLFactory,itemSelectedEventName,imageItemSelectorCriterion,urlItemSelectorCriterion);
  }
 else {
    ItemSelectorCriterion attachmentItemSelectorCriterion=getWikiAttachmentItemSelectorCriterion(wikiPageResourcePrimKey,desiredItemSelectorReturnTypes);
    ItemSelectorCriterion uploadItemSelectorCriterion=getUploadItemSelectorCriterion(wikiPageResourcePrimKey,themeDisplay,requestBackedPortletURLFactory);
    itemSelectorURL=_itemSelector.getItemSelectorURL(requestBackedPortletURLFactory,itemSelectedEventName,attachmentItemSelectorCriterion,imageItemSelectorCriterion,urlItemSelectorCriterion,uploadItemSelectorCriterion);
  }
  return itemSelectorURL.toString();
}
