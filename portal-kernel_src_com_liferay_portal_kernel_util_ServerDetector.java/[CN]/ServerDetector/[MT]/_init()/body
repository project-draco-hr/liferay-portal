{
  String serverId=System.getProperty(SERVER_DETECTOR_SERVER_ID);
  if (serverId != null) {
    _serverType=ServerType.valueOf(StringUtil.toUpperCase(serverId));
  }
 else   if (_hasSystemProperty("com.sun.aas.instanceRoot")) {
    _serverType=ServerType.GLASSFISH;
  }
 else   if (_hasSystemProperty("jboss.home.dir")) {
    _serverType=ServerType.JBOSS;
  }
 else   if (_hasSystemProperty("jonas.base")) {
    _serverType=ServerType.JONAS;
  }
 else   if (_detect("oracle.oc4j.util.ClassUtils")) {
    _serverType=ServerType.OC4J;
  }
 else   if (_hasSystemProperty("resin.home")) {
    _serverType=ServerType.RESIN;
  }
 else   if (_detect("/weblogic/Server.class")) {
    _serverType=ServerType.WEBLOGIC;
  }
 else   if (_detect("/com/ibm/websphere/product/VersionInfo.class")) {
    _serverType=ServerType.WEBSPHERE;
  }
 else   if (_hasSystemProperty("jboss.home.dir")) {
    _serverType=ServerType.WILDFLY;
  }
 else   if (_hasSystemProperty("jetty.home")) {
    _serverType=ServerType.JETTY;
  }
 else   if (_hasSystemProperty("catalina.base")) {
    _serverType=ServerType.TOMCAT;
  }
  if (System.getProperty("external-properties") == null) {
    if (_log.isInfoEnabled()) {
      if (_serverType != null) {
        _log.info("Detected server " + StringUtil.toLowerCase(_serverType.toString()));
      }
 else {
        _log.info("No server detected");
      }
    }
  }
}
