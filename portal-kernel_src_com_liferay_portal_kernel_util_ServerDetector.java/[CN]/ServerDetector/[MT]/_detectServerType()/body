{
  String serverId=System.getProperty(SERVER_DETECTOR_SERVER_ID);
  if (serverId != null) {
    return ServerType.valueOf(StringUtil.toUpperCase(serverId));
  }
  if (_hasSystemProperty("com.sun.aas.instanceRoot")) {
    return ServerType.GLASSFISH;
  }
  if (_hasSystemProperty("jboss.home.dir")) {
    return ServerType.JBOSS;
  }
  if (_hasSystemProperty("jonas.base")) {
    return ServerType.JONAS;
  }
  if (_detect("oracle.oc4j.util.ClassUtils")) {
    return ServerType.OC4J;
  }
  if (_hasSystemProperty("resin.home")) {
    return ServerType.RESIN;
  }
  if (_detect("/weblogic/Server.class")) {
    return ServerType.WEBLOGIC;
  }
  if (_detect("/com/ibm/websphere/product/VersionInfo.class")) {
    return ServerType.WEBSPHERE;
  }
  if (_hasSystemProperty("jboss.home.dir")) {
    return ServerType.WILDFLY;
  }
  if (_hasSystemProperty("jetty.home")) {
    return ServerType.JETTY;
  }
  if (_hasSystemProperty("catalina.base")) {
    return ServerType.TOMCAT;
  }
  return null;
}
