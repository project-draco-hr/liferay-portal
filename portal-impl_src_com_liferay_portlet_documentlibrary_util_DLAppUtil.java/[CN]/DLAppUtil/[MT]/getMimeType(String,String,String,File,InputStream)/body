{
  if (Validator.isNull(mimeType) || !mimeType.equals(ContentTypes.APPLICATION_OCTET_STREAM)) {
    return mimeType;
  }
  if (Validator.isNull(title)) {
    title=sourceFileName;
  }
  String extension=getExtension(title,sourceFileName);
  String titleWithExtension=DLUtil.getTitleWithExtension(title,extension);
  if (file != null) {
    mimeType=MimeTypesUtil.getContentType(file,titleWithExtension);
  }
 else {
    mimeType=MimeTypesUtil.getContentType(is,titleWithExtension);
  }
  return mimeType;
}
