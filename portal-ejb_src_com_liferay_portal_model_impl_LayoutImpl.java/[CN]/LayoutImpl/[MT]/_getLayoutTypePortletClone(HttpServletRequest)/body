{
  LayoutTypePortlet layoutTypePortlet=null;
  if (isShared()) {
    LayoutClone layoutClone=LayoutCloneFactory.getInstance();
    if (layoutClone != null) {
      String typeSettings=layoutClone.get(req,getPlid());
      if (typeSettings != null) {
        Properties props=new NullSafeProperties();
        PropertiesUtil.load(props,typeSettings);
        String stateMax=props.getProperty(LayoutTypePortletImpl.STATE_MAX);
        String stateMin=props.getProperty(LayoutTypePortletImpl.STATE_MIN);
        Layout layout=(Layout)((LayoutImpl)this).clone();
        layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
        layoutTypePortlet.setStateMax(stateMax);
        layoutTypePortlet.setStateMin(stateMin);
      }
    }
  }
  if (layoutTypePortlet == null) {
    layoutTypePortlet=(LayoutTypePortlet)getLayoutType();
  }
  return layoutTypePortlet;
}
