{
  Session session=null;
  try {
    if (resource.isNew() || resource.isModified()) {
      session=openSession();
      if (resource.isNew()) {
        ResourceHBM resourceHBM=new ResourceHBM();
        resourceHBM.setResourceId(resource.getResourceId());
        resourceHBM.setCompanyId(resource.getCompanyId());
        resourceHBM.setName(resource.getName());
        resourceHBM.setTypeId(resource.getTypeId());
        resourceHBM.setScope(resource.getScope());
        resourceHBM.setPrimKey(resource.getPrimKey());
        session.save(resourceHBM);
        session.flush();
      }
 else {
        ResourceHBM resourceHBM=(ResourceHBM)session.get(ResourceHBM.class,resource.getPrimaryKey());
        if (resourceHBM != null) {
          resourceHBM.setCompanyId(resource.getCompanyId());
          resourceHBM.setName(resource.getName());
          resourceHBM.setTypeId(resource.getTypeId());
          resourceHBM.setScope(resource.getScope());
          resourceHBM.setPrimKey(resource.getPrimKey());
          session.flush();
        }
 else {
          resourceHBM=new ResourceHBM();
          resourceHBM.setResourceId(resource.getResourceId());
          resourceHBM.setCompanyId(resource.getCompanyId());
          resourceHBM.setName(resource.getName());
          resourceHBM.setTypeId(resource.getTypeId());
          resourceHBM.setScope(resource.getScope());
          resourceHBM.setPrimKey(resource.getPrimKey());
          session.save(resourceHBM);
          session.flush();
        }
      }
      resource.setNew(false);
      resource.setModified(false);
    }
    return resource;
  }
 catch (  HibernateException he) {
    throw new SystemException(he);
  }
 finally {
    closeSession(session);
  }
}
