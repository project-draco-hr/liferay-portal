{
  if (allowedClasses != null) {
    throw new ExecutionException("Constrained execution not supported for Ruby");
  }
  try {
    GlobalVariables globalVariables=_ruby.getGlobalVariables();
    for (    Map.Entry<String,Object> entry : inputObjects.entrySet()) {
      String inputName=entry.getKey();
      Object inputObject=entry.getValue();
      if (!inputName.startsWith(StringPool.DOLLAR)) {
        inputName=StringPool.DOLLAR + inputName;
      }
      BeanGlobalVariable beanGlobalVariable=new BeanGlobalVariable(_ruby,inputObject,inputObject.getClass());
      globalVariables.define(inputName,beanGlobalVariable);
    }
    _ruby.evalScriptlet(script);
    if (outputNames == null) {
      return null;
    }
    Map<String,Object> outputObjects=new HashMap<String,Object>();
    for (    String outputName : outputNames) {
      outputObjects.put(outputName,globalVariables.get(outputName));
    }
    return outputObjects;
  }
 catch (  RaiseException re) {
    throw new ScriptingException(re.getException().message.asJavaString() + "\n\n",re);
  }
 finally {
    JavaEmbedUtils.terminate(_ruby);
  }
}
