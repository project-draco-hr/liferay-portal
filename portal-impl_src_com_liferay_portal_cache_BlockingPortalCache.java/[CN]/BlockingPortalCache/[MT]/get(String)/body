{
  Object obj=_portalCache.get(key);
  if (obj == null) {
    CompeteLatch lastCompeteLatch=_lastCompeteLatch.get();
    if (lastCompeteLatch != null) {
      lastCompeteLatch.done();
      _lastCompeteLatch.set(null);
    }
    CompeteLatch currentCompeteLatch=_competeLatchMap.get(key);
    if (currentCompeteLatch == null) {
      CompeteLatch newCompeteLatch=new CompeteLatch();
      currentCompeteLatch=_competeLatchMap.putIfAbsent(key,newCompeteLatch);
      if (currentCompeteLatch == null) {
        currentCompeteLatch=newCompeteLatch;
      }
    }
    _lastCompeteLatch.set(currentCompeteLatch);
    if (!currentCompeteLatch.compete()) {
      currentCompeteLatch.await();
      _lastCompeteLatch.set(null);
      obj=_portalCache.get(key);
    }
  }
  return obj;
}
