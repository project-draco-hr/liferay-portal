{
  String[] pluginPackagesUnignored=StringUtil.split(ParamUtil.getString(req,"pluginPackagesUnignored"),StringPool.NEW_LINE);
  String[] pluginPackagesIgnored=PrefsPropsUtil.getStringArray(PropsKeys.PLUGIN_NOTIFICATIONS_PACKAGES_IGNORED,StringPool.NEW_LINE,PropsValues.PLUGIN_NOTIFICATIONS_PACKAGES_IGNORED);
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < pluginPackagesIgnored.length; i++) {
    String packageId=pluginPackagesIgnored[i];
    if (!ArrayUtil.contains(pluginPackagesUnignored,packageId)) {
      sb.append(packageId);
      sb.append(StringPool.NEW_LINE);
    }
  }
  PortletPreferences prefs=PrefsPropsUtil.getPreferences();
  prefs.setValue(PropsKeys.PLUGIN_NOTIFICATIONS_PACKAGES_IGNORED,sb.toString());
  prefs.store();
  PluginPackageUtil.refreshUpdatesAvailableCache();
}
