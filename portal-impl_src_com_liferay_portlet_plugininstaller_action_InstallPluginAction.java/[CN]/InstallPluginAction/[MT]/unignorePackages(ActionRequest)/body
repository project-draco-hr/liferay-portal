{
  String[] pluginPackagesUnignored=StringUtil.splitLines(ParamUtil.getString(actionRequest,"pluginPackagesUnignored"));
  String[] pluginPackagesIgnored=PrefsPropsUtil.getStringArray(PropsKeys.PLUGIN_NOTIFICATIONS_PACKAGES_IGNORED,StringPool.NEW_LINE,PropsValues.PLUGIN_NOTIFICATIONS_PACKAGES_IGNORED);
  StringBundler sb=new StringBundler();
  for (int i=0; i < pluginPackagesIgnored.length; i++) {
    String packageId=pluginPackagesIgnored[i];
    if (!ArrayUtil.contains(pluginPackagesUnignored,packageId)) {
      sb.append(packageId);
      sb.append(StringPool.NEW_LINE);
    }
  }
  PortletPreferences portletPreferences=PrefsPropsUtil.getPreferences();
  portletPreferences.setValue(PropsKeys.PLUGIN_NOTIFICATIONS_PACKAGES_IGNORED,sb.toString());
  portletPreferences.store();
  PluginPackageUtil.refreshUpdatesAvailableCache();
}
