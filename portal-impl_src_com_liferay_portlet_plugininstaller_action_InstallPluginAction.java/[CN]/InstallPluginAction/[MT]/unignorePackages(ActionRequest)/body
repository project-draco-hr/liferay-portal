{
  String pluginPackagesUnignored=ParamUtil.getString(req,"pluginPackagesUnignored");
  String[] unignoredPluginPackages=StringUtil.split(pluginPackagesUnignored,StringPool.NEW_LINE);
  PortletPreferences prefs=PrefsPropsUtil.getPreferences();
  String oldPluginPackagesIgnored=PrefsPropsUtil.getString(PropsUtil.PLUGIN_NOTIFICATIONS_PACKAGES_IGNORED);
  String[] currentPluginPackages=StringUtil.split(oldPluginPackagesIgnored,StringPool.NEW_LINE);
  StringMaker sm=new StringMaker();
  for (int i=0; i < currentPluginPackages.length; i++) {
    String currentPluginPackage=currentPluginPackages[i];
    if (!ArrayUtil.contains(unignoredPluginPackages,currentPluginPackage)) {
      sm.append(currentPluginPackage);
      sm.append(StringPool.NEW_LINE);
    }
  }
  prefs.setValue(PropsUtil.PLUGIN_NOTIFICATIONS_PACKAGES_IGNORED,sm.toString());
  prefs.store();
  PluginPackageUtil.refreshUpdatesAvailableCache();
}
