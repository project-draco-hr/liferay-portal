{
  String pluginPackagesDismissed=ParamUtil.getString(req,"pluginPackagesUndismissed");
  String[] undismissedPluginPackages=StringUtil.split(pluginPackagesDismissed,StringPool.NEW_LINE);
  PortletPreferences prefs=PrefsPropsUtil.getPreferences();
  String oldPluginPackagesDismissed=PrefsPropsUtil.getString(PropsUtil.PLUGIN_NOTIFICATIONS_PACKAGES_DISMISSED);
  String[] currentPluginPackages=StringUtil.split(oldPluginPackagesDismissed,StringPool.NEW_LINE);
  StringMaker sm=new StringMaker();
  for (int i=0; i < currentPluginPackages.length; i++) {
    String currentPluginPackage=currentPluginPackages[i];
    if (!ArrayUtil.contains(undismissedPluginPackages,currentPluginPackage)) {
      sm.append(currentPluginPackage);
      sm.append(StringPool.NEW_LINE);
    }
  }
  prefs.setValue(PropsUtil.PLUGIN_NOTIFICATIONS_PACKAGES_DISMISSED,sm.toString());
  prefs.store();
  PluginPackageUtil.refreshUpdatesAvailableCache();
}
