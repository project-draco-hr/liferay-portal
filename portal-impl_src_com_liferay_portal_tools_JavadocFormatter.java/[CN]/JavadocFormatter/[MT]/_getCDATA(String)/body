{
  StringBundler sb=new StringBundler();
  if (cdata == null) {
    return StringPool.BLANK;
  }
 else   if (cdata.contains("<pre>") || cdata.contains("<table>")) {
    int nextIndex=0;
    int startIndex=0;
    while (!cdata.isEmpty()) {
      int preIndex=cdata.indexOf("<pre>");
      int endPreIndex=cdata.indexOf("</pre>");
      int tableIndex=cdata.indexOf("<table>");
      int endTableIndex=cdata.indexOf("</table>");
      boolean bothPreformattedTagsExist=((preIndex > -1) && (tableIndex > -1)) ? true : false;
      boolean noPreformattedTagsExist=((preIndex == -1) && (tableIndex == -1)) ? true : false;
      boolean preExistsWithNoExistingTable=((preIndex != -1) && (tableIndex == -1)) ? true : false;
      boolean startsWithPreformattedTag=((preIndex == 0) || (tableIndex == 0)) ? true : false;
      boolean tableExistsWithNoExistingPre=((preIndex == -1) && (tableIndex != -1)) ? true : false;
      String tagName=null;
      if (bothPreformattedTagsExist) {
        if (preIndex < tableIndex) {
          startIndex=preIndex;
          tagName="pre";
        }
 else {
          startIndex=tableIndex;
          tagName="table";
        }
      }
      if (!startsWithPreformattedTag) {
        if (noPreformattedTagsExist) {
          startIndex=cdata.length();
        }
 else         if (tableExistsWithNoExistingPre) {
          startIndex=tableIndex;
        }
 else         if (preExistsWithNoExistingTable) {
          startIndex=preIndex;
        }
        String textToFormat=cdata.substring(0,startIndex);
        sb.append(_formatCDATA(textToFormat));
        nextIndex=startIndex;
      }
 else {
        startIndex=0;
        if (preIndex == 0) {
          tagName="pre";
        }
 else {
          tagName="table";
        }
        String startTag="<" + tagName + ">";
        String endTag="</" + tagName + ">";
        int startTagLength=startTag.length();
        int endTagLength=endTag.length();
        int endIndex=cdata.indexOf(endTag,startTagLength - 1);
        String entireElement=cdata.substring(startIndex,endIndex + endTagLength);
        sb.append(entireElement);
        nextIndex=endIndex + endTagLength;
      }
      cdata=cdata.substring(nextIndex);
    }
  }
 else {
    sb.append(_formatCDATA(cdata));
  }
  return sb.toString().trim();
}
