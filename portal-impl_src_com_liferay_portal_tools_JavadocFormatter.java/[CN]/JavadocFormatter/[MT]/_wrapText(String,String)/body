{
  int indentLength=_getIndentLength(indent);
  if (text.contains("<table>")) {
    text=_wrapText(text,indentLength,"table");
  }
 else   if (text.contains("<pre>")) {
    text=_wrapText(text,indentLength,"pre");
  }
 else {
    text=_formatInlines(text);
    text=StringUtil.wrap(text,80 - indentLength,"\n");
  }
  text=text.replaceAll("(?m)^",indent);
  text=text.replaceAll("(?m) +$",StringPool.BLANK);
  return text;
}
