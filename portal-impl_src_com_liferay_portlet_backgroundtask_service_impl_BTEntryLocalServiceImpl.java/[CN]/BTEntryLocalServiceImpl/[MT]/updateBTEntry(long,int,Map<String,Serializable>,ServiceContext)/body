{
  Date now=new Date();
  BTEntry btEntry=btEntryPersistence.findByPrimaryKey(btEntryId);
  if ((status == BackgroundTaskConstants.STATUS_SUCCESSFUL) || (status == BackgroundTaskConstants.STATUS_FAILED)) {
    btEntry.setCompleted(true);
    btEntry.setCompletionDate(now);
  }
  btEntry.setModifiedDate(serviceContext.getModifiedDate(now));
  btEntry.setStatus(status);
  if (taskContext != null) {
    String taskContextString=JSONFactoryUtil.serialize(taskContext);
    btEntry.setTaskContext(taskContextString);
  }
  btEntryPersistence.update(btEntry);
  return btEntry;
}
