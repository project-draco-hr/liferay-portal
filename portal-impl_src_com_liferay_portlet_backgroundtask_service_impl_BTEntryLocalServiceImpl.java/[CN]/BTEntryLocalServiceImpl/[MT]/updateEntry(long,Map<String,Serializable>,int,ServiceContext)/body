{
  Date now=new Date();
  BTEntry entry=btEntryPersistence.findByPrimaryKey(entryId);
  entry.setModifiedDate(serviceContext.getModifiedDate(now));
  if (taskContextMap != null) {
    String taskContext=JSONFactoryUtil.serialize(taskContextMap);
    entry.setTaskContext(taskContext);
  }
  if ((status == BTEntryConstants.STATUS_FAILED) || (status == BTEntryConstants.STATUS_SUCCESSFUL)) {
    entry.setCompleted(true);
    entry.setCompletionDate(now);
  }
  entry.setStatus(status);
  btEntryPersistence.update(entry);
  return entry;
}
