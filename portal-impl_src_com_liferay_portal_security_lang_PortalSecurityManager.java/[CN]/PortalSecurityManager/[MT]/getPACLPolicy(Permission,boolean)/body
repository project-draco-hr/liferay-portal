{
  boolean enabled=PortalSecurityManagerThreadLocal.isEnabled();
  try {
    PortalSecurityManagerThreadLocal.setEnabled(false);
    if (permission instanceof PortalPermission) {
      PortalPermission portalPermission=(PortalPermission)permission;
      ClassLoader policyClassLoader=portalPermission.getPolicyClassLoader();
      if (policyClassLoader != null) {
        return PACLPolicyManager.getPACLPolicy(policyClassLoader);
      }
    }
    return PACLClassUtil.getPACLPolicyBySecurityManagerClassContext(getClassContext(),debug);
  }
  finally {
    PortalSecurityManagerThreadLocal.setEnabled(enabled);
  }
}
