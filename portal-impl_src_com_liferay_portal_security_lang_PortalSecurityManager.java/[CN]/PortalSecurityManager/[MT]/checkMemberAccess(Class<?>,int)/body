{
  if (clazz == null) {
    throw new NullPointerException();
  }
  if (which != Member.PUBLIC) {
    Class<?> caller=Reflection.getCallerClass(4);
    ClassLoader callerClassLoader=PACLClassLoaderUtil.getClassLoader(caller);
    ClassLoader clazzClassLoader=PACLClassLoaderUtil.getClassLoader(clazz);
    if ((callerClassLoader == null) && (clazzClassLoader == null)) {
      return;
    }
    if (callerClassLoader == null) {
      for (int i=5; ; i++) {
        caller=Reflection.getCallerClass(i);
        if (caller == null) {
          break;
        }
        String className=caller.getName();
        if (!className.startsWith("java.lang") && !className.startsWith("java.security") && !className.startsWith("sun.reflect")) {
          callerClassLoader=PACLClassLoaderUtil.getClassLoader(caller);
          break;
        }
      }
    }
    if (callerClassLoader == clazzClassLoader) {
      return;
    }
    Permission permission=new RuntimePermission(PACLConstants.RUNTIME_PERMISSION_ACCESS_DECLARED_MEMBERS);
    checkPermission(permission);
  }
}
