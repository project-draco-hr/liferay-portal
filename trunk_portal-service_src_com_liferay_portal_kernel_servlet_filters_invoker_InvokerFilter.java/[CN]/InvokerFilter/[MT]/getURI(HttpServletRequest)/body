{
  String uri=null;
  if (_dispatcher == Dispatcher.ERROR) {
    uri=(String)request.getAttribute(JavaConstants.JAVAX_SERVLET_ERROR_REQUEST_URI);
  }
 else   if (_dispatcher == Dispatcher.INCLUDE) {
    uri=(String)request.getAttribute(JavaConstants.JAVAX_SERVLET_INCLUDE_REQUEST_URI);
  }
 else {
    uri=request.getRequestURI();
  }
  String contextPath=request.getContextPath();
  if (Validator.isNotNull(contextPath) && !contextPath.equals(StringPool.SLASH) && uri.startsWith(contextPath)) {
    uri=uri.substring(contextPath.length());
  }
  return uri;
}
