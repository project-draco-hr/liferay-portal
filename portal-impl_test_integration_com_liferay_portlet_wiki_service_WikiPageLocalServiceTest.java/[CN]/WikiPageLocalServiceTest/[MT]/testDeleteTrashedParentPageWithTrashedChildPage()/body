{
  WikiPage[] wikiPages=addTrashedParentPageWithTrashedChildPage();
  WikiPage parentPage=wikiPages[0];
  WikiPage childPage=wikiPages[1];
  WikiPageLocalServiceUtil.deletePage(parentPage);
  try {
    WikiPageLocalServiceUtil.getPage(parentPage.getResourcePrimKey());
    Assert.fail("parentPage exists");
  }
 catch (  NoSuchPageResourceException nspre) {
    childPage=WikiPageLocalServiceUtil.getLatestPage(childPage.getResourcePrimKey(),WorkflowConstants.STATUS_IN_TRASH,false);
    Assert.assertNull(childPage.getParentPage());
  }
}
