{
  WikiNode destinationNode=WikiTestUtil.addNode(_group.getGroupId());
  WikiTestUtil.addPage(TestPropsValues.getUserId(),_group.getGroupId(),_node.getNodeId(),"ParentPage",true);
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(_group.getGroupId());
  createPageHierarchy("ParentPage",10,serviceContext);
  WikiPageLocalServiceUtil.changeNode(TestPropsValues.getUserId(),_node.getNodeId(),"ParentPage",destinationNode.getNodeId(),serviceContext);
  WikiPage page=WikiPageLocalServiceUtil.getPage(destinationNode.getNodeId(),"ParentPage");
  Assert.assertTrue(page.isApproved());
  Assert.assertTrue(page.getNodeId() == destinationNode.getNodeId());
  List<WikiPage> childHierarchy=getPageHierarchy(destinationNode.getNodeId(),"ParentPage");
  Assert.assertEquals(10,childHierarchy.size());
  for (  WikiPage childPage : childHierarchy) {
    Assert.assertTrue(childPage.isApproved());
    Assert.assertTrue(childPage.getNodeId() == destinationNode.getNodeId());
  }
}
