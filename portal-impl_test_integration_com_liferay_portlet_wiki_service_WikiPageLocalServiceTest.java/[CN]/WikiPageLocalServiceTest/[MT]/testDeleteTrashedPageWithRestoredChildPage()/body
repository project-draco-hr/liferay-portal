{
  WikiPage[] pages=WikiTestUtil.addTrashedPageWithChildPage(_group.getGroupId(),_node.getNodeId(),true);
  WikiPage parentPage=pages[0];
  WikiPage childPage=pages[1];
  WikiPageLocalServiceUtil.restorePageFromTrash(TestPropsValues.getUserId(),childPage);
  WikiPageLocalServiceUtil.deletePage(parentPage);
  try {
    WikiPageLocalServiceUtil.getPage(parentPage.getResourcePrimKey());
    Assert.fail();
  }
 catch (  NoSuchPageResourceException nspre) {
    childPage=WikiPageLocalServiceUtil.getPage(childPage.getResourcePrimKey());
    Assert.assertNull(childPage.fetchParentPage());
    Assert.assertEquals(WorkflowConstants.STATUS_APPROVED,childPage.getStatus());
  }
}
