{
  WikiPage[] wikiPages=addTrashedPageWithTrashedRedirectPage();
  WikiPage page=wikiPages[0];
  WikiPage redirectPage=wikiPages[1];
  WikiPageLocalServiceUtil.restorePageFromTrash(TestPropsValues.getUserId(),redirectPage);
  WikiPageLocalServiceUtil.deletePage(page);
  try {
    WikiPageLocalServiceUtil.getPage(page.getResourcePrimKey());
    Assert.fail("page exists");
  }
 catch (  NoSuchPageResourceException nspre) {
    redirectPage=WikiPageLocalServiceUtil.getPage(redirectPage.getResourcePrimKey());
    Assert.assertNull(redirectPage.getRedirectPage());
    Assert.assertEquals(redirectPage.getStatus(),WorkflowConstants.STATUS_APPROVED);
  }
}
