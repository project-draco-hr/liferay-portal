{
  WikiPage page=WikiTestUtil.addPage(_group.getGroupId(),_node.getNodeId(),true);
  if (hasExpandoValues) {
    addExpandoValueToPage(page);
  }
  page=WikiPageLocalServiceUtil.movePageToTrash(TestPropsValues.getUserId(),_node.getNodeId(),page.getTitle());
  WikiPageLocalServiceUtil.restorePageFromTrash(TestPropsValues.getUserId(),page);
  WikiPage restoredPage=WikiPageLocalServiceUtil.getPage(page.getResourcePrimKey());
  Assert.assertNotNull(restoredPage);
  if (hasExpandoValues) {
    ExpandoBridge expandoBridge=page.getExpandoBridge();
    ExpandoBridge restoredExpandoBridge=restoredPage.getExpandoBridge();
    AssertUtils.assertEquals(restoredExpandoBridge.getAttributes(),expandoBridge.getAttributes());
  }
}
