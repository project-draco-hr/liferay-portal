{
  String portletId=PortalUtil.getPortletId(portletRequest);
  String rootPortletId=PortletConstants.getRootPortletId(portletId);
  if (!rootPortletId.equals(AssetPublisherPortletKeys.ASSET_PUBLISHER)) {
    return;
  }
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  Layout layout=LayoutLocalServiceUtil.getLayout(themeDisplay.getPlid());
  PortletPreferences portletPreferences=PortletPreferencesFactoryUtil.getStrictPortletSetup(layout,portletId);
  if (portletPreferences instanceof StrictPortletPreferencesImpl) {
    return;
  }
  String selectionStyle=portletPreferences.getValue("selectionStyle","dynamic");
  if (selectionStyle.equals("dynamic")) {
    return;
  }
  AssetEntry assetEntry=AssetEntryLocalServiceUtil.getEntry(className,classPK);
  addSelection(themeDisplay,portletPreferences,portletId,assetEntry.getEntryId(),assetEntryOrder,className);
  portletPreferences.store();
}
