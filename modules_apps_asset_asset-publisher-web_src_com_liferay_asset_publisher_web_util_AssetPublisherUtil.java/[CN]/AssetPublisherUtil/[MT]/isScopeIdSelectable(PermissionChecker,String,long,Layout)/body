{
  long groupId=getGroupIdFromScopeId(scopeId,layout.getGroupId(),layout.isPrivateLayout());
  if (scopeId.startsWith(SCOPE_ID_CHILD_GROUP_PREFIX)) {
    Group group=_groupLocalService.getGroup(groupId);
    if (!group.hasAncestor(layout.getGroupId())) {
      return false;
    }
  }
 else   if (scopeId.startsWith(SCOPE_ID_PARENT_GROUP_PREFIX)) {
    Group siteGroup=layout.getGroup();
    if (!siteGroup.hasAncestor(groupId)) {
      return false;
    }
    Group group=_groupLocalService.getGroup(groupId);
    if (SitesUtil.isContentSharingWithChildrenEnabled(group)) {
      return true;
    }
    if (!PrefsPropsUtil.getBoolean(layout.getCompanyId(),PropsKeys.SITES_CONTENT_SHARING_THROUGH_ADMINISTRATORS_ENABLED)) {
      return false;
    }
    return GroupPermissionUtil.contains(permissionChecker,group,ActionKeys.UPDATE);
  }
 else   if (groupId != companyGroupId) {
    return GroupPermissionUtil.contains(permissionChecker,groupId,ActionKeys.UPDATE);
  }
  return true;
}
