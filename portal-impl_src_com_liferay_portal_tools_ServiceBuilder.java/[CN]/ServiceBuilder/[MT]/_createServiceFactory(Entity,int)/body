{
  StringMaker sm=new StringMaker();
  sm.append("package " + _packagePath + ".service;");
  sm.append("public class " + entity.getName() + _getSessionTypeName(sessionType)+ "ServiceFactory {");
  sm.append("public static " + entity.getName() + _getSessionTypeName(sessionType)+ "Service getService() {");
  sm.append("return _getFactory()._service;");
  sm.append("}");
  sm.append("public static " + entity.getName() + _getSessionTypeName(sessionType)+ "Service getTxImpl() {");
  sm.append("if (_txImpl == null) {");
  sm.append("_txImpl = (" + entity.getName() + _getSessionTypeName(sessionType)+ "Service)"+ _beanLocatorUtilPackage+ ".BeanLocatorUtil.locate(_TX_IMPL);");
  sm.append("}");
  sm.append("return _txImpl;");
  sm.append("}");
  sm.append("public void setService(" + entity.getName() + _getSessionTypeName(sessionType)+ "Service service) {");
  sm.append("_service = service;");
  sm.append("}");
  sm.append("private static " + entity.getName() + _getSessionTypeName(sessionType)+ "ServiceFactory _getFactory() {");
  sm.append("if (_factory == null) {");
  sm.append("_factory = (" + entity.getName() + _getSessionTypeName(sessionType)+ "ServiceFactory)"+ _beanLocatorUtilPackage+ ".BeanLocatorUtil.locate(_FACTORY);");
  sm.append("}");
  sm.append("return _factory;");
  sm.append("}");
  sm.append("private static final String _FACTORY = " + entity.getName() + _getSessionTypeName(sessionType)+ "ServiceFactory.class.getName();");
  sm.append("private static final String _TX_IMPL = " + entity.getName() + _getSessionTypeName(sessionType)+ "Service.class.getName() + \".transaction\";");
  sm.append("private static " + entity.getName() + _getSessionTypeName(sessionType)+ "ServiceFactory _factory;");
  sm.append("private static " + entity.getName() + _getSessionTypeName(sessionType)+ "Service _txImpl;");
  sm.append("private " + entity.getName() + _getSessionTypeName(sessionType)+ "Service _service;");
  sm.append("}");
  File ejbFile=new File(_serviceOutputPath + "/service/" + entity.getName()+ _getSessionTypeName(sessionType)+ "ServiceFactory.java");
  Map jalopySettings=new HashMap();
  String[] classComments={_DEFAULT_CLASS_COMMENTS,"This class is responsible for the lookup of the implementation for <code>" + _packagePath + ".service."+ entity.getName()+ "Service</code>. Spring manages the lookup and lifecycle of the beans. This means you can modify the Spring configuration files to return a different implementation or to inject additional behavior.","See the <code>spring.configs</code> property in portal.properties for additional information on how to customize the Spring XML files."};
  String[] see={_packagePath + ".service." + entity.getName()+ "Service",_packagePath + ".service." + entity.getName()+ "ServiceUtil"};
  jalopySettings.put("classComments",classComments);
  jalopySettings.put("see",see);
  writeFile(ejbFile,sm.toString(),jalopySettings);
}
