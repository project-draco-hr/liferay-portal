{
  StringMaker entryURL=new StringMaker();
  List hitLayoutIds=new ArrayList();
  try {
    hitLayoutIds=JournalContentSearchLocalServiceUtil.getLayoutIds(layout.getGroupId(),layout.isPrivateLayout(),article.getArticleId());
    if (hitLayoutIds.size() > 0) {
      Long hitLayoutId=(Long)hitLayoutIds.get(0);
      Layout hitLayout=LayoutLocalServiceUtil.getLayout(layout.getGroupId(),layout.isPrivateLayout(),hitLayoutId.longValue());
      return themeDisplay.getURLPortal() + PortalUtil.getLayoutURL(hitLayout,themeDisplay);
    }
 else     if (Validator.isNotNull(targetLayoutFriendlyUrl)) {
      entryURL.append(themeDisplay.getURLPortal());
      entryURL.append(targetLayoutFriendlyUrl);
    }
 else {
      entryURL.append(themeDisplay.getURLPortal());
      entryURL.append(PortalUtil.getLayoutFriendlyURL(layout,themeDisplay));
    }
  }
 catch (  Exception se) {
  }
  entryURL.append("/journal_content/");
  if (Validator.isNotNull(targetPortletId)) {
    entryURL.append(targetPortletId);
  }
 else {
    entryURL.append(PortletKeys.JOURNAL_CONTENT);
  }
  entryURL.append("/");
  entryURL.append(article.getGroupId());
  entryURL.append("/");
  entryURL.append(article.getArticleId());
  return entryURL.toString();
}
