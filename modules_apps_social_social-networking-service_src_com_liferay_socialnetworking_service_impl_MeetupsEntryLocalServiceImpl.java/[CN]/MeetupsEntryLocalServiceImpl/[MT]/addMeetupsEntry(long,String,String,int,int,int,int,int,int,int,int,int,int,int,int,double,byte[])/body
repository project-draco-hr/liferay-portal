{
  User user=userLocalService.getUserById(userId);
  Date startDate=PortalUtil.getDate(startDateMonth,startDateDay,startDateYear,startDateHour,startDateMinute,user.getTimeZone(),MeetupsEntryStartDateException.class);
  Date endDate=PortalUtil.getDate(endDateMonth,endDateDay,endDateYear,endDateHour,endDateMinute,user.getTimeZone(),MeetupsEntryEndDateException.class);
  Date now=new Date();
  long meetupsEntryId=counterLocalService.increment();
  MeetupsEntry meetupsEntry=meetupsEntryPersistence.create(meetupsEntryId);
  meetupsEntry.setCompanyId(user.getCompanyId());
  meetupsEntry.setUserId(user.getUserId());
  meetupsEntry.setUserName(user.getFullName());
  meetupsEntry.setCreateDate(now);
  meetupsEntry.setModifiedDate(now);
  meetupsEntry.setTitle(title);
  meetupsEntry.setDescription(description);
  meetupsEntry.setStartDate(startDate);
  meetupsEntry.setEndDate(endDate);
  meetupsEntry.setTotalAttendees(totalAttendees);
  meetupsEntry.setMaxAttendees(maxAttendees);
  meetupsEntry.setPrice(price);
  if (ArrayUtil.isNotEmpty(thumbnail)) {
    meetupsEntry.setThumbnailId(counterLocalService.increment());
  }
  meetupsEntryPersistence.update(meetupsEntry);
  if (ArrayUtil.isNotEmpty(thumbnail)) {
    getImageLocalService().updateImage(meetupsEntry.getThumbnailId(),thumbnail);
  }
  return meetupsEntry;
}
