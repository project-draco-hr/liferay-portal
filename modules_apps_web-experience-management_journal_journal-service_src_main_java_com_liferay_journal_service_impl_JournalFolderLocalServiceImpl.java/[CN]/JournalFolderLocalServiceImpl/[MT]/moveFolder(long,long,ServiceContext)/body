{
  JournalFolder folder=journalFolderPersistence.findByPrimaryKey(folderId);
  parentFolderId=getParentFolderId(folder,parentFolderId);
  if (folder.getParentFolderId() == parentFolderId) {
    return folder;
  }
  validateFolderDDMStructures(folder.getFolderId(),parentFolderId);
  validateFolder(folder.getFolderId(),folder.getGroupId(),parentFolderId,folder.getName());
  folder.setParentFolderId(parentFolderId);
  folder.setTreePath(folder.buildTreePath());
  folder.setExpandoBridgeAttributes(serviceContext);
  journalFolderPersistence.update(folder);
  rebuildTree(folder.getCompanyId(),folderId,folder.getTreePath(),true);
  return folder;
}
