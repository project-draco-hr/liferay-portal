{
  List<DDLRecord> records=new ArrayList<>();
  List<com.liferay.portal.kernel.search.Document> documents=hits.toList();
  for (  com.liferay.portal.kernel.search.Document document : documents) {
    long recordId=GetterUtil.getLong(document.get(com.liferay.portal.kernel.search.Field.ENTRY_CLASS_PK));
    try {
      DDLRecord record=DDLRecordLocalServiceUtil.getRecord(recordId);
      records.add(record);
    }
 catch (    NoSuchRecordException nsre) {
      if (_log.isWarnEnabled()) {
        _log.warn("DDL record index is stale and contains record " + recordId,nsre);
      }
      Indexer<DDLRecord> indexer=IndexerRegistryUtil.getIndexer(DDLRecord.class);
      long companyId=GetterUtil.getLong(document.get(com.liferay.portal.kernel.search.Field.COMPANY_ID));
      indexer.delete(companyId,document.getUID());
    }
  }
  return records;
}
