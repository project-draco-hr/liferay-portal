{
  Map<String,DDMFormField> structureDDMFormFieldsMap=structureDDMForm.getDDMFormFieldsMap(false);
  Iterator<DDMFormField> itr=templateDDMFormFields.iterator();
  while (itr.hasNext()) {
    DDMFormField templateDDMFormField=itr.next();
    String name=templateDDMFormField.getName();
    if (!structureDDMFormFieldsMap.containsKey(name)) {
      itr.remove();
      continue;
    }
    if (templateMode.equals(DDMTemplateConstants.TEMPLATE_MODE_CREATE)) {
      DDMFormField structureDDMFormField=structureDDMFormFieldsMap.get(name);
      templateDDMFormField.setRequired(structureDDMFormField.isRequired());
    }
    syncStructureTemplatesFields(structureDDMForm,templateDDMFormField.getNestedDDMFormFields(),templateMode);
  }
}
