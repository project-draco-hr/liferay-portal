{
  WebDAVStorage storage=webDAVRequest.getWebDAVStorage();
  Resource resource=storage.getResource(webDAVRequest);
  WebDAVProps webDavProps=null;
  if (resource.getPrimaryKey() <= 0) {
    if (_log.isWarnEnabled()) {
      _log.warn("There is no primary key set for resource");
    }
    throw new InvalidRequestException();
  }
 else   if (resource.isLocked()) {
    Lock lock=resource.getLock();
    if ((lock == null) || !lock.getUuid().equals(webDAVRequest.getLockUuid())) {
      throw new LockException();
    }
  }
  webDavProps=WebDAVPropsLocalServiceUtil.getWebDAVProps(webDAVRequest.getCompanyId(),resource.getClassName(),resource.getPrimaryKey());
  return webDavProps;
}
