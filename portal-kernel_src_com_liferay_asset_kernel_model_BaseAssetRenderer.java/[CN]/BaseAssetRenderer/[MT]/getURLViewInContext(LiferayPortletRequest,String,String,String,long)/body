{
  ThemeDisplay themeDisplay=(ThemeDisplay)liferayPortletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  StringBundler sb=new StringBundler(11);
  sb.append(themeDisplay.getPortalURL());
  sb.append(themeDisplay.getPathMain());
  sb.append(path);
  sb.append("?p_l_id=");
  sb.append(themeDisplay.getPlid());
  sb.append("&noSuchEntryRedirect=");
  sb.append(HttpUtil.encodeURL(noSuchEntryRedirect));
  sb.append(StringPool.AMPERSAND);
  sb.append(primaryKeyParameterName);
  sb.append(StringPool.EQUAL);
  sb.append(primaryKeyParameterValue);
  return PortalUtil.addPreservedParameters(themeDisplay,sb.toString());
}
