{
  CascadingStyleSheet cascadingStyleSheet=CSSReader.readFromString(css,CCharset.CHARSET_UTF_8_OBJ,ECSSVersion.CSS30);
  List<CSSStyleRule> cssStyleRules=cascadingStyleSheet.getAllStyleRules();
  StringBundler sb=new StringBundler(cssStyleRules.size());
  for (  CSSStyleRule cssStyleRule : cssStyleRules) {
    for (    String property : _replacementStyles.keySet()) {
      replaceStyle(cssStyleRule,property);
    }
    for (    CSSDeclaration cssDeclaration : cssStyleRule.getAllDeclarations()) {
      String property=cssDeclaration.getProperty();
      String strippedProperty=stripProperty(property);
      if (SHORTHAND_STYLES.contains(strippedProperty)) {
        convertShorthand(cssStyleRule,property);
      }
 else       if (SHORTHAND_RADIUS_STYLES.contains(strippedProperty)) {
        convertShorthandRadius(cssStyleRule,property);
      }
 else       if (REVERSE_STYLES.contains(strippedProperty)) {
        reverseStyle(cssStyleRule,property);
      }
 else       if (REVERSE_IMAGE_STYLES.contains(strippedProperty)) {
        reverseImage(cssStyleRule,property);
      }
 else       if (BGPOSITION_STYLES.contains(strippedProperty)) {
        convertBGPosition(cssStyleRule,property);
      }
    }
    sb.append(cssStyleRule.getAsCSSString(_cssWriterSettings,1));
  }
  return sb.toString();
}
