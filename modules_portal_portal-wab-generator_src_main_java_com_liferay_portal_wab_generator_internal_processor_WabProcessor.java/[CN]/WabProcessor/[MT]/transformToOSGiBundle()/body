{
  Analyzer analyzer=new Analyzer();
  analyzer.setBase(_pluginDir);
  analyzer.setJar(_pluginDir);
  processBundleVersion(analyzer);
  Properties pluginPackageProperties=getPluginPackageProperties();
  processPluginPackagePropertiesExportImportPackages(pluginPackageProperties);
  processBundleClasspath(analyzer,pluginPackageProperties);
  processBundleSymbolicName(analyzer);
  processExtraHeaders(analyzer);
  processBundleManifestVersion(analyzer);
  processLiferayPortletXML();
  processWebXML("WEB-INF/web.xml");
  processWebXML("WEB-INF/liferay-web.xml");
  processDeclarativeReferences();
  processPackageNames(analyzer);
  processRequiredDeploymentContexts(analyzer);
  Manifest manifest=null;
  try {
    manifest=analyzer.calcManifest();
  }
 catch (  Exception e) {
    throw new IOException("Unable to calculate the manifest",e);
  }
 finally {
    analyzer.close();
  }
  processManifestVersion(manifest);
  processWebContextPath(manifest);
  writeManifest(manifest);
}
