{
  long userId=portletDataContext.getUserId(layoutPrototype.getUserUuid());
  ServiceContext serviceContext=portletDataContext.createServiceContext(layoutPrototype,LayoutPrototypePortletDataHandler.NAMESPACE);
  LayoutPrototype importedLayoutPrototype=null;
  if (portletDataContext.isDataStrategyMirror()) {
    LayoutPrototype existingLayoutPrototype=LayoutPrototypeLocalServiceUtil.fetchLayoutPrototypeByUuidAndCompanyId(layoutPrototype.getUuid(),portletDataContext.getCompanyId());
    if (existingLayoutPrototype == null) {
      serviceContext.setUuid(layoutPrototype.getUuid());
      importedLayoutPrototype=LayoutPrototypeLocalServiceUtil.addLayoutPrototype(userId,portletDataContext.getCompanyId(),layoutPrototype.getNameMap(),layoutPrototype.getDescription(),layoutPrototype.isActive(),serviceContext);
    }
 else {
      importedLayoutPrototype=LayoutPrototypeLocalServiceUtil.updateLayoutPrototype(existingLayoutPrototype.getLayoutPrototypeId(),layoutPrototype.getNameMap(),layoutPrototype.getDescription(),layoutPrototype.isActive(),serviceContext);
    }
  }
 else {
    importedLayoutPrototype=LayoutPrototypeLocalServiceUtil.addLayoutPrototype(userId,portletDataContext.getCompanyId(),layoutPrototype.getNameMap(),layoutPrototype.getDescription(),layoutPrototype.isActive(),serviceContext);
  }
  portletDataContext.importClassedModel(layoutPrototype,importedLayoutPrototype,LayoutPrototypePortletDataHandler.NAMESPACE);
}
