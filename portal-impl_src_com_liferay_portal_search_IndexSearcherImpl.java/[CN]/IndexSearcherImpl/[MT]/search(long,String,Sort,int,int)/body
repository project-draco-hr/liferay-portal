{
  try {
    SearchRequest searchRequest=new SearchRequest(SearchRequest.COMMAND_SEARCH,companyId,query,sort,start,end);
    String message=MessageBusUtil.sendSynchronizedMessage(DestinationNames.SEARCH,JSONFactoryUtil.serialize(searchRequest));
    JSONObject jsonObj=JSONFactoryUtil.createJSONObject(message);
    return (Hits)JSONFactoryUtil.deserialize(jsonObj.getString("hits"));
  }
 catch (  Exception e) {
    throw new SearchException(e);
  }
}
