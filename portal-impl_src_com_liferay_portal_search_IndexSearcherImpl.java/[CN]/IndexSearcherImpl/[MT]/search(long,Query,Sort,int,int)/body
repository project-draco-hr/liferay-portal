{
  try {
    SearchRequest searchRequest=new SearchRequest();
    searchRequest.setCommand(SearchRequest.COMMAND_SEARCH);
    searchRequest.setCompanyId(companyId);
    searchRequest.setQuery(query);
    searchRequest.setSort(sort);
    searchRequest.setStart(start);
    searchRequest.setEnd(end);
    Message message=new Message(MessageTypes.SCHEDULER_MESSAGE);
    message.setPayload(searchRequest);
    Hits hits=(Hits)MessageBusUtil.sendSynchronizedMessage(DestinationNames.SEARCH_READER,message);
    return hits;
  }
 catch (  Exception e) {
    throw new SearchException(e);
  }
}
