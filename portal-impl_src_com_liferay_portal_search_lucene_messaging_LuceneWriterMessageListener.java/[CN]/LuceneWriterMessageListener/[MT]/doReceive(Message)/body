{
  Object payload=message.getPayload();
  if (!(payload instanceof SearchRequest)) {
    return;
  }
  SearchRequest searchRequest=(SearchRequest)payload;
  String command=searchRequest.getCommand();
  if (!_searchEngine.isRegistered() && !command.equals(SearchRequest.COMMAND_REGISTER)) {
    return;
  }
  long companyId=searchRequest.getCompanyId();
  String id=searchRequest.getId();
  Document doc=searchRequest.getDocument();
  if (command.equals(SearchRequest.COMMAND_ADD)) {
    _searchEngine.getWriter().addDocument(companyId,doc);
  }
 else   if (command.equals(SearchRequest.COMMAND_DELETE)) {
    _searchEngine.getWriter().deleteDocument(companyId,id);
  }
 else   if (command.equals(SearchRequest.COMMAND_DELETE_PORTLET_DOCS)) {
    _searchEngine.getWriter().deletePortletDocuments(companyId,id);
  }
 else   if (command.equals(SearchRequest.COMMAND_REGISTER)) {
    _searchEngine.register(id);
  }
 else   if (command.equals(SearchRequest.COMMAND_UNREGISTER)) {
    _searchEngine.unregister(id);
  }
 else   if (command.equals(SearchRequest.COMMAND_UPDATE)) {
    _searchEngine.getWriter().updateDocument(companyId,id,doc);
  }
}
