{
  PortletURL categoriesURL=res.createRenderURL();
  WindowState windowState=req.getWindowState();
  if (windowState.equals(LiferayWindowState.POP_UP)) {
    categoriesURL.setWindowState(LiferayWindowState.POP_UP);
    categoriesURL.setParameter("struts_action","/blogs/select_category");
  }
 else {
    categoriesURL.setWindowState(WindowState.MAXIMIZED);
    categoriesURL.setParameter("struts_action","/blogs/view");
    categoriesURL.setParameter("tabs1","categories");
  }
  String categoriesLink="<a href=\"" + categoriesURL.toString() + "\">"+ LanguageUtil.get(pageContext,"categories")+ "</a>";
  if (category == null) {
    return categoriesLink;
  }
  String breadcrumbs=StringPool.BLANK;
  if (category != null) {
    for (int i=0; ; i++) {
      PortletURL portletURL=res.createRenderURL();
      if (windowState.equals(LiferayWindowState.POP_UP)) {
        portletURL.setWindowState(LiferayWindowState.POP_UP);
        portletURL.setParameter("struts_action","/blogs/select_category");
      }
 else {
        portletURL.setWindowState(WindowState.MAXIMIZED);
        portletURL.setParameter("struts_action","/blogs/view");
        portletURL.setParameter("tabs1","categories");
        portletURL.setParameter("categoryId",String.valueOf(category.getCategoryId()));
      }
      String categoryLink="<a href=\"" + portletURL.toString() + "\">"+ category.getName()+ "</a>";
      if (i == 0) {
        breadcrumbs=categoryLink;
      }
 else {
        breadcrumbs=categoryLink + " &raquo; " + breadcrumbs;
      }
      if (category.isRoot()) {
        break;
      }
      category=BlogsCategoryLocalServiceUtil.getCategory(category.getParentCategoryId());
    }
  }
  breadcrumbs=categoriesLink + " &raquo; " + breadcrumbs;
  return breadcrumbs;
}
