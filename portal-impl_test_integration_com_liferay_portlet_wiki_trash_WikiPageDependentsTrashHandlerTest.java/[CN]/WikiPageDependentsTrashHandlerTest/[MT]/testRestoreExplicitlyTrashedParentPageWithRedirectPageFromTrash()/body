{
  populateRelatedPages();
  movePageToTrash(_relatedPages.getRedirectPage());
  movePageToTrash(_relatedPages.getPage());
  restoreFromTrash(_relatedPages.getPage());
  WikiPage page=WikiPageLocalServiceUtil.getPage(_relatedPages.getPageResourcePrimKey());
  WikiPage childPage=WikiPageLocalServiceUtil.getPage(_relatedPages.getChildPageResourcePrimKey());
  WikiPage redirectPage=WikiPageLocalServiceUtil.getPage(_relatedPages.getRedirectPageResourcePrimKey());
  Assert.assertFalse(page.isInTrash());
  Assert.assertFalse(childPage.isInTrash());
  Assert.assertTrue(redirectPage.isInTrashExplicitly());
  Assert.assertEquals(page.getTitle(),childPage.getParentTitle());
  Assert.assertEquals(page.getTitle(),redirectPage.getRedirectTitle());
  restoreFromTrash(_relatedPages.getRedirectPage());
  redirectPage=WikiPageLocalServiceUtil.getPage(_relatedPages.getRedirectPageResourcePrimKey());
  Assert.assertFalse(redirectPage.isInTrash());
  Assert.assertEquals(page.getTitle(),redirectPage.getRedirectTitle());
}
