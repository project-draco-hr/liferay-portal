{
  int initialBaseModelsCount=WikiPageTrashHandlerTestUtil.getNotInTrashBaseModelsCount(_node);
  int initialTrashEntriesCount=TrashEntryLocalServiceUtil.getEntriesCount(_group.getGroupId());
  WikiPage[] pages=WikiTestUtil.addTrashedParentPageWithChildPageAndGrandchildPage(_group.getGroupId(),_node.getNodeId(),true,true);
  WikiPage parentPage=pages[0];
  WikiPage childPage=pages[1];
  WikiPage grandchildPage=pages[2];
  restoreTrashEntry(childPage);
  parentPage=(WikiPage)WikiPageTrashHandlerTestUtil.getBaseModel(parentPage.getPrimaryKey());
  childPage=(WikiPage)WikiPageTrashHandlerTestUtil.getBaseModel(childPage.getPrimaryKey());
  grandchildPage=(WikiPage)WikiPageTrashHandlerTestUtil.getBaseModel(grandchildPage.getPrimaryKey());
  Assert.assertTrue(parentPage.isInTrashExplicitly());
  Assert.assertFalse(childPage.isInTrash());
  Assert.assertEquals(StringPool.BLANK,childPage.getParentTitle());
  Assert.assertFalse(grandchildPage.isInTrash());
  Assert.assertEquals(childPage.getTitle(),grandchildPage.getParentTitle());
  Assert.assertEquals(initialBaseModelsCount + 2,WikiPageTrashHandlerTestUtil.getNotInTrashBaseModelsCount(_node));
  Assert.assertEquals(initialTrashEntriesCount + 1,TrashEntryLocalServiceUtil.getEntriesCount(_group.getGroupId()));
}
