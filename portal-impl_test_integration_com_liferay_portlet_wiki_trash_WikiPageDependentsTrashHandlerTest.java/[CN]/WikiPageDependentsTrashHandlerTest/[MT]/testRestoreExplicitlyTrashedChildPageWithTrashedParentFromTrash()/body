{
  int initialBaseModelsCount=WikiPageTrashHandlerTestUtil.getNotInTrashBaseModelsCount(_node);
  int initialTrashEntriesCount=TrashEntryLocalServiceUtil.getEntriesCount(_group.getGroupId());
  populateRelatedPages();
  movePageToTrash(_relatedPages.getChildPage());
  movePageToTrash(_relatedPages.getPage());
  restoreFromTrash(_relatedPages.getChildPage());
  WikiPage page=WikiPageLocalServiceUtil.getPage(_relatedPages.getPageResourcePrimKey());
  WikiPage childPage=WikiPageLocalServiceUtil.getPage(_relatedPages.getChildPageResourcePrimKey());
  WikiPage grandchildPage=WikiPageLocalServiceUtil.getPage(_relatedPages.getGrandchildPageResourcePrimKey());
  Assert.assertTrue(page.isInTrashExplicitly());
  Assert.assertFalse(childPage.isInTrash());
  Assert.assertFalse(grandchildPage.isInTrash());
  Assert.assertEquals(StringPool.BLANK,childPage.getParentTitle());
  Assert.assertEquals(childPage.getTitle(),grandchildPage.getParentTitle());
  Assert.assertEquals(initialBaseModelsCount + 2,WikiPageTrashHandlerTestUtil.getNotInTrashBaseModelsCount(_node));
  Assert.assertEquals(initialTrashEntriesCount + 1,TrashEntryLocalServiceUtil.getEntriesCount(_group.getGroupId()));
}
