{
  name=PortletImpl.getRootPortletId(name);
  List actions=_getActions(_portletResourceActions,name);
  if (actions.size() == 0) {
synchronized (this) {
      actions.clear();
      if (name.equals(PortletKeys.PORTAL)) {
        actions.add(ActionKeys.ADD_COMMUNITY);
        actions.add(ActionKeys.ADD_LICENSE);
        actions.add(ActionKeys.ADD_ORGANIZATION);
        actions.add(ActionKeys.ADD_PASSWORD_POLICY);
        actions.add(ActionKeys.ADD_ROLE);
        actions.add(ActionKeys.ADD_USER_GROUP);
      }
 else {
        Portlet portlet=PortletLocalServiceUtil.getPortletById(companyId,name);
        Map portletModes=portlet.getPortletModes();
        Set mimeTypeModes=(Set)portletModes.get("text/html");
        if (mimeTypeModes != null) {
          Iterator itr=mimeTypeModes.iterator();
          while (itr.hasNext()) {
            String actionId=(String)itr.next();
            if (actionId.equalsIgnoreCase("edit")) {
              actions.add(ActionKeys.PREFERENCES);
            }
 else             if (actionId.equalsIgnoreCase("edit_guest")) {
              actions.add(ActionKeys.GUEST_PREFERENCES);
            }
 else {
              actions.add(actionId.toUpperCase());
            }
          }
        }
        _checkPortletActions(actions);
        List communityDefaultActions=_getActions(_portletResourceCommunityDefaultActions,name);
        communityDefaultActions.clear();
        _checkPortletCommunityDefaultActions(communityDefaultActions);
      }
    }
  }
  return actions;
}
