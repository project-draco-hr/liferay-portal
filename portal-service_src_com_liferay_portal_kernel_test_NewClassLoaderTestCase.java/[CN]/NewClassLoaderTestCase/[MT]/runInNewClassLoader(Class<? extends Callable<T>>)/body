{
  assertSame(clazz + " is not enclosed by " + getClass(),getClass(),clazz.getEnclosingClass());
  Constructor<? extends Callable<T>> constructor=null;
  try {
    constructor=clazz.getDeclaredConstructor();
  }
 catch (  NoSuchMethodException nsme1) {
    try {
      constructor=clazz.getDeclaredConstructor(getClass());
    }
 catch (    NoSuchMethodException nsme2) {
      throw new Exception(clazz.getName() + " does not have a default constructor");
    }
  }
  return runInNewClassLoader(constructor);
}
