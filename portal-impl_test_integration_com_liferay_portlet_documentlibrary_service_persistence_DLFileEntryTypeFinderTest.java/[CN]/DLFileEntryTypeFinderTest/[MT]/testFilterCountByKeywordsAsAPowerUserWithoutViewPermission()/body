{
  User user=UserTestUtil.addGroupUser(_group,RoleConstants.POWER_USER);
  PermissionChecker permissionChecker=PermissionCheckerFactoryUtil.create(user);
  PermissionChecker originalPermissionChecker=PermissionThreadLocal.getPermissionChecker();
  PermissionThreadLocal.setPermissionChecker(permissionChecker);
  try {
    int initialCount=DLFileEntryTypeFinderUtil.filterCountByKeywords(_group.getCompanyId(),new long[]{_group.getGroupId()},_DL_FILE_ENTRY_TYPE_NAME,true);
    ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(_group.getGroupId(),_user.getUserId());
    serviceContext.setAddGroupPermissions(false);
    serviceContext.setAddGuestPermissions(false);
    addFileEntryType(serviceContext);
    Assert.assertEquals(initialCount + 0,DLFileEntryTypeFinderUtil.filterCountByKeywords(_group.getCompanyId(),new long[]{_group.getGroupId()},_DL_FILE_ENTRY_TYPE_NAME,true));
  }
  finally {
    PermissionThreadLocal.setPermissionChecker(originalPermissionChecker);
  }
}
