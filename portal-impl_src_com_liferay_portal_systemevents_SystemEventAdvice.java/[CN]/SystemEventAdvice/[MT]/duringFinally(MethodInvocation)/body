{
  SystemEvent systemEvent=findAnnotation(methodInvocation);
  if (systemEvent == _nullSystemEvent) {
    return;
  }
  if (!isValid(methodInvocation,PHASE_DURING_FINALLY)) {
    return;
  }
  if (systemEvent.childAction() != SystemEventConstants.ACTION_NONE) {
    SystemEventHierarchyEntry systemEventHierarchyEntry=SystemEventHierarchyEntryThreadLocal.peek();
    if (systemEventHierarchyEntry != null) {
      Object[] arguments=methodInvocation.getArguments();
      ClassedModel classedModel=(ClassedModel)arguments[0];
      long classPK=getClassPK(classedModel);
      if (classPK == 0) {
        return;
      }
      if (systemEventHierarchyEntry.hasTypedModel(getClassName(classedModel),classPK)) {
        SystemEventHierarchyEntryThreadLocal.pop();
      }
    }
  }
}
