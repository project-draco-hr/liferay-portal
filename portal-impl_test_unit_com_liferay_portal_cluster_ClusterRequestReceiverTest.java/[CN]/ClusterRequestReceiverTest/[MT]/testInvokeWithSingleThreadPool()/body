{
  ClusterExecutorImpl clusterExecutorImpl1=getClusterExecutorImpl();
  MockClusterEventListener mockClusterEventListener=new MockClusterEventListener();
  clusterExecutorImpl1.addClusterEventListener(mockClusterEventListener);
  ClusterExecutorImpl clusterExecutorImpl2=getClusterExecutorImpl();
  assertClusterEvent(mockClusterEventListener.waitJoinMessage(),ClusterEventType.JOIN,clusterExecutorImpl2.getLocalClusterNode());
  String value="testValue";
  try {
    ClusterNode clusterNode=clusterExecutorImpl2.getLocalClusterNode();
    String clusterNodeId=clusterNode.getClusterNodeId();
    ClusterRequest clusterRequest1=ClusterRequest.createUnicastRequest(new MethodHandler(_testMethod4MethodKey,value),clusterNodeId);
    FutureClusterResponses futureClusterResponses1=clusterExecutorImpl1.execute(clusterRequest1);
    assertFutureClusterResponsesWithoutException(futureClusterResponses1.get(),clusterRequest1.getUuid(),value,clusterNodeId);
    ClusterRequest clusterRequest2=ClusterRequest.createUnicastRequest(new MethodHandler(_testMethod4MethodKey,StringPool.BLANK),clusterNodeId);
    FutureClusterResponses futureClusterResponses2=clusterExecutorImpl1.execute(clusterRequest2);
    assertFutureClusterResponsesWithoutException(futureClusterResponses2.get(),clusterRequest2.getUuid(),null,clusterNodeId);
  }
  finally {
    clusterExecutorImpl1.destroy();
    clusterExecutorImpl2.destroy();
  }
}
