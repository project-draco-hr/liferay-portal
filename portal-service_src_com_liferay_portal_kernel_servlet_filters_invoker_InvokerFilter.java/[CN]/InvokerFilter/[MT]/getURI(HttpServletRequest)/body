{
  String uri=null;
  if (_dispatcher == Dispatcher.ERROR) {
    uri=(String)request.getAttribute(JavaConstants.JAVAX_SERVLET_ERROR_REQUEST_URI);
  }
 else   if (_dispatcher == Dispatcher.INCLUDE) {
    uri=(String)request.getAttribute(JavaConstants.JAVAX_SERVLET_INCLUDE_REQUEST_URI);
  }
 else {
    uri=request.getRequestURI();
  }
  if (Validator.isNotNull(_contextPath) && !_contextPath.equals(StringPool.SLASH) && uri.startsWith(_contextPath)) {
    uri=uri.substring(_contextPath.length());
  }
  return HttpUtil.normalizePath(uri);
}
