{
  long companyId=PortalUtil.getCompanyId(req);
  long liveGroupId=ParamUtil.getLong(req,"liveGroupId");
  long stagingGroupId=ParamUtil.getLong(req,"stagingGroupId");
  boolean privateLayout=ParamUtil.getBoolean(req,"privateLayout");
  long layoutId=ParamUtil.getLong(req,"layoutId");
  String themeId=ParamUtil.getString(req,"themeId");
  String colorSchemeId=ParamUtil.getString(req,"colorSchemeId");
  String css=ParamUtil.getString(req,"css");
  boolean wapTheme=ParamUtil.getBoolean(req,"wapTheme");
  if (Validator.isNotNull(themeId) && Validator.isNull(colorSchemeId)) {
    ColorScheme colorScheme=ThemeLocalUtil.getColorScheme(companyId,themeId,colorSchemeId,wapTheme);
    colorSchemeId=colorScheme.getColorSchemeId();
  }
  if (layoutId <= 0) {
    LayoutSetServiceUtil.updateLookAndFeel(liveGroupId,privateLayout,themeId,colorSchemeId,css,wapTheme);
    if (stagingGroupId > 0) {
      LayoutSetServiceUtil.updateLookAndFeel(stagingGroupId,privateLayout,themeId,colorSchemeId,css,wapTheme);
    }
  }
 else {
    LayoutServiceUtil.updateLookAndFeel(liveGroupId,privateLayout,layoutId,themeId,colorSchemeId,css,wapTheme);
  }
}
