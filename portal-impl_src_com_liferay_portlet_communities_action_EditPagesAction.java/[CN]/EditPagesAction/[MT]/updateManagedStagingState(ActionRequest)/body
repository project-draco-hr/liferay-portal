{
  long liveGroupId=ParamUtil.getLong(req,"liveGroupId");
  boolean activateManagedStaging=ParamUtil.getBoolean(req,"activateManagedStaging");
  ThemeDisplay themeDisplay=(ThemeDisplay)req.getAttribute(WebKeys.THEME_DISPLAY);
  PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
  if (!GroupPermissionUtil.contains(permissionChecker,liveGroupId,ActionKeys.MANAGE_STAGING)) {
    throw new PrincipalException();
  }
  Group liveGroup=GroupLocalServiceUtil.getGroup(liveGroupId);
  Properties props=liveGroup.getTypeSettingsProperties();
  props.setProperty(GroupImpl.MANAGED_STAGING,String.valueOf(activateManagedStaging));
  GroupServiceUtil.updateGroup(liveGroup.getGroupId(),liveGroup.getTypeSettings());
}
