{
  long liveGroupId=ParamUtil.getLong(req,"liveGroupId");
  ThemeDisplay themeDisplay=(ThemeDisplay)req.getAttribute(WebKeys.THEME_DISPLAY);
  int numberOfApprovalStages=ParamUtil.getInteger(req,"numberOfApprovalStages");
  PortletPreferences prefs=TasksUtil.getPreferences(themeDisplay.getCompanyId(),liveGroupId);
  List<String> roleNames=new ArrayList<String>();
  for (int i=0; i < numberOfApprovalStages; i++) {
    String roleName=ParamUtil.getString(req,"approvalRoleName_" + i);
    roleNames.add(roleName);
  }
  String[] roleNamesArr=roleNames.toArray(new String[roleNames.size()]);
  prefs.setValue("number-of-approval-stages",String.valueOf(numberOfApprovalStages));
  prefs.setValues("approval-role-names",roleNamesArr);
  prefs.store();
}
