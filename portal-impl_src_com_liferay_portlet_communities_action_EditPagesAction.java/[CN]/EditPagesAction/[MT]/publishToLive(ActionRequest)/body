{
  User user=PortalUtil.getUser(req);
  String tabs2=ParamUtil.getString(req,"tabs2");
  long stagingGroupId=ParamUtil.getLong(req,"stagingGroupId");
  Group stagingGroup=GroupLocalServiceUtil.getGroup(stagingGroupId);
  boolean privateLayout=true;
  if (tabs2.equals("public")) {
    privateLayout=false;
  }
  if (_log.isDebugEnabled()) {
    _log.debug("Copying live to staging for group " + stagingGroup.getLiveGroupId());
  }
  String scope=ParamUtil.getString(req,"scope");
  if (scope.equals("allPages")) {
    copyLayouts(user.getUserId(),stagingGroup.getGroupId(),privateLayout,stagingGroup.getLiveGroupId(),privateLayout);
  }
 else   if (scope.equals("currentPage")) {
    long selPlid=ParamUtil.getLong(req,"selPlid",LayoutImpl.DEFAULT_PARENT_LAYOUT_ID);
    boolean includeChildren=ParamUtil.getBoolean(req,"includeChildren");
    publishLayout(user.getUserId(),selPlid,stagingGroup.getLiveGroupId(),includeChildren);
  }
}
