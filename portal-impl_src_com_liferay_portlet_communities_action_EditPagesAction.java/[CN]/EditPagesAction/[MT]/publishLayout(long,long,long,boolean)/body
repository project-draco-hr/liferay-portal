{
  Map parameterMap=_getPublishParameters();
  parameterMap.put(PortletDataHandlerKeys.IMPORT_DELETE_MISSING_LAYOUTS,Boolean.FALSE.toString());
  Layout layout=LayoutLocalServiceUtil.getLayout(plid);
  List layouts=new ArrayList();
  layouts.add(layout);
  layouts.addAll(_getMissingParentIds(layout,targetGroupId));
  if (includeChildren) {
    layouts.addAll(layout.getAllChildren());
  }
  Iterator iterator=layouts.iterator();
  long[] layoutIds=new long[layouts.size()];
  for (int i=0; iterator.hasNext(); i++) {
    Layout itLayout=(Layout)iterator.next();
    layoutIds[i]=itLayout.getLayoutId();
  }
  byte[] data=LayoutLocalServiceUtil.exportLayouts(layout.getGroupId(),layout.isPrivateLayout(),layoutIds,parameterMap);
  ByteArrayInputStream bais=new ByteArrayInputStream(data);
  LayoutLocalServiceUtil.importLayouts(creatorUserId,targetGroupId,layout.isPrivateLayout(),parameterMap,bais);
}
