{
  Map parameterMap=getPublishParameters();
  parameterMap.put(PortletDataHandlerKeys.IMPORT_DELETE_MISSING_LAYOUTS,Boolean.FALSE.toString());
  Layout layout=LayoutLocalServiceUtil.getLayout(plid);
  List layouts=new ArrayList();
  layouts.add(layout);
  layouts.addAll(getMissingParents(layout,targetGroupId));
  if (includeChildren) {
    layouts.addAll(layout.getAllChildren());
  }
  Iterator itr=layouts.iterator();
  long[] layoutIds=new long[layouts.size()];
  for (int i=0; itr.hasNext(); i++) {
    Layout curLayout=(Layout)itr.next();
    layoutIds[i]=curLayout.getLayoutId();
  }
  byte[] data=LayoutLocalServiceUtil.exportLayouts(layout.getGroupId(),layout.isPrivateLayout(),layoutIds,parameterMap);
  ByteArrayInputStream bais=new ByteArrayInputStream(data);
  LayoutLocalServiceUtil.importLayouts(creatorUserId,targetGroupId,layout.isPrivateLayout(),parameterMap,bais);
}
