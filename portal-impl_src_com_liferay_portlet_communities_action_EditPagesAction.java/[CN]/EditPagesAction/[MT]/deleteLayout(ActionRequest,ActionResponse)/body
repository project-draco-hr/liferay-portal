{
  ThemeDisplay themeDisplay=(ThemeDisplay)req.getAttribute(WebKeys.THEME_DISPLAY);
  PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
  long groupId=ParamUtil.getLong(req,"groupId");
  boolean privateLayout=ParamUtil.getBoolean(req,"privateLayout");
  long layoutId=ParamUtil.getLong(req,"layoutId");
  if (LayoutPermissionUtil.contains(permissionChecker,groupId,privateLayout,layoutId,ActionKeys.DELETE)) {
    Layout layout=LayoutLocalServiceUtil.getLayout(groupId,privateLayout,layoutId);
    String[] eventClasses=StringUtil.split(PropsUtil.getComponentProperties().getString(PropsUtil.LAYOUT_CONFIGURATION_ACTION_DELETE,Filter.by(layout.getType())));
    HttpServletRequest httpReq=(HttpServletRequest)((ActionRequestImpl)req).getHttpServletRequest();
    HttpServletResponse httpRes=(HttpServletResponse)((ActionResponseImpl)res).getHttpServletResponse();
    EventsProcessor.process(eventClasses,httpReq,httpRes);
  }
  LayoutServiceUtil.deleteLayout(groupId,privateLayout,layoutId);
}
