{
  OutputStreamWriter outputStreamWriter=new OutputStreamWriter(new DummyOutputStream(),"US-ASCII");
  CharsetEncoder charsetEncoder=ReflectionTestUtil.getFieldValue(outputStreamWriter,"_charsetEncoder");
  charsetEncoder.onUnmappableCharacter(CodingErrorAction.REPORT);
  try {
    outputStreamWriter.write("??????");
    Assert.fail();
  }
 catch (  IOException ioe) {
    Assert.assertEquals("Unexcepted coder result UNMAPPABLE[1]",ioe.getMessage());
  }
}
