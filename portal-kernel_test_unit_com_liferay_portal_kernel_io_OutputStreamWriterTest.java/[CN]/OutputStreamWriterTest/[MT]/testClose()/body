{
  MarkerOutputStream markerOutputStream=new MarkerOutputStream();
  try (OutputStreamWriter outputStreamWriter=new OutputStreamWriter(markerOutputStream)){
    Assert.assertFalse(markerOutputStream._closed);
    outputStreamWriter.close();
    Assert.assertTrue(markerOutputStream._closed);
    markerOutputStream._closed=false;
    try {
      outputStreamWriter.write(0);
      Assert.fail();
    }
 catch (    IOException ioe) {
      Assert.assertEquals("Stream closed",ioe.getMessage());
    }
  }
   Assert.assertFalse(markerOutputStream._closed);
  final IOException ioException=new IOException();
  OutputStreamWriter outputStreamWriter=new OutputStreamWriter(new UnsyncByteArrayOutputStream(){
    @Override public void close() throws IOException {
      throw ioException;
    }
  }
);
  try {
    outputStreamWriter.close();
    Assert.fail();
  }
 catch (  IOException ioe) {
    Assert.assertSame(ioe,ioException);
  }
  outputStreamWriter.close();
}
