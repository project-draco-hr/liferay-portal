{
  String billingFirstName=ParamUtil.getString(req,"order_b_first_name");
  String billingLastName=ParamUtil.getString(req,"order_b_last_name");
  String billingEmailAddress=ParamUtil.getString(req,"order_b_email_address");
  String billingCompany=ParamUtil.getString(req,"order_b_company");
  String billingStreet=ParamUtil.getString(req,"order_b_street");
  String billingCity=ParamUtil.getString(req,"order_b_city");
  String billingStateSel=ParamUtil.getString(req,"order_b_state_sel");
  String billingState=billingStateSel;
  if (Validator.isNull(billingStateSel)) {
    billingState=ParamUtil.getString(req,"order_b_state");
  }
  String billingZip=ParamUtil.getString(req,"order_b_zip");
  String billingCountry=ParamUtil.getString(req,"order_b_country");
  String billingPhone=ParamUtil.getString(req,"order_b_phone");
  boolean shipToBilling=ParamUtil.get(req,"order_s_t_b",false);
  String shippingFirstName=ParamUtil.getString(req,"order_s_first_name");
  String shippingLastName=ParamUtil.getString(req,"order_s_last_name");
  String shippingEmailAddress=ParamUtil.getString(req,"order_s_email_address");
  String shippingCompany=ParamUtil.getString(req,"order_s_company");
  String shippingStreet=ParamUtil.getString(req,"order_s_street");
  String shippingCity=ParamUtil.getString(req,"order_s_city");
  String shippingStateSel=ParamUtil.getString(req,"order_s_state_sel");
  String shippingState=shippingStateSel;
  if (Validator.isNull(shippingStateSel)) {
    shippingState=ParamUtil.getString(req,"order_s_state");
  }
  String shippingZip=ParamUtil.getString(req,"order_s_zip");
  String shippingCountry=ParamUtil.getString(req,"order_s_country");
  String shippingPhone=ParamUtil.getString(req,"order_s_phone");
  String ccName=ParamUtil.getString(req,"order_cc_name");
  String ccType=ParamUtil.getString(req,"order_cc_type");
  String ccNumber=ParamUtil.getString(req,"order_cc_number");
  int ccExpMonth=ParamUtil.getInteger(req,"order_cc_exp_month");
  int ccExpYear=ParamUtil.getInteger(req,"order_cc_exp_year");
  String ccVerNumber=ParamUtil.getString(req,"order_cc_ver_number");
  String comments=ParamUtil.getString(req,"order_comments");
  ShoppingOrder order=ShoppingOrderServiceUtil.updateLatestOrder(billingFirstName,billingLastName,billingEmailAddress,billingCompany,billingStreet,billingCity,billingState,billingZip,billingCountry,billingPhone,shipToBilling,shippingFirstName,shippingLastName,shippingEmailAddress,shippingCompany,shippingStreet,shippingCity,shippingState,shippingZip,shippingCountry,shippingPhone,ccName,ccType,ccNumber,ccExpMonth,ccExpYear,ccVerNumber,comments);
  req.setAttribute(WebKeys.SHOPPING_ORDER,order);
}
