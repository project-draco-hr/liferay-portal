{
  try {
    _spi.destroy();
    _cancelHandlerFuture.get(_spiConfiguration.getShutdownTimeout(),TimeUnit.MILLISECONDS);
  }
 catch (  Exception e) {
    boolean forceDestroy=true;
    if (e instanceof ExecutionException) {
      Throwable throwable=e.getCause();
      if (throwable instanceof TerminationProcessException) {
        TerminationProcessException terminationProcessException=(TerminationProcessException)throwable;
        if (terminationProcessException.getExitCode() == SIGINT) {
          forceDestroy=false;
        }
      }
    }
    if (forceDestroy) {
      _cancelHandlerFuture.cancel(true);
      if (_log.isWarnEnabled()) {
        _log.warn("Forcibly destroyed SPI " + _spiConfiguration,e);
      }
    }
  }
 finally {
    MPIHelperUtil.unregisterSPI(this);
  }
  _spiAgent.destroy();
}
