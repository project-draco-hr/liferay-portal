{
  Map<String,String[]> parameters=portletRequest.getParameterMap();
  List<ItemSelectorViewRenderer<?>> itemSelectorViewRenderers=new ArrayList<>();
  List<Class<? extends ItemSelectorCriterion>> itemSelectorCriterionClasses=getItemSelectorCriterionClasses(parameters);
  for (int i=0; i < itemSelectorCriterionClasses.size(); i++) {
    Class<? extends ItemSelectorCriterion> itemSelectorCriterionClass=itemSelectorCriterionClasses.get(i);
    String paramPrefix=i + "_";
    addItemSelectorViewRenderers((List)itemSelectorViewRenderers,parameters,paramPrefix,itemSelectorCriterionClass);
  }
  return new ItemSelectorRenderingImpl(parameters.get(PARAMETER_ITEM_SELECTED_CALLBACK)[0],itemSelectorViewRenderers);
}
