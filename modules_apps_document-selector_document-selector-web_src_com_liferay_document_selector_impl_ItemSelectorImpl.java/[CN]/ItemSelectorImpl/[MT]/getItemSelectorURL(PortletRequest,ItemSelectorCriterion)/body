{
  Map<String,String[]> params=getItemSelectorParameters(itemSelectorCriteria);
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  PortletURL portletURL=PortletURLFactoryUtil.create(portletRequest,DocumentSelectorPortletKeys.DOCUMENT_SELECTOR,themeDisplay.getPlid(),PortletRequest.ACTION_PHASE);
  _setPopup(portletURL);
  portletURL.setParameter("mvcPath",DocumentSelectorPortlet.MVC_PATH_SHOW_ITEM_SELECTOR);
  portletURL.setParameter(ActionRequest.ACTION_NAME,DocumentSelectorPortlet.ACTION_SHOW_ITEM_SELECTOR);
  for (  Map.Entry<String,String[]> entry : params.entrySet()) {
    portletURL.setParameter(entry.getKey(),entry.getValue());
  }
  return portletURL;
}
