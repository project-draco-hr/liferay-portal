{
  if (response instanceof ByteBufferServletResponse) {
    ByteBufferServletResponse byteBufferResponse=(ByteBufferServletResponse)response;
    ByteBuffer byteBuffer=ByteBuffer.wrap(FileUtil.getBytes(file));
    byteBufferResponse.setByteBuffer(byteBuffer);
  }
 else   if (response instanceof StringServletResponse) {
    StringServletResponse stringResponse=(StringServletResponse)response;
    String s=FileUtil.read(file);
    stringResponse.setString(s);
  }
 else {
    FileInputStream fileInputStream=new FileInputStream(file);
    FileChannel fileChannel=fileInputStream.getChannel();
    try {
      int contentLength=(int)fileChannel.size();
      response.setContentLength(contentLength);
      response.flushBuffer();
      fileChannel.transferTo(0,contentLength,Channels.newChannel(response.getOutputStream()));
    }
  finally {
      fileChannel.close();
    }
  }
}
