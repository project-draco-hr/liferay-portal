{
  try {
    StreamSource scriptSource=new StreamSource(templateResource.getReader());
    Transformer transformer=transformerFactory.newTransformer(scriptSource);
    for (    Map.Entry<String,Object> entry : _context.entrySet()) {
      transformer.setParameter(entry.getKey(),entry.getValue());
    }
    return transformer;
  }
 catch (  Exception e) {
    throw new TemplateException("Unable to get Transformer for template " + templateResource.getTemplateId(),e);
  }
}
