{
  User user=UserLocalServiceUtil.getUser(userId);
  Date now=new Date();
  long fileVersionId=CounterLocalServiceUtil.increment();
  DLFileVersion fileVersion=new DLFileVersionImpl();
  fileVersion.setNew(true);
  fileVersion.setPrimaryKey(fileVersionId);
  fileVersion.setGroupId(groupId);
  fileVersion.setCompanyId(companyId);
  fileVersion.setUserId(user.getUserId());
  fileVersion.setUserName(user.getFullName());
  fileVersion.setCreateDate(now);
  fileVersion.setFolderId(folderId);
  fileVersion.setName(fileName);
  fileVersion.setVersion(version);
  fileVersion.setSize(fileSize);
  fileVersion.setStatus(StatusConstants.APPROVED);
  fileVersion.setStatusByUserId(user.getUserId());
  fileVersion.setStatusByUserName(user.getFullName());
  fileVersion.setStatusDate(now);
  DLFileVersionLocalServiceUtil.addDLFileVersion(fileVersion);
}
