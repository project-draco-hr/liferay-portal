{
  String feedTitle=ParamUtil.getString(portletRequest,"feedTitle");
  String format=ParamUtil.getString(portletRequest,"type",RSSUtil.FORMAT_DEFAULT);
  double version=ParamUtil.getDouble(portletRequest,"version",RSSUtil.VERSION_DEFAULT);
  String displayStyle=ParamUtil.getString(portletRequest,"displayStyle",RSSUtil.DISPLAY_STYLE_DEFAULT);
  int max=ParamUtil.getInteger(portletRequest,"max",SearchContainer.DEFAULT_DELTA);
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  List<SocialActivity> activities=getActivities(themeDisplay,max);
  ServiceContext serviceContext=ServiceContextFactory.getInstance(portletRequest);
  String rss=exportToRSS(themeDisplay,portletResponse,feedTitle,null,format,version,displayStyle,activities,serviceContext);
  return rss.getBytes(StringPool.UTF8);
}
