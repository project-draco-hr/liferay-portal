{
  BufferNode bufferNode=new BufferNode(buffer);
  if (head == null) {
    head=bufferNode;
    count=1;
    return;
  }
  BufferNode previous=null;
  BufferNode current=head;
  while ((current != null) && (current.buffer.length > bufferNode.buffer.length)) {
    previous=current;
    current=current.next;
  }
  if (previous == null) {
    bufferNode.next=head;
    head=bufferNode;
  }
 else {
    bufferNode.next=current;
    previous.next=bufferNode;
  }
  if (++count > THREADLOCAL_BUFFER_COUNT_LIMIT) {
    if (previous == null) {
      previous=head;
    }
    current=previous.next;
    while (current.next != null) {
      previous=current;
      current=current.next;
    }
    previous.next=null;
    current.buffer=null;
    current.next=null;
  }
}
