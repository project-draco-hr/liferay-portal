{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  String editCalendarURL=getRedirect(actionRequest,actionResponse);
  if (Validator.isNull(editCalendarURL)) {
    editCalendarURL=PortalUtil.getLayoutFullURL(themeDisplay);
  }
  String namespace=actionResponse.getNamespace();
  editCalendarURL=HttpUtil.setParameter(editCalendarURL,"p_p_id",CalendarPortletKeys.CALENDAR);
  editCalendarURL=HttpUtil.setParameter(editCalendarURL,namespace + "mvcPath",templatePath + "edit_calendar.jsp");
  editCalendarURL=HttpUtil.setParameter(editCalendarURL,namespace + "redirect",getRedirect(actionRequest,actionResponse));
  editCalendarURL=HttpUtil.setParameter(editCalendarURL,namespace + "backURL",ParamUtil.getString(actionRequest,"backURL"));
  editCalendarURL=HttpUtil.setParameter(editCalendarURL,namespace + "calendarId",calendar.getCalendarId());
  return editCalendarURL;
}
