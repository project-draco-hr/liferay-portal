{
  long calendarResourceId=ParamUtil.getLong(actionRequest,"calendarResourceId");
  long defaultCalendarId=ParamUtil.getLong(actionRequest,"defaultCalendarId");
  String code=ParamUtil.getString(actionRequest,"code");
  Map<Locale,String> nameMap=LocalizationUtil.getLocalizationMap(actionRequest,"name");
  Map<Locale,String> descriptionMap=LocalizationUtil.getLocalizationMap(actionRequest,"description");
  boolean active=ParamUtil.getBoolean(actionRequest,"active");
  ServiceContext serviceContext=ServiceContextFactory.getInstance(CalendarResource.class.getName(),actionRequest);
  if (calendarResourceId <= 0) {
    _calendarResourceService.addCalendarResource(serviceContext.getScopeGroupId(),PortalUtil.getClassNameId(CalendarResource.class),0,PortalUUIDUtil.generate(),code,nameMap,descriptionMap,active,serviceContext);
  }
 else {
    _calendarResourceService.updateCalendarResource(calendarResourceId,nameMap,descriptionMap,active,serviceContext);
    if (defaultCalendarId > 0) {
      _calendarLocalService.updateCalendar(defaultCalendarId,true);
    }
  }
}
