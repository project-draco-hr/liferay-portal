{
  Date now=new Date();
  long[] userIds={userId};
  MembershipInvitation membershipInvitation=membershipInvitationPersistence.findByKey(membershipInvitationKey);
  validate(membershipInvitation,userId);
  membershipInvitation.setAcceptedDate(now);
  userLocalService.addGroupUsers(membershipInvitation.getGroupId(),userIds);
  return membershipInvitationPersistence.update(membershipInvitation,false);
}
