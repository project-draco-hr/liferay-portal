{
  for (  String excludeTableName : getExcludedTableNames()) {
    if (excludeTableName.equals(tableName)) {
      return;
    }
  }
  ResultSet tableResultSet=databaseMetaData.getTables(null,null,tableName,null);
  try {
    if (!tableResultSet.next()) {
      _log.error("Table " + tableName + " does not exist");
      return;
    }
    ResultSet columnResultSet=databaseMetaData.getColumns(null,null,tableName,normalizeName("mvccVersion",databaseMetaData));
    try {
      if (columnResultSet.next()) {
        return;
      }
      runSQL("alter table " + tableName + " add mvccVersion LONG default 0");
      if (_log.isDebugEnabled()) {
        _log.debug("Added column mvccVersion to table " + tableName);
      }
    }
  finally {
      DataAccess.cleanUp(columnResultSet);
    }
  }
  finally {
    DataAccess.cleanUp(tableResultSet);
  }
}
