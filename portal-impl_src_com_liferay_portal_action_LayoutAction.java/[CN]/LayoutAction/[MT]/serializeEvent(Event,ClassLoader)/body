{
  Serializable value=event.getValue();
  if (value == null) {
    return event;
  }
  ClassLoader eventClassLoader=value.getClass().getClassLoader();
  if (portletClassLoader == eventClassLoader) {
    return event;
  }
  EventImpl eventImpl=(EventImpl)event;
  String base64Value=eventImpl.getBase64Value();
  value=(Serializable)Base64.stringToObject(base64Value,portletClassLoader);
  return new EventImpl(event.getName(),event.getQName(),value);
}
