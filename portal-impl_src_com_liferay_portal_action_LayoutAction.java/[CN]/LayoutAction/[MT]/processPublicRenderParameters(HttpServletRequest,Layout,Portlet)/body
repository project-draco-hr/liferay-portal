{
  Map<String,String[]> publicRenderParameters=PublicRenderParametersPool.get(request,layout.getPlid());
  Enumeration<String> enu=request.getParameterNames();
  while (enu.hasMoreElements()) {
    String name=enu.nextElement();
    String[] values=request.getParameterValues(name);
    QName qName=PortletQNameUtil.getQName(name);
    if (qName != null) {
      PublicRenderParameter publicRenderParameter=portlet.getPublicRenderParameter(qName.getNamespaceURI(),qName.getLocalPart());
      if (publicRenderParameter != null) {
        if (name.startsWith(PortletQName.PUBLIC_RENDER_PARAMETER_NAMESPACE)) {
          publicRenderParameters.put(PortletQNameUtil.getKey(qName),values);
        }
 else {
          publicRenderParameters.remove(PortletQNameUtil.getKey(qName));
        }
      }
    }
  }
}
