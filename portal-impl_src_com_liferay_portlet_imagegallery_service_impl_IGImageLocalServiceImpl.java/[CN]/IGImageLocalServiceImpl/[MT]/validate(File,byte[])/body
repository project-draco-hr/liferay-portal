{
  String imageName=StringPool.BLANK;
  if (file != null) {
    imageName=file.getName();
  }
  boolean validImageExtension=false;
  String[] imageExtensions=PropsUtil.getArray(PropsUtil.IG_IMAGE_EXTENSIONS);
  for (int i=0; i < imageExtensions.length; i++) {
    if (StringPool.STAR.equals(imageExtensions[i]) || StringUtil.endsWith(imageName,imageExtensions[i])) {
      validImageExtension=true;
      break;
    }
  }
  if (!validImageExtension) {
    throw new ImageNameException(imageName);
  }
  if ((PropsValues.IG_IMAGE_MAX_SIZE > 0) && ((bytes == null) || (bytes.length > PropsValues.IG_IMAGE_MAX_SIZE))) {
    throw new ImageSizeException();
  }
}
