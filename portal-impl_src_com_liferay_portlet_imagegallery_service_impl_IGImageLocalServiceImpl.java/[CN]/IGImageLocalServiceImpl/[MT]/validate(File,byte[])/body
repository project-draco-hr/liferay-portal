{
  String imageName=StringPool.BLANK;
  if (file != null) {
    imageName=file.getName();
  }
  boolean validImageExtension=false;
  String[] imageExtensions=PropsUtil.getArray(PropsUtil.IG_IMAGE_EXTENSIONS);
  for (int i=0; i < imageExtensions.length; i++) {
    if (StringPool.STAR.equals(imageExtensions[i]) || StringUtil.endsWith(imageName,imageExtensions[i])) {
      validImageExtension=true;
      break;
    }
  }
  if (!validImageExtension) {
    throw new ImageNameException(imageName);
  }
  long imageMaxSize=GetterUtil.getLong(PropsUtil.get(PropsUtil.IG_IMAGE_MAX_SIZE));
  if ((imageMaxSize > 0) && ((bytes == null) || (bytes.length > imageMaxSize))) {
    throw new ImageSizeException();
  }
}
