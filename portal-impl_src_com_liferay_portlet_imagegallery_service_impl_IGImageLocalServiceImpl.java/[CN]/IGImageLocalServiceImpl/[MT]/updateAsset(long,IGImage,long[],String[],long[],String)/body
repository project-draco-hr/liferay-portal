{
  Image largeImage=imageLocalService.getImage(image.getLargeImageId());
  if (largeImage == null) {
    return;
  }
  if (contentType == null) {
    contentType=MimeTypesUtil.getContentType(largeImage.getType());
  }
  AssetEntry assetEntry=assetEntryLocalService.updateEntry(userId,image.getGroupId(),IGImage.class.getName(),image.getImageId(),image.getUuid(),assetCategoryIds,assetTagNames,true,null,null,null,null,contentType,image.getName(),image.getDescription(),null,null,null,largeImage.getHeight(),largeImage.getWidth(),null,false);
  assetLinkLocalService.updateLinks(userId,assetEntry.getEntryId(),assetLinkEntryIds,AssetLinkConstants.TYPE_RELATED);
}
