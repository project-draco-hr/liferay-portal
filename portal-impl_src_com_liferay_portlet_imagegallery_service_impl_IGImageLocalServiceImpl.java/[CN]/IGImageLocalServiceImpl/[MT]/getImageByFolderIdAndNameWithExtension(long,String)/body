{
  String name=FileUtil.stripExtension(nameWithExtension);
  List<IGImage> images=igImagePersistence.findByF_N(folderId,name);
  if ((images.size() <= 0) && Validator.isNumber(name)) {
    long imageId=GetterUtil.getLong(name);
    IGImage image=igImagePersistence.fetchByPrimaryKey(imageId);
    if (image != null) {
      images.add(image);
    }
  }
  for (  IGImage image : images) {
    if (nameWithExtension.equals(image.getNameWithExtension())) {
      return image;
    }
  }
  throw new NoSuchImageException();
}
