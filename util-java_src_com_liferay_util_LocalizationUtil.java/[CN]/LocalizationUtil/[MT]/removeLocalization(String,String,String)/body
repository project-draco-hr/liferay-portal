{
  if (Validator.isNull(xml) || (xml.indexOf("<root") == -1)) {
    xml="<root />";
  }
  String defaultLanguageId=LocaleUtil.toLanguageId(LocaleUtil.getDefault());
  try {
    SAXReader reader=new SAXReader();
    Document doc=reader.read(new StringReader(xml));
    Element root=doc.getRootElement();
    String availableLocales=root.attributeValue("available-locales");
    defaultLanguageId=root.attributeValue("default-locale",defaultLanguageId);
    if (availableLocales.indexOf(requestedLanguageId) != -1) {
      Iterator itr=root.elements().iterator();
      while (itr.hasNext()) {
        Element el=(Element)itr.next();
        String languageId=el.attributeValue("language-id",defaultLanguageId);
        if (languageId.equals(requestedLanguageId)) {
          root.remove(el);
          break;
        }
      }
      availableLocales=StringUtil.remove(availableLocales,requestedLanguageId,StringPool.COMMA);
      root.addAttribute("available-locales",availableLocales);
    }
    xml=XMLFormatter.toString(doc,"  ");
  }
 catch (  Exception e) {
    _log.warn(e);
  }
  return xml;
}
