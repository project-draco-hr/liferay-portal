{
  String defaultLanguageId=LocaleUtil.toLanguageId(LocaleUtil.getDefault());
  String value=StringPool.BLANK;
  String defaultValue=StringPool.BLANK;
  try {
    SAXReader reader=new SAXReader();
    Document doc=reader.read(new StringReader(xml));
    Element root=doc.getRootElement();
    Iterator itr=root.elements().iterator();
    while (itr.hasNext()) {
      Element el=(Element)itr.next();
      String languageId=el.attributeValue("language-id",defaultLanguageId);
      if (languageId.equals(defaultLanguageId)) {
        defaultValue=el.getText();
      }
      if (languageId.equals(requestedLanguageId)) {
        value=el.getText();
      }
    }
    if (useDefault && Validator.isNull(value)) {
      value=defaultValue;
    }
  }
 catch (  Exception e) {
    if (_log.isWarnEnabled()) {
      _log.warn(e);
    }
  }
  return value;
}
