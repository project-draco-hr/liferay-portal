{
  String destinationName=MapUtil.getString(properties,"destination.name");
  ClassLoader operatingClassLoader=(ClassLoader)properties.get("operatingClassLoader");
  Thread currentThread=Thread.currentThread();
  ClassLoader contextClassLoader=currentThread.getContextClassLoader();
  try {
    currentThread.setContextClassLoader(operatingClassLoader);
    registerMessageListener(destinationName,messageListener);
  }
  finally {
    currentThread.setContextClassLoader(contextClassLoader);
  }
}
