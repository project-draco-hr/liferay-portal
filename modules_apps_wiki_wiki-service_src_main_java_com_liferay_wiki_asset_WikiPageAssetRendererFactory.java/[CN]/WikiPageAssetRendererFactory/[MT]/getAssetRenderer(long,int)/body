{
  WikiPage page=_wikiPageLocalService.fetchWikiPage(classPK);
  if (page == null) {
    if (type == TYPE_LATEST_APPROVED) {
      try {
        page=_wikiPageLocalService.getPage(classPK);
      }
 catch (      NoSuchPageException nspe) {
        WikiPageResource pageResource=_wikiPageResourceLocalService.getPageResource(classPK);
        page=_wikiPageLocalService.getPage(pageResource.getNodeId(),pageResource.getTitle(),null);
      }
    }
 else     if (type == TYPE_LATEST) {
      WikiPageResource pageResource=_wikiPageResourceLocalService.getPageResource(classPK);
      page=_wikiPageLocalService.getPage(pageResource.getNodeId(),pageResource.getTitle(),null);
    }
 else {
      throw new IllegalArgumentException("Unknown asset renderer type " + type);
    }
  }
  WikiPageAssetRenderer wikiPageAssetRenderer=new WikiPageAssetRenderer(page);
  wikiPageAssetRenderer.setAssetRendererType(type);
  wikiPageAssetRenderer.setServletContext(_servletContext);
  return wikiPageAssetRenderer;
}
