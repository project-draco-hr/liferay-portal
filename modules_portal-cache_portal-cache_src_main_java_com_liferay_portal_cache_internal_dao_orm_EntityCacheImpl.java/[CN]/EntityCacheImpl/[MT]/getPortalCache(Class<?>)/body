{
  String className=clazz.getName();
  PortalCache<Serializable,Serializable> portalCache=_portalCaches.get(className);
  if (portalCache != null) {
    return portalCache;
  }
  String groupKey=_GROUP_KEY_PREFIX.concat(className);
  portalCache=(PortalCache<Serializable,Serializable>)_multiVMPool.getPortalCache(groupKey,_valueObjectEntityBlockingCacheEnabled);
  if (_valueObjectMVCCEntityCacheEnabled && MVCCModel.class.isAssignableFrom(clazz)) {
    portalCache=(PortalCache<Serializable,Serializable>)MVCCPortalCacheFactory.createMVCCEhcachePortalCache(portalCache);
  }
  PortalCache<Serializable,Serializable> previousPortalCache=_portalCaches.putIfAbsent(className,portalCache);
  if (previousPortalCache != null) {
    return previousPortalCache;
  }
  return portalCache;
}
