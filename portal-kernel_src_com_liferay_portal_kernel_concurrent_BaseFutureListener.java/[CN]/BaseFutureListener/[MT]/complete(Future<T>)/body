{
  if (future.isCancelled()) {
    completeWithCancel(future);
    return;
  }
  try {
    completeWithResult(future,future.get());
  }
 catch (  Throwable t) {
    if (t instanceof ExecutionException) {
      t=t.getCause();
    }
    completeWithException(future,t);
  }
}
