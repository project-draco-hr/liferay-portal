{
  CompanyThreadLocal.setCompanyId(user.getCompanyId());
  PrincipalThreadLocal.setName(user.getUserId());
  if (!_usePermissionChecker) {
    return;
  }
  PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
  if (permissionChecker != null) {
    return;
  }
  permissionChecker=PermissionCheckerFactoryUtil.create(user);
  PermissionThreadLocal.setPermissionChecker(permissionChecker);
}
