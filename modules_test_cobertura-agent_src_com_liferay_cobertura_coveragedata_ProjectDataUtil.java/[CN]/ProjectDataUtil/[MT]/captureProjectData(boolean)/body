{
  String className=ProjectDataUtil.class.getName();
synchronized (className.intern()) {
    FileLock fileLock=_lockFile();
    ProjectData masterProjectData=new ProjectData();
    for (    ProjectData projectData : _projectDatas.values()) {
      masterProjectData.merge(projectData);
    }
    masterProjectData=_runMergeHooks(masterProjectData);
    try {
      File dataFile=new File(System.getProperty("net.sourceforge.cobertura.datafile"));
      if (dataFile.exists()) {
        masterProjectData.merge(_readProjectData(dataFile));
        dataFile.delete();
      }
      if (saveSessionData) {
        _writeProjectData(masterProjectData,dataFile);
      }
      return masterProjectData;
    }
  finally {
      _unlockFile(fileLock);
    }
  }
}
