{
  ServiceReference<ConfigurationAdmin> serviceReference=bundleContext.getServiceReference(ConfigurationAdmin.class);
  try {
    ConfigurationAdmin configurationAdmin=bundleContext.getService(serviceReference);
    _cxfConfiguration=configurationAdmin.createFactoryConfiguration(_CXF_ENDPOINT_PUBLISHER_CONFIGURATION,null);
    Dictionary<String,Object> properties=new Hashtable<>();
    properties.put("contextPath",_TEST_CONTEXT_PATH);
    _cxfConfiguration.update(properties);
    _jaxWsApiConfiguration=configurationAdmin.getConfiguration(_JAX_WS_API_CONFIGURATION,null);
    properties=new Hashtable<>();
    properties.put("contextPath",_TEST_CONTEXT_PATH);
    properties.put("timeout",10000);
    _jaxWsApiConfiguration.update(properties);
    _soapConfiguration=configurationAdmin.createFactoryConfiguration(_SOAP_EXTENDER_CONFIGURATION,null);
    properties=new Hashtable<>();
    properties.put("contextPaths",new String[]{_TEST_CONTEXT_PATH});
    properties.put("jaxWsHandlerFilterStrings",new String[]{"(soap.address=*)"});
    properties.put("jaxWsServiceFilterStrings",new String[]{"(jaxws=true)"});
    _soapConfiguration.update(properties);
  }
  finally {
    bundleContext.ungetService(serviceReference);
  }
}
