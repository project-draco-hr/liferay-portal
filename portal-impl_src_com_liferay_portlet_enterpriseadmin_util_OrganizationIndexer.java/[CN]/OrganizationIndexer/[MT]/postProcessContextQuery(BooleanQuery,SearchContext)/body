{
  BooleanQuery permissionQuery=BooleanQueryFactoryUtil.create();
  LinkedHashMap<String,Object> params=(LinkedHashMap<String,Object>)searchContext.getAttribute("params");
  Long[][] leftAndRightOrganizationIds=(Long[][])params.get("organizationsTree");
  if (leftAndRightOrganizationIds != null) {
    if (leftAndRightOrganizationIds.length == 0) {
      permissionQuery.addRequiredTerm(Field.ORGANIZATION_ID,-1);
    }
 else     if (leftAndRightOrganizationIds.length > 0) {
      for (int i=0; i < leftAndRightOrganizationIds.length; i++) {
        permissionQuery.addRangeTerm("leftOrganizationId",leftAndRightOrganizationIds[i][0],leftAndRightOrganizationIds[i][1]);
      }
    }
  }
  contextQuery.add(permissionQuery,BooleanClauseOccur.MUST);
}
