{
  Company company=addCompany();
  for (  String virtualHostName : virtualHostNames) {
    try {
      CompanyLocalServiceUtil.updateCompany(company.getCompanyId(),virtualHostName,company.getMx(),company.getMaxUsers(),company.getActive());
      if (expectFailure) {
        Assert.fail();
      }
    }
 catch (    CompanyVirtualHostException cvhe) {
      if (!expectFailure) {
        Assert.fail();
      }
    }
  }
  CompanyLocalServiceUtil.deleteCompany(company.getCompanyId());
}
