{
  Account account=AccountLocalServiceUtil.getAccount(company.getAccountId());
  for (  String accountName : accountNames) {
    try {
      company=CompanyLocalServiceUtil.updateCompany(company.getCompanyId(),company.getVirtualHostname(),company.getMx(),company.getHomeURL(),accountName,account.getLegalName(),account.getLegalId(),account.getLegalType(),account.getSicCode(),account.getTickerSymbol(),account.getIndustry(),account.getType(),account.getSize());
      if (expectFailure) {
        Assert.fail();
      }
    }
 catch (    AccountNameException ane) {
      if (!expectFailure) {
        Assert.fail();
      }
    }
  }
}
