{
  String webId="webId";
  final Company company=CompanyLocalServiceUtil.addCompany(webId,webId,webId + ".com",PropsValues.SHARD_DEFAULT_NAME,false,0,true);
  PortalInstances.initCompany(_mockServletContext,webId);
  CompanyLocalServiceUtil.deleteCompany(company);
  TransactionInvokerUtil.invoke(_transactionAttribute,new Callable<Void>(){
    @Override public Void call() throws Exception {
      int portletsCount=PortletUtil.countByCompanyId(company.getCompanyId());
      Assert.assertEquals(0,portletsCount);
      return null;
    }
  }
);
}
