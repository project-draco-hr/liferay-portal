{
  if (templateId == null) {
    throw new IllegalArgumentException("Argument \"name\" is null");
  }
  if (locale == null) {
    throw new IllegalArgumentException("Argument \"locale\" is null");
  }
  if (encoding == null) {
    throw new IllegalArgumentException("Argument \"encoding\" is null");
  }
  TemplateResource templateResource=null;
  if (templateId.startsWith(TemplateConstants.TEMPLATE_RESOURCE_UUID_PREFIX)) {
    templateResource=TemplateResourceThreadLocal.getTemplateResource(TemplateConstants.LANG_TYPE_FTL);
  }
 else {
    try {
      templateResource=_templateResourceLoader.getTemplateResource(templateId);
    }
 catch (    Exception e) {
      templateResource=null;
    }
  }
  if (templateResource == null) {
    throw new IOException("Unable to find FreeMarker template with ID " + templateId);
  }
  Object object=_portalCache.get(templateResource);
  Template template;
  if ((object != null) && (object instanceof Template)) {
    template=(Template)object;
  }
 else {
    template=new Template(templateResource.getTemplateId(),templateResource.getReader(),_configuration,TemplateConstants.DEFAUT_ENCODING);
    if (_freemarkerEngineConfiguration.resourceModificationCheck() != 0) {
      _portalCache.put(templateResource,template);
    }
  }
  try {
    return _constructor.newInstance(template);
  }
 catch (  ReflectiveOperationException roe) {
    throw new IOException(roe);
  }
}
