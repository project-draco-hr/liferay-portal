{
  Map<String,Object> context=new HashMap<String,Object>();
  List<Role> roles=new ArrayList<Role>();
  roles.add(CommonRoles.POWER_USER(_companyId));
  roles.add(CommonRoles.USER(_companyId));
  User user=addRequiredUserValues(firstName,lastName,roles,context);
  if (addCommunityRole) {
    user.addCommunityRole(new GroupRole(user.getUserId(),communityId,communityRoleId));
  }
  FreeMarkerUtil.process(_sqlTemplateLocation + _CREATE_USER_TEMPLATE_FILE,context,sqlWriter);
  FreeMarkerUtil.process(_dataTemplateLocation + _USER_LOGINS_TEMPLATE_FILE,context,testDataWriter);
}
