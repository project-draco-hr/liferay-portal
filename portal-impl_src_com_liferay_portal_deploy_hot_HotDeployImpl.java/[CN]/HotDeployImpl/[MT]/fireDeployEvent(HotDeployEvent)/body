{
  if (_capturePrematureEvents) {
    PortalLifecycle portalLifecycle=new BasePortalLifecycle(){
      @Override protected void doPortalDestroy(){
      }
      @Override protected void doPortalInit(){
        HotDeployUtil.fireDeployEvent(hotDeployEvent);
      }
    }
;
    PortalLifecycleUtil.register(portalLifecycle,PortalLifecycle.METHOD_INIT);
  }
 else {
    try {
      doFireDeployEvent(hotDeployEvent);
    }
  finally {
      String lockKey=PortletContextLoaderListener.getLockKey(hotDeployEvent.getServletContext());
      LockRegistry.finallyFreeLock(lockKey,lockKey,true);
    }
  }
}
