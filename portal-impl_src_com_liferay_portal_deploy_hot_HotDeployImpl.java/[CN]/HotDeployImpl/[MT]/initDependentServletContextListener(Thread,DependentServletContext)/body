{
  ClassLoader portletClassLoader=PortletClassLoaderUtil.getClassLoader();
  String portletServletContextName=PortletClassLoaderUtil.getServletContextName();
  try {
    PortletClassLoaderUtil.setClassLoader(dependentServletContext.getClassLoader());
    PortletClassLoaderUtil.setServletContextName(dependentServletContext.getServletContextName());
    currentThread.setContextClassLoader(PortalClassLoaderUtil.getClassLoader());
    ServletContextListener servletContextListener=dependentServletContext.getServletContextListener();
    servletContextListener.contextInitialized(dependentServletContext.getServletContextEvent());
  }
  finally {
    PortletClassLoaderUtil.setClassLoader(portletClassLoader);
    PortletClassLoaderUtil.setServletContextName(portletServletContextName);
  }
}
