{
  String filePath=_docrootDirName.concat(fileName);
  String cssThemePath=filePath;
  int pos=filePath.lastIndexOf("/css/");
  if (pos >= 0) {
    cssThemePath=filePath.substring(0,pos + 4);
  }
  if (_jniSassCompiler != null) {
    try {
      return _jniSassCompiler.compileString(content,_portalCommonDirName + File.pathSeparator + cssThemePath,"");
    }
 catch (    Exception e) {
      e.printStackTrace();
      _exception=new Exception("Unable to parse " + fileName,e);
      _mainThread.interrupt();
    }
  }
 else {
    try {
      return _scriptingContainer.callMethod(_scriptObject,"process",new Object[]{content,_portalCommonDirName,filePath,cssThemePath,_TMP_DIR,false},String.class);
    }
 catch (    Exception e) {
      if (e instanceof RaiseException) {
        RaiseException raiseException=(RaiseException)e;
        RubyException rubyException=raiseException.getException();
        System.err.println(String.valueOf(rubyException.message.toJava(String.class)));
        IRubyObject iRubyObject=rubyException.getBacktrace();
        RubyArray rubyArray=(RubyArray)iRubyObject.toJava(RubyArray.class);
        for (int i=0; i < rubyArray.size(); i++) {
          Object object=rubyArray.get(i);
          System.err.println(String.valueOf(object));
        }
      }
 else {
        e.printStackTrace();
      }
      _exception=new Exception("Unable to parse " + fileName,e);
      _mainThread.interrupt();
    }
  }
  return content;
}
