{
  InteractionParams interactionParams=new InteractionParams();
  interactionParams.setPortletStateChange(consumerEnv.getPortletStateChange());
  if (!portlet.isConsumerConfigured() && interactionParams.getPortletStateChange().toString().equalsIgnoreCase(StateChange._readWrite)) {
    interactionParams.setPortletStateChange(StateChange.cloneBeforeWrite);
  }
  interactionParams.setInteractionState(actionRequest.getInteractionState());
  interactionParams.setFormParameters(actionRequest.getFormParameters());
  interactionParams.setUploadContexts(actionRequest.getUploadContexts());
  interactionParams.setExtensions(null);
  return interactionParams;
}
