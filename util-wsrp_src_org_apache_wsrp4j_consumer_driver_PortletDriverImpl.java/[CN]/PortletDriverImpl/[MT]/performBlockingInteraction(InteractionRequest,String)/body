{
  checkInitCookie(userID);
  BlockingInteractionResponse response=null;
  try {
    PerformBlockingInteraction request=new PerformBlockingInteraction();
    request.setPortletContext(getPortlet().getPortletContext());
    request.setInteractionParams(getInteractionParams(actionRequest));
    request.setMarkupParams(getMarkupParams(actionRequest));
    request.setRuntimeContext(getRuntimeContext(actionRequest));
    RegistrationContext regCtx=producer.getRegistrationContext();
    if (regCtx != null)     request.setRegistrationContext(regCtx);
    UserContext userCtx=getUserContext(userID);
    if (userCtx != null)     request.setUserContext(userCtx);
    response=markupPort.performBlockingInteraction(request);
    parameterChecker.check(response);
  }
 catch (  InvalidCookieFault cookieFault) {
    resetInitCookie(userID);
    performBlockingInteraction(actionRequest,userID);
  }
catch (  java.rmi.RemoteException wsrpFault) {
    WSRPXHelper.handleWSRPFault(logger,wsrpFault);
  }
  return response;
}
