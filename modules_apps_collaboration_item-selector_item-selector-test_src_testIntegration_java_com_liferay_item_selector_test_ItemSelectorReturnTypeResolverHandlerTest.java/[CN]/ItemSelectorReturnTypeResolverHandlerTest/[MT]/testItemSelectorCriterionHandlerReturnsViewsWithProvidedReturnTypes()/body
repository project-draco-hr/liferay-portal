{
  TestItemSelectorView testItemSelectorView=new TestItemSelectorView();
  ServiceRegistration<ItemSelectorView> itemSelectorViewServiceRegistration=registerItemSelectorView(testItemSelectorView,"test-view");
  ServiceRegistration<ItemSelectorReturnTypeResolver> itemSelectorReturnTypeResolverServiceRegistration=registerReturnTypeResolver(new TestItemSelectorReturnTypeResolver(),50);
  ItemSelectorViewReturnTypeProvider itemSelectorViewReturnTypeProvider=new TestItemSelectorViewReturnTypeProvider();
  ServiceRegistration<ItemSelectorViewReturnTypeProvider> itemSelectorViewReturnTypeProviderServiceRegistration=registerItemSelectorViewProvider(itemSelectorViewReturnTypeProvider,"test-view");
  List serviceRegistrations=new ArrayList<>();
  serviceRegistrations.add(itemSelectorViewServiceRegistration);
  serviceRegistrations.add(itemSelectorReturnTypeResolverServiceRegistration);
  serviceRegistrations.add(itemSelectorViewReturnTypeProviderServiceRegistration);
  try {
    TestItemSelectorCriterion testItemSelectorCriterion=new TestItemSelectorCriterion();
    testItemSelectorCriterion.setDesiredItemSelectorReturnTypes(Arrays.asList(new TestItemSelectorReturnType()));
    ItemSelectorReturnTypeResolver itemSelectorReturnTypeResolver=_itemSelectorReturnTypeResolverHandler.getItemSelectorReturnTypeResolver(testItemSelectorCriterion,testItemSelectorView,String.class);
    Assert.assertTrue(itemSelectorReturnTypeResolver instanceof TestItemSelectorReturnTypeResolver);
  }
  finally {
    _unregister(serviceRegistrations);
  }
}
