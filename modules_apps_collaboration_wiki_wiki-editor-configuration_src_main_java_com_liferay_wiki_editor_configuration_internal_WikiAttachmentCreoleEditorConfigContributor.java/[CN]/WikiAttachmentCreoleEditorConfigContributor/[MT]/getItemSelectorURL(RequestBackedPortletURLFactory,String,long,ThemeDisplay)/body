{
  ItemSelectorCriterion urlItemSelectorCriterion=getURLItemSelectorCriterion();
  PortletURL itemSelectorURL=null;
  if (wikiPageResourcePrimKey == 0) {
    itemSelectorURL=_itemSelector.getItemSelectorURL(requestBackedPortletURLFactory,itemSelectedEventName,urlItemSelectorCriterion);
  }
 else {
    List<ItemSelectorReturnType> desiredItemSelectorReturnTypes=new ArrayList<>();
    desiredItemSelectorReturnTypes.add(new FileEntryItemSelectorReturnType());
    ItemSelectorCriterion attachmentItemSelectorCriterion=getWikiAttachmentItemSelectorCriterion(wikiPageResourcePrimKey,desiredItemSelectorReturnTypes);
    ItemSelectorCriterion uploadItemSelectorCriterion=getUploadItemSelectorCriterion(wikiPageResourcePrimKey,themeDisplay,requestBackedPortletURLFactory);
    itemSelectorURL=_itemSelector.getItemSelectorURL(requestBackedPortletURLFactory,itemSelectedEventName,attachmentItemSelectorCriterion,urlItemSelectorCriterion,uploadItemSelectorCriterion);
  }
  return itemSelectorURL.toString();
}
