{
  int sum=0;
  Session session=null;
  try {
    session=openSession();
    StringBuilder query=new StringBuilder();
    query.append("SELECT SUM(mbStatsUser.messageCount) ");
    query.append("FROM com.liferay.portlet.messageboards.model.MBStatsUser mbStatsUser WHERE ");
    query.append("userId = ?");
    Query q=session.createQuery(query.toString());
    QueryPos qPos=QueryPos.getInstance(q);
    qPos.add(userId);
    sum=(Integer)q.uniqueResult();
  }
 catch (  Exception e) {
    throw processException(e);
  }
 finally {
    closeSession(session);
  }
  return sum;
}
