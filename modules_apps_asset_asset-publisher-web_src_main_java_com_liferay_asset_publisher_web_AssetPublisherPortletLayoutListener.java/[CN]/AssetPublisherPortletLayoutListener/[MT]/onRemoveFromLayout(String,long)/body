{
  try {
    Layout layout=_layoutLocalService.getLayout(plid);
    long userId=PortletKeys.PREFS_OWNER_ID_DEFAULT;
    int ownerType=PortletKeys.PREFS_OWNER_TYPE_LAYOUT;
    if (PortletConstants.hasUserId(portletId)) {
      userId=PortletConstants.getUserId(portletId);
      ownerType=PortletKeys.PREFS_OWNER_TYPE_USER;
    }
    if (AssetUtil.isDefaultAssetPublisher(layout,portletId,StringPool.BLANK)) {
      _journalArticleLocalService.deleteLayoutArticleReferences(layout.getGroupId(),layout.getUuid());
    }
    _subscriptionLocalService.deleteSubscriptions(layout.getCompanyId(),PortletPreferences.class.getName(),AssetPublisherUtil.getSubscriptionClassPK(userId,ownerType,plid,portletId));
  }
 catch (  Exception e) {
    throw new PortletLayoutListenerException(e);
  }
}
