{
  User user=(User)object;
  boolean hidePrivateUserData=true;
  PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
  if (permissionChecker != null) {
    boolean hasViewPermission=UserPermissionUtil.contains(permissionChecker,user.getUserId(),ActionKeys.VIEW);
    long userId=permissionChecker.getUserId();
    if (hasViewPermission || (user.getUserId() == userId)) {
      hidePrivateUserData=false;
    }
  }
  if (hidePrivateUserData) {
    user.setPasswordUnencrypted(StringPool.BLANK);
    user.setReminderQueryQuestion(StringPool.BLANK);
    user.setReminderQueryAnswer(StringPool.BLANK);
    user.setEmailAddress(StringPool.BLANK);
    user.setFacebookId(0);
    user.setComments(StringPool.BLANK);
  }
  super.transform(object);
}
