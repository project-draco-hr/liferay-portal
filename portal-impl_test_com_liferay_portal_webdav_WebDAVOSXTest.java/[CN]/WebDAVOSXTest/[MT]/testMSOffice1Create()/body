{
  Tuple tuple=null;
  assertCode(HttpServletResponse.SC_NOT_FOUND,servicePropFind(_TEST_FILE_NAME));
  assertCode(HttpServletResponse.SC_CREATED,servicePut(_TEST_FILE_NAME,_testFileBytes,getLock(_TEST_FILE_NAME)));
  for (int i=0; i < 3; i++) {
    lock(_TEST_FILE_NAME);
    unlock(_TEST_FILE_NAME);
  }
  lock(_TEST_FILE_NAME);
  assertCode(HttpServletResponse.SC_CREATED,servicePut(_TEST_FILE_NAME,_testFileBytes,getLock(_TEST_FILE_NAME)));
  unlock(_TEST_FILE_NAME);
  for (int i=0; i < 3; i++) {
    lock(_TEST_FILE_NAME);
    tuple=serviceGet(_TEST_FILE_NAME);
    assertCode(HttpServletResponse.SC_OK,tuple);
    assertBytes(_testFileBytes,getResponseBody(tuple));
    unlock(_TEST_FILE_NAME);
  }
  for (int i=0; i < 2; i++) {
    assertCode(HttpServletResponse.SC_NOT_FOUND,servicePropFind(_TEST_META_NAME));
    assertCode(HttpServletResponse.SC_CREATED,servicePut(_TEST_META_NAME,_testMetaBytes));
    lock(_TEST_META_NAME);
    assertCode(HttpServletResponse.SC_CREATED,servicePut(_TEST_META_NAME,_testMetaBytes,getLock(_TEST_META_NAME)));
    assertCode(WebDAVUtil.SC_MULTI_STATUS,servicePropFind(_TEST_META_NAME));
    unlock(_TEST_META_NAME);
    lock(_TEST_META_NAME);
    if (i == 0) {
      unlock(_TEST_META_NAME);
      assertCode(HttpServletResponse.SC_NO_CONTENT,serviceDelete(_TEST_META_NAME));
    }
 else {
      tuple=serviceGet(_TEST_META_NAME);
      assertCode(HttpServletResponse.SC_OK,tuple);
      assertBytes(_testMetaBytes,getResponseBody(tuple));
      assertCode(HttpServletResponse.SC_CREATED,servicePut(_TEST_META_NAME,_testMetaBytes,getLock(_TEST_META_NAME)));
      assertCode(WebDAVUtil.SC_MULTI_STATUS,servicePropFind(_TEST_META_NAME));
      unlock(_TEST_META_NAME);
      lock(_TEST_META_NAME);
      tuple=serviceGet(_TEST_META_NAME);
      assertCode(HttpServletResponse.SC_OK,tuple);
      assertBytes(_testMetaBytes,getResponseBody(tuple));
      unlock(_TEST_META_NAME);
    }
  }
}
