{
  ZipWriter zipWriter=ZipWriterFactoryUtil.getZipWriter();
  PortletDataContext portletDataContext=new PortletDataContextImpl(stagingGroup.getCompanyId(),stagingGroup.getGroupId(),getParameterMap(),new HashSet<String>(),getStartDate(),getEndDate(),zipWriter);
  Element rootElement=SAXReaderUtil.createElement("root");
  portletDataContext.setExportDataRootElement(rootElement);
  Map<String,List<StagedModel>> dependentStagedModelsMap=addDependentStagedModelsMap(stagingGroup);
  StagedModel stagedModel=addStagedModel(stagingGroup,dependentStagedModelsMap);
  StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,stagedModel);
  validateExport(portletDataContext,stagedModel,dependentStagedModelsMap);
  UserIdStrategy userIdStrategy=new CurrentUserIdStrategy(TestPropsValues.getUser());
  ZipReader zipReader=ZipReaderFactoryUtil.getZipReader(zipWriter.getFile());
  portletDataContext=new PortletDataContextImpl(liveGroup.getCompanyId(),liveGroup.getGroupId(),getParameterMap(),new HashSet<String>(),userIdStrategy,zipReader);
  portletDataContext.setSourceGroupId(stagingGroup.getGroupId());
  portletDataContext.setImportDataRootElement(rootElement);
  String stagedModelPath=getStagedModelPath(stagingGroup.getGroupId(),stagedModel);
  StagedModel exportedStagedModel=(StagedModel)portletDataContext.getZipEntryAsObject(stagedModelPath);
  Assert.assertNotNull(exportedStagedModel);
  StagedModelDataHandlerUtil.importStagedModel(portletDataContext,exportedStagedModel);
  validateImport(stagedModel,dependentStagedModelsMap,liveGroup);
}
