{
  ZipWriter zipWriter=ZipWriterFactoryUtil.getZipWriter();
  PortletDataContext portletDataContext=new PortletDataContextImpl(_stagingGroup.getCompanyId(),_stagingGroup.getGroupId(),getParameterMap(),new HashSet<String>(),getStartDate(),getEndDate(),zipWriter);
  Map<String,List<StagedModel>> dependentStagedModels=addDependentStagedModels(_stagingGroup);
  StagedModel stagedModel=addStagedModel(_stagingGroup,dependentStagedModels);
  Element[] stagedModelsParentElements=_getStagedModelsParentElements(dependentStagedModels);
  StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,stagedModelsParentElements,stagedModel);
  validateExport(stagedModel,dependentStagedModels,stagedModelsParentElements);
  ZipReader zipReader=ZipReaderFactoryUtil.getZipReader(zipWriter.getFile());
  UserIdStrategy userIdStrategy=new CurrentUserIdStrategy(TestPropsValues.getUser());
  portletDataContext=new PortletDataContextImpl(_liveGroup.getCompanyId(),_liveGroup.getGroupId(),getParameterMap(),new HashSet<String>(),userIdStrategy,zipReader);
  portletDataContext.setSourceGroupId(_stagingGroup.getGroupId());
  Element importElement=_getImportedStagedModelElement(stagedModel,stagedModelsParentElements);
  Assert.assertNotNull(importElement);
  StagedModelDataHandlerUtil.importStagedModel(portletDataContext,importElement);
  validateImport(stagedModel,dependentStagedModels,_liveGroup);
}
