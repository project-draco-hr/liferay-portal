{
  try {
    DLFileEntryPermission.check(getPermissionChecker(),fileEntryId,ActionKeys.UPDATE);
  }
 catch (  NoSuchFileEntryException nsfee) {
  }
  if (Validator.isNotNull(lockUuid)) {
    try {
      Lock lock=lockLocalService.getLock(DLFileEntry.class.getName(),fileEntryId);
      if (!lock.getUuid().equals(lockUuid)) {
        throw new InvalidLockException("UUIDs do not match");
      }
    }
 catch (    PortalException pe) {
      if ((pe instanceof ExpiredLockException) || (pe instanceof NoSuchLockException)) {
      }
 else {
        throw pe;
      }
    }
  }
  lockLocalService.unlock(DLFileEntry.class.getName(),fileEntryId);
}
