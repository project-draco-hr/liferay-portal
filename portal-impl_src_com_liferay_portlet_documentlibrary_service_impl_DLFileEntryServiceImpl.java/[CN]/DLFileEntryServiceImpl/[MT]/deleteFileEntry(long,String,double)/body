{
  DLFileEntryPermission.check(getPermissionChecker(),folderId,name,ActionKeys.DELETE);
  boolean alreadyHasLock=hasFileEntryLock(folderId,name);
  if (!alreadyHasLock) {
    lockFileEntry(folderId,name);
  }
  try {
    dlFileEntryLocalService.deleteFileEntry(folderId,name,version);
  }
  finally {
    if (!alreadyHasLock) {
      unlockFileEntry(folderId,name);
    }
  }
}
