{
  DLFileEntryPermission.check(getPermissionChecker(),groupId,folderId,name,ActionKeys.DELETE);
  boolean hasLock=hasFileEntryLock(groupId,folderId,name);
  if (hasLock) {
    throw new FileLockedException();
  }
  lockFileEntry(groupId,folderId,name);
  try {
    dlFileEntryLocalService.deleteFileEntry(groupId,folderId,name,version);
  }
  finally {
    unlockFileEntry(groupId,folderId,name);
  }
}
