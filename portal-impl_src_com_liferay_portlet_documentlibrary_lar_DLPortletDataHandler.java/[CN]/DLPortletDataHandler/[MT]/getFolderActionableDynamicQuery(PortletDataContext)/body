{
  ExportActionableDynamicQuery exportActionableDynamicQuery=DLFolderLocalServiceUtil.getExportActionableDynamicQuery(portletDataContext);
  final ActionableDynamicQuery.AddCriteriaMethod addCriteriaMethod=exportActionableDynamicQuery.getAddCriteriaMethod();
  exportActionableDynamicQuery.setAddCriteriaMethod(new ActionableDynamicQuery.AddCriteriaMethod(){
    @Override public void addCriteria(    DynamicQuery dynamicQuery){
      addCriteriaMethod.addCriteria(dynamicQuery);
      Property property=PropertyFactoryUtil.forName("repositoryId");
      dynamicQuery.add(property.eq(portletDataContext.getScopeGroupId()));
    }
  }
);
  exportActionableDynamicQuery.setStagedModelType(new StagedModelType(DLFolderConstants.getClassName()));
  exportActionableDynamicQuery.setPerformActionMethod(new ActionableDynamicQuery.PerformActionMethod(){
    @Override public void performAction(    Object object) throws PortalException, SystemException {
      DLFolder dlFolder=(DLFolder)object;
      if (dlFolder.isInTrash()) {
        return;
      }
      Folder folder=DLAppLocalServiceUtil.getFolder(dlFolder.getFolderId());
      StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,folder);
    }
  }
);
  return exportActionableDynamicQuery;
}
