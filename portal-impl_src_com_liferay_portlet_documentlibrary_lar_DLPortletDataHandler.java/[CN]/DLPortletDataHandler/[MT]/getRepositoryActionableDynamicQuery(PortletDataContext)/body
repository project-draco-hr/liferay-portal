{
  return new RepositoryExportActionableDynamicQuery(portletDataContext){
    @Override protected void addCriteria(    DynamicQuery dynamicQuery){
      super.addCriteria(dynamicQuery);
      Property classNameIdProperty=PropertyFactoryUtil.forName("classNameId");
      long repositoryClassNameId=PortalUtil.getClassNameId(LiferayRepository.class);
      dynamicQuery.add(classNameIdProperty.ne(repositoryClassNameId));
      Property portletIdProperty=PropertyFactoryUtil.forName("portletId");
      Disjunction disjunction=RestrictionsFactoryUtil.disjunction();
      disjunction.add(portletIdProperty.isNull());
      disjunction.add(portletIdProperty.eq(StringPool.BLANK));
      dynamicQuery.add(disjunction);
    }
    @Override protected StagedModelType getStagedModelType(){
      return new StagedModelType(PortalUtil.getClassNameId(Repository.class.getName()),StagedModelType.REFERRER_CLASS_NAME_ID_ALL);
    }
  }
;
}
