{
  long rootFolderId=GetterUtil.getLong(portletPreferences.getValue("rootFolderId",null));
  if (rootFolderId != DLFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
    Folder folder=null;
    try {
      folder=DLAppLocalServiceUtil.getFolder(rootFolderId);
    }
 catch (    PortalException e) {
      if (_log.isErrorEnabled()) {
        _log.error("Portlet " + portletId + " refers to an invalid root folder: "+ rootFolderId);
      }
      throw e;
    }
    StagedModelDataHandlerUtil.exportReferenceStagedModel(portletDataContext,portletId,folder);
  }
  return portletPreferences;
}
