{
  Element rootElement=portletDataContext.getImportDataRootElement();
  long rootFolderId=GetterUtil.getLong(portletPreferences.getValue("root-folder-id",null));
  if (rootFolderId > 0) {
    String rootFolderPath=ExportImportPathUtil.getModelPath(portletDataContext,Folder.class.getName(),rootFolderId);
    Folder folder=(Folder)portletDataContext.getZipEntryAsObject(rootFolderPath);
    StagedModelDataHandlerUtil.importStagedModel(portletDataContext,folder);
    Map<Long,Long> folderIds=(Map<Long,Long>)portletDataContext.getNewPrimaryKeysMap(Folder.class);
    rootFolderId=MapUtil.getLong(folderIds,rootFolderId,rootFolderId);
    portletPreferences.setValue("rootFolderId",String.valueOf(rootFolderId));
  }
  return portletPreferences;
}
