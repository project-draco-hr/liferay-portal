{
  String portletId=CompanyImpl.SYSTEM;
  String groupId=GroupImpl.DEFAULT_PARENT_GROUP_ID;
  String repositoryId=CompanyImpl.SYSTEM;
  String dirName="/messageboards/" + topicId + "/"+ messageId;
  String[] fileNames=null;
  try {
    fileNames=_dlGetFileNames(companyId,repositoryId,dirName);
  }
 catch (  NoSuchDirectoryException nsde) {
  }
  if (fileNames == null) {
    return;
  }
  dirName=dirName.substring(1,dirName.length());
  try {
    DLServiceUtil.deleteDirectory(companyId,portletId,repositoryId,dirName);
  }
 catch (  NoSuchDirectoryException nsde) {
  }
  DLServiceUtil.addDirectory(companyId,repositoryId,dirName);
  for (int i=0; i < fileNames.length; i++) {
    String fileName=FileUtil.getShortFileName(fileNames[i]);
    byte[] byteArray=_dlGetFile(companyId,repositoryId,fileNames[i]);
    _log.info("Migrating message board attachment " + fileNames[i]);
    try {
      DLServiceUtil.addFile(companyId,portletId,groupId,repositoryId,dirName + "/" + fileName,byteArray);
    }
 catch (    DuplicateFileException dfe) {
    }
  }
}
