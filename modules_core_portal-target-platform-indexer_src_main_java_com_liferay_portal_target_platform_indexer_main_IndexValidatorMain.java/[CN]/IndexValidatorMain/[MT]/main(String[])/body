{
  if ((args == null) || (args.length == 0)) {
    System.err.println("== Usage: <cmd> <list of index files or directories " + "containing index files>");
    return;
  }
  List<URI> indexFiles=new ArrayList<>();
  for (  String arg : args) {
    File file=new File(arg);
    if (!file.exists() || !file.canRead()) {
      continue;
    }
    if (!file.isDirectory()) {
      String name=file.getName();
      if (name.endsWith(".xml") || name.endsWith(".xml.gz")) {
        indexFiles.add(file.toURI());
      }
      continue;
    }
    File[] files=file.listFiles(new FilenameFilter(){
      @Override public boolean accept(      File dir,      String name){
        if (name.endsWith(".xml") || name.endsWith(".xml.gz")) {
          return true;
        }
        return false;
      }
    }
);
    for (    File entry : files) {
      if (entry.exists() && entry.canRead()) {
        indexFiles.add(entry.toURI());
      }
    }
  }
  if (indexFiles.isEmpty()) {
    System.err.println("== No index files found in " + Arrays.toString(args));
    return;
  }
  IndexValidator indexValidator=new IndexValidator();
  List<String> errors=indexValidator.validate(indexFiles);
  if (!errors.isEmpty()) {
    System.out.println("== Validation errors");
    for (    String message : errors) {
      System.out.println("== " + message);
    }
  }
 else {
    System.out.println("== Successfully validated");
  }
}
