{
  WSRPPortlets rootNode=_getRootNode();
  if (rootNode == null || rootNode.getWSRPPortlet().size() == 0) {
    return Collections.EMPTY_LIST;
  }
  List<WSRPPortlet> wsrpPortlets=rootNode.getWSRPPortlet();
  List<Portlet> portlets=new ArrayList<Portlet>();
  for (  WSRPPortlet wsrpPortlet : wsrpPortlets) {
    String portletId=PortalUtil.getJsSafePortletId(wsrpPortlet.getPortletId());
    Portlet remotePortlet=new PortletImpl(CompanyConstants.SYSTEM,portletId);
    remotePortlet.setRemote(true);
    remotePortlet.setProducerEntityId(wsrpPortlet.getProducerEntityId());
    remotePortlet.setConsumerId(wsrpPortlet.getConsumerId());
    remotePortlet.setRemotePortletHandle(wsrpPortlet.getPortletHandle());
    remotePortlet.setRemotePortletId(wsrpPortlet.getPortletHandle());
    remotePortlet.setPortletId(portletId);
    remotePortlet.setPortletName(portletId);
    remotePortlet.setActive(true);
    remotePortlet.setInstanceable(true);
    remotePortlet.setTimestamp(System.currentTimeMillis());
    PortletInfo portletInfo=new PortletInfo(wsrpPortlet.getTitle(),wsrpPortlet.getShortTitle(),wsrpPortlet.getKeywords());
    remotePortlet.setPortletInfo(portletInfo);
    List<MimeType> mimeTypes=wsrpPortlet.getMimeTypes();
    Map<String,Set<String>> portletModes=new HashMap<String,Set<String>>();
    for (    MimeType mimeType : mimeTypes) {
      Set<String> modes=new HashSet<String>(mimeType.getModes());
      portletModes.put(mimeType.getMime(),modes);
    }
    remotePortlet.setPortletModes(portletModes);
    portlets.add(remotePortlet);
  }
  return portlets;
}
