{
  try {
    ClassLoader classLoader=getClass().getClassLoader();
    _jaxbContext=JAXBContext.newInstance("com.liferay.portal.wsrp.consumer.admin",classLoader);
    _marshaller=_jaxbContext.createMarshaller();
    _marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT,Boolean.TRUE);
    _unmarshaller=_jaxbContext.createUnmarshaller();
    _objectFactory=new ObjectFactory();
    String wsrpDataDir=WSRPConfig.getWSRPDataDirectory();
    FileUtil.mkdirs(wsrpDataDir);
    FileUtil.write(wsrpDataDir + "/consumer.xml",StringUtil.read(classLoader,"com/liferay/portal/wsrp/consumer/data/consumer.xml"));
    _wsrpFileName=wsrpDataDir + "/wsrpportlets.xml";
    File file=new File(_wsrpFileName);
    if (!file.exists()) {
      file.createNewFile();
    }
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
}
