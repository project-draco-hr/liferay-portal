{
  try {
    Resource resource=getResource(webDavRequest);
    if (resource == null) {
      return HttpServletResponse.SC_NOT_FOUND;
    }
    ServiceContext serviceContext=new ServiceContext();
    Object model=resource.getModel();
    if (model instanceof JournalStructure) {
      JournalStructure structure=(JournalStructure)model;
      HttpServletRequest request=webDavRequest.getHttpServletRequest();
      String xsd=StringUtil.read(request.getInputStream());
      JournalStructureServiceUtil.updateStructure(structure.getGroupId(),structure.getStructureId(),structure.getParentStructureId(),structure.getName(),structure.getDescription(),structure.isWebContentType(),xsd,serviceContext);
      return HttpServletResponse.SC_CREATED;
    }
 else     if (model instanceof JournalTemplate) {
      JournalTemplate template=(JournalTemplate)model;
      HttpServletRequest request=webDavRequest.getHttpServletRequest();
      String xsl=StringUtil.read(request.getInputStream());
      boolean formatXsl=true;
      File smallFile=null;
      JournalTemplateServiceUtil.updateTemplate(template.getGroupId(),template.getTemplateId(),template.getStructureId(),template.getName(),template.getDescription(),xsl,formatXsl,template.getLangType(),template.isCacheable(),template.isSmallImage(),template.getSmallImageURL(),smallFile,serviceContext);
      return HttpServletResponse.SC_CREATED;
    }
 else {
      return HttpServletResponse.SC_FORBIDDEN;
    }
  }
 catch (  PortalException pe) {
    return HttpServletResponse.SC_FORBIDDEN;
  }
catch (  Exception e) {
    throw new WebDAVException(e);
  }
}
