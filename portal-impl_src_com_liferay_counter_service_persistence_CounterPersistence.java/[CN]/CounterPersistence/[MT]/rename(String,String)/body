{
  CounterRegister register=getCounterRegister(oldName);
synchronized (register) {
    if (_registerLookup.containsKey(newName)) {
      throw new SystemException("Cannot rename " + oldName + " to "+ newName);
    }
    Connection con=null;
    PreparedStatement ps=null;
    try {
      con=getConnection();
      ps=con.prepareStatement(_SQL_UPDATE_NAME_BY_NAME);
      ps.setString(1,newName);
      ps.setString(2,oldName);
      ps.executeUpdate();
    }
 catch (    ObjectNotFoundException onfe) {
    }
catch (    Exception e) {
      throw processException(e);
    }
 finally {
      DataAccess.cleanUp(con,ps);
    }
    register.setName(newName);
    _registerLookup.put(newName,register);
    _registerLookup.remove(oldName);
  }
}
