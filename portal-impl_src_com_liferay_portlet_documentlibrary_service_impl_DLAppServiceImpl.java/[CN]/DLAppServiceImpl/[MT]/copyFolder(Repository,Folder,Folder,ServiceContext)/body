{
  List<FileEntry> srcFileEntries=repository.getFileEntries(srcFolder.getFolderId(),QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  for (  FileEntry srcFileEntry : srcFileEntries) {
    String title=srcFileEntry.getTitle();
    String description=srcFileEntry.getDescription();
    long size=srcFileEntry.getSize();
    try {
      InputStream is=srcFileEntry.getContentStream();
      repository.addFileEntry(destFolder.getFolderId(),title,description,StringPool.BLANK,is,size,serviceContext);
    }
 catch (    Exception e) {
      _log.error(e,e);
      continue;
    }
  }
  List<Folder> srcSubfolders=repository.getFolders(srcFolder.getFolderId(),QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  for (  Folder srcSubfolder : srcSubfolders) {
    String name=srcSubfolder.getName();
    String description=srcSubfolder.getDescription();
    Folder destSubfolder=repository.addFolder(destFolder.getFolderId(),name,description,serviceContext);
    copyFolder(repository,srcSubfolder,destSubfolder,serviceContext);
  }
}
