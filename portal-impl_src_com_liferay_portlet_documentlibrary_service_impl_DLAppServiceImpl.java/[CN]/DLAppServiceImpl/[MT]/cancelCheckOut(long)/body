{
  Repository repository=getRepository(0,fileEntryId,0);
  FileEntry fileEntry=repository.getFileEntry(fileEntryId);
  DLProcessorRegistryUtil.cleanUp(fileEntry.getLatestFileVersion());
  FileVersion draftFileVersion=repository.cancelCheckOut(fileEntryId);
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setWorkflowAction(WorkflowConstants.ACTION_PUBLISH);
  dlAppHelperLocalService.cancelCheckOut(getUserId(),fileEntry,null,fileEntry.getFileVersion(),draftFileVersion,serviceContext);
}
