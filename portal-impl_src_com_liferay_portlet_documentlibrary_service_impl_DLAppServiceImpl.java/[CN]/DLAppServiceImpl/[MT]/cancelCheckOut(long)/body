{
  Repository repository=getRepository(0,fileEntryId,0);
  FileEntry fileEntry=repository.getFileEntry(fileEntryId);
  DLProcessorRegistryUtil.cleanUp(fileEntry.getLatestFileVersion());
  repository.cancelCheckOut(fileEntryId);
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setWorkflowAction(WorkflowConstants.ACTION_PUBLISH);
  dlAppHelperLocalService.updateFileEntry(getUserId(),fileEntry,fileEntry.getFileVersion(),serviceContext);
}
