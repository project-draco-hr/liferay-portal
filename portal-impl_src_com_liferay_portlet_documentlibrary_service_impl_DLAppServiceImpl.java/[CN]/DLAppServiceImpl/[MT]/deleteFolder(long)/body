{
  Repository repository=repositoryProvider.getFolderRepository(folderId);
  Folder folder=repository.getFolder(folderId);
  if (repository.isCapabilityProvided(TrashCapability.class)) {
    TrashCapability trashCapability=repository.getCapability(TrashCapability.class);
    if (trashCapability.isInTrash(folder)) {
      trashEntryService.deleteEntry(DLFolderConstants.getClassName(),folder.getFolderId());
      return;
    }
  }
  List<FileEntry> fileEntries=repository.getRepositoryFileEntries(0,folderId,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  for (  FileEntry fileEntry : fileEntries) {
    dlAppHelperLocalService.deleteFileEntry(fileEntry);
  }
  repository.deleteFolder(folderId);
  dlAppHelperLocalService.deleteFolder(folder);
}
