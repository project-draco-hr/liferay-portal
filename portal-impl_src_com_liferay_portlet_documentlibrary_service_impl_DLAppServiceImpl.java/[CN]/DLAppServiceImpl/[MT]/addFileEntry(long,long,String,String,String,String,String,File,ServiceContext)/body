{
  if (file == null || !file.exists() || (file.length() == 0)) {
    return addFileEntry(repositoryId,folderId,sourceFileName,mimeType,title,description,changeLog,null,0,serviceContext);
  }
  Repository repository=getRepository(repositoryId);
  final FileEntry fileEntry=repository.addFileEntry(folderId,sourceFileName,mimeType,title,description,changeLog,file,serviceContext);
  TransactionCommitCallbackUtil.registerCallback(new Callable<Void>(){
    public Void call() throws Exception {
      DLProcessorRegistryUtil.trigger(fileEntry);
      return null;
    }
  }
);
  return fileEntry;
}
