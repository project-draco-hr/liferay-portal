{
  Repository fromRepository=getFolderRepository(folderId);
  Repository toRepository=getFolderRepository(parentFolderId,serviceContext.getScopeGroupId());
  if (parentFolderId != DLFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
    Folder toFolder=toRepository.getFolder(parentFolderId);
    if (toFolder.isMountPoint()) {
      toRepository=getRepository(toFolder.getRepositoryId());
    }
  }
  Folder folder=null;
  if (fromRepository.getRepositoryId() == toRepository.getRepositoryId()) {
    folder=fromRepository.moveFolder(folderId,parentFolderId,serviceContext);
  }
 else {
    folder=moveFolders(folderId,parentFolderId,fromRepository,toRepository,serviceContext);
  }
  dlAppHelperLocalService.moveFolder(folder);
  return folder;
}
