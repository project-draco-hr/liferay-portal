{
  ServiceReference<ConfigurationAdmin> serviceReference=context.getServiceReference(ConfigurationAdmin.class);
  ConfigurationAdmin configurationAdmin=context.getService(serviceReference);
  try {
    _cxfConfiguration=configurationAdmin.createFactoryConfiguration("com.liferay.portal.ws.WebServicePublisherConfiguration",null);
    Dictionary<String,Object> properties=new Hashtable<>();
    properties.put("contextPath",_TEST_CONTEXT_PATH);
    _cxfConfiguration.update(properties);
    _soapConfiguration=configurationAdmin.createFactoryConfiguration("com.liferay.portal.soap.extender.SoapExtenderConfiguration",null);
    properties=new Hashtable<>();
    properties.put("contextPaths",new String[]{_TEST_CONTEXT_PATH});
    properties.put("handlers",new String[]{"(soap.address=*)"});
    properties.put("serviceFilters",new String[]{"(jaxws=true)"});
    _soapConfiguration.update(properties);
    _jaxwsApiConfiguration=configurationAdmin.getConfiguration("com.liferay.portal.soap.extender.JaxwsApiConfiguration",null);
    properties=new Hashtable<>();
    properties.put("contextPath",_TEST_CONTEXT_PATH);
    properties.put("timeout",10000);
    _jaxwsApiConfiguration.update(properties);
  }
  finally {
    context.ungetService(serviceReference);
  }
}
