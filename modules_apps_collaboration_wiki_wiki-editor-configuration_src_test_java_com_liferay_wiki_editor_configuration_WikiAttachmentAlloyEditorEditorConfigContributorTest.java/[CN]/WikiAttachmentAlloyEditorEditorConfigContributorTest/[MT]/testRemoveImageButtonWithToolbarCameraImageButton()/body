{
  JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
  jsonObject.put("extraPlugins","plugin1,plugin2,plugin3");
  jsonObject.put("toolbars",getToolbarsWithCameraImageButtonJSONObject());
  WikiAttachmentAlloyEditorEditorConfigContributor wikiAttachmentAlloyEditorEditorConfigContributor=new WikiAttachmentAlloyEditorEditorConfigContributor();
  wikiAttachmentAlloyEditorEditorConfigContributor.removeImageButton(jsonObject);
  Assert.assertEquals(2,jsonObject.length());
  Assert.assertEquals("plugin1,plugin2,plugin3",jsonObject.getString("extraPlugins"));
  JSONObject toolbarsJSONObject=jsonObject.getJSONObject("toolbars");
  JSONObject addJSONObject=toolbarsJSONObject.getJSONObject("add");
  JSONArray buttonsJSONArray=addJSONObject.getJSONArray("buttons");
  Assert.assertEquals(1,buttonsJSONArray.length());
  String button=buttonsJSONArray.getString(0);
  if (button.equals("image")) {
    Assert.fail("Image button was not removed");
  }
  if (!button.equals("camera")) {
    Assert.fail("Camera button should not be removed");
  }
}
