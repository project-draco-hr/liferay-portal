{
  User user=UserUtil.findByPrimaryKey(userId);
  _validate(null,user.getCompanyId(),className,classPK,address,typeId,primary);
  String emailAddressId=Long.toString(CounterServiceUtil.increment(EmailAddress.class.getName()));
  EmailAddress emailAddress=EmailAddressUtil.create(emailAddressId);
  Date now=new Date();
  emailAddress.setCompanyId(user.getCompanyId());
  emailAddress.setUserId(user.getUserId());
  emailAddress.setUserName(user.getFullName());
  emailAddress.setCreateDate(now);
  emailAddress.setModifiedDate(now);
  emailAddress.setClassName(className);
  emailAddress.setClassPK(classPK);
  emailAddress.setAddress(address);
  emailAddress.setTypeId(typeId);
  emailAddress.setPrimary(primary);
  EmailAddressUtil.update(emailAddress);
  return emailAddress;
}
