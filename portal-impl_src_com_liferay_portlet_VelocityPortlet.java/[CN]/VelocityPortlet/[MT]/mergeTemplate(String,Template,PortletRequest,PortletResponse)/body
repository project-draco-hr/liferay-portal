{
  Writer writer=null;
  if (portletResponse instanceof MimeResponse) {
    MimeResponse mimeResponse=(MimeResponse)portletResponse;
    writer=mimeResponse.getWriter();
  }
 else {
    writer=new UnsyncStringWriter();
  }
  template.processTemplate(writer);
}
