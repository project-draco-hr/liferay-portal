{
  Template velocityTemplate=TemplateManagerUtil.getTemplate(TemplateManager.VELOCITY,velocityTemplateId,TemplateContextType.STANDARD);
  Map<String,Object> velocityContext=getVelocityContext(portletRequest,portletResponse);
  for (  Map.Entry<String,Object> entry : velocityContext.entrySet()) {
    velocityTemplate.put(entry.getKey(),entry.getValue());
  }
  mergeTemplate(velocityTemplateId,velocityTemplate,portletRequest,portletResponse);
}
