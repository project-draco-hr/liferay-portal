{
  String resourceName=PortletConstants.getRootPortletId(portletId);
  String primaryKey=PortletPermissionUtil.getPrimaryKey(plid,portletId);
  long roleId=RoleLocalServiceUtil.getRole(companyId,RoleConstants.GUEST).getRoleId();
  ResourcePermissionLocalServiceUtil.setResourcePermissions(companyId,resourceName,ResourceConstants.SCOPE_INDIVIDUAL,primaryKey,roleId,new String[]{ActionKeys.VIEW});
  roleId=RoleLocalServiceUtil.getRole(companyId,RoleConstants.SITE_MEMBER).getRoleId();
  ResourcePermissionLocalServiceUtil.setResourcePermissions(companyId,resourceName,ResourceConstants.SCOPE_INDIVIDUAL,primaryKey,roleId,new String[]{ActionKeys.VIEW});
  roleId=RoleLocalServiceUtil.getRole(companyId,RoleConstants.OWNER).getRoleId();
  ResourcePermissionLocalServiceUtil.setResourcePermissions(companyId,resourceName,ResourceConstants.SCOPE_INDIVIDUAL,primaryKey,roleId,new String[]{ActionKeys.ADD_TO_PAGE});
}
