{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  String referringPortletResource=ParamUtil.getString(actionRequest,"referringPortletResource");
  String languageId=ParamUtil.getString(actionRequest,"languageId");
  PortletURLImpl portletURL=new PortletURLImpl(actionRequest,portletConfig.getPortletName(),themeDisplay.getPlid(),PortletRequest.RENDER_PHASE);
  portletURL.setParameter("struts_action","/journal/edit_article");
  portletURL.setParameter(Constants.CMD,cmd,false);
  portletURL.setParameter("redirect",redirect,false);
  portletURL.setParameter("referringPortletResource",referringPortletResource,false);
  portletURL.setParameter("resourcePrimKey",String.valueOf(article.getResourcePrimKey()),false);
  portletURL.setParameter("groupId",String.valueOf(article.getGroupId()),false);
  portletURL.setParameter("articleId",article.getArticleId(),false);
  portletURL.setParameter("version",String.valueOf(article.getVersion()),false);
  portletURL.setParameter("languageId",languageId,false);
  portletURL.setWindowState(actionRequest.getWindowState());
  return portletURL.toString();
}
