{
  PortletDisplayTemplateHandler portletDisplayTemplateHandler=PortletDisplayTemplateHandlerRegistryUtil.getPortletDisplayTemplateHandler(classNameId);
  if (portletDisplayTemplateHandler == null) {
    return Collections.emptyMap();
  }
  Map<String,TemplateVariableGroup> templateVariableGroups=portletDisplayTemplateHandler.getTemplateVariableGroups(classPK,locale);
  TemplateVariableGroup utilTemplateVariableGroup=templateVariableGroups.get("util");
  utilTemplateVariableGroup.addVariable("http-request",HttpServletRequest.class,"request");
  return templateVariableGroups;
}
