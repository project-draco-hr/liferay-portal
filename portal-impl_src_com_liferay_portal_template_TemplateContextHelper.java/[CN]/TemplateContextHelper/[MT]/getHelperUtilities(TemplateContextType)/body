{
  ClassLoader contextClassLoader=ClassLoaderUtil.getContextClassLoader();
  ClassLoader portalClassLoader=ClassLoaderUtil.getPortalClassLoader();
  if (contextClassLoader == portalClassLoader) {
    return doGetHelperUtilities(contextClassLoader,templateContextType);
  }
  PACLPolicy threadLocalPACLPolicy=PortalSecurityManagerThreadLocal.getPACLPolicy();
  try {
    PACLPolicy contextClassLoaderPACLPolicy=PACLPolicyManager.getPACLPolicy(contextClassLoader);
    PortalSecurityManagerThreadLocal.setPACLPolicy(contextClassLoaderPACLPolicy);
    return doGetHelperUtilities(contextClassLoader,templateContextType);
  }
  finally {
    PortalSecurityManagerThreadLocal.setPACLPolicy(threadLocalPACLPolicy);
  }
}
