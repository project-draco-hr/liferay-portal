{
  ClusterExecutorImpl clusterExecutorImpl=null;
  try {
    clusterExecutorImpl=getClusterExecutorImpl(false,false);
    Field field=ReflectionUtil.getDeclaredField(ClusterExecutorImpl.class,"_clusterEventListeners");
    List<ClusterEventListener> fieldClusterEventListeners=(List<ClusterEventListener>)field.get(clusterExecutorImpl);
    ClusterEventListener clusterEventListener=new MockClusterEventListener();
    fieldClusterEventListeners.add(clusterEventListener);
    Assert.assertEquals(1,fieldClusterEventListeners.size());
    clusterExecutorImpl.addClusterEventListener(new MockClusterEventListener());
    Assert.assertEquals(1,fieldClusterEventListeners.size());
    clusterExecutorImpl.removeClusterEventListener(clusterEventListener);
    Assert.assertEquals(1,fieldClusterEventListeners.size());
    List<ClusterEventListener> clusterEventListeners=clusterExecutorImpl.getClusterEventListeners();
    Assert.assertTrue(clusterEventListeners.isEmpty());
    clusterEventListeners=new ArrayList<ClusterEventListener>();
    clusterEventListeners.add(new MockClusterEventListener());
    clusterExecutorImpl.setClusterEventListeners(clusterEventListeners);
    Assert.assertEquals(1,fieldClusterEventListeners.size());
  }
  finally {
    if (clusterExecutorImpl != null) {
      clusterExecutorImpl.destroy();
    }
  }
}
