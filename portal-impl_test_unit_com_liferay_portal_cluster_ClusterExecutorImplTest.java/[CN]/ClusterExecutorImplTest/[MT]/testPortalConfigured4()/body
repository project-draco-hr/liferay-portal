{
  ClusterExecutorImpl clusterExecutorImpl=null;
  try {
    List<LogRecord> logRecords=JDKLoggerTestUtil.configureJDKLogger(ClusterExecutorImpl.class.getName(),Level.SEVERE);
    clusterExecutorImpl=getClusterExecutorImpl(false,false);
    ClusterNode clusterNode=clusterExecutorImpl.getLocalClusterNode();
    Assert.assertNull(clusterNode.getPortalInetSocketAddress());
    clusterExecutorImpl.portalLocalAddressConfigured(new InetSocketAddress(InetAddress.getByName(SetPortalAddressAdvice.SECURE_PORTAL_ADDRESS),SetPortalAddressAdvice.SECURE_PORTAL_PORT));
    Assert.assertEquals(new InetSocketAddress(InetAddress.getByName(SetPortalAddressAdvice.SECURE_PORTAL_ADDRESS),SetPortalAddressAdvice.SECURE_PORTAL_PORT),clusterNode.getPortalInetSocketAddress());
    clusterExecutorImpl.portalLocalAddressConfigured(new InetSocketAddress(InetAddress.getByName(SetPortalAddressAdvice.SECURE_PORTAL_ADDRESS),SetPortalAddressAdvice.SECURE_PORTAL_PORT));
    Assert.assertEquals(new InetSocketAddress(InetAddress.getByName(SetPortalAddressAdvice.SECURE_PORTAL_ADDRESS),SetPortalAddressAdvice.SECURE_PORTAL_PORT),clusterNode.getPortalInetSocketAddress());
  }
  finally {
    if (clusterExecutorImpl != null) {
      clusterExecutorImpl.destroy();
    }
  }
}
