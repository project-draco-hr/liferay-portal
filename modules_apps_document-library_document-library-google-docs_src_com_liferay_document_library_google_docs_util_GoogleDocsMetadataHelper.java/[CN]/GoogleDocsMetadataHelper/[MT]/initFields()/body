{
  if (_fields == null) {
    _fields=new HashMap<>();
    try {
      DLFileEntryMetadata dlFileEntryMetadata=DLFileEntryMetadataLocalServiceUtil.getFileEntryMetadata(_ddmStructure.getStructureId(),_fileVersion.getFileVersionId());
      Fields fields=StorageEngineUtil.getFields(dlFileEntryMetadata.getDDMStorageId());
      for (      Field field : fields) {
        _fields.put(field.getName(),field);
      }
    }
 catch (    PortalException pe) {
      throw new SystemException("Unable to load DDM fields for file version " + _fileVersion.getFileVersionId(),pe);
    }
  }
}
