{
  if (_fieldsMap == null) {
    _fieldsMap=new HashMap<>();
    if (_dlFileVersion == null) {
      return;
    }
    try {
      _dlFileEntryMetadata=_dlFileEntryMetadataLocalService.getFileEntryMetadata(_ddmStructure.getStructureId(),_dlFileVersion.getFileVersionId());
    }
 catch (    NoSuchFileEntryMetadataException nsfeme) {
      addGoogleDocsDLFileEntryMetadata();
    }
catch (    PortalException pe) {
      throw new SystemException("Unable to load file entry metadatafor file version " + _dlFileVersion.getFileVersionId(),pe);
    }
    try {
      _fields=_storageEngine.getFields(_dlFileEntryMetadata.getDDMStorageId());
      for (      Field field : _fields) {
        _fieldsMap.put(field.getName(),field);
      }
    }
 catch (    PortalException pe) {
      throw new SystemException("Unable to load DDM fields for file version " + _dlFileVersion.getFileVersionId(),pe);
    }
  }
}
