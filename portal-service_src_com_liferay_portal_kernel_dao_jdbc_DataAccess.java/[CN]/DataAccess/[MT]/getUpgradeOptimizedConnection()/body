{
  Connection connection=getConnection();
  Thread currentThread=Thread.currentThread();
  ClassLoader classLoader=currentThread.getContextClassLoader();
  return (Connection)ProxyUtil.newProxyInstance(classLoader,new Class[]{Connection.class},new UpgradeOptimizedConnectionHandler(connection));
}
