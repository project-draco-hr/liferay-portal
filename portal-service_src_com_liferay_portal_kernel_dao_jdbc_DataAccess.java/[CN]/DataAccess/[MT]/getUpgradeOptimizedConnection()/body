{
  Connection connection=getConnection();
  DatabaseMetaData metaData=connection.getMetaData();
  String productName=metaData.getDatabaseProductName();
  UpgradeOptimizedConnectionProvider connectionProvider=UpgradeOptimizedConnectionProviderRegistryUtil.getConnectionProvider(productName);
  if (connectionProvider != null) {
    return connectionProvider.getConnection();
  }
  return connection;
}
