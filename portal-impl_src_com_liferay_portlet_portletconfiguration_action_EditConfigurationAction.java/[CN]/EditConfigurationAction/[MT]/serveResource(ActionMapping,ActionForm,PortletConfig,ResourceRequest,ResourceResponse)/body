{
  Portlet portlet=null;
  try {
    portlet=getPortlet(resourceRequest);
  }
 catch (  PrincipalException pe) {
    return;
  }
  ResourceServingConfigurationAction resourceServingConfigurationAction=(ResourceServingConfigurationAction)getConfigurationAction(portlet);
  if (resourceServingConfigurationAction == null) {
    return;
  }
  HttpServletRequest request=PortalUtil.getHttpServletRequest(resourceRequest);
  PortletPreferences preferences=getPreferences(request,resourceRequest.getPreferences());
  resourceRequest=new ConfigurationResourceRequestWrapper(resourceRequest,preferences);
  resourceServingConfigurationAction.serveResource(portletConfig,resourceRequest,resourceResponse);
}
