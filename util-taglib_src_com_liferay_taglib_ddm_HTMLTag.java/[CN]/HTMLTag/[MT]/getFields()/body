{
  try {
    long ddmStructureId=getClassPK();
    if (getClassNameId() == PortalUtil.getClassNameId(DDMTemplate.class)) {
      DDMTemplate ddmTemplate=DDMTemplateLocalServiceUtil.getTemplate(getClassPK());
      ddmStructureId=ddmTemplate.getClassPK();
    }
    DDMStructure ddmStructure=DDMStructureServiceUtil.getStructure(ddmStructureId);
    if (getDdmFormValues() != null) {
      return DDMFormValuesToFieldsConverterUtil.convert(ddmStructure,getDdmFormValues());
    }
  }
 catch (  PortalException pe) {
    if (_log.isWarnEnabled()) {
      _log.warn(getLogMessage(),pe);
    }
  }
  return null;
}
