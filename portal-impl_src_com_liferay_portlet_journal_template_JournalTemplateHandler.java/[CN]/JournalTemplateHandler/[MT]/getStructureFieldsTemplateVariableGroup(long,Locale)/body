{
  TemplateVariableGroup fieldsTemplateVariableGroup=new TemplateVariableGroup("fields");
  DDMStructure ddmStructure=DDMStructureLocalServiceUtil.getStructure(ddmStructureId);
  List<String> fieldNames=ddmStructure.getRootFieldNames();
  for (  String fieldName : fieldNames) {
    if (fieldName.startsWith(StringPool.UNDERLINE)) {
      continue;
    }
    String label=ddmStructure.getFieldLabel(fieldName,locale);
    String tip=ddmStructure.getFieldTip(fieldName,locale);
    String dataType=ddmStructure.getFieldDataType(fieldName);
    boolean repeatable=ddmStructure.getFieldRepeatable(fieldName);
    fieldsTemplateVariableGroup.addFieldVariable(label,TemplateNode.class,fieldName,tip,dataType,repeatable);
  }
  return fieldsTemplateVariableGroup;
}
