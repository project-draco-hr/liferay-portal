{
  Object newValue=oldValue;
  Long codeId=(Long)_upgradeColumn.getTemp();
  ResourceCode resourceCode=ResourceCodeLocalServiceUtil.getResourceCode(codeId.longValue());
  String scope=resourceCode.getScope();
  if (scope.equals(ResourceImpl.SCOPE_GROUP)) {
    newValue=_groupIdMapper.getNewValue(new Long((String)oldValue));
  }
 else   if (scope.equals(ResourceImpl.SCOPE_INDIVIDUAL)) {
    String primKey=(String)oldValue;
    if (primKey.startsWith(LayoutImpl.PUBLIC) || primKey.startsWith(LayoutImpl.PRIVATE)) {
      String[] keyParts=StringUtil.split(primKey,StringPool.PERIOD);
      Long groupId=(Long)_groupIdMapper.getNewValue(new Long(keyParts[1]));
      keyParts[1]=String.valueOf(groupId);
      newValue=StringUtil.merge(keyParts,StringPool.PERIOD);
    }
 else {
      newValue=_compositeMapper.getNewValue(oldValue);
    }
  }
  return newValue;
}
