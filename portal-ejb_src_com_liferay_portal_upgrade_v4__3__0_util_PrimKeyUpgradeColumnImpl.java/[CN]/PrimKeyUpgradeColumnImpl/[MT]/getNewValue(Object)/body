{
  Object newValue=oldValue;
  if (_upgradeColumn.isScopeGroup()) {
    newValue=_groupIdMapper.getNewValue(new Long((String)oldValue));
  }
 else   if (_upgradeColumn.isScopeIndividual()) {
    String primKey=(String)oldValue;
    if (primKey.startsWith(LayoutImpl.PUBLIC) || primKey.startsWith(LayoutImpl.PRIVATE)) {
      String[] keyParts=StringUtil.split(primKey,StringPool.PERIOD);
      Long groupId=(Long)_groupIdMapper.getNewValue(new Long(keyParts[1]));
      keyParts[1]=String.valueOf(groupId);
      newValue=StringUtil.merge(keyParts,StringPool.PERIOD);
    }
 else {
      newValue=_compositeMapper.getNewValue(oldValue);
    }
  }
  return newValue;
}
