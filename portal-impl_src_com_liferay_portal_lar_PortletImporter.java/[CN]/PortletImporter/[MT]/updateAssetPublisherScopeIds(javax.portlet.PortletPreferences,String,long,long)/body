{
  String[] oldValues=jxPreferences.getValues(key,null);
  if (oldValues == null) {
    return;
  }
  Layout layout=LayoutLocalServiceUtil.getLayout(plid);
  String companyGroupScopeId=AssetPublisher.SCOPE_ID_GROUP_PREFIX + companyGroupId;
  List<String> newValues=new ArrayList<String>(oldValues.length);
  for (int i=0; i < oldValues.length; i++) {
    String oldValue=oldValues[i];
    String newValue=StringUtil.replace(oldValue,"[$COMPANY_GROUP_SCOPE_ID$]",companyGroupScopeId);
    try {
      if (!AssetPublisherUtil.isScopeIdSelectable(PermissionThreadLocal.getPermissionChecker(),newValue,companyGroupId,layout)) {
        continue;
      }
      newValues.add(newValue);
    }
 catch (    NoSuchGroupException nsge) {
      if (_log.isInfoEnabled()) {
        _log.info("Ignoring scope " + newValue + "because the "+ "referenced group was not found");
      }
    }
  }
  jxPreferences.setValues(key,newValues.toArray(new String[newValues.size()]));
}
