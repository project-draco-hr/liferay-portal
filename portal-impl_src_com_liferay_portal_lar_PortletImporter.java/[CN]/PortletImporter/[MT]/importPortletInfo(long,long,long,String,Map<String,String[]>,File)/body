{
  PortletDataContext portletDataContext=null;
  try {
    ExportImportThreadLocal.setPortletImportInProcess(true);
    portletDataContext=getPortletDataContext(userId,plid,groupId,portletId,parameterMap,file);
    ExportImportLifecycleManager.fireExportImportLifecycleEvent(EVENT_PORTLET_IMPORT_STARTED,getProcessFlag(),PortletDataContextFactoryUtil.clonePortletDataContext(portletDataContext));
    doImportPortletInfo(portletDataContext,userId);
    ExportImportThreadLocal.setPortletImportInProcess(false);
    ExportImportLifecycleManager.fireExportImportLifecycleEvent(EVENT_PORTLET_IMPORT_SUCCEEDED,getProcessFlag(),PortletDataContextFactoryUtil.clonePortletDataContext(portletDataContext),userId);
  }
 catch (  Throwable t) {
    ExportImportThreadLocal.setPortletImportInProcess(false);
    ExportImportLifecycleManager.fireExportImportLifecycleEvent(EVENT_PORTLET_IMPORT_FAILED,getProcessFlag(),PortletDataContextFactoryUtil.clonePortletDataContext(portletDataContext),t);
    throw t;
  }
}
