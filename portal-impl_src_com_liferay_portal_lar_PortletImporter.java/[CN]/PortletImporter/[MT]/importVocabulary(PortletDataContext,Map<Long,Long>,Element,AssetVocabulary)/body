{
  long userId=portletDataContext.getUserId(vocabulary.getUserUuid());
  long groupId=portletDataContext.getScopeGroupId();
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setAddCommunityPermissions(true);
  serviceContext.setAddGuestPermissions(true);
  serviceContext.setCreateDate(vocabulary.getCreateDate());
  serviceContext.setModifiedDate(vocabulary.getModifiedDate());
  serviceContext.setScopeGroupId(portletDataContext.getScopeGroupId());
  AssetVocabulary importedVocabulary=null;
  AssetVocabulary existingVocabulary=AssetVocabularyUtil.fetchByG_N(groupId,vocabulary.getName());
  if (existingVocabulary == null) {
    serviceContext.setUuid(vocabulary.getUuid());
    importedVocabulary=AssetVocabularyLocalServiceUtil.addVocabulary(userId,vocabulary.getTitle(),vocabulary.getTitleMap(),vocabulary.getDescriptionMap(),vocabulary.getSettings(),serviceContext);
  }
 else {
    importedVocabulary=AssetVocabularyLocalServiceUtil.updateVocabulary(existingVocabulary.getVocabularyId(),vocabulary.getTitle(),vocabulary.getTitleMap(),vocabulary.getDescriptionMap(),vocabulary.getSettings(),serviceContext);
  }
  vocabularyPKs.put(vocabulary.getVocabularyId(),importedVocabulary.getVocabularyId());
  portletDataContext.importPermissions(AssetVocabulary.class,vocabulary.getVocabularyId(),importedVocabulary.getVocabularyId());
}
