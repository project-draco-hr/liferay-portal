{
  try {
    String xml=context.getZipEntryAsString(context.getSourceRootPath() + "/expando-tables.xml");
    if (xml == null) {
      return;
    }
    Document doc=SAXReaderUtil.read(xml);
    Element root=doc.getRootElement();
    List<Element> expandoTableElements=root.elements("expando-table");
    for (    Element expandoTableElement : expandoTableElements) {
      String className=expandoTableElement.attributeValue("class-name");
      ExpandoTable expandoTable=null;
      try {
        expandoTable=ExpandoTableLocalServiceUtil.getDefaultTable(context.getCompanyId(),className);
      }
 catch (      NoSuchTableException e) {
        expandoTable=ExpandoTableLocalServiceUtil.addDefaultTable(context.getCompanyId(),className);
      }
      List<Element> expandoColumnElements=expandoTableElement.elements("expando-column");
      for (      Element expandoColumnElement : expandoColumnElements) {
        String name=expandoColumnElement.attributeValue("name");
        int type=GetterUtil.getInteger(expandoColumnElement.attributeValue("type"));
        String typeSettings=expandoColumnElement.elementText("type-settings");
        String defaultData=expandoColumnElement.elementText("default-data");
        ExpandoColumn expandoColumn=null;
        try {
          expandoColumn=ExpandoColumnLocalServiceUtil.getColumn(expandoTable.getTableId(),name);
          ExpandoColumnLocalServiceUtil.updateColumn(expandoColumn.getColumnId(),name,type,defaultData);
        }
 catch (        NoSuchColumnException e) {
          expandoColumn=ExpandoColumnLocalServiceUtil.addColumn(expandoTable.getTableId(),name,type,defaultData);
        }
        ExpandoColumnLocalServiceUtil.updateTypeSettings(expandoColumn.getColumnId(),typeSettings);
      }
    }
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
