{
  long ownerId=GetterUtil.getLong(serviceElement.attributeValue("owner-id"));
  int ownerType=GetterUtil.getInteger(serviceElement.attributeValue("owner-type"));
  String serviceName=serviceElement.attributeValue("service-name");
  PortletPreferences portletPreferences=getPortletPreferences(portletDataContext.getCompanyId(),ownerId,ownerType,LayoutConstants.DEFAULT_PLID,serviceName);
  for (  Attribute attribute : serviceElement.attributes()) {
    serviceElement.remove(attribute);
  }
  String preferencesXML=serviceElement.asXML();
  portletPreferences.setPreferences(preferencesXML);
  javax.portlet.PortletPreferences jxPortletPreferences=PortletPreferencesFactoryUtil.fromDefaultXML(preferencesXML);
  PortletPreferencesLocalServiceUtil.updatePreferences(ownerId,ownerType,LayoutConstants.DEFAULT_PLID,serviceName,jxPortletPreferences);
}
