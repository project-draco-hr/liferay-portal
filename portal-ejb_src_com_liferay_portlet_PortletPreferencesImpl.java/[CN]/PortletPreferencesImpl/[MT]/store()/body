{
  if (_pk == null) {
    throw new UnsupportedOperationException();
  }
  try {
    Portlet portlet=PortletLocalServiceUtil.getPortletById(_companyId,_pk.portletId);
    if (!_pk.portletId.equals(PortletKeys.PORTAL)) {
      PreferencesValidator prefsValidator=PortalUtil.getPreferencesValidator(portlet);
      if (prefsValidator != null) {
        prefsValidator.validate(this);
      }
    }
    PortletPreferencesServiceUtil.updatePreferences(_pk,this);
  }
 catch (  PortalException pe) {
    pe.printStackTrace();
    throw new IOException(pe.getMessage());
  }
catch (  SystemException se) {
    throw new IOException(se.getMessage());
  }
}
