{
  if ((_ownerId == null) || (_layoutId == null) || (_portletId == null)) {
    throw new UnsupportedOperationException();
  }
  try {
    Portlet portlet=PortletLocalServiceUtil.getPortletById(_companyId,_portletId);
    if (!_portletId.equals(PortletKeys.LIFERAY_PORTAL)) {
      PreferencesValidator prefsValidator=PortalUtil.getPreferencesValidator(portlet);
      if (prefsValidator != null) {
        prefsValidator.validate(this);
      }
    }
    PortletPreferencesLocalServiceUtil.updatePreferences(_ownerId,_layoutId,_portletId,this);
  }
 catch (  PortalException pe) {
    _log.error(pe);
    throw new IOException(pe.getMessage());
  }
catch (  SystemException se) {
    throw new IOException(se.getMessage());
  }
}
