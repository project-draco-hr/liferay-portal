{
  PortletRequest portletRequest=(PortletRequest)request.getAttribute(JavaConstants.JAVAX_PORTLET_REQUEST);
  if (portletRequest == null) {
    return null;
  }
  PortletResponse portletResponse=(PortletResponse)request.getAttribute(JavaConstants.JAVAX_PORTLET_RESPONSE);
  LiferayPortletResponse liferayPortletResponse=PortalUtil.getLiferayPortletResponse(portletResponse);
  return liferayPortletResponse.createLiferayPortletURL(plid,portletName,lifecycle);
}
