{
  Action<Configuration> action=new Action<Configuration>(){
    @Override public void execute(    Configuration configuration){
      ResolutionStrategy resolutionStrategy=configuration.getResolutionStrategy();
      resolutionStrategy.eachDependency(new Action<DependencyResolveDetails>(){
        @Override public void execute(        DependencyResolveDetails dependencyResolveDetails){
          ModuleVersionSelector moduleVersionSelector=dependencyResolveDetails.getRequested();
          String group=moduleVersionSelector.getGroup();
          String version=moduleVersionSelector.getVersion();
          if (group.equals("com.liferay.portal") && version.equals("default")) {
            LiferayExtension liferayExtension=GradleUtil.getExtension(project,LiferayExtension.class);
            dependencyResolveDetails.useVersion(liferayExtension.getPortalVersion());
          }
        }
      }
);
    }
  }
;
  ConfigurationContainer configurationContainer=project.getConfigurations();
  configurationContainer.all(action);
}
