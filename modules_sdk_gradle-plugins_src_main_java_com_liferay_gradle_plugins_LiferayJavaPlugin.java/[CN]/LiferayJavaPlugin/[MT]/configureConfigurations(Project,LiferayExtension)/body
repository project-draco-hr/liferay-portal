{
  ConfigurationContainer configurationContainer=project.getConfigurations();
  Action<Configuration> action=new Action<Configuration>(){
    @Override public void execute(    Configuration configuration){
      ResolutionStrategy resolutionStrategy=configuration.getResolutionStrategy();
      resolutionStrategy.eachDependency(new Action<DependencyResolveDetails>(){
        @Override public void execute(        DependencyResolveDetails dependencyResolveDetails){
          ModuleVersionSelector moduleVersionSelector=dependencyResolveDetails.getRequested();
          String version=moduleVersionSelector.getVersion();
          if (GradleUtil.isPortal(moduleVersionSelector) && version.equals("default")) {
            dependencyResolveDetails.useVersion(liferayExtension.getPortalVersion());
          }
        }
      }
);
    }
  }
;
  configurationContainer.all(action);
}
