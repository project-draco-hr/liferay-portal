{
  ConfigurationContainer configurationContainer=project.getConfigurations();
  Action<Configuration> action=new Action<Configuration>(){
    @Override public void execute(    Configuration configuration){
      ResolutionStrategy resolutionStrategy=configuration.getResolutionStrategy();
      resolutionStrategy.eachDependency(new Action<DependencyResolveDetails>(){
        @Override public void execute(        DependencyResolveDetails dependencyResolveDetails){
          ModuleVersionSelector moduleVersionSelector=dependencyResolveDetails.getRequested();
          String version=moduleVersionSelector.getVersion();
          if (!version.equals("default")) {
            return;
          }
          String group=moduleVersionSelector.getGroup();
          if (group.equals("com.liferay.portal")) {
            version=liferayExtension.getPortalVersion();
          }
 else {
            version=liferayExtension.getDefaultVersion(moduleVersionSelector);
          }
          dependencyResolveDetails.useVersion(version);
        }
      }
);
    }
  }
;
  configurationContainer.all(action);
}
