{
  org.dom4j.io.SAXReader reader=null;
  try {
    reader=new org.dom4j.io.SAXReader(new SAXParser(),validate);
    reader.setEntityResolver(new EntityResolver());
    reader.setFeature(_FEATURES_VALIDATION,validate);
    reader.setFeature(_FEATURES_VALIDATION_SCHEMA,validate);
    reader.setFeature(_FEATURES_VALIDATION_SCHEMA_FULL_CHECKING,validate);
    reader.setFeature(_FEATURES_DYNAMIC,validate);
  }
 catch (  Exception e) {
    if (_log.isWarnEnabled()) {
      _log.warn("XSD validation is diasabled because " + e.getMessage());
    }
    reader=new org.dom4j.io.SAXReader(false);
    reader.setEntityResolver(new EntityResolver());
  }
  return reader;
}
