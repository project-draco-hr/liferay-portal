{
  ThemeDisplay themeDisplay=(ThemeDisplay)req.getAttribute(WebKeys.THEME_DISPLAY);
  PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
  String portletId=ParamUtil.getString(req,"portletId");
  if (!PortletPermission.contains(permissionChecker,themeDisplay.getPlid(),portletId,ActionKeys.CONFIGURATION)) {
    return null;
  }
  String layoutId=ParamUtil.getString(req,"layoutId");
  String ownerId=ParamUtil.getString(req,"ownerId");
  String languageId=LanguageUtil.getLanguageId(req);
  String title=ParamUtil.getString(req,"title");
  PortletPreferences portletSetup=PortletPreferencesFactory.getPortletSetup(portletId,layoutId,ownerId);
  portletSetup.setValue("portlet-setup-title-" + languageId,title);
  portletSetup.setValue("portlet-setup-use-custom-title","true");
  portletSetup.store();
  return null;
}
