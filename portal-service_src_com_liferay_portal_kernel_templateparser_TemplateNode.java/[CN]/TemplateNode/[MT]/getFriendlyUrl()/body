{
  if (_themeDisplay == null) {
    return getUrl();
  }
  String type=getType();
  if (!type.equals("link_to_layout")) {
    return StringPool.BLANK;
  }
  String layoutType=getLayoutType();
  boolean privateLayout=layoutType.startsWith("private");
  try {
    Layout layout=LayoutLocalServiceUtil.getLayout(_themeDisplay.getScopeGroupId(),privateLayout,getLayoutId());
    return PortalUtil.getLayoutFriendlyURL(layout,_themeDisplay);
  }
 catch (  Exception e) {
    if (_log.isDebugEnabled()) {
      _log.debug("Error finding friendly URL on page " + _themeDisplay.getURLCurrent(),e);
    }
    return getUrl();
  }
}
