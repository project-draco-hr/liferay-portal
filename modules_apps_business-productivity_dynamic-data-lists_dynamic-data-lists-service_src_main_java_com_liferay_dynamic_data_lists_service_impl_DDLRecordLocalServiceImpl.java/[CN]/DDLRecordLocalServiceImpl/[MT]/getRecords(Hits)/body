{
  List<DDLRecord> records=new ArrayList<>();
  for (  Document document : hits.toList()) {
    long recordId=GetterUtil.getLong(document.get(com.liferay.portal.kernel.search.Field.ENTRY_CLASS_PK));
    try {
      DDLRecord record=getRecord(recordId);
      records.add(record);
    }
 catch (    NoSuchRecordException nsre) {
      if (_log.isWarnEnabled()) {
        _log.warn("DDL record index is stale and contains record " + recordId,nsre);
      }
      long companyId=GetterUtil.getLong(document.get(com.liferay.portal.kernel.search.Field.COMPANY_ID));
      Indexer<DDLRecord> indexer=getDDLRecordIndexer();
      indexer.delete(companyId,document.getUID());
    }
  }
  return records;
}
