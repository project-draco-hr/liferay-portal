{
  ClusterRequest clusterRequest=ClusterRequest.createUnicastRequest(new MethodHandler(_createTokenMethodKey,_TRANSIENT_TOKEN_KEEP_ALIVE_TIME),bootupAddress);
  FutureClusterResponses futureClusterResponses=ClusterExecutorUtil.execute(clusterRequest);
  BlockingQueue<ClusterNodeResponse> clusterNodeResponses=futureClusterResponses.getPartialResults();
  try {
    ClusterNodeResponse clusterNodeResponse=clusterNodeResponses.poll(_CLUSTER_LINK_NODE_BOOTUP_RESPONSE_TIMEOUT,TimeUnit.MILLISECONDS);
    ClusterNode clusterNode=clusterNodeResponse.getClusterNode();
    InetSocketAddress inetSocketAddress=clusterNode.getPortalInetSocketAddress();
    if (inetSocketAddress == null) {
      StringBundler sb=new StringBundler(6);
      sb.append("Invalid cluster node InetSocketAddress ");
      sb.append(". The address is set by the first request or ");
      sb.append("configured in portal.properties by the properties ");
      sb.append("\"portal.instance.http.address\" and ");
      sb.append("\"portal.instance.https.address\".");
      throw new Exception(sb.toString());
    }
    InetAddress inetAddress=inetSocketAddress.getAddress();
    String fileName=PortalUtil.getPathContext();
    if (!fileName.endsWith(StringPool.SLASH)) {
      fileName=fileName.concat(StringPool.SLASH);
    }
    fileName=fileName.concat("lucene/dump");
    URL url=new URL(_protocol,inetAddress.getHostAddress(),inetSocketAddress.getPort(),fileName);
    String transientToken=(String)clusterNodeResponse.getResult();
    return new ObjectValuePair<String,URL>(transientToken,url);
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
