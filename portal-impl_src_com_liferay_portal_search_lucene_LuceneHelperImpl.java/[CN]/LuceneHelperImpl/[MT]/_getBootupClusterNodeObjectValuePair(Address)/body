{
  ClusterRequest clusterRequest=ClusterRequest.createUnicastRequest(new MethodHandler(_createTokenMethodKey,_CLUSTER_LINK_NODE_BOOTUP_RESPONSE_TIMEOUT),bootupAddress);
  FutureClusterResponses futureClusterResponses=ClusterExecutorUtil.execute(clusterRequest);
  BlockingQueue<ClusterNodeResponse> clusterNodeResponses=futureClusterResponses.getPartialResults();
  try {
    ClusterNodeResponse clusterNodeResponse=clusterNodeResponses.poll(_CLUSTER_LINK_NODE_BOOTUP_RESPONSE_TIMEOUT,TimeUnit.MILLISECONDS);
    ClusterNode clusterNode=clusterNodeResponse.getClusterNode();
    InetSocketAddress inetSocketAddress=clusterNode.getPortalInetSocketAddress();
    if (inetSocketAddress == null) {
      StringBundler sb=new StringBundler(6);
      sb.append("Invalid cluster node InetSocketAddress ");
      sb.append(". The InetSocketAddress is set by the first ");
      sb.append("request or configured in portal.properties by the");
      sb.append("properties ");
      sb.append("\"portal.instance.http.inet.socket.address\" and ");
      sb.append("\"portal.instance.https.inet.socket.address\".");
      throw new Exception(sb.toString());
    }
    InetAddress inetAddress=inetSocketAddress.getAddress();
    String fileName=PortalUtil.getPathContext();
    if (!fileName.endsWith(StringPool.SLASH)) {
      fileName=fileName.concat(StringPool.SLASH);
    }
    fileName=fileName.concat("lucene/dump");
    URL url=new URL(clusterNode.getPortalProtocol(),inetAddress.getHostAddress(),inetSocketAddress.getPort(),fileName);
    String transientToken=(String)clusterNodeResponse.getResult();
    return new ObjectValuePair<>(transientToken,url);
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
