{
  if (query instanceof TermQuery) {
    Set<Term> terms=new HashSet<Term>();
    query.extractTerms(terms);
    for (    Term term : terms) {
      String termValue=term.text();
      if (like) {
        term=term.createTerm(StringPool.STAR.concat(termValue).concat(StringPool.STAR));
        query=new WildcardQuery(term);
      }
 else {
        query=new TermQuery(term);
      }
      boolean included=false;
      for (      BooleanClause clause : booleanQuery.getClauses()) {
        if (clause.getQuery().equals(query)) {
          included=true;
        }
      }
      if (!included) {
        booleanQuery.add(query,occur);
      }
    }
  }
 else   if (query instanceof BooleanQuery) {
    BooleanQuery curQuery=(BooleanQuery)query;
    for (    BooleanClause clause : curQuery.getClauses()) {
      _includeIfUnique(booleanQuery,clause.getQuery(),clause.getOccur(),like);
    }
  }
 else {
    boolean included=false;
    for (    BooleanClause clause : booleanQuery.getClauses()) {
      if (clause.getQuery().equals(query)) {
        included=true;
      }
    }
    if (!included) {
      booleanQuery.add(query,occur);
    }
  }
}
