{
  boolean indexOnStartup=GetterUtil.getBoolean(PropsUtil.get(PropsKeys.INDEX_ON_STARTUP));
  if (indexOnStartup) {
    if (_log.isInfoEnabled()) {
      _log.info("Indexing Lucene on startup");
    }
    LuceneIndexer luceneIndexer=new LuceneIndexer(companyId);
    if (PropsValues.INDEX_WITH_THREAD) {
      _luceneIndexThreadPoolExecutor=PortalExecutorManagerUtil.getPortalExecutor(LuceneHelperImpl.class.getName());
      _luceneIndexThreadPoolExecutor.execute(luceneIndexer);
    }
 else {
      luceneIndexer.reindex();
    }
  }
  if (PropsValues.LUCENE_STORE_JDBC_AUTO_CLEAN_UP_ENABLED) {
    SchedulerEntry schedulerEntry=new SchedulerEntryImpl();
    schedulerEntry.setEventListenerClass(CleanUpMessageListener.class.getName());
    schedulerEntry.setTimeUnit(TimeUnit.MINUTE);
    schedulerEntry.setTriggerType(TriggerType.SIMPLE);
    schedulerEntry.setTriggerValue(PropsValues.LUCENE_STORE_JDBC_AUTO_CLEAN_UP_INTERVAL);
    try {
      SchedulerEngineUtil.schedule(schedulerEntry,StorageType.MEMORY,PortalClassLoaderUtil.getClassLoader(),0);
    }
 catch (    Exception e) {
      _log.error(e,e);
    }
  }
}
