{
  IndexAccessor indexAccessor=_indexAccessors.get(companyId);
  if (indexAccessor != null) {
    return indexAccessor;
  }
synchronized (this) {
    indexAccessor=_indexAccessors.get(companyId);
    if (indexAccessor == null) {
      indexAccessor=new IndexAccessorImpl(companyId);
      if (isLoadIndexFromClusterEnabled()) {
        Boolean clusterForward=(Boolean)MessageValuesThreadLocal.getValue(ClusterLinkUtil.CLUSTER_FORWARD_MESSAGE);
        if (Boolean.TRUE.equals(clusterForward)) {
          if (_log.isInfoEnabled()) {
            _log.info("Skip Luncene index files cluster loading, " + "as this is a manual reindex request.");
          }
        }
 else {
          indexAccessor=new SynchronizedIndexAccessorImpl(indexAccessor);
          try {
            _loadIndexFromCluster(indexAccessor,indexAccessor.getLastGeneration());
          }
 catch (          Exception e) {
            _log.error("Unable to load index for company " + indexAccessor.getCompanyId(),e);
          }
        }
      }
      _indexAccessors.put(companyId,indexAccessor);
    }
  }
  return indexAccessor;
}
