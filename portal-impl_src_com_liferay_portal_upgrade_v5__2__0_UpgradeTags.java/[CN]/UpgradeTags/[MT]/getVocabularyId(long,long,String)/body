{
  vocabularyName=vocabularyName.trim();
  if (Validator.isNull(vocabularyName) || ArrayUtil.contains(_defaultCategoryPropertyValues,vocabularyName)) {
    vocabularyName=PropsValues.TAGS_VOCABULARY_DEFAULT;
  }
  String cacheKey=companyId + StringPool.UNDERLINE + vocabularyName;
  TagsVocabulary vocabulary=_cache.get(cacheKey);
  if (vocabulary == null) {
    try {
      vocabulary=TagsVocabularyLocalServiceUtil.getVocabulary(companyId,vocabularyName);
    }
 catch (    NoSuchVocabularyException nsve) {
      vocabulary=TagsVocabularyLocalServiceUtil.addVocabulary(userId,vocabularyName,true);
    }
    _cache.put(cacheKey,vocabulary);
  }
  return vocabulary.getVocabularyId();
}
