{
  if (context == null) {
    throw new NullPointerException("context");
  }
  if (request == null) {
    throw new NullPointerException("request");
  }
  if (response == null) {
    throw new NullPointerException("response");
  }
  if (lifecycle == null) {
    throw new NullPointerException("lifecycle");
  }
  if (context instanceof ServletContext) {
    return new ServletFacesContextImpl((ServletContext)context,(ServletRequest)request,(ServletResponse)response);
  }
  if (context instanceof PortletContext) {
    return new MyFacesContextImpl((PortletContext)context,(PortletRequest)request,(PortletResponse)response);
  }
  throw new FacesException("Unsupported context type " + getClass().getName());
}
