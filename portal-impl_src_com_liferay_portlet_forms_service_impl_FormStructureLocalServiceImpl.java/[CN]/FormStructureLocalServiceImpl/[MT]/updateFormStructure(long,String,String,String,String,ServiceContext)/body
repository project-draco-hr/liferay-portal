{
  try {
    xsd=FormsXMLUtil.formatXML(xsd);
  }
 catch (  Exception e) {
    throw new FormStructureXsdException();
  }
  FormStructure formStructure=formStructurePersistence.findByG_F(groupId,formStructureId);
  validate(groupId,name,xsd);
  formStructure.setModifiedDate(serviceContext.getModifiedDate(null));
  formStructure.setName(name);
  formStructure.setDescription(description);
  formStructure.setXsd(xsd);
  formStructurePersistence.update(formStructure,false);
  ExpandoBridge expandoBridge=formStructure.getExpandoBridge();
  expandoBridge.setAttributes(serviceContext);
  return formStructure;
}
