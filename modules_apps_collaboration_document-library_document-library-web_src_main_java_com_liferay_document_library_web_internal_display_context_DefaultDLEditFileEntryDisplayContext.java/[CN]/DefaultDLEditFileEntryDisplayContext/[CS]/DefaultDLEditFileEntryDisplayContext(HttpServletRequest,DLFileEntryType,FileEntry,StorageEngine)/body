{
  try {
    _dlRequestHelper=new DLRequestHelper(request);
    _fileEntry=fileEntry;
    _storageEngine=storageEngine;
    ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
    _fileEntryDisplayContextHelper=new FileEntryDisplayContextHelper(themeDisplay.getPermissionChecker(),_fileEntry);
    if ((dlFileEntryType == null) && (fileEntry != null)) {
      _dlFileEntryType=_fileEntryDisplayContextHelper.getDLFileEntryType();
    }
 else {
      _dlFileEntryType=dlFileEntryType;
    }
    if (fileEntry != null) {
      _fileVersion=fileEntry.getFileVersion();
    }
 else {
      _fileVersion=null;
    }
    _fileVersionDisplayContextHelper=new FileVersionDisplayContextHelper(_fileVersion);
    _showSelectFolder=ParamUtil.getBoolean(request,"showSelectFolder");
  }
 catch (  PortalException pe) {
    throw new SystemException("Unable to build DefaultDLEditFileEntryDisplayContext for " + fileEntry,pe);
  }
}
