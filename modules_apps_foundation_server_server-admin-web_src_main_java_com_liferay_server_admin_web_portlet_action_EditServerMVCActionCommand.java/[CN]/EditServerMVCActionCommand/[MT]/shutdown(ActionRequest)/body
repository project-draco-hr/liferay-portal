{
  if (ShutdownUtil.isInProcess()) {
    ShutdownUtil.cancel();
  }
 else {
    long minutes=ParamUtil.getInteger(actionRequest,"minutes") * Time.MINUTE;
    if (minutes <= 0) {
      SessionErrors.add(actionRequest,"shutdownMinutes");
    }
 else {
      String message=ParamUtil.getString(actionRequest,"message");
      ShutdownUtil.shutdown(minutes,message);
    }
  }
}
