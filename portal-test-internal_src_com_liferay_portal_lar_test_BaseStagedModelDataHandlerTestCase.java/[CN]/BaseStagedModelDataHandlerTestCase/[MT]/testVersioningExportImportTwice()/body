{
  if (!isVersionableStagedModel()) {
    return;
  }
  initExport();
  Map<String,List<StagedModel>> dependentStagedModelsMap=addDependentStagedModelsMap(stagingGroup);
  StagedModel stagedModel=addStagedModel(stagingGroup,dependentStagedModelsMap);
  stagedModel=addVersion(stagedModel);
  StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,stagedModel);
  validateExport(portletDataContext,stagedModel,dependentStagedModelsMap);
  initImport();
  StagedModel exportedStagedModel=readExportedStagedModel(stagedModel);
  Assert.assertNotNull(exportedStagedModel);
  StagedModelDataHandlerUtil.importStagedModel(portletDataContext,exportedStagedModel);
  StagedModel importedStagedModel=getStagedModel(stagedModel.getUuid(),liveGroup);
  Assert.assertNotNull(importedStagedModel);
  validateImportedStagedModel(stagedModel,importedStagedModel);
  initExport();
  StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,stagedModel);
  validateExport(portletDataContext,stagedModel,dependentStagedModelsMap);
  initImport();
  exportedStagedModel=readExportedStagedModel(stagedModel);
  Assert.assertNotNull(exportedStagedModel);
  StagedModelDataHandlerUtil.importStagedModel(portletDataContext,exportedStagedModel);
  importedStagedModel=getStagedModel(stagedModel.getUuid(),liveGroup);
  Assert.assertNotNull(importedStagedModel);
  validateImportedStagedModel(stagedModel,importedStagedModel);
}
