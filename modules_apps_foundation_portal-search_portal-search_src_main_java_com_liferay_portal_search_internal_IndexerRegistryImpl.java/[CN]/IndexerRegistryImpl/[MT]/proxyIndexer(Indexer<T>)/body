{
  if (indexer == null) {
    return null;
  }
  IndexerRequestBuffer indexerRequestBuffer=IndexerRequestBuffer.get();
  if ((indexerRequestBuffer == null) || !_indexerRegistryConfiguration.buffered()) {
    return indexer;
  }
  Indexer<?> proxiedIndexer=_proxiedIndexers.get(indexer.getClassName());
  if (proxiedIndexer == null) {
    List<?> interfaces=ClassUtils.getAllInterfaces(indexer.getClass());
    BufferedIndexerInvocationHandler bufferedIndexerInvocationHandler=new BufferedIndexerInvocationHandler(indexer,_indexWriterHelper,_indexerRegistryConfiguration);
    if (_indexerRequestBufferOverflowHandler == null) {
      bufferedIndexerInvocationHandler.setIndexerRequestBufferOverflowHandler(_defaultIndexerRequestBufferOverflowHandler);
    }
 else {
      bufferedIndexerInvocationHandler.setIndexerRequestBufferOverflowHandler(_indexerRequestBufferOverflowHandler);
    }
    _bufferedInvocationHandlers.put(indexer.getClassName(),bufferedIndexerInvocationHandler);
    proxiedIndexer=(Indexer<?>)ProxyUtil.newProxyInstance(PortalClassLoaderUtil.getClassLoader(),interfaces.toArray(new Class[interfaces.size()]),bufferedIndexerInvocationHandler);
    _proxiedIndexers.put(indexer.getClassName(),proxiedIndexer);
  }
  return (Indexer<T>)proxiedIndexer;
}
