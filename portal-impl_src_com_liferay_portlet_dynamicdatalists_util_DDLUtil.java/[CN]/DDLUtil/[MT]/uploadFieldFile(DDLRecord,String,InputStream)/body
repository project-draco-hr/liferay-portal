{
  long companyId=record.getCompanyId();
  long repositoryId=CompanyConstants.SYSTEM;
  DDLRecordVersion recordVersion=record.getLatestRecordVersion();
  String dirName=getRecordFileUploadPath(record) + "/" + recordVersion.getVersion();
  try {
    DLStoreUtil.addDirectory(companyId,repositoryId,dirName);
  }
 catch (  DuplicateDirectoryException dde) {
  }
  String fileName=dirName + "/" + fieldName;
  try {
    DLStoreUtil.addFile(companyId,repositoryId,fileName,inputStream);
  }
 catch (  DuplicateFileException dfe) {
  }
  return fileName;
}
