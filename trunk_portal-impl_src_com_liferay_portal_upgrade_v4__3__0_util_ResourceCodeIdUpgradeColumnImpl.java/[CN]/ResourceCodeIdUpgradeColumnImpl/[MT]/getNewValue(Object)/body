{
  _scope=0;
  Long companyId=(Long)_companyIdColumn.getOldValue();
  String name=(String)_nameColumn.getOldValue();
  String scope=(String)_scopeColumn.getOldValue();
  if (scope.equals("company")) {
    _scope=ResourceConstants.SCOPE_COMPANY;
  }
 else   if (scope.equals("group")) {
    _scope=ResourceConstants.SCOPE_GROUP;
  }
 else   if (scope.equals("groupTemplate")) {
    _scope=ResourceConstants.SCOPE_GROUP_TEMPLATE;
  }
 else   if (scope.equals("individual")) {
    _scope=ResourceConstants.SCOPE_INDIVIDUAL;
  }
 else {
    throw new UpgradeException("Scope " + _scope + " is invalid");
  }
  ResourceCode resourceCode=ResourceCodeLocalServiceUtil.getResourceCode(companyId.longValue(),name,_scope);
  return new Long(resourceCode.getCodeId());
}
