{
  InputStream is=null;
  int pos=source.indexOf(SERVLET_SEPARATOR);
  if (pos != -1) {
    String servletContextName=source.substring(0,pos);
    if (Validator.isNull(servletContextName)) {
      servletContextName=PortalUtil.getPathContext();
    }
    ServletContext servletContext=ServletContextPool.get(servletContextName);
    if (servletContext != null) {
      String name=source.substring(pos + SERVLET_SEPARATOR.length());
      if (_log.isDebugEnabled()) {
        _log.debug(name + " is associated with the servlet context " + servletContextName+ " "+ servletContext);
      }
      try {
        URL url=servletContext.getResource(name);
        if (url == null) {
          if (name.endsWith("/init_custom.vm")) {
            if (_log.isWarnEnabled()) {
              _log.warn("The template " + name + " should be created");
            }
            is=new UnsyncByteArrayInputStream(new byte[0]);
          }
          return null;
        }
 else {
          is=url.openStream();
        }
      }
 catch (      Exception e) {
        _log.error(e,e);
      }
    }
 else {
      _log.error(source + " is not valid because " + servletContextName+ " does not map to a servlet context");
    }
  }
  return is;
}
