{
  if (!isCommentsEnabled(actionRequest)) {
    throw new TrackbackValidationException("Comments have been disabled for this blog entry.");
  }
  if (Validator.isNull(url)) {
    throw new TrackbackValidationException("Trackback requires a valid permanent URL.");
  }
  String trackbackIp=HttpUtil.getIpAddress(url);
  if (!remoteIp.equals(trackbackIp)) {
    throw new TrackbackValidationException("Remote IP " + remoteIp + " does not match trackback URL's IP "+ trackbackIp+ ".");
  }
}
