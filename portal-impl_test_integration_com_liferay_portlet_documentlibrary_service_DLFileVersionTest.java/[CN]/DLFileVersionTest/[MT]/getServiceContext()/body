{
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(group.getGroupId());
  serviceContext.setAttribute("fileEntryTypeId",_contractDLFileEntryTypeId);
  Map<String,Serializable> expandoBridgeAttributes=serviceContext.getExpandoBridgeAttributes();
  expandoBridgeAttributes.put(_EXPANDO_ATTRIBUTE_NAME,StringPool.BLANK);
  serviceContext.setExpandoBridgeAttributes(expandoBridgeAttributes);
  DLFileEntryType fileEntryType=DLFileEntryTypeLocalServiceUtil.getFileEntryType(_contractDLFileEntryTypeId);
  List<DDMStructure> ddmStructures=fileEntryType.getDDMStructures();
  for (  DDMStructure ddmStructure : ddmStructures) {
    Fields fields=new Fields();
    Set<String> fieldNames=ddmStructure.getFieldNames();
    for (    String fieldName : fieldNames) {
      if (ddmStructure.isFieldPrivate(fieldName)) {
        continue;
      }
      Field field=createField(ddmStructure,fieldName);
      fields.put(field);
    }
    Field fieldsDisplayField=createFieldsDisplayField(ddmStructure,fieldNames);
    fields.put(fieldsDisplayField);
    serviceContext.setAttribute(Fields.class.getName() + ddmStructure.getStructureId(),fields);
  }
  return serviceContext;
}
