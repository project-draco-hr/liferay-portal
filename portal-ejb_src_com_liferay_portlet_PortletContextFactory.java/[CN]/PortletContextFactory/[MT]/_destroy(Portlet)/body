{
  String poolId=PortletContextFactory.class.getName();
  if (!portlet.isWARFile()) {
    StringBuffer sb=new StringBuffer();
    sb.append(poolId);
    sb.append(StringPool.PERIOD);
    sb.append(portlet.getCompanyId());
    poolId=sb.toString();
  }
  Map map=(Map)_pool.get(poolId);
  if (map == null) {
    return;
  }
  Map portletContexts=(Map)map.remove(portlet.getRootPortletId());
  if (portletContexts == null) {
    return;
  }
  Iterator itr=portletContexts.entrySet().iterator();
  if (itr.hasNext()) {
    Map.Entry entry=(Map.Entry)itr.next();
    PortletContext portletContext=(PortletContext)entry.getValue();
    VelocityContextPool.remove(portletContext.getPortletContextName());
  }
}
