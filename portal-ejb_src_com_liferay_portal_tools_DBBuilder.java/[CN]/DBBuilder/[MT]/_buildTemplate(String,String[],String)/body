{
  File file=new File("../sql/" + fileName + ".sql");
  String template=FileUtil.read(file);
  if (fileName.equals("portal") || fileName.equals("update-3.6.0-4.0.0")) {
    BufferedReader br=new BufferedReader(new StringReader(template));
    StringBuffer sb=new StringBuffer();
    String line=null;
    while ((line=br.readLine()) != null) {
      if (line.startsWith("@include ")) {
        int pos=line.indexOf(" ");
        String includeFileName=line.substring(pos + 1,line.length());
        String include=FileUtil.read("../sql/" + includeFileName);
        if (includeFileName.endsWith(".vm")) {
          try {
            include=_evaluateVM(include);
          }
 catch (          Exception e) {
            e.printStackTrace();
          }
        }
        include=_convertTimestamp(include,server);
        include=StringUtil.replace(include,_TEMPLATE,replace);
        sb.append(include);
        sb.append("\n\n");
      }
 else {
        sb.append(line);
        sb.append("\n");
      }
    }
    br.close();
    template=sb.toString();
  }
  template=_convertTimestamp(template,server);
  template=StringUtil.replace(template,_TEMPLATE,replace);
  if (fileName.equals("indexes") && server.equals("sybase")) {
    template=_removeBooleanIndexes(template);
  }
  return template;
}
