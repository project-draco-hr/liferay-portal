{
  _ctx=ctx;
  _req=req;
  _res=res;
  _themeDisplay=(ThemeDisplay)_req.getAttribute(WebKeys.THEME_DISPLAY);
  _portletsMap=new HashMap();
  _parallelRenderEnable=GetterUtil.getBoolean(PropsUtil.get(PropsUtil.LAYOUT_PARALLEL_RENDER_ENABLE));
  if (_parallelRenderEnable) {
    Boolean portletParallelRender=(Boolean)req.getAttribute(WebKeys.PORTLET_PARALLEL_RENDER);
    if ((portletParallelRender != null) && (portletParallelRender.booleanValue() == false)) {
      _parallelRenderEnable=false;
    }
  }
}
