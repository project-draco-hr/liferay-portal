{
  List nodes=new ArrayList();
  Iterator itr1=parent.elementIterator("dynamic-element");
  while (itr1.hasNext()) {
    Element element=(Element)itr1.next();
    Element content=element.element("dynamic-content");
    if (content == null) {
      throw new TransformException("Element missing \"dynamic-content\"");
    }
    String name=element.attributeValue("name","");
    if (name.length() == 0) {
      throw new TransformException("Element missing \"name\" attribute");
    }
    String type=element.attributeValue("type","");
    TemplateNode node=new TemplateNode(name,CDATAUtil.strip(content.getText()),type);
    if (element.element("dynamic-element") != null) {
      node.appendChildren(_extractDynamicContents(element));
    }
 else     if (content.element("option") != null) {
      Iterator itr2=content.elementIterator("option");
      while (itr2.hasNext()) {
        Element option=(Element)itr2.next();
        node.appendOption(CDATAUtil.strip(option.getText()));
      }
    }
    nodes.add(node);
  }
  return nodes;
}
