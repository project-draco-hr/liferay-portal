{
  ResultSetRow[] rows=null;
  try {
    AuthenticationUtils.startSession(alfrescoWebClientURL,userId,password);
    RepositoryServiceSoapBindingStub repositoryService=WebServiceFactory.getRepositoryService(alfrescoWebClientURL);
    Reference reference=null;
    if (Validator.isNull(uuid)) {
      reference=new Reference(_SPACES_STORE,null,_COMPANY_HOME_PATH);
    }
 else {
      reference=new Reference(_SPACES_STORE,uuid,null);
    }
    QueryResult result=repositoryService.queryChildren(reference);
    rows=result.getResultSet().getRows();
  }
 catch (  Throwable e) {
    throw new PortalException(e);
  }
 finally {
    try {
      AuthenticationUtils.endSession(alfrescoWebClientURL);
    }
 catch (    Throwable e) {
      throw new PortalException(e);
    }
  }
  return rows;
}
