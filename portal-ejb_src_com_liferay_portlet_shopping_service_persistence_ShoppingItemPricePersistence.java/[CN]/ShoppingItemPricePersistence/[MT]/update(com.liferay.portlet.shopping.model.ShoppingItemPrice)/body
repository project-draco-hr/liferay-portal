{
  Session session=null;
  try {
    if (shoppingItemPrice.isNew() || shoppingItemPrice.isModified()) {
      session=openSession();
      if (shoppingItemPrice.isNew()) {
        ShoppingItemPriceHBM shoppingItemPriceHBM=new ShoppingItemPriceHBM(shoppingItemPrice.getItemPriceId(),shoppingItemPrice.getItemId(),shoppingItemPrice.getMinQuantity(),shoppingItemPrice.getMaxQuantity(),shoppingItemPrice.getPrice(),shoppingItemPrice.getDiscount(),shoppingItemPrice.getTaxable(),shoppingItemPrice.getShipping(),shoppingItemPrice.getUseShippingFormula(),shoppingItemPrice.getStatus());
        session.save(shoppingItemPriceHBM);
        session.flush();
      }
 else {
        ShoppingItemPriceHBM shoppingItemPriceHBM=(ShoppingItemPriceHBM)session.get(ShoppingItemPriceHBM.class,shoppingItemPrice.getPrimaryKey());
        if (shoppingItemPriceHBM != null) {
          shoppingItemPriceHBM.setItemId(shoppingItemPrice.getItemId());
          shoppingItemPriceHBM.setMinQuantity(shoppingItemPrice.getMinQuantity());
          shoppingItemPriceHBM.setMaxQuantity(shoppingItemPrice.getMaxQuantity());
          shoppingItemPriceHBM.setPrice(shoppingItemPrice.getPrice());
          shoppingItemPriceHBM.setDiscount(shoppingItemPrice.getDiscount());
          shoppingItemPriceHBM.setTaxable(shoppingItemPrice.getTaxable());
          shoppingItemPriceHBM.setShipping(shoppingItemPrice.getShipping());
          shoppingItemPriceHBM.setUseShippingFormula(shoppingItemPrice.getUseShippingFormula());
          shoppingItemPriceHBM.setStatus(shoppingItemPrice.getStatus());
          session.flush();
        }
 else {
          shoppingItemPriceHBM=new ShoppingItemPriceHBM(shoppingItemPrice.getItemPriceId(),shoppingItemPrice.getItemId(),shoppingItemPrice.getMinQuantity(),shoppingItemPrice.getMaxQuantity(),shoppingItemPrice.getPrice(),shoppingItemPrice.getDiscount(),shoppingItemPrice.getTaxable(),shoppingItemPrice.getShipping(),shoppingItemPrice.getUseShippingFormula(),shoppingItemPrice.getStatus());
          session.save(shoppingItemPriceHBM);
          session.flush();
        }
      }
      shoppingItemPrice.setNew(false);
      shoppingItemPrice.setModified(false);
      shoppingItemPrice.protect();
      ShoppingItemPricePool.update(shoppingItemPrice.getPrimaryKey(),shoppingItemPrice);
    }
    return shoppingItemPrice;
  }
 catch (  HibernateException he) {
    throw new SystemException(he);
  }
 finally {
    closeSession(session);
  }
}
