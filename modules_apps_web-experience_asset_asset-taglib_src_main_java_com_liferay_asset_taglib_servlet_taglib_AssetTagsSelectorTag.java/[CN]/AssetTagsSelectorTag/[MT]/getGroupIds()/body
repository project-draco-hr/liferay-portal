{
  if (_groupIds != null) {
    return _groupIds;
  }
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  long[] groupIds=null;
  Group group=themeDisplay.getScopeGroup();
  if (group.isLayout()) {
    groupIds=new long[]{group.getParentGroupId()};
  }
 else {
    groupIds=new long[]{group.getGroupId()};
  }
  if (group.getParentGroupId() != themeDisplay.getCompanyGroupId()) {
    groupIds=ArrayUtil.append(groupIds,themeDisplay.getCompanyGroupId());
  }
  return groupIds;
}
