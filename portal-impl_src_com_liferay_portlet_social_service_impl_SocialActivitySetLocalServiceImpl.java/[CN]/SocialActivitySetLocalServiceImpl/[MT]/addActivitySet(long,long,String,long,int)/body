{
  User user=userPersistence.findByPrimaryKey(userId);
  SocialActivity activity=socialActivityPersistence.findByPrimaryKey(activityId);
  long activitySetId=counterLocalService.increment();
  SocialActivitySet activitySet=socialActivitySetPersistence.create(activitySetId);
  activitySet.setGroupId(activity.getGroupId());
  activitySet.setCompanyId(user.getCompanyId());
  activitySet.setUserId(userId);
  activitySet.setCreateDate(activity.getCreateDate());
  activitySet.setModifiedDate(activity.getCreateDate());
  activitySet.setClassName(className);
  activitySet.setClassPK(classPK);
  activitySet.setType(type);
  activitySet.setActivityCount(1);
  socialActivitySetPersistence.update(activitySet);
  activity.setActivitySetId(activitySetId);
  socialActivityPersistence.update(activity);
  return activitySet;
}
