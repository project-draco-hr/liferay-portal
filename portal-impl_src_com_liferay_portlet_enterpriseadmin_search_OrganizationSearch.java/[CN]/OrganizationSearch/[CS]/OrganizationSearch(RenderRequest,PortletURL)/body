{
  super(req,new OrganizationDisplayTerms(req),new OrganizationSearchTerms(req),DEFAULT_CUR_PARAM,DEFAULT_DELTA,iteratorURL,headerNames,EMPTY_RESULTS_MESSAGE);
  OrganizationDisplayTerms displayTerms=(OrganizationDisplayTerms)getDisplayTerms();
  iteratorURL.setParameter(OrganizationDisplayTerms.NAME,displayTerms.getName());
  iteratorURL.setParameter(OrganizationDisplayTerms.STREET,displayTerms.getStreet());
  iteratorURL.setParameter(OrganizationDisplayTerms.CITY,displayTerms.getCity());
  iteratorURL.setParameter(OrganizationDisplayTerms.ZIP,displayTerms.getZip());
  iteratorURL.setParameter(OrganizationDisplayTerms.COUNTRY_ID,String.valueOf(displayTerms.getCountryId()));
  iteratorURL.setParameter(OrganizationDisplayTerms.REGION_ID,String.valueOf(displayTerms.getRegionId()));
  iteratorURL.setParameter(OrganizationDisplayTerms.PARENT_ORGANIZATION_ID,String.valueOf(displayTerms.getParentOrganizationId()));
  try {
    PortalPreferences prefs=PortletPreferencesFactoryUtil.getPortalPreferences(req);
    String orderByCol=ParamUtil.getString(req,"orderByCol");
    String orderByType=ParamUtil.getString(req,"orderByType");
    if (Validator.isNotNull(orderByCol) && Validator.isNotNull(orderByType)) {
      prefs.setValue(PortletKeys.ENTERPRISE_ADMIN,"organizations-order-by-col",orderByCol);
      prefs.setValue(PortletKeys.ENTERPRISE_ADMIN,"organizations-order-by-type",orderByType);
    }
 else {
      orderByCol=prefs.getValue(PortletKeys.ENTERPRISE_ADMIN,"organizations-order-by-col","name");
      orderByType=prefs.getValue(PortletKeys.ENTERPRISE_ADMIN,"organizations-order-by-type","asc");
    }
    OrderByComparator orderByComparator=EnterpriseAdminUtil.getOrganizationOrderByComparator(orderByCol,orderByType);
    setOrderableHeaders(orderableHeaders);
    setOrderByCol(orderByCol);
    setOrderByType(orderByType);
    setOrderByComparator(orderByComparator);
  }
 catch (  Exception e) {
    _log.error(e);
  }
}
