{
  SearchContext searchContext=createSearchContext();
  searchContext.setAttribute("entryClassName",User.class.getName());
  if ((startDate != null) && (endDate != null)) {
    searchContext.setAttribute("modified","[" + _format.format(startDate) + " TO "+ _format.format(endDate)+ "]");
  }
  Indexer indexer=FacetedSearcher.getInstance();
  Hits hits=indexer.search(searchContext);
  if (expectedCount > 0) {
    Assert.assertEquals(expectedCount,hits.getLength());
  }
  return hits.getLength();
}
