{
  if (input == null) {
    return null;
  }
  if (input.length == 0) {
    return input;
  }
  List<Double> survivors=new ArrayList<Double>();
  for (int i=0; i < input.length; i++) {
    if (predicate.keep(input[i])) {
      survivors.add(input[i]);
    }
  }
  return toArray(survivors.toArray(new Double[survivors.size()]));
}
