{
  if (input == null) {
    return null;
  }
  if (input.length == 0) {
    return input;
  }
  List<T> origin=(List<T>)Arrays.asList(input);
  ArrayList<T> survivors=new ArrayList<T>();
  for (  T item : origin) {
    if (predicate.keep(item)) {
      survivors.add(item);
    }
  }
  Object[] result=survivors.toArray();
  return (T[])Arrays.copyOf(result,result.length,input.getClass());
}
