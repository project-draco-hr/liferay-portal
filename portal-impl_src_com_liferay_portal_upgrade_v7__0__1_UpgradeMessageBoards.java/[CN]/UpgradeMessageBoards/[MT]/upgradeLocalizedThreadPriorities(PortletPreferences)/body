{
  Set<Locale> availableLocales=LanguageUtil.getAvailableLocales();
  for (  Locale availableLocale : availableLocales) {
    String key="priorities" + StringPool.UNDERLINE + LanguageUtil.getLanguageId(availableLocale);
    String[] threadPriorities=portletPreferences.getValues(key,StringPool.EMPTY_ARRAY);
    if (ArrayUtil.isNotEmpty(threadPriorities)) {
      String[] upgradedThreadPriorities=new String[threadPriorities.length];
      for (int i=0; i < threadPriorities.length; i++) {
        String[] parts=StringUtil.split(threadPriorities[i]);
        upgradedThreadPriorities[i]=StringUtil.merge(parts,StringPool.PIPE);
      }
      portletPreferences.setValues(key,upgradedThreadPriorities);
    }
  }
}
