{
  Set<Locale> availableLocales=LanguageUtil.getAvailableLocales();
  for (  Locale availableLocale : availableLocales) {
    String key="priorities" + CharPool.UNDERLINE + LanguageUtil.getLanguageId(availableLocale);
    String[] oldThreadPriorities=portletPreferences.getValues(key,StringPool.EMPTY_ARRAY);
    if (ArrayUtil.isEmpty(oldThreadPriorities)) {
      continue;
    }
    String[] newThreadPriorities=new String[oldThreadPriorities.length];
    for (int i=0; i < oldThreadPriorities.length; i++) {
      newThreadPriorities[i]=StringUtil.replace(oldThreadPriorities[i],CharPool.COMMA,CharPool.PIPE);
    }
    portletPreferences.setValues(key,newThreadPriorities);
  }
}
