{
  Set<Locale> availableLocales=LanguageUtil.getAvailableLocales();
  for (  Locale availableLocale : availableLocales) {
    String key="priorities" + StringPool.UNDERLINE + LanguageUtil.getLanguageId(availableLocale);
    String[] oldThreadPriorities=portletPreferences.getValues(key,StringPool.EMPTY_ARRAY);
    if (ArrayUtil.isEmpty(oldThreadPriorities)) {
      continue;
    }
    String[] newThreadPriorities=new String[oldThreadPriorities.length];
    for (int i=0; i < oldThreadPriorities.length; i++) {
      String[] oldThreadPrioritiesParts=StringUtil.split(oldThreadPriorities[i]);
      newThreadPriorities[i]=StringUtil.merge(oldThreadPrioritiesParts,StringPool.PIPE);
    }
    portletPreferences.setValues(key,newThreadPriorities);
  }
}
