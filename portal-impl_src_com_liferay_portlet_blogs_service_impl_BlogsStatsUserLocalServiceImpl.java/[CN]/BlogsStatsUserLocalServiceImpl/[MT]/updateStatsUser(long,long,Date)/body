{
  int entryCount=blogsEntryPersistence.countByG_U_S(groupId,userId,WorkflowConstants.STATUS_APPROVED);
  BlogsStatsUser statsUser=getStatsUser(groupId,userId);
  statsUser.setEntryCount(entryCount);
  if (displayDate != null) {
    BlogsEntry blogsEntry=blogsEntryPersistence.findByG_U_S_First(groupId,userId,WorkflowConstants.STATUS_APPROVED,new EntryDisplayDateComparator());
    Date lastDisplayDate=blogsEntry.getDisplayDate();
    Date lastPostDate=statsUser.getLastPostDate();
    if (lastPostDate == null) {
      statsUser.setLastPostDate(displayDate);
    }
 else     if (displayDate.after(lastPostDate)) {
      statsUser.setLastPostDate(displayDate);
    }
 else     if (lastDisplayDate.before(lastPostDate)) {
      statsUser.setLastPostDate(lastDisplayDate);
    }
  }
  blogsStatsUserPersistence.update(statsUser,false);
}
