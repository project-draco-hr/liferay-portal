{
  PortletURL viewContentURL=renderResponse.createRenderURL();
  viewContentURL.setParameter("struts_action","/search/view_content");
  viewContentURL.setParameter("redirect",currentURL);
  viewContentURL.setPortletMode(PortletMode.VIEW);
  viewContentURL.setWindowState(WindowState.MAXIMIZED);
  AssetEntry assetEntry=AssetEntryLocalServiceUtil.getEntry(className,classPK);
  AssetRendererFactory assetRendererFactory=AssetRendererFactoryRegistryUtil.getAssetRendererFactoryByClassName(className);
  if (assetRendererFactory == null) {
    return viewContentURL.toString();
  }
  viewContentURL.setParameter("assetEntryId",String.valueOf(assetEntry.getEntryId()));
  viewContentURL.setParameter("type",assetRendererFactory.getType());
  if (viewInContext) {
    String viewFullContentURLString=viewContentURL.toString();
    viewFullContentURLString=HttpUtil.setParameter(viewFullContentURLString,"redirect",currentURL);
    AssetRenderer assetRenderer=assetRendererFactory.getAssetRenderer(classPK);
    String viewURL=assetRenderer.getURLViewInContext((LiferayPortletRequest)renderRequest,(LiferayPortletResponse)renderResponse,viewFullContentURLString);
    ThemeDisplay themeDisplay=(ThemeDisplay)renderRequest.getAttribute(WebKeys.THEME_DISPLAY);
    return AssetUtil.checkViewURL(assetEntry,viewInContext,viewURL,currentURL,themeDisplay);
  }
  return viewContentURL.toString();
}
