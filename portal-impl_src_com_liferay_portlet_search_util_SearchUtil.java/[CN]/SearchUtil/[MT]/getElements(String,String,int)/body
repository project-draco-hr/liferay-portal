{
  List<Element> result=new ArrayList();
  int total=0;
  try {
    xml=XMLFormatter.stripInvalidChars(xml);
    Document document=SAXReaderUtil.read(xml);
    Element rootElement=document.getRootElement();
    List<Element> entries=rootElement.elements("entry");
    total=GetterUtil.getInteger(rootElement.elementText(OpenSearchUtil.getQName("totalResults",OpenSearchUtil.OS_NAMESPACE)));
    for (    Element element : entries) {
      try {
        long entryScopeGroupId=GetterUtil.getLong(element.elementText(OpenSearchUtil.getQName("scopeGroupId",OpenSearchUtil.LIFERAY_NAMESPACE)));
        if (Validator.isNotNull(entryScopeGroupId) && (inactiveGroupsCount > 0)) {
          Group entryGroup=GroupServiceUtil.getGroup(entryScopeGroupId);
          if (entryGroup.isLayout()) {
            entryGroup=GroupLocalServiceUtil.getGroup(entryGroup.getParentGroupId());
          }
          if (!entryGroup.isActive()) {
            total--;
            continue;
          }
        }
        result.add(element);
      }
 catch (      Exception e) {
        _log.error("Error retrieving individual search result of type " + className,e);
        total--;
      }
    }
  }
 catch (  Exception e) {
    _log.error("Error displaying content of type " + className,e);
  }
  return new Tuple(result,total);
}
