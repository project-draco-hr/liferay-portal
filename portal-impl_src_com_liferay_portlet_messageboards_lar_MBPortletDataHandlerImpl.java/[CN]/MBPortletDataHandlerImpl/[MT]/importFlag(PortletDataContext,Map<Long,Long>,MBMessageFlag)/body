{
  long userId=context.getUserId(flag.getUserUuid());
  long messageId=MapUtil.getLong(messagePKs,flag.getMessageId(),flag.getMessageId());
  try {
    List<MBMessage> messages=new ArrayList<MBMessage>();
    messages.add(MBMessageUtil.findByPrimaryKey(messageId));
    MBMessageFlagLocalServiceUtil.addReadFlags(userId,messages);
  }
 catch (  NoSuchMessageException nsme) {
    _log.error("Could not find the message for flag " + flag.getMessageFlagId());
  }
}
