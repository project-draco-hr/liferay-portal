{
  if ((!context.hasDateRange()) || !MBUtil.isRegularCategoryId(categoryId)) {
    return;
  }
  MBCategory category=MBCategoryUtil.findByPrimaryKey(categoryId);
  exportParentCategory(context,categoriesElement,category.getParentCategoryId());
  String path=getCategoryPath(context,category);
  if (context.isPathNotProcessed(path)) {
    Element categoryElement=categoriesElement.addElement("category");
    categoryElement.addAttribute("path",path);
    category.setUserUuid(category.getUserUuid());
    context.addPermissions(MBCategory.class,category.getCategoryId());
    context.addZipEntry(path,category);
  }
}
