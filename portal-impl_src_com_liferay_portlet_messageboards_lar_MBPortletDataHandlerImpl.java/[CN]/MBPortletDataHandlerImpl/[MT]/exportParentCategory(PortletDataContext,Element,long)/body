{
  if ((!portletDataContext.hasDateRange()) || (categoryId == MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID) || (categoryId == MBCategoryConstants.DISCUSSION_CATEGORY_ID)) {
    return;
  }
  MBCategory category=MBCategoryUtil.findByPrimaryKey(categoryId);
  exportParentCategory(portletDataContext,categoriesElement,category.getParentCategoryId());
  String path=getCategoryPath(portletDataContext,category);
  if (portletDataContext.isPathNotProcessed(path)) {
    Element categoryElement=categoriesElement.addElement("category");
    categoryElement.addAttribute("path",path);
    category.setUserUuid(category.getUserUuid());
    portletDataContext.addPermissions(MBCategory.class,category.getCategoryId());
    portletDataContext.addZipEntry(path,category);
  }
}
