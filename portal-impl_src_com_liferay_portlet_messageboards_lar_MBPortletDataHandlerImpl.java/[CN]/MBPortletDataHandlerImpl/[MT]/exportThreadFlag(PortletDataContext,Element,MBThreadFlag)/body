{
  String path=getThreadFlagPath(portletDataContext,threadFlag);
  if (!portletDataContext.isPathNotProcessed(path)) {
    return;
  }
  Element threadFlagElement=threadFlagsElement.addElement("thread-flag");
  MBThread thread=MBThreadLocalServiceUtil.getMBThread(threadFlag.getThreadId());
  MBMessage message=MBMessageLocalServiceUtil.getMBMessage(thread.getRootMessageId());
  threadFlagElement.addAttribute("threadRootMessageUuid",message.getUuid());
  portletDataContext.addClassedModel(threadFlagElement,path,threadFlag,_NAMESPACE);
}
