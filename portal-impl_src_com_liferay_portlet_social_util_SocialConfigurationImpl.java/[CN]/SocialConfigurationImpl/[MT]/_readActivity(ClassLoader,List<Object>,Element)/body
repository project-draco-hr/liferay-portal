{
  String modelName=GetterUtil.getString(activityElement.elementText("model-name"));
  Map<Integer,SocialActivityDefinition> activityDefinitions=_activityDefinitions.get(modelName);
  if (activityDefinitions == null) {
    activityDefinitions=new HashMap<Integer,SocialActivityDefinition>();
    _activityDefinitions.put(modelName,activityDefinitions);
  }
  int activityType=GetterUtil.getInteger(activityElement.elementText("activity-type"));
  SocialActivityDefinition activityDefinition=activityDefinitions.get(activityType);
  if (activityDefinition == null) {
    activityDefinition=new SocialActivityDefinition();
    activityDefinition.setModelName(modelName);
    activityDefinition.setActivityType(activityType);
    _readActivity(classLoader,activityElement,activityDefinition);
    activityDefinitions.put(activityType,activityDefinition);
    objects.add(activityDefinition);
  }
  List<Element> counterElements=activityElement.elements("counter");
  for (  Element counterElement : counterElements) {
    _readCounter(objects,activityDefinition,counterElement);
  }
  List<Element> achievementElements=activityElement.elements("achievement");
  for (  Element achievementElement : achievementElements) {
    _readAchievement(classLoader,objects,activityDefinition,achievementElement);
  }
}
