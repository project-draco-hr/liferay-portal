{
  WikiPage page=(WikiPage)obj;
  long companyId=page.getCompanyId();
  long groupId=getParentGroupId(page.getGroupId());
  long scopeGroupId=page.getGroupId();
  long resourcePrimKey=page.getResourcePrimKey();
  long nodeId=page.getNodeId();
  String title=page.getTitle();
  String content=HtmlUtil.extractText(page.getContent());
  Date modifiedDate=page.getModifiedDate();
  long[] assetCategoryIds=AssetCategoryLocalServiceUtil.getCategoryIds(WikiPage.class.getName(),resourcePrimKey);
  String[] assetTagNames=AssetTagLocalServiceUtil.getTagNames(WikiPage.class.getName(),resourcePrimKey);
  ExpandoBridge expandoBridge=page.getExpandoBridge();
  Document document=new DocumentImpl();
  document.addUID(PORTLET_ID,nodeId,title);
  document.addModifiedDate(modifiedDate);
  document.addKeyword(Field.COMPANY_ID,companyId);
  document.addKeyword(Field.PORTLET_ID,PORTLET_ID);
  document.addKeyword(Field.GROUP_ID,groupId);
  document.addKeyword(Field.SCOPE_GROUP_ID,scopeGroupId);
  document.addText(Field.TITLE,title);
  document.addText(Field.CONTENT,content);
  document.addKeyword(Field.ASSET_CATEGORY_IDS,assetCategoryIds);
  document.addKeyword(Field.ASSET_TAG_NAMES,assetTagNames);
  document.addKeyword(Field.ENTRY_CLASS_NAME,WikiPage.class.getName());
  document.addKeyword(Field.ENTRY_CLASS_PK,resourcePrimKey);
  document.addKeyword("nodeId",nodeId);
  ExpandoBridgeIndexerUtil.addAttributes(document,expandoBridge);
  return document;
}
