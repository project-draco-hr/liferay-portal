{
  _topic=topic;
  _message=message;
  _parentMessage=parentMessage;
  _thread=thread;
  _treeWalker=new TreeWalker(message);
  _previousThread=previousThread;
  _nextThread=nextThread;
  _firstThread=firstThread;
  _lastThread=lastThread;
  List orderedMessages=new ArrayList();
  _orderMessages(_treeWalker,treeWalker.getRoot(),orderedMessages);
  for (int i=0; i < orderedMessages.size(); i++) {
    MBMessage curMessage=(MBMessage)orderedMessages.get(i);
    if (i == 0) {
      _firstMessage=curMessage;
    }
    if (curMessage.equals(message)) {
      if ((i - 1) >= 0) {
        _previousMessage=(MBMessage)orderedMessages.get(i - 1);
      }
      if ((i + 1) < orderedMessages.size()) {
        _nextMessage=(MBMessage)orderedMessages.get(i + 1);
      }
    }
    if ((i + 1) == orderedMessages.size()) {
      _lastMessage=curMessage;
    }
  }
}
