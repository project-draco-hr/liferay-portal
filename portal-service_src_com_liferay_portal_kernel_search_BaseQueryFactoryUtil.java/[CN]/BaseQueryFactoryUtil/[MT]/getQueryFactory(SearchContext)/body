{
  String searchEngineId=searchContext.getSearchEngineId();
  SearchEngine searchEngine=null;
  if (Validator.isNotNull(searchEngineId)) {
    searchEngine=SearchEngineUtil.getSearchEngine(searchEngineId);
  }
 else {
    searchEngine=SearchEngineUtil.getSearchEngine();
  }
  if (searchEngine.isLuceneBased()) {
    return _luceneBasedQueryFactory;
  }
 else {
    return _genericQueryFactory;
  }
}
