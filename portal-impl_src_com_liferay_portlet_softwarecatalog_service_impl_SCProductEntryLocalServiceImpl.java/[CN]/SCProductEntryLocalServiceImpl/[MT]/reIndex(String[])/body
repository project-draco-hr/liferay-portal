{
  if (LuceneUtil.INDEX_READ_ONLY) {
    return;
  }
  long companyId=GetterUtil.getLong(ids[0]);
  IndexWriter writer=null;
  try {
    writer=LuceneUtil.getWriter(companyId);
    Iterator itr=scProductEntryPersistence.findByCompanyId(companyId).iterator();
    while (itr.hasNext()) {
      SCProductEntry productEntry=(SCProductEntry)itr.next();
      long productEntryId=productEntry.getProductEntryId();
      String version=StringPool.BLANK;
      SCProductVersion latestProductVersion=productEntry.getLatestVersion();
      if (latestProductVersion != null) {
        version=latestProductVersion.getVersion();
      }
      try {
        org.apache.lucene.document.Document doc=Indexer.getAddProductEntryDocument(companyId,productEntry.getGroupId(),productEntry.getUserId(),productEntry.getUserName(),productEntryId,productEntry.getName(),productEntry.getModifiedDate(),version,productEntry.getType(),productEntry.getShortDescription(),productEntry.getLongDescription(),productEntry.getPageURL(),productEntry.getRepoGroupId(),productEntry.getRepoArtifactId());
        writer.addDocument(doc);
      }
 catch (      Exception e1) {
        _log.error("Reindexing " + productEntryId,e1);
      }
    }
  }
 catch (  SystemException se) {
    throw se;
  }
catch (  Exception e2) {
    throw new SystemException(e2);
  }
 finally {
    try {
      if (writer != null) {
        LuceneUtil.write(companyId);
      }
    }
 catch (    Exception e) {
      _log.error(e);
    }
  }
}
