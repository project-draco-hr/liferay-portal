{
  long productEntryId=productEntry.getProductEntryId();
  List productScreenshots=scProductScreenshotPersistence.findByProductEntryId(productEntryId);
  if (thumbnails.size() < productScreenshots.size()) {
    for (int i=thumbnails.size(); i < productScreenshots.size(); i++) {
      SCProductScreenshot productScreenshot=(SCProductScreenshot)productScreenshots.get(i);
      scProductScreenshotLocalService.deleteProductScreenshot(productScreenshot);
    }
  }
  for (int i=0; i < thumbnails.size(); i++) {
    int priority=i;
    byte[] thumbnail=(byte[])thumbnails.get(i);
    byte[] fullImage=(byte[])fullImages.get(i);
    SCProductScreenshot productScreenshot=scProductScreenshotPersistence.fetchByP_P(productEntryId,priority);
    if (productScreenshot == null) {
      long productScreenshotId=counterLocalService.increment();
      long thumbnailId=counterLocalService.increment();
      long fullImageId=counterLocalService.increment();
      productScreenshot=scProductScreenshotPersistence.create(productScreenshotId);
      productScreenshot.setCompanyId(productEntry.getCompanyId());
      productScreenshot.setGroupId(productEntry.getGroupId());
      productScreenshot.setProductEntryId(productEntryId);
      productScreenshot.setThumbnailId(thumbnailId);
      productScreenshot.setFullImageId(fullImageId);
      productScreenshot.setPriority(priority);
      scProductScreenshotPersistence.update(productScreenshot);
    }
    ImageLocalUtil.updateImage(productScreenshot.getThumbnailId(),thumbnail);
    ImageLocalUtil.updateImage(productScreenshot.getFullImageId(),fullImage);
  }
}
