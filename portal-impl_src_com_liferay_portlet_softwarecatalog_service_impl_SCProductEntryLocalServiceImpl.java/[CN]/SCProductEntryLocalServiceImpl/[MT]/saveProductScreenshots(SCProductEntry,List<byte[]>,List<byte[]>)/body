{
  long productEntryId=productEntry.getProductEntryId();
  List<SCProductScreenshot> productScreenshots=scProductScreenshotPersistence.findByProductEntryId(productEntryId);
  if (thumbnails.size() < productScreenshots.size()) {
    for (int i=thumbnails.size(); i < productScreenshots.size(); i++) {
      SCProductScreenshot productScreenshot=productScreenshots.get(i);
      scProductScreenshotLocalService.deleteProductScreenshot(productScreenshot);
    }
  }
  for (int i=0; i < thumbnails.size(); i++) {
    int priority=i;
    byte[] thumbnail=thumbnails.get(i);
    byte[] fullImage=fullImages.get(i);
    SCProductScreenshot productScreenshot=scProductScreenshotPersistence.fetchByP_P(productEntryId,priority);
    if (productScreenshot == null) {
      long productScreenshotId=counterLocalService.increment();
      productScreenshot=scProductScreenshotPersistence.create(productScreenshotId);
      productScreenshot.setCompanyId(productEntry.getCompanyId());
      productScreenshot.setGroupId(productEntry.getGroupId());
      productScreenshot.setProductEntryId(productEntryId);
      productScreenshot.setThumbnailId(counterLocalService.increment());
      productScreenshot.setFullImageId(counterLocalService.increment());
      productScreenshot.setPriority(priority);
      scProductScreenshotPersistence.update(productScreenshot);
    }
    imageLocalService.updateImage(productScreenshot.getThumbnailId(),thumbnail);
    imageLocalService.updateImage(productScreenshot.getFullImageId(),fullImage);
  }
}
