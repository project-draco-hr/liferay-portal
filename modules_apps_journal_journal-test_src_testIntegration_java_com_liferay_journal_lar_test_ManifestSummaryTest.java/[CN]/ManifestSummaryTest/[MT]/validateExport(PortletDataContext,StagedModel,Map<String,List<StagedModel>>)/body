{
  ManifestSummary manifestSummary=portletDataContext.getManifestSummary();
  Map<String,LongWrapper> modelAdditionCounters=manifestSummary.getModelAdditionCounters();
  Assert.assertEquals(4,modelAdditionCounters.size());
  Assert.assertEquals(1,manifestSummary.getModelAdditionCount(new StagedModelType(DDMStructure.class,JournalArticle.class)));
  Assert.assertEquals(1,manifestSummary.getModelAdditionCount(new StagedModelType(DDMTemplate.class,DDMStructure.class)));
  Assert.assertEquals(1,manifestSummary.getModelAdditionCount(new StagedModelType(JournalArticle.class)));
  Assert.assertEquals(1,manifestSummary.getModelAdditionCount(new StagedModelType(JournalFolder.class)));
  Document document=SAXReaderUtil.createDocument();
  Element rootElement=document.addElement("root");
  Element headerElement=rootElement.addElement("header");
  DateFormat dateFormat=DateFormatFactoryUtil.getSimpleDateFormat(Time.RFC822_FORMAT);
  String rfc822DateString=Time.getRFC822();
  _exportDate=dateFormat.parse(rfc822DateString);
  headerElement.addAttribute("export-date",rfc822DateString);
  ExportImportHelperUtil.writeManifestSummary(document,manifestSummary);
  zipWriter.addEntry("/manifest.xml",document.asXML());
}
