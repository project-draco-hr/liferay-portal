{
  String type="png";
  if (fileVersion == null) {
    return type;
  }
  String mimeType=fileVersion.getMimeType();
  if (mimeType.equals(ContentTypes.IMAGE_BMP)) {
    type=ImageTool.TYPE_BMP;
  }
 else   if (mimeType.equals(ContentTypes.IMAGE_GIF)) {
    type=ImageTool.TYPE_GIF;
  }
 else   if (mimeType.equals(ContentTypes.IMAGE_JPEG)) {
    type=ImageTool.TYPE_JPEG;
  }
 else   if (mimeType.equals(ContentTypes.IMAGE_PNG)) {
    type=ImageTool.TYPE_PNG;
  }
 else   if (!_previewGenerationRequired(fileVersion)) {
    type=fileVersion.getExtension();
  }
  return type;
}
