{
synchronized (IndexWriter.class) {
    shortDescription=Html.stripHtml(shortDescription);
    longDescription=Html.stripHtml(longDescription);
    IndexWriter writer=LuceneUtil.getWriter(companyId);
    Document doc=new Document();
    doc.add(LuceneFields.getKeyword(LuceneFields.UID,LuceneFields.getUID(PORTLET_ID,Long.toString(productEntryId))));
    doc.add(LuceneFields.getKeyword(LuceneFields.COMPANY_ID,companyId));
    doc.add(LuceneFields.getKeyword(LuceneFields.PORTLET_ID,PORTLET_ID));
    doc.add(LuceneFields.getKeyword(LuceneFields.GROUP_ID,groupId));
    doc.add(LuceneFields.getText(LuceneFields.TITLE,name));
    String content=repoArtifactId + " " + repoGroupId+ " "+ type+ " "+ shortDescription+ " "+ longDescription+ " "+ pageURL+ " "+ userName;
    doc.add(LuceneFields.getText(LuceneFields.CONTENT,content));
    doc.add(LuceneFields.getDate(LuceneFields.MODIFIED));
    doc.add(LuceneFields.getKeyword("repoArtifactId",repoArtifactId));
    doc.add(LuceneFields.getKeyword("repoGroupId",repoGroupId));
    doc.add(LuceneFields.getKeyword("userName",userName));
    doc.add(LuceneFields.getKeyword("type",type));
    doc.add(LuceneFields.getKeyword("productEntryId",Long.toString(productEntryId)));
    writer.addDocument(doc);
    LuceneUtil.write(writer);
  }
}
