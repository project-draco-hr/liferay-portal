{
  Map<String,Handler> handlers=(Map<String,Handler>)getParameterValue("handlers");
  ObjectMapper objectMapper=new ObjectMapper();
  JsonNode rootJsonNode=objectMapper.readTree(response);
  Iterator<Map.Entry<String,JsonNode>> fields=rootJsonNode.fields();
  while (fields.hasNext()) {
    try {
      Map.Entry<String,JsonNode> field=fields.next();
      Handler handler=handlers.get(field.getKey());
      JsonNode fieldValue=field.getValue();
      String exception=handler.getException(fieldValue.textValue());
      if (handler.handlePortalException(exception)) {
        continue;
      }
      if (_logger.isTraceEnabled()) {
        Class<?> clazz=handler.getClass();
        _logger.trace("Handling response {} {}",clazz.getSimpleName(),fieldValue.toString());
      }
      handler.processResponse(fieldValue.toString());
    }
 catch (    Exception e) {
      _logger.debug(e.getMessage(),e);
    }
  }
  Path filePath=(Path)getParameterValue("zipFilePath");
  Files.deleteIfExists(filePath);
}
