{
  PortletPreferences portletPreferences=PortletPreferencesFactoryUtil.fromXML(companyId,ownerId,ownerType,plid,portletId,xml);
  String selectionStyle=portletPreferences.getValue("selection-style",null);
  if (Validator.isNotNull(selectionStyle) && !selectionStyle.equals("dynamic")) {
    String[] assetEntryXmls=portletPreferences.getValues("asset-entry-xml",new String[0]);
    String[] newAssetEntryXmls=getAssetEntryXmls(assetEntryXmls);
    portletPreferences.setValues("asset-entry-xml",newAssetEntryXmls);
  }
  return PortletPreferencesFactoryUtil.toXML(portletPreferences);
}
