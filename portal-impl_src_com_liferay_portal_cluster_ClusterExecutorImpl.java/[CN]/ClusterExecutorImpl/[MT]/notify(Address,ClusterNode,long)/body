{
  clearExpiredInstances();
  if (System.currentTimeMillis() > expirationTime) {
    return;
  }
  ObjectValuePair<Address,ClusterNode> checkInInstance=new ObjectValuePair<Address,ClusterNode>(address,clusterNode);
  Long oldExpirationTime=_checkInInstanceMap.put(checkInInstance,expirationTime);
  if (oldExpirationTime != null || ((_localAddress != null) && _localAddress.equals(address))) {
    return;
  }
  _clusterNodeIdMap.put(clusterNode.getClusterNodeId(),address);
  ClusterEvent clusterEvent=ClusterEvent.join(clusterNode);
  fireClusterEvent(clusterEvent);
}
