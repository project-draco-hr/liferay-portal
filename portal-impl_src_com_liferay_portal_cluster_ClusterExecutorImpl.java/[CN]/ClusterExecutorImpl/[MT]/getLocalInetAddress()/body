{
  Enumeration<NetworkInterface> enumInterface=NetworkInterface.getNetworkInterfaces();
  List<NetworkInterface> interfaces=new ArrayList<NetworkInterface>();
  while (enumInterface.hasMoreElements()) {
    interfaces.add(enumInterface.nextElement());
  }
  if (interfaces.isEmpty()) {
    throw new SystemException("No interface available");
  }
  for (  NetworkInterface networkInterface : interfaces) {
    if (isLoopback(networkInterface)) {
      continue;
    }
    Enumeration<InetAddress> tempAddress=networkInterface.getInetAddresses();
    List<InetAddress> addresses=new ArrayList<InetAddress>();
    while (tempAddress.hasMoreElements()) {
      addresses.add(tempAddress.nextElement());
    }
    if (addresses.isEmpty()) {
      continue;
    }
    for (    InetAddress address : addresses) {
      if (address instanceof Inet4Address) {
        return address;
      }
    }
  }
  throw new SystemException("No interface available");
}
