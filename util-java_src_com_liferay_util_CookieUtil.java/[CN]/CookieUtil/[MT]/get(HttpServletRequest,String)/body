{
  Map<String,Cookie> cookieMap=(Map<String,Cookie>)request.getAttribute(_COOKIE_MAP);
  if (cookieMap == null) {
    Cookie[] cookies=request.getCookies();
    if (cookies == null) {
      cookieMap=Collections.emptyMap();
    }
 else {
      cookieMap=new HashMap<String,Cookie>(cookies.length * 4 / 3);
      for (      Cookie cookie : cookies) {
        String cookieName=GetterUtil.getString(cookie.getName()).toUpperCase();
        cookieMap.put(cookieName,cookie);
      }
    }
    request.setAttribute(_COOKIE_MAP,cookieMap);
  }
  Cookie cookie=cookieMap.get(name.toUpperCase());
  if (cookie == null) {
    return null;
  }
 else {
    return cookie.getValue();
  }
}
