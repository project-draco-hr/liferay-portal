{
  _s3StoreConfiguration=Configurable.createConfigurable(S3StoreConfiguration.class,properties);
  _bucketName=_s3StoreConfiguration.bucketName();
  _awsCredentialsProvider=getAWSCredentialsProvider();
  _amazonS3=getAmazonS3(_awsCredentialsProvider);
  int tempDirCleanUpExpunge=_s3StoreConfiguration.tempDirCleanUpExpunge();
  int tempDirCleanUpFrequency=_s3StoreConfiguration.tempDirCleanUpFrequency();
  _s3FileCache=new S3FileCacheImpl(_s3KeyTransformer,tempDirCleanUpExpunge,tempDirCleanUpFrequency);
  try {
    if (Validator.isNull(_s3StoreConfiguration.s3StorageClass())) {
      _storageClass=StorageClass.Standard;
    }
 else {
      _storageClass=StorageClass.fromValue(_s3StoreConfiguration.s3StorageClass());
    }
  }
 catch (  IllegalArgumentException iae) {
    _storageClass=StorageClass.Standard;
    if (_log.isWarnEnabled()) {
      _log.warn(iae);
    }
  }
}
