{
  InputStream is=null;
  try {
    int pos=source.indexOf(_PREFIX);
    if (pos != -1) {
      int x=source.indexOf(CharPool.SLASH,pos);
      int y=source.indexOf(CharPool.SLASH,x + 1);
      int z=source.indexOf(CharPool.SLASH,y + 1);
      long companyId=GetterUtil.getLong(source.substring(x + 1,y));
      long groupId=GetterUtil.getLong(source.substring(y + 1,z));
      String templateId=source.substring(z + 1);
      if (_log.isDebugEnabled()) {
        _log.debug("Loading {companyId=" + companyId + ",groupId="+ groupId+ ",templateId="+ templateId+ "}");
      }
      JournalTemplate template=JournalTemplateLocalServiceUtil.getTemplate(groupId,templateId);
      String buffer=template.getXsl();
      is=new UnsyncByteArrayInputStream(buffer.getBytes());
    }
  }
 catch (  PortalException pe) {
    throw new ResourceNotFoundException(source);
  }
catch (  SystemException se) {
    throw new ResourceNotFoundException(source);
  }
  return is;
}
