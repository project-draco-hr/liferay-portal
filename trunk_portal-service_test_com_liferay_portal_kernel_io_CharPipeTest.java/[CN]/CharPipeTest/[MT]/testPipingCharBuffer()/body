{
  CharPipe charPipe=new CharPipe(4);
  Writer writer=charPipe.getWriter();
  writer.write("abcd");
  CharBuffer charBuffer=CharBuffer.allocate(0);
  Reader reader=charPipe.getReader();
  int result=reader.read(charBuffer);
  assertEquals(0,result);
  charBuffer=CharBuffer.allocate(2);
  result=reader.read(charBuffer);
  assertEquals(2,result);
  charBuffer.flip();
  assertEquals('a',charBuffer.get());
  assertEquals('b',charBuffer.get());
  charPipe.close();
}
