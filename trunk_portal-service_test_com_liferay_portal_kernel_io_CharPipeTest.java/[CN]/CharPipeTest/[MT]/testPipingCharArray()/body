{
  CharPipe charPipe=new CharPipe(4);
  Writer writer=charPipe.getWriter();
  char[] data="abcd".toCharArray();
  writer.write(data);
  char[] buffer=new char[4];
  Reader reader=charPipe.getReader();
  int result=reader.read(buffer);
  assertEquals(4,result);
  assertTrue(Arrays.equals(data,buffer));
  writer.append(new String(data));
  result=reader.read(buffer);
  assertEquals(4,result);
  assertTrue(Arrays.equals(data,buffer));
  charPipe.close();
}
