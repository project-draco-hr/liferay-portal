{
  ServiceContext serviceContext=ServiceTestUtil.getServiceContext(group.getGroupId());
  WikiNode node=(WikiNode)getParentBaseModel(group,serviceContext);
  int initialBaseModelsCount=getNotInTrashBaseModelsCount(node);
  int initialTrashEntriesCount=getTrashEntriesCount(group.getGroupId());
  WikiPage page1=(WikiPage)addBaseModel(node,true,serviceContext);
  WikiPage childPage=addChildBaseModel(node.getNodeId(),page1.getTitle(),true,serviceContext);
  Assert.assertEquals(childPage.getParentTitle(),page1.getTitle());
  WikiPage page2=(WikiPage)addBaseModel(node,true,serviceContext);
  WikiPageLocalServiceUtil.changeParent(TestPropsValues.getUserId(),node.getNodeId(),childPage.getTitle(),page2.getTitle(),serviceContext);
  childPage=WikiPageLocalServiceUtil.getPage(node.getNodeId(),childPage.getTitle());
  Assert.assertEquals(childPage.getParentTitle(),page2.getTitle());
  Assert.assertEquals(initialBaseModelsCount + 3,getNotInTrashBaseModelsCount(node));
  Assert.assertEquals(initialTrashEntriesCount,getTrashEntriesCount(group.getGroupId()));
  moveBaseModelToTrash(page1.getPrimaryKey());
  Assert.assertEquals(initialBaseModelsCount + 2,getNotInTrashBaseModelsCount(node));
  Assert.assertEquals(initialTrashEntriesCount + 1,getTrashEntriesCount(group.getGroupId()));
}
