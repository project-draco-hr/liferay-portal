{
  ServiceContext serviceContext=ServiceTestUtil.getServiceContext(group.getGroupId());
  WikiNode node=(WikiNode)getParentBaseModel(group,serviceContext);
  int initialBaseModelsCount=getNotInTrashBaseModelsCount(node);
  int initialTrashEntriesCount=getTrashEntriesCount(group.getGroupId());
  WikiPage wikiPage1=(WikiPage)addBaseModel(node,true,serviceContext);
  WikiPage childPage=addChildBaseModel(node.getNodeId(),wikiPage1.getTitle(),true,serviceContext);
  Assert.assertEquals(childPage.getParentTitle(),wikiPage1.getTitle());
  WikiPage wikiPage2=(WikiPage)addBaseModel(node,true,serviceContext);
  WikiPageLocalServiceUtil.changeParent(TestPropsValues.getUserId(),node.getNodeId(),childPage.getTitle(),wikiPage2.getTitle(),serviceContext);
  childPage=WikiPageLocalServiceUtil.getPage(node.getNodeId(),childPage.getTitle());
  Assert.assertEquals(childPage.getParentTitle(),wikiPage2.getTitle());
  Assert.assertEquals(initialBaseModelsCount + 3,getNotInTrashBaseModelsCount(node));
  Assert.assertEquals(initialTrashEntriesCount,getTrashEntriesCount(group.getGroupId()));
  moveBaseModelToTrash(wikiPage1.getPrimaryKey());
  Assert.assertEquals(initialBaseModelsCount + 2,getNotInTrashBaseModelsCount(node));
  Assert.assertEquals(initialTrashEntriesCount + 1,getTrashEntriesCount(group.getGroupId()));
}
