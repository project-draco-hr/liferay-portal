{
  URL url=getURL();
  String query=url.getQuery();
  Map<String,String[]> parameters=HttpUtil.getParameterMap(query);
  if (!parameters.containsKey(WEB_CONTEXT_PATH)) {
    throw new IllegalArgumentException("The parameter map does not contain the required parameter " + WEB_CONTEXT_PATH);
  }
  File file=transferToTempFile(new URL(url.getPath()));
  try {
    WabProcessor wabProcessor=new WabProcessor(_bundleContext,_classLoader,file,parameters);
    return wabProcessor.getInputStream();
  }
  finally {
    FileUtil.deltree(file.getParentFile());
  }
}
