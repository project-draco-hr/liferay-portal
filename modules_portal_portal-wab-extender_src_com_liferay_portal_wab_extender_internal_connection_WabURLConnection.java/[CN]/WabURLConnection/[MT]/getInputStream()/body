{
  URL url=getURL();
  String query=url.getQuery();
  Map<String,String[]> parameters=HttpUtil.getParameterMap(query);
  if (!parameters.containsKey(WEB_CONTEXTPATH)) {
    throw new IllegalArgumentException(WEB_CONTEXTPATH + " parameter is required");
  }
  URL innerURL=new URL(url.getPath());
  File tempFile=_transferToTempFolder(innerURL);
  try {
    WabProcessor wabProcessor=new WabProcessor(_bundleContext,_classLoader,tempFile,parameters);
    wabProcessor.process();
    return wabProcessor.getInputStream();
  }
  finally {
    FileUtil.deltree(tempFile.getParentFile());
  }
}
