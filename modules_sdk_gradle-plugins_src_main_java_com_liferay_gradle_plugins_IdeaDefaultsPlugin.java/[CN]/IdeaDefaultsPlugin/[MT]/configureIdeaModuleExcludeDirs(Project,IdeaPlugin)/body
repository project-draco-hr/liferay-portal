{
  if (!hasPlugin(project,JavaPlugin.class)) {
    return;
  }
  IdeaModule ideaModule=getIdeaModule(ideaPlugin);
  Set<File> excludeDirs=ideaModule.getExcludeDirs();
  SourceSet sourceSet=GradleUtil.getSourceSet(project,SourceSet.MAIN_SOURCE_SET_NAME);
  SourceSetOutput sourceSetOutput=sourceSet.getOutput();
  File classesDir=sourceSetOutput.getClassesDir();
  if (!FileUtil.isChild(classesDir,project.getBuildDir())) {
    excludeDirs.add(classesDir);
  }
  File resourcesDir=sourceSetOutput.getResourcesDir();
  if (!FileUtil.isChild(resourcesDir,project.getBuildDir())) {
    excludeDirs.add(resourcesDir);
  }
  ideaModule.setExcludeDirs(excludeDirs);
}
