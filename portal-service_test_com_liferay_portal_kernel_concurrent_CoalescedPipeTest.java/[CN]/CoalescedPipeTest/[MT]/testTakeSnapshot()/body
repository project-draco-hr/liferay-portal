{
  CoalescedPipe<String> coalescedPipe=new CoalescedPipe<String>();
  Object[] snapShot=coalescedPipe.takeSnapshot();
  assertEquals(0,snapShot.length);
  coalescedPipe.put("test1");
  snapShot=coalescedPipe.takeSnapshot();
  assertEquals(1,snapShot.length);
  assertEquals("test1",snapShot[0]);
  coalescedPipe.put("test2");
  snapShot=coalescedPipe.takeSnapshot();
  assertEquals(2,snapShot.length);
  assertEquals("test1",snapShot[0]);
  assertEquals("test2",snapShot[1]);
}
