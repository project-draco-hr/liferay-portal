{
  long pk=nextLong();
  Image newImage=_persistence.create(pk);
  newImage.setModifiedDate(nextDate());
  newImage.setText(randomString());
  newImage.setType(randomString());
  newImage.setHeight(nextInt());
  newImage.setWidth(nextInt());
  newImage.setSize(nextInt());
  _persistence.update(newImage,false);
  Image existingImage=_persistence.findByPrimaryKey(newImage.getPrimaryKey());
  assertEquals(existingImage.getImageId(),newImage.getImageId());
  assertEquals(Time.getShortTimestamp(existingImage.getModifiedDate()),Time.getShortTimestamp(newImage.getModifiedDate()));
  assertEquals(existingImage.getText(),newImage.getText());
  assertEquals(existingImage.getType(),newImage.getType());
  assertEquals(existingImage.getHeight(),newImage.getHeight());
  assertEquals(existingImage.getWidth(),newImage.getWidth());
  assertEquals(existingImage.getSize(),newImage.getSize());
}
