{
  String sampleDirName=dependenciesDir.getPath() + "/" + sampleKey;
  File sampleDir=new File(sampleDirName);
  File expectedMessageFile=new File(sampleDir,"expected_message.html");
  if (expectedMessageFile.exists()) {
    return;
  }
  try {
    if (!sampleDir.exists()) {
      System.out.println("Downloading sample " + sampleKey);
      downloadSample(sampleDir,url);
    }
    writeExpectedMessage(sampleDir);
  }
 catch (  IOException ioe) {
    deleteFile(sampleDir);
    throw ioe;
  }
}
