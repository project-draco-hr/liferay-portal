{
  List<CalendarBooking> childCalendarBookings=new ArrayList<>();
  List<CalendarBooking> relatedCalendarBookings=new ArrayList<>();
  if (calendarBooking.isMasterBooking()) {
    childCalendarBookings=getChildCalendarBookings(calendarBooking.getCalendarBookingId());
  }
 else {
    childCalendarBookings.add(calendarBooking);
  }
  for (  CalendarBooking childCalendarBooking : childCalendarBookings) {
    relatedCalendarBookings.addAll(getRelatedCalendarBookings(childCalendarBooking));
    relatedCalendarBookings.remove(childCalendarBooking);
    childCalendarBooking.setModifiedDate(modifiedDate);
    childCalendarBooking.setRecurrence(recurrence);
    calendarBookingPersistence.update(childCalendarBooking);
  }
}
