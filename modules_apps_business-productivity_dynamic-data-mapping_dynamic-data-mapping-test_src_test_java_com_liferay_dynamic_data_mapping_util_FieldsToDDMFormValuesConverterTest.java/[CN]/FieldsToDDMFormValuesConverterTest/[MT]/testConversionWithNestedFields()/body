{
  DDMForm ddmForm=createDDMForm();
  DDMFormField ddmFormField=createTextDDMFormField("Name");
  addNestedTextDDMFormFields(ddmFormField,"Phone");
  addDDMFormFields(ddmForm,ddmFormField);
  DDMStructure ddmStructure=createStructure("Test Structure",ddmForm);
  Field nameField=createField(ddmStructure.getStructureId(),"Name",createValuesList("Paul","Joe"),createValuesList("Paulo","Joao"));
  Field phoneField=createField(ddmStructure.getStructureId(),"Phone",createValuesList("Paul's Phone 1","Paul's Phone 2","Joe's Phone 1","Joe's Phone 2","Joe's Phone 3"),createValuesList("Telefone de Paulo 1","Telefone de Paulo 2","Telefone de Joao 1","Telefone de Joao 2","Telefone de Joao 3"));
  Field fieldsDisplayField=createFieldsDisplayField(ddmStructure.getStructureId(),"Name_INSTANCE_rztm,Phone_INSTANCE_ovho,Phone_INSTANCE_krvx," + "Name_INSTANCE_rght,Phone_INSTANCE_latb,Phone_INSTANCE_jewp," + "Phone_INSTANCE_mkar");
  Fields fields=createFields(nameField,phoneField,fieldsDisplayField);
  DDMFormValues ddmFormValues=_fieldsToDDMFormValuesConverterImpl.convert(ddmStructure,fields);
  List<DDMFormFieldValue> ddmFormFieldValues=ddmFormValues.getDDMFormFieldValues();
  Assert.assertEquals(2,ddmFormFieldValues.size());
  DDMFormFieldValue paulDDMFormFieldValue=ddmFormFieldValues.get(0);
  testDDMFormFieldValue("rztm","Paul","Paulo",paulDDMFormFieldValue);
  List<DDMFormFieldValue> paulNestedDDMFormFieldValues=paulDDMFormFieldValue.getNestedDDMFormFieldValues();
  Assert.assertEquals(2,paulNestedDDMFormFieldValues.size());
  testDDMFormFieldValue("ovho","Paul's Phone 1","Telefone de Paulo 1",paulNestedDDMFormFieldValues.get(0));
  testDDMFormFieldValue("krvx","Paul's Phone 2","Telefone de Paulo 2",paulNestedDDMFormFieldValues.get(1));
  DDMFormFieldValue joeDDMFormFieldValue=ddmFormFieldValues.get(1);
  testDDMFormFieldValue("rght","Joe","Joao",joeDDMFormFieldValue);
  List<DDMFormFieldValue> joeNestedDDMFormFieldValues=joeDDMFormFieldValue.getNestedDDMFormFieldValues();
  Assert.assertEquals(3,joeNestedDDMFormFieldValues.size());
  testDDMFormFieldValue("latb","Joe's Phone 1","Telefone de Joao 1",joeNestedDDMFormFieldValues.get(0));
  testDDMFormFieldValue("jewp","Joe's Phone 2","Telefone de Joao 2",joeNestedDDMFormFieldValues.get(1));
  testDDMFormFieldValue("mkar","Joe's Phone 3","Telefone de Joao 3",joeNestedDDMFormFieldValues.get(2));
}
