{
  Registry registry=RegistryUtil.getRegistry();
  PollerProcessor pollerProcessor=registry.getService(serviceReference);
  if (ShardUtil.isEnabled() && !(pollerProcessor instanceof ShardPollerProcessorWrapper)) {
    pollerProcessor=new ShardPollerProcessorWrapper(pollerProcessor);
  }
  String portletId=(String)serviceReference.getProperty("javax.portlet.name");
  _pollerPorcessors.put(portletId,pollerProcessor);
  return pollerProcessor;
}
