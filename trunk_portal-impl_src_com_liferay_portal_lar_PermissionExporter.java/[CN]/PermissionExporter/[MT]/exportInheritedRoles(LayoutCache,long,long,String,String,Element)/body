{
  Element entityRolesElement=SAXReaderUtil.createElement(entityName + "-roles");
  Map<String,Long> entityMap=layoutCache.getEntityMap(companyId,entityName);
  for (  Map.Entry<String,Long> entry : entityMap.entrySet()) {
    String name=entry.getKey();
    long entityGroupId=entry.getValue();
    List<Role> entityRoles=layoutCache.getGroupRoles_1to4(entityGroupId);
    Element entityElement=exportRoles(companyId,resourceName,ResourceConstants.SCOPE_GROUP,String.valueOf(groupId),entityRolesElement,entityName,entityRoles);
    if (entityElement.elements().isEmpty()) {
      entityRolesElement.remove(entityElement);
    }
 else {
      entityElement.addAttribute("name",name);
    }
  }
  if (!entityRolesElement.elements().isEmpty()) {
    parentElement.add(entityRolesElement);
  }
}
