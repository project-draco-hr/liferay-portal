{
  if (parent == null) {
    long maxNestedSetsTreeNodeRight=getMaxNestedSetsTreeNodeRight(t.getNestedSetsTreeNodeScopeId());
    t.setNestedSetsTreeNodeLeft(maxNestedSetsTreeNodeRight);
    t.setNestedSetsTreeNodeRight(maxNestedSetsTreeNodeRight + 1);
  }
 else {
    long nestedSetsTreeNodeRight=parent.getNestedSetsTreeNodeRight();
    doUpdate(t.getNestedSetsTreeNodeScopeId(),true,2,nestedSetsTreeNodeRight,true);
    doUpdate(t.getNestedSetsTreeNodeScopeId(),false,2,nestedSetsTreeNodeRight,true);
    t.setNestedSetsTreeNodeLeft(nestedSetsTreeNodeRight);
    t.setNestedSetsTreeNodeRight(nestedSetsTreeNodeRight + 1);
  }
}
