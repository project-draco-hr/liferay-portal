{
  if (parent == null) {
    long maxNestedSetsRight=getMaxNestedSetsRight(t.getNestedSetsScopeId());
    t.setNestedSetsLeft(maxNestedSetsRight);
    t.setNestedSetsRight(maxNestedSetsRight + 1);
  }
 else {
    long nestedSetsRight=parent.getNestedSetsRight();
    doUpdate(t.getNestedSetsScopeId(),true,2,nestedSetsRight,true);
    doUpdate(t.getNestedSetsScopeId(),false,2,nestedSetsRight,true);
    t.setNestedSetsLeft(nestedSetsRight);
    t.setNestedSetsRight(nestedSetsRight + 1);
  }
}
