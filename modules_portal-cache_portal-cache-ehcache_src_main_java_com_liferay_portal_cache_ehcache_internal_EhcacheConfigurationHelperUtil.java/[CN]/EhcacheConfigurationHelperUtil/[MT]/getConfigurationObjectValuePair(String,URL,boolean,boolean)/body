{
  if (configurationURL == null) {
    throw new NullPointerException("Configuration path is null");
  }
  Configuration ehcacheConfiguration=ConfigurationFactory.parseConfiguration(configurationURL);
  ehcacheConfiguration.setName(portalCacheManagerName);
  _handlePeerFactoryConfigurations(ehcacheConfiguration.getCacheManagerPeerProviderFactoryConfiguration(),clusterAware);
  _handlePeerFactoryConfigurations(ehcacheConfiguration.getCacheManagerPeerListenerFactoryConfigurations(),clusterAware);
  Set<Properties> cacheManagerListenerPropertiesSet=_getCacheManagerListenerPropertiesSet(ehcacheConfiguration);
  PortalCacheConfiguration defaultPortalCacheConfiguration=_parseCacheConfiguration(ehcacheConfiguration.getDefaultCacheConfiguration(),clusterAware,usingDefault);
  Set<PortalCacheConfiguration> portalCacheConfigurations=new HashSet<>();
  Map<String,CacheConfiguration> cacheConfigurations=ehcacheConfiguration.getCacheConfigurations();
  for (  Map.Entry<String,CacheConfiguration> entry : cacheConfigurations.entrySet()) {
    portalCacheConfigurations.add(_parseCacheConfiguration(entry.getValue(),clusterAware,usingDefault));
  }
  PortalCacheManagerConfiguration portalCacheManagerConfiguration=new PortalCacheManagerConfiguration(cacheManagerListenerPropertiesSet,defaultPortalCacheConfiguration,portalCacheConfigurations);
  return new ObjectValuePair<>(ehcacheConfiguration,portalCacheManagerConfiguration);
}
