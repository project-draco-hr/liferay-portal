{
  if (_percentage > PERCENTAGE_NONE) {
    return _percentage;
  }
  _percentage=PERCENTAGE_MAX;
  if (_allProgressBarCountersTotal > PERCENTAGE_MIN) {
    int base=PERCENTAGE_MAX;
    if (_phase.equals(Constants.EXPORT) && !Validator.equals(_cmd,Constants.PUBLISH_TO_REMOTE)) {
      base=_EXPORT_PHASE_MAX_PERCENTAGE;
    }
    _percentage=Math.round((float)_currentProgressBarCountersTotal / _allProgressBarCountersTotal * base);
  }
  return _percentage;
}
