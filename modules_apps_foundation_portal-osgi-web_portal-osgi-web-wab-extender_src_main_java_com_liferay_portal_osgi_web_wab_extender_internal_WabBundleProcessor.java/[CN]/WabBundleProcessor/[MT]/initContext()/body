{
  ServiceTracker<ServletContextHelperRegistration,ServletContextHelperRegistration> serviceTracker=new ServiceTracker<>(_bundleContext,ServletContextHelperRegistration.class,null);
  serviceTracker.open();
  try {
    ServletContextHelperRegistration servletContextHelperRegistration=serviceTracker.waitForService(2000);
    WebXMLDefinition webXMLDefinition=servletContextHelperRegistration.getWebXMLDefinition();
    _servletContextHelperRegistrationServiceReference=serviceTracker.getServiceReference();
    ServletContext servletContext=servletContextHelperRegistration.getServletContext();
    _contextName=servletContext.getServletContextName();
    servletContext.setAttribute("jsp.taglib.mappings",webXMLDefinition.getJspTaglibMappings());
    servletContext.setAttribute("osgi-bundlecontext",_bundleContext);
    servletContext.setAttribute("osgi-runtime-vendor",_VENDOR);
    return servletContextHelperRegistration;
  }
 catch (  InterruptedException ie) {
    return ReflectionUtil.throwException(ie);
  }
}
