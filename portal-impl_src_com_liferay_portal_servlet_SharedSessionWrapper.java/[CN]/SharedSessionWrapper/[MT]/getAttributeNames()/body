{
  HttpSession session=getSessionDelegate();
  Enumeration<String> namesEnu=session.getAttributeNames();
  if (session == _portletSession) {
    List<String> namesList=Collections.list(namesEnu);
    Set<String> sharedSessionAttributes=_sharedSessionAttributes.keySet();
    for (    String name : sharedSessionAttributes) {
      if (_portalSession.getAttribute(name) != null) {
        namesList.add(name);
      }
    }
    namesEnu=Collections.enumeration(namesList);
  }
  return namesEnu;
}
