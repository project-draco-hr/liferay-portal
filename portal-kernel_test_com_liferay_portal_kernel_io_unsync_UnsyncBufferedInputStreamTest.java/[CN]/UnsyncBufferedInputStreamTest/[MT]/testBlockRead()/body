{
  ByteArrayInputStream bais=new ByteArrayInputStream(_BUFFER);
  int bufferSize=10;
  UnsyncBufferedInputStream ubis=new UnsyncBufferedInputStream(bais,bufferSize);
  assertEquals(_BUFFER_SIZE,bais.available());
  assertEquals(_BUFFER_SIZE,ubis.available());
  assertEquals(0,ubis.read());
  assertEquals(_BUFFER_SIZE - bufferSize,bais.available());
  assertEquals(_BUFFER_SIZE - 1,ubis.available());
  byte[] buffer=new byte[5];
  int number=ubis.read(buffer);
  assertEquals(buffer.length,number);
  for (int i=1; i < buffer.length + 1; i++) {
    assertEquals(i,buffer[i - 1]);
  }
  assertEquals(6,ubis.read());
  assertEquals(7,ubis.read());
  assertEquals(8,ubis.read());
  assertEquals(9,ubis.read());
  number=ubis.read(buffer);
  assertEquals(buffer.length,number);
  for (int i=10; i < buffer.length + 10; i++) {
    assertEquals(i,buffer[i - 10]);
  }
  assertEquals(_BUFFER_SIZE - bufferSize * 2,bais.available());
  assertEquals(_BUFFER_SIZE - 15,ubis.available());
  buffer=new byte[10];
  number=ubis.read(buffer);
  assertEquals(buffer.length,number);
  for (int i=15; i < buffer.length + 15; i++) {
    assertEquals(i,buffer[i - 15]);
  }
  assertEquals(_BUFFER_SIZE - bufferSize * 3,bais.available());
  assertEquals(_BUFFER_SIZE - 25,ubis.available());
  for (int i=25; i < _BUFFER_SIZE - 5; i++) {
    assertEquals(i & 0xff,ubis.read());
  }
  assertEquals(_BUFFER_SIZE % 5,bais.available());
  assertEquals(5,ubis.available());
  number=ubis.read(buffer);
  assertEquals(5,number);
  assertEquals(-1,ubis.read());
}
