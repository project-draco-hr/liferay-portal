{
  Indexer<?> indexer=_indexerRegistry.getIndexer(className);
  if (!indexer.isPermissionAware()) {
    return booleanFilter;
  }
  PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
  User user=permissionChecker.getUser();
  if ((user == null) || (user.getUserId() != userId)) {
    user=_userLocalService.fetchUser(userId);
    if (user == null) {
      return booleanFilter;
    }
    permissionChecker=PermissionCheckerFactoryUtil.create(user);
  }
  if (permissionChecker.getUserBag() == null) {
    return booleanFilter;
  }
  List<Long> groupIdsList=new ArrayList<>(ListUtil.toList(groupIds));
  Set<Group> groups=new LinkedHashSet<>();
  Set<Role> roles=new LinkedHashSet<>();
  Set<UserGroupRole> userGroupRoles=new LinkedHashSet<>();
  Map<Long,List<Role>> groupIdsToRoles=new HashMap<>();
  populate(companyId,groupIdsList,userId,permissionChecker,groups,roles,userGroupRoles,groupIdsToRoles,searchContext);
  return doGetPermissionFilter_6(companyId,groupIdsList,userId,permissionChecker,className,booleanFilter,groups,roles,userGroupRoles,groupIdsToRoles);
}
