{
  IndexSearcher indexSearcher=_indexSearcherManager.aquire();
  IndexReader indexReader=indexSearcher.getIndexReader();
  int referenceCountBeforeClose=indexReader.getRefCount();
  _indexSearcherManager.close();
  int referenceCountAfterClose=indexReader.getRefCount();
  Assert.assertEquals(referenceCountBeforeClose - 1,referenceCountAfterClose);
  try {
    _indexSearcherManager.aquire();
    Assert.fail();
  }
 catch (  AlreadyClosedException ace) {
    Assert.assertEquals("IndexSearcherManager is closed",ace.getMessage());
  }
  _indexSearcherManager.invalid();
  try {
    _indexSearcherManager.aquire();
    Assert.fail();
  }
 catch (  AlreadyClosedException ace) {
    Assert.assertEquals("IndexSearcherManager is closed",ace.getMessage());
  }
  _indexSearcherManager.close();
}
