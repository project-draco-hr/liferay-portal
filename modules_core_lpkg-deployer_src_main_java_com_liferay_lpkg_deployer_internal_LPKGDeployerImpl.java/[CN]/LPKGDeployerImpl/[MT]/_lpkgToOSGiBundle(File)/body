{
  try (UnsyncByteArrayOutputStream unsyncByteArrayOutputStream=new UnsyncByteArrayOutputStream()){
    try (ZipFile zipFile=new ZipFile(lpkgFile);JarOutputStream jarOutputStream=new JarOutputStream(unsyncByteArrayOutputStream)){
      _writeManifest(zipFile,jarOutputStream);
      Enumeration<? extends ZipEntry> zipEntries=zipFile.entries();
      while (zipEntries.hasMoreElements()) {
        ZipEntry zipEntry=zipEntries.nextElement();
        jarOutputStream.putNextEntry(new ZipEntry(zipEntry.getName()));
        StreamUtil.transfer(zipFile.getInputStream(zipEntry),jarOutputStream,false);
        jarOutputStream.closeEntry();
      }
    }
     return new UnsyncByteArrayInputStream(unsyncByteArrayOutputStream.unsafeGetByteArray(),0,unsyncByteArrayOutputStream.size());
  }
 }
