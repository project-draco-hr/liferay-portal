{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long workflowTaskId=ParamUtil.getLong(actionRequest,"workflowTaskId");
  long assigneeUserId=ParamUtil.getLong(actionRequest,"assigneeUserId");
  String comment=ParamUtil.getString(actionRequest,"comment");
  WorkflowTask workflowTask=WorkflowTaskManagerUtil.getWorkflowTask(themeDisplay.getCompanyId(),workflowTaskId);
  if (!_workflowTaskPermissionChecker.hasAssignmentPermission(themeDisplay.getScopeGroupId(),workflowTask,themeDisplay.getPermissionChecker())) {
    throw new PrincipalException("User " + themeDisplay.getUserId() + " does not have "+ "permissions to assign the task "+ workflowTaskId+ "to someone.");
  }
  WorkflowTaskManagerUtil.assignWorkflowTaskToUser(themeDisplay.getCompanyId(),themeDisplay.getUserId(),workflowTaskId,assigneeUserId,comment,null,null);
}
