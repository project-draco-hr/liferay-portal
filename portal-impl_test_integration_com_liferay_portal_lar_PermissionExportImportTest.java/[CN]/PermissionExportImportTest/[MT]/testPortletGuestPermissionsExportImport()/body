{
  LayoutSetPrototype exportLayoutSetPrototype=LayoutTestUtil.addLayoutSetPrototype(ServiceTestUtil.randomString());
  Group exportGroup=exportLayoutSetPrototype.getGroup();
  Layout exportLayout=LayoutTestUtil.addLayout(exportGroup.getGroupId(),ServiceTestUtil.randomString(),true);
  String exportResourcePrimKey=PortletPermissionUtil.getPrimaryKey(exportLayout.getPlid(),_PORTLET_ID);
  Role role=RoleLocalServiceUtil.getRole(TestPropsValues.getCompanyId(),RoleConstants.GUEST);
  addPortletPermissions(exportGroup,role,exportResourcePrimKey);
  Element portletElement=exportPortletPermissions(exportGroup,exportLayout);
  LayoutSetPrototype importLayoutSetPrototype=LayoutTestUtil.addLayoutSetPrototype(ServiceTestUtil.randomString());
  Group importGroup=importLayoutSetPrototype.getGroup();
  Layout importLayout=LayoutTestUtil.addLayout(importGroup.getGroupId(),ServiceTestUtil.randomString(),true);
  String importResourcePrimKey=PortletPermissionUtil.getPrimaryKey(importLayout.getPlid(),_PORTLET_ID);
  importPortletPermissions(importGroup,importLayout,portletElement);
  validateImportedPortletPermissions(importGroup,role,importResourcePrimKey);
}
