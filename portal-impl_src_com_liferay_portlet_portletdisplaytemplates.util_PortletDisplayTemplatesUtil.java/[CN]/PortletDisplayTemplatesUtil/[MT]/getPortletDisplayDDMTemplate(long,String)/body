{
  DDMTemplate portletDisplayDDMTemplate=null;
  try {
    Group group=GroupLocalServiceUtil.getGroup(groupId);
    Group companyGroup=GroupLocalServiceUtil.getCompanyGroup(group.getCompanyId());
    if (displayStyle.startsWith("ddmTemplate_")) {
      String portletDisplayDDMTemplateUuid=displayStyle.substring("ddmTemplate_".length());
      if (Validator.isNotNull(portletDisplayDDMTemplateUuid)) {
        try {
          portletDisplayDDMTemplate=DDMTemplateLocalServiceUtil.getDDMTemplateByUuidAndGroupId(portletDisplayDDMTemplateUuid,groupId);
        }
 catch (        NoSuchTemplateException nste1) {
          try {
            portletDisplayDDMTemplate=DDMTemplateLocalServiceUtil.getDDMTemplateByUuidAndGroupId(portletDisplayDDMTemplateUuid,companyGroup.getGroupId());
          }
 catch (          NoSuchTemplateException nste2) {
          }
        }
      }
    }
  }
 catch (  Exception e) {
  }
  return portletDisplayDDMTemplate;
}
