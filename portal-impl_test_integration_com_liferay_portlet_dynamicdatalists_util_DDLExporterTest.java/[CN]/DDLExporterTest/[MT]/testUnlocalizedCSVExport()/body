{
  boolean localizedTest=false;
  DDMForm ddmForm=DDLRecordTestUtil.createDDMForm(_availableLocales,_defaultLocale);
  createAllDDMFormFields(ddmForm,localizedTest);
  DDMFormValues ddmFormValues=DDLRecordTestUtil.createDDMFormValues(ddmForm,_availableLocales,_defaultLocale);
  createAllDDMFormFieldValues(ddmFormValues,localizedTest);
  DDLRecordSet recordSet=addRecordSet(ddmForm);
  DDLRecordTestHelper recordTestHelper=new DDLRecordTestHelper(_group,recordSet);
  recordTestHelper.addRecord(ddmFormValues,WorkflowConstants.ACTION_PUBLISH);
  DDLCSVExporter ddlCSVExporter=new DDLCSVExporter();
  byte[] exportFileBytes=ddlCSVExporter.export(recordSet.getRecordSetId());
  File exportFile=new File("export-csv-file.csv");
  FileUtil.write(exportFile,exportFileBytes);
  String expectedFileContent=read("expected-csv-file.csv") + StringPool.NEW_LINE;
  String actualFileContent=FileUtil.read(exportFile);
  Assert.assertEquals(expectedFileContent,actualFileContent);
}
