{
  Session session=null;
  try {
    if (shoppingCart.isNew() || shoppingCart.isModified()) {
      session=openSession();
      if (shoppingCart.isNew()) {
        ShoppingCartHBM shoppingCartHBM=new ShoppingCartHBM(shoppingCart.getCartId(),shoppingCart.getCompanyId(),shoppingCart.getUserId(),shoppingCart.getCreateDate(),shoppingCart.getModifiedDate(),shoppingCart.getItemIds(),shoppingCart.getCouponIds(),shoppingCart.getAltShipping(),shoppingCart.getInsure());
        session.save(shoppingCartHBM);
        session.flush();
      }
 else {
        ShoppingCartHBM shoppingCartHBM=(ShoppingCartHBM)session.get(ShoppingCartHBM.class,shoppingCart.getPrimaryKey());
        if (shoppingCartHBM != null) {
          shoppingCartHBM.setCompanyId(shoppingCart.getCompanyId());
          shoppingCartHBM.setUserId(shoppingCart.getUserId());
          shoppingCartHBM.setCreateDate(shoppingCart.getCreateDate());
          shoppingCartHBM.setModifiedDate(shoppingCart.getModifiedDate());
          shoppingCartHBM.setItemIds(shoppingCart.getItemIds());
          shoppingCartHBM.setCouponIds(shoppingCart.getCouponIds());
          shoppingCartHBM.setAltShipping(shoppingCart.getAltShipping());
          shoppingCartHBM.setInsure(shoppingCart.getInsure());
          session.flush();
        }
 else {
          shoppingCartHBM=new ShoppingCartHBM(shoppingCart.getCartId(),shoppingCart.getCompanyId(),shoppingCart.getUserId(),shoppingCart.getCreateDate(),shoppingCart.getModifiedDate(),shoppingCart.getItemIds(),shoppingCart.getCouponIds(),shoppingCart.getAltShipping(),shoppingCart.getInsure());
          session.save(shoppingCartHBM);
          session.flush();
        }
      }
      shoppingCart.setNew(false);
      shoppingCart.setModified(false);
      shoppingCart.protect();
      ShoppingCartPool.update(shoppingCart.getPrimaryKey(),shoppingCart);
    }
    return shoppingCart;
  }
 catch (  HibernateException he) {
    throw new SystemException(he);
  }
 finally {
    closeSession(session);
  }
}
