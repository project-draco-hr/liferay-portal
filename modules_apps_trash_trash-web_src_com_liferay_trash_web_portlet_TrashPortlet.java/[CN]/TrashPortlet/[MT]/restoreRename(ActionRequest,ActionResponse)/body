{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long trashEntryId=ParamUtil.getLong(actionRequest,"trashEntryId");
  String newName=ParamUtil.getString(actionRequest,"newName");
  if (Validator.isNull(newName)) {
    String oldName=ParamUtil.getString(actionRequest,"oldName");
    newName=TrashUtil.getNewName(themeDisplay,null,0,oldName);
  }
  TrashEntry entry=_trashEntryService.restoreEntry(trashEntryId,0,newName);
  TrashUndoUtil.addRestoreData(actionRequest,entry.getClassName(),entry.getClassPK());
  sendRedirect(actionRequest,actionResponse);
}
