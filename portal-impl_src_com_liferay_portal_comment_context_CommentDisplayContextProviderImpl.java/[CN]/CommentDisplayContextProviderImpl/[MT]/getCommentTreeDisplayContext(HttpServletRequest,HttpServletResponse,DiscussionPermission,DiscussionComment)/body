{
  DiscussionRequestHelper discussionRequestHelper=new DiscussionRequestHelper(request);
  DiscussionTaglibHelper discussionTaglibHelper=new DiscussionTaglibHelper(request);
  CommentTreeDisplayContext commentTreeDisplayContext=new DefaultCommentTreeDisplayContext(discussionRequestHelper,discussionTaglibHelper,discussionPermission,discussionComment);
  for (  CommentDisplayContextFactory commentDisplayContextFactory : getDisplayContextFactories()) {
    commentTreeDisplayContext=commentDisplayContextFactory.getCommentTreeDisplayContext(commentTreeDisplayContext,request,response,discussionPermission,discussionComment);
  }
  return commentTreeDisplayContext;
}
