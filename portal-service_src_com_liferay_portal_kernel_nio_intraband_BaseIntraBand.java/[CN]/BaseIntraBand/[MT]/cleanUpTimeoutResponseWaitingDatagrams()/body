{
  long currentTime=System.currentTimeMillis();
  Map<Long,Long> removeMap=timeoutMap.headMap(currentTime,true);
  if (!removeMap.isEmpty()) {
    Iterator<Map.Entry<Long,Long>> removeIterator=removeMap.entrySet().iterator();
    while (removeIterator.hasNext()) {
      Map.Entry<Long,Long> removeEntry=removeIterator.next();
      removeIterator.remove();
      Long sequenceId=removeEntry.getValue();
      Datagram datagram=responseWaitingMap.remove(sequenceId);
      if (_log.isWarnEnabled()) {
        _log.warn("Removed timeout response waiting Datagram " + datagram);
      }
      datagram.completionHandler.timeouted(datagram.attachment);
    }
  }
}
