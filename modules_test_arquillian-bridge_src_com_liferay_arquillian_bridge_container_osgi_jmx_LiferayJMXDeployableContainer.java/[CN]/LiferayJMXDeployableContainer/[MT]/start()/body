{
  long timeout=GetterUtil.getLong(PropsUtil.get("jmx.timeout"),30);
  MBeanServerConnection mbeanServer=null;
  try {
    mbeanServer=getMBeanServerConnection(timeout,TimeUnit.SECONDS);
    mbeanServerInstance.set(mbeanServer);
  }
 catch (  TimeoutException te) {
    throw new LifecycleException("Unable to connect to MBeanServer",te);
  }
  try {
    bundleStateMBean=getMBeanProxy(mbeanServer,new ObjectName("osgi.core:type=bundleState,*"),BundleStateMBean.class,timeout,TimeUnit.SECONDS);
    frameworkMBean=getMBeanProxy(mbeanServer,new ObjectName("osgi.core:type=framework,*"),FrameworkMBean.class,timeout,TimeUnit.SECONDS);
    serviceStateMBean=getMBeanProxy(mbeanServer,new ObjectName("osgi.core:type=serviceState,*"),ServiceStateMBean.class,timeout,TimeUnit.SECONDS);
  }
 catch (  Exception e) {
    throw new LifecycleException("Unable to start container",e);
  }
}
