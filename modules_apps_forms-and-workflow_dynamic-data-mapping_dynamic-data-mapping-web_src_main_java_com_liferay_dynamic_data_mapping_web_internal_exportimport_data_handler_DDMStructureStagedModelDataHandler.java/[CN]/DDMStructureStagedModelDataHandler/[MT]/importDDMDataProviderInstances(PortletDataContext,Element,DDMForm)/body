{
  String[] ddmDataProviderInstanceIds=StringUtil.split(structureElement.attributeValue(_DDM_DATA_PROVIDER_INSTANCE_IDS));
  if (ArrayUtil.isEmpty(ddmDataProviderInstanceIds)) {
    return;
  }
  Map<Long,Long> dataProviderInstanceIdsMap=(Map<Long,Long>)portletDataContext.getNewPrimaryKeysMap(DDMDataProviderInstance.class);
  for (  String ddmDataProviderInstanceId : ddmDataProviderInstanceIds) {
    long oldDDMDataProviderInstanceId=Long.parseLong(ddmDataProviderInstanceId);
    long newDDMDataProviderInstanceId=MapUtil.getLong(dataProviderInstanceIdsMap,oldDDMDataProviderInstanceId);
    StagedModelDataHandlerUtil.importReferenceStagedModel(portletDataContext,DDMDataProviderInstance.class,newDDMDataProviderInstanceId);
  }
  List<DDMFormField> ddmFormFields=ddmForm.getDDMFormFields();
  for (  DDMFormField ddmFormField : ddmFormFields) {
    if (!ddmFormField.getType().equals(DDMFormFieldType.SELECT)) {
      continue;
    }
    long oldDDMDataProviderInstanceId=Long.valueOf(String.valueOf(ddmFormField.getProperty("ddmDataProviderInstanceId")));
    long newDDMDataProviderInstanceId=MapUtil.getLong(dataProviderInstanceIdsMap,oldDDMDataProviderInstanceId);
    ddmFormField.setProperty("ddmDataProviderInstanceId",newDDMDataProviderInstanceId);
  }
}
