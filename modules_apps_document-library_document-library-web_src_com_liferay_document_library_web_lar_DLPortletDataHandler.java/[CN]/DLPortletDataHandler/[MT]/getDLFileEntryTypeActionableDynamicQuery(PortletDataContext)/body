{
  ActionableDynamicQuery actionableDynamicQuery=DLFileEntryTypeLocalServiceUtil.getExportActionableDynamicQuery(portletDataContext);
  final ActionableDynamicQuery.AddCriteriaMethod addCriteriaMethod=actionableDynamicQuery.getAddCriteriaMethod();
  actionableDynamicQuery.setAddCriteriaMethod(new ActionableDynamicQuery.AddCriteriaMethod(){
    @Override public void addCriteria(    DynamicQuery dynamicQuery){
      addCriteriaMethod.addCriteria(dynamicQuery);
      Property property=PropertyFactoryUtil.forName("groupId");
      dynamicQuery.add(property.in(new Long[]{portletDataContext.getScopeGroupId()}));
    }
  }
);
  actionableDynamicQuery.setPerformActionMethod(new ActionableDynamicQuery.PerformActionMethod<DLFileEntryType>(){
    @Override public void performAction(    DLFileEntryType dlFileEntryType) throws PortalException {
      if (dlFileEntryType.isExportable()) {
        StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,dlFileEntryType);
      }
    }
  }
);
  return actionableDynamicQuery;
}
