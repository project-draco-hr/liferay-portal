{
  if (_dynamicServletRequest == null) {
    _dynamicServletRequest=new DynamicServletRequest(request);
    request=_dynamicServletRequest;
  }
  Map<String,String[]> params=_dynamicServletRequest.getDynamicParameterMap();
  if (!_allowEmptyParam && ((value == null) || (value.length() == 0))) {
    params.remove(name);
    if (_removedParameterNames == null) {
      _removedParameterNames=new HashSet<>();
    }
    _removedParameterNames.add(name);
    return;
  }
  String[] values=params.get(name);
  if (!_copyCurrentRenderParameters || (values == null)) {
    values=new String[]{value};
  }
 else {
    String[] newValues=new String[values.length + 1];
    System.arraycopy(values,0,newValues,0,values.length);
    newValues[newValues.length - 1]=value;
    values=newValues;
  }
  params.put(name,values);
}
