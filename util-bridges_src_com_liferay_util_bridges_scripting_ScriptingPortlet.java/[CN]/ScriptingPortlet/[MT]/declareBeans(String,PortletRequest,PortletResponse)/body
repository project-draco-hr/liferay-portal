{
  StringBuilder sb=new StringBuilder();
  sb.append(getGlobalScript());
  sb.append(code);
  String script=sb.toString();
  PortletConfig portletConfig=getPortletConfig();
  PortletContext portletContext=getPortletContext();
  Map[] portletObjects=ScriptingUtil.getPortletObjects(portletConfig,portletContext,portletRequest,portletResponse);
  Map<String,Object> inputObjects=portletObjects[0];
  Map<String,Class> inputObjectTypes=portletObjects[1];
  long executionTime=-System.currentTimeMillis();
  ScriptingUtil.execUnconstrained(inputObjects,inputObjectTypes,scriptingLanguage,script);
  executionTime+=System.currentTimeMillis();
  if (portletResponse instanceof RenderResponse) {
    ((RenderResponse)portletResponse).getPortletOutputStream().write((code.hashCode() + " " + executionTime+ "ms").getBytes());
  }
  _log.error(code.hashCode() + " " + executionTime+ "ms");
}
