{
  WikiPage parentPage=WikiTestUtil.addPage(TestPropsValues.getUserId(),groupId,nodeId,RandomTestUtil.randomString(),true);
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(groupId);
  WikiPage childPage=WikiTestUtil.addPage(TestPropsValues.getUserId(),nodeId,RandomTestUtil.randomString(),RandomTestUtil.randomString(),parentPage.getTitle(),true,serviceContext);
  WikiPage grandchildPage=WikiTestUtil.addPage(TestPropsValues.getUserId(),nodeId,RandomTestUtil.randomString(),RandomTestUtil.randomString(),childPage.getTitle(),true,serviceContext);
  if (explicitMoveChildToTrash) {
    WikiPageLocalServiceUtil.movePageToTrash(TestPropsValues.getUserId(),childPage);
  }
  if (explicitMoveParentToTrash) {
    WikiPageLocalServiceUtil.movePageToTrash(TestPropsValues.getUserId(),parentPage);
  }
  parentPage=WikiPageLocalServiceUtil.getPageByPageId(parentPage.getPageId());
  childPage=WikiPageLocalServiceUtil.getPageByPageId(childPage.getPageId());
  grandchildPage=WikiPageLocalServiceUtil.getPageByPageId(grandchildPage.getPageId());
  return new WikiPage[]{parentPage,childPage,grandchildPage};
}
