{
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(groupId);
  WikiTestUtil.addPage(TestPropsValues.getUserId(),groupId,nodeId,"TestPage",true);
  WikiPage childPage=WikiTestUtil.addPage(TestPropsValues.getUserId(),nodeId,"TestChildPage",RandomTestUtil.randomString(),"TestPage",true,serviceContext);
  WikiPage grandchildPage=WikiTestUtil.addPage(TestPropsValues.getUserId(),nodeId,"TestGrandchildPage",RandomTestUtil.randomString(),"TestChildPage",true,serviceContext);
  WikiPageLocalServiceUtil.renamePage(TestPropsValues.getUserId(),nodeId,"TestPage","B",serviceContext);
  WikiPage page=WikiPageLocalServiceUtil.getPage(nodeId,"B");
  WikiPage redirectPage=WikiPageLocalServiceUtil.getPage(nodeId,"TestPage");
  childPage=WikiPageLocalServiceUtil.getPageByPageId(childPage.getPageId());
  grandchildPage=WikiPageLocalServiceUtil.getPageByPageId(grandchildPage.getPageId());
  return new WikiPage[]{page,redirectPage,childPage,grandchildPage};
}
