{
  try {
    long plid=ParamUtil.getLong(request,"p_l_id");
    long primaryKey=ParamUtil.getLong(request,getPrimaryKeyParameterName());
    Object[] plidAndPortletId=getPlidAndPortletId(request,plid,primaryKey);
    plid=(Long)plidAndPortletId[0];
    String portletId=(String)plidAndPortletId[1];
    PortletURL portletURL=PortletURLFactoryUtil.create(request,portletId,plid,PortletRequest.RENDER_PHASE);
    portletURL.setParameter("struts_action",getStrutsAction(request,portletId));
    boolean inheritRedirect=ParamUtil.getBoolean(request,"inheritRedirect");
    String redirect=null;
    if (inheritRedirect) {
      String noSuchEntryRedirect=ParamUtil.getString(request,"noSuchEntryRedirect");
      redirect=HttpUtil.getParameter(noSuchEntryRedirect,"redirect",false);
      redirect=HttpUtil.decodeURL(redirect);
    }
 else {
      redirect=ParamUtil.getString(request,"redirect");
    }
    if (Validator.isNotNull(redirect)) {
      portletURL.setParameter("redirect",redirect);
    }
    setPrimaryKeyParameter(portletURL,primaryKey);
    portletURL.setPortletMode(PortletMode.VIEW);
    portletURL.setWindowState(WindowState.NORMAL);
    portletURL=processPortletURL(request,portletURL);
    response.setHeader("Location",portletURL.toString());
    response.setStatus(response.SC_MOVED_PERMANENTLY);
    return null;
  }
 catch (  Exception e) {
    String noSuchEntryRedirect=ParamUtil.getString(request,"noSuchEntryRedirect");
    if (Validator.isNotNull(noSuchEntryRedirect) && (e instanceof NoSuchLayoutException)) {
      response.setHeader("Location",noSuchEntryRedirect);
      response.setStatus(response.SC_MOVED_PERMANENTLY);
    }
 else {
      PortalUtil.sendError(e,request,response);
    }
    return null;
  }
}
