{
  Layout layout=LayoutLocalServiceUtil.getLayout(plid);
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
  long sourceGroupId=getGroupId(primaryKey);
  if ((sourceGroupId == layout.getGroupId()) || (layout.getPrivateLayout() && !SitesUtil.isUserGroupLayoutSetViewable(permissionChecker,layout.getGroup()))) {
    return;
  }
  Group sourceGroup=GroupLocalServiceUtil.getGroup(sourceGroupId);
  layout=new VirtualLayout(layout,sourceGroup);
  request.setAttribute(WebKeys.LAYOUT,layout);
}
