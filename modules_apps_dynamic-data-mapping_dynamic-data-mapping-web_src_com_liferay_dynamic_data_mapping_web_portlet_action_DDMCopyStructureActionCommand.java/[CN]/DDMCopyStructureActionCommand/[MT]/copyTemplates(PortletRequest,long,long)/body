{
  long classNameId=PortalUtil.getClassNameId(DDMStructure.class);
  ServiceContext serviceContext=ServiceContextFactory.getInstance(DDMTemplate.class.getName(),portletRequest);
  long resourceClassNameId=ParamUtil.getLong(portletRequest,DDMConstants.RESOURCE_CLASS_NAME_ID);
  boolean copyDisplayTemplates=ParamUtil.getBoolean(portletRequest,DDMConstants.COPY_DISPLAY_TEMPLATES);
  if (copyDisplayTemplates) {
    DDMTemplateServiceUtil.copyTemplates(classNameId,oldClassPK,resourceClassNameId,newClassPK,DDMTemplateConstants.TEMPLATE_TYPE_DISPLAY,serviceContext);
  }
  boolean copyFormTemplates=ParamUtil.getBoolean(portletRequest,DDMConstants.COPY_FORM_TEMPLATES);
  if (copyFormTemplates) {
    DDMTemplateServiceUtil.copyTemplates(classNameId,oldClassPK,resourceClassNameId,newClassPK,DDMTemplateConstants.TEMPLATE_TYPE_FORM,serviceContext);
  }
}
