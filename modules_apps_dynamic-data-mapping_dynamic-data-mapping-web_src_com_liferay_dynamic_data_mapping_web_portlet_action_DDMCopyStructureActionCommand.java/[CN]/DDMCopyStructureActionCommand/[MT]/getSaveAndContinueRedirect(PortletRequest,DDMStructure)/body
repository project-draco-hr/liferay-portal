{
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  PortletURLImpl portletURL=new PortletURLImpl(portletRequest,PortletKeys.DYNAMIC_DATA_MAPPING,themeDisplay.getPlid(),PortletRequest.RENDER_PHASE);
  portletURL.setParameter(DDMConstants.MVC_PATH,"/copy_structure.jsp");
  long classNameId=PortalUtil.getClassNameId(DDMStructure.class);
  portletURL.setParameter(DDMConstants.CLASS_NAME_ID,String.valueOf(classNameId),false);
  portletURL.setParameter(DDMConstants.CLASS_PK,String.valueOf(structure.getStructureId()),false);
  portletURL.setParameter(DDMConstants.COPY_FORM_TEMPLATES,ParamUtil.getString(portletRequest,DDMConstants.COPY_FORM_TEMPLATES),false);
  portletURL.setParameter(DDMConstants.COPY_DISPLAY_TEMPLATES,ParamUtil.getString(portletRequest,DDMConstants.COPY_DISPLAY_TEMPLATES),false);
  portletURL.setWindowState(portletRequest.getWindowState());
  return portletURL.toString();
}
