{
  List<DDLRecord> records=DDLRecordLocalServiceUtil.getMinAndMaxCompanyRecords(companyId,WorkflowConstants.STATUS_APPROVED,scope,startRecordId,endRecordId);
  Collection<Document> documents=new ArrayList<>(records.size());
  for (  DDLRecord record : records) {
    try {
      Document document=getDocument(record);
      documents.add(document);
    }
 catch (    PortalException pe) {
      if (_log.isWarnEnabled()) {
        _log.warn("Unable to index dynamic data lists record " + record.getRecordId(),pe);
      }
    }
  }
  SearchEngineUtil.updateDocuments(getSearchEngineId(),companyId,documents,isCommitImmediately());
}
