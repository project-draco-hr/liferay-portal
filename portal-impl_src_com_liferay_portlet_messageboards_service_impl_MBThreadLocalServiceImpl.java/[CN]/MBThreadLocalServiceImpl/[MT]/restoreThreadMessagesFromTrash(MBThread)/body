{
  List<MBMessage> messages=mbMessageLocalService.getThreadMessages(thread.getThreadId(),WorkflowConstants.STATUS_ANY);
  for (  MBMessage message : messages) {
    if (message.isDiscussion()) {
      return;
    }
    if (message.getStatus() == WorkflowConstants.STATUS_APPROVED) {
      assetEntryLocalService.updateVisible(MBMessage.class.getName(),message.getMessageId(),true);
    }
    socialActivityCounterLocalService.disableActivityCounters(MBMessage.class.getName(),message.getMessageId());
    Indexer indexer=IndexerRegistryUtil.nullSafeGetIndexer(MBMessage.class);
    indexer.reindex(message);
  }
}
