{
  if (!inherit) {
    return mbThreadPersistence.findByC_P(categoryId,priority);
  }
  List<MBThread> threads=new ArrayList<MBThread>();
  while (!MBUtil.isDefaultParentCategoryId(categoryId) && !MBUtil.isDiscussionCategoryId(categoryId)) {
    threads.addAll(0,mbThreadPersistence.findByC_P(categoryId,priority));
    MBCategory category=mbCategoryPersistence.findByPrimaryKey(categoryId);
    categoryId=category.getParentCategoryId();
  }
  return threads;
}
