{
  MBThread thread=mbThreadPersistence.findByPrimaryKey(threadId);
  User user=userPersistence.findByPrimaryKey(userId);
  thread.setStatus(status);
  thread.setStatusByUserId(user.getUserId());
  thread.setStatusByUserName(user.getFullName());
  thread.setStatusDate(new Date());
  mbThreadPersistence.update(thread);
  if (thread.getCategoryId() != MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID) {
    MBCategory category=mbCategoryPersistence.fetchByPrimaryKey(thread.getCategoryId());
    if (category != null) {
      MBUtil.updateCategoryStatistics(category.getCompanyId(),category.getCategoryId());
    }
  }
  Indexer<MBThread> indexer=IndexerRegistryUtil.nullSafeGetIndexer(MBThread.class);
  indexer.reindex(thread);
  return thread;
}
