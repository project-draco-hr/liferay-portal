{
  if (_channel != null) {
    throw new IllegalStateException("Netty fabric client was already started");
  }
  if (_log.isInfoEnabled()) {
    _log.info("Starting Netty fabric client using " + _nettyFabricClientConfig);
  }
  Runtime runtime=Runtime.getRuntime();
  runtime.addShutdownHook(_shutdownThread);
  _bootstrap=new Bootstrap();
  _bootstrap.channel(NioSocketChannel.class);
  _bootstrap.group(new NioEventLoopGroup(_nettyFabricClientConfig.getEventLoopGroupThreadCount(),new NamedThreadFactory("Netty Fabric Client/NIO Event Loop Group",Thread.NORM_PRIORITY,null)));
  _bootstrap.handler(new NettyFabricClientChannelInitializer());
  int reconnectCount=_nettyFabricClientConfig.getReconnectCount();
  if (reconnectCount < 0) {
    reconnectCount=Integer.MAX_VALUE;
  }
  _reconnectCounter.set(reconnectCount);
  doConnect();
}
