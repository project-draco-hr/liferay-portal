{
  if (!ServerDetector.isJOnAS() && ServerDetector.isJetty()) {
    return new JettySharedSessionWrapper(session,_sharedSessionAttributes,_requireSerializable);
  }
 else {
    return new SharedSessionWrapper(session,_sharedSessionAttributes,_requireSerializable);
  }
}
