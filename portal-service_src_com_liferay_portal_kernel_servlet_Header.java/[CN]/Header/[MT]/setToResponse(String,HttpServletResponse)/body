{
  if (_type == Type.COOKIE) {
    String cookieString=response.getHeader(HttpHeaders.SET_COOKIE);
    if (Validator.isNull(cookieString)) {
      response.addCookie(_cookieValue);
    }
 else {
      Map<String,HttpCookie> httpCookies=CookieUtil.parseHttpCookies(cookieString);
      httpCookies.put(_cookieValue.getName(),CookieUtil.toHttpCookie(_cookieValue));
      boolean first=true;
      for (      HttpCookie httpCookie : httpCookies.values()) {
        if (first) {
          response.setHeader(HttpHeaders.SET_COOKIE,httpCookie.toString());
          first=false;
        }
 else {
          response.addHeader(HttpHeaders.SET_COOKIE,httpCookie.toString());
        }
      }
    }
  }
 else   if (_type == Type.DATE) {
    response.setDateHeader(key,_dateValue);
  }
 else   if (_type == Type.INTEGER) {
    response.setIntHeader(key,_intValue);
  }
 else   if (_type == Type.STRING) {
    response.setHeader(key,_stringValue);
  }
 else {
    throw new IllegalStateException("Invalid type " + _type);
  }
}
