{
  int pos=fbmlPortletURL.indexOf(StringPool.SLASH,Http.HTTPS_WITH_SLASH.length());
  StringBundler sb=new StringBundler(4);
  sb.append(fbmlPortletURL.substring(0,pos));
  sb.append(FACEBOOK_SERVLET_PATH);
  sb.append(facebookCanvasPageURL);
  sb.append(fbmlPortletURL.substring(pos));
  String callbackURL=sb.toString();
  if (!callbackURL.endsWith(StringPool.SLASH)) {
    callbackURL+=StringPool.SLASH;
  }
  return callbackURL;
}
