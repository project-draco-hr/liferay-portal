{
  String path=GetterUtil.getString(request.getPathInfo());
  if (Validator.isNull(path)) {
    return null;
  }
  int pos=path.indexOf(StringPool.SLASH,1);
  if (pos == -1) {
    return null;
  }
  String facebookCanvasPageURL=path.substring(1,pos);
  if (_log.isDebugEnabled()) {
    _log.debug("Facebook canvas page URL " + facebookCanvasPageURL);
  }
  if (Validator.isNull(facebookCanvasPageURL)) {
    return null;
  }
  String redirect=path.substring(pos);
  if (_log.isDebugEnabled()) {
    _log.debug("Redirect " + redirect);
  }
  if (Validator.isNull(redirect)) {
    return null;
  }
  pos=path.indexOf("/-/");
  String appPath=StringPool.BLANK;
  if (pos != -1) {
    pos=path.indexOf(StringPool.SLASH,pos + 3);
    if (pos != -1) {
      appPath=path.substring(pos);
    }
  }
  return new String[]{facebookCanvasPageURL,redirect,appPath};
}
