{
  structureId=StringUtil.toUpperCase(structureId.trim());
  JournalStructure structure=fetchStructure(groupId,structureId);
  if (structure != null) {
    return structure;
  }
  if (!includeGlobalStructures) {
    throw new NoSuchStructureException("No JournalStructure exists with the structure ID " + structureId);
  }
  Group group=groupPersistence.findByPrimaryKey(groupId);
  Group companyGroup=groupLocalService.getCompanyGroup(group.getCompanyId());
  return doGetStructure(companyGroup.getGroupId(),structureId);
}
