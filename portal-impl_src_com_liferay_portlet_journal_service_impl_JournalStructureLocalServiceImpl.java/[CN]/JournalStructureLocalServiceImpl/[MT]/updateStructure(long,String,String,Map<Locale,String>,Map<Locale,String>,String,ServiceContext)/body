{
  structureId=structureId.trim().toUpperCase();
  try {
    xsd=JournalUtil.processXMLAttributes(xsd);
    xsd=DDMXMLUtil.formatXML(xsd);
  }
 catch (  Exception e) {
    throw new StructureXsdException();
  }
  validateParentStructureId(groupId,structureId,parentStructureId);
  validate(groupId,parentStructureId,nameMap,xsd);
  JournalStructure structure=journalStructurePersistence.findByG_S(groupId,structureId);
  structure.setModifiedDate(serviceContext.getModifiedDate(null));
  structure.setParentStructureId(parentStructureId);
  structure.setNameMap(nameMap);
  structure.setDescriptionMap(descriptionMap);
  structure.setXsd(xsd);
  journalStructurePersistence.update(structure,false);
  ExpandoBridge expandoBridge=structure.getExpandoBridge();
  expandoBridge.setAttributes(serviceContext);
  return structure;
}
