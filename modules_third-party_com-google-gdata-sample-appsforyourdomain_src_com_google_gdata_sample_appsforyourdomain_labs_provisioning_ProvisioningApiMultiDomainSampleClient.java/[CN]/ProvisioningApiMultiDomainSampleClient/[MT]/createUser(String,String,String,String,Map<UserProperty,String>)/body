{
  GenericEntry entry=new GenericEntry();
  entry.addProperty("userEmail",email);
  entry.addProperty("password",password);
  entry.addProperty("firstName",firstName);
  entry.addProperty("lastName",lastName);
  for (  Map.Entry<UserProperty,String> mapEntry : optionalAttributes.entrySet()) {
    String value=mapEntry.getValue();
    if (value == null || value.length() == 0) {
      continue;
    }
switch (mapEntry.getKey()) {
case HASH_FUNCTION:
      entry.addProperty("name",value);
    break;
case ADMIN:
  entry.addProperty("isAdmin",value);
break;
case SUSPENDED:
entry.addProperty("isSuspended",value);
break;
case CHANGE_PASSWORD_AT_NEXT_LOGIN:
entry.addProperty("isChangePasswordAtNextLogin",value);
break;
case QUOTA:
entry.addProperty("quotaInGb",value);
break;
case IP_WHITELIST:
entry.addProperty("ipWhitelisted",value);
break;
default :
break;
}
}
return service.insert(new URL("https://apps-apis.google.com/a/feeds/user/2.0/" + domain),entry);
}
