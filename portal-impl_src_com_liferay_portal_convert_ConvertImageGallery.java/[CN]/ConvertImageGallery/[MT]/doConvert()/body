{
  boolean cacheRegistryActive=CacheRegistryUtil.isActive();
  try {
    CacheRegistryUtil.setActive(false);
    ClassLoader classLoader=PortalClassLoaderUtil.getClassLoader();
    _sourceHook=(Hook)classLoader.loadClass(PropsValues.IMAGE_HOOK_IMPL).newInstance();
    String[] values=getParameterValues();
    String targetHookClassName=values[0];
    _targetHook=(Hook)classLoader.loadClass(targetHookClassName).newInstance();
    migrateImages();
    if (_sourceHook instanceof DatabaseHook) {
      DB db=DBFactoryUtil.getDB();
      db.runSQL("update Image set text_ = ''");
    }
    PropsValues.IMAGE_HOOK_IMPL=targetHookClassName;
  }
  finally {
    CacheRegistryUtil.setActive(cacheRegistryActive);
  }
}
