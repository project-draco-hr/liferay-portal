{
  boolean cacheRegistryActive=CacheRegistryUtil.isActive();
  try {
    CacheRegistryUtil.setActive(false);
    ClassLoader classLoader=PortalClassLoaderUtil.getClassLoader();
    String sourceHookClassName=FileSystemHook.class.getName();
    if (Validator.isNotNull(PropsValues.IMAGE_HOOK_IMPL)) {
      sourceHookClassName=PropsValues.IMAGE_HOOK_IMPL;
    }
    _sourceHook=(Hook)classLoader.loadClass(sourceHookClassName).newInstance();
    String[] values=getParameterValues();
    String targetHookClassName=values[0];
    _targetHook=(Hook)classLoader.loadClass(targetHookClassName).newInstance();
    migrateImages();
    if (_sourceHook instanceof DatabaseHook) {
      DB db=DBFactoryUtil.getDB();
      db.runSQL("update Image set text_ = ''");
    }
  }
  finally {
    CacheRegistryUtil.setActive(cacheRegistryActive);
  }
}
