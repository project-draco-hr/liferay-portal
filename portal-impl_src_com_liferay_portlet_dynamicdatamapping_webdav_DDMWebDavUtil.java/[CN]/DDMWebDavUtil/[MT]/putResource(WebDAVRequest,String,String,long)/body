{
  try {
    Resource resource=getResource(webDavRequest,rootPath,token,classNameId);
    if (resource == null) {
      return HttpServletResponse.SC_NOT_FOUND;
    }
    Object model=resource.getModel();
    if (model instanceof DDMStructure) {
      DDMStructure ddmStructure=(DDMStructure)model;
      HttpServletRequest request=webDavRequest.getHttpServletRequest();
      String xsd=StringUtil.read(request.getInputStream());
      DDMStructureServiceUtil.updateStructure(ddmStructure.getGroupId(),ddmStructure.getParentStructureId(),ddmStructure.getClassNameId(),ddmStructure.getStructureKey(),ddmStructure.getNameMap(),ddmStructure.getDescriptionMap(),xsd,new ServiceContext());
      return HttpServletResponse.SC_CREATED;
    }
 else     if (model instanceof DDMTemplate) {
      DDMTemplate ddmTemplate=(DDMTemplate)model;
      HttpServletRequest request=webDavRequest.getHttpServletRequest();
      String script=StringUtil.read(request.getInputStream());
      DDMTemplateServiceUtil.updateTemplate(ddmTemplate.getTemplateId(),ddmTemplate.getNameMap(),ddmTemplate.getDescriptionMap(),ddmTemplate.getType(),ddmTemplate.getMode(),ddmTemplate.getLanguage(),script,ddmTemplate.isCacheable(),ddmTemplate.isSmallImage(),ddmTemplate.getSmallImageURL(),null,new ServiceContext());
      return HttpServletResponse.SC_CREATED;
    }
 else {
      return HttpServletResponse.SC_FORBIDDEN;
    }
  }
 catch (  PortalException pe) {
    return HttpServletResponse.SC_FORBIDDEN;
  }
catch (  Exception e) {
    throw new WebDAVException(e);
  }
}
