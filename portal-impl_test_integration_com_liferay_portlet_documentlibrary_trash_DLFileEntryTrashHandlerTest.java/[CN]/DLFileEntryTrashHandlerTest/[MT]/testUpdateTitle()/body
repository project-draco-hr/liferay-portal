{
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(group.getGroupId());
  DLFileEntry dlFileEntry=(DLFileEntry)addBaseModelWithWorkflow(true,serviceContext);
  moveBaseModelToTrash(dlFileEntry.getFileEntryId());
  dlFileEntry=DLFileEntryLocalServiceUtil.getFileEntry(dlFileEntry.getFileEntryId());
  DLFileVersion dlFileVersion=dlFileEntry.getLatestFileVersion(true);
  TrashHandler trashHandler=TrashHandlerRegistryUtil.getTrashHandler(getBaseModelClassName());
  String newTitle=RandomTestUtil.randomString();
  trashHandler.updateTitle(dlFileEntry.getFileEntryId(),newTitle);
  dlFileEntry=DLFileEntryLocalServiceUtil.getFileEntry(dlFileEntry.getFileEntryId());
  dlFileVersion=DLFileVersionLocalServiceUtil.getFileVersion(dlFileVersion.getFileVersionId());
  Assert.assertEquals(dlFileEntry.getTitle(),dlFileVersion.getTitle());
  Assert.assertEquals(newTitle,dlFileEntry.getTitle());
  Assert.assertEquals(DLUtil.getSanitizedFileName(newTitle,dlFileEntry.getExtension()),dlFileEntry.getFileName());
  Assert.assertEquals(newTitle,dlFileVersion.getTitle());
  Assert.assertEquals(DLUtil.getSanitizedFileName(newTitle,dlFileEntry.getExtension()),dlFileVersion.getFileName());
}
