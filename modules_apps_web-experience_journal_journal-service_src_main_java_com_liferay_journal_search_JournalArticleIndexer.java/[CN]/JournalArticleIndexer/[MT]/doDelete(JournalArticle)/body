{
  long classPK=journalArticle.getId();
  if (!isIndexAllArticleVersions()) {
    if (_journalArticleLocalService.getArticlesCount(journalArticle.getGroupId(),journalArticle.getArticleId()) > 0) {
      doReindex(journalArticle);
      return;
    }
 else {
      classPK=journalArticle.getResourcePrimKey();
    }
  }
  deleteDocument(journalArticle.getCompanyId(),classPK);
  if (!journalArticle.isApproved()) {
    return;
  }
  JournalArticle latestIndexableArticle=_journalArticleLocalService.fetchLatestIndexableArticle(journalArticle.getResourcePrimKey());
  if ((latestIndexableArticle == null) || (latestIndexableArticle.getVersion() > journalArticle.getVersion())) {
    return;
  }
  IndexWriterHelperUtil.updateDocument(getSearchEngineId(),journalArticle.getCompanyId(),getDocument(latestIndexableArticle),isCommitImmediately());
}
