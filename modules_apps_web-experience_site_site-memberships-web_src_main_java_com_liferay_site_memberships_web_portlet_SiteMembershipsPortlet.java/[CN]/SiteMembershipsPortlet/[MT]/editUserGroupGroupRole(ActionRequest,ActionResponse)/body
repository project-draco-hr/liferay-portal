{
  Group group=getGroup(actionRequest,actionResponse);
  long userGroupId=ParamUtil.getLong(actionRequest,"userGroupId");
  long[] roleIds=ParamUtil.getLongValues(actionRequest,"rowIds");
  List<UserGroupGroupRole> userGroupGroupRoles=_userGroupGroupRoleLocalService.getUserGroupGroupRoles(userGroupId,group.getGroupId());
  List<Long> curRoleIds=ListUtil.toList(userGroupGroupRoles,UsersAdmin.USER_GROUP_GROUP_ROLE_ID_ACCESSOR);
  List<Long> removeRoleIds=new ArrayList<>();
  for (  long roleId : curRoleIds) {
    if (!ArrayUtil.contains(roleIds,roleId)) {
      removeRoleIds.add(roleId);
    }
  }
  _userGroupGroupRoleService.addUserGroupGroupRoles(userGroupId,group.getGroupId(),roleIds);
  _userGroupGroupRoleService.deleteUserGroupGroupRoles(userGroupId,group.getGroupId(),ArrayUtil.toLongArray(removeRoleIds));
}
