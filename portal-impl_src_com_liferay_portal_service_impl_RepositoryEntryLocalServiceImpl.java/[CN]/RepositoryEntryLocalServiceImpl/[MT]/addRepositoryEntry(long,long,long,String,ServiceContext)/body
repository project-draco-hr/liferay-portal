{
  User user=userPersistence.findByPrimaryKey(userId);
  long repositoryEntryId=counterLocalService.increment();
  RepositoryEntry repositoryEntry=repositoryEntryPersistence.create(repositoryEntryId);
  Date now=new Date();
  repositoryEntry.setUuid(serviceContext.getUuid());
  repositoryEntry.setGroupId(groupId);
  repositoryEntry.setCompanyId(user.getCompanyId());
  repositoryEntry.setUserId(userId);
  repositoryEntry.setUserName(user.getFullName());
  repositoryEntry.setCreateDate(serviceContext.getCreateDate(now));
  repositoryEntry.setModifiedDate(serviceContext.getModifiedDate(now));
  repositoryEntry.setRepositoryId(repositoryId);
  repositoryEntry.setMappedId(mappedId);
  repositoryEntryPersistence.update(repositoryEntry);
  return repositoryEntry;
}
