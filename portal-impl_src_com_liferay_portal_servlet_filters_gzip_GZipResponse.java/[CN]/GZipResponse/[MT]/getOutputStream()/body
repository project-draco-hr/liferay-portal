{
  if (_writer != null) {
    throw new IllegalStateException();
  }
  if (_stream == null) {
    if (_firefox && RSSThreadLocal.isExportRSS()) {
      _unsyncByteArrayOutputStream=new UnsyncByteArrayOutputStream();
      _stream=new GZipServletOutputStream(_unsyncByteArrayOutputStream);
    }
 else {
      _stream=new GZipServletOutputStream(_response.getOutputStream());
    }
  }
  return _stream;
}
