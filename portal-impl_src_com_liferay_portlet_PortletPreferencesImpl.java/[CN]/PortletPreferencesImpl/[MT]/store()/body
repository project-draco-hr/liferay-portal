{
  if (_portletId == null) {
    throw new UnsupportedOperationException();
  }
  try {
    Portlet portlet=PortletLocalServiceUtil.getPortletById(companyId,_portletId);
    if (portlet != null) {
      PreferencesValidator preferencesValidator=PortalUtil.getPreferencesValidator(portlet);
      if (preferencesValidator != null) {
        preferencesValidator.validate(this);
      }
    }
    PortletPreferencesLocalServiceUtil.updatePreferences(getOwnerId(),getOwnerType(),_plid,_portletId,this);
  }
 catch (  SystemException se) {
    throw new IOException(se);
  }
}
