{
  ThemeDisplay themeDisplay=(ThemeDisplay)renderRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long recordSetId=ParamUtil.getLong(renderRequest,"recordSetId");
  DDMForm ddmForm=DDLFormAdminPortletUtil.createSettingsDDMForm(themeDisplay);
  DDMFormRenderingContext ddmFormRenderingContext=createDDMFormRenderingContext(renderRequest,renderResponse);
  setDDMFormRenderingContextDDMFormValues(ddmFormRenderingContext,ddmForm,recordSetId);
  DDMFormLayout ddmFormLayout=DDMFormLayoutFactory.create(DDLRecordSetSettings.class);
  ddmFormLayout.setPaginationMode(DDMFormLayout.TABBED_MODE);
  String ddmFormHTML=_ddmFormRenderer.render(ddmForm,ddmFormLayout,ddmFormRenderingContext);
  renderRequest.setAttribute(DDMWebKeys.DYNAMIC_DATA_MAPPING_FORM_HTML,ddmFormHTML);
  DDLFormAdminDisplayContext ddlFormAdminDisplayContext=new DDLFormAdminDisplayContext(renderRequest,renderResponse,_ddlFormWebConfigurationActivator.getDDLFormWebConfiguration(),_ddlRecordLocalService,_ddlRecordSetService,_ddmDataProviderInstanceLocalService,_ddmFormFieldTypeServicesTracker,_ddmFormFieldTypesJSONSerializer,_ddmFormJSONSerializer,_ddmFormLayoutJSONSerializer,_ddmFormRenderer,_ddmStructureLocalService,_jsonFactory,_storageEngine,_workflowEngineManager);
  renderRequest.setAttribute(WebKeys.PORTLET_DISPLAY_CONTEXT,ddlFormAdminDisplayContext);
}
