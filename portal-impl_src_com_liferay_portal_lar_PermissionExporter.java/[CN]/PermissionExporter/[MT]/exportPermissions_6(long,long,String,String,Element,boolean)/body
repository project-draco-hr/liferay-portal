{
  List<Role> roles=_layoutCache.getGroupRoles_5(groupId,resourceName);
  for (  Role role : roles) {
    if (role.getName().equals(RoleConstants.ADMINISTRATOR)) {
      continue;
    }
    Element roleEl=permissionsEl.addElement("role");
    roleEl.addAttribute("name",role.getName());
    roleEl.addAttribute("description",role.getDescription());
    roleEl.addAttribute("type",String.valueOf(role.getType()));
    List<String> actionIds=null;
    if (portletActions) {
      actionIds=ResourceActionsUtil.getPortletResourceActions(resourceName);
    }
 else {
      actionIds=ResourceActionsUtil.getModelResourceActions(resourceName);
    }
    List<String> actions=ResourcePermissionLocalServiceUtil.getAvailableResourcePermissionActionIds(companyId,resourceName,ResourceConstants.SCOPE_INDIVIDUAL,resourcePrimKey,role.getRoleId(),actionIds);
    for (    String action : actions) {
      Element actionKeyEl=roleEl.addElement("action-key");
      actionKeyEl.addText(action);
    }
  }
}
