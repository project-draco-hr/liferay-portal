{
  portletDataContext.addPermissions("com.liferay.portlet.mobiledevicerules",portletDataContext.getScopeGroupId());
  Document document=SAXReaderUtil.createDocument();
  Element rootElement=document.addElement("mobiledevicerules-data");
  Element ruleGroupsElement=rootElement.addElement("rule-groups");
  List<MDRRuleGroup> ruleGroups=MDRRuleGroupUtil.findByGroupId(portletDataContext.getGroupId());
  for (  MDRRuleGroup ruleGroup : ruleGroups) {
    exportRuleGroup(portletDataContext,ruleGroupsElement,ruleGroup);
  }
  Element ruleGroupInstancesElement=rootElement.addElement("rule-group-instances");
  List<MDRRuleGroupInstance> ruleGroupInstances=MDRRuleGroupInstanceUtil.findByGroupId(portletDataContext.getScopeGroupId());
  for (  MDRRuleGroupInstance ruleGroupInstance : ruleGroupInstances) {
    exportRuleGroupInstance(portletDataContext,ruleGroupInstancesElement,ruleGroupInstance);
  }
  return document.formattedString();
}
