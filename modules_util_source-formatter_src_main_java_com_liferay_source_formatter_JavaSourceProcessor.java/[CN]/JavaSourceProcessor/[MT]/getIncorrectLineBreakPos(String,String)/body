{
  for (int x=line.length(); ; ) {
    int y=line.lastIndexOf(" || ",x - 1);
    int z=line.lastIndexOf(" && ",x - 1);
    x=Math.max(y,z);
    if (x == -1) {
      return x;
    }
    if (ToolsUtil.isInsideQuotes(line,x)) {
      continue;
    }
    if (Validator.isNotNull(previousLine)) {
      String linePart1=stripQuotes(line.substring(0,x));
      int closeParenthesesCount=StringUtil.count(linePart1,StringPool.CLOSE_PARENTHESIS);
      int openParenthesesCount=StringUtil.count(linePart1,StringPool.OPEN_PARENTHESIS);
      if (closeParenthesesCount > openParenthesesCount) {
        return x + 3;
      }
    }
    if (!line.endsWith(" ||") && !line.endsWith(" &&")) {
      continue;
    }
    String linePart2=stripQuotes(line.substring(x));
    int closeParenthesesCount=StringUtil.count(linePart2,StringPool.CLOSE_PARENTHESIS);
    int openParenthesesCount=StringUtil.count(linePart2,StringPool.OPEN_PARENTHESIS);
    if (openParenthesesCount > closeParenthesesCount) {
      return x + 3;
    }
  }
}
