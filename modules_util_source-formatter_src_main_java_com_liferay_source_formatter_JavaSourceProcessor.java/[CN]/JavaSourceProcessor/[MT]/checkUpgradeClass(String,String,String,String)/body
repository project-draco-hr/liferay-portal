{
  if (!fileName.contains("/upgrade/")) {
    return;
  }
  int pos=content.indexOf("LocaleUtil.getDefault()");
  if (pos != -1) {
    processErrorMessage(fileName,"Use UpgradeProcessUtil.getDefaultLanguageId(companyId) " + "instead of LocaleUtil.getDefault(): " + fileName + " "+ getLineCount(content,pos));
  }
  pos=content.indexOf("rs.getDate(");
  if (pos != -1) {
    processErrorMessage(fileName,"Use rs.getTimeStamp: " + fileName + " "+ getLineCount(content,pos));
  }
  if (portalSource && !isExcludedPath(_upgradeServiceUtilExcludes,absolutePath) && fileName.contains("/portal/upgrade/")&& !fileName.contains("/test/")&& !fileName.contains("/testIntegration/")) {
    pos=content.indexOf("ServiceUtil.");
    if (pos != -1) {
      processErrorMessage(fileName,"ServiceUtil: " + fileName + " "+ getLineCount(content,pos));
    }
  }
  if (!fileName.endsWith("Upgrade.java")) {
    return;
  }
  if (content.contains("implements UpgradeStepRegistrator")) {
    Matcher matcher=_componentAnnotationPattern.matcher(content);
    if (matcher.find()) {
      String componentAnnotation=matcher.group();
      if (!componentAnnotation.contains("service =")) {
        processErrorMessage(fileName,"Missing service in @Component " + fileName);
      }
    }
  }
}
