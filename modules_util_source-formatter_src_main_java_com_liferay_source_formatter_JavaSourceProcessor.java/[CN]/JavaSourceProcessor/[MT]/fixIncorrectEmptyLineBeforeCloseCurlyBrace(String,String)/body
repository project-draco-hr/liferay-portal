{
  Matcher matcher1=_incorrectCloseCurlyBracePattern1.matcher(content);
  while (matcher1.find()) {
    String lastLine=StringUtil.trimLeading(matcher1.group(1));
    if (lastLine.startsWith("// ")) {
      continue;
    }
    String tabs=matcher1.group(2);
    int tabCount=tabs.length();
    int pos=matcher1.start();
    while (true) {
      pos=content.lastIndexOf("\n" + tabs,pos - 1);
      if (content.charAt(pos + tabCount + 1) == CharPool.TAB) {
        continue;
      }
      String codeBlock=content.substring(pos + 1,matcher1.end());
      String firstLine=codeBlock.substring(0,codeBlock.indexOf(CharPool.NEW_LINE) + 1);
      Matcher matcher2=_incorrectCloseCurlyBracePattern2.matcher(firstLine);
      if (matcher2.find()) {
        break;
      }
      return StringUtil.replaceFirst(content,"\n\n" + tabs + "}\n","\n" + tabs + "}\n",pos);
    }
  }
  return content;
}
