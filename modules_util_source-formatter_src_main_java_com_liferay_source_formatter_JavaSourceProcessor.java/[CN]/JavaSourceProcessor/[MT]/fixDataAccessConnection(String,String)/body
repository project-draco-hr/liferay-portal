{
  int x=content.indexOf("package ");
  int y=content.indexOf(CharPool.SEMICOLON,x);
  if ((x == -1) || (y == -1)) {
    return content;
  }
  String packageName=content.substring(x + 8,y);
  if (!packageName.startsWith("com.liferay.portal.kernel.upgrade") && !packageName.startsWith("com.liferay.portal.kernel.verify") && !packageName.startsWith("com.liferay.portal.upgrade")&& !packageName.startsWith("com.liferay.portal.verify")) {
    return content;
  }
  content=StringUtil.replace(content,"DataAccess.getConnection","DataAccess.getUpgradeOptimizedConnection");
  return content;
}
