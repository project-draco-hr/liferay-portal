{
  UnsyncBufferedReader unsyncBufferedReader=new UnsyncBufferedReader(new UnsyncStringReader(content));
  String line=null;
  String annotation=StringPool.BLANK;
  String previousAnnotation=StringPool.BLANK;
  while ((line=unsyncBufferedReader.readLine()) != null) {
    if (line.equals(indent + StringPool.CLOSE_CURLY_BRACE)) {
      return content;
    }
    if ((StringUtil.count(line,StringPool.TAB) == indent.length()) && !line.startsWith(indent + StringPool.CLOSE_PARENTHESIS)) {
      if (Validator.isNotNull(annotation) && annotation.contains(StringPool.OPEN_PARENTHESIS)) {
        Matcher matcher=_annotationPattern.matcher(annotation);
        if (matcher.find()) {
          String match=matcher.group();
          int closeParenthesesCount=StringUtil.count(match,StringPool.CLOSE_PARENTHESIS);
          int openParenthesesCount=StringUtil.count(match,StringPool.OPEN_PARENTHESIS);
          if ((closeParenthesesCount == openParenthesesCount) && !match.endsWith("\n)\n") && !match.endsWith("\t)\n")) {
            String tabs=matcher.group(1);
            String replacement=StringUtil.replaceLast(match,")","\n" + tabs + ")");
            return StringUtil.replace(content,match,replacement);
          }
        }
        String newContent=checkAnnotationParameterProperties(content,annotation);
        if (!newContent.equals(content)) {
          return formatAnnotations(fileName,javaTermName,newContent,indent);
        }
        checkAnnotationParameters(fileName,javaTermName,annotation);
      }
      if (Validator.isNotNull(previousAnnotation) && (previousAnnotation.compareToIgnoreCase(annotation) > 0)) {
        content=StringUtil.replaceFirst(content,previousAnnotation,annotation);
        content=StringUtil.replaceLast(content,annotation,previousAnnotation);
        return formatAnnotations(fileName,javaTermName,content,indent);
      }
      if (line.startsWith(indent + StringPool.AT)) {
        if (Validator.isNotNull(annotation)) {
          previousAnnotation=annotation;
        }
        annotation=line + "\n";
      }
 else {
        annotation=StringPool.BLANK;
        previousAnnotation=StringPool.BLANK;
      }
    }
 else {
      if (Validator.isNull(annotation)) {
        return content;
      }
      annotation+=line + "\n";
    }
  }
  return content;
}
