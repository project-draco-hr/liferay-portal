{
  try {
    Portlet portlet=(Portlet)request.getAttribute(WebKeys.RENDER_PORTLET);
    PortletURL basePortletURL=PortletURLFactoryUtil.create(request,PortletKeys.PORTLET_SHARING,themeDisplay.getPlid(),PortletRequest.RESOURCE_PHASE);
    StringBundler sb=new StringBundler(5);
    sb.append("javascript:Liferay.PortletSharing.showNetvibesInfo('");
    sb.append(PortalUtil.getNetvibesURL(portlet,themeDisplay));
    sb.append("', '");
    sb.append(basePortletURL);
    sb.append("');");
    return sb.toString();
  }
 catch (  PortalException pe) {
    if (_log.isWarnEnabled()) {
      _log.warn(pe,pe);
    }
    return StringPool.BLANK;
  }
}
