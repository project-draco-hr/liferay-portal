{
  validateTitle(newTitle);
  if (StringUtil.equalsIgnoreCase(title,newTitle)) {
    throw new DuplicatePageException(newTitle);
  }
  if (isUsedTitle(nodeId,newTitle)) {
    WikiPage page=getPage(nodeId,newTitle);
    if (((page.getVersion() == WikiPageConstants.VERSION_DEFAULT) && (page.getContent().length() < 200)) || !strict) {
      deletePage(nodeId,newTitle);
    }
 else {
      throw new DuplicatePageException(newTitle);
    }
  }
  WikiPage page=getPage(nodeId,title);
  String summary=page.getSummary();
  if (Validator.isNotNull(page.getRedirectTitle())) {
    page.setRedirectTitle(StringPool.BLANK);
    summary=StringPool.BLANK;
  }
  serviceContext.setCommand(Constants.RENAME);
  updatePage(userId,page,0,newTitle,page.getContent(),summary,page.getMinorEdit(),page.getFormat(),page.getParentTitle(),page.getRedirectTitle(),serviceContext);
}
