{
  IndicesAdminClient indicesAdminClient=adminClient.indices();
  List<Company> companies=CompanyLocalServiceUtil.getCompanies();
  for (  Company company : companies) {
    IndicesExistsRequestBuilder indicesExistsRequestBuilder=indicesAdminClient.prepareExists(String.valueOf(company.getCompanyId()));
    Future<IndicesExistsResponse> indicesExistsRequestFuture=indicesExistsRequestBuilder.execute();
    IndicesExistsResponse indicesExistsResponse=indicesExistsRequestFuture.get();
    if (indicesExistsResponse.isExists()) {
      continue;
    }
    CreateIndexRequestBuilder createIndexRequestBuilder=indicesAdminClient.prepareCreate(String.valueOf(company.getCompanyId()));
    for (    Map.Entry<String,String> entry : _typeMappings.entrySet()) {
      Class<?> clazz=getClass();
      String typeMapping=StringUtil.read(clazz.getClassLoader(),entry.getValue());
      createIndexRequestBuilder.addMapping(entry.getKey(),typeMapping);
    }
    Future<CreateIndexResponse> createIndexFuture=createIndexRequestBuilder.execute();
    CreateIndexResponse createIndexResponse=createIndexFuture.get();
    if (_log.isInfoEnabled()) {
      StringOutputStream stringOutputStream=new StringOutputStream();
      createIndexResponse.writeTo(new OutputStreamStreamOutput(stringOutputStream));
      _log.info(stringOutputStream);
    }
  }
}
