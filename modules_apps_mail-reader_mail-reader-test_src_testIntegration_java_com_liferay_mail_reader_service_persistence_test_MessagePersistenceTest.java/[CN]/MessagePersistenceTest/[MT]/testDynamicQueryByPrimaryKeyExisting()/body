{
  Message newMessage=addMessage();
  DynamicQuery dynamicQuery=DynamicQueryFactoryUtil.forClass(Message.class,_dynamicQueryClassLoader);
  dynamicQuery.add(RestrictionsFactoryUtil.eq("messageId",newMessage.getMessageId()));
  List<Message> result=_persistence.findWithDynamicQuery(dynamicQuery);
  Assert.assertEquals(1,result.size());
  Message existingMessage=result.get(0);
  Assert.assertEquals(existingMessage,newMessage);
}
