{
  long classNameId=ClassNameLocalServiceUtil.getClassName(DLFileEntry.class.getName()).getClassNameId();
  DetachedCriteria existingTagsAssetEntriesIds=DetachedCriteria.forClass(TagsAssetImpl.class,"ta").add(Property.forName("ta.classNameId").eq(new Long(classNameId))).setProjection(Property.forName("ta.classPK"));
  DetachedCriteria entriesWithMissingTagsAssets=DetachedCriteria.forClass(DLFileEntryImpl.class,"fe").add(Restrictions.not(Subqueries.propertyIn("fe.fileEntryId",existingTagsAssetEntriesIds)));
  DynamicQueryInitializer dqi=new DynamicQueryInitializerImpl(entriesWithMissingTagsAssets);
  try {
    List entries=DLFileEntryLocalServiceUtil.dynamicQuery(dqi);
    if (_log.isDebugEnabled()) {
      _log.debug("Processing " + entries.size() + " entries");
    }
    for (int i=0; i < entries.size(); i++) {
      DLFileEntry fileEntry=(DLFileEntry)entries.get(i);
      String mimeType=MimeTypesUtil.getContentType(fileEntry.getName());
      TagsAssetLocalServiceUtil.updateAsset(fileEntry.getUserId(),DLFileEntry.class.getName(),fileEntry.getFileEntryId(),new String[0],null,null,null,null,mimeType,fileEntry.getTitle(),fileEntry.getDescription(),fileEntry.getDescription(),null,0,0);
    }
  }
 catch (  SystemException se) {
    _log.error(se);
  }
  if (_log.isDebugEnabled()) {
    _log.debug("TagsAssets verified for DL File entries");
  }
}
