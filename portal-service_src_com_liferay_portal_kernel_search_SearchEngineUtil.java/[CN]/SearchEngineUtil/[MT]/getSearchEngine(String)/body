{
  PortalRuntimePermission.checkSearchEngine(searchEngineId);
  SearchEngine searchEngine=_searchEngines.get(searchEngineId);
  if (searchEngine == null) {
    if (getDefaultSearchEngineId().equals(searchEngineId)) {
      throw new IllegalStateException("There is no default search engine configured with ID " + getDefaultSearchEngineId());
    }
    if (_log.isWarnEnabled()) {
      _log.warn("There is no search engine configured with ID " + searchEngineId);
    }
  }
  return searchEngine;
}
