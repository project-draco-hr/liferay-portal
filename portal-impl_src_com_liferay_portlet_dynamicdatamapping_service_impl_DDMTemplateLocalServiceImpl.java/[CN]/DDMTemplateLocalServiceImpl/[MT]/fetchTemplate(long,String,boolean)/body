{
  templateKey=templateKey.trim().toUpperCase();
  DDMTemplate template=ddmTemplatePersistence.fetchByG_T(groupId,templateKey);
  if ((template != null) || !includeGlobalTemplates) {
    return template;
  }
  Group group=groupPersistence.findByPrimaryKey(groupId);
  Group companyGroup=groupLocalService.getCompanyGroup(group.getCompanyId());
  return ddmTemplatePersistence.fetchByG_T(companyGroup.getGroupId(),templateKey);
}
