{
  if (template.getClassNameId() == classNameLocalService.getClassNameId(DDMStructure.class.getName())) {
    DDMStructure structure=ddmStructureLocalService.fetchDDMStructure(template.getClassPK());
    if ((structure != null) && (structure.getClassNameId() == classNameLocalService.getClassNameId(JournalArticle.class.getName()))) {
      Group companyGroup=groupLocalService.getCompanyGroup(template.getCompanyId());
      if (template.getGroupId() == companyGroup.getGroupId()) {
        if (JournalArticleUtil.countByTemplateId(template.getTemplateKey()) > 0) {
          throw new RequiredTemplateException();
        }
      }
 else {
        if (JournalArticleUtil.countByG_T(template.getGroupId(),template.getTemplateKey()) > 0) {
          throw new RequiredTemplateException();
        }
      }
    }
  }
  ddmTemplatePersistence.remove(template);
  resourceLocalService.deleteResource(template.getCompanyId(),DDMTemplate.class.getName(),ResourceConstants.SCOPE_INDIVIDUAL,template.getTemplateId());
}
