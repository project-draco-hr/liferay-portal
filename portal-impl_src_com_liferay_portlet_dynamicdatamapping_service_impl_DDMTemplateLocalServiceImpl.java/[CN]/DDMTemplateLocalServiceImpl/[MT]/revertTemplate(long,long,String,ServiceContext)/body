{
  DDMTemplateVersion templateVersion=ddmTemplateVersionLocalService.getTemplateVersion(templateId,version);
  if (!templateVersion.isApproved()) {
    throw new InvalidTemplateVersionException("Unable to revert from an unapproved template version");
  }
  DDMTemplate template=templateVersion.getTemplate();
  serviceContext.setAttribute("majorVersion",Boolean.TRUE);
  serviceContext.setAttribute("status",WorkflowConstants.STATUS_APPROVED);
  serviceContext.setCommand(Constants.REVERT);
  ddmTemplateLocalService.updateTemplate(userId,templateId,templateVersion.getClassPK(),templateVersion.getNameMap(),templateVersion.getDescriptionMap(),template.getType(),template.getMode(),templateVersion.getLanguage(),templateVersion.getScript(),template.getCacheable(),serviceContext);
}
