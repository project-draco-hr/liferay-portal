{
  SearchEngineHelperUtil.deleteEntityDocuments(getSearchEngineId(),CompanyConstants.SYSTEM,CLASS_NAME,isCommitImmediately());
  Collection<Document> documents=new ArrayList<>();
  List<PluginPackage> pluginPackages=PluginPackageUtil.getAllAvailablePluginPackages();
  int total=pluginPackages.size();
  ReindexStatusMessageSenderUtil.sendStatusMessage(getClassName(),0,total);
  for (  PluginPackage pluginPackage : pluginPackages) {
    Document document=getDocument(pluginPackage);
    documents.add(document);
  }
  SearchEngineHelperUtil.updateDocuments(getSearchEngineId(),CompanyConstants.SYSTEM,documents,isCommitImmediately());
  ReindexStatusMessageSenderUtil.sendStatusMessage(getClassName(),total,total);
}
