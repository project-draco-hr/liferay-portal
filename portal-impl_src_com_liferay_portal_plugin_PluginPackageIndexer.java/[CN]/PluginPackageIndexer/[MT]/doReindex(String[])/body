{
  SearchEngineUtil.deleteEntityDocuments(getSearchEngineId(),CompanyConstants.SYSTEM,CLASS_NAME,isCommitImmediately());
  Collection<Document> documents=new ArrayList<>();
  List<PluginPackage> pluginPackages=PluginPackageUtil.getAllAvailablePluginPackages();
  int count=pluginPackages.size();
  ReindexStatusMessageSenderUtil.sendStatusMessage(getClassName(),0,count);
  for (  PluginPackage pluginPackage : pluginPackages) {
    Document document=getDocument(pluginPackage);
    documents.add(document);
  }
  SearchEngineUtil.updateDocuments(getSearchEngineId(),CompanyConstants.SYSTEM,documents,isCommitImmediately());
  ReindexStatusMessageSenderUtil.sendStatusMessage(getClassName(),count,count);
}
