{
  String type=(String)searchContext.getAttribute("type");
  if (Validator.isNotNull(type)) {
    BooleanQuery searchQuery=BooleanQueryFactoryUtil.create(searchContext);
    searchQuery.addRequiredTerm("type",type);
    fullQuery.add(searchQuery,BooleanClauseOccur.MUST);
  }
  String tag=(String)searchContext.getAttribute("tag");
  if (Validator.isNotNull(tag)) {
    BooleanQuery searchQuery=BooleanQueryFactoryUtil.create(searchContext);
    searchQuery.addExactTerm("tag",tag);
    fullQuery.add(searchQuery,BooleanClauseOccur.MUST);
  }
  String repositoryURL=(String)searchContext.getAttribute("repositoryURL");
  if (Validator.isNotNull(repositoryURL)) {
    BooleanQuery searchQuery=BooleanQueryFactoryUtil.create(searchContext);
    Query query=TermQueryFactoryUtil.create(searchContext,"repositoryURL",repositoryURL);
    searchQuery.add(query,BooleanClauseOccur.SHOULD);
    fullQuery.add(searchQuery,BooleanClauseOccur.MUST);
  }
  String license=(String)searchContext.getAttribute("license");
  if (Validator.isNotNull(license)) {
    BooleanQuery searchQuery=BooleanQueryFactoryUtil.create(searchContext);
    searchQuery.addExactTerm("license",license);
    fullQuery.add(searchQuery,BooleanClauseOccur.MUST);
  }
  String status=(String)searchContext.getAttribute(Field.STATUS);
  if (Validator.isNotNull(status) && !status.equals("all")) {
    BooleanQuery searchQuery=BooleanQueryFactoryUtil.create(searchContext);
    if (status.equals(PluginPackageImpl.STATUS_NOT_INSTALLED_OR_OLDER_VERSION_INSTALLED)) {
      searchQuery.addExactTerm(Field.STATUS,PluginPackageImpl.STATUS_NOT_INSTALLED);
      searchQuery.addExactTerm(Field.STATUS,PluginPackageImpl.STATUS_OLDER_VERSION_INSTALLED);
    }
 else {
      searchQuery.addExactTerm(Field.STATUS,status);
    }
    fullQuery.add(searchQuery,BooleanClauseOccur.MUST);
  }
}
