{
  String type=(String)searchContext.getAttribute("type");
  if (Validator.isNotNull(type)) {
    BooleanQuery searchQuery=BooleanQueryFactoryUtil.create();
    searchQuery.addRequiredTerm("type",type);
    fullQuery.add(searchQuery,BooleanClauseOccur.MUST);
  }
  String tag=(String)searchContext.getAttribute("tag");
  if (Validator.isNotNull(tag)) {
    BooleanQuery searchQuery=BooleanQueryFactoryUtil.create();
    searchQuery.addExactTerm("tag",tag);
    fullQuery.add(searchQuery,BooleanClauseOccur.MUST);
  }
  String repositoryURL=(String)searchContext.getAttribute("repositoryURL");
  if (Validator.isNotNull(repositoryURL)) {
    BooleanQuery searchQuery=BooleanQueryFactoryUtil.create();
    Query query=TermQueryFactoryUtil.create("repositoryURL",repositoryURL);
    searchQuery.add(query,BooleanClauseOccur.SHOULD);
    fullQuery.add(searchQuery,BooleanClauseOccur.MUST);
  }
  String license=(String)searchContext.getAttribute("license");
  if (Validator.isNotNull(license)) {
    BooleanQuery searchQuery=BooleanQueryFactoryUtil.create();
    searchQuery.addExactTerm("license",license);
    fullQuery.add(searchQuery,BooleanClauseOccur.MUST);
  }
  String status=(String)searchContext.getAttribute("status");
  if (Validator.isNotNull(status) && !status.equals("all")) {
    BooleanQuery searchQuery=BooleanQueryFactoryUtil.create();
    if (status.equals(PluginPackageImpl.STATUS_NOT_INSTALLED_OR_OLDER_VERSION_INSTALLED)) {
      searchQuery.addExactTerm("status",PluginPackageImpl.STATUS_NOT_INSTALLED);
      searchQuery.addExactTerm("status",PluginPackageImpl.STATUS_OLDER_VERSION_INSTALLED);
    }
 else {
      searchQuery.addExactTerm("status",status);
    }
    fullQuery.add(searchQuery,BooleanClauseOccur.MUST);
  }
}
