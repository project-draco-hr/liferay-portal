{
  DLFolder dlFolder=new DLFolderImpl();
  boolean escapedModel=false;
  while (xStreamHierarchicalStreamReader.hasMoreChildren()) {
    xStreamHierarchicalStreamReader.moveDown();
    String nodeName=xStreamHierarchicalStreamReader.getNodeName();
    Class<?> clazz=BeanPropertiesUtil.getObjectType(dlFolder,nodeName);
    Object convertedValue=xStreamUnmarshallingContext.convertAnother(xStreamHierarchicalStreamReader.getValue(),clazz);
    if (fields.contains(nodeName)) {
      if (nodeName.equals(FieldConstants.ESCAPED_MODEL)) {
        escapedModel=(Boolean)convertedValue;
      }
 else {
        BeanPropertiesUtil.setProperty(dlFolder,nodeName,convertedValue);
      }
    }
    xStreamHierarchicalStreamReader.moveUp();
  }
  return new LiferayFolder(dlFolder,escapedModel);
}
