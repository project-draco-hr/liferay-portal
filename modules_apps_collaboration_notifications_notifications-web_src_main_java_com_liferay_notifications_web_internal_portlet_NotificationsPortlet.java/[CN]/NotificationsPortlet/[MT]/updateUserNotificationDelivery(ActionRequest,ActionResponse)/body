{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long[] userNotificationDeliveryIds=ParamUtil.getLongValues(actionRequest,"userNotificationDeliveryIds");
  for (  long userNotificationDeliveryId : userNotificationDeliveryIds) {
    boolean deliver=ParamUtil.getBoolean(actionRequest,String.valueOf(userNotificationDeliveryId));
    _userNotificationDeliveryLocalService.updateUserNotificationDelivery(userNotificationDeliveryId,deliver);
  }
  ResourceBundle resourceBundle=_resourceBundleLoader.loadResourceBundle(LanguageUtil.getLanguageId(themeDisplay.getLocale()));
  SessionMessages.add(actionRequest,"requestProcessed",LanguageUtil.get(resourceBundle,"your-configuration-was-saved-sucessfully"));
  String redirect=ParamUtil.getString(actionRequest,"redirect");
  if (Validator.isNotNull(redirect)) {
    actionResponse.sendRedirect(redirect);
  }
}
