{
  if (value == null) {
    return defaultValue;
  }
  value=value.trim();
  if (locale == null) {
    try {
      return Double.parseDouble(value);
    }
 catch (    Exception e) {
    }
  }
 else {
    NumberFormat numberFormat=NumberFormat.getInstance(locale);
    try {
      Number number=numberFormat.parse(value);
      return number.doubleValue();
    }
 catch (    Exception e) {
    }
  }
  return defaultValue;
}
