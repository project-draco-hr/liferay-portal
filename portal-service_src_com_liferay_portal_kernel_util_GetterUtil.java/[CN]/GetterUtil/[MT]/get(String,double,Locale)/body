{
  if (value == null) {
    return defaultValue;
  }
  value=value.trim();
  if (locale == null) {
    try {
      return Double.parseDouble(value);
    }
 catch (    Exception e) {
    }
  }
 else {
    NumberFormat numberFormat=NumberFormat.getInstance(locale);
    try {
      ParsePosition parsePosition=new ParsePosition(0);
      Number number=numberFormat.parse(value,parsePosition);
      if (parsePosition.getIndex() == value.length()) {
        return number.doubleValue();
      }
    }
 catch (    Exception e) {
    }
  }
  return defaultValue;
}
