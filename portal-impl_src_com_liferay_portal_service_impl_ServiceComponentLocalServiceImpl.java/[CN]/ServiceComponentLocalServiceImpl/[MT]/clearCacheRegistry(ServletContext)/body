{
  InputStream inputStream=servletContext.getResourceAsStream("/WEB-INF/classes/META-INF/portlet-hbm.xml");
  if (inputStream == null) {
    return;
  }
  Document document=SAXReaderUtil.read(inputStream);
  Element rootElement=document.getRootElement();
  List<Element> classElements=rootElement.elements("class");
  for (  Element classElement : classElements) {
    String name=classElement.attributeValue("name");
    CacheRegistryUtil.unregister(name);
  }
  CacheRegistryUtil.clear();
  if (PropsValues.CLEAR_CACHE_ON_PLUGIN_UNDEPLOY) {
    EntityCacheUtil.clearCache();
    FinderCacheUtil.clearCache();
  }
}
