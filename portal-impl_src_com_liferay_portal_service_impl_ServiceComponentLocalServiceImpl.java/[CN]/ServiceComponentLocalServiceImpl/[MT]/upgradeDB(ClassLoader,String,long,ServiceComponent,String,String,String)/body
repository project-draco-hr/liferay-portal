{
  DBUtil dbUtil=DBUtil.getInstance();
  if (previousServiceComponent == null) {
    if (_log.isInfoEnabled()) {
      _log.info("Running " + buildNamespace + " SQL scripts for the first time");
    }
    dbUtil.runSQLTemplateString(tablesSQL,true,false);
    dbUtil.runSQLTemplateString(sequencesSQL,true,false);
    dbUtil.runSQLTemplateString(indexesSQL,true,false);
  }
 else {
    if (_log.isInfoEnabled()) {
      _log.info("Upgrading " + buildNamespace + " database to build number "+ buildNumber);
    }
    if (!tablesSQL.equals(previousServiceComponent.getTablesSQL())) {
      if (_log.isInfoEnabled()) {
        _log.info("Upgrading database with tables.sql");
      }
      dbUtil.runSQLTemplateString(tablesSQL,true,false);
      upgradeModels(portletClassLoader);
    }
    if (!sequencesSQL.equals(previousServiceComponent.getSequencesSQL())) {
      if (_log.isInfoEnabled()) {
        _log.info("Upgrading database with sequences.sql");
      }
      dbUtil.runSQLTemplateString(sequencesSQL,true,false);
    }
    if (!indexesSQL.equals(previousServiceComponent.getIndexesSQL())) {
      if (_log.isInfoEnabled()) {
        _log.info("Upgrading database with indexes.sql");
      }
      dbUtil.runSQLTemplateString(indexesSQL,true,false);
    }
  }
}
