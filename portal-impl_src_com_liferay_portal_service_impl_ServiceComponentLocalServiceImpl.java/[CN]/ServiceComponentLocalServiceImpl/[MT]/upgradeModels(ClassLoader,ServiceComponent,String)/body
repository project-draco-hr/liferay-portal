{
  List<String> modifiedTableNames=getModifiedTableNames(previousServiceComponent.getTablesSQL(),tablesSQL);
  List<String> modelNames=getModelNames(classLoader);
  for (  String modelName : modelNames) {
    int pos=modelName.lastIndexOf(".model.");
    Class<?> modelClass=Class.forName(modelName.substring(0,pos) + ".model.impl." + modelName.substring(pos + 7)+ "ModelImpl",true,classLoader);
    Field dataSourceField=modelClass.getField("DATA_SOURCE");
    String dataSource=(String)dataSourceField.get(null);
    if (!dataSource.equals(_DATA_SOURCE_DEFAULT)) {
      continue;
    }
    Field tableNameField=modelClass.getField("TABLE_NAME");
    String tableName=(String)tableNameField.get(null);
    if (!modifiedTableNames.contains(tableName)) {
      continue;
    }
    Field tableColumnsField=modelClass.getField("TABLE_COLUMNS");
    Object[][] tableColumns=(Object[][])tableColumnsField.get(null);
    UpgradeTable upgradeTable=UpgradeTableFactoryUtil.getUpgradeTable(tableName,tableColumns);
    UpgradeTableListener upgradeTableListener=getUpgradeTableListener(classLoader,modelClass);
    Field tableSQLCreateField=modelClass.getField("TABLE_SQL_CREATE");
    String tableSQLCreate=(String)tableSQLCreateField.get(null);
    upgradeTable.setCreateSQL(tableSQLCreate);
    if (upgradeTableListener != null) {
      upgradeTableListener.onBeforeUpdateTable(previousServiceComponent,upgradeTable);
    }
    upgradeTable.updateTable();
    if (upgradeTableListener != null) {
      upgradeTableListener.onAfterUpdateTable(previousServiceComponent,upgradeTable);
    }
  }
}
