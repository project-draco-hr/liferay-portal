{
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  try {
    if (cmd.equals(Constants.ADD_TEMP)) {
      addTempFileEntry(actionRequest,ExportImportHelper.TEMP_FOLDER_NAME);
      validateFile(actionRequest,actionResponse,ExportImportHelper.TEMP_FOLDER_NAME);
      hideDefaultSuccessMessage(actionRequest);
    }
 else     if (cmd.equals(Constants.DELETE_TEMP)) {
      deleteTempFileEntry(actionRequest,actionResponse,ExportImportHelper.TEMP_FOLDER_NAME);
      hideDefaultSuccessMessage(actionRequest);
    }
 else     if (cmd.equals(Constants.IMPORT)) {
      hideDefaultSuccessMessage(actionRequest);
      importData(actionRequest,ExportImportHelper.TEMP_FOLDER_NAME);
      String redirect=ParamUtil.getString(actionRequest,"redirect");
      sendRedirect(actionRequest,actionResponse,redirect);
    }
  }
 catch (  Exception e) {
    if (cmd.equals(Constants.ADD_TEMP) || cmd.equals(Constants.DELETE_TEMP)) {
      hideDefaultSuccessMessage(actionRequest);
      handleUploadException(actionRequest,actionResponse,ExportImportHelper.TEMP_FOLDER_NAME,e);
    }
 else {
      if ((e instanceof LARFileException) || (e instanceof LARFileSizeException) || (e instanceof LARTypeException)) {
        SessionErrors.add(actionRequest,e.getClass());
      }
 else       if ((e instanceof LayoutPrototypeException) || (e instanceof LocaleException)) {
        SessionErrors.add(actionRequest,e.getClass(),e);
      }
 else {
        _log.error(e,e);
        SessionErrors.add(actionRequest,LayoutImportException.class.getName());
      }
    }
  }
}
