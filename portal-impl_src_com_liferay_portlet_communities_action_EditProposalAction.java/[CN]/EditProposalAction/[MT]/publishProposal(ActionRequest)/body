{
  long proposalId=ParamUtil.getLong(req,"proposalId");
  long liveGroupId=ParamUtil.getLong(req,"liveGroupId");
  long stagingGroupId=ParamUtil.getLong(req,"stagingGroupId");
  TasksProposal proposal=TasksProposalLocalServiceUtil.getProposal(proposalId);
  Layout layout=LayoutLocalServiceUtil.getLayout(proposal.getClassPK());
  Map<Long,Boolean> layoutIdMap=new LinkedHashMap<Long,Boolean>();
  layoutIdMap.put(layout.getPlid(),Boolean.FALSE);
  Map parameterMap=getStagingParameters();
  publishLayouts(layoutIdMap,stagingGroupId,liveGroupId,layout.isPrivateLayout(),parameterMap);
  TasksProposalServiceUtil.deleteProposal(proposal.getProposalId());
}
