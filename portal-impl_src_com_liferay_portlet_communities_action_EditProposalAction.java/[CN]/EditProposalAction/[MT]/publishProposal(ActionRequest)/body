{
  long proposalId=ParamUtil.getLong(req,"proposalId");
  TasksProposal proposal=TasksProposalLocalServiceUtil.getProposal(proposalId);
  String className=PortalUtil.getClassName(proposal.getClassNameId());
  if (className.equals(Layout.class.getName())) {
    StagingUtil.publishToLive(req);
  }
 else   if (className.equals(Portlet.class.getName())) {
    String classPK=proposal.getClassPK();
    String portletId=classPK.substring(classPK.indexOf(PortletConstants.LAYOUT_SEPARATOR) + PortletConstants.LAYOUT_SEPARATOR.length());
    Portlet portlet=PortletLocalServiceUtil.getPortletById(proposal.getCompanyId(),portletId);
    StagingUtil.publishToLive(req,portlet);
  }
  TasksProposalServiceUtil.deleteProposal(proposal.getProposalId());
}
