{
  ShoppingGroupServiceOverriddenConfiguration shoppingGroupServiceOverriddenConfiguration=_getShoppingGroupServiceOverriddenConfiguration(order.getGroupId());
  if (emailType.equals("confirmation") && shoppingGroupServiceOverriddenConfiguration.isEmailOrderConfirmationEnabled()) {
  }
 else   if (emailType.equals("shipping") && shoppingGroupServiceOverriddenConfiguration.isEmailOrderShippingEnabled()) {
  }
 else {
    return;
  }
  notifyUser(order,emailType,shoppingGroupServiceOverriddenConfiguration,serviceContext);
  if (emailType.equals("confirmation") && order.isSendOrderEmail()) {
    order.setSendOrderEmail(false);
    shoppingOrderPersistence.update(order);
  }
 else   if (emailType.equals("shipping") && order.isSendShippingEmail()) {
    order.setSendShippingEmail(false);
    shoppingOrderPersistence.update(order);
  }
}
