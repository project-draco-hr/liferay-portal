{
  long[] filteredUserIds=userIds;
  for (int i=0; i < userIds.length; i++) {
    if (GroupPermissionUtil.hasMembershipProtected(permissionChecker,groupId,userIds[i])) {
      filteredUserIds=ArrayUtil.remove(filteredUserIds,userIds[i]);
    }
  }
  return filteredUserIds;
}
