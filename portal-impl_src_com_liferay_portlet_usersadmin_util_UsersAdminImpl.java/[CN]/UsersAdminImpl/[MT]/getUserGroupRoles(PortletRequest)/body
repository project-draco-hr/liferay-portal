{
  User user=PortalUtil.getSelectedUser(portletRequest);
  if (user == null) {
    return Collections.emptyList();
  }
  Set<UserGroupRole> userGroupRoles=new HashSet<UserGroupRole>(UserGroupRoleLocalServiceUtil.getUserGroupRoles(user.getUserId()));
  userGroupRoles.addAll(getUserGroupRoles(portletRequest,user,"addGroupRolesGroupIds","addGroupRolesRoleIds"));
  userGroupRoles.removeAll(getUserGroupRoles(portletRequest,user,"deleteGroupRolesGroupIds","deleteGroupRolesRoleIds"));
  return new ArrayList<UserGroupRole>(userGroupRoles);
}
