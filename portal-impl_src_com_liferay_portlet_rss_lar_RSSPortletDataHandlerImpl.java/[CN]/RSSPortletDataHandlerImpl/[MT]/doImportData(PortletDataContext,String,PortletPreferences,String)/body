{
  if (Validator.isNull(data)) {
    return null;
  }
  Document document=SAXReaderUtil.read(data);
  Element rootElement=document.getRootElement();
  Element dlFoldersElement=rootElement.element("dl-folders");
  List<Element> dlFolderElements=Collections.EMPTY_LIST;
  if (dlFoldersElement != null) {
    dlFolderElements=dlFoldersElement.elements("folder");
  }
  for (  Element folderElement : dlFolderElements) {
    DLPortletDataHandlerImpl.importFolder(context,folderElement);
  }
  Element dlFileEntriesElement=rootElement.element("dl-file-entries");
  List<Element> dlFileEntryElements=Collections.EMPTY_LIST;
  if (dlFileEntriesElement != null) {
    dlFileEntryElements=dlFileEntriesElement.elements("file-entry");
  }
  for (  Element fileEntryElement : dlFileEntryElements) {
    DLPortletDataHandlerImpl.importFileEntry(context,fileEntryElement);
  }
  Element dlFileRanksElement=rootElement.element("dl-file-ranks");
  List<Element> dlFileRankElements=Collections.EMPTY_LIST;
  if (dlFileRanksElement != null) {
    dlFileRankElements=dlFileRanksElement.elements("file-rank");
  }
  for (  Element fileRankElement : dlFileRankElements) {
    DLPortletDataHandlerImpl.importFileRank(context,fileRankElement);
  }
  Element igFoldersElement=rootElement.element("ig-folders");
  List<Element> igFolderElements=Collections.EMPTY_LIST;
  if (igFoldersElement != null) {
    igFolderElements=igFoldersElement.elements("folder");
  }
  for (  Element folderElement : igFolderElements) {
    IGPortletDataHandlerImpl.importFolder(context,folderElement);
  }
  Element igImagesElement=rootElement.element("ig-images");
  List<Element> igImageElements=Collections.EMPTY_LIST;
  if (igImagesElement != null) {
    igImageElements=igImagesElement.elements("image");
  }
  for (  Element imageElement : igImageElements) {
    IGPortletDataHandlerImpl.importImage(context,imageElement);
  }
  List<Element> structureElements=rootElement.elements("structure");
  for (  Element structureElement : structureElements) {
    JournalPortletDataHandlerImpl.importStructure(context,structureElement);
  }
  List<Element> templateElements=rootElement.elements("template");
  for (  Element templateElement : templateElements) {
    JournalPortletDataHandlerImpl.importTemplate(context,templateElement);
  }
  Map<String,String> articleIds=(Map<String,String>)context.getNewPrimaryKeysMap(JournalArticle.class);
  Layout layout=LayoutLocalServiceUtil.getLayout(context.getPlid());
  Element footerArticleElement=rootElement.element("footer-article");
  if (footerArticleElement != null) {
    JournalPortletDataHandlerImpl.importArticle(context,footerArticleElement);
  }
  String[] footerArticleValues=preferences.getValues("footer-article-values",new String[]{"0",""});
  String footerArticleId=footerArticleValues[1];
  if (Validator.isNotNull(footerArticleId)) {
    footerArticleId=MapUtil.getString(articleIds,footerArticleId,footerArticleId);
    preferences.setValues("footer-article-values",new String[]{String.valueOf(context.getScopeGroupId()),footerArticleId});
    JournalContentSearchLocalServiceUtil.updateContentSearch(context.getScopeGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),portletId,footerArticleId,true);
  }
  Element headerArticleElement=rootElement.element("header-article");
  if (headerArticleElement != null) {
    JournalPortletDataHandlerImpl.importArticle(context,headerArticleElement);
  }
  String[] headerArticleValues=preferences.getValues("header-article-values",new String[]{"0",""});
  String headerArticleId=headerArticleValues[1];
  if (Validator.isNotNull(headerArticleId)) {
    headerArticleId=MapUtil.getString(articleIds,headerArticleId,headerArticleId);
    preferences.setValues("header-article-values",new String[]{String.valueOf(context.getScopeGroupId()),headerArticleId});
    JournalContentSearchLocalServiceUtil.updateContentSearch(context.getScopeGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),portletId,headerArticleId,true);
  }
  return preferences;
}
