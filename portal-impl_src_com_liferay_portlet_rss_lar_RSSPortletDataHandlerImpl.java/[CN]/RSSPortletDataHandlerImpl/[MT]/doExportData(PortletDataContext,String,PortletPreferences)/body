{
  String[] footerArticleValues=portletPreferences.getValues("footerArticleValues",new String[]{"0",""});
  String[] headerArticleValues=portletPreferences.getValues("headerArticleValues",new String[]{"0",""});
  String footerArticleId=footerArticleValues[1];
  String headerArticleId=headerArticleValues[1];
  if (Validator.isNull(footerArticleId) && Validator.isNull(headerArticleId)) {
    if (_log.isWarnEnabled()) {
      _log.warn("No article ids found in preferences of portlet " + portletId);
    }
    return StringPool.BLANK;
  }
  long footerArticleGroupId=GetterUtil.getLong(footerArticleValues[0]);
  long headerArticleGroupId=GetterUtil.getLong(headerArticleValues[0]);
  if ((footerArticleGroupId <= 0) && (headerArticleGroupId <= 0)) {
    if (_log.isWarnEnabled()) {
      _log.warn("No group ids found in preferences of portlet " + portletId);
    }
    return StringPool.BLANK;
  }
  List<JournalArticle> articles=new ArrayList<JournalArticle>(2);
  JournalArticle footerArticle=null;
  try {
    footerArticle=JournalArticleLocalServiceUtil.getLatestArticle(footerArticleGroupId,footerArticleId,WorkflowConstants.STATUS_APPROVED);
    articles.add(footerArticle);
  }
 catch (  NoSuchArticleException nsae) {
    if (_log.isWarnEnabled()) {
      _log.warn("No approved article found with group id " + footerArticleGroupId + " and article id "+ footerArticleId);
    }
  }
  JournalArticle headerArticle=null;
  try {
    headerArticle=JournalArticleLocalServiceUtil.getLatestArticle(headerArticleGroupId,headerArticleId,WorkflowConstants.STATUS_APPROVED);
    articles.add(headerArticle);
  }
 catch (  NoSuchArticleException nsae) {
    if (_log.isWarnEnabled()) {
      _log.warn("No approved article found with group id " + headerArticleGroupId + " and article id "+ headerArticleId);
    }
  }
  if ((footerArticle == null) && (headerArticle == null)) {
    return StringPool.BLANK;
  }
  Document document=SAXReaderUtil.createDocument();
  Element rootElement=document.addElement("journal-content-data");
  Element dlFileEntryTypesElement=rootElement.addElement("dl-file-entry-types");
  Element dlFoldersElement=rootElement.addElement("dl-folders");
  Element dlFilesElement=rootElement.addElement("dl-file-entries");
  Element dlFileRanksElement=rootElement.addElement("dl-file-ranks");
  Element igFoldersElement=rootElement.addElement("ig-folders");
  Element igImagesElement=rootElement.addElement("ig-images");
  for (  JournalArticle article : articles) {
    String path=JournalPortletDataHandlerImpl.getArticlePath(portletDataContext,article);
    Element articleElement=null;
    if (article == footerArticle) {
      articleElement=rootElement.addElement("footer-article");
    }
 else {
      articleElement=rootElement.addElement("header-article");
    }
    articleElement.addAttribute("path",path);
    JournalPortletDataHandlerImpl.exportArticle(portletDataContext,rootElement,rootElement,rootElement,dlFileEntryTypesElement,dlFoldersElement,dlFilesElement,dlFileRanksElement,igFoldersElement,igImagesElement,article,false);
  }
  return document.formattedString();
}
