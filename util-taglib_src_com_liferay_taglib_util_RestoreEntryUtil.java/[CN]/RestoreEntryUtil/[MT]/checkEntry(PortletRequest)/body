{
  long trashEntryId=ParamUtil.getLong(portletRequest,"trashEntryId");
  String newName=ParamUtil.getString(portletRequest,"newName");
  TrashEntry entry=TrashEntryLocalServiceUtil.fetchTrashEntry(trashEntryId);
  TrashHandler trashHandler=TrashHandlerRegistryUtil.getTrashHandler(entry.getClassName());
  JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
  try {
    trashHandler.checkRestorableEntry(entry,TrashEntryConstants.DEFAULT_CONTAINER_ID,newName);
    jsonObject.put("success",true);
  }
 catch (  RestoreEntryException ree) {
    jsonObject.put("duplicateEntryId",ree.getDuplicateEntryId());
    jsonObject.put("oldName",ree.getOldName());
    jsonObject.put("overridable",ree.isOverridable());
    jsonObject.put("success",false);
    jsonObject.put("trashEntryId",ree.getTrashEntryId());
  }
  return jsonObject;
}
