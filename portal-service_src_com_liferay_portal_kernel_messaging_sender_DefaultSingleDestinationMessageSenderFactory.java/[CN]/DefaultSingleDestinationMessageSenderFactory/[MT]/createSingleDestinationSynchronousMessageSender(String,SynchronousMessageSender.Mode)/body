{
  DefaultSingleDestinationSynchronousMessageSender defaultSingleDestinationSynchronousMessageSender=_singleDestinationSynchronousMessageSenders.get(destinationName);
  if (defaultSingleDestinationSynchronousMessageSender == null) {
    SynchronousMessageSender synchronousMessageSender=_synchronousMessageSenders.get(mode);
    if (synchronousMessageSender == null) {
      throw new IllegalStateException("No synchronous message sender configured for " + mode);
    }
    defaultSingleDestinationSynchronousMessageSender=new DefaultSingleDestinationSynchronousMessageSender();
    defaultSingleDestinationSynchronousMessageSender.setDestinationName(destinationName);
    defaultSingleDestinationSynchronousMessageSender.setSynchronousMessageSender(synchronousMessageSender);
    _singleDestinationSynchronousMessageSenders.put(destinationName,defaultSingleDestinationSynchronousMessageSender);
  }
  return defaultSingleDestinationSynchronousMessageSender;
}
