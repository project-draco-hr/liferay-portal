{
  DBUtil dbUtil=DBUtil.getInstance();
  ValueMapper companyIdMapper=new MemoryValueMapper();
  AvailableMappersUtil.setCompanyIdMapper(companyIdMapper);
  String[] webIds=_getWebIds();
  for (int i=0; i < webIds.length; i++) {
    String webId=webIds[i];
    long companyId=_upgradeWebId(webId);
    companyIdMapper.mapValue(webId,new Long(companyId));
  }
  for (int i=0; i < _TABLES.length; i++) {
    String sql="alter_column_type " + _TABLES[i] + " companyId LONG";
    if (_log.isDebugEnabled()) {
      _log.debug(sql);
    }
    dbUtil.executeSQL(sql);
  }
  dbUtil.executeSQL("update PortletPreferences set ownerId = '0', ownerType = " + PortletKeys.PREFS_OWNER_TYPE_COMPANY + " where ownerId = 'COMPANY.LIFERAY_PORTAL'");
  dbUtil.executeSQL("alter_column_type Account_ accountId LONG");
}
