{
  Object value=fromProperty.getReadMethod().invoke(from);
  if (value != null) {
    Method toMethod=toProperty.getWriteMethod();
    Type[] types=toMethod.getGenericParameterTypes();
    ParameterizedType pType=(ParameterizedType)types[0];
    Class<?> keyClazz=(Class<?>)pType.getActualTypeArguments()[0];
    Class<?> valueClazz=(Class<?>)pType.getActualTypeArguments()[1];
    Map<?,?> fromMap=(Map<?,?>)value;
    Map<Object,Object> toMap=new HashMap<>();
    for (    Object key : fromMap.keySet()) {
      Object toKey=null;
      Object toValue=null;
      Object mapValue=fromMap.get(key);
      if (isSimpleCopy(keyClazz,key.getClass())) {
        toKey=key;
      }
 else {
        toKey=deepCopyProperties(keyClazz,key);
      }
      if (isSimpleCopy(valueClazz,mapValue.getClass())) {
        toValue=mapValue;
      }
 else {
        toValue=deepCopyProperties(valueClazz,mapValue);
      }
      toMap.put(toKey,toValue);
    }
    toProperty.getWriteMethod().invoke(to,toMap);
  }
}
