{
  boolean commitValue=super.commit();
  if (commitValue) {
    getSubject().getPrincipals().add(getPrincipal());
    getSubject().getPrivateCredentials().add(getPassword());
    Object group=ReflectionUtil.newInstance(_JGROUP,"Roles");
    Object role=ReflectionUtil.newInstance(_JROLE,"users");
    try {
      Method method=MethodCache.get(_JGROUP,"addMember",new Class[]{role.getClass()});
      method.invoke(group,new Object[]{role});
    }
 catch (    Exception e) {
      _log.error(e,e);
    }
    getSubject().getPrincipals().add(group);
  }
  return commitValue;
}
