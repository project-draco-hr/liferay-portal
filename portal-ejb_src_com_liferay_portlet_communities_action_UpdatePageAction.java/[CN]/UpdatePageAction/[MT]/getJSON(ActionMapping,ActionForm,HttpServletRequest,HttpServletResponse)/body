{
  ThemeDisplay themeDisplay=(ThemeDisplay)req.getAttribute(WebKeys.THEME_DISPLAY);
  PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
  String portletId=ParamUtil.getString(req,"portletId");
  if (!PortletPermission.contains(permissionChecker,themeDisplay.getPlid(),portletId,ActionKeys.CONFIGURATION)) {
    return null;
  }
  String cmd=ParamUtil.getString(req,Constants.CMD);
  JSONObject jsonObj=new JSONObject();
  if (cmd.equals("add")) {
    String url=addPage(req);
    jsonObj.put("url",url);
  }
 else   if (cmd.equals("delete")) {
    deletePage(req);
  }
 else   if (cmd.equals("reorder")) {
    updateDisplayOrder(req);
  }
 else   if (cmd.equals("title")) {
    updateTitle(req);
  }
  return jsonObj.toString();
}
