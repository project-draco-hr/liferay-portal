{
  if (CompoundSessionIdSplitterUtil.hasSessionDelimiter()) {
    CompoundSessionIdHttpSession compoundSessionIdHttpSession=new CompoundSessionIdHttpSession(httpSessionEvent.getSession());
    httpSessionEvent=new HttpSessionEvent(compoundSessionIdHttpSession);
  }
  new PortalSessionCreator(httpSessionEvent);
  HttpSession session=httpSessionEvent.getSession();
  session.setAttribute(PortalSessionActivationListener.class.getName(),PortalSessionActivationListener.getInstance());
  if (PropsValues.SESSION_MAX_ALLOWED > 0) {
    if (_counter.incrementAndGet() > PropsValues.SESSION_MAX_ALLOWED) {
      session.setAttribute(WebKeys.SESSION_MAX_ALLOWED,Boolean.TRUE);
      _log.error("Exceeded maximum number of " + PropsValues.SESSION_MAX_ALLOWED + " sessions "+ "allowed. You may be experiencing a DoS attack.");
    }
  }
}
