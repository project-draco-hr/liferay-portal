{
  Connection connection=null;
  PreparedStatement statement=null;
  ResultSet result=null;
  try {
    connection=DataAccess.getUpgradeOptimizedConnection();
    statement=connection.prepareStatement("SELECT vocabularyId, settings_ FROM AssetVocabulary");
    result=statement.executeQuery();
    while (result.next()) {
      Long key=result.getLong("vocabularyId");
      String settings=result.getString("settings_");
      String newSettings=doUpgradeVocabularySettings(settings);
      runSQL("UPDATE AssetVocabulary SET settings_ = '" + newSettings + "' WHERE vocabularyId = "+ key);
    }
  }
  finally {
    DataAccess.cleanUp(connection,statement,result);
  }
}
