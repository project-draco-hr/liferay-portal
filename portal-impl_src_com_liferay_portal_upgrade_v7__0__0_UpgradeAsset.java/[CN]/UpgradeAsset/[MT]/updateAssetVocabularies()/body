{
  Connection connection=null;
  PreparedStatement statement=null;
  ResultSet result=null;
  try {
    connection=DataAccess.getUpgradeOptimizedConnection();
    statement=connection.prepareStatement("select vocabularyId, settings_ from AssetVocabulary");
    result=statement.executeQuery();
    while (result.next()) {
      long vocabularyId=result.getLong("vocabularyId");
      String settings=result.getString("settings_");
      String newSettings=upgradeVocabularySettings(settings);
      runSQL("update AssetVocabulary set settings_ = '" + newSettings + "' where vocabularyId = "+ vocabularyId);
    }
  }
  finally {
    DataAccess.cleanUp(connection,statement,result);
  }
}
