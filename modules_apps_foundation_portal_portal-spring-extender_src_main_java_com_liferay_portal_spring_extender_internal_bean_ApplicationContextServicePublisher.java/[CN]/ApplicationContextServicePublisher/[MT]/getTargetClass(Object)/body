{
  Class<?> clazz=service.getClass();
  if (ProxyUtil.isProxyClass(clazz)) {
    AdvisedSupport advisedSupport=ServiceBeanAopProxy.getAdvisedSupport(service);
    TargetSource targetSource=advisedSupport.getTargetSource();
    Object target=targetSource.getTarget();
    clazz=target.getClass();
  }
  return clazz;
}
