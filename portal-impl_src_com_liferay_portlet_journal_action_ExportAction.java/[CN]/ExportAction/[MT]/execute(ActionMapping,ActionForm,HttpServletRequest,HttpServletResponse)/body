{
  try {
    ThemeDisplay themeDisplay=(ThemeDisplay)req.getAttribute(WebKeys.THEME_DISPLAY);
    PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
    if (permissionChecker.isOmniadmin()) {
      long groupId=ParamUtil.getLong(req,"groupId",DEFAULT_GROUP_ID);
      _primaryKeys.clear();
      _primaryKeyCount=1500;
      ZipWriter zipWriter=new ZipWriter();
      List journalContentSearches=new ArrayList();
      insertDataImage(groupId,zipWriter);
      insertDataCMSLayout(groupId,zipWriter,journalContentSearches);
      insertDataCMSContent(groupId,zipWriter,journalContentSearches);
      String fileName="journal.zip";
      ServletResponseUtil.sendFile(res,fileName,zipWriter.finish());
    }
    return null;
  }
 catch (  Exception e) {
    req.setAttribute(PageContext.EXCEPTION,e);
    return mapping.findForward(ActionConstants.COMMON_ERROR);
  }
}
