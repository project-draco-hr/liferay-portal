{
  StringMaker sm=new StringMaker();
  List igImages=new ArrayList();
  Iterator itr=IGFolderLocalServiceUtil.getFolders(groupId).iterator();
  while (itr.hasNext()) {
    IGFolder folder=(IGFolder)itr.next();
    sm.append("insert into IGFolder (");
    sm.append("folderId, groupId, companyId, userId, createDate, ");
    sm.append("modifiedDate, parentFolderId, name");
    sm.append(") values (");
    addPKColumn(sm,folder.getFolderId());
    addColumn(sm,folder.getGroupId());
    addColumn(sm,folder.getCompanyId());
    addColumn(sm,DEFAULT_USER_ID);
    addColumn(sm,folder.getCreateDate());
    addColumn(sm,folder.getModifiedDate());
    addColumn(sm,folder.getParentFolderId());
    addColumn(sm,folder.getName());
    removeTrailingComma(sm);
    sm.append(");\n");
    igImages.addAll(IGImageLocalServiceUtil.getImages(folder.getFolderId()));
  }
  sm.append("\n");
  Collections.sort(igImages);
  itr=igImages.iterator();
  while (itr.hasNext()) {
    IGImage image=(IGImage)itr.next();
    sm.append("insert into IGImage (");
    sm.append("imageId, companyId, userId, createDate, modifiedDate, ");
    sm.append("folderId, description, smallImageId, largeImageId");
    sm.append(") values (");
    addPKColumn(sm,image.getImageId());
    addColumn(sm,image.getCompanyId());
    addColumn(sm,DEFAULT_USER_ID);
    addColumn(sm,image.getCreateDate());
    addColumn(sm,image.getModifiedDate());
    addPKColumn(sm,image.getFolderId());
    addColumn(sm,image.getDescription());
    addPKColumn(sm,image.getSmallImageId());
    addPKColumn(sm,image.getLargeImageId());
    removeTrailingComma(sm);
    sm.append(");\n");
  }
  sm.append("\n");
  itr=JournalArticleLocalServiceUtil.getArticles(groupId).iterator();
  while (itr.hasNext()) {
    JournalArticle article=(JournalArticle)itr.next();
    if (article.isApproved() && JournalArticleLocalServiceUtil.isLatestVersion(article.getGroupId(),article.getArticleId(),article.getVersion())) {
      sm.append("insert into JournalArticle (");
      sm.append("id_, resourcePrimKey, groupId, companyId, userId, userName, ");
      sm.append("createDate, modifiedDate, articleId, version, ");
      sm.append("title, description, content, type_, structureId, ");
      sm.append("templateId, displayDate, approved, ");
      sm.append("approvedByUserId, approvedByUserName, expired, ");
      sm.append("indexable");
      sm.append(") values (");
      addPKColumn(sm,article.getId());
      addPKColumn(sm,article.getResourcePrimKey());
      addColumn(sm,article.getGroupId());
      addColumn(sm,article.getCompanyId());
      addColumn(sm,DEFAULT_USER_ID);
      addColumn(sm,DEFAULT_USER_NAME);
      addColumn(sm,article.getCreateDate());
      addColumn(sm,article.getModifiedDate());
      addPKColumn(sm,article.getArticleId());
      addColumn(sm,JournalArticleImpl.DEFAULT_VERSION);
      addColumn(sm,article.getTitle());
      addColumn(sm,article.getDescription());
      addColumn(sm,replaceIds(article.getContent()));
      addColumn(sm,article.getType());
      addPKColumn(sm,article.getStructureId());
      addPKColumn(sm,article.getTemplateId());
      addColumn(sm,article.getDisplayDate(),false);
      addColumn(sm,article.getApproved());
      addColumn(sm,DEFAULT_USER_ID);
      addColumn(sm,DEFAULT_USER_NAME);
      addColumn(sm,article.getExpired());
      addColumn(sm,article.getIndexable());
      removeTrailingComma(sm);
      sm.append(");\n");
    }
  }
  sm.append("\n");
  itr=JournalArticleImageLocalServiceUtil.getArticleImages(groupId).iterator();
  while (itr.hasNext()) {
    JournalArticleImage articleImage=(JournalArticleImage)itr.next();
    sm.append("insert into JournalArticleImage (");
    sm.append("articleImageId, groupId, articleId, version, elName, ");
    sm.append("languageId, tempImage");
    sm.append(") values (");
    addPKColumn(sm,articleImage.getArticleImageId());
    addColumn(sm,articleImage.getGroupId());
    addPKColumn(sm,articleImage.getArticleId());
    addColumn(sm,articleImage.getVersion());
    addColumn(sm,articleImage.getElName());
    addColumn(sm,articleImage.getLanguageId());
    addColumn(sm,articleImage.getTempImage());
    removeTrailingComma(sm);
    sm.append(");\n");
  }
  sm.append("\n");
  itr=JournalArticleResourceLocalServiceUtil.getArticleResources(groupId).iterator();
  while (itr.hasNext()) {
    JournalArticleResource articleResource=(JournalArticleResource)itr.next();
    sm.append("insert into JournalArticleResource (");
    sm.append("resourcePrimKey, groupId, articleId");
    sm.append(") values (");
    addPKColumn(sm,articleResource.getResourcePrimKey());
    addColumn(sm,articleResource.getGroupId());
    addPKColumn(sm,articleResource.getArticleId());
    removeTrailingComma(sm);
    sm.append(");\n");
  }
  sm.append("\n");
  itr=journalContentSearches.iterator();
  while (itr.hasNext()) {
    JournalContentSearch contentSearch=(JournalContentSearch)itr.next();
    sm.append("insert into JournalContentSearch (");
    sm.append("contentSearchId, groupId, companyId, privateLayout, ");
    sm.append("layoutId, portletId, articleId");
    sm.append(") values (");
    addPKColumn(sm,contentSearch.getContentSearchId());
    addColumn(sm,contentSearch.getGroupId());
    addColumn(sm,contentSearch.getCompanyId());
    addColumn(sm,contentSearch.isPrivateLayout());
    addColumn(sm,contentSearch.getLayoutId());
    addColumn(sm,contentSearch.getPortletId());
    addPKColumn(sm,contentSearch.getArticleId());
    removeTrailingComma(sm);
    sm.append(");\n");
  }
  sm.append("\n");
  itr=JournalStructureLocalServiceUtil.getStructures(groupId).iterator();
  while (itr.hasNext()) {
    JournalStructure structure=(JournalStructure)itr.next();
    sm.append("insert into JournalStructure (");
    sm.append("id_, groupId, companyId, userId, userName, ");
    sm.append("createDate, modifiedDate, structureId, name, ");
    sm.append("description, xsd");
    sm.append(") values (");
    addPKColumn(sm,structure.getId());
    addColumn(sm,structure.getGroupId());
    addColumn(sm,structure.getCompanyId());
    addColumn(sm,DEFAULT_USER_ID);
    addColumn(sm,DEFAULT_USER_NAME);
    addColumn(sm,structure.getCreateDate());
    addColumn(sm,structure.getModifiedDate());
    addPKColumn(sm,structure.getStructureId());
    addColumn(sm,structure.getName());
    addColumn(sm,structure.getDescription());
    addColumn(sm,replaceIds(structure.getXsd()));
    removeTrailingComma(sm);
    sm.append(");\n");
  }
  sm.append("\n");
  itr=JournalTemplateLocalServiceUtil.getTemplates(groupId).iterator();
  while (itr.hasNext()) {
    JournalTemplate template=(JournalTemplate)itr.next();
    sm.append("insert into JournalTemplate (");
    sm.append("id_, groupId, companyId, userId, userName, ");
    sm.append("createDate, modifiedDate, templateId, structureId, ");
    sm.append("name, description, xsl, langType, smallImage, ");
    sm.append("smallImageId, smallImageURL");
    sm.append(") values (");
    addPKColumn(sm,template.getId());
    addColumn(sm,template.getGroupId());
    addColumn(sm,template.getCompanyId());
    addColumn(sm,DEFAULT_USER_ID);
    addColumn(sm,DEFAULT_USER_NAME);
    addColumn(sm,template.getCreateDate());
    addColumn(sm,template.getModifiedDate());
    addPKColumn(sm,template.getTemplateId());
    addPKColumn(sm,template.getStructureId());
    addColumn(sm,template.getName());
    addColumn(sm,template.getDescription());
    addColumn(sm,replaceIds(template.getXsl()));
    addColumn(sm,template.getLangType());
    addColumn(sm,template.getSmallImage());
    addPKColumn(sm,template.getSmallImageId());
    addColumn(sm,template.getSmallImageURL());
    removeTrailingComma(sm);
    sm.append(");\n");
  }
  removeTrailingNewLine(sm);
  zipWriter.addEntry("portal-data-cms-content.sql",sm);
}
