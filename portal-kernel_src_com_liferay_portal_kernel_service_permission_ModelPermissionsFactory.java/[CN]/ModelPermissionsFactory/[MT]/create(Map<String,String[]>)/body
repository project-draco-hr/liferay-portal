{
  ModelPermissions modelPermissions=new ModelPermissions();
  for (  String parameterName : parameterMap.keySet()) {
    if (!parameterName.startsWith(MODEL_PERMISSIONS_PREFIX)) {
      continue;
    }
    String roleName=parameterName.substring(MODEL_PERMISSIONS_PREFIX.length());
    Role role=null;
    try {
      role=RoleLocalServiceUtil.getRole(CompanyThreadLocal.getCompanyId(),roleName);
    }
 catch (    PortalException pe) {
      if (_log.isInfoEnabled()) {
        _log.info("Unable to get role " + roleName);
      }
      continue;
    }
    String[] actionIds=parameterMap.get(parameterName);
    modelPermissions.addRolePermissions(role.getName(),actionIds);
  }
  return modelPermissions;
}
