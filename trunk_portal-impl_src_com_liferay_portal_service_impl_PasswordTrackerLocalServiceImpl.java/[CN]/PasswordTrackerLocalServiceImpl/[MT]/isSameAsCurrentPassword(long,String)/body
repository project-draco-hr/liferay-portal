{
  User user=userPersistence.findByPrimaryKey(userId);
  String currentPwd=user.getPassword();
  if (user.isPasswordEncrypted()) {
    String newEncPwd=PwdEncryptor.encrypt(newClearTextPwd,user.getPassword());
    if (currentPwd.equals(newEncPwd)) {
      return true;
    }
 else {
      return false;
    }
  }
 else {
    if (currentPwd.equals(newClearTextPwd)) {
      return true;
    }
 else {
      return false;
    }
  }
}
