{
  Company company=CompanyUtil.findByPrimaryKey(companyId);
  if (!company.isStrangers()) {
    checkPermission(StringPool.BLANK,organizationId,locationId,ActionKeys.ADD_USER);
  }
  String creatorUserId=null;
  try {
    creatorUserId=getUserId();
  }
 catch (  PrincipalException pe) {
  }
  return UserLocalServiceUtil.addUser(creatorUserId,companyId,autoPassword,password1,password2,passwordReset,autoScreenName,screenName,emailAddress,locale,firstName,middleName,lastName,nickName,prefixId,suffixId,male,birthdayMonth,birthdayDay,birthdayYear,jobTitle,organizationId,locationId,sendEmail);
}
