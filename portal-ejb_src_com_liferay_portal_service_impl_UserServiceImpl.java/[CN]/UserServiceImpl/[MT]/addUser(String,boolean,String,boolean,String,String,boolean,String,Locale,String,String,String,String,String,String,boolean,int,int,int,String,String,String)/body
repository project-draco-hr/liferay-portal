{
  Company company=CompanyUtil.findByPrimaryKey(companyId);
  if (!company.isStrangers()) {
    String userId2=null;
    try {
      userId2=getUserId();
    }
 catch (    PrincipalException pe) {
    }
    if ((userId2 != null) && (RoleLocalServiceUtil.hasUserRole(userId2,company.getCompanyId(),Role.ADMINISTRATOR))) {
    }
 else {
      throw new PrincipalException();
    }
  }
  return UserLocalServiceUtil.addUser(companyId,autoUserId,userId,autoPassword,password1,password2,passwordReset,emailAddress,locale,firstName,middleName,lastName,nickName,prefixId,suffixId,male,birthdayMonth,birthdayDay,birthdayYear,jobTitle,organizationId,locationId);
}
