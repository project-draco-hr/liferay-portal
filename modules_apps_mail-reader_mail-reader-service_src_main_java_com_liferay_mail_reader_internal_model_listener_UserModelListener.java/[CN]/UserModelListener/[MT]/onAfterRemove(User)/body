{
  try {
    if (_log.isDebugEnabled()) {
      _log.debug("Removing mail accounts for user " + user.getUserId());
    }
    List<Account> accounts=AccountLocalServiceUtil.getAccounts(user.getUserId());
    for (    Account account : accounts) {
      Mailbox mailbox=MailboxFactoryUtil.getMailbox(user.getUserId(),account.getAccountId(),StringPool.BLANK);
      mailbox.deleteAccount();
    }
  }
 catch (  Exception e) {
    _log.error("Unable to remove mail accounts for user " + user.getUserId());
  }
}
