{
  AutoDeployListener autoDeployListener=_serviceTracker.getService();
  if (autoDeployListener != null) {
    if (autoDeployListener.isDeployable(autoDeploymentContext)) {
      autoDeployListener.deploy(autoDeploymentContext);
      File file=autoDeploymentContext.getFile();
      file.delete();
      return;
    }
  }
  String[] moduleFrameworkAutoDeployDirs=PropsUtil.getArray(PropsKeys.MODULE_FRAMEWORK_AUTO_DEPLOY_DIRS);
  String destDir=null;
  if (ArrayUtil.isEmpty(moduleFrameworkAutoDeployDirs)) {
    throw new AutoDeployException("Empty folders: review the property " + PropsKeys.MODULE_FRAMEWORK_AUTO_DEPLOY_DIRS + " in your portal-ext.properties file");
  }
  destDir=moduleFrameworkAutoDeployDirs[0];
  FileUtil.mkdirs(destDir);
  File file=autoDeploymentContext.getFile();
  FileUtil.move(file,new File(destDir,file.getName()));
}
