{
  String fileName=file.getName();
  if (!file.canRead()) {
    _log.error("Unable to read " + fileName);
    return;
  }
  if (!file.canWrite()) {
    _log.error("Unable to write " + fileName);
    return;
  }
  long lastModified=file.lastModified();
  if (_blacklistFiles.containsKey(fileName) && (_blacklistFiles.get(fileName) == lastModified)) {
    if (_log.isDebugEnabled()) {
      _log.debug("Skip processing of " + fileName + " because it is "+ "blacklisted.");
    }
    return;
  }
  if (_log.isInfoEnabled()) {
    _log.info("Processing " + fileName);
  }
  try {
    AutoDeploymentContext autoDeploymentContext=buildAutoDeploymentContext(file);
    for (    AutoDeployListener autoDeployListener : _autoDeployListeners) {
      autoDeployListener.deploy(autoDeploymentContext);
    }
    if (file.delete()) {
      return;
    }
    _log.error("Auto deploy failed to remove " + fileName);
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
  if (_log.isInfoEnabled()) {
    _log.info("Add " + fileName + " to the blacklist");
  }
  _blacklistFiles.put(fileName,lastModified);
}
