{
  for (  Element element : root.elements()) {
    List<Element> dynamicContentElements=element.elements("dynamic-content");
    for (    Element dynamicContentElement : dynamicContentElements) {
      String text=dynamicContentElement.getText();
      text=HtmlUtil.stripComments(text);
      text=HtmlUtil.stripHtml(text);
      text=text.trim();
      if (Validator.isNotNull(text) && (text.length() >= 7) && text.startsWith("[@")&& text.endsWith("@]")) {
        text=text.substring(2,text.length() - 2);
        int pos=text.indexOf(";");
        if (pos != -1) {
          String articleId=text.substring(0,pos);
          String elementName=text.substring(pos + 1);
          JournalArticle article=JournalArticleLocalServiceUtil.getArticle(articleGroupId,articleId);
          dynamicContentElement.clearContent();
          dynamicContentElement.addCDATA(getDynamicContent(article.getDocument(),elementName));
        }
      }
 else       if ((text != null) && text.startsWith("/image/journal/article?img_id")) {
        dynamicContentElement.setText("@cdn_host@@root_path@" + text);
      }
    }
    replace(element,articleGroupId);
  }
}
