{
  AnnotatedObjectEncoder annotatedObjectEncoder=AnnotatedObjectEncoder.INSTANCE;
  Date date=new Date();
  ByteBuf byteBuf=Unpooled.buffer();
  annotatedObjectEncoder.encode(null,date,byteBuf);
  Assert.assertEquals(byteBuf.readInt(),byteBuf.readableBytes());
  ProtectedAnnotatedObjectInputStream annotatedObjectInputStream=new ProtectedAnnotatedObjectInputStream(new ByteBufInputStream(byteBuf));
  Assert.assertEquals(date,annotatedObjectInputStream.readObject());
  Assert.assertFalse(byteBuf.isReadable());
}
