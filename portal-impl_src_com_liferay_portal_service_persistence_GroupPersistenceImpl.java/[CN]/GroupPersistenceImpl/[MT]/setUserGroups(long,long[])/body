{
  try {
    Set<Long> userGroupPKSet=SetUtil.fromArray(userGroupPKs);
    List<com.liferay.portal.model.UserGroup> userGroups=getUserGroups(pk);
    for (    com.liferay.portal.model.UserGroup userGroup : userGroups) {
      if (!userGroupPKSet.contains(userGroup.getPrimaryKey())) {
        removeUserGroup.remove(pk,userGroup.getPrimaryKey());
      }
 else {
        userGroupPKSet.remove(userGroup.getPrimaryKey());
      }
    }
    for (    Long userGroupPK : userGroupPKSet) {
      addUserGroup.add(pk,userGroupPK);
    }
  }
 catch (  Exception e) {
    throw processException(e);
  }
 finally {
    FinderCacheUtil.clearCache(GroupModelImpl.TABLE_GROUPS_USERGROUPS);
  }
}
