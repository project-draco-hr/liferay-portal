{
  boolean defaultAssetPublisher=ParamUtil.getBoolean(actionRequest,"defaultAssetPublisher",false);
  Layout layout=(Layout)actionRequest.getAttribute(WebKeys.LAYOUT);
  String portletResource=ParamUtil.getString(actionRequest,"portletResource");
  UnicodeProperties typeSettingsProperties=layout.getTypeSettingsProperties();
  if (!defaultAssetPublisher) {
    String defaultAssetPublisherPortletId=typeSettingsProperties.getProperty(LayoutTypePortletConstants.DEFAULT_ASSET_PUBLISHER_PORTLET_ID);
    if (defaultAssetPublisherPortletId.equals(portletResource)) {
      typeSettingsProperties.setProperty(LayoutTypePortletConstants.DEFAULT_ASSET_PUBLISHER_PORTLET_ID,StringPool.BLANK);
    }
  }
 else {
    typeSettingsProperties.setProperty(LayoutTypePortletConstants.DEFAULT_ASSET_PUBLISHER_PORTLET_ID,portletResource);
  }
  layout=LayoutServiceUtil.updateLayout(layout.getGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),layout.getTypeSettings());
}
