{
  long groupId=AssetPublisherUtil.getGroupIdFromScopeId(scopeId,layout.getGroupId(),layout.isPrivateLayout());
  if (scopeId.startsWith(AssetPublisherUtil.SCOPE_ID_CHILD_GROUP_PREFIX)) {
    Group group=GroupLocalServiceUtil.getGroup(groupId);
    if (!group.hasAncestor(layout.getGroupId())) {
      return false;
    }
  }
 else   if (scopeId.startsWith(AssetPublisherUtil.SCOPE_ID_PARENT_GROUP_PREFIX)) {
    Group siteGroup=layout.getGroup();
    if (!siteGroup.hasAncestor(groupId)) {
      return false;
    }
    if (!SitesUtil.isContentSharingWithChildrenEnabled(siteGroup)) {
      return GroupPermissionUtil.contains(permissionChecker,groupId,ActionKeys.UPDATE);
    }
  }
 else   if (groupId != companyGroupId) {
    return GroupPermissionUtil.contains(permissionChecker,groupId,ActionKeys.UPDATE);
  }
  return true;
}
