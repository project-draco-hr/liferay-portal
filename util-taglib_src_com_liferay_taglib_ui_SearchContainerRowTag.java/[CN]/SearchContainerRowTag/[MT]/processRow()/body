{
  Object model=_results.get(_rowIndex);
  if (isEscapedModel()) {
    model=((BaseModel)model).toEscapedModel();
  }
  if (_log.isDebugEnabled()) {
    _log.debug(BeanPropertiesUtil.getBoolean(model,"escapedModel"));
  }
  if (Validator.isNull(_keyProperty)) {
    String primaryKey=String.valueOf(model);
    _row=new ResultRow(model,primaryKey,_rowIndex,_bold);
  }
 else   if (isStringKey()) {
    String primaryKey=BeanPropertiesUtil.getString(model,_keyProperty);
    _row=new ResultRow(model,primaryKey,_rowIndex,_bold);
  }
 else {
    Object primaryKey=BeanPropertiesUtil.getObject(model,_keyProperty);
    _row=new ResultRow(model,String.valueOf(primaryKey),_rowIndex,_bold);
  }
  pageContext.setAttribute(_indexVar,_rowIndex);
  pageContext.setAttribute(_modelVar,model);
  pageContext.setAttribute(_rowVar,_row);
}
