{
  HttpServletRequest request=getServletRequest();
  Object model=_results.get(_rowIndex);
  if (isEscapedModel()) {
    try {
      ClassLoader contextClassLoader=Thread.currentThread().getContextClassLoader();
      Class clazz=contextClassLoader.loadClass(_className);
      Method method=clazz.getMethod("toEscapedModel",new Class[0]);
      model=method.invoke(model,new Object[0]);
    }
 catch (    Exception e) {
      throw new JspException("Class|Interface identified by attribute \"className\" " + "must implement a toEscapedModel() method");
    }
  }
  if (_log.isDebugEnabled()) {
    _log.debug(BeanParamUtil.getBoolean(model,request,"escapedModel"));
  }
  if (isStringKey()) {
    String pKey=BeanParamUtil.getString(model,request,_keyProperty);
    _row=new ResultRow(model,pKey,_rowIndex,_bold);
  }
 else {
    long pKey=BeanParamUtil.getLong(model,request,_keyProperty);
    _row=new ResultRow(model,pKey,_rowIndex,_bold);
  }
  pageContext.setAttribute(getModelVar(),model);
  pageContext.setAttribute(getIndexVar(),_rowIndex);
  pageContext.setAttribute(getRowVar(),_row);
}
