{
  DDMForm ddmForm=DDMFormTestUtil.createDDMForm();
  DDMFormField nameDDMFormField=DDMFormTestUtil.createTextDDMFormField("Name",false,true,false);
  DDMFormField phoneDDMFormField=DDMFormTestUtil.createTextDDMFormField("Phone",false,true,false);
  DDMFormField extDDMFormField=DDMFormTestUtil.createTextDDMFormField("Ext",false,true,false);
  phoneDDMFormField.addNestedDDMFormField(extDDMFormField);
  nameDDMFormField.addNestedDDMFormField(phoneDDMFormField);
  ddmForm.addDDMFormField(nameDDMFormField);
  DDMFormValues expectedDDMFormValues=createDDMFormValues(ddmForm);
  DDMFormFieldValue paulDDMFormFieldValue=createDDMFormFieldValue("wqer","Name",new UnlocalizedValue("Paul"));
  DDMFormFieldValue paulPhone1DDMFormFieldValue=createDDMFormFieldValue("gatu","Phone",new UnlocalizedValue("1"));
  paulPhone1DDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("jkau","Ext",new UnlocalizedValue("1.1")));
  paulPhone1DDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("amat","Ext",new UnlocalizedValue("1.2")));
  paulDDMFormFieldValue.addNestedDDMFormFieldValue(paulPhone1DDMFormFieldValue);
  DDMFormFieldValue paulPhone2DDMFormFieldValue=createDDMFormFieldValue("hato","Phone",new UnlocalizedValue("2"));
  paulPhone2DDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("hamp","Ext",new UnlocalizedValue("2.1")));
  paulPhone2DDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("xzal","Ext",new UnlocalizedValue("2.2")));
  paulPhone2DDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("kaly","Ext",new UnlocalizedValue("2.3")));
  paulDDMFormFieldValue.addNestedDDMFormFieldValue(paulPhone2DDMFormFieldValue);
  expectedDDMFormValues.addDDMFormFieldValue(paulDDMFormFieldValue);
  DDMFormFieldValue joeDDMFormFieldValue=createDDMFormFieldValue("fahu","Name",new UnlocalizedValue("Joe"));
  DDMFormFieldValue joePhone1DDMFormFieldValue=createDDMFormFieldValue("jakl","Phone",new UnlocalizedValue("3"));
  joePhone1DDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("bagt","Ext",new UnlocalizedValue("3.1")));
  joeDDMFormFieldValue.addNestedDDMFormFieldValue(joePhone1DDMFormFieldValue);
  expectedDDMFormValues.addDDMFormFieldValue(joeDDMFormFieldValue);
  MockHttpServletRequest mockHttpServletRequest=new MockHttpServletRequest();
  mockHttpServletRequest.addParameter("availableLanguageIds","en_US");
  mockHttpServletRequest.addParameter("defaultLanguageId",LocaleUtil.toLanguageId(LocaleUtil.US));
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0$$en_US","Paul");
  mockHttpServletRequest.addParameter("ddm$$Name$fahu$1$$en_US","Joe");
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0#Phone$gatu$0$$en_US","1");
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0#Phone$hato$1$$en_US","2");
  mockHttpServletRequest.addParameter("ddm$$Name$fahu$1#Phone$jakl$0$$en_US","3");
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0#Phone$gatu$0#Ext$jkau$0$$en_US","1.1");
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0#Phone$gatu$0#Ext$amat$1$$en_US","1.2");
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0#Phone$hato$1#Ext$hamp$0$$en_US","2.1");
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0#Phone$hato$1#Ext$xzal$1$$en_US","2.2");
  mockHttpServletRequest.addParameter("ddm$$Name$wqer$0#Phone$hato$1#Ext$kaly$2$$en_US","2.3");
  mockHttpServletRequest.addParameter("ddm$$Name$fahu$1#Phone$jakl$0#Ext$bagt$0$$en_US","3.1");
  DDMFormValues actualDDMFormValues=_ddmFormValuesFactory.create(mockHttpServletRequest,ddmForm);
  assertEquals(expectedDDMFormValues,actualDDMFormValues);
}
