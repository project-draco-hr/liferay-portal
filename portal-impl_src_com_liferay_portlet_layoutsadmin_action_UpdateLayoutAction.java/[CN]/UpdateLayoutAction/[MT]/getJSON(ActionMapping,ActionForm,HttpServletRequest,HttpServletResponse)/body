{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  String cmd=ParamUtil.getString(request,Constants.CMD);
  JSONObject jsonObj=JSONFactoryUtil.createJSONObject();
  if (cmd.equals("add")) {
    String[] array=addPage(themeDisplay,request,response);
    jsonObj.put("deletable",Boolean.valueOf(array[2]));
    jsonObj.put("layoutId",array[0]);
    jsonObj.put("sortable",Boolean.valueOf(array[3]));
    jsonObj.put("updateable",Boolean.valueOf(array[4]));
    jsonObj.put("url",array[1]);
  }
 else   if (cmd.equals("delete")) {
    SitesUtil.deleteLayout(request,response);
  }
 else   if (cmd.equals("display_order")) {
    updateDisplayOrder(request);
  }
 else   if (cmd.equals("name")) {
    updateName(request);
  }
 else   if (cmd.equals("parent_layout_id")) {
    updateParentLayoutId(request);
  }
 else   if (cmd.equals("priority")) {
    updatePriority(request);
  }
  return jsonObj.toString();
}
