{
  List<Portlet> portlets=null;
  Layout layout=(Layout)_request.getAttribute(WebKeys.LAYOUT);
  if (LayoutConstants.TYPE_PORTLET.equals(layout.getType())) {
    LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
    try {
      portlets=layoutTypePortlet.getPortlets();
    }
 catch (    SystemException ex) {
      throw new PortletWindowContextException(ex);
    }
  }
  return portlets;
}
