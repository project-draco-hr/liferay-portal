{
  int length=input.length();
  int nGramMinLength=getNGramMinLength(length);
  int nGramMaxLength=getNGramMaxLength(length);
  NGramTokenizer nGramTokenizer=new NGramTokenizer(new StringReader(input),nGramMinLength,nGramMaxLength);
  CharTermAttribute charTermAttribute=nGramTokenizer.getAttribute(CharTermAttribute.class);
  OffsetAttribute offsetAttribute=nGramTokenizer.getAttribute(OffsetAttribute.class);
  NGramHolder nGramHolder=new NGramHolder();
  try {
    while (nGramTokenizer.incrementToken()) {
      String nGram=charTermAttribute.toString();
      int currentNGramSize=charTermAttribute.length();
      if ((currentNGramSize >= nGramMinLength) && (currentNGramSize <= nGramMaxLength)) {
        if (offsetAttribute.startOffset() == 0) {
          nGramHolder.addNGramStart(currentNGramSize,nGram);
        }
 else         if (offsetAttribute.endOffset() == length) {
          nGramHolder.addNGramEnd(currentNGramSize,nGram);
        }
 else {
          nGramHolder.addNGram(currentNGramSize,nGram);
        }
      }
 else {
        continue;
      }
    }
    return nGramHolder;
  }
 catch (  IOException e) {
    throw new SearchException(e);
  }
}
