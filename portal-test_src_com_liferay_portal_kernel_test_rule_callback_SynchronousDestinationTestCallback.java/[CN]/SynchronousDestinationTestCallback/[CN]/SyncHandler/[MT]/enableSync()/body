{
  if (_sync == null) {
    return;
  }
  ServiceDependencyManager serviceDependencyManager=new ServiceDependencyManager();
  Registry registry=RegistryUtil.getRegistry();
  Filter asyncFilter=registry.getFilter("(&(destination.name=" + DestinationNames.ASYNC_SERVICE + ")(objectClass="+ Destination.class.getName()+ "))");
  Filter backgroundTaskFilter=registry.getFilter("(&(destination.name=" + DestinationNames.BACKGROUND_TASK + ")(objectClass="+ Destination.class.getName()+ "))");
  Filter mailFilter=registry.getFilter("(&(destination.name=" + DestinationNames.MAIL + ")(objectClass="+ Destination.class.getName()+ "))");
  Filter pdfProcessorFilter=registry.getFilter("(&(destination.name=" + DestinationNames.DOCUMENT_LIBRARY_PDF_PROCESSOR + ")(objectClass="+ Destination.class.getName()+ "))");
  Filter rawMetaDataProcessorFilter=registry.getFilter("(&(destination.name=" + DestinationNames.DOCUMENT_LIBRARY_RAW_METADATA_PROCESSOR + ")(objectClass="+ Destination.class.getName()+ "))");
  Filter subscrpitionSenderFilter=registry.getFilter("(&(destination.name=" + DestinationNames.SUBSCRIPTION_SENDER + ")(objectClass="+ Destination.class.getName()+ "))");
  serviceDependencyManager.registerDependencies(asyncFilter,backgroundTaskFilter,mailFilter,pdfProcessorFilter,rawMetaDataProcessorFilter,subscrpitionSenderFilter);
  serviceDependencyManager.waitForDependencies();
  ProxyModeThreadLocal.setForceSync(true);
  replaceDestination(DestinationNames.ASYNC_SERVICE);
  replaceDestination(DestinationNames.BACKGROUND_TASK);
  replaceDestination(DestinationNames.DOCUMENT_LIBRARY_PDF_PROCESSOR);
  replaceDestination(DestinationNames.DOCUMENT_LIBRARY_RAW_METADATA_PROCESSOR);
  replaceDestination(DestinationNames.DOCUMENT_LIBRARY_SYNC_EVENT_PROCESSOR);
  replaceDestination(DestinationNames.MAIL);
  replaceDestination(DestinationNames.SEARCH_READER);
  replaceDestination(DestinationNames.SEARCH_WRITER);
  replaceDestination(DestinationNames.SUBSCRIPTION_SENDER);
}
