{
  if (_sync == null) {
    return;
  }
  ServiceDependencyManager serviceDependencyManager=new ServiceDependencyManager();
  Filter asyncFilter=_registerDestinationFilter(DestinationNames.ASYNC_SERVICE);
  Filter backgroundTaskFilter=_registerDestinationFilter(DestinationNames.BACKGROUND_TASK);
  Filter mailFilter=_registerDestinationFilter(DestinationNames.MAIL);
  Filter pdfProcessorFilter=_registerDestinationFilter(DestinationNames.DOCUMENT_LIBRARY_PDF_PROCESSOR);
  Filter rawMetaDataProcessorFilter=_registerDestinationFilter(DestinationNames.DOCUMENT_LIBRARY_RAW_METADATA_PROCESSOR);
  Filter subscrpitionSenderFilter=_registerDestinationFilter(DestinationNames.SUBSCRIPTION_SENDER);
  serviceDependencyManager.registerDependencies(asyncFilter,backgroundTaskFilter,mailFilter,pdfProcessorFilter,rawMetaDataProcessorFilter,subscrpitionSenderFilter);
  serviceDependencyManager.waitForDependencies();
  ProxyModeThreadLocal.setForceSync(true);
  replaceDestination(DestinationNames.ASYNC_SERVICE);
  replaceDestination(DestinationNames.BACKGROUND_TASK);
  replaceDestination(DestinationNames.DOCUMENT_LIBRARY_PDF_PROCESSOR);
  replaceDestination(DestinationNames.DOCUMENT_LIBRARY_RAW_METADATA_PROCESSOR);
  replaceDestination(DestinationNames.DOCUMENT_LIBRARY_SYNC_EVENT_PROCESSOR);
  replaceDestination(DestinationNames.MAIL);
  replaceDestination(DestinationNames.SCHEDULER_ENGINE);
  replaceDestination(DestinationNames.SEARCH_READER);
  replaceDestination(DestinationNames.SEARCH_WRITER);
  replaceDestination(DestinationNames.SUBSCRIPTION_SENDER);
}
