{
  String domain=PrefsPropsUtil.getString(companyId,PropsKeys.NTLM_DOMAIN,PropsValues.NTLM_DOMAIN);
  String domainController=PrefsPropsUtil.getString(companyId,PropsKeys.NTLM_DOMAIN_CONTROLLER,PropsValues.NTLM_DOMAIN_CONTROLLER);
  String domainControllerName=PrefsPropsUtil.getString(companyId,PropsKeys.NTLM_DOMAIN_CONTROLLER_NAME,PropsValues.NTLM_DOMAIN_CONTROLLER_NAME);
  String serviceAccount=PrefsPropsUtil.getString(companyId,PropsKeys.NTLM_SERVICE_ACCOUNT,PropsValues.NTLM_SERVICE_ACCOUNT);
  String servicePassword=PrefsPropsUtil.getString(companyId,PropsKeys.NTLM_SERVICE_PASSWORD,PropsValues.NTLM_SERVICE_PASSWORD);
  NtlmManager ntlmManager=_ntlmManagers.get(companyId);
  if (ntlmManager == null) {
    ntlmManager=new NtlmManager(domain,domainController,domainControllerName,serviceAccount,servicePassword);
    _ntlmManagers.put(companyId,ntlmManager);
  }
 else   if (!Validator.equals(ntlmManager.getDomain(),domain) || !Validator.equals(ntlmManager.getDomainController(),domainController) || !Validator.equals(ntlmManager.getDomainControllerName(),domainControllerName)|| !Validator.equals(ntlmManager.getServiceAccount(),serviceAccount)|| !Validator.equals(ntlmManager.getServicePassword(),servicePassword)) {
    ntlmManager.setConfiguration(domain,domainController,domainControllerName,serviceAccount,servicePassword);
  }
  return ntlmManager;
}
