{
  long companyId=themeDisplay.getCompanyId();
  long userId=themeDisplay.getUserId();
  InputStream sourceIs=DLFileEntryLocalServiceUtil.getFileAsStream(companyId,userId,folderId,name,sourceVersion);
  InputStream targetIs=DLFileEntryLocalServiceUtil.getFileAsStream(companyId,userId,folderId,name,targetVersion);
  List[] diffResults=DiffUtil.diff(new InputStreamReader(sourceIs),new InputStreamReader(targetIs));
  req.setAttribute(WebKeys.SOURCE_NAME,name + " " + sourceVersion);
  req.setAttribute(WebKeys.TARGET_NAME,name + " " + targetVersion);
  req.setAttribute(WebKeys.DIFF_RESULTS,diffResults);
}
