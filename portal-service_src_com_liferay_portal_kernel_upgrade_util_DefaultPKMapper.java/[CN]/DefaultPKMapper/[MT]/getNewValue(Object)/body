{
  String oldValueString=GetterUtil.getString(String.valueOf(oldValue));
  if (oldValueString.equals("-1") || oldValueString.equals("0") || oldValueString.equals("")) {
    return new Long(0);
  }
  try {
    ValueMapper valueMapper=getValueMapper();
    if (oldValue instanceof String) {
      oldValue=StringUtil.toLowerCase(oldValueString);
    }
    return valueMapper.getNewValue(oldValue);
  }
 catch (  StagnantRowException sre) {
    return new Long(0);
  }
}
