{
  SearchEngineRegistration searchEngineRegistration=new SearchEngineRegistration(searchEngineId);
  _searchEngineRegistrations.add(searchEngineRegistration);
  Destination searchReaderDestination=getSearchReaderDestination(_messageBus,searchEngineId);
  searchEngineRegistration.setSearchReaderDestinationName(searchReaderDestination.getName());
  Destination searchWriterDestination=getSearchWriterDestination(_messageBus,searchEngineId);
  searchEngineRegistration.setSearchWriterDestinationName(searchWriterDestination.getName());
  SearchEngine originalSearchEngine=SearchEngineHelperUtil.getSearchEngineSilent(searchEngineId);
  if (originalSearchEngine != null) {
    searchEngineRegistration.setOverride(true);
    searchEngineRegistration.setOriginalSearchEngineProxyWrapper((SearchEngineProxyWrapper)originalSearchEngine);
    savePreviousSearchEngineListeners(searchReaderDestination,searchWriterDestination,searchEngineRegistration);
    _messageBus.removeDestination(searchReaderDestination.getName(),false);
    searchReaderDestination=getSearchReaderDestination(_messageBus,searchEngineId);
    _messageBus.removeDestination(searchWriterDestination.getName(),false);
    searchWriterDestination=getSearchWriterDestination(_messageBus,searchEngineId);
  }
  createSearchEngineListeners(searchEngineId,searchEngine,searchReaderDestination,searchWriterDestination);
  SearchEngineProxyWrapper searchEngineProxyWrapper=new SearchEngineProxyWrapper(searchEngine,getIndexSearcher(),getIndexWriter());
  SearchEngineHelperUtil.setSearchEngine(searchEngineId,searchEngineProxyWrapper);
}
