{
  setupEnvironmentForArticleFriendlyURLTest();
  Map<String,Object> requestContext=new HashMap<String,Object>();
  Map<String,String[]> params=new HashMap<String,String[]>();
  String requestURI="/";
  MockHttpServletRequest mockHttpServletRequest=new MockHttpServletRequest(Method.GET,requestURI);
  requestContext.put("request",mockHttpServletRequest);
  String actualURL=PortalUtil.getActualURL(_testSite.getGroupId(),false,Portal.PATH_MAIN,WORKING_ARTICLE_TITLE_FRIENDLYURL,params,requestContext);
  Assert.assertFalse(actualURL == null);
  boolean nonExistingLayoutFound=false;
  try {
    PortalUtil.getActualURL(_testSite.getGroupId(),false,Portal.PATH_MAIN,NOT_WORKING_ARTICLE_TITLE_FRIENDLYURL,params,requestContext);
  }
 catch (  NoSuchLayoutException e) {
    nonExistingLayoutFound=true;
  }
  Assert.assertTrue(nonExistingLayoutFound);
  JournalArticleLocalServiceUtil.deleteArticle(_testSite.getGroupId(),_article.getArticleId(),ServiceTestUtil.getServiceContext());
  LayoutLocalServiceUtil.deleteLayout(_homePage);
  LayoutLocalServiceUtil.deleteLayout(_testPage);
  GroupLocalServiceUtil.deleteGroup(_testSite);
}
