{
  setupEnvironmentForVirtualLayoutFriendlyURLTest();
  Map<String,Object> requestContext=new HashMap<String,Object>();
  Map<String,String[]> params=new HashMap<String,String[]>();
  String requestURI="/";
  MockHttpServletRequest mockHttpServletRequest=new MockHttpServletRequest(Method.GET,requestURI);
  requestContext.put("request",mockHttpServletRequest);
  String actualURL=PortalUtil.getActualURL(_userGroup.getGroup().getGroupId(),true,Portal.PATH_MAIN,_existingVirtualLayoutFriendlyURL,params,requestContext);
  Assert.assertFalse(actualURL == null);
  boolean nonExistingLayoutFound=false;
  try {
    PortalUtil.getActualURL(_userGroup.getGroup().getGroupId(),true,Portal.PATH_MAIN,_nonExistingVirtualLayoutFriendlyURL,params,requestContext);
  }
 catch (  NoSuchLayoutException e) {
    nonExistingLayoutFound=true;
  }
  Assert.assertTrue(nonExistingLayoutFound);
  LayoutLocalServiceUtil.deleteLayout(_virtualHomeSub);
  LayoutLocalServiceUtil.deleteLayout(_virtualHome);
}
