{
  ServiceContext serviceContext=ServiceTestUtil.getServiceContext();
  long userGroupId=ServiceTestUtil.nextLong();
  _userGroup=UserGroupLocalServiceUtil.createUserGroup(userGroupId);
  _userGroup.setAddedByLDAPImport(false);
  _userGroup.setCompanyId(serviceContext.getCompanyId());
  _userGroup.setDescription("Test User Group");
  _userGroup.setExpandoBridgeAttributes(ServiceTestUtil.getServiceContext());
  _userGroup.setName("TestGroup_" + userGroupId);
  _userGroup.setNew(true);
  _userGroup.setParentUserGroupId(UserGroupConstants.DEFAULT_PARENT_USER_GROUP_ID);
  UserGroupLocalServiceUtil.addUserGroup(_userGroup);
  GroupLocalServiceUtil.addGroup(serviceContext.getUserId(),GroupConstants.DEFAULT_PARENT_GROUP_ID,UserGroup.class.getName(),_userGroup.getUserGroupId(),String.valueOf(userGroupId),null,0,null,false,true,null);
  UserLocalServiceUtil.addUserGroupUsers(userGroupId,new long[]{serviceContext.getUserId()});
  _virtualHome=LayoutLocalServiceUtil.addLayout(serviceContext.getUserId(),_userGroup.getGroup().getGroupId(),true,LayoutConstants.DEFAULT_PARENT_LAYOUT_ID,"home","Home",StringPool.BLANK,LayoutConstants.TYPE_PORTLET,false,"/home",ServiceTestUtil.getServiceContext());
  _virtualHomeSub=LayoutLocalServiceUtil.addLayout(serviceContext.getUserId(),_userGroup.getGroup().getGroupId(),true,_virtualHome.getLayoutId(),"homesub","HomeSub",StringPool.BLANK,LayoutConstants.TYPE_PORTLET,false,"/homesub",ServiceTestUtil.getServiceContext());
  _existingVirtualLayoutFriendlyURL="/~/" + userGroupId + "/homesub";
  _nonExistingVirtualLayoutFriendlyURL="/~/" + userGroupId + "/homesubbb";
}
