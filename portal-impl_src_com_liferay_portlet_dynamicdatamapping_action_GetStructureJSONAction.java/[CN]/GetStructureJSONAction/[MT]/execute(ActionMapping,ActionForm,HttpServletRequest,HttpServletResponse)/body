{
  try {
    long structureId=ParamUtil.getLong(request,"structureId");
    String xsd=ParamUtil.getString(request,"xsd");
    DDMStructure structure=null;
    if (structureId > 0) {
      structure=DDMStructureServiceUtil.getStructure(structureId);
    }
    JSONArray jsonArray=DDMXSDUtil.getJSONArray(structure,xsd);
    response.setContentType(ContentTypes.APPLICATION_JSON);
    ServletResponseUtil.write(response,jsonArray.toString());
  }
 catch (  Exception e) {
    JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
    jsonObject.putException(e);
    response.setContentType(ContentTypes.APPLICATION_JSON);
    response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
    ServletResponseUtil.write(response,jsonObject.toString());
  }
  return null;
}
