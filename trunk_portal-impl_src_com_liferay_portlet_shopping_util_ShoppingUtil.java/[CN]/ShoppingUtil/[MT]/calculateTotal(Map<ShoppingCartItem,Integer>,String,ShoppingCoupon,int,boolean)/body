{
  double actualSubtotal=calculateActualSubtotal(items);
  double tax=calculateTax(items,stateId);
  double shipping=calculateAlternativeShipping(items,altShipping);
  double insurance=0.0;
  if (insure) {
    insurance=calculateInsurance(items);
  }
  double couponDiscount=calculateCouponDiscount(items,stateId,coupon);
  double total=actualSubtotal + tax + shipping+ insurance - couponDiscount;
  if (total < 0) {
    total=0.0;
  }
  return total;
}
