{
  ServiceTracker<?,?> serviceTracker=new ServiceTracker<>(bundleContext,bundleContext.createFilter(filterString),null);
  serviceTracker.open();
  try {
    if (serviceTracker.waitForService(timeout) == null) {
      throw new TimeoutException("Time out on waiting for " + filterString + " after "+ timeout+ "ms");
    }
  }
  finally {
    serviceTracker.close();
  }
}
