{
  long start=System.currentTimeMillis();
  List<URI> uris=_indexLPKGFiles(lpkgFiles);
  IndexValidator indexValidator=_indexValidatorFactory.create(_getTargetPlatformIndexURIs());
  try {
    List<String> messages=indexValidator.validate(uris);
    if (!messages.isEmpty()) {
      StringBundler sb=new StringBundler((messages.size() * 3) + 1);
      sb.append("LPKG validation failed with {");
      for (      String message : messages) {
        sb.append("[");
        sb.append(message);
        sb.append("], ");
      }
      sb.setIndex(sb.index() - 1);
      sb.append("]}");
      throw new LPKGVerifyException(sb.toString());
    }
  }
  finally {
    _cleanUp(uris);
    if (_log.isInfoEnabled()) {
      long duration=System.currentTimeMillis() - start;
      _log.info(String.format("LPKG validation time %02d:%02ds",MILLISECONDS.toMinutes(duration),MILLISECONDS.toSeconds(duration % Time.MINUTE)));
    }
  }
}
