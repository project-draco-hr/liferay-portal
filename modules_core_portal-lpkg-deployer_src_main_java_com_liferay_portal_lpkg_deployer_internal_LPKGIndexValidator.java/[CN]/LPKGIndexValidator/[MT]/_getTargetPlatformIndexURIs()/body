{
  List<File> files=new ArrayList<>();
  Map<Bundle,List<Bundle>> deployedLPKGBundles=_lpkgDeployer.getDeployedLPKGBundles();
  for (  Bundle bundle : deployedLPKGBundles.keySet()) {
    files.add(new File(bundle.getLocation()));
  }
  List<URI> uris=_indexLPKGFiles(files);
  Indexer indexer=_indexerFactory.createTargetPlatformIndexer();
  UnsyncByteArrayOutputStream unsyncByteArrayOutputStream=new UnsyncByteArrayOutputStream();
  indexer.index(unsyncByteArrayOutputStream);
  URL url=_bytesURLProtocolSupport.putData("liferay-target-platform",unsyncByteArrayOutputStream.toByteArray());
  uris.add(url.toURI());
  return uris;
}
