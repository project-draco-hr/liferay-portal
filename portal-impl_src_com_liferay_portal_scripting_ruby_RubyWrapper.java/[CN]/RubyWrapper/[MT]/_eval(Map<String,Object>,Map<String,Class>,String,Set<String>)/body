{
  Map<String,Object> scriptOutputObjects=new HashMap<String,Object>();
  try {
    for (    final String inputObjectName : inputObjects.keySet()) {
      String varName=inputObjectName;
      if (!inputObjectName.startsWith("$")) {
        varName="$" + inputObjectName;
      }
      _runtime.getGlobalVariables().define(varName,new BeanGlobalVariable(_runtime,inputObjects.get(inputObjectName),inputObjectTypes.get(inputObjectName)));
    }
    _runtime.evalScriptlet(script);
    for (    String outputObjectName : outputObjectNames) {
      scriptOutputObjects.put(outputObjectName,_runtime.getGlobalVariables().get(outputObjectName));
    }
  }
 catch (  RaiseException re) {
    StringBuilder sb=new StringBuilder();
    sb.append(re.getException().message.asJavaString());
    sb.append("\n\n");
    throw new ScriptExecutionException(sb.toString(),re);
  }
 finally {
    JavaEmbedUtils.terminate(_runtime);
    _runtime=null;
  }
  return scriptOutputObjects;
}
