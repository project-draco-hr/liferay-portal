{
  DLFileVersion dlFileVersion=DLFileVersionLocalServiceUtil.getFileVersion(classPK);
  long folderId=dlFileVersion.getFolderId();
  while (folderId != DLFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
    DLFolder dlFolder=DLFolderLocalServiceUtil.getFolder(folderId);
    if (dlFolder.isOverrideFileEntryTypes()) {
      break;
    }
    folderId=dlFolder.getParentFolderId();
  }
  try {
    long typePK=dlFileVersion.getFileEntryTypeId();
    return WorkflowDefinitionLinkLocalServiceUtil.getWorkflowDefinitionLink(companyId,groupId,DLFolder.class.getName(),folderId,typePK,true);
  }
 catch (  NoSuchWorkflowDefinitionLinkException nswdle) {
    return WorkflowDefinitionLinkLocalServiceUtil.getWorkflowDefinitionLink(companyId,groupId,DLFolder.class.getName(),folderId,DLFileEntryTypeConstants.ALL_FILE_ENTRY_TYPES_ID,true);
  }
}
