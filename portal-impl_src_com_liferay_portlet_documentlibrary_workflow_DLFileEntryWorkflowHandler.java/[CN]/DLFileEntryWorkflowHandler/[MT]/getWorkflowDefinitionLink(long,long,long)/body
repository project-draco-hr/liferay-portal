{
  DLFileVersion dlFileVersion=DLFileVersionLocalServiceUtil.getFileVersion(classPK);
  long folderId=dlFileVersion.getFolderId();
  while (folderId != DLFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
    DLFolder dlFolder=DLFolderLocalServiceUtil.getFolder(folderId);
    if (dlFolder.isOverrideFileEntryTypes()) {
      break;
    }
    folderId=dlFolder.getParentFolderId();
  }
  try {
    return WorkflowDefinitionLinkLocalServiceUtil.getWorkflowDefinitionLink(companyId,groupId,DLFolder.class.getName(),folderId,dlFileVersion.getFileEntryTypeId(),true);
  }
 catch (  NoSuchWorkflowDefinitionLinkException nswdle) {
    return WorkflowDefinitionLinkLocalServiceUtil.getWorkflowDefinitionLink(companyId,groupId,DLFolder.class.getName(),folderId,DLFileEntryTypeConstants.FILE_ENTRY_TYPE_ID_ALL,true);
  }
}
