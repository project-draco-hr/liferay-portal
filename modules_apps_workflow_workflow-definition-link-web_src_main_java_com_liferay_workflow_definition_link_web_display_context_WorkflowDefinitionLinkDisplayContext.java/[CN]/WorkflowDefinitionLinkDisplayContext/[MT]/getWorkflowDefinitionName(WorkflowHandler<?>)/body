{
  WorkflowDefinitionLink workflowDefinitionLink=null;
  try {
    if (calledFromControlPanel()) {
      workflowDefinitionLink=_workflowDefinitionLinkLocalService.getDefaultWorkflowDefinitionLink(_workflowDefinitionLinkRequestHelper.getCompanyId(),workflowHandler.getClassName(),0,0);
    }
 else {
      workflowDefinitionLink=_workflowDefinitionLinkLocalService.getWorkflowDefinitionLink(_workflowDefinitionLinkRequestHelper.getCompanyId(),_groupId,workflowHandler.getClassName(),0,0,true);
    }
  }
 catch (  NoSuchWorkflowDefinitionLinkException nswdle) {
  }
  String workflowDefinitionName=getDefaultWorkflowDefinitionLink(workflowHandler.getClassName());
  List<WorkflowDefinition> workflowDefinitions=getWorkflowDefinitions();
  for (  WorkflowDefinition workflowDefinition : workflowDefinitions) {
    if ((workflowDefinitionLink != null) && workflowDefinitionLink.getWorkflowDefinitionName().equals(workflowDefinition.getName()) && (workflowDefinitionLink.getWorkflowDefinitionVersion() == workflowDefinition.getVersion())) {
      workflowDefinitionName=HtmlUtil.escape(workflowDefinition.getName()) + " (" + LanguageUtil.format(_workflowDefinitionLinkRequestHelper.getLocale(),"version-x",workflowDefinition.getVersion(),false)+ ")";
      break;
    }
  }
  return workflowDefinitionName;
}
