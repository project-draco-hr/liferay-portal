{
  String driverClassName=properties.getProperty("driverClassName");
  try {
    Class.forName(driverClassName);
  }
 catch (  ClassNotFoundException cnfe) {
    if (!ServerDetector.isGeronimo() && !ServerDetector.isJetty() && !ServerDetector.isTomcat()) {
      throw cnfe;
    }
    String url=PropsUtil.get(PropsKeys.SETUP_DATABASE_JAR_URL,new Filter(driverClassName));
    String name=PropsUtil.get(PropsKeys.SETUP_DATABASE_JAR_NAME,new Filter(driverClassName));
    if (Validator.isNull(url) || Validator.isNull(name)) {
      throw cnfe;
    }
    ClassLoader globalClassLoader=SystemException.class.getClassLoader();
    if (!(globalClassLoader instanceof URLClassLoader)) {
      _log.error("Unable to install jar, global ClassLoader is not " + "URLClassLoader");
      return;
    }
    JarUtil.downloadAndInstallJar(new URL(url),PropsValues.LIFERAY_LIB_GLOBAL_DIR,name,(URLClassLoader)globalClassLoader);
  }
}
