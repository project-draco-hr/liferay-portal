{
  Map<String,String> parameters=new HashMap<>();
  parameters.put(SessionParameter.BINDING_TYPE,BindingType.WEBSERVICES.value());
  parameters.put(SessionParameter.COMPRESSION,Boolean.TRUE.toString());
  Locale locale=LocaleUtil.getSiteDefault();
  parameters.put(SessionParameter.LOCALE_ISO3166_COUNTRY,locale.getCountry());
  parameters.put(SessionParameter.LOCALE_ISO639_LANGUAGE,locale.getLanguage());
  String password=PrincipalThreadLocal.getPassword();
  parameters.put(SessionParameter.PASSWORD,password);
  String login=getLogin();
  parameters.put(SessionParameter.USER,login);
  parameters.put(SessionParameter.WEBSERVICES_ACL_SERVICE,getTypeSettingsValue(CMISRepositoryConstants.CMIS_WEBSERVICES_ACL_SERVICE_PARAMETER));
  parameters.put(SessionParameter.WEBSERVICES_DISCOVERY_SERVICE,getTypeSettingsValue(CMISRepositoryConstants.CMIS_WEBSERVICES_DISCOVERY_SERVICE_PARAMETER));
  parameters.put(SessionParameter.WEBSERVICES_MULTIFILING_SERVICE,getTypeSettingsValue(CMISRepositoryConstants.CMIS_WEBSERVICES_MULTIFILING_SERVICE_PARAMETER));
  parameters.put(SessionParameter.WEBSERVICES_NAVIGATION_SERVICE,getTypeSettingsValue(CMISRepositoryConstants.CMIS_WEBSERVICES_NAVIGATION_SERVICE_PARAMETER));
  parameters.put(SessionParameter.WEBSERVICES_OBJECT_SERVICE,getTypeSettingsValue(CMISRepositoryConstants.CMIS_WEBSERVICES_OBJECT_SERVICE_PARAMETER));
  parameters.put(SessionParameter.WEBSERVICES_POLICY_SERVICE,getTypeSettingsValue(CMISRepositoryConstants.CMIS_WEBSERVICES_POLICY_SERVICE_PARAMETER));
  parameters.put(SessionParameter.WEBSERVICES_RELATIONSHIP_SERVICE,getTypeSettingsValue(CMISRepositoryConstants.CMIS_WEBSERVICES_RELATIONSHIP_SERVICE_PARAMETER));
  parameters.put(SessionParameter.WEBSERVICES_REPOSITORY_SERVICE,getTypeSettingsValue(CMISRepositoryConstants.CMIS_WEBSERVICES_REPOSITORY_SERVICE_PARAMETER));
  parameters.put(SessionParameter.WEBSERVICES_VERSIONING_SERVICE,getTypeSettingsValue(CMISRepositoryConstants.CMIS_WEBSERVICES_VERSIONING_SERVICE_PARAMETER));
  CMISRepositoryUtil.checkRepository(getRepositoryId(),parameters,getTypeSettingsProperties(),CMISRepositoryConstants.CMIS_WEBSERVICES_REPOSITORY_ID_PARAMETER);
  return CMISRepositoryUtil.createSession(parameters);
}
