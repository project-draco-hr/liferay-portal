{
  LocalContainerEntityManagerFactoryBean localContainerEntityManagerFactoryBean=new LocalContainerEntityManagerFactoryBean();
  localContainerEntityManagerFactoryBean.setDataSource(dataSource);
  localContainerEntityManagerFactoryBean.afterPropertiesSet();
  EntityManagerFactory entityManagerFactory=localContainerEntityManagerFactoryBean.getObject();
  com.liferay.portal.dao.orm.jpa.SessionFactoryImpl sessionFactoryImpl=(com.liferay.portal.dao.orm.jpa.SessionFactoryImpl)PortalBeanLocatorUtil.locate(name);
  sessionFactoryImpl.setEntityManagerFactory(entityManagerFactory);
}
