{
  for (  Map.Entry<String,String> entry : _definitionFiles.entrySet()) {
    String definitionName=entry.getKey();
    String fileName=entry.getValue();
    ServiceContext serviceContext=new ServiceContext();
    serviceContext.setCompanyId(companyId);
    int kaleoDefinitionsCount=kaleoDefinitionLocalService.getKaleoDefinitionsCount(definitionName,serviceContext);
    if (kaleoDefinitionsCount > 0) {
      return;
    }
    ClassLoader classLoader=getClass().getClassLoader();
    InputStream inputStream=classLoader.getResourceAsStream(fileName);
    if (inputStream == null) {
      if (_log.isWarnEnabled()) {
        _log.warn("Unable to find definition file for " + definitionName + " with file name "+ fileName);
      }
      return;
    }
    User defaultUser=UserLocalServiceUtil.getDefaultUser(companyId);
    _workflowDefinitionManager.deployWorkflowDefinition(serviceContext.getCompanyId(),defaultUser.getUserId(),definitionName,FileUtil.getBytes(inputStream));
  }
}
