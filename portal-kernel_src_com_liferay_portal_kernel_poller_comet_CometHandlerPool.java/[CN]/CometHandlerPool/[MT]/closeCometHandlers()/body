{
  Lock writeLock=_cometHandlerPoolReadWriteLock.writeLock();
  try {
    writeLock.lock();
    Set<Map.Entry<String,CometHandler>> cometHandlers=_cometHandlers.entrySet();
    Iterator<Map.Entry<String,CometHandler>> itr=cometHandlers.iterator();
    while (itr.hasNext()) {
      Map.Entry<String,CometHandler> entry=itr.next();
      CometHandler cometHandler=entry.getValue();
      if (cometHandler != null) {
        cometHandler.destroy();
      }
      itr.remove();
    }
  }
  finally {
    writeLock.unlock();
  }
}
