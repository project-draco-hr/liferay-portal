{
  String sessionId=cometSession.getSessionId();
  if (_log.isDebugEnabled()) {
    _log.debug("Start comet handler " + sessionId);
  }
  Lock writeLock=_cometHandlerPoolReadWriteLock.writeLock();
  try {
    writeLock.lock();
    if (_cometHandlers.containsKey(sessionId)) {
      closeCometHandler(sessionId);
    }
    _cometHandlers.put(sessionId,cometHandler);
    if (_log.isWarnEnabled()) {
      _log.warn("Initialize comet handler " + sessionId);
    }
    cometHandler.init(cometSession);
  }
  finally {
    writeLock.unlock();
  }
}
