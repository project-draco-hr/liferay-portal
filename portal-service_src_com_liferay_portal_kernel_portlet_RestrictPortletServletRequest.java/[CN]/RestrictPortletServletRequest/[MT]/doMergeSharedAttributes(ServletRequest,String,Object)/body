{
  if (name.startsWith(LIFERAY_SHARED_PREFIX)) {
    if (value == _nullValue) {
      servletRequest.removeAttribute(name);
      if (_log.isInfoEnabled()) {
        _log.info("Remove shared attribute " + name);
      }
    }
 else {
      Object masterValue=servletRequest.getAttribute(name);
      if ((masterValue == null) || !(value instanceof Mergeable)) {
        servletRequest.setAttribute(name,value);
        if (_log.isInfoEnabled()) {
          _log.info("Set shared attribute " + name);
        }
      }
 else {
        Mergeable<Object> masterMergeable=(Mergeable<Object>)value;
        Mergeable<Object> slaveMergeable=(Mergeable<Object>)value;
        masterMergeable.merge(slaveMergeable);
        if (_log.isInfoEnabled()) {
          _log.info("Merge shared attribute " + name);
        }
      }
    }
  }
 else {
    if ((value != _nullValue) && _log.isDebugEnabled()) {
      _log.debug("Ignore setting restricted attribute " + name);
    }
  }
}
