{
  ServletRequest servletRequest=getRequest();
  Lock mergeLock=(Lock)servletRequest.getAttribute(WebKeys.PARALLEL_RENDERING_MERGE_LOCK);
  if (mergeLock != null) {
    mergeLock.lock();
  }
  try {
    doMergeSharedAttributes(servletRequest);
  }
  finally {
    if (mergeLock != null) {
      mergeLock.unlock();
    }
  }
}
