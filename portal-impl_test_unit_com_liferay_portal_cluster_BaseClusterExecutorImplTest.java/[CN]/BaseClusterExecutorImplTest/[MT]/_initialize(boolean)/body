{
  if (_initialized) {
    return;
  }
  PortalUtil portalUtil=new PortalUtil();
  portalUtil.setPortal(new PortalImpl());
  PortalUUIDUtil portalUUIDUtil=new PortalUUIDUtil();
  portalUUIDUtil.setPortalUUID(new PortalUUIDImpl());
  PropsUtil.setProps(new PropsImpl());
  PortalExecutorManagerUtil portalExecutorManagerUtil=new PortalExecutorManagerUtil();
  portalExecutorManagerUtil.setPortalExecutorManager(new MockPortalExecutorManager());
  if (loadSpringXML) {
    ClassLoader classLoader=getClass().getClassLoader();
    PortletClassLoaderUtil.setClassLoader(classLoader);
    ApplicationContext applicationContext=new FileSystemXmlApplicationContext("portal-impl/test/unit/com/liferay/portal/cluster/" + "test-spring.xml");
    BeanLocator beanLocator=new BeanLocatorImpl(classLoader,applicationContext);
    PortalBeanLocatorUtil.setBeanLocator(beanLocator);
    PortletBeanLocatorUtil.setBeanLocator(SERVLET_CONTEXT_NAME,beanLocator);
  }
  JDKLoggerTestUtil.configureJDKLogger(ClusterBase.class.getName(),Level.FINE);
  _initialized=true;
}
