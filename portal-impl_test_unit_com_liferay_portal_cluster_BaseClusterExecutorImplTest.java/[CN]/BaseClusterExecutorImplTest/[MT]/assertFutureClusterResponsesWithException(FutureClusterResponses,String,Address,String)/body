{
  ClusterNodeResponses clusterNodeResponses=futureClusterResponses.get();
  ClusterNodeResponse clusterNodeResponse=clusterNodeResponses.getClusterResponse(expectedAddress);
  Exception exception=clusterNodeResponse.getException();
  Assert.assertEquals(1,clusterNodeResponses.size());
  Assert.assertEquals(expectedUUID,clusterNodeResponse.getUuid());
  Assert.assertEquals(expectedAddress,clusterNodeResponse.getAddress());
  Assert.assertTrue(clusterNodeResponse.hasException());
  if (expectedExceptionMessage != null) {
    String exceptionMessage=exception.getMessage();
    if (exception instanceof InvocationTargetException) {
      InvocationTargetException invocationTargetException=(InvocationTargetException)exception;
      Throwable throwable=invocationTargetException.getTargetException();
      exceptionMessage=throwable.getMessage();
    }
    Assert.assertEquals(expectedExceptionMessage,exceptionMessage);
  }
  try {
    clusterNodeResponse.getResult();
  }
 catch (  Exception e) {
    Assert.assertEquals(exception,e);
  }
}
