{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  Theme theme=themeDisplay.getTheme();
  PortletDisplay portletDisplay=themeDisplay.getPortletDisplay();
  RequestDispatcher requestDispatcher=servletContext.getRequestDispatcher(portletPage);
  StringServletResponse stringResponse=new StringServletResponse(response);
  requestDispatcher.include(request,stringResponse);
  portletDisplay.setContent(stringResponse.getString());
  String content=ThemeUtil.includeVM(servletContext,request,pageContext,wrapPage,theme,false);
  return _CONTENT_WRAPPER_PRE.concat(content).concat(_CONTENT_WRAPPER_POST);
}
