{
  String script=template.getXsl();
  if (transform) {
    String[] listeners=PropsUtil.getArray(PropsUtil.JOURNAL_TRANSFORMER_LISTENER);
    for (int i=0; i < listeners.length; i++) {
      TransformerListener listener=null;
      try {
        listener=(TransformerListener)Class.forName(listeners[i]).newInstance();
        listener.setTemplateDriven(true);
        listener.setLanguageId(languageId);
        listener.setTokens(tokens);
      }
 catch (      Exception e) {
        _log.error(e,e);
      }
      if (listener != null) {
        script=listener.onScript(script);
      }
    }
  }
  return script;
}
