{
  Map<String,String> tokens=new HashMap<String,String>();
  if (themeDisplay != null) {
    _populateTokens(tokens,articleGroupId,themeDisplay);
  }
 else   if (Validator.isNotNull(xmlRequest)) {
    try {
      _populateTokens(tokens,articleGroupId,xmlRequest);
    }
 catch (    Exception e) {
      if (_log.isWarnEnabled()) {
        _log.warn(e,e);
      }
    }
  }
  return tokens;
}
