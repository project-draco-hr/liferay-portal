{
  String name=xsdEl.attributeValue("name");
  String localPath="dynamic-element[@name='" + name + "']";
  String fullPath=elPath + "/" + localPath;
  XPath xPathSelector=DocumentHelper.createXPath(fullPath);
  List<Element> curElements=xPathSelector.selectNodes(curDoc);
  Element newEl=(Element)xPathSelector.selectNodes(newDoc).get(0);
  if (curElements.size() > 0) {
    Element curEl=curElements.get(0);
    List<Element> curDynamicContents=curEl.elements("dynamic-content");
    Element newContentEl=newEl.element("dynamic-content");
    String newContentLanguageId=newContentEl.attributeValue("language-id",StringPool.BLANK);
    if (newContentLanguageId.equals(StringPool.BLANK)) {
      for (int k=curDynamicContents.size() - 1; k >= 0; k--) {
        Element curContentEl=curDynamicContents.get(k);
        String curContentLanguageId=curContentEl.attributeValue("language-id",StringPool.BLANK);
        if ((curEl.attributeValue("type").equals("image")) && (!curContentLanguageId.equals(defaultLocale) && !curContentLanguageId.equals(StringPool.BLANK))) {
          long id=GetterUtil.getLong(curContentEl.attributeValue("id"));
          ImageLocalUtil.deleteImage(id);
        }
        curContentEl.detach();
      }
      curEl.content().add(newContentEl.createCopy());
    }
 else {
      boolean match=false;
      for (int k=curDynamicContents.size() - 1; k >= 0; k--) {
        Element curContentEl=curDynamicContents.get(k);
        String curContentLanguageId=curContentEl.attributeValue("language-id",StringPool.BLANK);
        if ((newContentLanguageId.equals(curContentLanguageId)) || (newContentLanguageId.equals(defaultLocale) && curContentLanguageId.equals(StringPool.BLANK))) {
          curContentEl.detach();
          curEl.content().add(k,newContentEl.createCopy());
          match=true;
        }
        if (curContentLanguageId.equals(StringPool.BLANK)) {
          curContentEl.addAttribute("language-id",defaultLocale);
        }
      }
      if (!match) {
        curEl.content().add(newContentEl.createCopy());
      }
    }
  }
 else {
    xPathSelector=DocumentHelper.createXPath(elPath);
    Element parentEl=(Element)xPathSelector.selectNodes(curDoc).get(0);
    parentEl.content().add(newEl.createCopy());
  }
  String type=xsdEl.attributeValue("type",StringPool.BLANK);
  if (!type.equals("list") && !type.equals("multi-list")) {
    path.push(localPath);
    _mergeLocaleContent(path,curDoc,newDoc,xsdEl,defaultLocale);
    path.pop();
  }
}
