{
  long companyId=PortalUtil.getCompanyId(request);
  long userId=PortalUtil.getUserId(request);
  if (userId == 0) {
    return StringPool.BLANK;
  }
  String pollerRequestString=ParamUtil.getString(request,"pollerRequest");
  PollerHeader pollerHeader=PollerRequestHandlerUtil.getPollerHeader(pollerRequestString);
  if (pollerHeader == null) {
    return StringPool.BLANK;
  }
  if (userId != pollerHeader.getUserId()) {
    return StringPool.BLANK;
  }
  JSONObject pollerResponseHeaderJSONObject=PollerRequestHandlerUtil.processRequest(request,pollerRequestString);
  if (pollerResponseHeaderJSONObject == null) {
    return StringPool.BLANK;
  }
  SynchronousPollerChannelListener synchronousPollerChannelListener=new SynchronousPollerChannelListener(companyId,userId,pollerResponseHeaderJSONObject);
  return synchronousPollerChannelListener.getNotificationEvents(PropsValues.POLLER_REQUEST_TIMEOUT);
}
