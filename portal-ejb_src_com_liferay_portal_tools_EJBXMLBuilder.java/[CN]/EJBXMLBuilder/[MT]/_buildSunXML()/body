{
  StringBuffer sb=new StringBuffer();
  sb.append("<?xml version=\"1.0\"?>\n");
  sb.append("<!DOCTYPE sun-ejb-jar PUBLIC \"-//Sun Microsystems, Inc.//DTD Sun ONE Application Server 7.0 EJB 2.0//EN\" \"http://www.sun.com/software/sunone/appserver/dtds/sun-ejb-jar_2_0-0.dtd\">\n");
  sb.append("\n<sun-ejb-jar>\n");
  sb.append("\t<enterprise-beans>\n");
  SAXReader reader=new SAXReader();
  reader.setEntityResolver(new EntityResolver());
  Document doc=reader.read(new File("classes/META-INF/ejb-jar.xml"));
  Iterator itr=doc.getRootElement().element("enterprise-beans").elements("session").iterator();
  while (itr.hasNext()) {
    Element entity=(Element)itr.next();
    sb.append("\t\t<ejb>\n");
    sb.append("\t\t\t<ejb-name>").append(entity.elementText("ejb-name")).append("</ejb-name>\n");
    String displayName=entity.elementText("display-name");
    if (displayName.endsWith("LocalServiceEJB")) {
      sb.append("\t\t\t<jndi-name>ejb/liferay/").append(displayName.substring(0,displayName.length() - 3)).append("Home</jndi-name>\n");
    }
 else {
      sb.append("\t\t\t<jndi-name>").append(entity.elementText("ejb-name")).append("</jndi-name>\n");
    }
    sb.append("\t\t\t<bean-pool>\n");
    sb.append("\t\t\t\t<steady-pool-size>0</steady-pool-size>\n");
    sb.append("\t\t\t\t<resize-quantity>60</resize-quantity>\n");
    sb.append("\t\t\t\t<max-pool-size>60</max-pool-size>\n");
    sb.append("\t\t\t\t<pool-idle-timeout-in-seconds>900</pool-idle-timeout-in-seconds>\n");
    sb.append("\t\t\t</bean-pool>\n");
    sb.append("\t\t</ejb>\n");
  }
  sb.append("\t</enterprise-beans>\n");
  sb.append("</sun-ejb-jar>");
  File outputFile=new File("classes/META-INF/sun-ejb-jar.xml");
  if (!outputFile.exists() || !FileUtil.read(outputFile).equals(sb.toString())) {
    FileUtil.write(outputFile,sb.toString());
    System.out.println(outputFile.toString());
  }
}
