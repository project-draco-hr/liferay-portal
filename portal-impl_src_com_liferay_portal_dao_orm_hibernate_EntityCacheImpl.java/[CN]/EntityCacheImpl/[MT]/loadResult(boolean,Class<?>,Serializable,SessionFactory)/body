{
  if (!PropsValues.VALUE_OBJECT_ENTITY_CACHE_ENABLED || !entityCacheEnabled || !CacheRegistry.isActive()) {
    Session session=null;
    try {
      session=sessionFactory.openSession();
      return session.load(classObj,primaryKeyObj);
    }
  finally {
      sessionFactory.closeSession(session);
    }
  }
  PortalCache portalCache=_getPortalCache(classObj.getName());
  String key=_encodeKey(primaryKeyObj);
  Object result=_multiVMPool.get(portalCache,key);
  if (result != null) {
    result=_objectToResult(result);
  }
 else {
    if (_log.isDebugEnabled()) {
      _log.debug("Load " + classObj + " "+ primaryKeyObj+ " from session");
    }
    Session session=null;
    try {
      session=sessionFactory.openSession();
      result=session.load(classObj,primaryKeyObj);
    }
  finally {
      if (result == null) {
        result=StringPool.BLANK;
      }
      result=_objectToResult(result);
      _multiVMPool.put(portalCache,key,result);
      sessionFactory.closeSession(session);
    }
  }
  return result;
}
