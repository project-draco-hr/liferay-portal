{
  if (!PropsValues.VALUE_OBJECT_ENTITY_CACHE_ENABLED || !entityCacheEnabled || !CacheRegistry.isActive()) {
    Session session=null;
    try {
      session=sessionFactory.openSession();
      return session.load(classObj,primaryKeyObj);
    }
  finally {
      sessionFactory.closeSession(session);
    }
  }
  Object result=null;
  Map<String,Object> localCache=null;
  String localCacheKey=null;
  if (_localCacheEnabled.get().booleanValue()) {
    localCache=_localCache.get();
    localCacheKey=_encodeLocalCacheKey(classObj,primaryKeyObj);
    result=localCache.get(localCacheKey);
  }
  if (result == null) {
    PortalCache portalCache=_getPortalCache(classObj.getName());
    String cacheKey=_encodeCacheKey(primaryKeyObj);
    result=_multiVMPool.get(portalCache,cacheKey);
    if (result == null) {
      if (_log.isDebugEnabled()) {
        _log.debug("Load " + classObj + " "+ primaryKeyObj+ " from session");
      }
      Session session=null;
      try {
        session=sessionFactory.openSession();
        result=session.load(classObj,primaryKeyObj);
      }
  finally {
        if (result == null) {
          result=StringPool.BLANK;
        }
        result=_objectToResult(result);
        _multiVMPool.put(portalCache,cacheKey,result);
        sessionFactory.closeSession(session);
      }
    }
    if (_localCacheEnabled.get().booleanValue()) {
      localCache.put(localCacheKey,result);
    }
  }
  result=_objectToResult(result);
  return result;
}
