{
  Group group=GroupTestUtil.addGroup();
  Role role=RoleTestUtil.addRole(RoleConstants.TYPE_SITE);
  User user=UserTestUtil.addUser();
  UserGroup userGroup=UserGroupTestUtil.addUserGroup();
  _groups.add(group);
  _roles.add(role);
  _users.add(user);
  _userGroups.add(userGroup);
  GroupLocalServiceUtil.addUserGroup(user.getUserId(),group);
  GroupLocalServiceUtil.addUserGroupGroup(userGroup.getUserGroupId(),group);
  long[] roleIds=new long[]{role.getRoleId()};
  UserGroupGroupRoleLocalServiceUtil.addUserGroupGroupRoles(userGroup.getGroupId(),group.getGroupId(),roleIds);
  UserGroupRoleLocalServiceUtil.addUserGroupRoles(user.getUserId(),group.getGroupId(),roleIds);
  Assert.assertEquals(2,RoleLocalServiceUtil.getAssigneesTotal(role.getRoleId()));
}
