{
  Binding userBinding=_portalLDAP.getUser(ldapServerId,user.getCompanyId(),user.getScreenName(),user.getEmailAddress());
  if (userBinding != null) {
    return _portalLDAP.getNameInNamespace(ldapServerId,user.getCompanyId(),userBinding);
  }
  StringBundler sb=new StringBundler(5);
  sb.append(GetterUtil.getString(userMappings.getProperty(_userDNFieldName),_DEFAULT_DN));
  sb.append(StringPool.EQUAL);
  sb.append(BeanPropertiesUtil.getStringSilent(user,_userDNFieldName));
  sb.append(StringPool.COMMA);
  sb.append(_portalLDAP.getUsersDN(ldapServerId,user.getCompanyId()));
  return sb.toString();
}
