{
  String postfix=getPropertyPostfix(ldapServerId);
  String filter=PrefsPropsUtil.getString(companyId,PropsKeys.LDAP_AUTH_SEARCH_FILTER + postfix);
  if (_log.isDebugEnabled()) {
    _log.debug("Search filter before transformation " + filter);
  }
  filter=StringUtil.replace(filter,new String[]{"@company_id@","@email_address@","@screen_name@","@user_id@"},new String[]{String.valueOf(companyId),emailAddress,screenName,userId});
  LDAPUtil.validateFilter(filter);
  if (_log.isDebugEnabled()) {
    _log.debug("Search filter after transformation " + filter);
  }
  return filter;
}
