{
  if (request.getAttribute(WebKeys.WORKFLOW_DEFINITION) != null) {
    return;
  }
  String name=ParamUtil.getString(request,"name");
  int version=ParamUtil.getInteger(request,"version");
  List<WorkflowDefinition> workflowDefinitions=WorkflowDefinitionManagerUtil.getWorkflowDefinitions(name,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  WorkflowDefinition workflowDefinition=null;
  for (  WorkflowDefinition curWorkflowDefinition : workflowDefinitions) {
    int curVersion=curWorkflowDefinition.getWorkflowDefinitionVersion();
    if (version == curVersion) {
      workflowDefinition=curWorkflowDefinition;
      break;
    }
  }
  request.setAttribute(WebKeys.WORKFLOW_DEFINITION,workflowDefinition);
}
