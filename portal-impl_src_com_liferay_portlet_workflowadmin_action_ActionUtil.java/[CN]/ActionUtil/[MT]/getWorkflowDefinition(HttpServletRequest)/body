{
  if (request.getAttribute(WebKeys.WORKFLOW_DEFINITION) != null) {
    return;
  }
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  String name=ParamUtil.getString(request,"name");
  int version=ParamUtil.getInteger(request,"version");
  List<WorkflowDefinition> workflowDefinitions=WorkflowDefinitionManagerUtil.getWorkflowDefinitions(themeDisplay.getCompanyId(),name,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  for (  WorkflowDefinition workflowDefinition : workflowDefinitions) {
    if (version == workflowDefinition.getVersion()) {
      request.setAttribute(WebKeys.WORKFLOW_DEFINITION,workflowDefinition);
      break;
    }
  }
}
