{
  MaintenanceUtil.appendStatus("<ul>");
  for (  Tuple tuple : modelTableDetails.values()) {
    String table=(String)tuple.getObject(0);
    Object[][] columns=(Object[][])tuple.getObject(1);
    String sqlCreate=(String)tuple.getObject(2);
    MaintenanceUtil.appendStatus("<li>Migrating table " + table + "</li>");
    migrateTable(db,connection,table,columns,sqlCreate);
  }
  MaintenanceUtil.appendStatus("</ul>");
  if (_log.isDebugEnabled()) {
    _log.debug("Migrating database indexes");
  }
  StartupHelperUtil.updateIndexes(db,connection,false);
  List<ServiceComponent> serviceComponents=ServiceComponentLocalServiceUtil.getLatestServiceComponents();
  Set<String> validIndexNames=new HashSet<>();
  for (  ServiceComponent serviceComponent : serviceComponents) {
    String indexesSQL=serviceComponent.getIndexesSQL();
    db.addIndexes(connection,indexesSQL,validIndexNames);
  }
}
