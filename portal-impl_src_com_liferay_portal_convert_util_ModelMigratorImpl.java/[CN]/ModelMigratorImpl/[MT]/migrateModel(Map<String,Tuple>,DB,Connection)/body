{
  int i=0;
  for (  Tuple tuple : modelTableDetails.values()) {
    if ((i > 0) && (i % (modelTableDetails.size() / 4) == 0)) {
      MaintenanceUtil.appendStatus((i * 100 / modelTableDetails.size()) + "%");
    }
    String table=(String)tuple.getObject(0);
    Object[][] columns=(Object[][])tuple.getObject(1);
    String sqlCreate=(String)tuple.getObject(2);
    migrateTable(db,connection,table,columns,sqlCreate);
    i++;
  }
  if (_log.isDebugEnabled()) {
    _log.debug("Migrating database indexes");
  }
  StartupHelperUtil.updateIndexes(db,connection,false);
  List<ServiceComponent> serviceComponents=ServiceComponentLocalServiceUtil.getLatestServiceComponents();
  Set<String> validIndexNames=new HashSet<>();
  for (  ServiceComponent serviceComponent : serviceComponents) {
    String indexesSQL=serviceComponent.getIndexesSQL();
    db.addIndexes(connection,indexesSQL,validIndexNames);
  }
}
