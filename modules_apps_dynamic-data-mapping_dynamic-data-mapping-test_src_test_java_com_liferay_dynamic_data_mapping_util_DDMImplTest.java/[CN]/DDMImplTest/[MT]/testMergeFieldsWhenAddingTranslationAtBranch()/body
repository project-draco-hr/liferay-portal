{
  DDMForm ddmForm=createDDMForm();
  addDDMFormFields(ddmForm,createTextDDMFormField("Localizable","",true,false,false));
  addDDMFormFields(ddmForm,createTextDDMFormField("NonLocalizable","",false,false,false));
  DDMStructure ddmStructure=createStructure("Test Structure",ddmForm);
  Field existingLocalizableField=createField(ddmStructure.getStructureId(),"Localizable",createValuesList("Joe"),null);
  Field existingNonLocalizableField=createField(ddmStructure.getStructureId(),"NonLocalizable",createValuesList("NonLocalizable"),null);
  Field existingFieldsDisplayField=createFieldsDisplayField(ddmStructure.getStructureId(),"Localizable_INSTANCE_ovho,NonLocalizable_INSTANCE_zuvh");
  Fields existingFields=createFields(existingLocalizableField,existingNonLocalizableField,existingFieldsDisplayField);
  Field newLocalizedField=createBRField(ddmStructure.getStructureId(),"Localizable",createValuesList("Joao"));
  Field newFieldsDisplayField=createFieldsDisplayField(ddmStructure.getStructureId(),"Localizable_INSTANCE_ovho");
  Fields newFields=createFields(newLocalizedField,newFieldsDisplayField);
  Fields mergedFields=_ddmImpl.mergeFields(newFields,existingFields);
  Field fieldsDisplayField=mergedFields.get(_ddmImpl.FIELDS_DISPLAY_NAME);
  Assert.assertNotNull(fieldsDisplayField);
  String fieldsDisplayValue=(String)fieldsDisplayField.getValue();
  String[] fieldsDisplayValues=StringUtil.split(fieldsDisplayValue);
  testValues(fieldsDisplayValues,"Localizable_INSTANCE_ovho","NonLocalizable_INSTANCE_zuvh");
}
