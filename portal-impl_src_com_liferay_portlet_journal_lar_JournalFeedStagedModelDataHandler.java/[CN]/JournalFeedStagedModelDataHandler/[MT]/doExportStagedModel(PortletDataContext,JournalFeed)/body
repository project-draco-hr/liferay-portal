{
  Element feedElement=portletDataContext.getExportDataElement(feed);
  DDMStructure ddmStructure=DDMStructureLocalServiceUtil.fetchStructure(feed.getGroupId(),PortalUtil.getClassNameId(JournalArticle.class),feed.getStructureId(),true);
  if (ddmStructure != null) {
    StagedModelDataHandlerUtil.exportReferenceStagedModel(portletDataContext,feed,ddmStructure,PortletDataContext.REFERENCE_TYPE_STRONG);
  }
 else {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to find DDM structure with key " + feed.getStructureId());
    }
  }
  DDMTemplate ddmTemplate=DDMTemplateLocalServiceUtil.fetchTemplate(feed.getGroupId(),PortalUtil.getClassNameId(DDMStructure.class),feed.getTemplateId());
  if (ddmTemplate != null) {
    StagedModelDataHandlerUtil.exportReferenceStagedModel(portletDataContext,feed,ddmTemplate,PortletDataContext.REFERENCE_TYPE_STRONG);
  }
 else {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to find DDM template with key " + feed.getTemplateId());
    }
  }
  DDMTemplate rendererDDMTemplate=DDMTemplateLocalServiceUtil.fetchTemplate(feed.getGroupId(),PortalUtil.getClassNameId(DDMStructure.class),feed.getRendererTemplateId());
  if (rendererDDMTemplate != null) {
    Element rendererDDMTemplateElement=StagedModelDataHandlerUtil.exportReferenceStagedModel(portletDataContext,feed,rendererDDMTemplate,PortletDataContext.REFERENCE_TYPE_STRONG);
    rendererDDMTemplateElement.addAttribute("rendererDDMTemplate","true");
  }
 else {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to find DDM template with key " + feed.getRendererTemplateId());
    }
  }
  Group group=GroupLocalServiceUtil.getGroup(portletDataContext.getScopeGroupId());
  String newGroupFriendlyURL=group.getFriendlyURL().substring(1);
  String[] friendlyURLParts=StringUtil.split(feed.getTargetLayoutFriendlyUrl(),'/');
  String oldGroupFriendlyURL=friendlyURLParts[2];
  if (newGroupFriendlyURL.equals(oldGroupFriendlyURL)) {
    String targetLayoutFriendlyUrl=StringUtil.replaceFirst(feed.getTargetLayoutFriendlyUrl(),StringPool.SLASH + newGroupFriendlyURL + StringPool.SLASH,StringPool.SLASH + ExportImportHelper.DATA_HANDLER_GROUP_FRIENDLY_URL + StringPool.SLASH);
    feed.setTargetLayoutFriendlyUrl(targetLayoutFriendlyUrl);
  }
  portletDataContext.addClassedModel(feedElement,ExportImportPathUtil.getModelPath(feed),feed,JournalPortletDataHandler.NAMESPACE);
}
