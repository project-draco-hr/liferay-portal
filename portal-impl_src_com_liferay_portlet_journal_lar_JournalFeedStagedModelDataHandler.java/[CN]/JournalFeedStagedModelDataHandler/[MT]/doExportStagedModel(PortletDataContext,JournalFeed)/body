{
  Element feedElement=portletDataContext.getExportDataElement(feed);
  DDMStructure ddmStructure=DDMStructureLocalServiceUtil.fetchStructure(feed.getGroupId(),PortalUtil.getClassNameId(JournalArticle.class),feed.getStructureId(),true);
  if (ddmStructure != null) {
    StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,ddmStructure);
    portletDataContext.addReferenceElement(feed,feedElement,ddmStructure,false);
  }
 else {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to find DDM structure with key " + feed.getStructureId());
    }
  }
  DDMTemplate ddmTemplate=DDMTemplateLocalServiceUtil.fetchTemplate(feed.getGroupId(),PortalUtil.getClassNameId(DDMStructure.class),feed.getTemplateId());
  if (ddmTemplate != null) {
    StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,ddmTemplate);
    portletDataContext.addReferenceElement(feed,feedElement,ddmTemplate,false);
  }
 else {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to find DDM template with key " + feed.getTemplateId());
    }
  }
  DDMTemplate rendererDDMTemplate=DDMTemplateLocalServiceUtil.fetchTemplate(feed.getGroupId(),PortalUtil.getClassNameId(DDMStructure.class),feed.getRendererTemplateId());
  if (rendererDDMTemplate != null) {
    StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,rendererDDMTemplate);
    Element rendererDDMTemplateElement=portletDataContext.addReferenceElement(feed,feedElement,rendererDDMTemplate,false);
    rendererDDMTemplateElement.addAttribute("rendererDDMTemplate","true");
  }
 else {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to find DDM template with key " + feed.getRendererTemplateId());
    }
  }
  Group group=GroupLocalServiceUtil.getGroup(portletDataContext.getScopeGroupId());
  String newGroupFriendlyURL=group.getFriendlyURL().substring(1);
  String[] friendlyURLParts=StringUtil.split(feed.getTargetLayoutFriendlyUrl(),'/');
  String oldGroupFriendlyURL=friendlyURLParts[2];
  if (newGroupFriendlyURL.equals(oldGroupFriendlyURL)) {
    String targetLayoutFriendlyUrl=StringUtil.replaceFirst(feed.getTargetLayoutFriendlyUrl(),StringPool.SLASH + newGroupFriendlyURL + StringPool.SLASH,"/@data_handler_group_friendly_url@/");
    feed.setTargetLayoutFriendlyUrl(targetLayoutFriendlyUrl);
  }
  portletDataContext.addClassedModel(feedElement,ExportImportPathUtil.getModelPath(feed),feed,JournalPortletDataHandler.NAMESPACE);
}
