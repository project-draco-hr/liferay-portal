{
  Element feedElement=portletDataContext.getExportDataElement(feed);
  DDMStructure ddmStructure=DDMStructureLocalServiceUtil.fetchStructure(feed.getGroupId(),PortalUtil.getClassNameId(JournalArticle.class),feed.getDDMStructureKey(),true);
  if (ddmStructure != null) {
    StagedModelDataHandlerUtil.exportReferenceStagedModel(portletDataContext,feed,ddmStructure,PortletDataContext.REFERENCE_TYPE_STRONG);
  }
 else {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to find DDM structure with key " + feed.getDDMStructureKey());
    }
  }
  DDMTemplate ddmTemplate=DDMTemplateLocalServiceUtil.fetchTemplate(feed.getGroupId(),PortalUtil.getClassNameId(DDMStructure.class),feed.getDDMTemplateKey());
  if (ddmTemplate != null) {
    StagedModelDataHandlerUtil.exportReferenceStagedModel(portletDataContext,feed,ddmTemplate,PortletDataContext.REFERENCE_TYPE_STRONG);
  }
 else {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to find DDM template with key " + feed.getDDMTemplateKey());
    }
  }
  DDMTemplate rendererDDMTemplate=DDMTemplateLocalServiceUtil.fetchTemplate(feed.getGroupId(),PortalUtil.getClassNameId(DDMStructure.class),feed.getDDMRendererTemplateKey());
  if (rendererDDMTemplate != null) {
    Element rendererDDMTemplateElement=StagedModelDataHandlerUtil.exportReferenceStagedModel(portletDataContext,feed,rendererDDMTemplate,PortletDataContext.REFERENCE_TYPE_STRONG);
    rendererDDMTemplateElement.addAttribute("rendererDDMTemplate","true");
  }
 else {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to find DDM template with key " + feed.getDDMRendererTemplateKey());
    }
  }
  Group group=GroupLocalServiceUtil.getGroup(portletDataContext.getScopeGroupId());
  String newGroupFriendlyURL=group.getFriendlyURL().substring(1);
  String[] friendlyURLParts=StringUtil.split(feed.getTargetLayoutFriendlyUrl(),'/');
  String oldGroupFriendlyURL=friendlyURLParts[2];
  if (newGroupFriendlyURL.equals(oldGroupFriendlyURL)) {
    String targetLayoutFriendlyUrl=StringUtil.replaceFirst(feed.getTargetLayoutFriendlyUrl(),StringPool.SLASH + newGroupFriendlyURL + StringPool.SLASH,StringPool.SLASH + ExportImportHelper.DATA_HANDLER_GROUP_FRIENDLY_URL + StringPool.SLASH);
    feed.setTargetLayoutFriendlyUrl(targetLayoutFriendlyUrl);
  }
  Group targetLayoutGroup=GroupLocalServiceUtil.fetchFriendlyURLGroup(portletDataContext.getCompanyId(),StringPool.SLASH + oldGroupFriendlyURL);
  boolean privateLayout=false;
  String servletMapping=StringPool.SLASH + friendlyURLParts[1];
  if (!servletMapping.equals(PropsValues.LAYOUT_FRIENDLY_URL_PUBLIC_SERVLET_MAPPING)) {
    privateLayout=true;
  }
  String targetLayoutFriendlyURL=StringPool.SLASH + friendlyURLParts[3];
  Layout targetLayout=LayoutLocalServiceUtil.fetchLayoutByFriendlyURL(targetLayoutGroup.getGroupId(),privateLayout,targetLayoutFriendlyURL);
  portletDataContext.addReferenceElement(feed,feedElement,targetLayout,PortletDataContext.REFERENCE_TYPE_DEPENDENCY,true);
  portletDataContext.addClassedModel(feedElement,ExportImportPathUtil.getModelPath(feed),feed);
}
