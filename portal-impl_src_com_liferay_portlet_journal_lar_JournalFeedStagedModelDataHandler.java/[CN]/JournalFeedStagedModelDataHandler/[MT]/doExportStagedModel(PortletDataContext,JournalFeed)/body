{
  Element feedElement=portletDataContext.getExportDataElement(feed);
  DDMStructure ddmStructure=DDMStructureLocalServiceUtil.fetchStructure(feed.getGroupId(),PortalUtil.getClassNameId(JournalArticle.class),feed.getStructureId(),true);
  if (ddmStructure != null) {
    StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,ddmStructure);
    portletDataContext.addReferenceElement(feedElement,ddmStructure);
  }
 else {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to find structure with key " + feed.getStructureId());
    }
  }
  DDMTemplate ddmTemplate=DDMTemplateLocalServiceUtil.fetchTemplate(feed.getGroupId(),PortalUtil.getClassNameId(DDMStructure.class),feed.getTemplateId());
  if (ddmTemplate != null) {
    StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,ddmTemplate);
    portletDataContext.addReferenceElement(feedElement,ddmTemplate);
  }
 else {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to find template with key " + feed.getTemplateId());
    }
  }
  DDMTemplate rendererTemplate=DDMTemplateLocalServiceUtil.fetchTemplate(feed.getGroupId(),PortalUtil.getClassNameId(DDMStructure.class),feed.getRendererTemplateId());
  if (rendererTemplate != null) {
    StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,rendererTemplate);
    Element rendererTemplateElement=portletDataContext.addReferenceElement(feedElement,rendererTemplate);
    rendererTemplateElement.addAttribute("rendererTemplate","true");
  }
 else {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to find template with key " + feed.getRendererTemplateId());
    }
  }
  Group group=GroupLocalServiceUtil.getGroup(portletDataContext.getScopeGroupId());
  String newGroupFriendlyURL=group.getFriendlyURL().substring(1);
  String[] friendlyUrlParts=StringUtil.split(feed.getTargetLayoutFriendlyUrl(),'/');
  String oldGroupFriendlyURL=friendlyUrlParts[2];
  if (newGroupFriendlyURL.equals(oldGroupFriendlyURL)) {
    String targetLayoutFriendlyUrl=StringUtil.replaceFirst(feed.getTargetLayoutFriendlyUrl(),StringPool.SLASH + newGroupFriendlyURL + StringPool.SLASH,"/@data_handler_group_friendly_url@/");
    feed.setTargetLayoutFriendlyUrl(targetLayoutFriendlyUrl);
  }
  portletDataContext.addClassedModel(feedElement,ExportImportPathUtil.getModelPath(feed),feed,JournalPortletDataHandler.NAMESPACE);
}
