{
  ServiceTrackerMap<String,List<TrackedOne>> serviceTrackerMap=createServiceTrackerMap(_bundleContext,new Comparator<ServiceReference<TrackedOne>>(){
    @Override public int compare(    ServiceReference<TrackedOne> serviceReference1,    ServiceReference<TrackedOne> serviceReference2){
      return 0;
    }
  }
);
  TrackedOne trackedOne1=new TrackedOne();
  ServiceRegistration<TrackedOne> serviceRegistration1=registerService(trackedOne1);
  TrackedOne trackedOne2=new TrackedOne();
  ServiceRegistration<TrackedOne> serviceRegistration2=registerService(trackedOne2);
  TrackedOne trackedOne3=new TrackedOne();
  ServiceRegistration<TrackedOne> serviceRegistration3=registerService(trackedOne3);
  serviceRegistration2.unregister();
  List<TrackedOne> services=serviceTrackerMap.getService("aTarget");
  Assert.assertEquals(2,services.size());
  Assert.assertTrue(services.contains(trackedOne1));
  Assert.assertTrue(services.contains(trackedOne3));
  serviceRegistration3.unregister();
  services=serviceTrackerMap.getService("aTarget");
  Assert.assertEquals(1,services.size());
  Assert.assertTrue(services.contains(trackedOne1));
  serviceRegistration1.unregister();
}
