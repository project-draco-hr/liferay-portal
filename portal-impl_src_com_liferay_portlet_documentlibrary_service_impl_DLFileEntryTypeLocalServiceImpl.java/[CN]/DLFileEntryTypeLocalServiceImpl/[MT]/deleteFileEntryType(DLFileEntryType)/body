{
  if (dlFileEntryPersistence.countByFileEntryTypeId(dlFileEntryType.getFileEntryTypeId()) > 0) {
    throw new RequiredFileEntryTypeException("There are file entries of file entry type " + dlFileEntryType.getFileEntryTypeId());
  }
  DDMStructure ddmStructure=DDMStructureManagerUtil.fetchStructure(dlFileEntryType.getGroupId(),classNameLocalService.getClassNameId(DLFileEntryMetadata.class),DLUtil.getDDMStructureKey(dlFileEntryType));
  if (ddmStructure == null) {
    ddmStructure=DDMStructureManagerUtil.fetchStructure(dlFileEntryType.getGroupId(),classNameLocalService.getClassNameId(DLFileEntryMetadata.class),DLUtil.getDeprecatedDDMStructureKey(dlFileEntryType));
  }
  if (ddmStructure != null) {
    long classNameId=classNameLocalService.getClassNameId(DLFileEntryType.class);
    DDMStructureLinkManagerUtil.deleteStructureLink(classNameId,dlFileEntryType.getFileEntryTypeId(),ddmStructure.getStructureId());
    DDMStructureManagerUtil.deleteStructure(ddmStructure.getStructureId());
  }
  dlFileEntryTypePersistence.remove(dlFileEntryType);
}
