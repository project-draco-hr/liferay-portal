{
  if (dlFileEntryPersistence.countByFileEntryTypeId(dlFileEntryType.getFileEntryTypeId()) > 0) {
    throw new RequiredStructureException(RequiredStructureException.REFERENCED_STRUCTURE);
  }
  DDMStructure ddmStructure=ddmStructureLocalService.fetchStructure(dlFileEntryType.getGroupId(),classNameLocalService.getClassNameId(DLFileEntryMetadata.class),DLUtil.getDDMStructureKey(dlFileEntryType));
  if (ddmStructure == null) {
    ddmStructure=ddmStructureLocalService.fetchStructure(dlFileEntryType.getGroupId(),classNameLocalService.getClassNameId(DLFileEntryMetadata.class),DLUtil.getDeprecatedDDMStructureKey(dlFileEntryType));
  }
  if (ddmStructure != null) {
    ddmStructureLocalService.deleteStructure(ddmStructure.getStructureId());
  }
  dlFileEntryTypePersistence.remove(dlFileEntryType);
}
