{
  KBFolder kbFolder=null;
  int kbArticlesCount=KBArticleLocalServiceUtil.getKBArticlesCount(groupId,ancestorKBFolder.getKbFolderId(),WorkflowConstants.STATUS_APPROVED);
  if (Validator.isNotNull(preferredKBFolderUrlTitle) && (kbArticlesCount == 0)) {
    kbFolder=KBFolderLocalServiceUtil.fetchKBFolderByUrlTitle(groupId,ancestorKBFolder.getKbFolderId(),preferredKBFolderUrlTitle);
  }
  if ((kbFolder == null) && (kbArticlesCount == 0)) {
    kbFolder=KBFolderLocalServiceUtil.fetchFirstChildKBFolder(groupId,ancestorKBFolder.getKbFolderId());
  }
  if (kbFolder == null) {
    kbFolder=ancestorKBFolder;
  }
  KBArticle kbArticle=KBArticleLocalServiceUtil.fetchFirstChildKBArticle(groupId,kbFolder.getKbFolderId());
  return new KBArticleSelection(kbArticle,true);
}
