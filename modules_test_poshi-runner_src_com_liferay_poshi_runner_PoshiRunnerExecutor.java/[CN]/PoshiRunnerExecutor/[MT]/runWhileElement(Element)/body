{
  PoshiRunnerStackTraceUtil.setCurrentElement(element);
  XMLLoggerHandler.updateStatus(element,"pending");
  int maxIterations=15;
  if (element.attributeValue("max-iterations") != null) {
    maxIterations=GetterUtil.getInteger(element.attributeValue("max-iterations"));
  }
  List<Element> whileChildElements=element.elements();
  Element conditionElement=whileChildElements.get(0);
  Element thenElement=element.element("then");
  boolean firstFailed=false;
  for (int i=0; i < maxIterations; i++) {
    if (!evaluateConditionalElement(conditionElement)) {
      if (i == 0) {
        firstFailed=true;
      }
      break;
    }
    PoshiRunnerStackTraceUtil.setCurrentElement(thenElement);
    XMLLoggerHandler.updateStatus(thenElement,"pending");
    parseElement(thenElement);
    XMLLoggerHandler.updateStatus(thenElement,"pass");
  }
  if (firstFailed) {
    XMLLoggerHandler.updateStatus(element,"conditional-fail");
  }
 else {
    XMLLoggerHandler.updateStatus(element,"pass");
  }
}
