{
  DoAsUserThread[] doAsUserThreads=new DoAsUserThread[_userIds.length];
  for (int i=0; i < doAsUserThreads.length; i++) {
    String subject="Test Message " + i;
    doAsUserThreads[i]=new AddMessageThread(_userIds[i],subject);
  }
  for (  DoAsUserThread doAsUserThread : doAsUserThreads) {
    doAsUserThread.start();
  }
  for (  DoAsUserThread doAsUserThread : doAsUserThreads) {
    doAsUserThread.join();
  }
  int successCount=0;
  for (  DoAsUserThread doAsUserThread : doAsUserThreads) {
    if (doAsUserThread.isSuccess()) {
      successCount++;
    }
  }
  Assert.assertTrue("Only " + successCount + " out of "+ _userIds.length+ " threads added messages successfully",successCount == _userIds.length);
}
