{
  if (!ShoppingCategoryServiceUtil.hasAdmin() || !getUser().getCompanyId().equals(companyId)) {
    throw new PrincipalException();
  }
  List list=null;
  if (Validator.isNull(ppPaymentStatus)) {
    list=ShoppingOrderUtil.findByCompanyId(companyId,begin,end,new OrderDateComparator(false));
  }
 else {
    list=ShoppingOrderUtil.findByC_PPPS(companyId,ShoppingUtil.getPpPaymentStatus(ppPaymentStatus),begin,end,new OrderDateComparator(false));
  }
  return list;
}
