{
  Connection con=null;
  PreparedStatement selectPs=null;
  PreparedStatement updatePs=null;
  ResultSet rs=null;
  try {
    con=DataAccess.getConnection(Constants.DATA_SOURCE);
    selectPs=con.prepareStatement("select " + column + " from "+ table+ " where ("+ column+ " like '%-%' "+ "or "+ column+ " like '% %') "+ "group by "+ column);
    updatePs=con.prepareStatement("update " + table + " set "+ column+ "=? where "+ column+ "=?");
    rs=selectPs.executeQuery();
    while (rs.next()) {
      String columnValue=rs.getString(column);
      String safeColumnValue=PortalUtil.getJsSafePortletName(columnValue);
      if (!columnValue.equals(safeColumnValue)) {
        updatePs.setString(1,safeColumnValue);
        updatePs.setString(2,columnValue);
        _log.debug("Upgrading column value " + columnValue);
        int rowsUpdated=updatePs.executeUpdate();
        if (rowsUpdated != 1) {
          _log.warn("Column value " + columnValue + " not updated");
        }
      }
    }
  }
  finally {
    DataAccess.cleanUp(con,selectPs,rs);
  }
}
