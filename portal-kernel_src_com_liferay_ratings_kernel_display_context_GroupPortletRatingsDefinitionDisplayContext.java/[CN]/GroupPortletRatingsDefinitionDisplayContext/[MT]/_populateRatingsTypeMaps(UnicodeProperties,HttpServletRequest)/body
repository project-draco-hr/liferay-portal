{
  Map<String,PortletRatingsDefinitionValues> portletRatingsDefinitionValuesMap=PortletRatingsDefinitionUtil.getPortletRatingsDefinitionValuesMap();
  for (  Map.Entry<String,PortletRatingsDefinitionValues> entry : portletRatingsDefinitionValuesMap.entrySet()) {
    String className=entry.getKey();
    PortletRatingsDefinitionValues portletRatingsDefinitionValues=entry.getValue();
    if (portletRatingsDefinitionValues == null) {
      continue;
    }
    String portletId=portletRatingsDefinitionValues.getPortletId();
    ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
    if (!PortletLocalServiceUtil.hasPortlet(themeDisplay.getCompanyId(),portletId)) {
      continue;
    }
    Map<String,RatingsType> ratingsTypeMap=new HashMap<>();
    String propertyKey=RatingsDataTransformerUtil.getPropertyKey(className);
    String groupRatingsTypeString=PropertiesParamUtil.getString(groupTypeSettings,request,propertyKey);
    RatingsType ratingsType=null;
    if (Validator.isNotNull(groupRatingsTypeString)) {
      ratingsType=RatingsType.parse(groupRatingsTypeString);
    }
    ratingsTypeMap.put(className,ratingsType);
    _groupRatingsTypeMaps.put(portletId,ratingsTypeMap);
  }
}
