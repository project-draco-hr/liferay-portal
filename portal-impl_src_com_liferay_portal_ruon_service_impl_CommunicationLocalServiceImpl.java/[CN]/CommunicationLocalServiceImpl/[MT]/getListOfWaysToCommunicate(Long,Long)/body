{
  List<String> listOfWays=new ArrayList<String>();
  if (loggedInUserId == null || !PresenceLocalServiceUtil.isUserOnline(userId)) {
    return listOfWays;
  }
  if (userId.equals(loggedInUserId))   return listOfWays;
  try {
    PresenceUser puser=PresenceUserLocalServiceUtil.getPresenceUser(userId);
    if (puser != null && isChatPortletDeployed()) {
      listOfWays.add("<a onclick=\"Liferay.Chat.openChatWindow('" + userId + "');\" href=\"javascript: ;\">"+ "Chat"+ "</a>");
      return listOfWays;
    }
    return listOfWays;
  }
 catch (  Exception e) {
    throw new RUONException(e);
  }
}
