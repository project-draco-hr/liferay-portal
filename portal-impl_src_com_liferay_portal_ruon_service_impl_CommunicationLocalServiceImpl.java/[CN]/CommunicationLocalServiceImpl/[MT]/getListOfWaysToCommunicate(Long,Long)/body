{
  List listOfWays=new ArrayList();
  try {
    PresenceUser puser=PresenceUserLocalServiceUtil.getPresenceUser(userId);
    if (puser != null && isChatPortletDeployed() && isUserInSameGroup(userId,loggedInUserId)) {
      listOfWays.add("<a onclick=\"Liferay.Chat.openChatWindow('" + userId + "');\" href=\"javascript: ;\">"+ "Chat"+ "</a>");
      return listOfWays;
    }
    return listOfWays;
  }
 catch (  Exception e) {
    throw new RUONException(e);
  }
}
