{
  if (hasRows(newTableName)) {
    if (_log.isWarnEnabled()) {
      _log.warn("Not renaming " + oldTableName + " to "+ newTableName+ " because "+ newTableName+ " has data");
    }
    return;
  }
  if (!hasRows(oldTableName)) {
    if (_log.isWarnEnabled()) {
      _log.warn("Not renaming " + oldTableName + " to "+ newTableName+ " because "+ oldTableName+ " has no data");
    }
    return;
  }
  updateSchema(oldTableName,newTableName,tableSqlDrop);
  renameTable(oldTableName,tableColumns,tableSqlCreate);
  updateTable(newTableName,tableColumns,tableSqlCreate);
  KBArticleAttachmentsUtil.deleteAttachmentsDirectory(PortalUtil.getDefaultCompanyId());
}
