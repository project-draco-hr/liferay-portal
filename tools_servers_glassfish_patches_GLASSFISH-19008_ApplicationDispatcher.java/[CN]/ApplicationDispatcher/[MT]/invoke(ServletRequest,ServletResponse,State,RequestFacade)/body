{
  boolean crossContext=false;
  if (crossContextFlag != null && crossContextFlag.booleanValue()) {
    crossContext=true;
  }
  if (crossContext) {
    context.getManager().lockSession(request);
  }
  try {
    if (crossContext) {
      context.getManager().preRequestDispatcherProcess(request,response);
    }
    doInvoke(request,response,crossContext,state,requestFacade);
    if (crossContext) {
      context.getManager().postRequestDispatcherProcess(request,response);
    }
  }
  finally {
    if (crossContext) {
      context.getManager().unlockSession(request);
    }
    crossContextFlag=null;
  }
}
