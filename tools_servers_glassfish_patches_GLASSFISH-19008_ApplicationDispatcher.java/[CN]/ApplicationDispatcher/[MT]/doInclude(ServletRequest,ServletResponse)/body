{
  State state=new State(request,response,DispatcherType.INCLUDE);
  wrapResponse(state);
  if (name != null) {
    ApplicationHttpRequest wrequest=wrapRequest(state);
    wrequest.setAttribute(Globals.NAMED_DISPATCHER_ATTR,name);
    if (servletPath != null)     wrequest.setServletPath(servletPath);
    wrequest.setAttribute(Globals.DISPATCHER_REQUEST_PATH_ATTR,getCombinedPath());
    try {
      invoke(state.outerRequest,state.outerResponse,state,wrequest.getRequestFacade());
    }
  finally {
      wrequest.recycle();
      unwrapRequest(state);
      unwrapResponse(state);
    }
  }
 else {
    ApplicationHttpRequest wrequest=wrapRequest(state);
    wrequest.initSpecialAttributes(requestURI,context.getPath(),servletPath,pathInfo,queryString);
    wrequest.setQueryParams(queryString);
    wrequest.setAttribute(Globals.DISPATCHER_REQUEST_PATH_ATTR,getCombinedPath());
    try {
      invoke(state.outerRequest,state.outerResponse,state,wrequest.getRequestFacade());
    }
  finally {
      wrequest.recycle();
      unwrapRequest(state);
      unwrapResponse(state);
    }
  }
}
