{
  if (state.wrapRequest == null)   return;
  ServletRequest previous=null;
  ServletRequest current=state.outerRequest;
  while (current != null) {
    if ((current instanceof org.apache.catalina.Request) || (current instanceof RequestFacade))     break;
    if (current == state.wrapRequest) {
      ServletRequest next=((ServletRequestWrapper)current).getRequest();
      if (previous == null)       state.outerRequest=next;
 else       ((ServletRequestWrapper)previous).setRequest(next);
      break;
    }
    previous=current;
    current=((ServletRequestWrapper)current).getRequest();
  }
}
