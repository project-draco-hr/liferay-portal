{
  Group group=layoutSet.getGroup();
  if (group.isControlPanel()) {
    return;
  }
  if (group.isSite()) {
    Group parentSite=group.getParentGroup();
    if (parentSite != null) {
      LayoutSet parentLayoutSet=LayoutSetLocalServiceUtil.getLayoutSet(parentSite.getGroupId(),layoutSet.isPrivateLayout());
      buildParentGroupsBreadcrumb(parentLayoutSet,portletURL,themeDisplay,sb);
    }
  }
 else   if (group.isUser()) {
    User groupUser=UserLocalServiceUtil.getUser(group.getClassPK());
    List<Organization> organizations=OrganizationLocalServiceUtil.getUserOrganizations(groupUser.getUserId());
    if (!organizations.isEmpty()) {
      Organization organization=organizations.get(0);
      Group parentGroup=organization.getGroup();
      LayoutSet parentLayoutSet=LayoutSetLocalServiceUtil.getLayoutSet(parentGroup.getGroupId(),layoutSet.isPrivateLayout());
      buildParentGroupsBreadcrumb(parentLayoutSet,portletURL,themeDisplay,sb);
    }
  }
  int layoutsPageCount=0;
  if (layoutSet.isPrivateLayout()) {
    layoutsPageCount=group.getPrivateLayoutsPageCount();
  }
 else {
    layoutsPageCount=group.getPublicLayoutsPageCount();
  }
  if ((layoutsPageCount > 0) && !group.isGuest()) {
    String layoutSetFriendlyURL=PortalUtil.getLayoutSetFriendlyURL(layoutSet,themeDisplay);
    if (themeDisplay.isAddSessionIdToURL()) {
      layoutSetFriendlyURL=PortalUtil.getURLWithSessionId(layoutSetFriendlyURL,themeDisplay.getSessionId());
    }
    sb.append("<li><a href=\"");
    sb.append(layoutSetFriendlyURL);
    sb.append("\">");
    sb.append(HtmlUtil.escape(group.getDescriptiveName()));
    sb.append("</a><span class=\"divider\">/</span></li>");
  }
}
