{
  List<BreadcrumbEntry> portletEntries=BreadcrumbUtil.getPortletEntries(request);
  for (  BreadcrumbEntry portletEntry : portletEntries) {
    if (!_showCurrentGroup) {
      String siteGroupName=themeDisplay.getSiteGroupName();
      if (siteGroupName.equals(portletEntry.getTitle())) {
        continue;
      }
    }
    if (!_showCurrentPortlet) {
      PortletDisplay portletDisplay=themeDisplay.getPortletDisplay();
      String portletTitle=PortalUtil.getPortletTitle(portletDisplay.getId(),themeDisplay.getUser());
      if (portletTitle.equals(portletEntry.getTitle())) {
        continue;
      }
    }
    sb.append("<li>");
    if (Validator.isNotNull(portletEntry.getURL())) {
      sb.append("<a href=\"");
      sb.append(HtmlUtil.escape(portletEntry.getURL()));
      sb.append("\"");
      sb.append(AUIUtil.buildData(portletEntry.getData()));
      sb.append(StringPool.GREATER_THAN);
      sb.append(HtmlUtil.escape(portletEntry.getTitle()));
      sb.append("</a>");
    }
 else {
      sb.append(HtmlUtil.escape(portletEntry.getTitle()));
    }
    sb.append("<span class=\"divider\">/</span></li>");
  }
}
