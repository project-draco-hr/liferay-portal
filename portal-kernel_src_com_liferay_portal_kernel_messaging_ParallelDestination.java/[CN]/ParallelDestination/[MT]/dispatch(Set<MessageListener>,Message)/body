{
  final Thread currentThread=Thread.currentThread();
  ThreadPoolExecutor threadPoolExecutor=getThreadPoolExecutor();
  for (  final MessageListener messageListener : messageListeners) {
    Runnable runnable=new MessageRunnable(message){
      @Override public void run(){
        try {
          populateThreadLocalsFromMessage(message);
          messageListener.receive(message);
        }
 catch (        MessageListenerException mle) {
          _log.error("Unable to process message " + message,mle);
        }
 finally {
          if (Thread.currentThread() != currentThread) {
            ThreadLocalCacheManager.clearAll(Lifecycle.REQUEST);
            CentralizedThreadLocal.clearShortLivedThreadLocals();
          }
        }
      }
    }
;
    threadPoolExecutor.execute(runnable);
  }
}
