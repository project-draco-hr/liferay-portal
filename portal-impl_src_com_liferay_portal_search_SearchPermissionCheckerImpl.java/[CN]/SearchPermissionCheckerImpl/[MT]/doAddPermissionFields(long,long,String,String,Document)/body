{
  Resource resource=ResourceLocalServiceUtil.getResource(companyId,className,ResourceConstants.SCOPE_INDIVIDUAL,classPK);
  Group group=GroupLocalServiceUtil.getGroup(groupId);
  List<Role> roles=ResourceActionsUtil.getRoles(group,className);
  List<Long> roleIds=new ArrayList<Long>();
  for (  Role role : roles) {
    List<Permission> permissions=PermissionLocalServiceUtil.getRolePermissions(role.getRoleId(),resource.getResourceId());
    List<String> actions=ResourceActionsUtil.getActions(permissions);
    for (    String action : actions) {
      if (action.equals(ActionKeys.VIEW)) {
        roleIds.add(role.getRoleId());
      }
    }
  }
  doc.addKeyword(Field.ROLE_ID,ArrayUtil.toArray(roleIds));
}
