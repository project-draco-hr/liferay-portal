{
  Indexer<?> indexer=IndexerRegistryUtil.getIndexer(className);
  if (!indexer.isPermissionAware()) {
    return booleanFilter;
  }
  PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
  AdvancedPermissionChecker advancedPermissionChecker=null;
  if ((permissionChecker != null) && (permissionChecker instanceof AdvancedPermissionChecker)) {
    advancedPermissionChecker=(AdvancedPermissionChecker)permissionChecker;
  }
  if (advancedPermissionChecker == null) {
    return booleanFilter;
  }
  PermissionCheckerBag permissionCheckerBag=getPermissionCheckerBag(advancedPermissionChecker,userId);
  if (permissionCheckerBag == null) {
    return booleanFilter;
  }
  Set<Group> groups=new LinkedHashSet<>();
  Set<Role> roles=new LinkedHashSet<>();
  Set<UserGroupRole> userGroupRoles=new LinkedHashSet<>();
  Map<Long,List<Role>> groupIdsToRoles=new HashMap<>();
  populate(companyId,groupIds,userId,advancedPermissionChecker,permissionCheckerBag,groups,roles,userGroupRoles,groupIdsToRoles);
  return doGetPermissionFilter_6(companyId,groupIds,userId,advancedPermissionChecker,className,booleanFilter,groups,roles,userGroupRoles,groupIdsToRoles);
}
