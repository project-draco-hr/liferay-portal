{
  Session session=getCachedSession();
  if (session == null) {
    SessionImpl sessionImpl=(SessionImpl)_cmisRepositoryHandler.getSession();
    session=sessionImpl.getSession();
    setCachedSession(session);
  }
  if (_cmisRepositoryDetector == null) {
    RepositoryInfo repositoryInfo=session.getRepositoryInfo();
    _cmisRepositoryDetector=new CMISRepositoryDetector(repositoryInfo);
  }
  return session;
}
