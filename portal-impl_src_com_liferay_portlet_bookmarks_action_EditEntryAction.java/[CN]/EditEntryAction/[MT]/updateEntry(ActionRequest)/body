{
  long entryId=ParamUtil.getLong(actionRequest,"entryId");
  long folderId=ParamUtil.getLong(actionRequest,"folderId");
  String name=ParamUtil.getString(actionRequest,"name");
  String url=ParamUtil.getString(actionRequest,"url");
  String comments=ParamUtil.getString(actionRequest,"comments");
  String[] tagsEntries=PortalUtil.getTagsEntries(actionRequest);
  String[] communityPermissions=actionRequest.getParameterValues("communityPermissions");
  String[] guestPermissions=actionRequest.getParameterValues("guestPermissions");
  if (entryId <= 0) {
    BookmarksEntry entry=BookmarksEntryServiceUtil.addEntry(folderId,name,url,comments,tagsEntries,communityPermissions,guestPermissions);
    AssetPublisherUtil.addAndStoreSelection(actionRequest,BookmarksEntry.class.getName(),entry.getEntryId(),-1);
  }
 else {
    BookmarksEntryServiceUtil.updateEntry(entryId,folderId,name,url,comments,tagsEntries);
  }
  AssetPublisherUtil.addRecentFolderId(actionRequest,BookmarksEntry.class.getName(),folderId);
}
