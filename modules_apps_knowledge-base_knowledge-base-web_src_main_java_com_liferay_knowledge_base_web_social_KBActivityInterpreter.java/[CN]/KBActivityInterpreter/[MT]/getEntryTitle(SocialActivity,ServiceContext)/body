{
  String title=StringPool.BLANK;
  String className=activity.getClassName();
  if (className.equals(KBArticle.class.getName())) {
    KBArticle kbArticle=KBArticleLocalServiceUtil.getLatestKBArticle(activity.getClassPK(),WorkflowConstants.STATUS_APPROVED);
    title=kbArticle.getTitle();
  }
 else   if (className.equals(KBComment.class.getName())) {
    KBComment kbComment=KBCommentLocalServiceUtil.getKBComment(activity.getClassPK());
    String kbCommentClassName=kbComment.getClassName();
    if (kbCommentClassName.equals(KBArticle.class.getName())) {
      KBArticle kbArticle=KBArticleLocalServiceUtil.getLatestKBArticle(kbComment.getClassPK(),WorkflowConstants.STATUS_APPROVED);
      title=kbArticle.getTitle();
    }
 else     if (kbCommentClassName.equals(KBTemplate.class.getName())) {
      KBTemplate kbTemplate=KBTemplateLocalServiceUtil.getKBTemplate(kbComment.getClassPK());
      title=kbTemplate.getTitle();
    }
  }
 else   if (className.equals(KBTemplate.class.getName())) {
    KBTemplate kbTemplate=KBTemplateLocalServiceUtil.getKBTemplate(activity.getClassPK());
    title=kbTemplate.getTitle();
  }
  return getJSONValue(activity.getExtraData(),"title",title);
}
