{
  List<MenuItem> menuItems=new ArrayList<>();
  long folderId=_getFolderId(folder);
  if (!containsPermission(themeDisplay.getPermissionChecker(),themeDisplay.getScopeGroupId(),folderId,ActionKeys.ADD_DOCUMENT)) {
    return Collections.emptyList();
  }
  long repositoryId=_getRepositoryId(themeDisplay,folder);
  if (themeDisplay.getScopeGroupId() != repositoryId) {
    menuItems.add(_getPortletTitleAddBasicDocumentMenuItem(folder,themeDisplay,portletRequest));
  }
 else {
    menuItems.addAll(_getPortletTitleAddDocumentTypeMenuItems(folder,themeDisplay,portletRequest));
  }
  return menuItems;
}
