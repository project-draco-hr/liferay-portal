{
  long folderId=_getFolderId(folder);
  if (!containsPermission(themeDisplay.getPermissionChecker(),themeDisplay.getScopeGroupId(),folderId,ActionKeys.ADD_DOCUMENT)) {
    return;
  }
  long repositoryId=_getRepositoryId(themeDisplay,folder);
  if (themeDisplay.getScopeGroupId() != repositoryId) {
    addPortletTitleAddBasicDocumentMenuItem(menuItems,folder,themeDisplay,portletRequest);
  }
 else {
    addPortletTitleAddDocumentTypeMenuItems(menuItems,folder,themeDisplay,portletRequest);
  }
}
