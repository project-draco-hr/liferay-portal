{
  ChannelHub channelHub=_channelHubs.get(companyId);
  if (channelHub == null) {
synchronized (_channelHubs) {
      channelHub=_channelHubs.get(companyId);
      if (channelHub == null) {
        if (createIfAbsent) {
          channelHub=createChannelHub(companyId);
        }
 else {
          throw new UnknownChannelHubException("No channel exists with company id " + companyId);
        }
      }
    }
  }
  return channelHub;
}
