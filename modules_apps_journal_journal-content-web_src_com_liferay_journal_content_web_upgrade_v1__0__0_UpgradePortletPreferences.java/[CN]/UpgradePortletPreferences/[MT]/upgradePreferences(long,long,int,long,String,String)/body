{
  PortletPreferences portletPreferences=PortletPreferencesFactoryUtil.fromXML(companyId,ownerId,ownerType,plid,portletId,xml);
  upgradeUserToolEntries(portletPreferences);
  upgradeContentMetadataEntries(portletPreferences);
  return PortletPreferencesFactoryUtil.toXML(portletPreferences);
}
