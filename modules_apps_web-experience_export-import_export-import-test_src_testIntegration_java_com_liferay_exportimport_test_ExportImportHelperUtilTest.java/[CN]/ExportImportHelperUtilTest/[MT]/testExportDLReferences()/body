{
  _portletDataContextExport.setZipWriter(new TestReaderWriter());
  String content=replaceParameters(getContent("dl_references.txt"),_fileEntry);
  List<String> urls=getURLs(content);
  content=ExportImportHelperUtil.replaceExportContentReferences(_portletDataContextExport,_referrerStagedModel,content,true);
  for (  String url : urls) {
    Assert.assertFalse(content.contains(url));
  }
  TestReaderWriter testReaderWriter=(TestReaderWriter)_portletDataContextExport.getZipWriter();
  List<String> entries=testReaderWriter.getEntries();
  Assert.assertEquals(1,entries.size());
  List<String> binaryEntries=testReaderWriter.getBinaryEntries();
  Assert.assertEquals(binaryEntries.size(),entries.size());
  for (  String entry : testReaderWriter.getEntries()) {
    Assert.assertTrue(content.contains("[$dl-reference=" + entry + "$]"));
  }
  ;
}
