{
  FileEntry tempFileEntry=TempFileEntryUtil.addTempFileEntry(_group.getGroupId(),_user.getUserId(),_TEMP_FOLDER_NAME,"image.jpg",_getInputStream(),ContentTypes.IMAGE_JPEG);
  String tempFileEntryImgTag=_getTempFileEntryImgTag(tempFileEntry);
  String initialContent=RandomTestUtil.randomString(50) + StringPool.SPACE + tempFileEntryImgTag+ StringPool.SPACE+ RandomTestUtil.randomString(50);
  List<BlogsEntryAttachmentFileEntryReference> blogsEntryAttachmentFileEntryReferences=getBlogsEntryAttachmentFileEntryReferences(tempFileEntry);
  String content=_blogsEntryAttachmentFileEntryHelper.updateContent(initialContent,blogsEntryAttachmentFileEntryReferences);
  Assert.assertFalse(content.contains(tempFileEntryImgTag));
  BlogsEntryAttachmentFileEntryReference blogsEntryAttachmentFileEntryReference=blogsEntryAttachmentFileEntryReferences.get(0);
  FileEntry fileEntry=blogsEntryAttachmentFileEntryReference.getBlogsEntryAttachmentFileEntry();
  Assert.assertTrue(content.contains(PortletFileRepositoryUtil.getPortletFileEntryURL(null,fileEntry,StringPool.BLANK)));
}
