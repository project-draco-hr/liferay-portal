{
  StartAppServerTask startTestableTomcatTask=GradleUtil.addTask(project,START_TESTABLE_TOMCAT_TASK_NAME,StartAppServerTask.class);
  startTestableTomcatTask.dependsOn(SETUP_TESTABLE_TOMCAT_TASK_NAME);
  startTestableTomcatTask.setAppServerType("tomcat");
  startTestableTomcatTask.doFirst(new Action<Task>(){
    @Override public void execute(    Task task){
      Project project=task.getProject();
      File testablePortalStartedFile=new File(project.getRootDir(),_TESTABLE_PORTAL_STARTED_FILE_NAME);
      try {
        Files.createFile(testablePortalStartedFile.toPath());
      }
 catch (      Exception e) {
      }
    }
  }
);
  startTestableTomcatTask.doFirst(new Action<Task>(){
    @Override public void execute(    Task task){
      Project project=task.getProject();
      LiferayExtension liferayExtension=GradleUtil.getExtension(project,LiferayExtension.class);
      File liferayHome=liferayExtension.getLiferayHome();
      project.delete(new File(liferayHome,"data"),new File(liferayHome,"logs"),new File(liferayHome,"osgi/state"),new File(liferayHome,"portal-setup-wizard.properties"));
    }
  }
);
  return startTestableTomcatTask;
}
