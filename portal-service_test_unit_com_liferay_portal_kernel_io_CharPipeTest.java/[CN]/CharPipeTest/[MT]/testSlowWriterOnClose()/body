{
  CharPipe charPipe=new CharPipe(4);
  Writer writer=charPipe.getWriter();
  SlowWriterJob slowWriterJob=new SlowWriterJob(writer,4,true);
  Thread thread=new Thread(slowWriterJob);
  thread.start();
  for (int i=0; i < 5; i++) {
    Reader reader=charPipe.getReader();
    char[] buffer=new char[8];
    Assert.assertTrue(_timestampedRead(reader,buffer) >= slowWriterJob.getTimestampBeforeWrite());
  }
  charPipe.close();
  thread.join();
  Assert.assertFalse(slowWriterJob.isFailed());
}
