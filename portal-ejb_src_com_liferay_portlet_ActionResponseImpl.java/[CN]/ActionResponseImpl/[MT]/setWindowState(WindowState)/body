{
  if (_redirectLocation != null) {
    throw new IllegalStateException();
  }
  if (!_req.isWindowStateAllowed(windowState)) {
    throw new WindowStateException(windowState.toString(),windowState);
  }
  try {
    _windowState=PortalUtil.updateWindowState(_portletName,_user,_layout,windowState,_req.getHttpServletRequest());
    _req.setWindowState(_windowState);
  }
 catch (  Exception e) {
    throw new WindowStateException(e,windowState);
  }
  _calledSetRenderParameter=true;
}
