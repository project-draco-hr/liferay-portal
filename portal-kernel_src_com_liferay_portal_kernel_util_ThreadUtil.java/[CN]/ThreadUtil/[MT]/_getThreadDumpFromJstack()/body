{
  UnsyncByteArrayOutputStream outputStream=new UnsyncByteArrayOutputStream();
  try {
    String vendorURL=System.getProperty("java.vendor.url");
    if (!vendorURL.equals("http://java.oracle.com/") && !vendorURL.equals("http://java.sun.com/")) {
      return StringPool.BLANK;
    }
    RuntimeMXBean runtimeMXBean=ManagementFactory.getRuntimeMXBean();
    String name=runtimeMXBean.getName();
    if (Validator.isNull(name)) {
      return StringPool.BLANK;
    }
    int pos=name.indexOf(CharPool.AT);
    if (pos == -1) {
      return StringPool.BLANK;
    }
    String pidString=name.substring(0,pos);
    if (!Validator.isNumber(pidString)) {
      return StringPool.BLANK;
    }
    Runtime runtime=Runtime.getRuntime();
    int pid=GetterUtil.getInteger(pidString);
    String[] cmd=new String[]{"jstack",String.valueOf(pid)};
    Process process=runtime.exec(cmd);
    InputStream inputStream=process.getInputStream();
    StreamUtil.transfer(inputStream,outputStream);
  }
 catch (  Exception e) {
  }
  return outputStream.toString();
}
