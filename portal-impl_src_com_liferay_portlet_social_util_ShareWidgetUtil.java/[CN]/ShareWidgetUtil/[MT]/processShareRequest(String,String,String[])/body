{
  String className=ShareRequestInterpreter.class.getName();
  long classPK=0;
  int type=ShareRequestKeys.SHARE_REQUEST;
  try {
    classPK=Long.parseLong(portletId);
  }
 catch (  NumberFormatException nfx) {
    classPK=PortalUtil.getClassNameId(portletId);
  }
  String data=themeDisplay.translate("request-share-widget-message",new Object[]{fullUserName,portletTitle});
  String extraData=StringUtil.add(data,portletTitle,ShareRequestKeys.SHARE_EXTRA_DATA_DELIMETER);
  int len=selectedFriends.length;
  long[] shareFriendUserIds=new long[len];
  for (int i=0; i < selectedFriends.length; i++) {
    try {
      shareFriendUserIds[i]=Long.parseLong(selectedFriends[i]);
    }
 catch (    NumberFormatException nfe) {
      _log.error(nfe,nfe);
    }
  }
  for (int j=0; j < shareFriendUserIds.length; j++) {
    try {
      groupId=0;
      SocialRequestLocalServiceUtil.addRequest(userId,groupId,className,classPK + shareFriendUserIds[j],type,extraData,shareFriendUserIds[j]);
    }
 catch (    Exception ex) {
      ex.printStackTrace();
      _log.error(ex,ex);
    }
  }
}
