{
  Template template=getTemplate(renderRequest);
  Map<String,Object> capabilitiesContext=new HashMap<>();
  capabilitiesContext.put("tools",getImageEditorToolsContexts(renderRequest));
  template.put("capabilities",capabilitiesContext);
  String imageEditorURL=ParamUtil.getString(renderRequest,"imageEditorURL");
  template.put("image",imageEditorURL);
  ThemeDisplay themeDisplay=(ThemeDisplay)renderRequest.getAttribute(WebKeys.THEME_DISPLAY);
  template.put("pathThemeImages",themeDisplay.getPathThemeImages());
  ResourceBundle resourceBundle=_resourceBundleLoader.loadResourceBundle(themeDisplay.getLanguageId());
  Map<String,Object> strings=new HashMap<>();
  for (  String key : resourceBundle.keySet()) {
    strings.put(key,LanguageUtil.get(resourceBundle,key));
  }
  template.put("strings",strings);
  return "ImageEditor";
}
