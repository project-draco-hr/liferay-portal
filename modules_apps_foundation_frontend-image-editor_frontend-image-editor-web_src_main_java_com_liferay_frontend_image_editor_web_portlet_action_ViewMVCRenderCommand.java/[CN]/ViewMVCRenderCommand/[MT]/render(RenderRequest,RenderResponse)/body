{
  Template template=getTemplate(renderRequest);
  Map<String,Object> imageEditorCapabilitiesContext=new HashMap<>();
  imageEditorCapabilitiesContext.put("tools",getImageEditorToolsContexts(renderRequest));
  template.put("imageEditorCapabilities",imageEditorCapabilitiesContext);
  String imageEditorURL=ParamUtil.getString(renderRequest,"imageEditorURL");
  template.put("image",imageEditorURL);
  ThemeDisplay themeDisplay=(ThemeDisplay)renderRequest.getAttribute(WebKeys.THEME_DISPLAY);
  template.put("pathThemeImages",themeDisplay.getPathThemeImages());
  ResourceBundle resourceBundle=_resourceBundleLoader.loadResourceBundle(themeDisplay.getLanguageId());
  Map<String,Object> strings=new HashMap<>();
  Locale locale=themeDisplay.getLocale();
  strings.put("apply",LanguageUtil.get(locale,"apply"));
  strings.put("cancel",LanguageUtil.get(locale,"cancel"));
  for (  String key : resourceBundle.keySet()) {
    strings.put(key,LanguageUtil.get(resourceBundle,key));
  }
  template.put("strings",strings);
  return "ImageEditor";
}
