{
  Template template=getTemplate(renderRequest);
  Map<String,Object> imageEditorCapabilitiesContext=new HashMap<>();
  imageEditorCapabilitiesContext.put("tools",getImageEditorToolsContexts(renderRequest));
  template.put("imageEditorCapabilities",imageEditorCapabilitiesContext);
  String entityURL=ParamUtil.getString(renderRequest,"entityURL");
  template.put("image",entityURL);
  ThemeDisplay themeDisplay=(ThemeDisplay)renderRequest.getAttribute(WebKeys.THEME_DISPLAY);
  template.put("pathThemeImages",themeDisplay.getPathThemeImages());
  String eventName=ParamUtil.getString(renderRequest,"eventName");
  template.put("saveEventName",eventName);
  String saveFileName=ParamUtil.getString(renderRequest,"saveFileName");
  template.put("saveFileName",saveFileName);
  String saveParamName=ParamUtil.getString(renderRequest,"saveParamName");
  template.put("saveParamName",saveParamName);
  String saveURL=ParamUtil.getString(renderRequest,"saveURL");
  template.put("saveURL",saveURL);
  ResourceBundle resourceBundle=_resourceBundleLoader.loadResourceBundle(themeDisplay.getLanguageId());
  Map<String,Object> strings=new HashMap<>();
  Locale locale=themeDisplay.getLocale();
  strings.put("apply",LanguageUtil.get(locale,"apply"));
  strings.put("cancel",LanguageUtil.get(locale,"cancel"));
  strings.put("save",LanguageUtil.get(locale,"save"));
  for (  String key : resourceBundle.keySet()) {
    strings.put(key,LanguageUtil.get(resourceBundle,key));
  }
  template.put("strings",strings);
  return "ImageEditor";
}
