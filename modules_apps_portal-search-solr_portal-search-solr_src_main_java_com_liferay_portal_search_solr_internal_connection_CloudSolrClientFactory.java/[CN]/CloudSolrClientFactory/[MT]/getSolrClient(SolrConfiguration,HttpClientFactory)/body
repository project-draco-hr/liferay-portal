{
  String defaultCollection=solrConfiguration.defaultCollection();
  if (Validator.isNull(defaultCollection)) {
    throw new IllegalStateException("Default collection is null");
  }
  String zkHost=solrConfiguration.zkHost();
  if (Validator.isNull(zkHost)) {
    throw new IllegalStateException("Zookeeper host is null");
  }
  HttpClient httpClient=httpClientFactory.createInstance();
  CloudSolrClient cloudSolrClient=new CloudSolrClient(zkHost,httpClient);
  cloudSolrClient.setDefaultCollection(defaultCollection);
  return cloudSolrClient;
}
