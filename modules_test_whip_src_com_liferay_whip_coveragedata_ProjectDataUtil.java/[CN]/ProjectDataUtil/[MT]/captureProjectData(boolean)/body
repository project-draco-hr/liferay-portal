{
  ProjectData masterProjectData=new ProjectData();
  for (  ProjectData projectData : _projectDatas.values()) {
    masterProjectData.merge(projectData);
  }
  try {
    _setThreadLocalProjectData(masterProjectData);
    for (    Runnable runnable : ProjectDataUtil.<Set<Runnable>>_getFieldValue("_mergeHooks")) {
      runnable.run();
    }
    masterProjectData=_getThreadLocalProjectData();
  }
  finally {
    _removeThreadLocalProjectData();
  }
  String className=ProjectDataUtil.class.getName();
synchronized (className.intern()) {
    FileLock fileLock=_lockFile();
    try {
      File dataFile=new File(System.getProperty("net.sourceforge.cobertura.datafile"));
      if (dataFile.exists()) {
        masterProjectData.merge(_readProjectData(dataFile));
        dataFile.delete();
      }
      if (saveSessionData) {
        _writeProjectData(masterProjectData,dataFile);
      }
      return masterProjectData;
    }
  finally {
      _unlockFile(fileLock);
    }
  }
}
