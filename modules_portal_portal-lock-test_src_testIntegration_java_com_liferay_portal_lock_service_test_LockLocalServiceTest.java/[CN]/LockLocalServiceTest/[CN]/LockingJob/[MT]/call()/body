{
  int count=0;
  while (true) {
    try {
      Lock lock=LockLocalServiceUtil.lock(_className,_key,_owner);
      if (lock.isNew()) {
        while (true) {
          try {
            LockLocalServiceUtil.unlock(_className,_key,_owner);
            if (++count >= _requiredSuccessCount) {
              return null;
            }
            break;
          }
 catch (          RuntimeException re) {
            if (_isExpectedException(re)) {
              continue;
            }
            throw re;
          }
        }
      }
    }
 catch (    RuntimeException re) {
      if (_isExpectedException(re)) {
        continue;
      }
      throw re;
    }
  }
}
