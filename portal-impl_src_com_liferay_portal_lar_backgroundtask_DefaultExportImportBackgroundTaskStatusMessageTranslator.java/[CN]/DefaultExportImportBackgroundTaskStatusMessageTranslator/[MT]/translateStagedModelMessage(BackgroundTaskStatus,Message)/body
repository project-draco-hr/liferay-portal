{
  String portletId=(String)backgroundTaskStatus.getAttribute("portletId");
  if (Validator.isNull(portletId)) {
    return;
  }
  HashMap<String,Long> allPortletModelAdditionCounters=(HashMap<String,Long>)backgroundTaskStatus.getAttribute("allPortletModelAdditionCounters");
  long allPortletModelAdditionCounter=MapUtil.getLong(allPortletModelAdditionCounters,portletId);
  HashMap<String,Long> currentPortletModelAdditionCounters=(HashMap<String,Long>)backgroundTaskStatus.getAttribute("currentPortletModelAdditionCounters");
  long currentPortletModelAdditionCounter=MapUtil.getLong(currentPortletModelAdditionCounters,portletId);
  long allModelAdditionCountersTotal=GetterUtil.getLong(backgroundTaskStatus.getAttribute("allModelAdditionCountersTotal"));
  long currentModelAdditionCountersTotal=GetterUtil.getLong(backgroundTaskStatus.getAttribute("currentModelAdditionCountersTotal"));
  if ((currentPortletModelAdditionCounter < allPortletModelAdditionCounter) && (currentModelAdditionCountersTotal < allModelAdditionCountersTotal)) {
    backgroundTaskStatus.setAttribute("currentModelAdditionCountersTotal",++currentModelAdditionCountersTotal);
    currentPortletModelAdditionCounters.put(portletId,++currentPortletModelAdditionCounter);
    backgroundTaskStatus.setAttribute("currentPortletModelAdditionCounters",currentPortletModelAdditionCounters);
  }
  String stagedModelName=message.getString("stagedModelName");
  backgroundTaskStatus.setAttribute("stagedModelName",stagedModelName);
  String stagedModelType=message.getString("stagedModelType");
  backgroundTaskStatus.setAttribute("stagedModelType",stagedModelType);
  String uuid=message.getString("uuid");
  backgroundTaskStatus.setAttribute("uuid",uuid);
}
