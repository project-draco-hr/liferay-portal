{
  String portletId=(String)backgroundTaskStatus.getAttribute("portletId");
  if (Validator.isNull(portletId)) {
    return;
  }
  Map<String,Long> allPortletModelAdditionCounters=(HashMap<String,Long>)backgroundTaskStatus.getAttribute("allPortletModelAdditionCounters");
  long allPortletModelAdditionCounter=MapUtil.getLong(allPortletModelAdditionCounters,portletId);
  HashMap<String,Long> currentPortletModelAdditionCounters=(HashMap<String,Long>)backgroundTaskStatus.getAttribute("currentPortletModelAdditionCounters");
  long currentPortletModelAdditionCounter=MapUtil.getLong(currentPortletModelAdditionCounters,portletId);
  long allModelAdditionCountersTotal=GetterUtil.getLong(backgroundTaskStatus.getAttribute("allModelAdditionCountersTotal"));
  long currentModelAdditionCountersTotal=GetterUtil.getLong(backgroundTaskStatus.getAttribute("currentModelAdditionCountersTotal"));
  if ((currentPortletModelAdditionCounter < allPortletModelAdditionCounter) && (currentModelAdditionCountersTotal < allModelAdditionCountersTotal)) {
    backgroundTaskStatus.setAttribute("currentModelAdditionCountersTotal",++currentModelAdditionCountersTotal);
    currentPortletModelAdditionCounters.put(portletId,++currentPortletModelAdditionCounter);
    backgroundTaskStatus.setAttribute("currentPortletModelAdditionCounters",currentPortletModelAdditionCounters);
  }
  backgroundTaskStatus.setAttribute("stagedModelName",message.getString("stagedModelName"));
  backgroundTaskStatus.setAttribute("stagedModelType",message.getString("stagedModelType"));
  backgroundTaskStatus.setAttribute("uuid",message.getString("uuid"));
}
