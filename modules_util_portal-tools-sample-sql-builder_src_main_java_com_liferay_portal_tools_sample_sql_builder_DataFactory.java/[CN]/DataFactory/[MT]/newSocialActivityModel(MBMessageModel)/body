{
  long classNameId=mbMessageModel.getClassNameId();
  long classPK=mbMessageModel.getClassPK();
  int type=0;
  String extraData=null;
  if (classNameId == getClassNameId(WikiPage.class)) {
    extraData="{\"version\":1}";
    type=WikiActivityKeys.ADD_PAGE;
  }
 else   if (classNameId == 0) {
    extraData="{\"title\":\"" + mbMessageModel.getSubject() + "\"}";
    type=MBActivityKeys.ADD_MESSAGE;
    classNameId=getClassNameId(MBMessage.class);
    classPK=mbMessageModel.getMessageId();
  }
 else {
    StringBundler sb=new StringBundler(5);
    sb.append("{\"messageId\": \"");
    sb.append(mbMessageModel.getMessageId());
    sb.append("\", \"title\": ");
    sb.append(mbMessageModel.getSubject());
    sb.append("}");
    extraData=sb.toString();
    type=SocialActivityConstants.TYPE_ADD_COMMENT;
  }
  return newSocialActivityModel(mbMessageModel.getGroupId(),classNameId,classPK,type,extraData);
}
