{
  if (sql == null) {
    return sql;
  }
  String newSQL=sql;
  newSQL=_replaceCastText(newSQL);
  newSQL=_replaceIntegerDivision(newSQL);
  if (_vendorDerby) {
    newSQL=_replaceUnion(newSQL);
  }
 else   if (_vendorMySQL) {
    DB db=DBFactoryUtil.getDB();
    if (!db.isSupportsStringCaseSensitiveQuery()) {
      newSQL=_removeLower(newSQL);
    }
  }
 else   if (_vendorSQLServer || _vendorSybase) {
    newSQL=_replaceMod(newSQL);
  }
 else   if (_vendorPostgreSQL) {
    newSQL=_replaceNegativeComparison(newSQL);
  }
  if (_log.isDebugEnabled()) {
    _log.debug("Original SQL " + sql);
    _log.debug("Modified SQL " + newSQL);
  }
  return newSQL;
}
