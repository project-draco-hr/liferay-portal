{
  if (ExportImportWebConfigurationValues.DRAFT_EXPORT_IMPORT_CONFIGURATION_CLEAN_UP_COUNT == -1) {
    return;
  }
  DynamicQuery dynamicQuery=ExportImportConfigurationLocalServiceUtil.dynamicQuery();
  Property property=PropertyFactoryUtil.forName("status");
  dynamicQuery.add(property.eq(WorkflowConstants.STATUS_DRAFT));
  Order order=OrderFactoryUtil.asc("createDate");
  dynamicQuery.addOrder(order);
  dynamicQuery.setLimit(QueryUtil.ALL_POS,ExportImportWebConfigurationValues.DRAFT_EXPORT_IMPORT_CONFIGURATION_CLEAN_UP_COUNT);
  List<ExportImportConfiguration> exportImportConfigurations=ExportImportConfigurationLocalServiceUtil.dynamicQuery(dynamicQuery);
  for (  ExportImportConfiguration exportImportConfiguration : exportImportConfigurations) {
    List<BackgroundTask> backgroundTasks=getParentBackgroundTasks(exportImportConfiguration);
    if (ListUtil.isEmpty(backgroundTasks)) {
      ExportImportConfigurationLocalServiceUtil.deleteExportImportConfiguration(exportImportConfiguration);
      continue;
    }
    for (    BackgroundTask backgroundTask : backgroundTasks) {
      BackgroundTaskLocalServiceUtil.deleteBackgroundTask(backgroundTask.getBackgroundTaskId());
    }
  }
}
