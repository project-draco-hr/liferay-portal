{
  boolean clearCachePeerProviderConfigurations=false;
  if ((enableClusterLinkReplication) || (usingDefault && !PropsValues.CLUSTER_LINK_ENABLED)) {
    clearCachePeerProviderConfigurations=true;
  }
  if (clearCachePeerProviderConfigurations) {
    configuration.getCacheManagerPeerListenerFactoryConfigurations().clear();
    configuration.getCacheManagerPeerProviderFactoryConfiguration().clear();
  }
  List<CacheConfiguration> cacheConfigurations=_getAllCacheConfigurations(configuration);
  for (  CacheConfiguration cacheConfiguration : cacheConfigurations) {
    _configureCacheEventListeners(enableClusterLinkReplication,clearCachePeerProviderConfigurations,usingDefault,cacheConfiguration);
  }
  return configuration;
}
