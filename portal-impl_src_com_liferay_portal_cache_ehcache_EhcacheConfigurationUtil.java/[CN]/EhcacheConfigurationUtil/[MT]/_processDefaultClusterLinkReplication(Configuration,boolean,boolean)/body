{
  boolean clearCachePeerProviderConfigurations=false;
  if ((usingDefault && enableClusterLinkReplication) || (usingDefault && !PropsValues.CLUSTER_LINK_ENABLED)) {
    clearCachePeerProviderConfigurations=true;
  }
  if (clearCachePeerProviderConfigurations) {
    configuration.getCacheManagerPeerListenerFactoryConfigurations().clear();
    configuration.getCacheManagerPeerProviderFactoryConfiguration().clear();
  }
  CacheConfiguration defaultCacheConfiguration=configuration.getDefaultCacheConfiguration();
  _configureCacheEventListeners(enableClusterLinkReplication,clearCachePeerProviderConfigurations,usingDefault,defaultCacheConfiguration);
  Map<String,CacheConfiguration> cacheConfigurations=configuration.getCacheConfigurations();
  for (  CacheConfiguration cacheConfiguration : cacheConfigurations.values()) {
    _configureCacheEventListeners(enableClusterLinkReplication,clearCachePeerProviderConfigurations,usingDefault,cacheConfiguration);
  }
  return configuration;
}
