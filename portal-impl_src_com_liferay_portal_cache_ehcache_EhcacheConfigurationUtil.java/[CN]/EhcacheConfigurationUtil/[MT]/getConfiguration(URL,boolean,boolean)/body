{
  if (configurationURL == null) {
    return null;
  }
  Configuration configuration=ConfigurationFactory.parseConfiguration(configurationURL);
  List<CacheConfiguration> cacheConfigurations=_getAllCacheConfigurations(configuration);
  if (!PropsValues.EHCACHE_BOOTSTRAP_CACHE_LOADER_ENABLED) {
    _clearBootstrapCacheLoaderConfigurations(cacheConfigurations);
  }
  if (!clusterAware) {
    return configuration;
  }
  if (!PropsValues.CLUSTER_LINK_ENABLED) {
    _clearEhcacheReplicatorConfigurations(configuration,cacheConfigurations,usingDefault);
  }
 else   if (PropsValues.EHCACHE_CLUSTER_LINK_REPLICATION_ENABLED) {
    Map<CacheConfiguration,String> cacheEventListenerProperties=_clearEhcacheReplicatorConfigurations(configuration,cacheConfigurations,usingDefault);
    for (    Map.Entry<CacheConfiguration,String> entry : cacheEventListenerProperties.entrySet()) {
      _enableClusterLinkReplication(entry.getKey(),entry.getValue());
    }
  }
  return configuration;
}
