{
  User user=UserLocalServiceUtil.getUser(userId);
  MailboxFactory mailboxFactory=_mailboxFactories.get(protocol);
  if (mailboxFactory == null) {
    throw new IllegalArgumentException("Invalid protocol " + protocol);
  }
  return mailboxFactory.getMailbox(user,protocol);
}
