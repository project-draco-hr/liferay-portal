{
  if ((user == null) || (customUserAttributeNames.length == 0)) {
    return;
  }
  Group companyGroup=GroupLocalServiceUtil.getCompanyGroup(user.getCompanyId());
  long[] allCategoryIds=assetEntryQuery.getAllCategoryIds();
  PrimitiveLongList allCategoryIdsList=new PrimitiveLongList(allCategoryIds.length + customUserAttributeNames.length);
  allCategoryIdsList.addAll(allCategoryIds);
  for (  String customUserAttributeName : customUserAttributeNames) {
    ExpandoBridge userCustomAttributes=user.getExpandoBridge();
    Serializable userCustomFieldValue=userCustomAttributes.getAttribute(customUserAttributeName);
    if (userCustomFieldValue != null) {
      String userCustomFieldValueString=userCustomFieldValue.toString();
      List<AssetCategory> assetCategories=AssetCategoryLocalServiceUtil.search(companyGroup.getGroupId(),userCustomFieldValueString,new String[0],QueryUtil.ALL_POS,QueryUtil.ALL_POS);
      for (      AssetCategory assetCategory : assetCategories) {
        allCategoryIdsList.add(assetCategory.getCategoryId());
      }
    }
  }
  assetEntryQuery.setAllCategoryIds(allCategoryIdsList.getArray());
}
