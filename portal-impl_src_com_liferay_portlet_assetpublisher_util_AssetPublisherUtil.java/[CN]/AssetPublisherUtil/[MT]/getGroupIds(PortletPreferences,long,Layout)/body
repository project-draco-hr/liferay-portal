{
  String defaultScopeId=GetterUtil.getString(portletPreferences.getValue("defaultScope",null));
  if (Validator.isNull(defaultScopeId) || defaultScopeId.equals(StringPool.FALSE)) {
    String[] scopeIds=portletPreferences.getValues("scopeIds",new String[]{SCOPE_ID_GROUP_PREFIX + scopeGroupId});
    long[] groupIds=new long[scopeIds.length];
    int i=0;
    for (    String scopeId : scopeIds) {
      try {
        groupIds[i]=getGroupIdFromScopeId(scopeId,scopeGroupId,layout.isPrivateLayout());
        i++;
      }
 catch (      Exception e) {
        continue;
      }
    }
    return groupIds;
  }
  if (defaultScopeId.equals(StringPool.TRUE)) {
    return new long[]{scopeGroupId};
  }
  try {
    long groupId=getGroupIdFromScopeId(defaultScopeId,scopeGroupId,layout.isPrivateLayout());
    return new long[]{groupId};
  }
 catch (  Exception e) {
    return new long[0];
  }
}
