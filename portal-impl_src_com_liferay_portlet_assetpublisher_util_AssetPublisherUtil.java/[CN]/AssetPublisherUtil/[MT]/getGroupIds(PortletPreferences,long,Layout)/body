{
  String defaultScopeId=GetterUtil.getString(portletPreferences.getValue("defaultScope",null));
  if (Validator.equals(defaultScopeId,StringPool.TRUE)) {
    return new long[]{scopeGroupId};
  }
  if (Validator.equals(defaultScopeId,StringPool.FALSE) || Validator.isNull(defaultScopeId)) {
    String[] scopeIds=portletPreferences.getValues("scopeIds",new String[]{"group" + StringPool.UNDERLINE + scopeGroupId});
    long[] groupIds=new long[scopeIds.length];
    for (int i=0; i < scopeIds.length; i++) {
      try {
        groupIds[i]=_getGroupId(scopeIds[i],scopeGroupId,layout.isPrivateLayout());
      }
 catch (      Exception e) {
        continue;
      }
    }
    return groupIds;
  }
  try {
    long groupId=_getGroupId(defaultScopeId,scopeGroupId,layout.isPrivateLayout());
    return new long[]{groupId};
  }
 catch (  Exception e) {
    return new long[0];
  }
}
