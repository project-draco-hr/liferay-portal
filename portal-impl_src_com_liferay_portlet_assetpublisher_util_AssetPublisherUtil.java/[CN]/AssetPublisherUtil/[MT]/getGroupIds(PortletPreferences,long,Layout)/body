{
  String defaultScopeId=GetterUtil.getString(portletPreferences.getValue("defaultScope",null));
  if (Validator.isNull(defaultScopeId) || defaultScopeId.equals(StringPool.FALSE)) {
    String[] scopeIds=portletPreferences.getValues("scopeIds",new String[]{SCOPE_ID_GROUP_PREFIX + scopeGroupId});
    long[] groupIds=new long[scopeIds.length];
    for (int i=0; i < scopeIds.length; i++) {
      try {
        groupIds[i]=_getGroupId(scopeIds[i],scopeGroupId,layout.isPrivateLayout());
      }
 catch (      Exception e) {
        continue;
      }
    }
    return groupIds;
  }
  if (defaultScopeId.equals(StringPool.TRUE)) {
    return new long[]{scopeGroupId};
  }
  try {
    long groupId=_getGroupId(defaultScopeId,scopeGroupId,layout.isPrivateLayout());
    return new long[]{groupId};
  }
 catch (  Exception e) {
    return new long[0];
  }
}
