{
  String referringPortletResource=ParamUtil.getString(portletRequest,"referringPortletResource");
  if (Validator.isNull(referringPortletResource)) {
    return;
  }
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  Layout layout=LayoutLocalServiceUtil.getLayout(themeDisplay.getRefererPlid());
  PortletPreferences portletPreferences=PortletPreferencesFactoryUtil.getPortletSetup(themeDisplay.getScopeGroupId(),layout,referringPortletResource,null);
  String selectionStyle=portletPreferences.getValue("selectionStyle","dynamic");
  if (selectionStyle.equals("dynamic")) {
    return;
  }
  AssetEntry assetEntry=AssetEntryLocalServiceUtil.getEntry(className,classPK);
  addSelection(className,assetEntry.getEntryId(),assetEntryOrder,portletPreferences);
  portletPreferences.store();
}
