{
  if (!WikiPagePermission.contains(permissionChecker,activity.getClassPK(),ActionKeys.VIEW)) {
    return false;
  }
  WikiPageResource pageResource=WikiPageResourceLocalServiceUtil.getPageResource(activity.getClassPK());
  int activityType=activity.getType();
  if (activityType == WikiActivityKeys.UPDATE_PAGE) {
    double version=GetterUtil.getDouble(activity.getExtraDataProperty("version"));
    WikiPage page=WikiPageLocalServiceUtil.getPage(pageResource.getNodeId(),pageResource.getTitle(),version);
    if (!page.isApproved() && !WikiPagePermission.contains(permissionChecker,activity.getClassPK(),ActionKeys.UPDATE)) {
      return false;
    }
  }
  return true;
}
