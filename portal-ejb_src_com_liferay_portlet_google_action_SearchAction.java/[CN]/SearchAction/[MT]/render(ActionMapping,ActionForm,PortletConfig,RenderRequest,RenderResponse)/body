{
  try {
    PortletPreferences prefs=req.getPreferences();
    String args=ParamUtil.getString(req,"args");
    int start=(ParamUtil.get(req,"start",1) - 1) * 10;
    GoogleSearch googleSearch=GoogleUtil.getGoogleSearch();
    googleSearch.setQueryString(args);
    googleSearch.setStartResult(start);
    googleSearch.setSafeSearch(GetterUtil.getBoolean(prefs.getValue("safe-search",StringPool.BLANK)));
    GoogleSearchResult searchResuklt=googleSearch.doSearch();
    req.setAttribute(WebKeys.GOOGLE_SEARCH_RESULT,searchResuklt);
    return mapping.findForward("portlet.google.search");
  }
 catch (  GoogleSearchFault gse) {
    GoogleUtil.useNewKey();
    return mapping.findForward("portlet.google.error");
  }
}
