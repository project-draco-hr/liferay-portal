{
  try {
    PortalPreferences preferences=PortletPreferencesFactoryUtil.getPortalPreferences(request);
    String openNodesString=preferences.getValue(CLASS_NAME,treeId);
    openNodesString=StringUtil.add(openNodesString,nodeId);
    preferences.setValue(CLASS_NAME,treeId,openNodesString);
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
}
