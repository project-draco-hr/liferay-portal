{
  try {
    PortalPreferences preferences=PortletPreferencesFactoryUtil.getPortalPreferences(request);
    String openNodesString=preferences.getValue(CLASS_NAME,treeId);
    for (int i=0; i < nodeIds.length; i++) {
      openNodesString=StringUtil.add(openNodesString,nodeIds[i]);
    }
    preferences.setValue(CLASS_NAME,treeId,openNodesString);
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
}
