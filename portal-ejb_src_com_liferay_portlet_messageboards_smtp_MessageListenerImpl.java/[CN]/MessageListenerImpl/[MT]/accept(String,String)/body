{
  String categoryId=recipient.substring(0,recipient.indexOf('@'));
  String companyId=recipient.substring(recipient.indexOf('@') + "mb.".length() + 1);
  try {
    CompanyLocalServiceUtil.getCompany(companyId);
    List categoryIds=new ArrayList();
    categoryIds.add(categoryId);
    int count=MBMessageLocalServiceUtil.getCategoriesMessagesCount(categoryIds);
    if (count < 0) {
      return false;
    }
    UserLocalServiceUtil.getUserByEmailAddress(companyId,from);
    return true;
  }
 catch (  NoSuchCompanyException e) {
    return false;
  }
catch (  NoSuchUserException e) {
    return false;
  }
catch (  PortalException e) {
    return false;
  }
catch (  SystemException e) {
    return false;
  }
}
