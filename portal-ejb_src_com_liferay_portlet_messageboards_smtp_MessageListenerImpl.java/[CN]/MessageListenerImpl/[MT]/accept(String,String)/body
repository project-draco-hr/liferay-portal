{
  try {
    if (!recipient.startsWith(MBUtil.SMTP_PORTLET_PREFIX)) {
      return false;
    }
    String companyId=_getCompanyId(recipient);
    String categoryId=_getCategoryId(recipient);
    CompanyLocalServiceUtil.getCompany(companyId);
    MBCategory category=MBCategoryLocalServiceUtil.getCategory(categoryId);
    if (!category.getCompanyId().equals(companyId)) {
      return false;
    }
    UserLocalServiceUtil.getUserByEmailAddress(companyId,from);
    return true;
  }
 catch (  Exception e) {
    return false;
  }
}
