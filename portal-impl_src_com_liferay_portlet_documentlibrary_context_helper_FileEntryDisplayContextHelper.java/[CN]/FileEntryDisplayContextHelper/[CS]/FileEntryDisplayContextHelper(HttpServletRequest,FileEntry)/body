{
  _fileEntry=fileEntry;
  if (_fileEntry == null) {
    _setValuesForNullFileEntry();
  }
  _themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  _folderId=BeanParamUtil.getLong(_fileEntry,request,"folderId");
  _permissionChecker=_themeDisplay.getPermissionChecker();
  PortletDisplay portletDisplay=_themeDisplay.getPortletDisplay();
  try {
    _dlPortletInstanceSettings=DLPortletInstanceSettings.getInstance(_themeDisplay.getLayout(),portletDisplay.getId());
  }
 catch (  PortalException pe) {
    throw new SystemException(pe);
  }
  if (_fileEntry != null) {
    DLFileEntry dlFileEntry=(DLFileEntry)_fileEntry.getModel();
    _fileEntryTypeId=dlFileEntry.getFileEntryTypeId();
  }
}
