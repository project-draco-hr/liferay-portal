{
  WikiNode node=(WikiNode)portletRequest.getAttribute(WikiWebKeys.WIKI_NODE);
  if (node == null) {
    try {
      String initialNodeName=WikiNodeConstants.INITIAL_NODE_NAME;
      try {
        WikiGroupServiceOverriddenConfiguration wikiGroupServiceOverriddenConfiguration=ConfigurationFactoryUtil.getConfiguration(WikiGroupServiceOverriddenConfiguration.class,new GroupServiceSettingsLocator(themeDisplay.getScopeGroupId(),WikiConstants.SERVICE_NAME));
        initialNodeName=wikiGroupServiceOverriddenConfiguration.initialNodeName();
      }
 catch (      ConfigurationException ce) {
        _log.error("Cannot obtain initial node name for group id " + themeDisplay.getScopeGroupId());
      }
      String name=BeanParamUtil.getString(node,portletRequest,"name",initialNodeName);
      node=_wikiNodeService.getNode(themeDisplay.getScopeGroupId(),name);
    }
 catch (    NoSuchNodeException nsne) {
      node=null;
    }
catch (    PortalException pe) {
      _log.error(pe,pe);
    }
  }
  return node;
}
