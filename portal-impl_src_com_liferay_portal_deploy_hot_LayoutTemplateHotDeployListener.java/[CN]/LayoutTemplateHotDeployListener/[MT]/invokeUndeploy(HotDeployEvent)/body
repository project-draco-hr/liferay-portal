{
  String servletContextName=null;
  try {
    ServletContext ctx=event.getServletContext();
    servletContextName=ctx.getServletContextName();
    if (_log.isDebugEnabled()) {
      _log.debug("Invoking undeploy for " + servletContextName);
    }
    List<ObjectValuePair<String,Boolean>> layoutTemplateIds=_vars.get(servletContextName);
    if (layoutTemplateIds != null) {
      if (_log.isInfoEnabled()) {
        _log.info("Unregistering layout templates for " + servletContextName);
      }
      Iterator<ObjectValuePair<String,Boolean>> itr=layoutTemplateIds.iterator();
      while (itr.hasNext()) {
        ObjectValuePair<String,Boolean> ovp=itr.next();
        String layoutTemplateId=(String)ovp.getKey();
        Boolean standard=(Boolean)ovp.getValue();
        try {
          LayoutTemplateLocalUtil.uninstallLayoutTemplate(layoutTemplateId,standard.booleanValue());
        }
 catch (        Exception e) {
          _log.error(e.getMessage());
        }
      }
      layoutTemplateIds=null;
      if (_log.isInfoEnabled()) {
        _log.info("Layout templates for " + servletContextName + " unregistered successfully");
      }
    }
  }
 catch (  Exception e) {
    throw new HotDeployException("Error unregistering layout templates for " + servletContextName,e);
  }
}
