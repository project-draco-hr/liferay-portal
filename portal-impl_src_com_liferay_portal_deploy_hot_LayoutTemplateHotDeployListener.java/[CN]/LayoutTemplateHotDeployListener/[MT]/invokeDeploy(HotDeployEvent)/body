{
  String servletContextName=null;
  try {
    ServletContext ctx=event.getServletContext();
    servletContextName=ctx.getServletContextName();
    if (_log.isDebugEnabled()) {
      _log.debug("Invoking deploy for " + servletContextName);
    }
    String[] xmls=new String[]{HttpUtil.URLtoString(ctx.getResource("/WEB-INF/liferay-layout-templates.xml"))};
    if (xmls[0] == null) {
      return;
    }
    if (_log.isInfoEnabled()) {
      _log.info("Registering layout templates for " + servletContextName);
    }
    List<ObjectValuePair<String,Boolean>> layoutTemplateIds=LayoutTemplateLocalUtil.init(servletContextName,ctx,xmls,event.getPluginPackage());
    _vars.put(servletContextName,layoutTemplateIds);
    if (_log.isInfoEnabled()) {
      _log.info("Layout templates for " + servletContextName + " registered successfully");
    }
  }
 catch (  Exception e) {
    throw new HotDeployException("Error registering layout templates for " + servletContextName,e);
  }
}
