{
  boolean workflowEnabled=WorkflowThreadLocal.isEnabled();
  try {
    WorkflowThreadLocal.setEnabled(true);
    serviceContext=(ServiceContext)serviceContext.clone();
    serviceContext.setWorkflowAction(WorkflowConstants.ACTION_SAVE_DRAFT);
    FileEntry fileEntry=DLAppLocalServiceUtil.addFileEntry(userId,groupId,folderId,sourceFileName,ContentTypes.TEXT_PLAIN,title,StringPool.BLANK,StringPool.BLANK,RandomTestUtil.randomBytes(TikaSafeRandomizerBumper.INSTANCE),serviceContext);
    if (approved) {
      return updateStatus(fileEntry,serviceContext);
    }
    return fileEntry;
  }
  finally {
    WorkflowThreadLocal.setEnabled(workflowEnabled);
  }
}
