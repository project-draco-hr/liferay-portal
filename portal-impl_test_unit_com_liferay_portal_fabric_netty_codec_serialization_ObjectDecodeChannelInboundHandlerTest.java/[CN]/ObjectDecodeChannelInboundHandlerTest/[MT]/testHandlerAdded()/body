{
  ChannelPipeline channelPipeline=NettyUtil.createEmptyChannelPipeline();
  DateChannelHandler dateChannelHandler=new DateChannelHandler();
  Assert.assertFalse((boolean)ReflectionTestUtil.getFieldValue(dateChannelHandler,"_added"));
  channelPipeline.addLast(dateChannelHandler);
  Assert.assertTrue((boolean)ReflectionTestUtil.getFieldValue(dateChannelHandler,"_added"));
  Map<String,ChannelHandler> map=channelPipeline.toMap();
  Assert.assertTrue(map.isEmpty());
  AnnotatedObjectDecoder annotatedObjectDecoder=new AnnotatedObjectDecoder();
  channelPipeline.addLast(annotatedObjectDecoder);
  dateChannelHandler=new DateChannelHandler();
  Assert.assertFalse((boolean)ReflectionTestUtil.getFieldValue(dateChannelHandler,"_added"));
  channelPipeline.addLast(dateChannelHandler);
  Assert.assertTrue((boolean)ReflectionTestUtil.getFieldValue(dateChannelHandler,"_added"));
  map=channelPipeline.toMap();
  Assert.assertEquals(1,map.size());
  Assert.assertTrue(map.containsValue(annotatedObjectDecoder));
  Assert.assertSame(dateChannelHandler,annotatedObjectDecoder.removeLast());
}
