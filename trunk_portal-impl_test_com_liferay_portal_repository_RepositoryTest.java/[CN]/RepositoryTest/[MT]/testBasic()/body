{
  long[] repositoryIds=new long[2];
  long classNameId=PortalUtil.getClassNameId(LiferayRepository.class);
  repositoryIds[0]=RepositoryServiceUtil.mountRepository(getGroupId(),classNameId,DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,"Test 1","Test 1",PortletKeys.DOCUMENT_LIBRARY,new UnicodeProperties(),new ServiceContext());
  DLFolder dlFolder=DLFolderServiceUtil.addFolder(getGroupId(),getGroupId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,"Folder","Folder",new ServiceContext());
  repositoryIds[1]=RepositoryServiceUtil.mountRepository(getGroupId(),classNameId,dlFolder.getFolderId(),"Test 2","Test 2",PortletKeys.DOCUMENT_LIBRARY,new UnicodeProperties(),new ServiceContext());
  RepositoryServiceUtil.unmountRepositories(getGroupId());
  for (int i=0; i < repositoryIds.length; i++) {
    long repositoryId=repositoryIds[i];
    try {
      RepositoryServiceUtil.getLocalRepositoryImpl(repositoryId);
      fail("Should not be able to access repository " + repositoryId);
    }
 catch (    Exception e) {
    }
  }
}
