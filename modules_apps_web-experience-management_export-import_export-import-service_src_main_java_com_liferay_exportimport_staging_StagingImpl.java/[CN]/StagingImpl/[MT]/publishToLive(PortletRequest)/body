{
  long groupId=ParamUtil.getLong(portletRequest,"groupId");
  Group liveGroup=getLiveGroup(groupId);
  Map<String,String[]> parameterMap=ExportImportConfigurationParameterMapFactory.buildParameterMap(portletRequest);
  if (liveGroup.isStaged()) {
    if (liveGroup.isStagedRemotely()) {
      publishToRemote(portletRequest);
    }
 else {
      Group stagingGroup=liveGroup.getStagingGroup();
      return publishLayouts(portletRequest,stagingGroup.getGroupId(),liveGroup.getGroupId(),parameterMap,false);
    }
  }
  return 0;
}
