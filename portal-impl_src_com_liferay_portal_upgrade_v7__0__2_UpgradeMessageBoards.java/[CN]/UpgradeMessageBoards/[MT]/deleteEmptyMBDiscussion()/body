{
  try (LoggingTimer loggingTimer=new LoggingTimer()){
    long classNameId=PortalUtil.getClassNameId(MBDiscussion.class.getName());
    runSQL("delete from AssetEntry where classPK in (" + "select messageId from MBMessage where threadId in (" + "select threadId from MBThread where categoryId = " + MBCategoryConstants.DISCUSSION_CATEGORY_ID + " and messagecount = 1)) and classNameId = "+ classNameId);
    runSQL("delete from MBMessage where threadId in (" + "select threadId from MBThread where categoryId = " + MBCategoryConstants.DISCUSSION_CATEGORY_ID + " and messagecount = 1)");
    runSQL("delete from MBDiscussion where threadId in (" + "select threadId from MBThread where categoryId = " + MBCategoryConstants.DISCUSSION_CATEGORY_ID + " and messagecount = 1)");
    runSQL("delete from MBThread where categoryId = " + MBCategoryConstants.DISCUSSION_CATEGORY_ID + " and messagecount = 1");
  }
 catch (  Exception e) {
    throw new UpgradeException(e);
  }
}
