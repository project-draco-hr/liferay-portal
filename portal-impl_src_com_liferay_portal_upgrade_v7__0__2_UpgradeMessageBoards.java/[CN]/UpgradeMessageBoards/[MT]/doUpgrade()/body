{
  try (PreparedStatement ps1=AutoBatchPreparedStatementUtil.concurrentAutoBatch(connection,"update MBDiscussion set groupId = ? where " + "discussionId = ?");PreparedStatement ps2=connection.prepareStatement("select MBThread.groupId, MBDiscussion.discussionId from " + "MBDiscussion inner join MBThread on " + "MBDiscussion.threadId = MBThread.threadId where "+ "MBDiscussion.groupId = 0")){
    try (ResultSet rs=ps2.executeQuery()){
      while (rs.next()) {
        long groupId=rs.getLong(1);
        long discussionId=rs.getLong(2);
        ps1.setLong(1,groupId);
        ps1.setLong(2,discussionId);
        ps1.addBatch();
      }
      ps1.executeBatch();
    }
   }
 }
