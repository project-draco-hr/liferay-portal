{
  if (_rootComment == null) {
    List<MBMessage> messages=getMessages();
    List<RatingsEntry> ratingsEntries=Collections.emptyList();
    List<RatingsStats> ratingsStats=Collections.emptyList();
    if (messages.size() > 1) {
      List<Long> classPKs=new ArrayList<>();
      for (      MBMessage curMessage : messages) {
        if (!curMessage.isRoot()) {
          classPKs.add(curMessage.getMessageId());
        }
      }
      ratingsEntries=RatingsEntryLocalServiceUtil.getEntries(_discussionTaglibHelper.getUserId(),MBDiscussion.class.getName(),classPKs);
      ratingsStats=RatingsStatsLocalServiceUtil.getStats(MBDiscussion.class.getName(),classPKs);
    }
    MBTreeWalker treeWalker=getTreeWalker();
    MBMessage rootMessage=treeWalker.getRoot();
    ThemeDisplay themeDisplay=_discussionRequestHelper.getThemeDisplay();
    _rootComment=new MBCommentImpl(rootMessage,treeWalker,ratingsEntries,ratingsStats,themeDisplay.getPathThemeImages());
  }
  return _rootComment;
}
