{
  ServiceTrackerBucket<SR,TS,R> serviceTrackerBucket=_serviceTrackerBuckets.get(key);
  if (serviceTrackerBucket == null) {
    ServiceTrackerBucket<SR,TS,R> newServiceTrackerBucket=_serviceTrackerMapBucketFactory.create();
    serviceTrackerBucket=_serviceTrackerBuckets.putIfAbsent(key,newServiceTrackerBucket);
    if (serviceTrackerBucket == null) {
      serviceTrackerBucket=newServiceTrackerBucket;
    }
  }
  serviceTrackerBucket.store(serviceReferenceServiceTuple);
  serviceReferenceServiceTuple.addEmittedKey(key);
}
