{
  Session session=null;
  try {
    if (shoppingCategory.isNew() || shoppingCategory.isModified()) {
      session=openSession();
      if (shoppingCategory.isNew()) {
        ShoppingCategoryHBM shoppingCategoryHBM=new ShoppingCategoryHBM(shoppingCategory.getCategoryId(),shoppingCategory.getCompanyId(),shoppingCategory.getCreateDate(),shoppingCategory.getModifiedDate(),shoppingCategory.getParentCategoryId(),shoppingCategory.getName());
        session.save(shoppingCategoryHBM);
        session.flush();
      }
 else {
        ShoppingCategoryHBM shoppingCategoryHBM=(ShoppingCategoryHBM)session.get(ShoppingCategoryHBM.class,shoppingCategory.getPrimaryKey());
        if (shoppingCategoryHBM != null) {
          shoppingCategoryHBM.setCompanyId(shoppingCategory.getCompanyId());
          shoppingCategoryHBM.setCreateDate(shoppingCategory.getCreateDate());
          shoppingCategoryHBM.setModifiedDate(shoppingCategory.getModifiedDate());
          shoppingCategoryHBM.setParentCategoryId(shoppingCategory.getParentCategoryId());
          shoppingCategoryHBM.setName(shoppingCategory.getName());
          session.flush();
        }
 else {
          shoppingCategoryHBM=new ShoppingCategoryHBM(shoppingCategory.getCategoryId(),shoppingCategory.getCompanyId(),shoppingCategory.getCreateDate(),shoppingCategory.getModifiedDate(),shoppingCategory.getParentCategoryId(),shoppingCategory.getName());
          session.save(shoppingCategoryHBM);
          session.flush();
        }
      }
      shoppingCategory.setNew(false);
      shoppingCategory.setModified(false);
      shoppingCategory.protect();
      ShoppingCategoryPool.update(shoppingCategory.getPrimaryKey(),shoppingCategory);
    }
    return shoppingCategory;
  }
 catch (  HibernateException he) {
    throw new SystemException(he);
  }
 finally {
    closeSession(session);
  }
}
