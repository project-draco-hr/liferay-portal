{
  try {
    String contextName=HttpUtil.getParameter(url.toExternalForm(),"Web-ContextPath");
    URI uri=new URI(url.getPath());
    File warDir=new File(uri);
    if (contextName.equals(StringPool.BLANK)) {
      contextName=_getContextNameFromDirectory(warDir);
    }
    if (contextName.equals(StringPool.BLANK)) {
      contextName=_getContextNameFromXMLFile(warDir);
    }
    if (contextName.equals(StringPool.BLANK)) {
      throw new IllegalArgumentException("Unable to determine context name from " + url);
    }
    Map<String,String[]> parameters=new HashMap<>();
    parameters.put("Web-ContextPath",new String[]{contextName});
    _wabGenerator.generate(_classLoader,warDir,parameters);
    uri=warDir.toURI();
    WabDirHandler wabDirHandler=new WabDirHandler(uri.toASCIIString());
    return wabDirHandler.openConnection(url);
  }
 catch (  IOException|URISyntaxException e) {
    if (_log.isInfoEnabled()) {
      _log.info("Unable to open connection",e);
    }
  }
  return null;
}
