{
  int total=0;
  List<WorkflowTask> results=null;
  String[] assetTypes=WorkflowHandlerUtil.getSearchableAssetTypes();
  WorkflowTaskSearch searchContainer=new WorkflowTaskSearch(_renderRequest,WorkflowTaskConstants.DEFAULT_CUR_PARAM2,getPortletURL());
  WorkflowTaskDisplayTerms searchTerms=(WorkflowTaskDisplayTerms)searchContainer.getDisplayTerms();
  if (searchTerms.isAdvancedSearch()) {
    total=WorkflowTaskManagerUtil.searchCount(_workflowTaskRequestHelper.getCompanyId(),_workflowTaskRequestHelper.getUserId(),searchTerms.getName(),searchTerms.getType(),null,null,null,false,true,searchTerms.isAndOperator());
    searchContainer.setTotal(total);
    results=WorkflowTaskManagerUtil.search(_workflowTaskRequestHelper.getCompanyId(),_workflowTaskRequestHelper.getUserId(),searchTerms.getName(),searchTerms.getType(),null,null,null,false,true,searchTerms.isAndOperator(),searchContainer.getStart(),searchContainer.getEnd(),searchContainer.getOrderByComparator());
  }
 else {
    total=WorkflowTaskManagerUtil.searchCount(_workflowTaskRequestHelper.getCompanyId(),_workflowTaskRequestHelper.getUserId(),searchTerms.getKeywords(),assetTypes,false,true);
    searchContainer.setTotal(total);
    results=WorkflowTaskManagerUtil.search(_workflowTaskRequestHelper.getCompanyId(),_workflowTaskRequestHelper.getUserId(),searchTerms.getKeywords(),assetTypes,false,true,searchContainer.getStart(),searchContainer.getEnd(),searchContainer.getOrderByComparator());
  }
  searchContainer.setTotal(total);
  searchContainer.setResults(results);
  validateSearchTerms(searchContainer);
  searchContainer.setEmptyResultsMessage(WorkflowTaskConstants.THERE_ARE_NO_PENDING_TASKS_ASSIGNED_TO_YOUR_ROLES);
  return searchContainer;
}
