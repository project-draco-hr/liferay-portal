{
  if (_assetVocabularies != null) {
    return _assetVocabularies;
  }
  ThemeDisplay themeDisplay=(ThemeDisplay)_request.getAttribute(WebKeys.THEME_DISPLAY);
  long[] groupIds=new long[0];
  try {
    groupIds=PortalUtil.getCurrentAndAncestorSiteGroupIds(themeDisplay.getScopeGroupId());
  }
 catch (  PortalException pe) {
    groupIds=new long[]{themeDisplay.getScopeGroupId()};
    _log.error(pe,pe);
  }
  _assetVocabularies=AssetVocabularyServiceUtil.getGroupVocabularies(groupIds);
  return _assetVocabularies;
}
