{
  List<AssetCategory> failedCategories=new ArrayList<AssetCategory>();
  for (  long categoryId : categoryIds) {
    try {
      AssetCategoryPermission.check(getPermissionChecker(),categoryId,ActionKeys.DELETE);
      assetCategoryLocalService.deleteCategory(categoryId);
    }
 catch (    PortalException pe) {
      if (serviceContext.isFailOnPortalException()) {
        throw pe;
      }
      AssetCategory category=assetCategoryPersistence.fetchByPrimaryKey(categoryId);
      if (category == null) {
        category=assetCategoryPersistence.create(categoryId);
      }
      failedCategories.add(category);
    }
  }
  return failedCategories;
}
