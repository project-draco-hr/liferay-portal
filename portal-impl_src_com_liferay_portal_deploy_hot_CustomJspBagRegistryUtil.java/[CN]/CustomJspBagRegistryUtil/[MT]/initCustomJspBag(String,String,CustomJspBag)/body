{
  String customJspDir=customJspBag.getCustomJspDir();
  boolean customJspGlobal=customJspBag.isCustomJspGlobal();
  List<String> customJsps=customJspBag.getCustomJsps();
  String portalWebDir=PortalUtil.getPortalWebDir();
  for (  String customJsp : customJsps) {
    String portalJsp=getPortalJsp(customJsp,customJspDir);
    if (customJspGlobal) {
      File portalJspFile=new File(portalWebDir + portalJsp);
      File portalJspBackupFile=getPortalJspBackupFile(portalJspFile);
      if (portalJspFile.exists() && !portalJspBackupFile.exists()) {
        FileUtil.copyFile(portalJspFile,portalJspBackupFile);
      }
    }
 else {
      portalJsp=CustomJspRegistryUtil.getCustomJspFileName(servletContextName,portalJsp);
    }
    FileUtil.write(portalWebDir + portalJsp,getCustomJspInputStream(customJspBag.getServletContext(),customJsp));
  }
  if (!customJspGlobal) {
    CustomJspRegistryUtil.registerServletContextName(servletContextName,displayName);
  }
}
