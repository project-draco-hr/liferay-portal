{
  if (JavaDetector.isJDK6()) {
    return loadJDK6(new UnsyncStringReader(s));
  }
 else {
    ByteBuffer byteBuffer=CharsetEncoderUtil.encode(charsetName,s);
    InputStream is=new UnsyncByteArrayInputStream(byteBuffer.array(),byteBuffer.arrayOffset(),byteBuffer.limit());
    return loadJDK5(is,charsetName);
  }
}
