{
  final Copy copy=GradleUtil.addTask(project,INIT_BUNDLE_TASK_NAME,Copy.class);
  copy.doFirst(new Action<Task>(){
    @Override public void execute(    Task task){
      project.delete(copy.getDestinationDir());
    }
  }
);
  copy.from(new Callable<FileTree>(){
    @Override public FileTree call() throws Exception {
      File bundle=bundleConfiguration.getSingleFile();
      String bundleName=bundle.getName();
      if (bundleName.endsWith(".tar.gz")) {
        return project.tarTree(bundleConfiguration.getSingleFile());
      }
 else {
        return project.zipTree(bundleConfiguration.getSingleFile());
      }
    }
  }
,new Closure<Void>(null){
    @SuppressWarnings("unused") public void doCall(    CopySpec copySpec){
      copySpec.eachFile(new StripPathSegmentsAction(1));
    }
  }
);
  File rootDir=project.getRootDir();
  copy.from(new File(rootDir,"/configs/common"),new File(rootDir,"/configs/${gradle.environment}"));
  copy.into(workspaceExtension.getHomeDir());
  copy.setDescription("Download and upzip the bundle into " + workspaceExtension.getHomeDir());
  copy.setIncludeEmptyDirs(false);
  return copy;
}
