{
  final Project pluginsSDKProject=GradleUtil.getProject(project,workspaceExtension.getPluginsSDKDir());
  if (pluginsSDKProject == null) {
    return;
  }
  AntBuilder antBuilder=pluginsSDKProject.getAnt();
  antBuilder.importBuild("build.xml");
  final Task warTask=GradleUtil.getTask(pluginsSDKProject,WarPlugin.WAR_TASK_NAME);
  File homeDir=workspaceExtension.getHomeDir();
  if (!homeDir.exists()) {
    warTask.dependsOn(initBundleTask);
  }
  Task updateSDKPropertiesTask=addTaskUpdateSDKProperties(pluginsSDKProject,workspaceExtension);
  Task buildTask=pluginsSDKProject.task(LifecycleBasePlugin.BUILD_TASK_NAME);
  buildTask.dependsOn(updateSDKPropertiesTask,warTask);
  for (  AbstractArchiveTask abstractArchiveTask : distBundleTasks) {
    abstractArchiveTask.into("deploy",new Closure<Void>(null){
      @SuppressWarnings("unused") public void doCall(      CopySpec copySpec){
        ConfigurableFileTree configurableFileTree=pluginsSDKProject.fileTree("dist");
        configurableFileTree.builtBy(warTask);
        configurableFileTree.include("*.war");
        copySpec.from(configurableFileTree);
      }
    }
);
  }
}
