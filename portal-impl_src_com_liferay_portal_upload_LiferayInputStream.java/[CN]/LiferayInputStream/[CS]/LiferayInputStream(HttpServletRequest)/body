{
  super(request.getInputStream());
  _session=request.getSession();
  long totalSize=request.getContentLength();
  if (totalSize < 0) {
    totalSize=GetterUtil.getLong(request.getHeader(HttpHeaders.CONTENT_LENGTH),totalSize);
  }
  _totalSize=totalSize;
  boolean createTempFile=GetterUtil.getBoolean(request.getAttribute(WebKeys.COPY_MULTIPART_STREAM_TO_FILE),true);
  if ((_totalSize >= THRESHOLD_SIZE) && createTempFile) {
    _tempFile=FileUtil.createTempFile();
  }
 else {
    _tempFile=null;
    request.removeAttribute(WebKeys.COPY_MULTIPART_STREAM_TO_FILE);
  }
}
