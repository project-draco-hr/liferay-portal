{
  int bytesRead=super.read(b,off,len);
  if (bytesRead > 0) {
    _totalRead+=bytesRead;
  }
 else {
    return bytesRead;
  }
  int percent=(int)((_totalRead * 100L) / _totalSize);
  if (_log.isDebugEnabled()) {
    _log.debug(bytesRead + "/" + _totalRead+ "="+ percent);
  }
  if (_totalSize > 0) {
    if (_totalSize < THRESHOLD_SIZE) {
      _cachedBytes.write(b,off,bytesRead);
    }
 else {
      _writeToTempFile(b,off,bytesRead);
    }
  }
  ProgressTracker progressTracker=(ProgressTracker)_session.getAttribute(ProgressTracker.PERCENT);
  Integer curPercent=null;
  if (progressTracker != null) {
    curPercent=progressTracker.getPercent();
  }
  if ((curPercent == null) || ((percent - curPercent.intValue()) >= 1)) {
    if (progressTracker == null) {
      progressTracker=new ProgressTracker(StringPool.BLANK);
      progressTracker.initialize(_session);
    }
    progressTracker.setPercent(percent);
  }
  return bytesRead;
}
