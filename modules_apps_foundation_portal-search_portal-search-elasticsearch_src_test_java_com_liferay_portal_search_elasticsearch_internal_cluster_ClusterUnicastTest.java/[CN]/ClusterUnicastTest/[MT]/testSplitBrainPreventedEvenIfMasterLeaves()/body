{
  ElasticsearchFixture elasticsearchFixture0=_testCluster.getNode(0);
  Index index0=createIndex(elasticsearchFixture0);
  ElasticsearchFixture elasticsearchFixture1=_testCluster.getNode(1);
  Index index1=createIndex(elasticsearchFixture1);
  ElasticsearchFixture elasticsearchFixture2=_testCluster.getNode(2);
  Index index2=createIndex(elasticsearchFixture2);
  updateNumberOfReplicas(2,index0,elasticsearchFixture0);
  ClusterAssert.assert2ReplicaShards(elasticsearchFixture0);
  ClusterAssert.assert2ReplicaShards(elasticsearchFixture1);
  ClusterAssert.assert2ReplicaShards(elasticsearchFixture2);
  _testCluster.destroyNode(0);
  ClusterAssert.assert1ReplicaAnd1UnassignedShard(elasticsearchFixture1);
  ClusterAssert.assert1ReplicaAnd1UnassignedShard(elasticsearchFixture2);
  updateNumberOfReplicas(1,index1,elasticsearchFixture1);
  ClusterAssert.assert1ReplicaShard(elasticsearchFixture1);
  ClusterAssert.assert1ReplicaShard(elasticsearchFixture2);
  _testCluster.destroyNode(1);
  ClusterAssert.assert1PrimaryAnd1UnassignedShard(elasticsearchFixture2);
  updateNumberOfReplicas(0,index2,elasticsearchFixture2);
  ClusterAssert.assert1PrimaryShardOnly(elasticsearchFixture2);
}
