{
  try {
    long companyId=0;
    Layout layout=LayoutUtil.fetchByPrimaryKey(portletPreferences.getPlid());
    if ((layout != null) && !layout.isPrivateLayout()) {
      companyId=layout.getCompanyId();
    }
 else {
      LayoutRevision layoutRevision=LayoutRevisionUtil.fetchByPrimaryKey(portletPreferences.getPlid());
      if ((layoutRevision != null) && !layoutRevision.isPrivateLayout()) {
        companyId=layoutRevision.getCompanyId();
      }
    }
    if (companyId > 0) {
      CacheUtil.clearCache(companyId);
    }
  }
 catch (  Exception e) {
    CacheUtil.clearCache();
  }
}
