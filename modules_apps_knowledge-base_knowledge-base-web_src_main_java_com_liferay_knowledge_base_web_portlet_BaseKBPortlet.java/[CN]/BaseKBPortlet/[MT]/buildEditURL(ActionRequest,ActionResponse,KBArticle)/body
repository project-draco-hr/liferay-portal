{
  Portal portal=getPortal();
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  PortletDisplay portletDisplay=themeDisplay.getPortletDisplay();
  String editURL=portal.getLayoutFullURL(themeDisplay);
  Http http=getHttp();
  editURL=http.setParameter(editURL,"p_p_id",portletDisplay.getId());
  editURL=getHttp().setParameter(editURL,actionResponse.getNamespace() + "mvcPath",templatePath + "edit_article.jsp");
  editURL=http.setParameter(editURL,actionResponse.getNamespace() + "redirect",getRedirect(actionRequest,actionResponse));
  editURL=http.setParameter(editURL,actionResponse.getNamespace() + "resourcePrimKey",kbArticle.getResourcePrimKey());
  editURL=http.setParameter(editURL,actionResponse.getNamespace() + "status",WorkflowConstants.STATUS_ANY);
  return editURL;
}
