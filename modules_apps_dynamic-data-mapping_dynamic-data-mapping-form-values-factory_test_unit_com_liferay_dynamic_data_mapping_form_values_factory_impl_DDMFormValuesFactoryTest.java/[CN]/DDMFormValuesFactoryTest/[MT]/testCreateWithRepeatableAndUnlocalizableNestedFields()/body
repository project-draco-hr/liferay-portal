{
  DDMForm ddmForm=DDMFormTestUtil.createDDMForm();
  DDMFormField nameDDMFormField=DDMFormTestUtil.createTextDDMFormField("Name",false,true,false);
  DDMFormField phoneDDMFormField=DDMFormTestUtil.createTextDDMFormField("Phone",false,true,false);
  DDMFormField extDDMFormField=DDMFormTestUtil.createTextDDMFormField("Ext",false,true,false);
  phoneDDMFormField.addNestedDDMFormField(extDDMFormField);
  nameDDMFormField.addNestedDDMFormField(phoneDDMFormField);
  ddmForm.addDDMFormField(nameDDMFormField);
  DDMFormValues expectedDDMFormValues=createDDMFormValues(ddmForm);
  DDMFormFieldValue paulDDMFormFieldValue=createDDMFormFieldValue("wqer","Name",new UnlocalizedValue("Paul"));
  DDMFormFieldValue paulPhone1DDMFormFieldValue=createDDMFormFieldValue("gatu","Phone",new UnlocalizedValue("1"));
  paulPhone1DDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("jkau","Ext",new UnlocalizedValue("1.1")));
  paulPhone1DDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("amat","Ext",new UnlocalizedValue("1.2")));
  paulDDMFormFieldValue.addNestedDDMFormFieldValue(paulPhone1DDMFormFieldValue);
  DDMFormFieldValue paulPhone2DDMFormFieldValue=createDDMFormFieldValue("hato","Phone",new UnlocalizedValue("2"));
  paulPhone2DDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("hamp","Ext",new UnlocalizedValue("2.1")));
  paulPhone2DDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("xzal","Ext",new UnlocalizedValue("2.2")));
  paulPhone2DDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("kaly","Ext",new UnlocalizedValue("2.3")));
  paulDDMFormFieldValue.addNestedDDMFormFieldValue(paulPhone2DDMFormFieldValue);
  expectedDDMFormValues.addDDMFormFieldValue(paulDDMFormFieldValue);
  DDMFormFieldValue joeDDMFormFieldValue=createDDMFormFieldValue("fahu","Name",new UnlocalizedValue("Joe"));
  DDMFormFieldValue joePhone1DDMFormFieldValue=createDDMFormFieldValue("jakl","Phone",new UnlocalizedValue("3"));
  joePhone1DDMFormFieldValue.addNestedDDMFormFieldValue(createDDMFormFieldValue("bagt","Ext",new UnlocalizedValue("3.1")));
  joeDDMFormFieldValue.addNestedDDMFormFieldValue(joePhone1DDMFormFieldValue);
  expectedDDMFormValues.addDDMFormFieldValue(joeDDMFormFieldValue);
  MockHttpServletRequest httpServletRequest=new MockHttpServletRequest();
  httpServletRequest.addParameter("availableLanguageIds","en_US");
  httpServletRequest.addParameter("defaultLanguageId",LocaleUtil.toLanguageId(LocaleUtil.US));
  httpServletRequest.addParameter("ddm__Name_wqer_0__en_US","Paul");
  httpServletRequest.addParameter("ddm__Name_fahu_1__en_US","Joe");
  httpServletRequest.addParameter("ddm__Name_wqer_0#Phone_gatu_0__en_US","1");
  httpServletRequest.addParameter("ddm__Name_wqer_0#Phone_hato_1__en_US","2");
  httpServletRequest.addParameter("ddm__Name_fahu_1#Phone_jakl_0__en_US","3");
  httpServletRequest.addParameter("ddm__Name_wqer_0#Phone_gatu_0#Ext_jkau_0__en_US","1.1");
  httpServletRequest.addParameter("ddm__Name_wqer_0#Phone_gatu_0#Ext_amat_1__en_US","1.2");
  httpServletRequest.addParameter("ddm__Name_wqer_0#Phone_hato_1#Ext_hamp_0__en_US","2.1");
  httpServletRequest.addParameter("ddm__Name_wqer_0#Phone_hato_1#Ext_xzal_1__en_US","2.2");
  httpServletRequest.addParameter("ddm__Name_wqer_0#Phone_hato_1#Ext_kaly_2__en_US","2.3");
  httpServletRequest.addParameter("ddm__Name_fahu_1#Phone_jakl_0#Ext_bagt_0__en_US","3.1");
  DDMFormValues actualDDMFormValues=_ddmFormValuesFactory.create(httpServletRequest,ddmForm);
  assertEquals(expectedDDMFormValues,actualDDMFormValues);
}
