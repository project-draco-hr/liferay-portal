{
  _request=request;
  _liferayPortletResponse=liferayPortletResponse;
  _tabs1=ParamUtil.getString(request,"tabs1","public-pages");
  _privateLayout=false;
  if (_tabs1.equals("my-dashboard") || _tabs1.equals("private-pages")) {
    _privateLayout=true;
  }
  if (getSelLayout() != null) {
    _privateLayout=getSelLayout().isPrivateLayout();
  }
  if (getLiveGroup().isUser() && !isPublicLayoutsModifiable() && isPrivateLayoutsModifiable()&& !_privateLayout) {
    _tabs1="my-dashboard";
    _privateLayout=true;
  }
  if (getSelGroup().isLayoutSetPrototype()) {
    _privateLayout=true;
  }
  String portletName=getPortletName();
  if (portletName.equals(PortletKeys.LAYOUTS_ADMIN) || portletName.equals(PortletKeys.MY_ACCOUNT)) {
    ThemeDisplay themeDisplay=(ThemeDisplay)_request.getAttribute(WebKeys.THEME_DISPLAY);
    PortletDisplay portletDisplay=themeDisplay.getPortletDisplay();
    portletDisplay.setURLBack(getBackURL());
  }
  _request.setAttribute(com.liferay.portal.util.WebKeys.LAYOUT_DESCRIPTIONS,getLayoutDescriptions());
  _request.setAttribute("edit_pages.jsp-selLayout",getSelLayout());
}
