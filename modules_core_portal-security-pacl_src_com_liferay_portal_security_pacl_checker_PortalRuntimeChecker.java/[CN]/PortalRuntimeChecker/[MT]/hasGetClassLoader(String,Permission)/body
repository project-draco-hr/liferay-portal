{
  if (_classLoaderReferenceIds.contains(classLoaderReferenceId)) {
    return true;
  }
  int stackIndex=Reflection.getStackIndex(5,4);
  Class<?> callerClass=Reflection.getCallerClass(stackIndex);
  String callerClassName=callerClass.getName();
  if (callerClassName.equals(PortalClassLoaderUtil.class.getName()) || callerClassName.equals(PortletClassLoaderUtil.class.getName())) {
    callerClass=Reflection.getCallerClass(stackIndex + 1);
  }
 else   if (callerClassName.equals(DynamicQueryFactoryImpl.class.getName())) {
    callerClass=Reflection.getCallerClass(stackIndex + 3);
  }
  if (isTrustedCaller(callerClass,permission)) {
    return true;
  }
  Class<?> superClass=callerClass.getSuperclass();
  if (Modifier.isAbstract(callerClass.getModifiers()) && (superClass.equals(BaseLocalServiceImpl.class) || superClass.equals(BasePersistenceImpl.class) || superClass.equals(BaseServiceImpl.class))) {
    return true;
  }
  return false;
}
