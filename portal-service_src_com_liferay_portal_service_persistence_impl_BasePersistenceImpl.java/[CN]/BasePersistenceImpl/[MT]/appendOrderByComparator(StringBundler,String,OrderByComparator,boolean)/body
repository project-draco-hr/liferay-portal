{
  TableNameOrderByComparator tableNameOrderByComparator;
  if (orderByComparator instanceof TableNameOrderByComparator) {
    tableNameOrderByComparator=(TableNameOrderByComparator)orderByComparator;
    tableNameOrderByComparator=new TableNameOrderByComparator(tableNameOrderByComparator.getDecoratedComparator(),entityAlias);
  }
 else {
    tableNameOrderByComparator=new TableNameOrderByComparator(orderByComparator,entityAlias);
  }
  String orderByContent=tableNameOrderByComparator.getOrderBy();
  if (sqlQuery) {
    orderByContent=fixBadColumnNames(orderByContent);
  }
  query.append(ORDER_BY_CLAUSE);
  query.append(orderByContent);
}
