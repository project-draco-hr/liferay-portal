{
  boolean isNew=model.isNew();
  if (!quiet) {
    for (    ModelListener<T> listener : listeners) {
      if (isNew) {
        listener.onBeforeCreate(model);
      }
 else {
        listener.onBeforeUpdate(model);
      }
    }
  }
  model=updateImpl(model,merge);
  if (!quiet) {
    for (    ModelListener<T> listener : listeners) {
      if (isNew) {
        listener.onAfterCreate(model);
      }
 else {
        listener.onAfterUpdate(model);
      }
    }
  }
  return model;
}
