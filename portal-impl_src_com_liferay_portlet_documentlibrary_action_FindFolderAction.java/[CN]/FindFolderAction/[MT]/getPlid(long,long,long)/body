{
  if (plid != LayoutConstants.DEFAULT_PLID) {
    try {
      Layout layout=LayoutLocalServiceUtil.getLayout(plid);
      LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
      if (layoutTypePortlet.hasPortletId(PortletKeys.DOCUMENT_LIBRARY_DISPLAY) || layoutTypePortlet.hasPortletId(PortletKeys.IMAGE_GALLERY_DISPLAY)) {
        return plid;
      }
    }
 catch (    NoSuchLayoutException nsle) {
    }
  }
  if (groupId <= 0) {
    Folder folder=DLAppLocalServiceUtil.getFolder(folderId);
    groupId=folder.getRepositoryId();
  }
  plid=PortalUtil.getPlidFromPortletId(groupId,PortletKeys.DOCUMENT_LIBRARY);
  if (plid != LayoutConstants.DEFAULT_PLID) {
    return plid;
  }
  plid=PortalUtil.getPlidFromPortletId(groupId,PortletKeys.DOCUMENT_LIBRARY_DISPLAY);
  if (plid != LayoutConstants.DEFAULT_PLID) {
    return plid;
  }
  plid=PortalUtil.getPlidFromPortletId(groupId,PortletKeys.IMAGE_GALLERY_DISPLAY);
  if (plid != LayoutConstants.DEFAULT_PLID) {
    return plid;
  }
  throw new NoSuchLayoutException("No page was found with the Document Library portlet");
}
