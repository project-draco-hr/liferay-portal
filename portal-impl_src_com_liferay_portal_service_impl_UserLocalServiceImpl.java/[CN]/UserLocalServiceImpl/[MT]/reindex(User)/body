{
  final Indexer indexer=IndexerRegistryUtil.nullSafeGetIndexer(User.class);
  Callable<Void> callable=new Callable<Void>(){
    public Void call() throws Exception {
      try {
        ShardUtil.pushCompanyService(user.getCompanyId());
        indexer.reindex(user);
      }
  finally {
        ShardUtil.popCompanyService();
      }
      return null;
    }
  }
;
  TransactionCommitCallbackRegistryUtil.registerCallback(callable);
}
