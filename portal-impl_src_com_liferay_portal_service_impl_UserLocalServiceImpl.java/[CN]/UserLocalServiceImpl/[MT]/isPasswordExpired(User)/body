{
  PasswordPolicy passwordPolicy=user.getPasswordPolicy();
  if (passwordPolicy.getExpireable()) {
    Date now=new Date();
    if (user.getPasswordModifiedDate() == null) {
      user.setPasswordModifiedDate(now);
      userLocalService.updateUser(user,false);
    }
    long passwordStartTime=user.getPasswordModifiedDate().getTime();
    long elapsedTime=now.getTime() - passwordStartTime;
    if (elapsedTime > (passwordPolicy.getMaxAge() * 1000)) {
      return true;
    }
 else {
      return false;
    }
  }
  return false;
}
