{
  if (newOrganizationIds == null) {
    return;
  }
  long[] oldOrganizationIds=getOrganizationPrimaryKeys(userId);
  for (  long oldOrganizationId : oldOrganizationIds) {
    if (!ArrayUtil.contains(newOrganizationIds,oldOrganizationId)) {
      unsetOrganizationUsers(oldOrganizationId,new long[]{userId});
    }
  }
  for (  long newOrganizationId : newOrganizationIds) {
    if (!ArrayUtil.contains(oldOrganizationIds,newOrganizationId)) {
      addOrganizationUsers(newOrganizationId,new long[]{userId});
    }
  }
  if (indexingEnabled) {
    reindex(userId);
  }
  PermissionCacheUtil.clearCache(userId);
}
