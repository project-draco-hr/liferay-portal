{
  if (key.equals("usersRoles")) {
    contextQuery.addRequiredTerm("roleIds",String.valueOf(value));
  }
 else   if (key.equals("usersUserGroups")) {
    contextQuery.addRequiredTerm("userGroupIds",String.valueOf(value));
  }
 else   if (key.equals("usersOrgs")) {
    if (value instanceof Long[]) {
      Long[] values=(Long[])value;
      BooleanQuery usersOrgsQuery=BooleanQueryFactoryUtil.create();
      for (      long organizationId : values) {
        usersOrgsQuery.addTerm("organizationIds",organizationId);
        usersOrgsQuery.addTerm("ancestorOrganizationIds",organizationId);
      }
      contextQuery.add(usersOrgsQuery,BooleanClauseOccur.MUST);
    }
 else {
      contextQuery.addRequiredTerm("organizationIds",String.valueOf(value));
    }
  }
 else   if (attributeNames.contains(key)) {
    UnicodeProperties properties=expandoBridge.getAttributeProperties(key);
    if (GetterUtil.getBoolean(properties.getProperty(ExpandoBridgeIndexer.INDEXABLE))) {
      int type=expandoBridge.getAttributeType(key);
      if ((type == ExpandoColumnConstants.STRING) && (Validator.isNotNull((String)value))) {
        if (andSearch) {
          searchQuery.addRequiredTerm(key,(String)value,true);
        }
 else {
          searchQuery.addTerm(key,(String)value,true);
        }
      }
    }
  }
 else   if (Validator.isNotNull(key) && Validator.isNotNull(value)) {
    if (andSearch) {
      searchQuery.addRequiredTerm(key,String.valueOf(value));
    }
 else {
      searchQuery.addTerm(key,String.valueOf(value));
    }
  }
}
