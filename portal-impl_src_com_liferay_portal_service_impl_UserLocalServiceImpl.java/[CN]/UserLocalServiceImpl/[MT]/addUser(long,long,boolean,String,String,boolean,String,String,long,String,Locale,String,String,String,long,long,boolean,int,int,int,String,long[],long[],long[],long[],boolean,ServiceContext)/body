{
  boolean workflowEnabled=WorkflowThreadLocal.isEnabled();
  try {
    WorkflowThreadLocal.setEnabled(false);
    if (serviceContext == null) {
      serviceContext=new ServiceContext();
    }
    if (serviceContext.getWorkflowAction() != WorkflowConstants.ACTION_PUBLISH) {
      serviceContext.setWorkflowAction(WorkflowConstants.ACTION_PUBLISH);
    }
    return addUserWithWorkflow(creatorUserId,companyId,autoPassword,password1,password2,autoScreenName,screenName,emailAddress,facebookId,openId,locale,firstName,middleName,lastName,prefixId,suffixId,male,birthdayMonth,birthdayDay,birthdayYear,jobTitle,groupIds,organizationIds,roleIds,userGroupIds,sendEmail,serviceContext);
  }
  finally {
    WorkflowThreadLocal.setEnabled(workflowEnabled);
  }
}
