{
  User user=userPersistence.findByPrimaryKey(userId);
  boolean wasActive=user.isActive();
  user.setStatus(status);
  userPersistence.update(user,false);
  Indexer indexer=IndexerRegistryUtil.getIndexer(User.class);
  indexer.reindex(user);
  if (!user.isActive() && wasActive) {
    socialEquityUserLocalService.clearRanks(user);
  }
  return user;
}
