{
  User user=userPersistence.findByPrimaryKey(userId);
  boolean oldActive=user.isActive();
  user.setStatus(status);
  userPersistence.update(user,false);
  if (!user.isActive() && oldActive) {
    socialEquityUserLocalService.clearRanks(user.getUserId());
  }
  Indexer indexer=IndexerRegistryUtil.getIndexer(User.class);
  indexer.reindex(user);
  return user;
}
