{
  Set<Long> userGroupIdSet=new HashSet<Long>();
  String[] defaultUserGroupNames=PrefsPropsUtil.getStringArray(companyId,PropsKeys.ADMIN_DEFAULT_USER_GROUP_NAMES,StringPool.NEW_LINE,PropsValues.ADMIN_DEFAULT_USER_GROUP_NAMES);
  List<UserGroup> currentUserGroups=user.getUserGroups();
  for (  String defaultUserGroupName : defaultUserGroupNames) {
    try {
      UserGroup defaultUserGroup=userGroupPersistence.findByC_N(companyId,defaultUserGroupName);
      if (!currentUserGroups.contains(defaultUserGroup)) {
        userGroupIdSet.add(defaultUserGroup.getUserGroupId());
        copyUserGroupLayouts(defaultUserGroup.getUserGroupId(),user.getUserId());
      }
    }
 catch (    NoSuchUserGroupException nsuge) {
    }
  }
  long[] userGroupIds=ArrayUtil.toArray((Long[])userGroupIdSet.toArray(new Long[userGroupIdSet.size()]));
  userPersistence.setUserGroups(user.getUserId(),userGroupIds);
}
