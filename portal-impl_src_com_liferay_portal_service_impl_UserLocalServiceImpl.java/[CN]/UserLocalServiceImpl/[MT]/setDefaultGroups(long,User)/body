{
  Set<Long> groupIdSet=new HashSet<Long>();
  String[] defaultGroupNames=PrefsPropsUtil.getStringArray(companyId,PropsKeys.ADMIN_DEFAULT_GROUP_NAMES,StringPool.NEW_LINE,PropsValues.ADMIN_DEFAULT_GROUP_NAMES);
  List<Group> currentGroups=user.getGroups();
  for (  String defaultGroupName : defaultGroupNames) {
    try {
      Group defaultGroup=groupPersistence.findByC_N(companyId,defaultGroupName);
      if (!currentGroups.contains(defaultGroup)) {
        groupIdSet.add(defaultGroup.getGroupId());
      }
    }
 catch (    NoSuchGroupException nsge) {
    }
  }
  long[] groupIds=ArrayUtil.toArray((Long[])groupIdSet.toArray(new Long[groupIdSet.size()]));
  userPersistence.setGroups(user.getUserId(),groupIds);
}
