{
  Company company=companyPersistence.findByPrimaryKey(companyId);
  if (company.isSystem()) {
    return;
  }
  if (!autoScreenName) {
    validateScreenName(companyId,userId,screenName);
  }
  if (!autoPassword) {
    PasswordPolicy passwordPolicy=passwordPolicyLocalService.getDefaultPasswordPolicy(companyId);
    PwdToolkitUtil.validate(companyId,0,password1,password2,passwordPolicy);
  }
  validateEmailAddress(companyId,emailAddress);
  if (Validator.isNotNull(emailAddress)) {
    User user=userPersistence.fetchByC_EA(companyId,emailAddress);
    if (user != null) {
      throw new DuplicateUserEmailAddressException();
    }
  }
  validateName(companyId,firstName,middleName,lastName);
}
