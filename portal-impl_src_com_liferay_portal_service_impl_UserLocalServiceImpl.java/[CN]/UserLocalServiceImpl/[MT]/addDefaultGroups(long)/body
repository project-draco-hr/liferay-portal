{
  User user=userPersistence.findByPrimaryKey(userId);
  Set<Long> groupIdsSet=new HashSet<Long>();
  String[] defaultGroupNames=PrefsPropsUtil.getStringArray(user.getCompanyId(),PropsKeys.ADMIN_DEFAULT_GROUP_NAMES,StringPool.NEW_LINE,PropsValues.ADMIN_DEFAULT_GROUP_NAMES);
  for (  String defaultGroupName : defaultGroupNames) {
    try {
      Group group=groupPersistence.findByC_N(user.getCompanyId(),defaultGroupName);
      if (!userPersistence.containsGroup(userId,group.getGroupId())) {
        groupIdsSet.add(group.getGroupId());
      }
    }
 catch (    NoSuchGroupException nsge) {
    }
  }
  long[] groupIds=ArrayUtil.toArray(groupIdsSet.toArray(new Long[groupIdsSet.size()]));
  groupLocalService.addUserGroups(userId,groupIds);
}
