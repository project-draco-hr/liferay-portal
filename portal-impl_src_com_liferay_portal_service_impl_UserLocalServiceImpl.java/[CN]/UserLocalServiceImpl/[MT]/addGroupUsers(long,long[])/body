{
  groupPersistence.addUsers(groupId,userIds);
  Group group=groupPersistence.findByPrimaryKey(groupId);
  Role role=rolePersistence.findByC_N(group.getCompanyId(),RoleConstants.COMMUNITY_MEMBER);
  for (  long userId : userIds) {
    userGroupRoleLocalService.addUserGroupRoles(userId,groupId,new long[]{role.getRoleId()});
  }
  Indexer indexer=IndexerRegistryUtil.getIndexer(User.class);
  indexer.reindex(userIds);
  PermissionCacheUtil.clearCache();
}
