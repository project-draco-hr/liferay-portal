{
  for (  long userId : userIds) {
    List<MembershipRequest> membershipRequests=membershipRequestLocalService.getMembershipRequests(userId,groupId,MembershipRequestConstants.STATUS_PENDING);
    try {
      User user=getUserById(userId);
      Locale locale=user.getLocale();
      for (      MembershipRequest membershipRequest : membershipRequests) {
        membershipRequestLocalService.updateStatus(remoteUserId,membershipRequest.getMembershipRequestId(),LanguageUtil.get(locale,"your-membership-has-been-approved"),MembershipRequestConstants.STATUS_APPROVED,false);
      }
    }
 catch (    NoSuchUserException nsue) {
    }
  }
  groupPersistence.addUsers(groupId,userIds);
  Indexer indexer=IndexerRegistryUtil.getIndexer(User.class);
  indexer.reindex(userIds);
  PermissionCacheUtil.clearCache();
}
