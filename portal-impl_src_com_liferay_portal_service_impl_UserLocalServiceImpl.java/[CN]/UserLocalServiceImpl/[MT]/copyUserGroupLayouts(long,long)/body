{
  UserGroup userGroup=userGroupLocalService.getUserGroup(userGroupId);
  User user=getUserById(userId);
  Map<String,String[]> parameterMap=getLayoutTemplatesParameters();
  if (userGroup.hasPrivateLayouts()) {
    long sourceGroupId=userGroup.getGroup().getGroupId();
    long targetGroupId=user.getGroup().getGroupId();
    byte[] data=layoutLocalService.exportLayouts(sourceGroupId,true,parameterMap);
    ByteArrayInputStream bais=new ByteArrayInputStream(data);
    layoutLocalService.importLayouts(userId,targetGroupId,true,parameterMap,bais);
  }
  if (userGroup.hasPublicLayouts()) {
    long sourceGroupId=userGroup.getGroup().getGroupId();
    long targetGroupId=user.getGroup().getGroupId();
    byte[] data=layoutLocalService.exportLayouts(sourceGroupId,false,parameterMap);
    ByteArrayInputStream bais=new ByteArrayInputStream(data);
    layoutLocalService.importLayouts(userId,targetGroupId,false,parameterMap,bais);
  }
}
