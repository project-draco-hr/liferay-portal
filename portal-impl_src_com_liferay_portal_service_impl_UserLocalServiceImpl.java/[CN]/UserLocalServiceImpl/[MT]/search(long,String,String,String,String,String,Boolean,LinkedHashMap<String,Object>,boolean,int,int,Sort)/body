{
  try {
    Map<String,Serializable> attributes=new HashMap<String,Serializable>();
    attributes.put("active",active);
    attributes.put("andSearch",andSearch);
    attributes.put("emailAddress",emailAddress);
    attributes.put("firstName",firstName);
    attributes.put("lastName",lastName);
    attributes.put("middleName",middleName);
    attributes.put("params",params);
    attributes.put("screenName",screenName);
    SearchContext searchContext=new SearchContext();
    searchContext.setAttributes(attributes);
    searchContext.setCompanyId(companyId);
    searchContext.setEnd(end);
    searchContext.setSorts(new Sort[]{sort});
    searchContext.setStart(start);
    Indexer indexer=IndexerRegistryUtil.getIndexer(User.class);
    return indexer.search(searchContext);
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
