{
  if (!emailAddress1.equals(emailAddress2)) {
    throw new UserEmailAddressException.MustBeEqual(user,emailAddress1,emailAddress2);
  }
  validateEmailAddress(user.getCompanyId(),emailAddress1);
  validateEmailAddress(user.getCompanyId(),emailAddress2);
  if (!StringUtil.equalsIgnoreCase(emailAddress1,user.getEmailAddress())) {
    if (userPersistence.fetchByC_EA(user.getCompanyId(),emailAddress1) != null) {
      throw new UserEmailAddressException.MustNotBeDuplicate(user.getUserId(),emailAddress1);
    }
  }
}
