{
  int offset=timeZone.getRawOffset();
  if (date1.after(date2)) {
    Date tempDate=date1;
    date1=date2;
    date2=tempDate;
  }
  Calendar startCal=new GregorianCalendar(timeZone);
  startCal.setTime(date1);
  startCal.add(Calendar.MILLISECOND,offset);
  Calendar endCal=new GregorianCalendar(timeZone);
  endCal.setTime(date2);
  endCal.add(Calendar.MILLISECOND,offset);
  int daysBetween=0;
  while (CalendarUtil.beforeByDay(startCal.getTime(),endCal.getTime())) {
    startCal.add(Calendar.DAY_OF_MONTH,1);
    daysBetween++;
  }
  return daysBetween;
}
