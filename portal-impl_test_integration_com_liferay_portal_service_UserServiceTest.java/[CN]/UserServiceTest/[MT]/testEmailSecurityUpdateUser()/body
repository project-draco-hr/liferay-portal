{
  Field field=getField("COMPANY_SECURITY_STRANGERS_WITH_MX");
  Object value=field.get(null);
  field.set(null,Boolean.FALSE);
  String name=PrincipalThreadLocal.getName();
  User user=addUserWithoutPermissions();
  PrincipalThreadLocal.setName(user.getUserId());
  try {
    updateUser(user);
    Assert.fail();
  }
 catch (  ReservedUserEmailAddressException rueae) {
  }
 finally {
    field.set(null,value);
    PrincipalThreadLocal.setName(name);
  }
}
