{
  _group=GroupTestUtil.addGroup();
  UnicodeProperties properties=new UnicodeProperties();
  properties.put(PropsKeys.ADMIN_DEFAULT_GROUP_NAMES,_group.getDescriptiveName());
  _organization=OrganizationTestUtil.addOrganization(true);
  Group organizationGroup=_organization.getGroup();
  properties.put(PropsKeys.ADMIN_DEFAULT_ORGANIZATION_GROUP_NAMES,organizationGroup.getDescriptiveName());
  CompanyLocalServiceUtil.updatePreferences(_group.getCompanyId(),properties);
  UnicodeProperties typeSettingsProperties=_group.getTypeSettingsProperties();
  _siteRole=RoleTestUtil.addRole(RoleConstants.TYPE_SITE);
  typeSettingsProperties.put("defaultSiteRoleIds",String.valueOf(_siteRole.getRoleId()));
  GroupLocalServiceUtil.updateGroup(_group.getGroupId(),typeSettingsProperties.toString());
  _user=UserTestUtil.addUser();
}
