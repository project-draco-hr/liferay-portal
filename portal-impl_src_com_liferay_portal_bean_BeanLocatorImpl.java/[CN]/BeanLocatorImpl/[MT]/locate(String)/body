{
  if (_log.isDebugEnabled()) {
    _log.debug("Locating " + name);
  }
  if (name.endsWith(VELOCITY_SUFFIX)) {
    String originalName=name.substring(0,name.length() - VELOCITY_SUFFIX.length());
    Object bean=_velocityBeans.get(originalName);
    if (bean == null) {
      bean=_applicationContext.getBean(originalName);
      bean=Proxy.newProxyInstance(_classLoader,bean.getClass().getInterfaces(),new VelocityBeanHandler(bean,_classLoader));
      _velocityBeans.put(originalName,bean);
    }
    return bean;
  }
 else {
    return _applicationContext.getBean(name);
  }
}
