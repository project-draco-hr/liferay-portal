{
  InputStream inputStream=classLoader.getResourceAsStream(source);
  if (inputStream == null) {
    File file=new File(source);
    if (file.exists()) {
      inputStream=new FileInputStream(file);
    }
  }
  if (inputStream == null) {
    if (_log.isWarnEnabled() && !source.endsWith("-ext.xml")) {
      _log.warn("Cannot load " + source);
    }
    return;
  }
  if (_log.isDebugEnabled()) {
    _log.debug("Loading " + source);
  }
  Document document=SAXReaderUtil.read(inputStream);
  Element rootElement=document.getRootElement();
  for (  Element resourceElement : rootElement.elements("resource")) {
    String file=resourceElement.attributeValue("file").trim();
    _read(servletContextName,classLoader,file);
    String extFile=StringUtil.replace(file,".xml","-ext.xml");
    _read(servletContextName,classLoader,extFile);
  }
  if (PropsValues.RESOURCE_ACTIONS_READ_PORTLET_RESOURCES) {
    for (    Element portletResourceElement : rootElement.elements("portlet-resource")) {
      _readPortletResource(servletContextName,portletResourceElement);
    }
  }
  for (  Element modelResourceElement : rootElement.elements("model-resource")) {
    _readModelResource(servletContextName,modelResourceElement);
  }
}
