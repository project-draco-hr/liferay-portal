{
  name=PortletConstants.getRootPortletId(name);
  List<String> actions=_getActions(_portletResourceActions,name);
  if (actions.size() == 0) {
synchronized (this) {
      Portlet portlet=PortletLocalServiceUtil.getPortletById(companyId,name);
      Map<String,Set<String>> portletModes=portlet.getPortletModes();
      Set<String> mimeTypeModes=portletModes.get("text/html");
      if (mimeTypeModes != null) {
        for (        String actionId : mimeTypeModes) {
          if (actionId.equalsIgnoreCase("edit")) {
            actions.add(ActionKeys.PREFERENCES);
          }
 else           if (actionId.equalsIgnoreCase("edit_guest")) {
            actions.add(ActionKeys.GUEST_PREFERENCES);
          }
 else {
            actions.add(actionId.toUpperCase());
          }
        }
      }
      _checkPortletActions(actions);
      List<String> communityDefaultActions=_portletResourceCommunityDefaultActions.get(name);
      if (communityDefaultActions == null) {
        communityDefaultActions=new UniqueList<String>();
        _portletResourceCommunityDefaultActions.put(name,communityDefaultActions);
        _checkPortletCommunityDefaultActions(communityDefaultActions);
      }
      List<String> guestDefaultActions=_portletResourceGuestDefaultActions.get(name);
      if (guestDefaultActions == null) {
        guestDefaultActions=new UniqueList<String>();
        _portletResourceGuestDefaultActions.put(name,guestDefaultActions);
        _checkPortletGuestDefaultActions(guestDefaultActions);
      }
      List<String> layoutManagerActions=_portletResourceLayoutManagerActions.get(name);
      if (layoutManagerActions == null) {
        layoutManagerActions=new UniqueList<String>();
        _portletResourceLayoutManagerActions.put(name,layoutManagerActions);
        _checkPortletLayoutManagerActions(layoutManagerActions);
      }
    }
  }
  return actions;
}
