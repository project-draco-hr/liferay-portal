{
  try {
    PortletSession portletSession=actionRequest.getPortletSession();
    String captchaText=CaptchaUtil.createText();
    portletSession.setAttribute(WebKeys.CAPTCHA_TEXT,captchaText);
    HttpServletResponse response=PortalUtil.getHttpServletResponse(actionResponse);
    CaptchaUtil.createImage(response.getOutputStream(),captchaText);
    setForward(actionRequest,ActionConstants.COMMON_NULL);
  }
 catch (  Exception e) {
    _log.error(e);
  }
}
