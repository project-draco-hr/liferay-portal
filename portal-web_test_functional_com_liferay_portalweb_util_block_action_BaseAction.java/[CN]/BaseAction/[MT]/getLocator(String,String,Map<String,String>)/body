{
  if (locator != null) {
    return locator;
  }
  if (pathLocators.containsKey(locatorKey)) {
    String locatorValue=pathLocators.get(locatorKey);
    if (locatorValue.contains("${") && locatorValue.contains("}")) {
      String regex="\\$\\{[^}]*?\\}";
      Pattern pattern=Pattern.compile(regex);
      Matcher matcher=pattern.matcher(locatorValue);
      while (matcher.find()) {
        String variable=matcher.group();
        int x=variable.indexOf("${");
        int y=variable.indexOf("}");
        String variableKey=variable.substring(x + 2,y);
        if (variables.containsKey(variableKey)) {
          locatorValue=locatorValue.replaceFirst(regex,variables.get(variableKey));
        }
 else {
          throw new Exception("Variable \"" + variableKey + "\" found in \""+ pathLocators.get(locatorKey)+ "\" is not set");
        }
      }
    }
    return locatorValue;
  }
  return locatorKey;
}
