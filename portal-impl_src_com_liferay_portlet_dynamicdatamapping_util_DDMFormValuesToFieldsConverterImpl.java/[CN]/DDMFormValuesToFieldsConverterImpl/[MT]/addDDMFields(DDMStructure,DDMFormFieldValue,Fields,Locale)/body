{
  String fieldName=ddmFormFieldValue.getName();
  if (!ddmStructure.hasField(fieldName)) {
    return;
  }
  if (!ddmStructure.isFieldTransient(fieldName)) {
    Field ddmField=createDDMField(ddmStructure,ddmFormFieldValue,defaultLocale);
    Field existingDDMField=ddmFields.get(ddmField.getName());
    if (existingDDMField == null) {
      ddmFields.put(ddmField);
    }
 else {
      addDDMFieldValues(existingDDMField,ddmField);
    }
  }
  addFieldDisplayValue(ddmFields.get(DDMImpl.FIELDS_DISPLAY_NAME),getFieldDisplayValue(ddmFormFieldValue));
  for (  DDMFormFieldValue nestedDDMFormFieldValue : ddmFormFieldValue.getNestedDDMFormFieldValues()) {
    addDDMFields(ddmStructure,nestedDDMFormFieldValue,ddmFields,defaultLocale);
  }
}
