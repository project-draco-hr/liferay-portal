{
  Throwable throwable=new RuntimeException();
  Mockito.doThrow(throwable).when(_replicasManager).updateNumberOfReplicas(Mockito.anyInt(),(String[])Mockito.anyVararg());
  try (CaptureHandler captureHandler=JDKLoggerTestUtil.configureJDKLogger(ReplicasClusterListener.class.getName(),Level.WARNING)){
    masterTokenAcquired();
    List<LogRecord> logRecords=captureHandler.getLogRecords();
    Assert.assertEquals(1,logRecords.size());
    LogRecord logRecord=logRecords.get(0);
    Assert.assertEquals("Unable to update number of replicas",logRecord.getMessage());
    Assert.assertSame(throwable,logRecord.getThrown());
  }
 }
