{
  JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  try {
    if (cmd.equals(Constants.ADD) || cmd.equals(Constants.UPDATE)) {
      jsonObject=updateTag(actionRequest);
    }
 else     if (cmd.equals(Constants.MERGE)) {
      jsonObject=mergeTag(actionRequest);
    }
  }
 catch (  Exception e) {
    jsonObject.putException(e);
  }
  HttpServletResponse response=PortalUtil.getHttpServletResponse(actionResponse);
  response.setContentType(ContentTypes.TEXT_JAVASCRIPT);
  ServletResponseUtil.write(response,jsonObject.toString());
  setForward(actionRequest,ActionConstants.COMMON_NULL);
}
