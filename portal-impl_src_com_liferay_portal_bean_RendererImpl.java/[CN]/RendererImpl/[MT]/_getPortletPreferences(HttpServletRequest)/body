{
  PortletPreferences preferences=PortalUtil.getPreferences(request);
  String portletResource=ParamUtil.getString(request,"portletResource");
  if (Validator.isNotNull(portletResource)) {
    try {
      preferences=PortletPreferencesFactoryUtil.getPortletSetup(request,portletResource);
    }
 catch (    SystemException e) {
    }
  }
  return preferences;
}
