{
  if (bytes == null) {
    return null;
  }
  ImageBag imageBag=read(bytes);
  RenderedImage renderedImage=imageBag.getRenderedImage();
  if (renderedImage == null) {
    throw new IOException("Unable to decode image");
  }
  String type=imageBag.getType();
  int height=renderedImage.getHeight();
  int width=renderedImage.getWidth();
  int size=bytes.length;
  Image image=new ImageImpl();
  image.setTextObj(bytes);
  image.setType(type);
  image.setHeight(height);
  image.setWidth(width);
  image.setSize(size);
  return image;
}
