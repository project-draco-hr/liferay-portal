{
  RenderedImage renderedImage=null;
  try {
    if (type.equals(TYPE_JPEG)) {
      type="jpeg";
    }
    InputStream in=new ByteArrayInputStream(bytes);
    ImageInputStream iis=ImageIO.createImageInputStream(in);
    Iterator iter=ImageIO.getImageReaders(iis);
    if (iter.hasNext()) {
      ImageReader reader=(ImageReader)iter.next();
      reader.setInput(iis);
      renderedImage=reader.read(0);
    }
  }
 catch (  IOException ioe) {
    if (_log.isDebugEnabled()) {
      _log.debug(type + ": " + ioe.getMessage());
    }
  }
  return renderedImage;
}
