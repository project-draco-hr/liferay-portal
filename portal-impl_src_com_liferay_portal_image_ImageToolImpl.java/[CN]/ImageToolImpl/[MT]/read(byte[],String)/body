{
  RenderedImage renderedImage=null;
  try {
    if (type.equals(TYPE_JPEG)) {
      type="jpeg";
    }
    InputStream inputStream=new ByteArrayInputStream(bytes);
    ImageInputStream imageInputStream=ImageIO.createImageInputStream(inputStream);
    Iterator<ImageReader> iterator=ImageIO.getImageReaders(imageInputStream);
    if (iterator.hasNext()) {
      ImageReader imageReader=iterator.next();
      imageReader.setInput(imageInputStream);
      renderedImage=imageReader.read(0);
    }
  }
 catch (  IOException ioe) {
    if (_log.isDebugEnabled()) {
      _log.debug(type + ": " + ioe.getMessage());
    }
  }
  return renderedImage;
}
