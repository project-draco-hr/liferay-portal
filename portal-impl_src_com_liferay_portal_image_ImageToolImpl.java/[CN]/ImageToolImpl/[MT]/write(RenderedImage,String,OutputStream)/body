{
  if (contentType.indexOf(TYPE_BMP) != -1) {
    ImageEncoder encoder=ImageCodec.createImageEncoder(TYPE_BMP,os,null);
    encoder.encode(renderedImage);
  }
 else   if (contentType.indexOf(TYPE_GIF) != -1) {
    encodeGIF(renderedImage,os);
  }
 else   if ((contentType.indexOf(TYPE_JPEG) != -1) || (contentType.indexOf("jpeg") != -1)) {
    ImageIO.write(renderedImage,"jpeg",os);
  }
 else   if (contentType.indexOf(TYPE_PNG) != -1) {
    ImageIO.write(renderedImage,TYPE_PNG,os);
  }
 else   if (contentType.indexOf("tif") != -1) {
    ImageEncoder encoder=ImageCodec.createImageEncoder(TYPE_TIFF,os,null);
    encoder.encode(renderedImage);
  }
}
