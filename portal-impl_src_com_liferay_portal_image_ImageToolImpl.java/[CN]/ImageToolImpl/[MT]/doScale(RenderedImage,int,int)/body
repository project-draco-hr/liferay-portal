{
  BufferedImage originalBufferedImage=getBufferedImage(renderedImage);
  ColorModel originalColorModel=originalBufferedImage.getColorModel();
  ColorSpace colorSpace=originalColorModel.getColorSpace();
  BufferedImage scaledBufferedImage=new BufferedImage(scaledWidth,scaledHeight,colorSpace.getType());
  Graphics2D scaledGraphics2D=scaledBufferedImage.createGraphics();
  if (originalColorModel.hasAlpha()) {
    scaledGraphics2D.setComposite(AlphaComposite.Src);
  }
  scaledGraphics2D.drawImage(originalBufferedImage,0,0,scaledWidth,scaledHeight,null);
  scaledGraphics2D.dispose();
  return scaledBufferedImage;
}
