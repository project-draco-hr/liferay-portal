{
  ServiceResponseContainer serviceResponseContainer=new ServiceResponseContainer();
  try {
    Object payload=message.getPayload();
    if (payload == null) {
      throw new Exception("Payload is null");
    }
 else     if (!ServiceRequest.class.isAssignableFrom(payload.getClass())) {
      throw new Exception("Payload " + payload.getClass() + " is not of type "+ ServiceRequest.class.getName());
    }
 else {
      ServiceRequest serviceRequest=(ServiceRequest)payload;
      Object result=serviceRequest.execute(_manager);
      serviceResponseContainer.setResult(result);
    }
  }
 catch (  Exception we) {
    _log.error(we,we);
    serviceResponseContainer.setException(we);
  }
 finally {
    String responseDestination=message.getResponseDestinationName();
    if (Validator.isNotNull(responseDestination)) {
      Message responseMessage=MessageBusUtil.createResponseMessage(message);
      responseMessage.setPayload(serviceResponseContainer);
      _messageBus.sendMessage(responseDestination,responseMessage);
    }
  }
}
