{
  if (Validator.isNull(propertyFileName)) {
    propertyFileName=PATCHER_PROPERTIES;
  }
  Properties properties=new Properties();
  Class<?> clazz=getClass();
  if (Validator.equals(propertyFileName,PATCHER_SERVICE_PROPERTIES)) {
    clazz=getClass().getInterfaces()[0];
  }
  ClassLoader classLoader=clazz.getClassLoader();
  InputStream inputStream=classLoader.getResourceAsStream(propertyFileName);
  if (inputStream == null) {
    if (_log.isDebugEnabled()) {
      _log.debug("Unable to load " + propertyFileName);
    }
  }
 else {
    try {
      properties.load(inputStream);
      _configured=true;
    }
 catch (    IOException ioe) {
      _log.error(ioe,ioe);
    }
 finally {
      StreamUtil.cleanUp(inputStream);
    }
  }
  _properties=properties;
  return _properties;
}
