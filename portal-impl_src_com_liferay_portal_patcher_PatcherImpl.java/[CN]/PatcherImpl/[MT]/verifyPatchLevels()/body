{
  Properties portalImplJARProperties=_getProperties(PATCHER_PROPERTIES);
  String[] portalImplJARPatches=_getInstalledPatches(portalImplJARProperties);
  Arrays.sort(portalImplJARPatches);
  Properties portalServiceJARProperties=_getProperties(PATCHER_SERVICE_PROPERTIES);
  String[] serviceJARPatches=_getInstalledPatches(portalServiceJARProperties);
  Arrays.sort(serviceJARPatches);
  if (!Arrays.equals(portalImplJARPatches,serviceJARPatches)) {
    _log.error("Inconsistent patch level detected");
    if (_log.isWarnEnabled()) {
      if (ArrayUtil.isEmpty(portalImplJARPatches)) {
        _log.warn("There are no patches installed on portal-impl.jar");
      }
 else {
        _log.warn("Patch level on portal-impl.jar: " + Arrays.toString(portalImplJARPatches));
      }
      if (ArrayUtil.isEmpty(serviceJARPatches)) {
        _log.warn("There are no patches installed on portal-kernel.jar");
      }
 else {
        _log.warn("Patch level on portal-kernel.jar: " + Arrays.toString(serviceJARPatches));
      }
    }
    _inconsistentPatchLevels=true;
    throw new PatchInconsistencyException();
  }
}
