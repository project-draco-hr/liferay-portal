{
  UnsyncStringWriter usw=new UnsyncStringWriter(false);
  assertNotNull(usw.stringBuilder);
  assertNull(usw.stringBundler);
  usw.write("ab".toCharArray());
  assertEquals(2,usw.stringBuilder.length());
  assertEquals('a',usw.stringBuilder.charAt(0));
  assertEquals('b',usw.stringBuilder.charAt(1));
  usw.write("cd".toCharArray());
  assertEquals(4,usw.stringBuilder.length());
  assertEquals('a',usw.stringBuilder.charAt(0));
  assertEquals('b',usw.stringBuilder.charAt(1));
  assertEquals('c',usw.stringBuilder.charAt(2));
  assertEquals('d',usw.stringBuilder.charAt(3));
  usw=new UnsyncStringWriter(true);
  assertNull(usw.stringBuilder);
  assertNotNull(usw.stringBundler);
  usw.write("ab".toCharArray());
  assertEquals(1,usw.stringBundler.index());
  assertEquals("ab",usw.stringBundler.stringAt(0));
  usw.write("cd".toCharArray());
  assertEquals(2,usw.stringBundler.index());
  assertEquals("ab",usw.stringBundler.stringAt(0));
  assertEquals("cd",usw.stringBundler.stringAt(1));
}
