{
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext();
  _blogsEntry=BlogsEntryLocalServiceUtil.addEntry(TestPropsValues.getUserId(),StringUtil.randomString(),StringUtil.randomString(),new Date(),serviceContext);
  IdentityServiceContextFunction serviceContextFunction=new IdentityServiceContextFunction(serviceContext);
  CommentManagerUtil.addComment(TestPropsValues.getUserId(),TestPropsValues.getGroupId(),BlogsEntry.class.getName(),_blogsEntry.getEntryId(),StringUtil.randomString(),serviceContextFunction);
  int initialCommentsCount=CommentManagerUtil.getCommentsCount(BlogsEntry.class.getName(),_blogsEntry.getEntryId());
  Trackback trackback=new TrackbackImpl();
  ThemeDisplay themeDisplay=new ThemeDisplay();
  Company company=CompanyLocalServiceUtil.getCompany(TestPropsValues.getCompanyId());
  themeDisplay.setCompany(company);
  trackback.addTrackback(_blogsEntry,themeDisplay,StringUtil.randomString(),StringUtil.randomString(),StringUtil.randomString(),StringUtil.randomString(),serviceContextFunction);
  Assert.assertEquals(initialCommentsCount + 1,CommentManagerUtil.getCommentsCount(BlogsEntry.class.getName(),_blogsEntry.getEntryId()));
  LinkbackConsumer linkbackConsumer=ReflectionTestUtil.getFieldValue(trackback,"_linkbackConsumer");
  linkbackConsumer.verifyNewTrackbacks();
}
