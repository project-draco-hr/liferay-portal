{
  if (Validator.isNull(path)) {
    return 0;
  }
  if (path.charAt(0) != CharPool.SLASH) {
    return 0;
  }
  Long timestamp=_timestamps.get(path);
  if (timestamp != null) {
    return timestamp;
  }
  timestamp=0L;
  String uriRealPath=servletContext.getRealPath(path);
  if (uriRealPath != null) {
    File uriFile=new File(uriRealPath);
    if (uriFile.exists()) {
      timestamp=uriFile.lastModified();
      _timestamps.put(path,timestamp);
      return timestamp;
    }
  }
  try {
    URL url=servletContext.getResource(path);
    if (url == null) {
      _log.error("Resource URL for " + path + " is null");
    }
 else {
      URLConnection urlConnection=null;
      try {
        urlConnection=url.openConnection();
        timestamp=urlConnection.getLastModified();
      }
  finally {
        if (urlConnection != null) {
          try {
            InputStream inputStream=urlConnection.getInputStream();
            inputStream.close();
          }
 catch (          IOException ioe) {
          }
        }
      }
    }
  }
 catch (  IOException ioe) {
    _log.error(ioe,ioe);
  }
  _timestamps.put(path,timestamp);
  return timestamp;
}
