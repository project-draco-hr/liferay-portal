{
  final Statement statement=super.classBlock(notifier);
  return new Statement(){
    @Override public void evaluate() throws Throwable {
      Thread currentThread=Thread.currentThread();
      Object inheritableThreadLocals=_INHERITABLE_THREAD_LOCALS_FIELD.get(currentThread);
      if (inheritableThreadLocals != null) {
        _INHERITABLE_THREAD_LOCALS_FIELD.set(currentThread,_CREATE_INHERITED_MAP_METHOD.invoke(null,inheritableThreadLocals));
      }
      Object threadLocals=_THREAD_LOCALS_FIELD.get(currentThread);
      _THREAD_LOCALS_FIELD.set(currentThread,null);
      try {
        statement.evaluate();
      }
  finally {
        _INHERITABLE_THREAD_LOCALS_FIELD.set(currentThread,inheritableThreadLocals);
        _THREAD_LOCALS_FIELD.set(currentThread,threadLocals);
      }
    }
  }
;
}
