{
  if (inheritUserGroups && PropsValues.ORGANIZATIONS_USER_GROUP_MEMBERSHIP_ENABLED) {
    User user=userPersistence.findByPrimaryKey(userId);
    LinkedHashMap<String,Object> organizationParams=new LinkedHashMap<String,Object>();
    organizationParams.put("usersOrgs",new Long(userId));
    return search(user.getCompanyId(),OrganizationConstants.ANY_PARENT_ORGANIZATION_ID,null,null,null,null,organizationParams,start,end);
  }
 else {
    return userPersistence.getOrganizations(userId,start,end);
  }
}
