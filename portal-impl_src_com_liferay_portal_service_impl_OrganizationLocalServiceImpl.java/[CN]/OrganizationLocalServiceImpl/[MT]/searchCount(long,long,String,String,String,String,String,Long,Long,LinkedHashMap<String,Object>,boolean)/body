{
  Indexer<?> indexer=IndexerRegistryUtil.nullSafeGetIndexer(Organization.class);
  if (!indexer.isIndexerEnabled() || !PropsValues.ORGANIZATIONS_SEARCH_WITH_INDEX || isUseCustomSQL(params)) {
    String parentOrganizationIdComparator=StringPool.EQUAL;
    if (parentOrganizationId == OrganizationConstants.ANY_PARENT_ORGANIZATION_ID) {
      parentOrganizationIdComparator=StringPool.NOT_EQUAL;
    }
    return organizationFinder.countByC_PO_N_T_S_C_Z_R_C(companyId,parentOrganizationId,parentOrganizationIdComparator,name,type,street,city,zip,regionId,countryId,params,andOperator);
  }
  try {
    SearchContext searchContext=buildSearchContext(companyId,parentOrganizationId,name,type,street,city,zip,regionId,countryId,params,andOperator,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
    return (int)indexer.searchCount(searchContext);
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
