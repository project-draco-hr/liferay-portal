{
  if (!ArrayUtil.contains(PropsValues.ORGANIZATIONS_TYPES,type)) {
    throw new OrganizationTypeException("Invalid organization type " + type);
  }
  if (parentOrganizationId == OrganizationConstants.DEFAULT_PARENT_ORGANIZATION_ID) {
    if (!OrganizationImpl.isRootable(type)) {
      throw new OrganizationParentException("Organization of type " + type + " cannot be a root");
    }
  }
 else {
    Organization parentOrganization=organizationPersistence.fetchByPrimaryKey(parentOrganizationId);
    if (parentOrganization == null) {
      throw new OrganizationParentException("Organization " + parentOrganizationId + " doesn't exist");
    }
    String[] childrenTypes=OrganizationImpl.getChildrenTypes(parentOrganization.getType());
    if (childrenTypes.length == 0) {
      throw new OrganizationParentException("Organization of type " + type + " cannot have children");
    }
    if ((companyId != parentOrganization.getCompanyId()) || (parentOrganizationId == organizationId)) {
      throw new OrganizationParentException();
    }
    if (!ArrayUtil.contains(childrenTypes,type)) {
      throw new OrganizationParentException("Type " + type + " not allowed as child of "+ parentOrganization.getType());
    }
  }
  if ((organizationId > 0) && (parentOrganizationId != OrganizationConstants.DEFAULT_PARENT_ORGANIZATION_ID)) {
    if (isParentOrganization(organizationId,parentOrganizationId)) {
      throw new OrganizationParentException();
    }
  }
  if (Validator.isNull(name)) {
    throw new OrganizationNameException();
  }
 else {
    Organization organization=organizationPersistence.fetchByC_N(companyId,name);
    if ((organization != null) && organization.getName().equalsIgnoreCase(name)) {
      if ((organizationId <= 0) || (organization.getOrganizationId() != organizationId)) {
        throw new DuplicateOrganizationException();
      }
    }
  }
  boolean countryRequired=GetterUtil.getBoolean(PropsUtil.get(PropsKeys.ORGANIZATIONS_COUNTRY_REQUIRED,new Filter(type)));
  if (countryRequired || (countryId > 0)) {
    countryPersistence.findByPrimaryKey(countryId);
  }
  listTypeService.validate(statusId,ListTypeConstants.ORGANIZATION_STATUS);
}
