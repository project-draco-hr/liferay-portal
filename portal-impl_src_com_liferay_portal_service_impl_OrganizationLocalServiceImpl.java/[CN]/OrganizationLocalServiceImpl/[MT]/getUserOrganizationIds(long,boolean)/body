{
  if (!includeAdministrative) {
    return userPersistence.getOrganizationPrimaryKeys(userId);
  }
  Set<Long> organizationsIds=SetUtil.fromArray(userPersistence.getOrganizationPrimaryKeys(userId));
  List<UserGroupRole> userGroupRoles=userGroupRoleLocalService.getUserGroupRoles(userId);
  for (  UserGroupRole userGroupRole : userGroupRoles) {
    Role role=userGroupRole.getRole();
    String roleName=role.getName();
    if (roleName.equals(RoleConstants.ORGANIZATION_ADMINISTRATOR) || roleName.equals(RoleConstants.ORGANIZATION_OWNER)) {
      Group group=userGroupRole.getGroup();
      organizationsIds.add(group.getOrganizationId());
    }
  }
  return ArrayUtil.toLongArray(organizationsIds);
}
