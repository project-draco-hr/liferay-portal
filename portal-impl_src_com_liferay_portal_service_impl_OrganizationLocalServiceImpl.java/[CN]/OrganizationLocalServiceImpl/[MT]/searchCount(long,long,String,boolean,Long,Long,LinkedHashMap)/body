{
  String parentOrganizationComparator=StringPool.EQUAL;
  if (parentOrganizationId == OrganizationImpl.ANY_PARENT_ORGANIZATION_ID) {
    parentOrganizationComparator=StringPool.NOT_EQUAL;
  }
  if (location) {
    if (parentOrganizationId == OrganizationImpl.ANY_PARENT_ORGANIZATION_ID) {
      parentOrganizationId=OrganizationImpl.DEFAULT_PARENT_ORGANIZATION_ID;
    }
    int count=0;
    if (parentOrganizationId == OrganizationImpl.DEFAULT_PARENT_ORGANIZATION_ID) {
      count=OrganizationFinder.countByKeywords(companyId,parentOrganizationId,parentOrganizationComparator,keywords,location,regionId,countryId,params);
    }
 else {
      Organization grandParentOrganization=OrganizationUtil.findByPrimaryKey(parentOrganizationId);
      long grandParentOrganizationId=grandParentOrganization.getParentOrganizationId();
      count=searchCount(companyId,grandParentOrganizationId,keywords,location,regionId,countryId,params);
      count+=OrganizationFinder.countByKeywords(companyId,parentOrganizationId,parentOrganizationComparator,keywords,location,regionId,countryId,params);
    }
    return count;
  }
 else {
    return OrganizationFinder.countByKeywords(companyId,parentOrganizationId,parentOrganizationComparator,keywords,location,regionId,countryId,params);
  }
}
