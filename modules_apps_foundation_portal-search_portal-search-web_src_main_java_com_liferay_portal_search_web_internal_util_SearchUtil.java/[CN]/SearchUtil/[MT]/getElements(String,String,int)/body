{
  List<Element> resultRows=new ArrayList<>();
  int totalRows=0;
  try {
    xml=XMLUtil.stripInvalidChars(xml);
    Document document=SAXReaderUtil.read(xml);
    Element rootElement=document.getRootElement();
    List<Element> elements=rootElement.elements("entry");
    totalRows=GetterUtil.getInteger(rootElement.elementText(OpenSearchUtil.getQName("totalResults",OpenSearchUtil.OS_NAMESPACE)));
    for (    Element element : elements) {
      try {
        long entryScopeGroupId=GetterUtil.getLong(element.elementText(OpenSearchUtil.getQName("scopeGroupId",OpenSearchUtil.LIFERAY_NAMESPACE)));
        if ((entryScopeGroupId != 0) && (inactiveGroupsCount > 0)) {
          Group entryGroup=GroupServiceUtil.getGroup(entryScopeGroupId);
          if (entryGroup.isLayout()) {
            entryGroup=GroupLocalServiceUtil.getGroup(entryGroup.getParentGroupId());
          }
          if (!entryGroup.isActive()) {
            totalRows--;
            continue;
          }
        }
        resultRows.add(element);
      }
 catch (      Exception e) {
        _log.error("Unable to retrieve individual search result for " + className,e);
        totalRows--;
      }
    }
  }
 catch (  Exception e) {
    _log.error("Unable to display content for " + className,e);
  }
  return new Tuple(resultRows,totalRows);
}
