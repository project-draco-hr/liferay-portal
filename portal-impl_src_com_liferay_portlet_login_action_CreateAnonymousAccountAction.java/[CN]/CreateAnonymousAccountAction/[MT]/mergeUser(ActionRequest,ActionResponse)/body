{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  ServiceContext serviceContext=ServiceContextFactory.getInstance(User.class.getName(),actionRequest);
  boolean autoPassword=ParamUtil.getBoolean(actionRequest,"autoPassword");
  String screenName=null;
  String emailAddress=ParamUtil.getString(actionRequest,"emailAddress");
  long facebookId=0;
  String openId=null;
  String firstName=null;
  String lastName=null;
  int prefixId=0;
  int suffixId=0;
  boolean male=true;
  int birthdayMonth=0;
  int birthdayDay=1;
  int birthdayYear=1970;
  String jobTitle=null;
  boolean sendEmail=ParamUtil.getBoolean(actionRequest,"sendEmail");
  User user=UserServiceUtil.mergeUser(themeDisplay.getCompanyId(),autoPassword,screenName,emailAddress,facebookId,openId,firstName,null,lastName,prefixId,suffixId,male,birthdayMonth,birthdayDay,birthdayYear,jobTitle,sendEmail,false,serviceContext);
  JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
  if (user.getStatus() == WorkflowConstants.STATUS_APPROVED) {
    jsonObject.put("userStatus","user_added");
  }
 else {
    jsonObject.put("userStatus","user_pending");
  }
  return jsonObject;
}
