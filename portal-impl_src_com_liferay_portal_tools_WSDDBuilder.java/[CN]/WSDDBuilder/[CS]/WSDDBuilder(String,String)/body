{
  try {
    _serverConfigFileName=serverConfigFileName;
    if (!FileUtil.exists(_serverConfigFileName)) {
      ClassLoader classLoader=getClass().getClassLoader();
      String serverConfigContent=StringUtil.read(classLoader,"com/liferay/portal/tools/dependencies/server-config.wsdd");
      FileUtil.write(_serverConfigFileName,serverConfigContent);
    }
    if (FileUtil.exists("docroot/WEB-INF/src/")) {
      _portalWsdd=false;
    }
    Document doc=SAXReaderUtil.read(new File(fileName),true);
    Element root=doc.getRootElement();
    String packagePath=root.attributeValue("package-path");
    Element portlet=root.element("portlet");
    Element namespace=root.element("namespace");
    if (portlet != null) {
      _portletShortName=portlet.attributeValue("short-name");
    }
 else {
      _portletShortName=namespace.getText();
    }
    if (_portalWsdd) {
      _outputPath="src/";
    }
 else {
      _outputPath="docroot/WEB-INF/src/";
    }
    _outputPath+=StringUtil.replace(packagePath,".","/") + "/service/http";
    _packagePath=packagePath;
    List<Element> entities=root.elements("entity");
    Iterator<Element> itr=entities.iterator();
    while (itr.hasNext()) {
      Element entity=itr.next();
      String entityName=entity.attributeValue("name");
      boolean remoteService=GetterUtil.getBoolean(entity.attributeValue("remote-service"),true);
      if (remoteService) {
        _createServiceWSDD(entityName);
        WSDDMerger.merge(_outputPath + "/" + entityName+ "Service_deploy.wsdd",_serverConfigFileName);
      }
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}
