{
  ds.scan();
  String[] allFiles=ds.getIncludedFiles();
  if (useCache == false) {
    return allFiles;
  }
  List<String> newFiles=new ArrayList<String>(allFiles.length);
  for (  String fileName : allFiles) {
    boolean isNewFile=true;
    File file=new File(fileName);
    String storedTime=timestamps.getProperty(fileName);
    if (storedTime != null) {
      String ts=timestamps.getProperty(fileName);
      long timestamp=ts == null ? 0 : Long.parseLong(ts);
      if (timestamp <= file.lastModified()) {
        isNewFile=false;
      }
    }
    if (isNewFile) {
      newFiles.add(fileName);
      timestamps.setProperty(fileName,String.valueOf(file.lastModified()));
    }
  }
  return newFiles.toArray(new String[newFiles.size()]);
}
