{
  if (actionRequest.getPortletMode().equals(PortletMode.EDIT)) {
    String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
    if (cmd.equals(Constants.UPDATE)) {
      String language=ParamUtil.getString(actionRequest,"language");
      PortletPreferences preferences=actionRequest.getPreferences();
      preferences.setValue("language",language);
      preferences.store();
      SessionMessages.add(actionRequest,getPortletConfig().getPortletName() + ".doEdit");
    }
  }
}
