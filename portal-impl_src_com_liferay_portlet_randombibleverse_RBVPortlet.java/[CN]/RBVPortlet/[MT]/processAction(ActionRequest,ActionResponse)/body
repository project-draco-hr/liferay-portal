{
  if (req.getPortletMode().equals(PortletMode.EDIT)) {
    String cmd=ParamUtil.getString(req,Constants.CMD);
    if (cmd.equals(Constants.UPDATE)) {
      String language=ParamUtil.getString(req,"language");
      PortletPreferences prefs=req.getPreferences();
      prefs.setValue("language",language);
      prefs.store();
      SessionMessages.add(req,getPortletConfig().getPortletName() + ".doEdit");
    }
  }
}
