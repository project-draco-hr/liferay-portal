{
  DynamicQuery dynamicQuery=DynamicQueryFactoryUtil.forClass(MBCategory.class,PortalClassLoaderUtil.getClassLoader());
  Projection minCategoryIdProjection=ProjectionFactoryUtil.min("categoryId");
  Projection maxCategoryIdProjection=ProjectionFactoryUtil.max("categoryId");
  ProjectionList projectionList=ProjectionFactoryUtil.projectionList();
  projectionList.add(minCategoryIdProjection);
  projectionList.add(maxCategoryIdProjection);
  dynamicQuery.setProjection(projectionList);
  addReindexCriteria(dynamicQuery,companyId);
  List<Object[]> results=MBCategoryLocalServiceUtil.dynamicQuery(dynamicQuery);
  Object[] minAndMaxCategoryIds=results.get(0);
  if ((minAndMaxCategoryIds[0] == null) || (minAndMaxCategoryIds[1] == null)) {
    return;
  }
  long minCategoryId=(Long)minAndMaxCategoryIds[0];
  long maxCategoryId=(Long)minAndMaxCategoryIds[1];
  long startCategoryId=minCategoryId;
  long endCategoryId=startCategoryId + DEFAULT_INTERVAL;
  while (startCategoryId <= maxCategoryId) {
    reindexCategories(companyId,startCategoryId,endCategoryId);
    startCategoryId=endCategoryId;
    endCategoryId+=DEFAULT_INTERVAL;
  }
}
