{
  Filter filter=bundleContext.createFilter("(&(objectClass=" + Store.class.getName() + ")(store.type="+ storeType+ "))");
  ServiceTracker<?,?> serviceTracker=new ServiceTracker<>(bundleContext,filter,null);
  serviceTracker.open();
  Object service=serviceTracker.waitForService(10000);
  serviceTracker.close();
  if (service == null) {
    configuration.delete();
    throw new IllegalStateException("Service " + storeType + " was not registered within 10 seconds");
  }
}
