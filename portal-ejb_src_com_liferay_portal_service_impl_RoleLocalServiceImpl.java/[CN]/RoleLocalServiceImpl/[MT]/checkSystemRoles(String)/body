{
  String[] systemRoles=PortalUtil.getSystemRoles();
  for (int i=0; i < systemRoles.length; i++) {
    try {
      RoleFinder.findByC_N(companyId,systemRoles[i]);
    }
 catch (    NoSuchRoleException nsre) {
      addRole(null,companyId,systemRoles[i],RoleImpl.TYPE_REGULAR);
    }
  }
  String[] systemCommunityRoles=PortalUtil.getSystemCommunityRoles();
  for (int i=0; i < systemCommunityRoles.length; i++) {
    try {
      RoleFinder.findByC_N(companyId,systemCommunityRoles[i]);
    }
 catch (    NoSuchRoleException nsre) {
      Role role=addRole(null,companyId,systemCommunityRoles[i],RoleImpl.TYPE_COMMUNITY);
      if (systemCommunityRoles[i].equals(RoleImpl.COMMUNITY_OWNER)) {
        List actions=ResourceActionsUtil.getModelResourceActions(Group.class.getName());
        for (int j=0; j < actions.size(); j++) {
          String action=(String)actions.get(j);
          PermissionLocalServiceUtil.setRolePermission(role.getRoleId(),role.getCompanyId(),Group.class.getName(),ResourceImpl.TYPE_CLASS,ResourceImpl.SCOPE_GROUP_TEMPLATE,String.valueOf(GroupImpl.DEFAULT_PARENT_GROUP_ID),action);
        }
      }
 else       if (systemCommunityRoles[i].equals(RoleImpl.COMMUNITY_MEMBER)) {
      }
 else       if (systemCommunityRoles[i].equals(RoleImpl.COMMUNITY_ADMINISTRATOR)) {
        PermissionLocalServiceUtil.setRolePermission(role.getRoleId(),role.getCompanyId(),Group.class.getName(),ResourceImpl.TYPE_CLASS,ResourceImpl.SCOPE_GROUP_TEMPLATE,String.valueOf(GroupImpl.DEFAULT_PARENT_GROUP_ID),ActionKeys.ASSIGN_USERS);
        PermissionLocalServiceUtil.setRolePermission(role.getRoleId(),role.getCompanyId(),Group.class.getName(),ResourceImpl.TYPE_CLASS,ResourceImpl.SCOPE_GROUP_TEMPLATE,String.valueOf(GroupImpl.DEFAULT_PARENT_GROUP_ID),ActionKeys.MANAGE_LAYOUTS);
        PermissionLocalServiceUtil.setRolePermission(role.getRoleId(),role.getCompanyId(),Group.class.getName(),ResourceImpl.TYPE_CLASS,ResourceImpl.SCOPE_GROUP_TEMPLATE,String.valueOf(GroupImpl.DEFAULT_PARENT_GROUP_ID),ActionKeys.UPDATE);
      }
    }
  }
}
