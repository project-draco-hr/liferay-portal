{
  if (PortalRunMode.isTestMode()) {
    String urlString=url.toExternalForm();
    String newURLString=StringUtil.replace(urlString,"://","://mirrors/");
    url=new URL(newURLString);
    if (_log.isDebugEnabled()) {
      _log.debug("Mapping url from :" + urlString + ", to :"+ newURLString);
    }
  }
  Path path=Paths.get(libPath,name);
  if (_log.isInfoEnabled()) {
    _log.info("Downloading " + url + " to "+ path);
  }
  try (InputStream inputStream=url.openStream()){
    Files.copy(inputStream,path,StandardCopyOption.REPLACE_EXISTING);
  }
   if (_log.isInfoEnabled()) {
    _log.info("Downloaded " + url + " to "+ path);
  }
  URI uri=path.toUri();
  if (_log.isInfoEnabled()) {
    _log.info("Installing " + path + " to "+ urlClassLoader);
  }
  _addURLMethod.invoke(urlClassLoader,uri.toURL());
  if (_log.isInfoEnabled()) {
    _log.info("Installed " + path + " to "+ urlClassLoader);
  }
}
