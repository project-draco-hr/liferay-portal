{
  Iterator<Bundle> iterator=bundles.iterator();
  while (iterator.hasNext()) {
    Bundle bundle=iterator.next();
    if ((state > 0) && (bundle.getState() != state)) {
      iterator.remove();
      continue;
    }
    Dictionary<String,String> headers=bundle.getHeaders();
    String bundleType=GetterUtil.getString(headers.get("Liferay-Releng-Bundle-Type"));
    if (bundleType.equals("lpkg")) {
      iterator.remove();
    }
  }
}
