{
  AgentRequest agentRequest=(AgentRequest)request.getAttribute(SPIAgent.SPI_AGENT_REQUEST);
  AgentResponse agentResponse=(AgentResponse)request.getAttribute(SPIAgent.SPI_AGENT_RESPONSE);
  HttpSession httpSession=request.getSession();
  agentRequest.populateSessionAttributes(httpSession);
  PrincipalThreadLocal.setPassword((String)httpSession.getAttribute(WebKeys.USER_PASSWORD));
  try {
    _doExecute(request,response);
  }
  finally {
    agentResponse.captureRequestSessionAttributes(request);
    request.setAttribute(PORTAL_RESILIENCY_ACTION,Boolean.TRUE);
  }
  return null;
}
