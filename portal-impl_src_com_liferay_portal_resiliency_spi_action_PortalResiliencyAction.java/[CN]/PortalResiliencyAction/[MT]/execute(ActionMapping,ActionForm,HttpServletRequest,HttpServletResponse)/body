{
  AgentRequest agentRequest=(AgentRequest)request.getAttribute(WebKeys.SPI_AGENT_REQUEST);
  HttpSession session=request.getSession();
  agentRequest.populateSessionAttributes(session);
  PrincipalThreadLocal.setPassword((String)session.getAttribute(WebKeys.USER_PASSWORD));
  try {
    _doExecute(request,response);
  }
  finally {
    AgentResponse agentResponse=(AgentResponse)request.getAttribute(WebKeys.SPI_AGENT_RESPONSE);
    agentResponse.captureRequestSessionAttributes(request);
    request.setAttribute(WebKeys.PORTAL_RESILIENCY_ACTION,Boolean.TRUE);
  }
  return null;
}
