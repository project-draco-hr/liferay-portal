{
  DynamicQuery dynamicQuery=_resourcePermissionLocalService.dynamicQuery();
  Property nameProperty=PropertyFactoryUtil.forName("name");
  dynamicQuery.add(nameProperty.eq(new String(oldRootPortletId)));
  List<ResourcePermission> resourcePermissions=_resourcePermissionLocalService.dynamicQuery(dynamicQuery);
  for (  ResourcePermission resourcePermission : resourcePermissions) {
    long total=getResourcePermissionCount(resourcePermission.getCompanyId(),newRootPortletId,resourcePermission.getScope(),resourcePermission.getRoleId());
    if (total > 0) {
      _resourcePermissionLocalService.deleteResourcePermission(resourcePermission);
    }
  }
}
