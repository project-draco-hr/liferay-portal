{
  NodeBuilder nodeBuilder=NodeBuilder.nodeBuilder();
  builder.classLoader(getClass().getClassLoader());
  builder.loadFromClasspath(getConfigFileName());
  nodeBuilder.settings(builder);
  nodeBuilder.clusterName(getClusterName());
  _node=nodeBuilder.node();
  StopWatch stopWatch=new StopWatch();
  stopWatch.start();
  if (_log.isDebugEnabled()) {
    _log.debug("Starting embedded Elasticsearch cluster " + getClusterName());
  }
  _node.start();
  Client client=_node.client();
  if (_log.isDebugEnabled()) {
    stopWatch.stop();
    _log.debug("Finished starting " + getClusterName() + " in "+ stopWatch.getTime()+ " ms");
  }
  return client;
}
