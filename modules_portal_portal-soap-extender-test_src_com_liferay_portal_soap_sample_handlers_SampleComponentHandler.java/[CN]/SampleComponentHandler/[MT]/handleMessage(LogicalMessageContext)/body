{
  try {
    boolean outboundMessage=(boolean)context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);
    if (!outboundMessage) {
      return true;
    }
    Source streamSource=new StreamSource(_templateUrl.openStream());
    Transformer transformer=_transformerFactory.newTransformer(streamSource);
    LogicalMessage message=context.getMessage();
    Source payload=message.getPayload();
    DOMResult domResult=new DOMResult();
    transformer.transform(payload,domResult);
    message.setPayload(new DOMSource(domResult.getNode()));
    return true;
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
