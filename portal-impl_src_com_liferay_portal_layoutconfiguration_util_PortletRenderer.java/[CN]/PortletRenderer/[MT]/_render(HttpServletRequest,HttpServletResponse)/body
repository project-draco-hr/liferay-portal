{
  BufferCacheServletResponse bufferCacheServletResponse=new BufferCacheServletResponse(response);
  Object portletParallelRender=request.getAttribute(WebKeys.PORTLET_PARALLEL_RENDER);
  Object lock=request.getAttribute(WebKeys.PARALLEL_RENDERING_MERGE_LOCK);
  request.setAttribute(WebKeys.PORTLET_PARALLEL_RENDER,Boolean.FALSE);
  request.setAttribute(WebKeys.PARALLEL_RENDERING_MERGE_LOCK,null);
  try {
    PortletContainerUtil.render(request,bufferCacheServletResponse,_portlet);
    return bufferCacheServletResponse.getStringBundler();
  }
 catch (  IOException ioe) {
    throw new PortletContainerException(ioe);
  }
 finally {
    request.setAttribute(WebKeys.PORTLET_PARALLEL_RENDER,portletParallelRender);
    request.setAttribute(WebKeys.PARALLEL_RENDERING_MERGE_LOCK,lock);
  }
}
