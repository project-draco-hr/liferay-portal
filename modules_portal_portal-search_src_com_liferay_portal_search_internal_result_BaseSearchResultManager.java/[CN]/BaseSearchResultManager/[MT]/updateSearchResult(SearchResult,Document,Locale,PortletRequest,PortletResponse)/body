{
  long classNameId=GetterUtil.getLong(document.get(Field.CLASS_NAME_ID));
  long classPK=GetterUtil.getLong(document.get(Field.CLASS_PK));
  if ((classPK > 0) && (classNameId > 0)) {
    addRelatedModel(searchResult,document,locale,portletRequest,portletResponse);
    if (searchResult.getSummary() == null) {
      SummaryFactory summaryFactory=getSummaryFactory();
      searchResult.setSummary(summaryFactory.getSummary(searchResult.getClassName(),searchResult.getClassPK(),locale));
    }
  }
 else {
    String entryClassName=GetterUtil.getString(document.get(Field.ENTRY_CLASS_NAME));
    long entryClassPK=GetterUtil.getLong(document.get(Field.ENTRY_CLASS_PK));
    SummaryFactory summaryFactory=getSummaryFactory();
    searchResult.setSummary(summaryFactory.getSummary(document,entryClassName,entryClassPK,locale,portletRequest,portletResponse));
  }
}
