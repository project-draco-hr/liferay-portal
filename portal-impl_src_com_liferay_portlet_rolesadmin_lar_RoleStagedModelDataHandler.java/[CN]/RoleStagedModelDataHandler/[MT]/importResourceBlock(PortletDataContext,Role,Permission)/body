{
  String actionId=permission.getActionId();
  long sourceGroupId=Long.parseLong(permission.getPrimKey());
  int scope=permission.getScope();
  String name=permission.getName();
  if (scope == ResourceConstants.SCOPE_COMPANY) {
    ResourceBlockLocalServiceUtil.addCompanyScopePermission(portletDataContext.getCompanyId(),name,importedRole.getRoleId(),actionId);
  }
 else   if (scope == ResourceConstants.SCOPE_GROUP_TEMPLATE) {
    ResourceBlockLocalServiceUtil.addGroupScopePermission(portletDataContext.getCompanyId(),GroupConstants.DEFAULT_PARENT_GROUP_ID,name,importedRole.getRoleId(),actionId);
  }
 else   if (scope == ResourceConstants.SCOPE_GROUP) {
    long groupId=portletDataContext.getCompanyGroupId();
    if (sourceGroupId == portletDataContext.getSourceUserPersonalSiteGroupId()) {
      groupId=portletDataContext.getUserPersonalSiteGroupId();
    }
    ResourceBlockLocalServiceUtil.addGroupScopePermission(portletDataContext.getCompanyId(),groupId,name,importedRole.getRoleId(),actionId);
  }
 else {
    if (_log.isDebugEnabled()) {
      _log.debug("Individual scoped permission import not supported: " + permission.toString());
    }
  }
}
