{
  String remoteUser=getRemoteUser();
  if (remoteUser == null) {
    return false;
  }
 else {
    String companyId=PortalUtil.getCompanyId(_req);
    try {
      long userId=GetterUtil.getLong(remoteUser);
      return RoleLocalServiceUtil.hasUserRole(userId,companyId,role);
    }
 catch (    Exception e) {
      _log.warn(e);
    }
    return _req.isUserInRole(role);
  }
}
