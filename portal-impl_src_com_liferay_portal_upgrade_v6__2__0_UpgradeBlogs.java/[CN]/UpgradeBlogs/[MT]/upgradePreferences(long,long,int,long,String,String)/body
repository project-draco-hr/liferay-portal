{
  PortletPreferences portletPreferences=PortletPreferencesFactoryUtil.fromXML(companyId,ownerId,ownerType,plid,portletId,xml);
  String rssFormat=GetterUtil.getString(portletPreferences.getValue("rssFormat",null));
  if (Validator.isNotNull(rssFormat)) {
    String rssFormatType=RSSUtil.getFormatType(rssFormat);
    double rssFormatVersion=RSSUtil.getFormatVersion(rssFormat);
    String rssFeedType=RSSUtil.getFeedType(rssFormatType,rssFormatVersion);
    portletPreferences.setValue("rssFeedType",rssFeedType);
  }
  portletPreferences.reset("rssFormat");
  return PortletPreferencesFactoryUtil.toXML(portletPreferences);
}
