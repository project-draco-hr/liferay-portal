{
  List<Long> ancestorFolderIds=new ArrayList<>();
  if (folderId != JournalFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
    JournalFolder folder=JournalFolderLocalServiceUtil.getFolder(folderId);
    ancestorFolderIds.add(folderId);
    if (recursive) {
      ancestorFolderIds.addAll(folder.getAncestorFolderIds());
      ancestorFolderIds.add(groupId);
    }
  }
 else {
    ancestorFolderIds.add(groupId);
  }
  return SubscriptionLocalServiceUtil.isSubscribed(companyId,userId,JournalFolder.class.getName(),ArrayUtil.toLongArray(ancestorFolderIds));
}
