{
  String layoutTemplateId=getParameter(actionRequest,"layoutTemplateId");
  String portletResource=ParamUtil.getString(actionRequest,"portletResource");
  NestedPortletsDisplayContext nestedPortletsDisplayContext=new NestedPortletsDisplayContext(PortalUtil.getHttpServletRequest(actionRequest));
  String oldLayoutTemplateId=nestedPortletsDisplayContext.getLayoutTemplateId();
  if (!oldLayoutTemplateId.equals(layoutTemplateId)) {
    reorganizeNestedColumns(actionRequest,portletResource,layoutTemplateId,oldLayoutTemplateId);
  }
  super.processAction(portletConfig,actionRequest,actionResponse);
}
