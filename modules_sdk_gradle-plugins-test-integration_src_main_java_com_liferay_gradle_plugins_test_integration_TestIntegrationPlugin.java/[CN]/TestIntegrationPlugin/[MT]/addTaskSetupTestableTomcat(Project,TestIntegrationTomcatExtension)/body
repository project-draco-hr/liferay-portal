{
  final SetupTestableTomcatTask setupTestableTomcatTask=GradleUtil.addTask(project,SETUP_TESTABLE_TOMCAT_TASK_NAME,SetupTestableTomcatTask.class);
  setupTestableTomcatTask.onlyIf(new Spec<Task>(){
    @Override public boolean isSatisfiedBy(    Task task){
      _startedAppServersReentrantLock.lock();
      try {
        if (_startedAppServerBinDirs.contains(setupTestableTomcatTask.getBinDir())) {
          return false;
        }
        return true;
      }
  finally {
        _startedAppServersReentrantLock.unlock();
      }
    }
  }
);
  setupTestableTomcatTask.setDescription("Configures the local Liferay Tomcat bundle to run integration " + "tests.");
  setupTestableTomcatTask.setDir(new Callable<File>(){
    @Override public File call() throws Exception {
      return testIntegrationTomcatExtension.getDir();
    }
  }
);
  setupTestableTomcatTask.setModuleFrameworkBaseDir(new Callable<File>(){
    @Override public File call() throws Exception {
      File dir=testIntegrationTomcatExtension.getLiferayHome();
      if (dir != null) {
        dir=new File(dir,"osgi");
      }
      return dir;
    }
  }
);
  configureJmxRemotePortSpec(setupTestableTomcatTask,testIntegrationTomcatExtension);
  configureManagerSpec(setupTestableTomcatTask,testIntegrationTomcatExtension);
  return setupTestableTomcatTask;
}
