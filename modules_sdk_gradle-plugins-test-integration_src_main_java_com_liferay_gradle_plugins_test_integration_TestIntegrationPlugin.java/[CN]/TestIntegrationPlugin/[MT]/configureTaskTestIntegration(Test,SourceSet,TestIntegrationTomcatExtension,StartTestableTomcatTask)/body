{
  Closure<Task> closure=new Closure<Task>(null){
    @SuppressWarnings("unused") public Task doCall(    Test test){
      FileTree candidateClassFiles=test.getCandidateClassFiles();
      File srcDir=getSrcDir(testIntegrationSourceSet.getResources());
      File skipManagedAppServerFile=new File(srcDir,_SKIP_MANAGED_APP_SERVER_FILE_NAME);
      if (!candidateClassFiles.isEmpty() && !skipManagedAppServerFile.exists()) {
        return startTestableTomcatTask;
      }
      return null;
    }
  }
;
  test.dependsOn(closure);
  test.jvmArgs("-Djava.net.preferIPv4Stack=true","-Dliferay.mode=test","-Duser.timezone=GMT");
  Project project=test.getProject();
  project.afterEvaluate(new Action<Project>(){
    @Override public void execute(    Project project){
      Map<String,Object> systemProperties=test.getSystemProperties();
      if (!systemProperties.containsKey("app.server.tomcat.dir")) {
        systemProperties.put("app.server.tomcat.dir",FileUtil.getAbsolutePath(testIntegrationTomcatExtension.getDir()));
      }
    }
  }
);
}
