{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  PortletDisplay portletDisplay=themeDisplay.getPortletDisplay();
  String portletBreadcrumbKey=WebKeys.PORTLET_BREADCRUMBS;
  if (Validator.isNotNull(portletDisplay.getId()) && !themeDisplay.isPortletDisplayFocused()) {
    portletBreadcrumbKey=WebKeys.PORTLET_BREADCRUMBS + StringPool.UNDERLINE + portletDisplay.getId();
  }
  List<BreadcrumbEntry> breadcrumbEntries=(List<BreadcrumbEntry>)request.getAttribute(portletBreadcrumbKey);
  if (breadcrumbEntries != null) {
    for (    BreadcrumbEntry breadcrumbEntry : breadcrumbEntries) {
      if (title.equals(breadcrumbEntry.getTitle())) {
        return;
      }
    }
  }
  PortalUtil.addPortletBreadcrumbEntry(request,title,url);
}
