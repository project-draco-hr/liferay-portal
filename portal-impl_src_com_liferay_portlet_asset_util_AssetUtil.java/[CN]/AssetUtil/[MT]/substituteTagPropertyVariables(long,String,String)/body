{
  String result=s;
  AssetTag tag=null;
  if (tagName != null) {
    try {
      tag=AssetTagLocalServiceUtil.getTag(groupId,tagName);
    }
 catch (    NoSuchTagException nsee) {
    }
  }
  if (tag != null) {
    List<AssetTagProperty> tagProperties=AssetTagPropertyLocalServiceUtil.getTagProperties(tag.getTagId());
    for (    AssetTagProperty tagProperty : tagProperties) {
      result=StringUtil.replace(result,"[$" + tagProperty.getKey() + "$]",tagProperty.getValue());
    }
  }
  return StringUtil.stripBetween(result,"[$","$]");
}
