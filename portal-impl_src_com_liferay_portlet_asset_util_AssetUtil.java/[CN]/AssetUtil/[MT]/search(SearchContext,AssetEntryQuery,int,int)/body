{
  Indexer searcher=AssetSearcher.getInstance();
  AssetSearcher assetSearcher=(AssetSearcher)searcher;
  assetSearcher.setAssetEntryQuery(assetEntryQuery);
  Layout layout=assetEntryQuery.getLayout();
  if (layout != null) {
    searchContext.setAttribute(Field.LAYOUT_UUID,layout.getUuid());
  }
  String ddmStructureFieldName=(String)assetEntryQuery.getAttribute("ddmStructureFieldName");
  String ddmStructureFieldValue=(String)assetEntryQuery.getAttribute("ddmStructureFieldValue");
  if (Validator.isNotNull(ddmStructureFieldName) && Validator.isNotNull(ddmStructureFieldValue)) {
    searchContext.setAttribute("ddmStructureFieldName",ddmStructureFieldName);
    searchContext.setAttribute("ddmStructureFieldValue",ddmStructureFieldValue);
  }
  searchContext.setClassTypeIds(assetEntryQuery.getClassTypeIds());
  searchContext.setEnd(end);
  searchContext.setGroupIds(assetEntryQuery.getGroupIds());
  if (Validator.isNotNull(assetEntryQuery.getKeywords())) {
    searchContext.setLike(true);
  }
  searchContext.setSorts(getSorts(assetEntryQuery,searchContext.getLocale()));
  searchContext.setStart(start);
  return assetSearcher.search(searchContext);
}
