{
  try {
    Callable<Boolean> callable=new Callable<Boolean>(){
      @Override public Boolean call() throws Exception {
        doTransactionalCommand(portletRequest,portletResponse);
        return SessionErrors.isEmpty(portletRequest);
      }
    }
;
    return TransactionInvokerUtil.invoke(_transactionAttribute,callable);
  }
 catch (  Throwable t) {
    if (t instanceof PortletException) {
      throw (PortletException)t;
    }
    throw new PortletException(t);
  }
}
