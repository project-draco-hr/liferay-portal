{
  boolean isNew=lock.isNew();
  for (  ModelListener<Lock> listener : listeners) {
    if (isNew) {
      listener.onBeforeCreate(lock);
    }
 else {
      listener.onBeforeUpdate(lock);
    }
  }
  lock=updateImpl(lock,merge);
  for (  ModelListener<Lock> listener : listeners) {
    if (isNew) {
      listener.onAfterCreate(lock);
    }
 else {
      listener.onAfterUpdate(lock);
    }
  }
  return lock;
}
