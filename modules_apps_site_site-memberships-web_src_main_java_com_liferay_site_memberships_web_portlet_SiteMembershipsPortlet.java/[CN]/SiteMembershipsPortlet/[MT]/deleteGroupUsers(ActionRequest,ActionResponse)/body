{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long groupId=themeDisplay.getSiteGroupId();
  long[] removeUserIds=null;
  long removeUserId=ParamUtil.getLong(actionRequest,"removeUserId");
  if (removeUserId > 0) {
    removeUserIds=new long[]{removeUserId};
  }
 else {
    removeUserIds=ParamUtil.getLongValues(actionRequest,"rowIds");
  }
  removeUserIds=filterRemoveUserIds(groupId,removeUserIds);
  ServiceContext serviceContext=ServiceContextFactory.getInstance(actionRequest);
  _userService.unsetGroupUsers(groupId,removeUserIds,serviceContext);
  LiveUsers.leaveGroup(themeDisplay.getCompanyId(),groupId,removeUserIds);
}
