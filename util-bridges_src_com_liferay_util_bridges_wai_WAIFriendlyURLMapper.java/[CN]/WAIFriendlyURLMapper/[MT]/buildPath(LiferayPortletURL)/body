{
  String portletId=portletURL.getPortletId();
  String prefix=portletId;
  int pos=portletId.indexOf(WAR_SEPARATOR);
  if (pos != -1) {
    prefix=portletId.substring(0,pos);
  }
  String appUrl=GetterUtil.getString(portletURL.getParameter("appURL"));
  portletURL.addParameterIncludedInPath("p_p_id");
  return StringPool.SLASH + _MAPPING + StringPool.SLASH+ prefix+ StringPool.SLASH+ appUrl;
}
