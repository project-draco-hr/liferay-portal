{
  StringMaker sm=new StringMaker();
  sm.append("update MBMessage as childMessage ");
  sm.append("inner join MBMessage as parentMessage on ");
  sm.append("childMessage.parentMessageId = parentMessage.messageId ");
  sm.append("set childMessage.categoryId = parentMessage.categoryId, ");
  sm.append("childMessage.threadId = parentMessage.threadId ");
  sm.append("where parentMessage.categoryId != childMessage.categoryId ");
  sm.append("or parentMessage.threadId != childMessage.threadId");
  String sql=sm.toString();
  while (getMessageIdsCount() > 0) {
    runSQL(sql);
  }
}
