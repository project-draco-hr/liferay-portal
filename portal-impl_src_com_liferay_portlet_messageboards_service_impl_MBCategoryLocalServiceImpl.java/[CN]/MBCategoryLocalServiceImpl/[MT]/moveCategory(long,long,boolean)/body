{
  MBCategory category=mbCategoryPersistence.findByPrimaryKey(categoryId);
  parentCategoryId=getParentCategoryId(category,parentCategoryId);
  if (mergeWithParentCategory && (categoryId != parentCategoryId) && (parentCategoryId != MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID)&& (parentCategoryId != MBCategoryConstants.DISCUSSION_CATEGORY_ID)) {
    mergeCategories(category,parentCategoryId);
    return category;
  }
  category.setParentCategoryId(parentCategoryId);
  return mbCategoryPersistence.update(category);
}
