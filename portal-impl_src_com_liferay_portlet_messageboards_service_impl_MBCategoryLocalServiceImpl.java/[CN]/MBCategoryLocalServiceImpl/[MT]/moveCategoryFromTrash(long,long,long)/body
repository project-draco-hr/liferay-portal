{
  MBCategory category=mbCategoryPersistence.findByPrimaryKey(categoryId);
  try {
    trashEntryLocalService.getEntry(MBCategory.class.getName(),categoryId);
    restoreCategoryFromTrash(userId,categoryId);
  }
 catch (  NoSuchEntryException nsee) {
    updateStatus(userId,categoryId,category.getStatus());
    User user=userPersistence.findByPrimaryKey(userId);
    List<Object> categoriesAndThreads=getCategoriesAndThreads(category.getGroupId(),categoryId);
    TrashEntry trashEntry=category.getTrashEntry();
    restoreDependentFromTrash(user,categoriesAndThreads,trashEntry.getEntryId());
  }
  return moveCategory(categoryId,newCategoryId,false);
}
