{
  User user=userPersistence.findByPrimaryKey(userId);
  MBCategory category=mbCategoryPersistence.findByPrimaryKey(categoryId);
  category.setStatus(status);
  category.setStatusByUserId(user.getUserId());
  category.setStatusByUserName(user.getFullName());
  category.setStatusDate(new Date());
  mbCategoryPersistence.update(category);
  List<Object> categoriesAndThreads=getCategoriesAndThreads(category.getGroupId(),categoryId);
  updateDependentStatus(user,categoriesAndThreads,status);
  if (status == WorkflowConstants.STATUS_IN_TRASH) {
    trashEntryLocalService.addTrashEntry(userId,category.getGroupId(),MBCategory.class.getName(),categoryId,WorkflowConstants.STATUS_APPROVED,null,null);
  }
  return category;
}
