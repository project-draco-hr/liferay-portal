{
  for (  Object object : categoriesAndThreads) {
    if (object instanceof MBThread) {
      MBThread thread=(MBThread)object;
      int oldStatus=thread.getStatus();
      if (oldStatus == WorkflowConstants.STATUS_IN_TRASH) {
        continue;
      }
      thread.setStatus(WorkflowConstants.STATUS_IN_TRASH);
      mbThreadPersistence.update(thread);
      if (oldStatus != WorkflowConstants.STATUS_APPROVED) {
        trashVersionLocalService.addTrashVersion(trashEntryId,MBThread.class.getName(),thread.getThreadId(),oldStatus,null);
      }
      mbThreadLocalService.moveDependentsToTrash(thread.getGroupId(),thread.getThreadId(),trashEntryId);
      Indexer<MBThread> indexer=IndexerRegistryUtil.nullSafeGetIndexer(MBThread.class);
      indexer.reindex(thread);
    }
 else     if (object instanceof MBCategory) {
      MBCategory category=(MBCategory)object;
      if (category.isInTrash()) {
        continue;
      }
      int oldStatus=category.getStatus();
      category.setStatus(WorkflowConstants.STATUS_IN_TRASH);
      mbCategoryPersistence.update(category);
      if (oldStatus != WorkflowConstants.STATUS_APPROVED) {
        trashVersionLocalService.addTrashVersion(trashEntryId,MBCategory.class.getName(),category.getCategoryId(),oldStatus,null);
      }
      moveDependentsToTrash(user,getCategoriesAndThreads(category.getGroupId(),category.getCategoryId()),trashEntryId);
    }
  }
}
