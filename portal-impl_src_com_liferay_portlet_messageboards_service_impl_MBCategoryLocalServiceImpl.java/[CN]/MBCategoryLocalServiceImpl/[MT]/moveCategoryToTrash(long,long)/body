{
  MBCategory category=mbCategoryPersistence.findByPrimaryKey(categoryId);
  if (category.isInTrash()) {
    throw new TrashEntryException();
  }
  category=updateStatus(userId,categoryId,WorkflowConstants.STATUS_IN_TRASH);
  TrashEntry trashEntry=trashEntryLocalService.addTrashEntry(userId,category.getGroupId(),MBCategory.class.getName(),categoryId,category.getUuid(),null,WorkflowConstants.STATUS_APPROVED,null,null);
  User user=userPersistence.findByPrimaryKey(userId);
  List<Object> categoriesAndThreads=getCategoriesAndThreads(category.getGroupId(),categoryId);
  moveDependentsToTrash(user,categoriesAndThreads,trashEntry.getEntryId());
  return category;
}
