{
  List<MBCategory> categories=mbCategoryPersistence.findByG_P(category.getGroupId(),category.getCategoryId());
  for (  MBCategory curCategory : categories) {
    deleteCategory(curCategory);
  }
  try {
    Indexer.deleteMessages(category.getCompanyId(),category.getCategoryId());
  }
 catch (  SearchException se) {
    _log.error("Deleting index " + category.getCategoryId(),se);
  }
  mbThreadLocalService.deleteThreads(category.getCategoryId());
  resourceLocalService.deleteResource(category.getCompanyId(),MBCategory.class.getName(),ResourceConstants.SCOPE_INDIVIDUAL,category.getCategoryId());
  try {
    MBMailing mbMailing=mbMailingLocalService.getMailingByCategory(category.getCategoryId());
    mbMailingLocalService.deleteMailing(mbMailing);
  }
 catch (  NoSuchMailingException e) {
  }
  mbCategoryPersistence.remove(category.getCategoryId());
}
