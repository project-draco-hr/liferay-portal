{
  Iterator itr=mbCategoryPersistence.findByG_P(category.getGroupId(),category.getCategoryId()).iterator();
  while (itr.hasNext()) {
    MBCategory curCategory=(MBCategory)itr.next();
    deleteCategory(curCategory);
  }
  try {
    Indexer.deleteMessages(category.getCompanyId(),category.getCategoryId());
  }
 catch (  IOException ioe) {
    _log.error("Deleting index " + category.getCategoryId(),ioe);
  }
catch (  ParseException pe) {
    _log.error("Deleting index " + category.getCategoryId(),pe);
  }
  mbThreadLocalService.deleteThreads(category.getCategoryId());
  resourceLocalService.deleteResource(category.getCompanyId(),MBCategory.class.getName(),ResourceImpl.SCOPE_INDIVIDUAL,category.getCategoryId());
  mbCategoryPersistence.remove(category.getCategoryId());
}
