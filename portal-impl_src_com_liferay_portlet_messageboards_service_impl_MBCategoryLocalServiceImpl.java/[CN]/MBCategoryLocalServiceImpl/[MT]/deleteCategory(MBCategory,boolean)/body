{
  List<MBCategory> categories=mbCategoryPersistence.findByG_P(category.getGroupId(),category.getCategoryId());
  for (  MBCategory curCategory : categories) {
    if (includeTrashedEntries || !curCategory.isInTrash()) {
      deleteCategory(curCategory,includeTrashedEntries);
    }
  }
  Indexer indexer=IndexerRegistryUtil.nullSafeGetIndexer(MBMessage.class);
  indexer.delete(category);
  mbThreadLocalService.deleteThreads(category.getGroupId(),category.getCategoryId(),includeTrashedEntries);
  try {
    mbMailingListLocalService.deleteCategoryMailingList(category.getGroupId(),category.getCategoryId());
  }
 catch (  NoSuchMailingListException nsmle) {
  }
  subscriptionLocalService.deleteSubscriptions(category.getCompanyId(),MBCategory.class.getName(),category.getCategoryId());
  expandoValueLocalService.deleteValues(MBCategory.class.getName(),category.getCategoryId());
  resourceLocalService.deleteResource(category.getCompanyId(),MBCategory.class.getName(),ResourceConstants.SCOPE_INDIVIDUAL,category.getCategoryId());
  trashEntryLocalService.deleteEntry(MBCategory.class.getName(),category.getCategoryId());
  mbCategoryPersistence.remove(category);
  systemEventLocalService.addSystemEvent(category.getGroupId(),MBCategory.class.getName(),category.getCategoryId(),category.getUuid(),SystemEventConstants.TYPE_DELETE);
}
