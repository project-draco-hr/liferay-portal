{
  HttpServletResponse wrappedResponse=response;
  while (wrappedResponse instanceof HttpServletResponseWrapper) {
    if (wrappedResponse instanceof HttpOnlyCookieServletResponse) {
      return response;
    }
    HttpServletResponseWrapper httpServletResponseWrapper=(HttpServletResponseWrapper)wrappedResponse;
    wrappedResponse=(HttpServletResponse)httpServletResponseWrapper.getResponse();
  }
  return new HttpOnlyCookieServletResponse(response);
}
