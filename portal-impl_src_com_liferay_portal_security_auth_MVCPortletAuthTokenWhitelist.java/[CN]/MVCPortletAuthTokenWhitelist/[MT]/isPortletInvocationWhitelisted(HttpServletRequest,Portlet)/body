{
  String portletId=portlet.getPortletId();
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  if (themeDisplay.isLifecycleAction()) {
    String[] mvcActionCommandNames=getMVCActionCommandNames(request,portletId);
    return _containsAll(portletId,_portletInvocationWhitelistAction,mvcActionCommandNames);
  }
 else   if (themeDisplay.isLifecycleRender()) {
    String namespace=PortalUtil.getPortletNamespace(portletId);
    String mvcRenderCommandName=ParamUtil.getString(request,namespace + "mvcRenderCommandName");
    return _contains(portletId,_portletInvocationWhitelistRender,mvcRenderCommandName);
  }
 else   if (themeDisplay.isLifecycleResource()) {
    String ppid=ParamUtil.getString(request,"p_p_id");
    if (!portletId.equals(ppid)) {
      return false;
    }
    String mvcResourceCommandName=ParamUtil.getString(request,"p_p_resource_id");
    return _contains(portletId,_portletInvocationWhitelistResource,mvcResourceCommandName);
  }
  return false;
}
