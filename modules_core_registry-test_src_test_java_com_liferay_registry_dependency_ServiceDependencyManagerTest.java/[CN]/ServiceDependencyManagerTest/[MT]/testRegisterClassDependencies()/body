{
  Registry registry=RegistryUtil.getRegistry();
  ServiceDependencyManager serviceDependencyManager=new ServiceDependencyManager();
  final AtomicBoolean dependenciesSatisfied=new AtomicBoolean(false);
  serviceDependencyManager.addServiceDependencyListener(new ServiceDependencyListener(){
    @Override public void dependenciesFulfilled(){
      dependenciesSatisfied.set(true);
    }
    @Override public void destroy(){
    }
  }
);
  serviceDependencyManager.registerDependencies(TrackedOne.class,TrackedTwo.class);
  registry.registerService(TrackedOne.class,new TrackedOne());
  registry.registerService(TrackedTwo.class,new TrackedTwo(new TrackedOne()));
  Thread.sleep(100);
  Assert.assertTrue(dependenciesSatisfied.get());
}
