{
  Map<Long,Long> folderIds=(Map<Long,Long>)portletDataContext.getNewPrimaryKeysMap(BookmarksFolder.class);
  long parentFolderId=MapUtil.getLong(folderIds,folder.getParentFolderId(),folder.getParentFolderId());
  BookmarksFolder importedFolder=(BookmarksFolder)folder.clone();
  importedFolder.setGroupId(portletDataContext.getScopeGroupId());
  importedFolder.setParentFolderId(parentFolderId);
  BookmarksFolder existingFolder=_stagedModelRepository.fetchStagedModelByUuidAndGroupId(folder.getUuid(),portletDataContext.getScopeGroupId());
  if (existingFolder == null) {
    importedFolder=_stagedModelRepository.addStagedModel(portletDataContext,importedFolder);
  }
 else {
    folder.setFolderId(existingFolder.getFolderId());
    importedFolder=_stagedModelRepository.updateStagedModel(portletDataContext,importedFolder);
  }
  portletDataContext.importClassedModel(folder,importedFolder);
}
