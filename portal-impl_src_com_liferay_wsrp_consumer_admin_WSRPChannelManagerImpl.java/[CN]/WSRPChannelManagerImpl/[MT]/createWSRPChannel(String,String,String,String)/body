{
  try {
    String portletId=PortalUtil.getJsSafePortletId(channelName);
    validatePortletId(portletId);
    Portlet portlet=PortletLocalServiceUtil.newPortlet(CompanyConstants.SYSTEM,portletId);
    portlet.setPortletId(portletId);
    portlet.setTimestamp(System.currentTimeMillis());
    portlet.setPortletName(portletId);
    portlet.setActive(true);
    portlet.setRemote(true);
    portlet.setRemoteConsumerId(consumerId);
    portlet.setRemoteProducerEntityId(producerEntityId);
    portlet.setRemotePortletHandle(portletHandle);
    portlet.setRemotePortletId(channelName);
    addPortletInfo(portlet,producerEntityId,portletHandle);
    persistRemotePortlet(portlet);
    PortletLocalServiceUtil.deployRemotePortlet(portlet);
  }
 catch (  WSRPConsumerException wsrpce) {
    throw new WSRPMBeanException(wsrpce.getMessage());
  }
}
