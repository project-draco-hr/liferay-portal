{
  try {
    Portlet portlet=PortletLocalServiceUtil.getPortletById(CompanyConstants.SYSTEM,portletId);
    if (portlet.isRemote()) {
      throw new WSRPConsumerException("DUPLICATE_PORTLET_NAME");
    }
 else     if (portlet.isUndeployedPortlet()) {
      PortletInstanceFactoryUtil.clear(portlet);
    }
  }
 catch (  SystemException se) {
    throw new WSRPConsumerException("SYSTEM_FAILURE");
  }
}
