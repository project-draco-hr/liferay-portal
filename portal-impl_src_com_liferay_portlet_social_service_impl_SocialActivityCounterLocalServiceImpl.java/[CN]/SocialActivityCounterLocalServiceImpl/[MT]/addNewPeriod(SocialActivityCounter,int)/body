{
  if (activityCounter == null) {
    return null;
  }
  if (periodLength == SocialActivityCounterConstants.PERIOD_LENGTH_SYSTEM) {
    activityCounter.setEndPeriod(SocialCounterPeriodUtil.getStartPeriod() - 1);
  }
 else {
    activityCounter.setEndPeriod(activityCounter.getStartPeriod() + periodLength - 1);
  }
  socialActivityCounterPersistence.update(activityCounter,false);
  return addActivityCounter(activityCounter.getGroupId(),activityCounter.getClassNameId(),activityCounter.getClassPK(),activityCounter.getName(),activityCounter.getOwnerType(),0,activityCounter.getTotalValue());
}
