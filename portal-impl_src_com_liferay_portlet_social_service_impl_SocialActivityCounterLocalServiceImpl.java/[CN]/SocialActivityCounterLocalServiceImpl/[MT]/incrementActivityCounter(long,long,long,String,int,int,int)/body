{
  SocialActivityCounter activityCounter=fetchLatestActivityCounter(groupId,classNameId,classPK,name,ownerType);
  if (activityCounter == null) {
    activityCounter=addActivityCounter(groupId,classNameId,classPK,name,ownerType,0,0);
    if (periodLength > 0) {
      activityCounter.setStartPeriod(SocialCounterPeriodUtil.getActivityDay());
    }
  }
  if (!activityCounter.isActivePeriod(periodLength)) {
    activityCounter=addNewPeriod(activityCounter,periodLength);
  }
  activityCounter.setCurrentValue(activityCounter.getCurrentValue() + increment);
  activityCounter.setTotalValue(activityCounter.getTotalValue() + increment);
  socialActivityCounterPersistence.update(activityCounter,false);
}
