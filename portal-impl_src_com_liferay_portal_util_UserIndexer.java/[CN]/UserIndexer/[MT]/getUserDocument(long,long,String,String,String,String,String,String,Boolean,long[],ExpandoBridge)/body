{
  Document doc=new DocumentImpl();
  doc.addUID(PORTLET_ID,String.valueOf(userId));
  doc.addKeyword(Field.COMPANY_ID,companyId);
  doc.addKeyword(Field.PORTLET_ID,PORTLET_ID);
  doc.addKeyword(Field.USER_ID,userId);
  doc.addText("firstName",firstName);
  doc.addText("middleName",middleName);
  doc.addText("lastName",lastName);
  doc.addText("jobTitle",jobTitle);
  doc.addKeyword("screenName",screenName);
  doc.addKeyword("emailAddress",emailAddress);
  doc.addKeyword("active",active.toString());
  doc.addModifiedDate();
  doc.addKeyword("usersOrgs",ArrayUtil.toStringArray(organizationIds));
  try {
    List<Role> roles=RoleLocalServiceUtil.getUserRoles(userId);
    long[] roleIds=new long[roles.size()];
    for (int i=0; i < roles.size(); i++) {
      roleIds[i]=roles.get(i).getRoleId();
    }
    doc.addKeyword("usersRoles",ArrayUtil.toStringArray(roleIds));
  }
 catch (  Exception e) {
  }
  try {
    List<UserGroup> userGroups=UserGroupLocalServiceUtil.getUserUserGroups(userId);
    long[] userGroupIds=new long[userGroups.size()];
    for (int i=0; i < userGroups.size(); i++) {
      userGroupIds[i]=userGroups.get(i).getUserGroupId();
    }
    doc.addKeyword("usersUserGroups",ArrayUtil.toStringArray(userGroupIds));
  }
 catch (  Exception e) {
  }
  ExpandoBridgeIndexerUtil.addAttributes(doc,expandoBridge);
  return doc;
}
