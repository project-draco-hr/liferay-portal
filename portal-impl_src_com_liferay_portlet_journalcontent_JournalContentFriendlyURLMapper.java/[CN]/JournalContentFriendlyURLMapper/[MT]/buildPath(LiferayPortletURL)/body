{
  String friendlyURLPath=null;
  String strutsAction=GetterUtil.getString(portletURL.getParameter("struts_action"));
  WindowState windowState=portletURL.getWindowState();
  if ((strutsAction.equals("/journal_content/view")) && ((windowState == null) || (!windowState.equals(LiferayWindowState.EXCLUSIVE)))) {
    String portletId=portletURL.getPortletId();
    String groupId=portletURL.getParameter("groupId");
    String articleId=portletURL.getParameter("articleId");
    String templateId=portletURL.getParameter("templateId");
    if (Validator.isNotNull(portletId) && Validator.isNotNull(groupId) && Validator.isNotNull(articleId)) {
      if (portletId.equals(_PORTLET_DEFAULT_INSTANCE)) {
        portletId=_PORTLET_ID;
      }
      friendlyURLPath="/journal_content/" + portletId + "/"+ groupId+ "/"+ articleId;
      portletURL.addParameterIncludedInPath("groupId");
      portletURL.addParameterIncludedInPath("articleId");
      if (Validator.isNotNull(templateId)) {
        friendlyURLPath+="/" + templateId;
        portletURL.addParameterIncludedInPath("templateId");
      }
    }
  }
  if (Validator.isNotNull(friendlyURLPath)) {
    portletURL.addParameterIncludedInPath("p_p_id");
    portletURL.addParameterIncludedInPath("struts_action");
  }
  return friendlyURLPath;
}
