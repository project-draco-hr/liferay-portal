{
  if (indexCommit == null) {
    _empty=true;
    _generation=0;
    _segments=Collections.emptyList();
    return;
  }
  _empty=false;
  _generation=indexCommit.getGeneration();
  List<String> fileNames=new ArrayList<>(indexCommit.getFileNames());
  _segments=new ArrayList<>(fileNames.size());
  Directory directory=indexCommit.getDirectory();
  for (  String fileName : fileNames) {
    Segment segment=new Segment(fileName,directory.fileLength(fileName));
    _segments.add(segment);
  }
}
