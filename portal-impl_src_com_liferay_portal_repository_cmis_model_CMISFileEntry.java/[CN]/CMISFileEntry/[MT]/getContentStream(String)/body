{
  for (  Document document : _document.getAllVersions()) {
    if (version.equals(document.getVersionLabel())) {
      ContentStream contentStream=document.getContentStream();
      try {
        String name=PrincipalThreadLocal.getName();
        long userId=GetterUtil.getLong(name);
        DLAppHelperLocalServiceUtil.getFileAsStream(userId,this,true);
      }
 catch (      Exception e) {
        _log.error(e);
      }
      return contentStream.getStream();
    }
  }
  throw new NoSuchFileVersionException("No CMIS file version with {fileEntryId=" + getFileEntryId() + ", version="+ version+ "}");
}
