{
  String status=getStatus();
  if (!status.equals("completed")) {
    try {
      if (status.equals("missing") || status.equals("queued") || status.equals("starting")) {
        JSONObject runningBuildJSONObject=getRunningBuildJSONObject();
        if (runningBuildJSONObject != null) {
          setBuildNumber(runningBuildJSONObject.getInt("number"));
          setStatus("running");
        }
 else {
          JSONObject queueItemJSONObject=getQueueItemJSONObject();
          if (status.equals("starting") && (queueItemJSONObject != null)) {
            setStatus("queued");
          }
 else           if (status.equals("queued") && (queueItemJSONObject == null)) {
            setStatus("missing");
          }
        }
      }
      status=getStatus();
      if (downstreamBuilds != null) {
        ExecutorService executorService=getExecutorService();
        for (        final Build downstreamBuild : downstreamBuilds) {
          if (executorService != null) {
            Runnable runnable=new Runnable(){
              @Override public void run(){
                downstreamBuild.update();
              }
            }
;
            executorService.execute(runnable);
          }
 else {
            downstreamBuild.update();
          }
        }
        if (executorService != null) {
          executorService.shutdown();
          while (!executorService.isTerminated()) {
            JenkinsResultsParserUtil.sleep(100);
          }
        }
        String result=getResult();
        if ((downstreamBuilds.size() == getDownstreamBuildCount("completed")) && (result != null)) {
          setStatus("completed");
        }
      }
    }
 catch (    Exception e) {
      throw new RuntimeException(e);
    }
    findDownstreamBuilds();
  }
}
