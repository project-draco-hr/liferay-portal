{
  Map portletInstances=(Map)_pool.get(portlet.getRootPortletId());
  if (portletInstances == null) {
    return;
  }
  Iterator itr=portletInstances.entrySet().iterator();
  while (itr.hasNext()) {
    Map.Entry entry=(Map.Entry)itr.next();
    String portletId=(String)entry.getKey();
    CachePortlet cachePortletInstance=(CachePortlet)entry.getValue();
    if (PortletImpl.getInstanceId(portletId) == null) {
      cachePortletInstance.destroy();
      break;
    }
  }
  _pool.remove(portlet.getRootPortletId());
  if (portlet.isWARFile()) {
    PortletContextWrapper pcw=(PortletContextWrapper)PortletContextPool.get(portlet.getRootPortletId());
    pcw.removePortletInstance();
  }
  PortletConfigFactory.destroy(portlet);
  PortletContextFactory.destroy(portlet);
  PortletLocalServiceUtil.destroyPortlet(portlet);
}
