{
  Map<String,InvokerPortlet> portletInstances=_pool.get(portlet.getRootPortletId());
  if (portletInstances == null) {
    return;
  }
  Iterator<Map.Entry<String,InvokerPortlet>> itr=portletInstances.entrySet().iterator();
  while (itr.hasNext()) {
    Map.Entry<String,InvokerPortlet> entry=itr.next();
    String portletId=entry.getKey();
    InvokerPortlet invokerPortletInstance=entry.getValue();
    if (PortletImpl.getInstanceId(portletId) == null) {
      invokerPortletInstance.destroy();
      break;
    }
  }
  _pool.remove(portlet.getRootPortletId());
  if (portlet.isWARFile()) {
    PortletBag portletBag=PortletBagPool.get(portlet.getRootPortletId());
    portletBag.removePortletInstance();
  }
  PortletConfigFactory.destroy(portlet);
  PortletContextFactory.destroy(portlet);
  PortletLocalServiceUtil.destroyPortlet(portlet);
}
