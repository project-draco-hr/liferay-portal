{
  long tagId=ParamUtil.getLong(actionRequest,"tagId");
  String name=ParamUtil.getString(actionRequest,"name");
  String[] tagProperties=getTagProperties(actionRequest);
  ServiceContext serviceContext=ServiceContextFactory.getInstance(AssetTag.class.getName(),actionRequest);
  AssetTag tag=null;
  if (tagId <= 0) {
    tag=AssetTagServiceUtil.addTag(name,tagProperties,serviceContext);
  }
 else {
    tag=AssetTagServiceUtil.updateTag(tagId,name,tagProperties,serviceContext);
  }
  JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
  jsonObject.put("tagId",tag.getTagId());
  return jsonObject;
}
