{
  try {
    File parentFile=new File(inputFileName).getParentFile();
    File tempFile=null;
    boolean modifySourceMap=false;
    if ((inputFileName == null) || inputFileName.equals("")) {
      tempFile=new File(_tmpDir,"tmp.scss");
      if (generateSourceMap) {
        System.out.println("Source maps require a fileName");
        generateSourceMap=false;
      }
    }
 else {
      modifySourceMap=true;
      tempFile=new File(parentFile.getCanonicalPath(),"tmp.scss");
      if ((sourceMapFileName == null) || sourceMapFileName.equals("")) {
        String outputFileName=getOutputFileName(inputFileName.substring(inputFileName.lastIndexOf("/")));
        sourceMapFileName=parentFile.getPath() + outputFileName + ".map";
      }
    }
    tempFile.deleteOnExit();
    write(tempFile,input);
    String output=compileFile(tempFile.getCanonicalPath(),includeDirName,generateSourceMap,sourceMapFileName);
    if (modifySourceMap) {
      String fileName=inputFileName.substring(inputFileName.lastIndexOf("/") + 1);
      File sourceMapFile=new File(sourceMapFileName);
      String sourceMapContent=new String(Files.readAllBytes(sourceMapFile.toPath()));
      sourceMapContent=sourceMapContent.replaceAll("tmp\\.scss",fileName);
      sourceMapContent=sourceMapContent.replaceAll("tmp\\.css",getOutputFileName(fileName));
      write(sourceMapFile,sourceMapContent);
    }
    return output;
  }
 catch (  Exception e) {
    throw new RubySassCompilerException(e);
  }
}
