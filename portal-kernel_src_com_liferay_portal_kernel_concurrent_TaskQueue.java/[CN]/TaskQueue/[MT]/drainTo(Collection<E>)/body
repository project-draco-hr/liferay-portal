{
  if (collection == null) {
    throw new NullPointerException();
  }
  _takeLock.lock();
  try {
    Node<E> headNode=_headNode;
    int size=_count.get();
    int count=0;
    try {
      while (count < size) {
        Node<E> currentNode=headNode._nextNode;
        collection.add(currentNode._element);
        currentNode._element=null;
        headNode._nextNode=null;
        headNode=currentNode;
        count++;
      }
      return count;
    }
  finally {
      if (count > 0) {
        _headNode=headNode;
        _count.getAndAdd(-count);
      }
    }
  }
  finally {
    _takeLock.unlock();
  }
}
