{
  String[] webIds=WebIdUtil.getWebIds();
  for (int i=0; i < webIds.length; i++) {
    String webId=webIds[i];
    runSQL("delete from Image where imageId = '" + webId + "'");
    runSQL("delete from Image where imageId = '" + webId + ".wbmp'");
    runSQL("update Image set imageId = '" + webId + "' where imageId = '"+ webId+ ".png'");
  }
  PKUpgradeColumnImpl upgradePKColumn=new PKUpgradeColumnImpl("imageId",new Integer(Types.VARCHAR),true);
  ImageTextUpgradeColumnImpl upgradeTextColumn=new ImageTextUpgradeColumnImpl();
  ImageTypeUpgradeColumnImpl upgradeTypeColumn=new ImageTypeUpgradeColumnImpl(upgradeTextColumn);
  ImageHeightUpgradeColumnImpl upgradeHeightColumn=new ImageHeightUpgradeColumnImpl(upgradeTextColumn);
  ImageWidthUpgradeColumnImpl upgradeWidthColumn=new ImageWidthUpgradeColumnImpl(upgradeTextColumn);
  ImageSizeUpgradeColumnImpl upgradeSizeColumn=new ImageSizeUpgradeColumnImpl(upgradeTextColumn);
  UpgradeTable upgradeTable=new DefaultUpgradeTableImpl(ImageImpl.TABLE_NAME,ImageImpl.TABLE_COLUMNS,upgradePKColumn,upgradeTextColumn,upgradeTypeColumn,upgradeHeightColumn,upgradeWidthColumn,upgradeSizeColumn);
  upgradeTable.updateTable();
  ValueMapper imageIdMapper=new DefaultPKMapper(upgradePKColumn.getValueMapper());
  AvailableMappersUtil.setImageIdMapper(imageIdMapper);
  runSQL(_UPGRADE_SCHEMA);
}
