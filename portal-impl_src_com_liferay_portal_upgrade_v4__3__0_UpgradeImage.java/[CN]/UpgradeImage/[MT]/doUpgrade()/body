{
  String[] webIds=WebIdUtil.getWebIds();
  for (  String webId : webIds) {
    runSQL("delete from Image where imageId = '" + webId + "'");
    runSQL("delete from Image where imageId = '" + webId + ".wbmp'");
    runSQL("update Image set imageId = '" + webId + "' where imageId = '"+ webId+ ".png'");
  }
  PKUpgradeColumnImpl upgradePKColumn=new PKUpgradeColumnImpl("imageId",new Integer(Types.VARCHAR),true);
  ImageTextUpgradeColumnImpl upgradeTextColumn=new ImageTextUpgradeColumnImpl(upgradePKColumn);
  ImageTypeUpgradeColumnImpl upgradeTypeColumn=new ImageTypeUpgradeColumnImpl(upgradeTextColumn);
  ImageHeightUpgradeColumnImpl upgradeHeightColumn=new ImageHeightUpgradeColumnImpl(upgradeTextColumn);
  ImageWidthUpgradeColumnImpl upgradeWidthColumn=new ImageWidthUpgradeColumnImpl(upgradeTextColumn);
  ImageSizeUpgradeColumnImpl upgradeSizeColumn=new ImageSizeUpgradeColumnImpl(upgradeTextColumn);
  UpgradeTable upgradeTable=UpgradeTableFactoryUtil.getUpgradeTable(ImageTable.TABLE_NAME,ImageTable.TABLE_COLUMNS,upgradePKColumn,upgradeTextColumn,upgradeTypeColumn,upgradeHeightColumn,upgradeWidthColumn,upgradeSizeColumn);
  upgradeTable.setCreateSQL(ImageTable.TABLE_SQL_CREATE);
  upgradeTable.setIndexesSQL(ImageTable.TABLE_SQL_ADD_INDEXES);
  upgradeTable.updateTable();
  ValueMapper imageIdMapper=new DefaultPKMapper(upgradePKColumn.getValueMapper());
  AvailableMappersUtil.setImageIdMapper(imageIdMapper);
}
