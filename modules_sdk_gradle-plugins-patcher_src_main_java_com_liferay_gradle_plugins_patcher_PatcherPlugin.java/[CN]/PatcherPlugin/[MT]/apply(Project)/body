{
  GradleUtil.applyPlugin(project,JavaPlugin.class);
  TaskContainer taskContainer=project.getTasks();
  taskContainer.withType(PatchTask.class,new Action<PatchTask>(){
    @Override public void execute(    PatchTask patchTask){
      configureTaskPatchPatchedSrcDirMappings(patchTask);
      Project project=patchTask.getProject();
      JavaCompile javaCompile=(JavaCompile)GradleUtil.getTask(project,JavaPlugin.COMPILE_JAVA_TASK_NAME);
      javaCompile.dependsOn(patchTask);
      Copy copy=addTaskCopyOriginalLibClasses(patchTask);
      Task classesTask=GradleUtil.getTask(project,JavaPlugin.CLASSES_TASK_NAME);
      classesTask.dependsOn(copy);
    }
  }
);
}
