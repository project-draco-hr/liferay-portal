{
  String missingReferenceType=missingReference.getType();
  String missingReferenceKey=null;
  if (missingReferenceType.equals(PortletDataContext.REFERENCE_TYPE_DEPENDENCY)) {
    missingReferenceKey=missingReference.getDisplayName();
  }
 else   if (missingReferenceType.equals(PortletDataContext.REFERENCE_TYPE_WEAK)) {
    missingReferenceKey=missingReference.getReferrerClassName();
  }
  MissingReference existingMissingReference=missingReferences.get(missingReferenceKey);
  if (existingMissingReference != null) {
    existingMissingReference.addReferrers(missingReference.getReferrers());
  }
 else {
    missingReferences.put(missingReferenceKey,missingReference);
  }
}
