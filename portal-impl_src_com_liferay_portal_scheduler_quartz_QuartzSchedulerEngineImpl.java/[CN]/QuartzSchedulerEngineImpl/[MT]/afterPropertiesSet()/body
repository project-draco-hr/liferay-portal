{
  try {
    if (!PropsValues.SCHEDULER_ENABLED) {
      return;
    }
    Properties props=new Properties();
    Enumeration<Object> enu=PropsUtil.getProperties().keys();
    while (enu.hasMoreElements()) {
      String key=(String)enu.nextElement();
      if (key.startsWith("org.quartz.")) {
        props.setProperty(key,PropsUtil.get(key));
      }
    }
    StdSchedulerFactory schedulerFactory=new StdSchedulerFactory();
    schedulerFactory.initialize(props);
    try {
      _scheduler=schedulerFactory.getScheduler();
    }
 catch (    Exception e2) {
      quartzLocalService.checkQuartzTables();
      _scheduler=schedulerFactory.getScheduler();
    }
  }
 catch (  Exception e1) {
    _log.error("Unable to initialize engine",e1);
  }
}
