{
  DynamicQuery query=DynamicQueryFactoryUtil.forClass(ListType.class);
  query.add(PropertyFactoryUtil.forName("type").eq(type));
  query.add(PropertyFactoryUtil.forName("name").eq(name));
  List<ListType> list=listTypePersistence.findWithDynamicQuery(query);
  if (!list.isEmpty()) {
    return list.get(0);
  }
  int listTypeId=(int)CounterLocalServiceUtil.increment(ListType.class.getName());
  ListType listType=listTypePersistence.create(listTypeId);
  listType.setType(type);
  listType.setName(name);
  listType.setNew(true);
  listTypePersistence.update(listType);
  return listType;
}
