{
  _calledUpdateTable=true;
  String tempFileName=generateTempFile();
  try {
    DB db=DBFactoryUtil.getDB();
    if (Validator.isNotNull(tempFileName)) {
      String deleteSQL=getDeleteSQL();
      db.runSQL(deleteSQL);
    }
    String createSQL=getCreateSQL();
    if (Validator.isNotNull(createSQL)) {
      db.runSQL("drop table " + getTableName());
      db.runSQL(createSQL);
    }
    if (Validator.isNotNull(tempFileName)) {
      populateTable(tempFileName);
    }
    String[] indexesSQL=getIndexesSQL();
    for (    String indexSQL : indexesSQL) {
      if (!isAllowUniqueIndexes()) {
        indexSQL=StringUtil.replace(indexSQL,"create unique index ","create index ");
      }
      db.runSQL(indexSQL);
    }
  }
  finally {
    if (Validator.isNotNull(tempFileName)) {
      FileUtil.delete(tempFileName);
    }
  }
}
