{
  PermissionedModel model=getPermissionedModel(name,primKey);
  ResourceBlock resourceBlock=resourceBlockPersistence.fetchByPrimaryKey(model.getResourceBlockId());
  if (resourceBlock == null) {
    if (_log.isWarnEnabled()) {
      _log.warn("Resource block " + model.getResourceBlockId() + " missing for "+ name+ "#"+ primKey);
    }
    long groupId=0;
    long ownerId=0;
    if (model instanceof GroupedModel) {
      groupId=((GroupedModel)model).getGroupId();
      ownerId=((GroupedModel)model).getUserId();
    }
 else     if (model instanceof AuditedModel) {
      ownerId=((AuditedModel)model).getUserId();
    }
    resourceLocalService.addResources(companyId,groupId,ownerId,name,primKey,false,true,true);
  }
}
