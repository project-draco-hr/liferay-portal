{
  ResourceBlock resourceBlock=getResourceBlock(name,primKey);
  ResourceBlockPermissionsContainer resourceBlockPermissionsContainer=resourceBlockPermissionLocalService.getResourceBlockPermissionsContainer(resourceBlock.getResourceBlockId());
  Set<Long> roleIds=resourceBlockPermissionsContainer.getRoleIds();
  long actionIdLong=getActionId(name,actionId);
  List<Role> roles=new ArrayList<>(roleIds.size());
  for (  long roleId : roleIds) {
    if (resourceBlockPermissionsContainer.hasPermission(roleId,actionIdLong)) {
      roles.add(roleLocalService.getRole(roleId));
    }
  }
  return roles;
}
