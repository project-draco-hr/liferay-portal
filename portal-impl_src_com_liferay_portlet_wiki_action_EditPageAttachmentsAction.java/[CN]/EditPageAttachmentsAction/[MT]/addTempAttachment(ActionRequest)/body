{
  UploadPortletRequest uploadPortletRequest=PortalUtil.getUploadPortletRequest(actionRequest);
  long nodeId=ParamUtil.getLong(actionRequest,"nodeId");
  String sourceFileName=uploadPortletRequest.getFileName("file");
  InputStream inputStream=null;
  try {
    inputStream=uploadPortletRequest.getFileAsStream("file");
    String mimeType=uploadPortletRequest.getContentType("file");
    WikiPageServiceUtil.addTempFileEntry(nodeId,_TEMP_FOLDER_NAME,sourceFileName,inputStream,mimeType);
  }
  finally {
    StreamUtil.cleanUp(inputStream);
  }
}
