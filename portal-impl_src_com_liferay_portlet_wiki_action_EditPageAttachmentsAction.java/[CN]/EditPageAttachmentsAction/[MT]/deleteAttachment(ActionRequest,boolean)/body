{
  long nodeId=ParamUtil.getLong(actionRequest,"nodeId");
  String title=ParamUtil.getString(actionRequest,"title");
  String attachment=ParamUtil.getString(actionRequest,"fileName");
  FileEntry fileEntry=null;
  if (moveToTrash) {
    fileEntry=WikiPageServiceUtil.movePageAttachmentToTrash(nodeId,title,attachment);
  }
 else {
    WikiPageServiceUtil.deletePageAttachment(nodeId,title,attachment);
  }
  if (moveToTrash && (fileEntry != null)) {
    Map<String,String[]> data=new HashMap<String,String[]>();
    data.put(Constants.CMD,new String[]{Constants.REMOVE});
    data.put("deleteEntryClassName",new String[]{DLFileEntry.class.getName()});
    if (Validator.isNotNull(fileEntry.getTitle())) {
      data.put("deleteEntryTitle",new String[]{TrashUtil.getOriginalTitle(fileEntry.getTitle())});
    }
    data.put("restoreEntryIds",new String[]{String.valueOf(fileEntry.getFileEntryId())});
    SessionMessages.add(actionRequest,PortalUtil.getPortletId(actionRequest) + SessionMessages.KEY_SUFFIX_DELETE_SUCCESS_DATA,data);
    hideDefaultSuccessMessage(actionRequest);
  }
}
