{
  syncSite.setActive(false);
  syncSite=update(syncSite);
  List<SyncFile> syncFiles=SyncFileService.findSyncFiles(syncSite.getGroupId(),SyncFile.STATE_IN_PROGRESS,syncSite.getSyncAccountId());
  syncFiles.add(SyncFileService.fetchSyncFile(syncSite.getFilePathName()));
  for (  SyncFile syncFile : syncFiles) {
    Set<Event> events=FileEventManager.getEvents(syncFile.getSyncFileId());
    for (    Event event : events) {
      event.cancel();
    }
  }
  try {
    deleteSyncFiles(syncSite);
  }
 catch (  IOException ioe) {
    _logger.error(ioe.getMessage(),ioe);
  }
  if (_logger.isDebugEnabled()) {
    _logger.debug("Sync site {} deactivated",syncSite.getName());
  }
  return syncSite;
}
