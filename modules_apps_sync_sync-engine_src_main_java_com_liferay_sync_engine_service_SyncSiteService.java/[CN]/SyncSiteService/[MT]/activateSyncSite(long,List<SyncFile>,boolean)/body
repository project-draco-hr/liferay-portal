{
  SyncSite syncSite=fetchSyncSite(syncSiteId);
  if (syncSite.isActive()) {
    return syncSite;
  }
  syncSite.setActive(true);
  syncSite.setState(SyncSite.STATE_SYNCED);
  syncSite.setUiEvent(SyncSite.UI_EVENT_NONE);
  if (reset) {
    syncSite.setRemoteSyncTime(-1);
    deleteSyncFiles(syncSite);
  }
  update(syncSite);
  String filePathName=syncSite.getFilePathName();
  if (!FileUtil.exists(Paths.get(filePathName))) {
    Files.createDirectories(Paths.get(filePathName));
    SyncFile syncFile=SyncFileService.fetchSyncFile(filePathName);
    FileKeyUtil.writeFileKey(Paths.get(filePathName),String.valueOf(syncFile.getSyncFileId()),true);
  }
  for (  SyncFile syncFile : ignoredSyncFiles) {
    syncFile.setModifiedTime(0);
    syncFile.setState(SyncFile.STATE_UNSYNCED);
    syncFile.setSyncAccountId(syncSite.getSyncAccountId());
    SyncFileService.update(syncFile);
  }
  return syncSite;
}
