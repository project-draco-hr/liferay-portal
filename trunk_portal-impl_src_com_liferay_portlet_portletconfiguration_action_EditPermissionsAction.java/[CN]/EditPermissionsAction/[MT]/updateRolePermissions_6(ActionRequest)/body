{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  String portletResource=ParamUtil.getString(actionRequest,"portletResource");
  String modelResource=ParamUtil.getString(actionRequest,"modelResource");
  long[] roleIds=StringUtil.split(ParamUtil.getString(actionRequest,"rolesSearchContainerPrimaryKeys"),0L);
  String selResource=PortletConstants.getRootPortletId(portletResource);
  if (Validator.isNotNull(modelResource)) {
    selResource=modelResource;
  }
  String resourcePrimKey=ParamUtil.getString(actionRequest,"resourcePrimKey");
  for (  long roleId : roleIds) {
    String[] actionIds=getActionIds(actionRequest,roleId);
    ResourcePermissionServiceUtil.setIndividualResourcePermissions(themeDisplay.getScopeGroupId(),themeDisplay.getCompanyId(),selResource,resourcePrimKey,roleId,actionIds);
  }
}
