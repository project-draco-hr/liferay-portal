{
  Layout layout=(Layout)actionRequest.getAttribute(WebKeys.LAYOUT);
  long resourceId=ParamUtil.getLong(actionRequest,"resourceId");
  long groupId=ParamUtil.getLong(actionRequest,"groupId");
  String[] actionIds=StringUtil.split(ParamUtil.getString(actionRequest,"groupIdActionIds"));
  PermissionServiceUtil.setGroupPermissions(groupId,actionIds,resourceId);
  if (!layout.isPrivateLayout()) {
    Resource resource=ResourceLocalServiceUtil.getResource(resourceId);
    if (resource.getPrimKey().startsWith(layout.getPlid() + PortletConstants.LAYOUT_SEPARATOR)) {
      CacheUtil.clearCache(layout.getCompanyId());
    }
  }
}
