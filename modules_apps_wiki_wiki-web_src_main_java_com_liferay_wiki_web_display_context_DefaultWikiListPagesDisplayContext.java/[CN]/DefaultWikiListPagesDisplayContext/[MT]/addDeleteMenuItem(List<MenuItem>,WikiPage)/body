{
  if (!wikiPage.isDraft() && WikiPagePermissionChecker.contains(_wikiRequestHelper.getPermissionChecker(),wikiPage.getNodeId(),HtmlUtil.unescape(wikiPage.getTitle()),ActionKeys.DELETE)) {
    DeleteMenuItem deleteMenuItem=new DeleteMenuItem();
    deleteMenuItem.setKey(WikiUIItemKeys.DELETE);
    deleteMenuItem.setTrash(TrashUtil.isTrashEnabled(_wikiRequestHelper.getScopeGroupId()));
    LiferayPortletResponse liferayPortletResponse=_wikiRequestHelper.getLiferayPortletResponse();
    PortletURL portletURL=liferayPortletResponse.createActionURL();
    portletURL.setParameter(ActionRequest.ACTION_NAME,"/wiki/edit_page");
    String cmd=Constants.DELETE;
    if (TrashUtil.isTrashEnabled(_wikiRequestHelper.getScopeGroupId())) {
      cmd=Constants.MOVE_TO_TRASH;
    }
    portletURL.setParameter(Constants.CMD,cmd);
    portletURL.setParameter("redirect",_wikiRequestHelper.getCurrentURL());
    portletURL.setParameter("nodeId",String.valueOf(wikiPage.getNodeId()));
    portletURL.setParameter("title",HtmlUtil.unescape(wikiPage.getTitle()));
    deleteMenuItem.setURL(portletURL.toString());
    menuItems.add(deleteMenuItem);
  }
  if (wikiPage.isDraft() && WikiPagePermissionChecker.contains(_wikiRequestHelper.getPermissionChecker(),wikiPage,ActionKeys.DELETE)) {
    URLMenuItem urlMenuItem=new URLMenuItem();
    urlMenuItem.setKey(WikiUIItemKeys.DELETE);
    urlMenuItem.setLabel("discard-draft");
    LiferayPortletResponse liferayPortletResponse=_wikiRequestHelper.getLiferayPortletResponse();
    PortletURL portletURL=liferayPortletResponse.createActionURL();
    portletURL.setParameter(ActionRequest.ACTION_NAME,"/wiki/edit_page");
    portletURL.setParameter(Constants.CMD,Constants.DELETE);
    portletURL.setParameter("redirect",_wikiRequestHelper.getCurrentURL());
    portletURL.setParameter("nodeId",String.valueOf(wikiPage.getNodeId()));
    portletURL.setParameter("title",HtmlUtil.unescape(wikiPage.getTitle()));
    portletURL.setParameter("version",String.valueOf(wikiPage.getVersion()));
    urlMenuItem.setURL(portletURL.toString());
    menuItems.add(urlMenuItem);
  }
}
