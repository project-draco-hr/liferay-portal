{
  if (!WikiPagePermissionChecker.contains(permissionChecker,activity.getClassPK(),ActionKeys.VIEW)) {
    return false;
  }
  int activityType=activity.getType();
  if (activityType == WikiActivityKeys.UPDATE_PAGE) {
    WikiPageResource pageResource=_wikiPageResourceLocalService.getPageResource(activity.getClassPK());
    double version=GetterUtil.getDouble(activity.getExtraDataValue("version"));
    WikiPage page=_wikiPageLocalService.getPage(pageResource.getNodeId(),pageResource.getTitle(),version);
    if (!page.isApproved() && !WikiPagePermissionChecker.contains(permissionChecker,activity.getClassPK(),ActionKeys.UPDATE)) {
      return false;
    }
  }
  return true;
}
