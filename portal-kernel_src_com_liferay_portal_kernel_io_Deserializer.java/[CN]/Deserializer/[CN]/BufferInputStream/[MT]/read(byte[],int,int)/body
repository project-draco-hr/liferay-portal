{
  int remain=limit - index;
  if (remain < length) {
    length=remain;
  }
  System.arraycopy(buffer,index,bytes,offset,length);
  index+=length;
  return length;
}
