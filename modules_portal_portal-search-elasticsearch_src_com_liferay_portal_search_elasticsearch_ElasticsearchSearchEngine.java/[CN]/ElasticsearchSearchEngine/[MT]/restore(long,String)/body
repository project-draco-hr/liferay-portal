{
  ClusterAdminClient clusterAdminClient=_elasticsearchConnectionManager.getClusterAdminClient();
  RestoreSnapshotRequestBuilder restoreSnapshotRequestBuilder=clusterAdminClient.prepareRestoreSnapshot(_BACKUP_REPOSITORY_NAME,backupName);
  try {
    Future<RestoreSnapshotResponse> future=restoreSnapshotRequestBuilder.execute();
    RestoreSnapshotResponse restoreSnapshotResponse=future.get();
    LogUtil.logActionResponse(_log,restoreSnapshotResponse);
  }
 catch (  Exception e) {
    throw new SearchException(e);
  }
  ClusterHealthResponse clusterHealthResponse=_elasticsearchConnectionManager.getClusterHealthResponse();
  if (clusterHealthResponse.getStatus() == ClusterHealthStatus.RED) {
    throw new IllegalStateException("Unable to initialize Elasticsearch cluster: " + clusterHealthResponse);
  }
}
