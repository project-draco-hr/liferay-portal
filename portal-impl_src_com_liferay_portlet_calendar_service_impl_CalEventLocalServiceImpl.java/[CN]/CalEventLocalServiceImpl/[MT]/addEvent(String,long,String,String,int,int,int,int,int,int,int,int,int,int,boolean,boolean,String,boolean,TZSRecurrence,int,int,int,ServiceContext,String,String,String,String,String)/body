{
  String extCalEventId=null;
  if (_service != null) {
    CalEvent remoteCalEvent=_service.addEvent(null,userId,title,description,startDateMonth,startDateDay,startDateYear,startDateHour,startDateMinute,endDateMonth,endDateDay,endDateYear,durationHour,durationMinute,allDay,timeZoneSensitive,type,repeating,recurrence,remindBy,firstReminder,secondReminder,serviceContext,extCalServerUrl,extCalId,extCalUserId,extCalPassword,extCalSessionId);
    extCalEventId=remoteCalEvent.getExtCalEventId();
  }
  CalEvent localEvent=addEvent(uuid,userId,title,description,startDateMonth,startDateDay,startDateYear,startDateHour,startDateMinute,endDateMonth,endDateDay,endDateYear,durationHour,durationMinute,allDay,timeZoneSensitive,type,repeating,recurrence,remindBy,firstReminder,secondReminder,serviceContext);
  if (Validator.isNotNull(extCalEventId)) {
    CalEvent event=calEventPersistence.findByPrimaryKey(localEvent.getEventId());
    event.setSaveToExternalSystem(true);
    event.setExtCalEventId(extCalEventId);
    calEventPersistence.update(event,false);
    return event;
  }
 else {
    return localEvent;
  }
}
