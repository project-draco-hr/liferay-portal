{
  Iterator<CalEvent> itr=calEventFinder.findByRemindBy().iterator();
  while (itr.hasNext()) {
    CalEvent event=itr.next();
    User user=userPersistence.findByPrimaryKey(event.getUserId());
    Calendar now=CalendarFactoryUtil.getCalendar(user.getTimeZone(),user.getLocale());
    if (!event.isTimeZoneSensitive()) {
      Calendar temp=CalendarFactoryUtil.getCalendar();
      temp.setTime(Time.getDate(now));
      now=temp;
    }
    Calendar startDate=null;
    if (event.isTimeZoneSensitive()) {
      startDate=CalendarFactoryUtil.getCalendar(user.getTimeZone(),user.getLocale());
    }
 else {
      startDate=CalendarFactoryUtil.getCalendar();
    }
    startDate.setTime(event.getStartDate());
    long diff=(startDate.getTime().getTime() - now.getTime().getTime()) / CheckEventJob.INTERVAL;
    if ((diff == (event.getFirstReminder() / CheckEventJob.INTERVAL)) || (diff == (event.getSecondReminder() / CheckEventJob.INTERVAL))) {
      remindUser(event,user);
    }
  }
}
