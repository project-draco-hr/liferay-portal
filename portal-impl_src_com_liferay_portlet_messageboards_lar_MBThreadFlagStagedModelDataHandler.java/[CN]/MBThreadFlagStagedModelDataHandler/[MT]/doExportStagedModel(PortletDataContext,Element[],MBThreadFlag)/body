{
  String path=getThreadFlagPath(portletDataContext,threadFlag);
  if (!portletDataContext.isPathNotProcessed(path)) {
    return;
  }
  Element threadFlagElement=threadFlagsElement.addElement("thread-flag");
  MBThread thread=MBThreadLocalServiceUtil.getThread(threadFlag.getThreadId());
  MBMessage rootMessage=MBMessageLocalServiceUtil.getMessage(thread.getRootMessageId());
  threadFlagElement.addAttribute("root-message-uuid",rootMessage.getUuid());
  portletDataContext.addClassedModel(threadFlagElement,path,threadFlag,NAMESPACE);
}
