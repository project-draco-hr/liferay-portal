{
  MBThread thread=MBThreadLocalServiceUtil.getThread(threadFlag.getThreadId());
  MBMessage rootMessage=MBMessageLocalServiceUtil.getMessage(thread.getRootMessageId());
  if ((rootMessage.getStatus() != WorkflowConstants.STATUS_APPROVED) || (rootMessage.getCategoryId() == MBCategoryConstants.DISCUSSION_CATEGORY_ID)) {
    return;
  }
  StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,rootMessage);
  Element threadFlagElement=portletDataContext.getExportDataStagedModelElement(threadFlag);
  threadFlagElement.addAttribute("root-message-id",String.valueOf(rootMessage.getMessageId()));
  portletDataContext.addClassedModel(threadFlagElement,StagedModelPathUtil.getPath(threadFlag),threadFlag,MBPortletDataHandler.NAMESPACE);
}
