{
  if (!exportServiceSetup) {
    return;
  }
  Portlet portlet=_portletLocalService.getPortletById(portletDataContext.getPortletId());
  if ((portlet == null) || portlet.isUndeployedPortlet()) {
    return;
  }
  PortletDataHandler portletDataHandler=portlet.getPortletDataHandlerInstance();
  String serviceName=portletDataHandler.getServiceName();
  if (Validator.isNotNull(serviceName)) {
    exportServicePortletPreferences(portletDataContext,portletDataContext.getCompanyId(),PortletKeys.PREFS_OWNER_TYPE_COMPANY,serviceName,rootElement);
    exportServicePortletPreferences(portletDataContext,portletDataContext.getScopeGroupId(),PortletKeys.PREFS_OWNER_TYPE_GROUP,serviceName,rootElement);
  }
}
