{
  try {
    BatchSessionUtil.setEnabled(true);
    initialize();
    if (PropsValues.PERMISSIONS_USER_CHECK_ALGORITHM < 5) {
      convertToRBAC();
    }
    convertToBitwise();
    MaintenanceUtil.appendStatus("Please set " + PropsKeys.PERMISSIONS_USER_CHECK_ALGORITHM + " in your portal-ext.properties to use algorithm 6");
  }
  finally {
    CacheRegistry.clear();
    PermissionCacheUtil.clearCache();
    BatchSessionUtil.setEnabled(false);
  }
}
