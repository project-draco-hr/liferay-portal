{
  List<Company> companies=CompanyLocalServiceUtil.getCompanies();
  for (  Company company : companies) {
    long companyId=company.getCompanyId();
    _defaultRolesMap.put(companyId,new Role[]{RoleLocalServiceUtil.getRole(companyId,RoleConstants.COMMUNITY_MEMBER),RoleLocalServiceUtil.getRole(companyId,RoleConstants.ORGANIZATION_MEMBER),RoleLocalServiceUtil.getRole(companyId,RoleConstants.POWER_USER)});
    Role guestRole=RoleLocalServiceUtil.getRole(companyId,RoleConstants.GUEST);
    _guestRolesMap.put(companyId,guestRole);
    Role ownerRole=RoleLocalServiceUtil.getRole(companyId,RoleConstants.OWNER);
    _ownerRolesMap.put(companyId,ownerRole);
    long defaultUserId=UserLocalServiceUtil.getDefaultUserId(companyId);
    _guestUsersSet.add(defaultUserId);
  }
  Connection con=null;
  PreparedStatement ps=null;
  ResultSet rs=null;
  try {
    con=DataAccess.getConnection();
    ps=con.prepareStatement("SELECT * FROM Roles_Permissions");
    rs=ps.executeQuery();
    while (rs.next()) {
      long roleId=rs.getLong("roleId");
      long permissionId=rs.getLong("permissionId");
      _rolesPermissions.add(roleId + "_" + permissionId);
    }
  }
  finally {
    DataAccess.cleanUp(con,ps,rs);
  }
  List<Group> groups=GroupLocalServiceUtil.getGroups(QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  for (  Group group : groups) {
    _groupsMap.put(group.getGroupId(),group);
  }
}
