{
  Group group=GroupLocalServiceUtil.getCompanyGroup(companyId);
  JournalArticle article=null;
  try {
    article=JournalArticleLocalServiceUtil.getDisplayArticle(scopeGroupId,articleId);
  }
 catch (  NoSuchArticleException nsae) {
  }
  if (article == null) {
    try {
      article=JournalArticleLocalServiceUtil.getDisplayArticle(group.getGroupId(),articleId);
    }
 catch (    NoSuchArticleException nsae) {
      return new String[0];
    }
  }
  List<String> portletIds=getRuntimePortletIds(article.getContent());
  if (Validator.isNotNull(article.getTemplateId())) {
    JournalTemplate journalTemplate=null;
    try {
      journalTemplate=JournalTemplateLocalServiceUtil.getTemplate(scopeGroupId,article.getTemplateId());
    }
 catch (    NoSuchTemplateException nste) {
      journalTemplate=JournalTemplateLocalServiceUtil.getTemplate(group.getGroupId(),article.getTemplateId());
    }
    portletIds.addAll(getRuntimePortletIds(journalTemplate.getXsl()));
  }
  return portletIds.toArray(new String[portletIds.size()]);
}
