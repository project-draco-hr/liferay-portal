{
  Group group=GroupLocalServiceUtil.getCompanyGroup(companyId);
  JournalArticle article=null;
  try {
    article=JournalArticleLocalServiceUtil.getDisplayArticle(scopeGroupId,articleId);
  }
 catch (  NoSuchArticleException nsae) {
  }
  if (article == null) {
    try {
      article=JournalArticleLocalServiceUtil.getDisplayArticle(group.getGroupId(),articleId);
    }
 catch (    NoSuchArticleException nsae) {
      return new String[0];
    }
  }
  List<String> portletIds=getRuntimePortletIds(article.getContent());
  if (Validator.isNotNull(article.getTemplateId())) {
    DDMTemplate ddmTemplate=DDMTemplateLocalServiceUtil.getTemplate(scopeGroupId,PortalUtil.getClassNameId(DDMStructure.class),article.getTemplateId(),true);
    portletIds.addAll(getRuntimePortletIds(ddmTemplate.getScript()));
  }
  return ListUtil.unique(portletIds).toArray(new String[portletIds.size()]);
}
