{
  long nodeId=ParamUtil.getLong(actionRequest,"nodeId");
  String title=ParamUtil.getString(actionRequest,"title");
  double version=ParamUtil.getDouble(actionRequest,"version");
  WikiPage wikiPage=null;
  if (moveToTrash) {
    if (version > 0) {
      wikiPage=WikiPageLocalServiceUtil.getPage(nodeId,title,version);
      WikiPageServiceUtil.movePageToTrash(nodeId,title,version);
    }
 else {
      wikiPage=WikiPageLocalServiceUtil.getPage(nodeId,title);
      WikiPageServiceUtil.movePageToTrash(nodeId,title);
    }
  }
 else {
    if (version > 0) {
      WikiPageServiceUtil.discardDraft(nodeId,title,version);
    }
 else {
      WikiPageServiceUtil.deletePage(nodeId,title);
    }
  }
  if (moveToTrash) {
    Map<String,String[]> data=new HashMap<String,String[]>();
    data.put("restoreEntryIds",new String[]{String.valueOf(wikiPage.getResourcePrimKey())});
    SessionMessages.add(actionRequest,liferayPortletConfig.getPortletId() + SessionMessages.KEY_SUFFIX_DELETE_SUCCESS_DATA,data);
    hideDefaultSuccessMessage(liferayPortletConfig,actionRequest);
  }
}
