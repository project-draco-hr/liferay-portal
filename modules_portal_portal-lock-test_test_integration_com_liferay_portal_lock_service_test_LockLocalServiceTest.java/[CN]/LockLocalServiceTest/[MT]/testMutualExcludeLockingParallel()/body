{
  ExecutorService executorService=Executors.newFixedThreadPool(10);
  List<LockingJob> lockingJobs=new ArrayList<>();
  for (int i=0; i < 10; i++) {
    LockingJob lockingJob=new LockingJob("className","key","owner-" + i,10);
    lockingJobs.add(lockingJob);
    executorService.execute(lockingJob);
  }
  executorService.shutdown();
  Assert.assertTrue(executorService.awaitTermination(600,TimeUnit.SECONDS));
  for (  LockingJob lockingJob : lockingJobs) {
    SystemException systemException=lockingJob.getSystemException();
    if (systemException != null) {
      throw systemException;
    }
  }
  Assert.assertFalse(LockLocalServiceUtil.isLocked("className","key"));
}
