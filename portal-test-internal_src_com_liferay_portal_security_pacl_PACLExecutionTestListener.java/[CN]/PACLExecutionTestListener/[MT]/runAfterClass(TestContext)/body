{
  HotDeployEvent hotDeployEvent=_hotDeployEvents.remove(testContext.getClazz());
  if (hotDeployEvent == null) {
    return;
  }
  HotDeployUtil.fireUndeployEvent(hotDeployEvent);
  PortletContextLoaderListener portletContextLoaderListener=new PortletContextLoaderListener();
  ClassLoaderPool.register(hotDeployEvent.getServletContextName(),hotDeployEvent.getContextClassLoader());
  PortletClassLoaderUtil.setServletContextName(hotDeployEvent.getServletContextName());
  try {
    portletContextLoaderListener.contextDestroyed(new ServletContextEvent(hotDeployEvent.getServletContext()));
  }
  finally {
    ClassLoaderPool.unregister(hotDeployEvent.getServletContextName());
    PortletClassLoaderUtil.setServletContextName(null);
  }
}
