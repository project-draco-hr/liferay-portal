{
  if (Validator.isNull(script)) {
    return null;
  }
  if (ddmStructure == null) {
    try {
      DDMForm ddmForm=DDMFormJSONDeserializerUtil.deserialize(script);
      return getDDMFormFieldsJSONArray(ddmForm.getDDMFormFields(),ddmForm.getAvailableLocales(),ddmForm.getDefaultLocale());
    }
 catch (    PortalException pe) {
      if (_log.isWarnEnabled()) {
        _log.warn("Unable to deserialize script",pe);
      }
      return null;
    }
  }
  try {
    DDMForm ddmForm=DDMFormJSONDeserializerUtil.deserialize(script);
    return getDDMFormFieldsJSONArray(ddmForm.getDDMFormFields(),ddmForm.getAvailableLocales(),ddmForm.getDefaultLocale());
  }
 catch (  PortalException pe) {
    if (_log.isWarnEnabled()) {
      _log.warn("Unable to deserialize script",pe);
    }
    DDMForm ddmForm=ddmStructure.getDDMForm();
    return getDDMFormFieldsJSONArray(ddmForm.getDDMFormFields(),ddmForm.getAvailableLocales(),ddmForm.getDefaultLocale());
  }
}
