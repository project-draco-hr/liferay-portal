{
  DDMStructure ddmStructure=getDDMStructure(ddmStructureId,ddmTemplateId);
  Set<String> fieldNames=ddmStructure.getFieldNames();
  boolean translating=true;
  String defaultLanguageId=(String)serviceContext.getAttribute("defaultLanguageId");
  String toLanguageId=(String)serviceContext.getAttribute("toLanguageId");
  if (Validator.isNull(toLanguageId) || Validator.equals(defaultLanguageId,toLanguageId)) {
    translating=false;
  }
  DDMFormValues ddmFormValues=new DDMFormValues(new DDMForm());
  for (  String fieldName : fieldNames) {
    boolean localizable=GetterUtil.getBoolean(ddmStructure.getFieldProperty(fieldName,"localizable"),true);
    if (!localizable && translating && !ddmStructure.isFieldPrivate(fieldName)) {
      continue;
    }
    List<String> fieldValues=getDDMFormFieldValues(ddmStructure,fieldName,fieldNamespace,serviceContext);
    if ((fieldValues == null) || fieldValues.isEmpty()) {
      continue;
    }
    DDMFormFieldValue ddmFormFieldValue=createDDMFormFieldValue(ddmStructure,fieldName,fieldValues,serviceContext);
    ddmFormValues.addDDMFormFieldValue(ddmFormFieldValue);
  }
  return ddmFormValues;
}
