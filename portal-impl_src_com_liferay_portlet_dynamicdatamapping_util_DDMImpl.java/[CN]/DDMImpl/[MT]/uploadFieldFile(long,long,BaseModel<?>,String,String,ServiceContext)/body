{
  HttpServletRequest request=serviceContext.getRequest();
  if (!(request instanceof UploadHttpRequest)) {
    return StringPool.BLANK;
  }
  UploadHttpRequest uploadRequest=(UploadHttpRequest)request;
  String fileName=uploadRequest.getFileName(fieldNamespace + fieldName);
  String fieldValue=StringPool.BLANK;
  InputStream inputStream=null;
  try {
    inputStream=uploadRequest.getFileAsStream(fieldNamespace + fieldName,true);
    if (inputStream != null) {
      String filePath=storeFieldFile(baseModel,fieldName,inputStream,serviceContext);
      JSONObject recordFileJSONObject=JSONFactoryUtil.createJSONObject();
      recordFileJSONObject.put("name",fileName);
      recordFileJSONObject.put("path",filePath);
      recordFileJSONObject.put("className",baseModel.getModelClassName());
      recordFileJSONObject.put("classPK",String.valueOf(baseModel.getPrimaryKeyObj()));
      fieldValue=recordFileJSONObject.toString();
      Fields fields=new Fields();
      Field field=new Field(structureId,fieldName,fieldValue);
      fields.put(field);
      StorageEngineUtil.update(storageId,fields,true,serviceContext);
    }
  }
  finally {
    StreamUtil.cleanUp(inputStream);
  }
  return fieldValue;
}
