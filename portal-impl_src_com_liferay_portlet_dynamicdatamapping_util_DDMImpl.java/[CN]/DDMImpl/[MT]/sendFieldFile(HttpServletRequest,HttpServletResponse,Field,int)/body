{
  if (field == null) {
    return;
  }
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  DDMStructure structure=field.getDDMStructure();
  Serializable fieldValue=field.getValue(themeDisplay.getLocale(),valueIndex);
  JSONObject fileJSONObject=JSONFactoryUtil.createJSONObject(String.valueOf(fieldValue));
  String fileName=fileJSONObject.getString("name");
  String filePath=fileJSONObject.getString("path");
  InputStream is=DLStoreUtil.getFileAsStream(structure.getCompanyId(),CompanyConstants.SYSTEM,filePath);
  long contentLength=DLStoreUtil.getFileSize(structure.getCompanyId(),CompanyConstants.SYSTEM,filePath);
  String contentType=MimeTypesUtil.getContentType(fileName);
  ServletResponseUtil.sendFile(request,response,fileName,is,contentLength,contentType);
}
