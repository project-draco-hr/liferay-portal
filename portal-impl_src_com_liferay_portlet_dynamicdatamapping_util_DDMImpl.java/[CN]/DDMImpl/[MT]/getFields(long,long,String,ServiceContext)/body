{
  DDMStructure ddmStructure=getDDMStructure(ddmStructureId,ddmTemplateId);
  Set<String> fieldNames=ddmStructure.getFieldNames();
  Fields fields=new Fields();
  for (  String fieldName : fieldNames) {
    List<Serializable> fieldValues=getFieldValues(ddmStructure,fieldName,fieldNamespace,serviceContext);
    if ((fieldValues == null) || fieldValues.isEmpty()) {
      continue;
    }
    Map<String,String> attributes=getFieldAttributeValues(ddmStructure,fieldName,fieldNamespace,serviceContext);
    Field field=createField(ddmStructure,fieldName,fieldValues,attributes,serviceContext);
    fields.put(field);
  }
  return fields;
}
