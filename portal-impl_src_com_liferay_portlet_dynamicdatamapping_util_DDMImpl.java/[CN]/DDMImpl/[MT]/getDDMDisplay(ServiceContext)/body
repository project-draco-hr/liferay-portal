{
  String refererPortletName=(String)serviceContext.getAttribute("refererPortletName");
  if (refererPortletName == null) {
    refererPortletName=serviceContext.getPortletId();
    if (refererPortletName == null) {
      throw new IllegalArgumentException("ServiceContext must have either refererPortletName or " + "portletPreferenceIds set.");
    }
  }
  return DDMDisplayRegistryUtil.getDDMDisplay(refererPortletName);
}
