{
  String refererPortletName=(String)serviceContext.getAttribute("refererPortletName");
  if (refererPortletName == null) {
    refererPortletName=serviceContext.getPortletId();
    if (refererPortletName == null) {
      throw new IllegalArgumentException("Service context must have values for either " + "the referer portlet nme or portlet preference IDs");
    }
  }
  return DDMDisplayRegistryUtil.getDDMDisplay(refererPortletName);
}
