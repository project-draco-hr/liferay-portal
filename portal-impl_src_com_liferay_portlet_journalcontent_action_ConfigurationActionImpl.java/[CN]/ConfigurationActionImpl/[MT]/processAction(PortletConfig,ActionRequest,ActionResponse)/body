{
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  if (!cmd.equals(Constants.UPDATE)) {
    return;
  }
  long groupId=ParamUtil.getLong(actionRequest,"groupId");
  String articleId=ParamUtil.getString(actionRequest,"articleId").toUpperCase();
  String templateId=ParamUtil.getString(actionRequest,"templateId").toUpperCase();
  boolean showAvailableLocales=ParamUtil.getBoolean(actionRequest,"showAvailableLocales");
  String[] extensions=actionRequest.getParameterValues("extensions");
  boolean enablePrint=ParamUtil.getBoolean(actionRequest,"enablePrint");
  boolean enableRatings=ParamUtil.getBoolean(actionRequest,"enableRatings");
  boolean enableComments=ParamUtil.getBoolean(actionRequest,"enableComments");
  boolean enableCommentRatings=ParamUtil.getBoolean(actionRequest,"enableCommentRatings");
  String portletResource=ParamUtil.getString(actionRequest,"portletResource");
  PortletPreferences preferences=PortletPreferencesFactoryUtil.getPortletSetup(actionRequest,portletResource);
  preferences.setValue("group-id",String.valueOf(groupId));
  preferences.setValue("article-id",articleId);
  preferences.setValue("template-id",templateId);
  preferences.setValue("show-available-locales",String.valueOf(showAvailableLocales));
  preferences.setValues("extensions",extensions);
  preferences.setValue("enable-print",String.valueOf(enablePrint));
  preferences.setValue("enable-ratings",String.valueOf(enableRatings));
  preferences.setValue("enable-comments",String.valueOf(enableComments));
  preferences.setValue("enable-comment-ratings",String.valueOf(enableCommentRatings));
  if (SessionErrors.isEmpty(actionRequest)) {
    preferences.store();
    updateContentSearch(actionRequest,portletResource,articleId);
    SessionMessages.add(actionRequest,portletConfig.getPortletName() + ".doConfigure");
  }
  actionResponse.sendRedirect(ParamUtil.getString(actionRequest,"redirect"));
}
