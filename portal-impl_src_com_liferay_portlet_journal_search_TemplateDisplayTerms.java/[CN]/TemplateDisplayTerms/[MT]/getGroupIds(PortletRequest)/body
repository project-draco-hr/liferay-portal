{
  long groupId=ParamUtil.getLong(portletRequest,"groupId");
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  String strutsAction=ParamUtil.getString(portletRequest,"struts_action");
  StringBundler sb=new StringBundler();
  if ((groupId == 0) && Validator.isNull(structureId) && Validator.isNull(templateId)) {
    sb.append(themeDisplay.getScopeGroupId());
  }
 else {
    sb.append(groupId);
  }
  if (strutsAction.equalsIgnoreCase("/journal/select_template")) {
    sb.append(StringPool.COMMA);
    sb.append(themeDisplay.getCompanyGroupId());
  }
  return sb.toString();
}
