{
  HttpServletRequest request=getHttpServletRequest();
  String url=layout.getRegularURL(request) + "?p_p_id='\"><script>alert(1)</script>&p_p_lifecycle=0&" + "p_p_state=exclusive";
  try (CaptureAppender captureAppender=Log4JLoggerTestUtil.configureLog4JLogger(SecurityPortletContainerWrapper.class.getName(),Level.WARN)){
    Map<String,List<String>> responseMap=request(url);
    List<LoggingEvent> loggingEvents=captureAppender.getLoggingEvents();
    Assert.assertEquals(1,loggingEvents.size());
    LoggingEvent loggingEvent=loggingEvents.get(0);
    Assert.assertEquals("Invalid portlet ID '\"><script>alert(1)</script>",loggingEvent.getMessage());
    Assert.assertEquals("200",getString(responseMap,"code"));
  }
 }
