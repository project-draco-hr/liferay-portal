{
  String xsd=buildDLRawMetadataConfig(TikaRawMetadataProcessor._fields);
  Document document=SAXReaderUtil.read(new StringReader(xsd));
  Element rootElement=document.getRootElement();
  List<Element> structureElements=rootElement.elements("structure");
  for (  Element structureElement : structureElements) {
    String name=structureElement.elementText("name");
    String description=structureElement.elementText("description");
    Element structureElementRootElement=structureElement.element("root");
    String elementXsd=structureElementRootElement.asXML();
    DDMStructure ddmStructure=DDMStructureLocalServiceUtil.fetchStructure(groupId,name);
    if (ddmStructure != null) {
      ddmStructure.setXsd(elementXsd);
      DDMStructureLocalServiceUtil.updateDDMStructure(ddmStructure);
    }
 else {
      HashMap<Locale,String> nameMap=new HashMap<Locale,String>();
      nameMap.put(LocaleUtil.getDefault(),name);
      HashMap<Locale,String> descriptionMap=new HashMap<Locale,String>();
      nameMap.put(LocaleUtil.getDefault(),description);
      DDMStructureLocalServiceUtil.addStructure(userId,groupId,PortalUtil.getClassNameId(DLFileEntry.class),name,nameMap,descriptionMap,elementXsd,"xml",serviceContext);
    }
  }
}
