{
  List<Long> ddmStructureIds=new ArrayList<Long>();
  for (  String ddmStructureName : ddmStructureNames) {
    String ddmStructureKey=ddmStructureName;
    DDMStructure ddmStructure=DDMStructureLocalServiceUtil.fetchStructure(groupId,PortalUtil.getClassNameId(DLFileEntryMetadata.class),ddmStructureKey);
    if (ddmStructure == null) {
      continue;
    }
    ddmStructureIds.add(ddmStructure.getStructureId());
  }
  String xsd=getDynamicDDMStructureXSD("document-library-structures.xml",dynamicDDMStructureName);
  serviceContext.setAttribute("xsd",xsd);
  try {
    DLFileEntryTypeLocalServiceUtil.getFileEntryType(groupId,dlFileEntryTypeName);
  }
 catch (  NoSuchFileEntryTypeException nsfete) {
    DLFileEntryTypeLocalServiceUtil.addFileEntryType(userId,groupId,dlFileEntryTypeName,dlFileEntryTypeDescription,ArrayUtil.toArray(ddmStructureIds.toArray(new Long[ddmStructureIds.size()])),serviceContext);
  }
}
