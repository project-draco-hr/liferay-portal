{
  String servletContextName=null;
  try {
    ServletContext ctx=event.getServletContext();
    servletContextName=ctx.getServletContextName();
    if (_log.isDebugEnabled()) {
      _log.debug("Invoking deploy for " + servletContextName);
    }
    PluginPackage pluginPackage=readPluginPackage(ctx);
    if (pluginPackage != null) {
      pluginPackage.setContext(servletContextName);
      event.setPluginPackage(pluginPackage);
      PluginPackageUtil.registerInstalledPluginPackage(pluginPackage);
      if (_log.isInfoEnabled()) {
        _log.info("Plugin package " + pluginPackage.getModuleId() + " registered successfully");
      }
    }
  }
 catch (  Exception e) {
    throw new HotDeployException("Error registering plugins for " + servletContextName,e);
  }
}
