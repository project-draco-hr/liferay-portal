{
  String templateCommunityName;
switch (group.getType()) {
case GroupConstants.TYPE_COMMUNITY_OPEN:
    templateCommunityName=_OPEN_TEMPLATE_COMMUNITY_NAME;
  break;
case GroupConstants.TYPE_COMMUNITY_PRIVATE:
templateCommunityName=_PRIVATE_TEMPLATE_COMMUNITY_NAME;
break;
case GroupConstants.TYPE_COMMUNITY_RESTRICTED:
templateCommunityName=_RESTRICTED_TEMPLATE_COMMUNITY_NAME;
break;
default :
throw new IllegalArgumentException("Invalid community type: " + group.getType());
}
Group templateGroup=null;
try {
templateGroup=GroupLocalServiceUtil.getGroup(group.getCompanyId(),templateCommunityName);
}
 catch (NoSuchGroupException e) {
try {
templateGroup=GroupLocalServiceUtil.getGroup(group.getCompanyId(),_DEFAULT_TEMPLATE_COMMUNITY_NAME);
}
 catch (NoSuchGroupException e1) {
}
}
return templateGroup;
}
