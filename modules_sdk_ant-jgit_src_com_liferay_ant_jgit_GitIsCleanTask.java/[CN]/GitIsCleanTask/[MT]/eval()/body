{
  if (_gitDir == null) {
    Project currentProject=getProject();
    _gitDir=currentProject.getBaseDir();
  }
  if (_path == null) {
    throw new BuildException("Path attribute is required",getLocation());
  }
  FileRepositoryBuilder fileRepositoryBuilder=new FileRepositoryBuilder();
  fileRepositoryBuilder.readEnvironment();
  fileRepositoryBuilder.findGitDir(_gitDir);
  try (Repository repository=fileRepositoryBuilder.build()){
    Git git=new Git(repository);
    StatusCommand statusCommand=git.status();
    statusCommand.addPath(PathUtil.toRelativePath(fileRepositoryBuilder.getGitDir(),_path));
    Status status=statusCommand.call();
    return status.isClean();
  }
 catch (  Exception e) {
    throw new BuildException("Unable to check cleanness for path " + _path,e);
  }
}
