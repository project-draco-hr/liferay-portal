{
  portletDataContext.addPermissions("com.liferay.portlet.dynamicdatamapping",portletDataContext.getScopeGroupId());
  Element rootElement=addExportRootElement();
  rootElement.addAttribute("group-id",String.valueOf(portletDataContext.getScopeGroupId()));
  Element structuresElement=rootElement.addElement("structures");
  List<DDMStructure> ddmStructures=DDMStructureUtil.findByGroupId(portletDataContext.getScopeGroupId());
  for (  DDMStructure structure : ddmStructures) {
    if (portletDataContext.isWithinDateRange(structure.getModifiedDate())) {
      StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,structuresElement,structure);
    }
  }
  Element templatesElement=rootElement.addElement("templates");
  if (portletDataContext.getBooleanParameter(NAMESPACE,"templates")) {
    List<DDMTemplate> templates=DDMTemplateUtil.findByG_C(portletDataContext.getScopeGroupId(),PortalUtil.getClassNameId(DDMStructure.class));
    for (    DDMTemplate template : templates) {
      if (portletDataContext.isWithinDateRange(template.getModifiedDate())) {
        StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,templatesElement,template);
      }
    }
  }
  return rootElement.formattedString();
}
