{
  portletDataContext.importPermissions("com.liferay.portlet.dynamicdatamapping",portletDataContext.getSourceGroupId(),portletDataContext.getScopeGroupId());
  Document document=SAXReaderUtil.read(data);
  Element rootElement=document.getRootElement();
  Element structuresElement=rootElement.element("structures");
  List<Element> structureElements=structuresElement.elements("structure");
  for (  Element structureElement : structureElements) {
    StagedModelDataHandlerUtil.importStagedModel(portletDataContext,structureElement);
  }
  if (portletDataContext.getBooleanParameter(NAMESPACE,"templates")) {
    Element templatesElement=rootElement.element("templates");
    List<Element> templateElements=templatesElement.elements("template");
    for (    Element templateElement : templateElements) {
      StagedModelDataHandlerUtil.importStagedModel(portletDataContext,templateElement);
    }
  }
  return portletPreferences;
}
