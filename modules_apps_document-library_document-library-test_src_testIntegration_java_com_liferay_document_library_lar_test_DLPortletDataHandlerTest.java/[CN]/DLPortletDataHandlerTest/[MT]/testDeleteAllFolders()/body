{
  Group group=GroupTestUtil.addGroup();
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(group.getGroupId(),TestPropsValues.getUserId());
  Folder parentFolder=DLAppServiceUtil.addFolder(group.getGroupId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,"parent",RandomTestUtil.randomString(),serviceContext);
  Folder childFolder=DLAppServiceUtil.addFolder(group.getGroupId(),parentFolder.getFolderId(),"child",RandomTestUtil.randomString(),serviceContext);
  DLTrashServiceUtil.moveFolderToTrash(childFolder.getFolderId());
  DLTrashServiceUtil.moveFolderToTrash(parentFolder.getFolderId());
  DLAppServiceUtil.deleteFolder(parentFolder.getFolderId());
  GroupLocalServiceUtil.deleteGroup(group);
  int foldersCount=DLFolderLocalServiceUtil.getFoldersCount(group.getGroupId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID);
  Assert.assertEquals(0,foldersCount);
}
