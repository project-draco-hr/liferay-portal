{
  try {
    Document doc=DocumentUtil.readDocumentFromXML(data);
    Element root=doc.getRootElement();
    List<Element> structures=root.element("journal-structures").elements("structure");
    Map<String,String> structureIds=context.getNewPrimaryKeysMap(JournalStructure.class);
    for (    Element el : structures) {
      importStructure(context,structureIds,el);
    }
    List<Element> templates=root.element("journal-templates").elements("template");
    Map<String,String> templateIds=context.getNewPrimaryKeysMap(JournalTemplate.class);
    for (    Element el : templates) {
      importTemplate(context,structureIds,templateIds,el);
    }
    List<Element> articles=root.element("journal-articles").elements("article");
    Map<String,String> articleIds=context.getNewPrimaryKeysMap(JournalArticle.class);
    for (    Element el : articles) {
      importArticle(context,structureIds,templateIds,articleIds,el);
    }
    return prefs;
  }
 catch (  Exception e) {
    throw new PortletDataException(e);
  }
}
