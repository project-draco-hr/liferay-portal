{
  try {
    Document doc=DocumentUtil.readDocumentFromXML(data);
    Element root=doc.getRootElement();
    List<Element> structureEls=root.element("structures").elements("structure");
    Map<String,String> structureIds=context.getNewPrimaryKeysMap(JournalStructure.class);
    for (    Element structureEl : structureEls) {
      importStructure(context,structureIds,structureEl);
    }
    List<Element> templateEls=root.element("templates").elements("template");
    Map<String,String> templateIds=context.getNewPrimaryKeysMap(JournalTemplate.class);
    for (    Element templateEl : templateEls) {
      importTemplate(context,structureIds,templateIds,templateEl);
    }
    List<Element> feedEls=root.element("feeds").elements("feed");
    Map<String,String> feedIds=context.getNewPrimaryKeysMap(JournalFeed.class);
    for (    Element feedEl : feedEls) {
      importFeed(context,structureIds,templateIds,feedIds,feedEl);
    }
    if (context.getBooleanParameter(_NAMESPACE,"articles")) {
      List<Element> articleEls=root.element("articles").elements("article");
      Map<String,String> articleIds=context.getNewPrimaryKeysMap(JournalArticle.class);
      for (      Element articleEl : articleEls) {
        importArticle(context,structureIds,templateIds,articleIds,articleEl);
      }
    }
    return prefs;
  }
 catch (  Exception e) {
    throw new PortletDataException(e);
  }
}
