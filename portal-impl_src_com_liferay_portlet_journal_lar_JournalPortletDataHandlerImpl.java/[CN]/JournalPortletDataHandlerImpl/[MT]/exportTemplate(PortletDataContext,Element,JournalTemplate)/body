{
  if (!context.isWithinDateRange(template.getModifiedDate())) {
    return;
  }
  String path=getTemplatePath(context,template);
  Element templateEl=templatesEl.addElement("template");
  templateEl.addAttribute("path",path);
  if (!context.isPathNotProcessed(path)) {
    return;
  }
  if (template.isSmallImage()) {
    Image smallImage=ImageUtil.fetchByPrimaryKey(template.getSmallImageId());
    template.setSmallImageType(smallImage.getType());
    context.addZipEntry(getTemplateSmallImagePath(context,template),smallImage.getTextObj());
  }
  template.setUserUuid(template.getUserUuid());
  context.addZipEntry(path,template);
}
