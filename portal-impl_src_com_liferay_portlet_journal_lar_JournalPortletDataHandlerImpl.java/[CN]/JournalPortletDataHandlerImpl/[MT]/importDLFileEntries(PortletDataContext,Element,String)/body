{
  List<Element> dlReferenceElements=parentElement.elements("dl-reference");
  for (  Element dlReferenceElement : dlReferenceElements) {
    String dlReferencePath=dlReferenceElement.attributeValue("path");
    FileEntry fileEntry=null;
    try {
      fileEntry=(FileEntry)portletDataContext.getZipEntryAsObject(dlReferencePath);
    }
 catch (    Exception e) {
      if (_log.isWarnEnabled()) {
        _log.warn(e);
      }
    }
    if (fileEntry == null) {
      continue;
    }
    fileEntry=FileEntryUtil.fetchByUUID_R(fileEntry.getUuid(),portletDataContext.getGroupId());
    if (fileEntry == null) {
      continue;
    }
    String dlReference="[$dl-reference=" + dlReferencePath + "$]";
    StringBundler sb=new StringBundler(6);
    sb.append("/documents/");
    sb.append(portletDataContext.getScopeGroupId());
    sb.append(StringPool.SLASH);
    sb.append(fileEntry.getFolderId());
    sb.append(StringPool.SLASH);
    sb.append(HttpUtil.encodeURL(HtmlUtil.unescape(fileEntry.getTitle()),true));
    content=StringUtil.replace(content,dlReference,sb.toString());
  }
  return content;
}
