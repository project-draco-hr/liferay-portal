{
  for (int i=0; i < 10; i++) {
    int port=(int)(Math.random() * (_MAX_PORT - _MIN_PORT));
    try {
      ServerSocket serverSocket=new ServerSocket(port);
      serverSocket.close();
      if (_log.isInfoEnabled()) {
        _log.info("The server is going to be started in the port: " + port);
      }
      return port;
    }
 catch (    IOException ex) {
      continue;
    }
  }
  throw new IllegalStateException("It is not possible to find a free port to start the server");
}
