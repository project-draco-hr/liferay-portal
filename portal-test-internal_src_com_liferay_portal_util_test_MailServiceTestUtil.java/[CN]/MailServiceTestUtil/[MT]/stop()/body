{
  if ((_smtpServer != null) && _smtpServer.isStopped()) {
    throw new IllegalStateException("Server is already stopped");
  }
  _smtpServer.stop();
  _smtpServer=null;
  try {
    _prefsPropsTemporarySwapper.close();
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  MailServiceUtil.clearSession();
}
