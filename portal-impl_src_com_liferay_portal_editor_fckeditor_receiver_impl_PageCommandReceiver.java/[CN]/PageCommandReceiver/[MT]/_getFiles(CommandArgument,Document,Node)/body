{
  if (arg.getCurrentFolder().equals(StringPool.SLASH)) {
    return;
  }
  Element filesEl=doc.createElement("Files");
  root.appendChild(filesEl);
  Group group=arg.getCurrentGroup();
  List layouts=LayoutLocalServiceUtil.getLayouts(group.getGroupId(),false,LayoutImpl.DEFAULT_PARENT_LAYOUT_ID);
  if (("/" + arg.getCurrentGroupName() + "/").equals(arg.getCurrentFolder())) {
    for (int i=0; i < layouts.size(); i++) {
      Layout layout=(Layout)layouts.get(i);
      Element fileEl=doc.createElement("File");
      filesEl.appendChild(fileEl);
      fileEl.setAttribute("name",_getLayoutName(layout));
      fileEl.setAttribute("desc",_getLayoutName(layout));
      fileEl.setAttribute("size",StringPool.BLANK);
      fileEl.setAttribute("url",PortalUtil.getLayoutURL(layout,arg.getThemeDisplay()));
    }
  }
 else {
    String layoutName=_getLayoutName(arg.getCurrentFolder());
    Layout layout=null;
    for (int i=0; i < layouts.size(); i++) {
      layout=_getLayout(layoutName,(Layout)layouts.get(i));
      if (layout != null) {
        break;
      }
    }
    if (layout == null) {
      return;
    }
    List layoutChildren=layout.getChildren();
    for (int i=0; i < layoutChildren.size(); i++) {
      layout=(Layout)layoutChildren.get(i);
      Element fileEl=doc.createElement("File");
      filesEl.appendChild(fileEl);
      fileEl.setAttribute("name",_getLayoutName(layout));
      fileEl.setAttribute("desc",_getLayoutName(layout));
      fileEl.setAttribute("size",getSize());
      fileEl.setAttribute("url",PortalUtil.getLayoutURL(layout,arg.getThemeDisplay()));
    }
  }
}
