{
  if (arg.getCurrentFolder().equals(StringPool.SLASH)) {
    return;
  }
  Element filesEl=doc.createElement("Files");
  root.appendChild(filesEl);
  Group group=arg.getCurrentGroup();
  List<Layout> layouts=LayoutLocalServiceUtil.getLayouts(group.getGroupId(),false,LayoutConstants.DEFAULT_PARENT_LAYOUT_ID);
  if (("/" + arg.getCurrentGroupName() + "/").equals(arg.getCurrentFolder())) {
    for (    Layout layout : layouts) {
      Element fileEl=doc.createElement("File");
      filesEl.appendChild(fileEl);
      fileEl.setAttribute("name",_getLayoutName(layout));
      fileEl.setAttribute("desc",_getLayoutName(layout));
      fileEl.setAttribute("size",StringPool.BLANK);
      fileEl.setAttribute("url",PortalUtil.getLayoutURL(layout,arg.getThemeDisplay(),false));
    }
  }
 else {
    String layoutName=_getLayoutName(arg.getCurrentFolder());
    Layout layout=null;
    for (int i=0; i < layouts.size(); i++) {
      layout=_getLayout(layoutName,layouts.get(i));
      if (layout != null) {
        break;
      }
    }
    if (layout == null) {
      return;
    }
    List<Layout> layoutChildren=layout.getChildren();
    for (int i=0; i < layoutChildren.size(); i++) {
      layout=layoutChildren.get(i);
      Element fileEl=doc.createElement("File");
      filesEl.appendChild(fileEl);
      fileEl.setAttribute("name",_getLayoutName(layout));
      fileEl.setAttribute("desc",_getLayoutName(layout));
      fileEl.setAttribute("size",getSize());
      fileEl.setAttribute("url",PortalUtil.getLayoutURL(layout,arg.getThemeDisplay(),false));
    }
  }
}
