{
  String destinationName=GetterUtil.getString(message.getString(SchedulerEngine.DESTINATION_NAME));
  String jobName=message.getString(SchedulerEngine.JOB_NAME);
  String groupName=message.getString(SchedulerEngine.GROUP_NAME);
  if (destinationName.equals(DestinationNames.SCHEDULER_DISPATCH)) {
    Trigger trigger=_schedulerEntry.getTrigger();
    if (!jobName.equals(trigger.getJobName()) || !groupName.equals(trigger.getGroupName())) {
      return;
    }
  }
  try {
    _messageListener.receive(message);
  }
 catch (  Exception e) {
    handleException(message,e);
    if (e instanceof MessageListenerException) {
      throw (MessageListenerException)e;
    }
 else {
      throw new MessageListenerException(e);
    }
  }
 finally {
    TriggerState triggerState=null;
    if (message.getBoolean(SchedulerEngine.DISABLE)) {
      triggerState=TriggerState.COMPLETE;
      if (destinationName.equals(DestinationNames.SCHEDULER_DISPATCH)) {
        MessageBusUtil.unregisterMessageListener(destinationName,this);
      }
      StorageType storageType=(StorageType)message.get(SchedulerEngine.STORAGE_TYPE);
      try {
        SchedulerEngineHelperUtil.delete(jobName,groupName,storageType);
      }
 catch (      SchedulerException se) {
        if (_log.isInfoEnabled()) {
          _log.info("Unable to delete job " + jobName + " in group "+ groupName,se);
        }
      }
    }
 else {
      triggerState=TriggerState.NORMAL;
    }
    try {
      SchedulerEngineHelperUtil.auditSchedulerJobs(message,triggerState);
    }
 catch (    Exception e) {
      if (_log.isInfoEnabled()) {
        _log.info("Unable to send audit message",e);
      }
    }
  }
}
