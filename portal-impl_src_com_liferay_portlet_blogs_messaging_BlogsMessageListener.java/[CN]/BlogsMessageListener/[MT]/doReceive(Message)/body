{
  long companyId=message.getLong("companyId");
  long groupId=message.getLong("groupId");
  long entryId=message.getLong("entryId");
  String fromName=message.getString("fromName");
  String fromAddress=message.getString("fromAddress");
  String subject=message.getString("subject");
  String body=message.getString("body");
  String replyToAddress=message.getString("replyToAddress");
  String mailId=message.getString("mailId");
  boolean htmlFormat=message.getBoolean("htmlFormat");
  Set<Long> sent=new HashSet<Long>();
  if (_log.isInfoEnabled()) {
    _log.info("Sending notifications for {mailId=" + mailId + ", entryId="+ entryId+ "}");
  }
  List<Subscription> subscriptions=SubscriptionLocalServiceUtil.getSubscriptions(companyId,BlogsEntry.class.getName(),groupId);
  sendEmail(groupId,fromName,fromAddress,subject,body,subscriptions,sent,replyToAddress,mailId,htmlFormat);
  if (_log.isInfoEnabled()) {
    _log.info("Finished sending notifications");
  }
}
