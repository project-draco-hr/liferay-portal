{
  JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
  try {
    SetupWizardUtil.testDatabase(request);
    jsonObject.put("success",true);
    putMessage(request,jsonObject,"database-connection-was-established-successfully");
  }
 catch (  ClassNotFoundException cnfe) {
    putMessage(request,jsonObject,"database-driver-x-is-not-present",cnfe.getLocalizedMessage());
  }
catch (  SQLException sqle) {
    putMessage(request,jsonObject,"database-connection-could-not-be-established");
  }
  response.setContentType(ContentTypes.APPLICATION_JSON);
  response.setHeader(HttpHeaders.CACHE_CONTROL,HttpHeaders.CACHE_CONTROL_NO_CACHE_VALUE);
  ServletResponseUtil.write(response,jsonObject.toString());
}
