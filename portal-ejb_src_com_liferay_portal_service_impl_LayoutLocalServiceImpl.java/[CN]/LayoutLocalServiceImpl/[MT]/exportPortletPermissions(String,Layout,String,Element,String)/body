{
  Element el=parentEl.addElement(elName);
  try {
    String name=Portlet.getRootPortletId(portletId);
    String primKey=layout.getPlid() + Portlet.LAYOUT_SEPARATOR + portletId;
    Resource resource=ResourceLocalServiceUtil.getResource(layout.getCompanyId(),name,Resource.TYPE_CLASS,Resource.SCOPE_INDIVIDUAL,primKey);
    List permissions=PermissionLocalServiceUtil.getGroupPermissions(groupId,resource.getResourceId());
    List actions=ResourceActionsUtil.getActions(permissions);
    for (int i=0; i < actions.size(); i++) {
      String action=(String)actions.get(i);
      el.addElement("action-key").addText(action);
    }
  }
 catch (  NoSuchResourceException nsre) {
    _log.warn(nsre);
  }
}
