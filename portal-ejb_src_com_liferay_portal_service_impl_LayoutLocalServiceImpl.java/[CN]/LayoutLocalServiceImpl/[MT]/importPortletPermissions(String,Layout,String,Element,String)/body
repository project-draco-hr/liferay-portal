{
  Element el=parentEl.element(elName);
  String name=Portlet.getRootPortletId(portletId);
  String primKey=layout.getPlid() + Portlet.LAYOUT_SEPARATOR + portletId;
  Portlet portlet=PortletLocalServiceUtil.getPortletById(layout.getCompanyId(),name);
  if (portlet == null) {
    if (_log.isDebugEnabled()) {
      _log.debug("Do not import portlet permissions for " + portletId + " because the portlet does not exist");
    }
    return;
  }
  Resource resource=null;
  try {
    resource=ResourceLocalServiceUtil.getResource(layout.getCompanyId(),name,Resource.TYPE_CLASS,Resource.SCOPE_INDIVIDUAL,primKey);
  }
 catch (  NoSuchResourceException nsre) {
    ResourceLocalServiceUtil.addResources(layout.getCompanyId(),layout.getGroupId(),null,name,primKey,true,true,true);
    resource=ResourceLocalServiceUtil.getResource(layout.getCompanyId(),name,Resource.TYPE_CLASS,Resource.SCOPE_INDIVIDUAL,primKey);
  }
  List actions=new ArrayList();
  Iterator itr=el.elements("action-key").iterator();
  while (itr.hasNext()) {
    Element actionEl=(Element)itr.next();
    actions.add(actionEl.getText());
  }
  PermissionLocalServiceUtil.setGroupPermissions(groupId,(String[])actions.toArray(new String[0]),resource.getResourceId());
}
