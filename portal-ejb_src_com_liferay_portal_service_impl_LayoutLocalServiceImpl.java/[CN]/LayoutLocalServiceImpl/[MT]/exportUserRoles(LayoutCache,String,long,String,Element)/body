{
  Element userRolesEl=DocumentHelper.createElement("user-roles");
  List users=layoutCache.getGroupUsers(groupId);
  for (int i=0; i < users.size(); i++) {
    User user=(User)users.get(i);
    String userId=user.getUserId();
    String emailAddress=user.getEmailAddress();
    List userRoles=layoutCache.getUserRoles(userId);
    Element userEl=exportRoles(companyId,resourceName,ResourceImpl.SCOPE_GROUP,String.valueOf(groupId),userRolesEl,"user",userRoles);
    if (userEl.elements().isEmpty()) {
      userRolesEl.remove(userEl);
    }
 else {
      userEl.addAttribute("email-address",emailAddress);
    }
  }
  if (!userRolesEl.elements().isEmpty()) {
    parentEl.add(userRolesEl);
  }
}
