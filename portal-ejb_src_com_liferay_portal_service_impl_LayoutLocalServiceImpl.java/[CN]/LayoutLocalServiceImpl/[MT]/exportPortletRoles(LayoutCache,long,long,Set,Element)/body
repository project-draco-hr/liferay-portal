{
  Iterator itr=portletIds.iterator();
  while (itr.hasNext()) {
    String portletId=(String)itr.next();
    String resourceName=PortletImpl.getRootPortletId(portletId);
    Element portletEl=rolesEl.addElement("portlet");
    portletEl.addAttribute("portlet-id",portletId);
    exportGroupRoles(layoutCache,companyId,groupId,resourceName,"community",portletEl);
    exportUserRoles(layoutCache,companyId,groupId,resourceName,portletEl);
    exportInheritedRoles(layoutCache,companyId,groupId,resourceName,"organization",portletEl);
    exportInheritedRoles(layoutCache,companyId,groupId,resourceName,"location",portletEl);
    exportInheritedRoles(layoutCache,companyId,groupId,resourceName,"user-group",portletEl);
    if (portletEl.elements().isEmpty()) {
      rolesEl.remove(portletEl);
    }
  }
}
