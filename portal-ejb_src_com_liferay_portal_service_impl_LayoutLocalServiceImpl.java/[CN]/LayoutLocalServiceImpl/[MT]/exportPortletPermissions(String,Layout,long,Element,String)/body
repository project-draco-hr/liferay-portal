{
  Element el=parentEl.addElement(elName);
  try {
    String name=PortletImpl.getRootPortletId(portletId);
    String primKey=PortletPermission.getPrimaryKey(layout.getPlid(),portletId);
    Resource resource=ResourceLocalServiceUtil.getResource(layout.getCompanyId(),name,ResourceImpl.TYPE_CLASS,ResourceImpl.SCOPE_INDIVIDUAL,primKey);
    List permissions=PermissionLocalServiceUtil.getGroupPermissions(groupId,resource.getResourceId());
    List actions=ResourceActionsUtil.getActions(permissions);
    for (int i=0; i < actions.size(); i++) {
      String action=(String)actions.get(i);
      el.addElement("action-key").addText(action);
    }
  }
 catch (  NoSuchResourceException nsre) {
    _log.warn(nsre);
  }
}
