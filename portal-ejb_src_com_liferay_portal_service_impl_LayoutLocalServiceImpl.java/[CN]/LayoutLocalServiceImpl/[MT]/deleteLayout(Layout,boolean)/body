{
  List childLayouts=LayoutUtil.findByO_P(layout.getOwnerId(),layout.getLayoutId());
  for (int i=0; i < childLayouts.size(); i++) {
    Layout childLayout=(Layout)childLayouts.get(i);
    deleteLayout(childLayout,updateLayoutSet);
  }
  PortletPreferencesLocalServiceUtil.deleteAllByLayout(layout.getPrimaryKey());
  JournalContentSearchLocalServiceUtil.deleteLayoutContentSearches(layout.getLayoutId(),layout.getOwnerId());
  if (updateLayoutSet) {
    LayoutSetLocalServiceUtil.updatePageCount(layout.getOwnerId());
  }
  ResourceLocalServiceUtil.deleteResource(layout.getCompanyId(),Layout.class.getName(),Resource.TYPE_CLASS,Resource.SCOPE_INDIVIDUAL,layout.getPrimaryKey().toString());
  LayoutUtil.remove(layout.getPrimaryKey());
}
