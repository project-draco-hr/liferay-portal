{
  parentLayoutId=getParentLayoutId(groupId,privateLayout,parentLayoutId);
  Locale locale=LocaleUtil.fromLanguageId(languageId);
  validate(groupId,privateLayout,layoutId,parentLayoutId,name,type,hidden,friendlyURL);
  validateParentLayoutId(groupId,privateLayout,layoutId,parentLayoutId);
  Layout layout=LayoutUtil.findByG_P_L(groupId,privateLayout,layoutId);
  if (parentLayoutId != layout.getParentLayoutId()) {
    layout.setPriority(getNextPriority(groupId,privateLayout,parentLayoutId));
  }
  layout.setParentLayoutId(parentLayoutId);
  layout.setName(name,locale);
  layout.setTitle(title,locale);
  layout.setType(type);
  layout.setHidden(hidden);
  layout.setFriendlyURL(friendlyURL);
  if (iconImage != null) {
    layout.setIconImage(iconImage.booleanValue());
  }
  LayoutUtil.update(layout);
  if (iconImage != null) {
    if (!iconImage.booleanValue()) {
      ImageLocalUtil.remove(layout.getIconImageId());
    }
 else     if ((iconBytes != null) && (iconBytes.length > 0)) {
      ImageLocalUtil.put(layout.getIconImageId(),iconBytes);
    }
  }
  return layout;
}
