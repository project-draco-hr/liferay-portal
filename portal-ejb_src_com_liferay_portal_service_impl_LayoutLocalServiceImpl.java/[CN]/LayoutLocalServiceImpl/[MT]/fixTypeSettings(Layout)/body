{
  if (layout.getType().equals(LayoutImpl.TYPE_URL)) {
    Properties typeSettings=layout.getTypeSettingsProperties();
    String url=typeSettings.getProperty("url");
    if (url != null && (url.startsWith(PropsUtil.get(PropsUtil.LAYOUT_FRIENDLY_URL_PRIVATE_SERVLET_MAPPING)) || url.startsWith(PropsUtil.get(PropsUtil.LAYOUT_FRIENDLY_URL_PUBLIC_SERVLET_MAPPING)))) {
      int slash2=url.indexOf("/",1);
      if (slash2 > 0) {
        int slash3=url.indexOf("/",slash2 + 1);
        if (slash3 > slash2) {
          String fixedUrl=url.substring(0,slash2) + layout.getGroup().getFriendlyURL() + url.substring(slash3);
          typeSettings.setProperty("url",fixedUrl);
        }
      }
    }
  }
}
