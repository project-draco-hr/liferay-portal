{
  Element entityRolesEl=DocumentHelper.createElement(entityName + "-roles");
  Map entityMap=getEntityMap(companyId,entityName);
  Iterator itr=entityMap.entrySet().iterator();
  while (itr.hasNext()) {
    Map.Entry entry=(Map.Entry)itr.next();
    String name=entry.getKey().toString();
    long entityGroupId=((Long)entry.getValue()).longValue();
    List entityRoles=RoleLocalServiceUtil.getGroupRoles(entityGroupId);
    Element entityEl=exportRoles(companyId,resourceName,ResourceImpl.SCOPE_GROUP,String.valueOf(groupId),entityRolesEl,entityName,entityRoles);
    if (entityEl.elements().isEmpty()) {
      entityRolesEl.remove(entityEl);
    }
 else {
      entityEl.addAttribute("name",name);
    }
  }
  if (!entityRolesEl.elements().isEmpty()) {
    parentEl.add(entityRolesEl);
  }
}
