{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  List<String[]> categoryIdsTitles=new ArrayList<>();
  String categoryIds=StringPool.BLANK;
  if (Validator.isNotNull(_categoryIds)) {
    categoryIds=_categoryIds;
  }
  if (Validator.isNull(_className)) {
    if (!_ignoreRequestValue) {
      String categoryIdsParam=request.getParameter(_hiddenInput);
      if (categoryIdsParam != null) {
        categoryIds=categoryIdsParam;
      }
    }
    String[] categoryIdsTitle=AssetCategoryUtil.getCategoryIdsTitles(categoryIds,StringPool.BLANK,0,themeDisplay);
    categoryIdsTitles.add(categoryIdsTitle);
    return categoryIdsTitles;
  }
  try {
    for (    AssetVocabulary vocabulary : getVocabularies()) {
      String categoryNames=StringPool.BLANK;
      if (Validator.isNotNull(_className) && (_classPK > 0)) {
        List<AssetCategory> categories=AssetCategoryServiceUtil.getCategories(_className,_classPK);
        categoryIds=ListUtil.toString(categories,AssetCategory.CATEGORY_ID_ACCESSOR);
        categoryNames=ListUtil.toString(categories,AssetCategory.NAME_ACCESSOR);
      }
      if (!_ignoreRequestValue) {
        String categoryIdsParam=request.getParameter(_hiddenInput + StringPool.UNDERLINE + vocabulary.getVocabularyId());
        if (Validator.isNotNull(categoryIdsParam)) {
          categoryIds=categoryIdsParam;
        }
      }
      String[] categoryIdsTitle=AssetCategoryUtil.getCategoryIdsTitles(categoryIds,categoryNames,vocabulary.getVocabularyId(),themeDisplay);
      categoryIdsTitles.add(categoryIdsTitle);
    }
  }
 catch (  Exception e) {
  }
  return categoryIdsTitles;
}
