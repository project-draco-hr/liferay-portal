{
  long groupId=0;
  String name=null;
  String primKey=null;
  if (plid > 0) {
    Layout layout=LayoutLocalServiceUtil.getLayout(plid);
    groupId=layout.getGroupId();
    name=PortletImpl.getRootPortletId(portletId);
    primKey=getPrimaryKey(plid,portletId);
    if (!strict) {
      if (LayoutPermissionUtil.contains(permissionChecker,groupId,layout.isPrivateLayout(),layout.getLayoutId(),ActionKeys.UPDATE) && hasLayoutManagerPermission(portletId,actionId)) {
        return true;
      }
    }
  }
 else {
    name=portletId;
    primKey=portletId;
  }
  return permissionChecker.hasPermission(groupId,name,primKey,actionId);
}
