{
  LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
  Portlet portlet=PortletLocalServiceUtil.getPortletById(layout.getCompanyId(),portletId);
  if (layoutTypePortlet.isCustomizedView() && layoutTypePortlet.isPortletCustomizable(portletId) && LayoutPermissionUtil.contains(permissionChecker,layout,ActionKeys.CUSTOMIZE)) {
    if (actionId.equals(ActionKeys.VIEW)) {
      return true;
    }
 else     if (actionId.equals(ActionKeys.CONFIGURATION) && portlet.isPreferencesUniquePerLayout()) {
      return true;
    }
  }
  return false;
}
