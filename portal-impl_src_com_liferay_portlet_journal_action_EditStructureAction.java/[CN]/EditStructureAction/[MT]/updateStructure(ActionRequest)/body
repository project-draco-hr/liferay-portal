{
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  Layout layout=(Layout)actionRequest.getAttribute(WebKeys.LAYOUT);
  long groupId=ParamUtil.getLong(actionRequest,"groupId");
  String structureId=ParamUtil.getString(actionRequest,"structureId");
  boolean autoStructureId=ParamUtil.getBoolean(actionRequest,"autoStructureId");
  String name=ParamUtil.getString(actionRequest,"name");
  String description=ParamUtil.getString(actionRequest,"description");
  String xsd=ParamUtil.getString(actionRequest,"xsd");
  String parentStructureId=ParamUtil.getString(actionRequest,"parentStructureId");
  String[] communityPermissions=actionRequest.getParameterValues("communityPermissions");
  String[] guestPermissions=actionRequest.getParameterValues("guestPermissions");
  JournalStructure structure=null;
  if (cmd.equals(Constants.ADD)) {
    structure=JournalStructureServiceUtil.addStructure(structureId,autoStructureId,layout.getPlid(),name,description,xsd,parentStructureId,communityPermissions,guestPermissions);
  }
 else {
    structure=JournalStructureServiceUtil.updateStructure(groupId,structureId,name,description,xsd,parentStructureId);
  }
  JournalUtil.addRecentStructure(actionRequest,structure);
  return structure;
}
