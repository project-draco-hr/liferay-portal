{
  PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
  if (permissionChecker.isCompanyAdmin()) {
    return true;
  }
  Group group=themeDisplay.getScopeGroup();
  long plid=LayoutConstants.DEFAULT_PLID;
  if (category.equals(PortletCategoryKeys.CONTENT)) {
    plid=group.getDefaultPublicPlid();
    if (plid == LayoutConstants.DEFAULT_PLID) {
      plid=group.getDefaultPrivatePlid();
    }
  }
  if (category.equals(PortletCategoryKeys.CONTENT) && permissionChecker.isGroupAdmin(group.getGroupId()) && !group.isUser()) {
    return true;
  }
  long groupId=group.getGroupId();
  if (category.equals(PortletCategoryKeys.PORTAL) || category.equals(PortletCategoryKeys.SERVER)) {
    groupId=0;
  }
  if (PortletPermissionUtil.contains(permissionChecker,groupId,plid,portlet.getPortletId(),ActionKeys.ACCESS_IN_CONTROL_PANEL,true)) {
    return true;
  }
  return isVisible(themeDisplay.getPermissionChecker(),portlet);
}
