{
  Company company=addCompany();
  long companyId=company.getCompanyId();
  long userId=UserLocalServiceUtil.getDefaultUserId(companyId);
  Group parentGroup=GroupTestUtil.addGroup(companyId,userId,GroupConstants.DEFAULT_PARENT_GROUP_ID,ServiceTestUtil.randomString(),ServiceTestUtil.randomString());
  Group subGroup=GroupTestUtil.addGroup(companyId,userId,parentGroup.getGroupId(),ServiceTestUtil.randomString(),ServiceTestUtil.randomString());
  addUser(companyId,userId,subGroup.getGroupId(),getServiceContext(companyId));
  CompanyLocalServiceUtil.deleteCompany(company.getCompanyId());
  parentGroup=GroupLocalServiceUtil.fetchGroup(parentGroup.getGroupId());
  Assert.assertNull(parentGroup);
  subGroup=GroupLocalServiceUtil.fetchGroup(subGroup.getGroupId());
  Assert.assertNull(subGroup);
}
