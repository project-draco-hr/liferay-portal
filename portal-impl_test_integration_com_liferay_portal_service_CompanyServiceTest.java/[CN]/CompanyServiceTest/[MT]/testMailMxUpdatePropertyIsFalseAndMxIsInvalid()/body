{
  Company company=addCompany();
  String originalMx=company.getMx();
  String invalidMx=StringPool.BLANK;
  Field field=ReflectionUtil.getDeclaredField(PropsValues.class,"MAIL_MX_UPDATE");
  Object value=field.get(null);
  try {
    field.set(null,Boolean.FALSE);
    CompanyLocalServiceUtil.updateCompany(company.getCompanyId(),company.getVirtualHostname(),invalidMx,company.getMaxUsers(),company.getActive());
    company=CompanyLocalServiceUtil.getCompany(company.getCompanyId());
    String updatedMx=company.getMx();
    Assert.assertEquals(originalMx,updatedMx);
  }
  finally {
    CompanyLocalServiceUtil.deleteCompany(company.getCompanyId());
    field.set(null,value);
  }
}
