{
  BowerModule bowerModule=getBowerModule(bowerJSONResource.openInputStream());
  String bundleVersion=analyzer.getBundleVersion();
  if (bundleVersion == null) {
    Version version=null;
    try {
      version=new Version(bowerModule.version);
    }
 catch (    IllegalArgumentException iae) {
      String sanitizedQualifier=bowerModule.version.replaceAll("[^-_\\da-zA-Z]","");
      version=new Version("0.0.0." + sanitizedQualifier);
    }
    analyzer.setBundleVersion(version.toString());
  }
  Parameters parameters=new Parameters();
  Attrs attrs=new Attrs();
  String bowerName=bowerModule.name;
  String webContextPath=analyzer.getProperty(WEB_CONTEXTPATH);
  if ((webContextPath == null) && (bowerName != null)) {
    if (bowerName.indexOf('/') == 0) {
      bowerName=bowerName.substring(1);
    }
    analyzer.setProperty(WEB_CONTEXTPATH,'/' + bowerName + "-"+ analyzer.getBundleVersion());
  }
  attrs.put(OSGI_WEBRESOURCE,bowerName);
  attrs.put(Constants.VERSION_ATTRIBUTE + ":Version",analyzer.getBundleVersion());
  parameters.add(OSGI_WEBRESOURCE,attrs);
  setCapabilities(analyzer,Constants.PROVIDE_CAPABILITY,parameters);
  return bowerModule;
}
