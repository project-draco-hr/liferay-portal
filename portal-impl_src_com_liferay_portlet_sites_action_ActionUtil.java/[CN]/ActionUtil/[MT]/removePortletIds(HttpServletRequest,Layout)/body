{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
  List<String> portletIds=layoutTypePortlet.getPortletIds();
  for (  String portletId : portletIds) {
    layoutTypePortlet.removePortletId(themeDisplay.getUserId(),portletId);
  }
  LayoutServiceUtil.updateLayout(layout.getGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),layout.getTypeSettings());
}
