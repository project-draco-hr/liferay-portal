{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  String cmd=ParamUtil.getString(request,Constants.CMD);
  Group group=null;
  if (!cmd.equals(Constants.ADD)) {
    long groupId=ParamUtil.getLong(request,"groupId");
    if (groupId > 0) {
      group=GroupLocalServiceUtil.getGroup(groupId);
    }
 else {
      group=themeDisplay.getScopeGroup();
    }
  }
  request.setAttribute(WebKeys.GROUP,group);
  return group;
}
