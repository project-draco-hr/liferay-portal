{
  String path=GetterUtil.getString(request.getPathInfo());
  if (Validator.isNull(path)) {
    return null;
  }
  String i18nLanguageId=request.getServletPath();
  int pos=i18nLanguageId.lastIndexOf(CharPool.SLASH);
  i18nLanguageId=i18nLanguageId.substring(pos + 1);
  if (_log.isDebugEnabled()) {
    _log.debug("Language ID " + i18nLanguageId);
  }
  if (Validator.isNull(i18nLanguageId)) {
    return null;
  }
  String i18nPath=StringPool.SLASH + i18nLanguageId;
  Locale locale=LocaleUtil.fromLanguageId(i18nLanguageId);
  if (Validator.isNull(locale.getCountry())) {
    locale=LanguageUtil.getLocale(locale.getLanguage());
    i18nLanguageId=LocaleUtil.toLanguageId(locale);
  }
  if (!PropsValues.LOCALE_USE_DEFAULT_IF_NOT_AVAILABLE && !LanguageUtil.isAvailableLocale(i18nLanguageId)) {
    return null;
  }
  String redirect=path;
  if (_log.isDebugEnabled()) {
    _log.debug("Redirect " + redirect);
  }
  return new I18nData(i18nPath,locale.getLanguage(),i18nLanguageId,redirect);
}
