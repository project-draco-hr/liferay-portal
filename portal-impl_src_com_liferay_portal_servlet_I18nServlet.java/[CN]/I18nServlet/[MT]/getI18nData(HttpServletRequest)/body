{
  String path=GetterUtil.getString(request.getPathInfo());
  if (Validator.isNull(path)) {
    return null;
  }
  String i18nLanguageId=request.getServletPath();
  int pos=i18nLanguageId.lastIndexOf(CharPool.SLASH);
  i18nLanguageId=i18nLanguageId.substring(pos + 1);
  if (_log.isDebugEnabled()) {
    _log.debug("Language ID " + i18nLanguageId);
  }
  if (Validator.isNull(i18nLanguageId)) {
    return null;
  }
  String i18nPath=StringPool.SLASH + i18nLanguageId;
  Locale locale=LocaleUtil.fromLanguageId(i18nLanguageId,true,false);
  String i18nLanguageCode=i18nLanguageId;
  if ((locale == null) || Validator.isNull(locale.getCountry())) {
    locale=LanguageUtil.getLocale(i18nLanguageCode);
  }
  if (locale != null) {
    i18nLanguageId=LocaleUtil.toLanguageId(locale);
    i18nLanguageCode=locale.getLanguage();
  }
  if (!PropsValues.LOCALE_USE_DEFAULT_IF_NOT_AVAILABLE && !LanguageUtil.isAvailableLocale(i18nLanguageId)) {
    return null;
  }
  String redirect=path;
  if (_log.isDebugEnabled()) {
    _log.debug("Redirect " + redirect);
  }
  return new I18nData(i18nPath,i18nLanguageCode,i18nLanguageId,redirect);
}
