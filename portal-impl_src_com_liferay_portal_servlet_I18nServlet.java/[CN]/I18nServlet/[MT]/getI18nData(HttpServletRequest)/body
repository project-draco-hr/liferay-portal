{
  String path=request.getRequestURI();
  String contextPath=request.getContextPath();
  String servletPath=request.getServletPath();
  path=path.substring(contextPath.length() + servletPath.length());
  if (Validator.isNull(path)) {
    return null;
  }
  String i18nLanguageId=servletPath;
  int pos=i18nLanguageId.lastIndexOf(CharPool.SLASH);
  i18nLanguageId=i18nLanguageId.substring(pos + 1);
  if (_log.isDebugEnabled()) {
    _log.debug("Language ID " + i18nLanguageId);
  }
  if (Validator.isNull(i18nLanguageId)) {
    return null;
  }
  String i18nPath=StringPool.SLASH + i18nLanguageId;
  Locale locale=LocaleUtil.fromLanguageId(i18nLanguageId);
  if (Validator.isNull(locale.getCountry())) {
    locale=LanguageUtil.getLocale(locale.getLanguage());
    i18nLanguageId=LocaleUtil.toLanguageId(locale);
  }
  String redirect=path;
  if (_log.isDebugEnabled()) {
    _log.debug("Redirect " + redirect);
  }
  return new String[]{i18nLanguageId,i18nPath,redirect};
}
