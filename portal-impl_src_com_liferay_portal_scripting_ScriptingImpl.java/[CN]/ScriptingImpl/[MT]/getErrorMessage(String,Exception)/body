{
  StringBundler sb=new StringBundler();
  sb.append(getErrorMessage(e));
  sb.append(StringPool.NEW_LINE);
  LineNumberReader lineNumberReader=null;
  try {
    lineNumberReader=new LineNumberReader(new UnsyncStringReader(script));
    while (true) {
      String line=lineNumberReader.readLine();
      if (line == null) {
        break;
      }
      sb.append("Line ");
      sb.append(lineNumberReader.getLineNumber());
      sb.append(": ");
      sb.append(line);
      sb.append(StringPool.NEW_LINE);
    }
  }
 catch (  IOException ioe) {
    sb.setIndex(0);
    sb.append(getErrorMessage(e));
    sb.append(StringPool.NEW_LINE);
    sb.append(script);
  }
 finally {
    if (lineNumberReader != null) {
      try {
        lineNumberReader.close();
      }
 catch (      IOException ioe) {
      }
    }
  }
  return sb.toString();
}
