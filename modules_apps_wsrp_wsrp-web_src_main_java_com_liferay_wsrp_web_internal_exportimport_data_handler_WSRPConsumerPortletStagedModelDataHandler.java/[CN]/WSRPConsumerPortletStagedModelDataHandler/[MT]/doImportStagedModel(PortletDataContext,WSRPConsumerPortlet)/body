{
  Map<Long,Long> wsrpConsumerIds=(Map<Long,Long>)portletDataContext.getNewPrimaryKeysMap(WSRPConsumer.class);
  long wsrpConsumerId=MapUtil.getLong(wsrpConsumerIds,wsrpConsumerPortlet.getWsrpConsumerId(),wsrpConsumerPortlet.getWsrpConsumerId());
  ServiceContext serviceContext=portletDataContext.createServiceContext(wsrpConsumerPortlet);
  WSRPConsumerPortlet importedWSRPConsumerPortlet=null;
  if (portletDataContext.isDataStrategyMirror()) {
    WSRPConsumerPortlet existingWSRPConsumerPortlet=WSRPConsumerPortletLocalServiceUtil.fetchWSRPConsumerPortletByUuidAndCompanyId(wsrpConsumerPortlet.getUuid(),portletDataContext.getCompanyId());
    if (existingWSRPConsumerPortlet == null) {
      serviceContext.setUuid(wsrpConsumerPortlet.getUuid());
      importedWSRPConsumerPortlet=WSRPConsumerPortletLocalServiceUtil.addWSRPConsumerPortlet(wsrpConsumerId,wsrpConsumerPortlet.getName(),wsrpConsumerPortlet.getPortletHandle(),serviceContext);
    }
 else {
      existingWSRPConsumerPortlet.setWsrpConsumerId(wsrpConsumerId);
      existingWSRPConsumerPortlet.setName(wsrpConsumerPortlet.getName());
      existingWSRPConsumerPortlet.setPortletHandle(wsrpConsumerPortlet.getPortletHandle());
      importedWSRPConsumerPortlet=WSRPConsumerPortletLocalServiceUtil.updateWSRPConsumerPortlet(existingWSRPConsumerPortlet);
    }
  }
 else {
    importedWSRPConsumerPortlet=WSRPConsumerPortletLocalServiceUtil.addWSRPConsumerPortlet(wsrpConsumerId,wsrpConsumerPortlet.getName(),wsrpConsumerPortlet.getPortletHandle(),serviceContext);
  }
  portletDataContext.importClassedModel(wsrpConsumerPortlet,importedWSRPConsumerPortlet);
}
