{
  TicketValidator ticketValidator=_ticketValidators.get(companyId);
  if (ticketValidator != null) {
    return ticketValidator;
  }
  String serverName=PrefsPropsUtil.getString(companyId,PropsKeys.CAS_SERVER_NAME,_casConfiguration.serverName());
  String serverUrl=PrefsPropsUtil.getString(companyId,PropsKeys.CAS_SERVER_URL,_casConfiguration.serverURL());
  String loginUrl=PrefsPropsUtil.getString(companyId,PropsKeys.CAS_LOGIN_URL,_casConfiguration.loginURL());
  Cas20ProxyTicketValidator cas20ProxyTicketValidator=new Cas20ProxyTicketValidator(serverUrl);
  Map<String,String> parameters=new HashMap<>();
  parameters.put("serverName",serverName);
  parameters.put("casServerUrlPrefix",serverUrl);
  parameters.put("casServerLoginUrl",loginUrl);
  parameters.put("redirectAfterValidation","false");
  cas20ProxyTicketValidator.setCustomParameters(parameters);
  _ticketValidators.put(companyId,cas20ProxyTicketValidator);
  return cas20ProxyTicketValidator;
}
