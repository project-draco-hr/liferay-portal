{
  UnicodeProperties typeSettings=layout.getTypeSettingsProperties();
  Set<Map.Entry<String,String>> set=typeSettings.entrySet();
  Iterator<Map.Entry<String,String>> iterator=set.iterator();
  while (iterator.hasNext()) {
    Map.Entry<String,String> entry=iterator.next();
    String key=entry.getKey();
    if (!key.startsWith("column-")) {
      continue;
    }
    String[] portletIds=StringUtil.split(entry.getValue());
    for (    String portletId : portletIds) {
      try {
        portletPreferencesLocalService.deletePortletPreferences(PortletKeys.PREFS_OWNER_ID_DEFAULT,PortletKeys.PREFS_OWNER_TYPE_LAYOUT,layout.getPlid(),portletId);
      }
 catch (      PortalException pe) {
        if (_log.isWarnEnabled()) {
          _log.warn("Unable to delete portlet preferences for " + "portlet " + portletId,pe);
        }
      }
    }
    iterator.remove();
  }
  layout.setTypeSettingsProperties(typeSettings);
  layoutLocalService.updateLayout(layout);
}
