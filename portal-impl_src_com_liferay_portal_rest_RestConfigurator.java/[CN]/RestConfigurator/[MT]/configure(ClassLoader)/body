{
  URL[] classPathURLs=null;
  URL pluginsOnlyResource=classLoader.getResource("portal.properties");
  if (pluginsOnlyResource != null) {
    File pluginWebInf=new File(pluginsOnlyResource.getPath());
    pluginWebInf=pluginWebInf.getParentFile();
    classPathURLs=new URL[1];
    try {
      classPathURLs[0]=pluginWebInf.toURL();
    }
 catch (    MalformedURLException murle) {
      _log.error(murle,murle);
    }
  }
 else {
    File portalImplLib=new File(PortalUtil.getPortalLibDir(),"portal-impl.jar");
    if (portalImplLib.exists()) {
      classPathURLs=new URL[1];
      try {
        classPathURLs[0]=portalImplLib.toURL();
      }
 catch (      MalformedURLException murle) {
        _log.error(murle,murle);
      }
    }
 else {
      classPathURLs=ClassLoaderUtil.getFullClassPath(RestConfigurator.class);
    }
  }
  configure(classPathURLs);
}
