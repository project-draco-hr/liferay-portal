{
  String vendorURL=System.getProperty("java.vendor.url");
  if (!vendorURL.equals("http://java.sun.com/") && !vendorURL.equals("http://java.oracle.com/")) {
    return StringPool.BLANK;
  }
  String name=ManagementFactory.getRuntimeMXBean().getName();
  if (Validator.isNull(name)) {
    return StringPool.BLANK;
  }
  int pos=name.indexOf(CharPool.AT);
  if (pos == -1) {
    return StringPool.BLANK;
  }
  String pidString=name.substring(0,pos);
  if (!Validator.isNumber(pidString)) {
    return StringPool.BLANK;
  }
  int pid=GetterUtil.getInteger(pidString);
  String[] cmd=new String[]{"jstack",String.valueOf(pid)};
  UnsyncByteArrayOutputStream outputStream=new UnsyncByteArrayOutputStream();
  try {
    Process p=Runtime.getRuntime().exec(cmd);
    InputStream inputStream=p.getInputStream();
    StreamUtil.transfer(inputStream,outputStream);
  }
 catch (  Exception e) {
  }
  return outputStream.toString();
}
