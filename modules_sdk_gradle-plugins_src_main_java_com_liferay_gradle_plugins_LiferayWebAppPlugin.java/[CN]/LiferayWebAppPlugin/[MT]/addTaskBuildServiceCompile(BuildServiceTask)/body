{
  Project project=buildServiceTask.getProject();
  JavaCompile javaCompile=GradleUtil.addTask(project,buildServiceTask.getName() + "Compile",JavaCompile.class);
  javaCompile.dependsOn(buildServiceTask);
  javaCompile.dependsOn(BasePlugin.CLEAN_TASK_NAME + StringUtil.capitalize(javaCompile.getName()));
  FileCollection fileCollection=buildServiceTask.getClasspath();
  final File serviceJarFile=getServiceJarFile(project);
  fileCollection=fileCollection.filter(new Spec<File>(){
    @Override public boolean isSatisfiedBy(    File file){
      if (file.equals(serviceJarFile)) {
        return false;
      }
      return true;
    }
  }
);
  javaCompile.setClasspath(fileCollection);
  File destinationDir=new File(project.getBuildDir(),javaCompile.getName());
  javaCompile.setDestinationDir(destinationDir);
  javaCompile.setSource(buildServiceTask.getApiDirName());
  return javaCompile;
}
