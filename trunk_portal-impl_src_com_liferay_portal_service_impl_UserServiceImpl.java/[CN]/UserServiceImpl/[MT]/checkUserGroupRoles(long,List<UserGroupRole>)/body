{
  List<UserGroupRole> oldUserGroupRoles=userGroupRoleLocalService.getUserGroupRoles(userId);
  for (  UserGroupRole oldUserGroupRole : oldUserGroupRoles) {
    if (!userGroupRoles.contains(oldUserGroupRole) && !UserGroupRolePermissionUtil.contains(getPermissionChecker(),oldUserGroupRole.getGroupId(),oldUserGroupRole.getRoleId())) {
      userGroupRoles.add(oldUserGroupRole);
    }
  }
  for (  UserGroupRole userGroupRole : userGroupRoles) {
    if (!oldUserGroupRoles.contains(userGroupRole)) {
      UserGroupRolePermissionUtil.check(getPermissionChecker(),userGroupRole.getGroupId(),userGroupRole.getRoleId());
    }
  }
  return userGroupRoles;
}
