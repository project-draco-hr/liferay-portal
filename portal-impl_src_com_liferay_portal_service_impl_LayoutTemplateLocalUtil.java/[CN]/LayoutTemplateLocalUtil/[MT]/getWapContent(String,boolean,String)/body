{
  LayoutTemplate layoutTemplate=getLayoutTemplate(layoutTemplateId,standard,themeId);
  if (layoutTemplate == null) {
    _log.error("Layout template " + layoutTemplateId + " does not exist");
    return null;
  }
 else {
    if (GetterUtil.getBoolean(PropsUtil.get(PropsUtil.LAYOUT_TEMPLATE_CACHE_ENABLED))) {
      return layoutTemplate.getWapContent();
    }
 else {
      try {
        return layoutTemplate.getUncachedWapContent();
      }
 catch (      IOException ioe) {
        throw new SystemException(ioe);
      }
    }
  }
}
