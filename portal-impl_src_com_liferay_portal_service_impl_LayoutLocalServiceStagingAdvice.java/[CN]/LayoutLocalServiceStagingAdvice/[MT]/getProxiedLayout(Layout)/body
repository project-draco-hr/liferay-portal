{
  Map<Layout,Object> proxiedLayouts=ProxiedLayoutsThreadLocal.getProxiedLayouts();
  Object proxiedLayout=proxiedLayouts.get(layout);
  if (proxiedLayout != null) {
    return (Layout)proxiedLayout;
  }
  proxiedLayout=ProxyUtil.newProxyInstance(ClassLoaderUtil.getPortalClassLoader(),new Class[]{Layout.class},new LayoutStagingHandler(layout));
  proxiedLayouts.put(layout,proxiedLayout);
  return (Layout)proxiedLayout;
}
