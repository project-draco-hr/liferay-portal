{
  if (Proxy.isProxyClass(layout.getClass())) {
    InvocationHandler invocationHandler=Proxy.getInvocationHandler(layout);
    if (invocationHandler instanceof LayoutStagingHandler) {
      return layout;
    }
  }
  if (!isStagingLayout(layout)) {
    return layout;
  }
  return (Layout)Proxy.newProxyInstance(PortalClassLoaderUtil.getClassLoader(),new Class[]{Layout.class},new LayoutStagingHandler(layout));
}
