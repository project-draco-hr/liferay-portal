{
  long layoutSetBranchId=ParamUtil.getLong(serviceContext,"layoutSetBranchId");
  if (layoutSetBranchId > 0) {
    LayoutRevisionLocalServiceUtil.deleteLayoutRevisions(layoutSetBranchId,layout.getPlid());
    List<LayoutRevision> notIncompleteLayoutRevisions=LayoutRevisionUtil.findByP_NotS(layout.getPlid(),WorkflowConstants.STATUS_INCOMPLETE);
    if (notIncompleteLayoutRevisions.isEmpty()) {
      LayoutRevisionLocalServiceUtil.deleteLayoutLayoutRevisions(layout.getPlid());
      doDeleteLayout(layoutLocalService,layout,updateLayoutSet,serviceContext);
    }
  }
 else {
    doDeleteLayout(layoutLocalService,layout,updateLayoutSet,serviceContext);
  }
}
