{
  ExpandoBridge expandoBridge=ExpandoBridgeFactoryUtil.getExpandoBridge(searchContext.getCompanyId(),getClassName(searchContext));
  Set<String> attributeNames=SetUtil.fromEnumeration(expandoBridge.getAttributeNames());
  Iterator iterator=attributeNames.iterator();
  String fieldName;
  String key;
  UnicodeProperties properties;
  while (iterator.hasNext()) {
    key=iterator.next().toString();
    properties=expandoBridge.getAttributeProperties(key);
    if (GetterUtil.getBoolean(properties.getProperty(ExpandoBridgeIndexer.INDEXABLE))) {
      fieldName=ExpandoBridgeIndexerUtil.encodeFieldName(key);
      if (Validator.isNotNull(keywords)) {
        if (searchContext.isAndSearch()) {
          searchQuery.addRequiredTerm(fieldName,keywords,true);
        }
 else {
          searchQuery.addTerm(fieldName,keywords,true);
        }
      }
    }
  }
}
