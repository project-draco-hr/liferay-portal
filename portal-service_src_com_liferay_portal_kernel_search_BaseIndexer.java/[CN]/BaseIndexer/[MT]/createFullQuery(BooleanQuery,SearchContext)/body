{
  postProcessContextQuery(contextQuery,searchContext);
  for (  IndexerPostProcessor indexerPostProcessor : _indexerPostProcessors) {
    indexerPostProcessor.postProcessContextQuery(contextQuery,searchContext);
  }
  BooleanQuery searchQuery=BooleanQueryFactoryUtil.create();
  addSearchKeywords(searchQuery,searchContext);
  postProcessSearchQuery(searchQuery,searchContext);
  for (  IndexerPostProcessor indexerPostProcessor : _indexerPostProcessors) {
    indexerPostProcessor.postProcessSearchQuery(searchQuery,searchContext);
  }
  BooleanQuery fullQuery=BooleanQueryFactoryUtil.create();
  fullQuery.add(contextQuery,BooleanClauseOccur.MUST);
  if (!searchQuery.clauses().isEmpty()) {
    fullQuery.add(searchQuery,BooleanClauseOccur.MUST);
  }
  BooleanClause[] booleanClauses=searchContext.getBooleanClauses();
  if (booleanClauses != null) {
    for (    BooleanClause booleanClause : booleanClauses) {
      fullQuery.add(booleanClause.getQuery(),booleanClause.getBooleanClauseOccur());
    }
  }
  postProcessFullQuery(fullQuery,searchContext);
  for (  IndexerPostProcessor indexerPostProcessor : _indexerPostProcessors) {
    indexerPostProcessor.postProcessFullQuery(fullQuery,searchContext);
  }
  return fullQuery;
}
