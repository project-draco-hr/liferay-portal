{
  try {
    Hits hits=null;
    PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
    if ((permissionChecker != null) && isUseSearchResultPermissionFilter(searchContext)) {
      SearchResultPermissionFilter searchResultPermissionFilter=new DefaultSearchResultPermissionFilter(this,permissionChecker,searchContext);
      hits=searchResultPermissionFilter.search(searchContext);
    }
 else {
      hits=doSearch(searchContext);
    }
    processHits(searchContext,hits);
    return hits;
  }
 catch (  SearchException se) {
    throw se;
  }
catch (  Exception e) {
    throw new SearchException(e);
  }
}
