{
  QueryConfig queryConfig=searchContext.getQueryConfig();
  Set<String> selectedFieldNames=null;
  if (!ArrayUtil.isEmpty(getDefaultSelectedFieldNames())) {
    selectedFieldNames=SetUtil.fromArray(getDefaultSelectedFieldNames());
    if (searchContext.isIncludeAttachments() || searchContext.isIncludeDiscussions()) {
      selectedFieldNames.add(Field.CLASS_NAME_ID);
      selectedFieldNames.add(Field.CLASS_PK);
    }
  }
  if (!ArrayUtil.isEmpty(getDefaultSelectedLocalizedFieldNames())) {
    if (selectedFieldNames == null) {
      selectedFieldNames=new HashSet<>();
    }
    if (isSelectAllLocales()) {
      addSelectedLocalizedFieldNames(selectedFieldNames,LocaleUtil.toLanguageIds(LanguageUtil.getSupportedLocales()));
    }
 else {
      addSelectedLocalizedFieldNames(selectedFieldNames,LocaleUtil.toLanguageId(queryConfig.getLocale()));
    }
  }
  if ((selectedFieldNames != null) && !selectedFieldNames.isEmpty()) {
    queryConfig.setSelectedFieldNames(selectedFieldNames.toArray(new String[selectedFieldNames.size()]));
  }
}
