{
  AssetRendererFactory assetRendererFactory=AssetRendererFactoryRegistryUtil.getAssetRendererFactoryByClassName(className);
  if ((assetRendererFactory == null) || !assetRendererFactory.isSelectable()) {
    return;
  }
  AssetEntry assetEntry=AssetEntryLocalServiceUtil.fetchEntry(className,classPK);
  if (assetEntry == null) {
    return;
  }
  if (!document.hasField(Field.CREATE_DATE)) {
    document.addDate(Field.CREATE_DATE,assetEntry.getCreateDate());
  }
  if (assetEntry.getExpirationDate() != null) {
    document.addDate(Field.EXPIRATION_DATE,assetEntry.getExpirationDate());
  }
 else {
    document.addDate(Field.EXPIRATION_DATE,new Date(Long.MAX_VALUE));
  }
  if (!document.hasField(Field.MODIFIED_DATE)) {
    document.addDate(Field.MODIFIED_DATE,assetEntry.getModifiedDate());
  }
  document.addNumber(Field.PRIORITY,assetEntry.getPriority());
  if (assetEntry.getPublishDate() != null) {
    document.addDate(Field.PUBLISH_DATE,assetEntry.getPublishDate());
  }
 else {
    document.addDate(Field.PUBLISH_DATE,new Date(0));
  }
  RatingsStats ratingsStats=RatingsStatsLocalServiceUtil.getStats(className,classPK);
  document.addNumber(Field.RATINGS,ratingsStats.getAverageScore());
  document.addNumber(Field.VIEW_COUNT,assetEntry.getViewCount());
  Map<Locale,String> titleMap=assetEntry.getTitleMap();
  Locale[] availableLocales=LanguageUtil.getAvailableLocales(assetEntry.getGroupId());
  String defaultTitle=titleMap.get(LocaleUtil.fromLanguageId(assetEntry.getDefaultLanguageId()));
  Map<Locale,String> missingTitleMap=new HashMap<>();
  for (  Locale availableLocale : availableLocales) {
    if (!titleMap.containsKey(availableLocale) || Validator.isNull(titleMap.get(availableLocale))) {
      missingTitleMap.put(availableLocale,defaultTitle);
    }
  }
  MapUtil.merge(missingTitleMap,titleMap);
  document.addLocalizedKeyword("localized_title",titleMap,true,true);
  document.addKeyword("visible",assetEntry.isVisible());
}
