{
  long[] companyIds=PortalUtil.getCompanyIds();
  for (  long companyId : companyIds) {
    LinkedHashMap<String,Object> groupParams=new LinkedHashMap<String,Object>();
    groupParams.put("site",Boolean.TRUE);
    int start=0;
    int end=SEARCH_INTERVAL;
    int total=GroupLocalServiceUtil.getGroupsCount();
    while (start <= total) {
      List<Group> groups=GroupLocalServiceUtil.search(companyId,groupParams,start,end);
      for (      Group group : groups) {
        verifyPolicy(group);
        List<UserGroupRole> userGroupRoles=UserGroupRoleLocalServiceUtil.getUserGroupRolesByGroup(group.getGroupId());
        for (        UserGroupRole userGroupRole : userGroupRoles) {
          verifyPolicy(userGroupRole.getRole());
        }
      }
      start=end;
      end+=end;
    }
  }
}
