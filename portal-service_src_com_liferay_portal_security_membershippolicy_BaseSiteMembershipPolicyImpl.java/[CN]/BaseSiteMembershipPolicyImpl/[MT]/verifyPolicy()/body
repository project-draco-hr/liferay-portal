{
  ActionableDynamicQuery groupActionableDynamicQuery=new GroupActionableDynamicQuery(){
    @Override protected void addCriteria(    DynamicQuery dynamicQuery){
      Property property=PropertyFactoryUtil.forName("site");
      dynamicQuery.add(property.eq(true));
    }
    @Override protected void performAction(    Object object) throws PortalException, SystemException {
      Group group=(Group)object;
      verifyPolicy(group);
      ActionableDynamicQuery userGroupRoleActionableDynamicQuery=new UserGroupRoleActionableDynamicQuery(){
        @Override protected void performAction(        Object object) throws PortalException, SystemException {
          UserGroupRole userGroupRole=(UserGroupRole)object;
          verifyPolicy(userGroupRole.getRole());
        }
      }
;
      userGroupRoleActionableDynamicQuery.setGroupId(group.getGroupId());
      userGroupRoleActionableDynamicQuery.performActions();
    }
  }
;
  groupActionableDynamicQuery.performActions();
}
