{
  _serviceUtilClasses.add(DLAppServiceUtil.class);
  resetServices();
  _beanLocator=PortalBeanLocatorUtil.getBeanLocator();
  _mockBeanLocator=mock(BeanLocator.class);
  PortalBeanLocatorUtil.setBeanLocator(new BeanLocator(){
    @Override public ClassLoader getClassLoader(){
      return _beanLocator.getClassLoader();
    }
    @Override public String[] getNames(){
      return _beanLocator.getNames();
    }
    @Override public Class<?> getType(    String name) throws BeanLocatorException {
      return _beanLocator.getType(name);
    }
    @Override public <T>Map<String,T> locate(    Class<T> clazz) throws BeanLocatorException {
      return _beanLocator.locate(clazz);
    }
    @Override public Object locate(    String name) throws BeanLocatorException {
      Object bean=_mockBeanLocator.locate(name);
      if (bean != null) {
        return bean;
      }
      return _beanLocator.locate(name);
    }
  }
);
}
