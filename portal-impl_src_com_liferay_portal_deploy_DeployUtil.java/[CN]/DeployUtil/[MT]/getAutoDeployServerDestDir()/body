{
  String destDir=null;
  String serverId=GetterUtil.getString(ServerDetector.getServerId());
  if (serverId.equals(ServerDetector.JBOSS_ID) && ServerDetector.isJBoss5()) {
    String name="auto.deploy." + serverId + ".dest.dir";
    PortletPreferences preferences=PrefsPropsUtil.getPreferences();
    String value=PropsUtil.get(name,new Filter("5"));
    destDir=preferences.getValue(name,value);
  }
 else   if (serverId.equals(ServerDetector.TOMCAT_ID)) {
    destDir=PrefsPropsUtil.getString(PropsKeys.AUTO_DEPLOY_TOMCAT_DEST_DIR,PropsValues.AUTO_DEPLOY_TOMCAT_DEST_DIR);
  }
 else {
    destDir=PrefsPropsUtil.getString("auto.deploy." + serverId + ".dest.dir");
  }
  if (Validator.isNull(destDir)) {
    destDir=PrefsPropsUtil.getString(PropsKeys.AUTO_DEPLOY_DEFAULT_DEST_DIR,PropsValues.AUTO_DEPLOY_DEFAULT_DEST_DIR);
  }
  destDir=StringUtil.replace(destDir,CharPool.BACK_SLASH,CharPool.SLASH);
  return destDir;
}
