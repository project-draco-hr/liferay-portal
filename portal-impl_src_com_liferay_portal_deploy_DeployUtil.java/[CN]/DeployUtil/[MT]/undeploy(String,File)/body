{
  boolean undeployEnabled=PrefsPropsUtil.getBoolean(PropsUtil.HOT_UNDEPLOY_ENABLED,PropsValues.HOT_UNDEPLOY_ENABLED);
  if (!undeployEnabled) {
    return;
  }
  if (!appServerType.startsWith(ServerDetector.JBOSS_ID) && !appServerType.equals(ServerDetector.TOMCAT_ID)) {
    return;
  }
  File webXml=new File(deployDir + "/WEB-INF/web.xml");
  if (!webXml.exists()) {
    return;
  }
  if (_log.isInfoEnabled()) {
    _log.info("Undeploy " + deployDir);
  }
  FileUtil.delete(deployDir + "/WEB-INF/web.xml");
  DeleteTask.deleteDirectory(deployDir);
  int undeployInterval=PrefsPropsUtil.getInteger(PropsUtil.HOT_UNDEPLOY_INTERVAL,PropsValues.HOT_UNDEPLOY_INTERVAL);
  if (_log.isInfoEnabled()) {
    _log.info("Wait " + undeployInterval + " ms to allow the plugin time to fully undeploy");
  }
  if (undeployInterval > 0) {
    Thread.sleep(undeployInterval);
  }
}
