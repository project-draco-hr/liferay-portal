{
  try {
    long latestModifiedTime=SyncDLObjectLocalServiceUtil.getLatestModifiedTime();
    List<DLSyncEvent> dlSyncEvents=null;
    if (latestModifiedTime == 0) {
      dlSyncEvents=DLSyncEventLocalServiceUtil.getLatestDLSyncEvents();
    }
 else {
      dlSyncEvents=DLSyncEventLocalServiceUtil.getDLSyncEvents(latestModifiedTime);
    }
    for (    DLSyncEvent dlSyncEvent : dlSyncEvents) {
      Message message=new Message();
      Map<String,Object> values=new HashMap<>(4);
      values.put("event",dlSyncEvent.getEvent());
      values.put("modifiedTime",dlSyncEvent.getModifiedTime());
      values.put("syncEventId",dlSyncEvent.getSyncEventId());
      values.put("type",dlSyncEvent.getType());
      values.put("typePK",dlSyncEvent.getTypePK());
      message.setValues(values);
      MessageBusUtil.sendMessage(DestinationNames.DOCUMENT_LIBRARY_SYNC_EVENT_PROCESSOR,message);
    }
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
}
