{
  String locatorValue=locator;
  if (locatorValue.contains("${") && locatorValue.contains("}")) {
    String regex="\\$\\{([^}]*?)\\}";
    Pattern pattern=Pattern.compile(regex);
    Matcher matcher=pattern.matcher(locatorValue);
    while (matcher.find()) {
      String variableKey=matcher.group(1);
      if (context.containsKey(variableKey)) {
        locatorValue=locatorValue.replaceFirst(regex,context.get(variableKey));
      }
 else {
        throw new Exception("Variable \"" + variableKey + "\" found in \""+ locator+ "\" is not set");
      }
    }
  }
  return locatorValue;
}
