{
  List<MessageElement> messageElements=new ArrayList<>();
  ExtensionHelperUtil.addMessageElement(messageElements,"css-class-wrapper",portlet.getCssClassWrapper());
  HttpServletRequest request=ServletUtil.getRequest();
  String portalURL=PortalUtil.getPortalURL(request);
  String portalPath=portalURL + PortalUtil.getPathContext();
  String portletPath=portalURL + portlet.getContextPath();
  Portlet rootPortlet=portlet.getRootPortlet();
  long timestamp=rootPortlet.getTimestamp();
  for (  String footerPortalCss : portlet.getFooterPortalCss()) {
    if (!HttpUtil.hasProtocol(footerPortalCss)) {
      footerPortalCss=portalPath + footerPortalCss + "?t="+ timestamp;
    }
    ExtensionHelperUtil.addMessageElement(messageElements,"footer-portal-css",footerPortalCss);
  }
  for (  String footerPortalJavaScript : portlet.getFooterPortalJavaScript()) {
    if (!HttpUtil.hasProtocol(footerPortalJavaScript)) {
      footerPortalJavaScript=portalPath + footerPortalJavaScript + "?t="+ timestamp;
    }
    ExtensionHelperUtil.addMessageElement(messageElements,"footer-portal-javascript",footerPortalJavaScript);
  }
  for (  String footerPortletCss : portlet.getFooterPortletCss()) {
    if (!HttpUtil.hasProtocol(footerPortletCss)) {
      footerPortletCss=portletPath + footerPortletCss + "?t="+ timestamp;
    }
    ExtensionHelperUtil.addMessageElement(messageElements,"footer-portlet-css",footerPortletCss);
  }
  for (  String footerPortletJavaScript : portlet.getFooterPortletJavaScript()) {
    if (!HttpUtil.hasProtocol(footerPortletJavaScript)) {
      footerPortletJavaScript=portletPath + footerPortletJavaScript + "?t="+ timestamp;
    }
    ExtensionHelperUtil.addMessageElement(messageElements,"footer-portlet-javascript",footerPortletJavaScript);
  }
  for (  String headerPortalCss : portlet.getHeaderPortalCss()) {
    if (!HttpUtil.hasProtocol(headerPortalCss)) {
      headerPortalCss=portalPath + headerPortalCss + "?t="+ timestamp;
    }
    ExtensionHelperUtil.addMessageElement(messageElements,"header-portal-css",headerPortalCss);
  }
  for (  String headerPortalJavaScript : portlet.getHeaderPortalJavaScript()) {
    if (!HttpUtil.hasProtocol(headerPortalJavaScript)) {
      headerPortalJavaScript=portalPath + headerPortalJavaScript + "?t="+ timestamp;
    }
    ExtensionHelperUtil.addMessageElement(messageElements,"header-portal-javascript",headerPortalJavaScript);
  }
  for (  String headerPortletCss : portlet.getHeaderPortletCss()) {
    if (!HttpUtil.hasProtocol(headerPortletCss)) {
      headerPortletCss=portletPath + headerPortletCss + "?t="+ timestamp;
    }
    ExtensionHelperUtil.addMessageElement(messageElements,"header-portlet-css",headerPortletCss);
  }
  for (  String headerPortletJavaScript : portlet.getHeaderPortletJavaScript()) {
    if (!HttpUtil.hasProtocol(headerPortletJavaScript)) {
      headerPortletJavaScript=portletPath + headerPortletJavaScript + "?t="+ timestamp;
    }
    ExtensionHelperUtil.addMessageElement(messageElements,"header-portlet-javascript",headerPortletJavaScript);
  }
  portletDescription.setExtensions(ExtensionHelperUtil.getExtensions(messageElements));
}
