{
  try {
    Document document=SAXReaderUtil.read(new File(fileName));
    Element rootElement=document.getRootElement();
    List<Element> serviceElements=rootElement.elements("service");
    for (    Element serviceElement : serviceElements) {
      String serviceName=serviceElement.attributeValue("name");
      if (serviceName.startsWith("Plugin_") && !FileUtil.exists(mappingFile)) {
        _writePluginMappingFile(mappingFile,serviceElement);
      }
      if (serviceName.startsWith("Plugin_") || serviceName.startsWith("Portal_") || serviceName.startsWith("Portlet_")) {
        Wsdl2JavaTask.generateJava(url + "/" + serviceName+ "?wsdl",outputDir,mappingFile);
      }
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  File testNamespace=new File(outputDir + "/com/liferay/portal");
  if (testNamespace.exists()) {
    throw new RuntimeException("Please update " + mappingFile + " to namespace "+ "com.liferay.portal to com.liferay.client.soap.portal");
  }
}
