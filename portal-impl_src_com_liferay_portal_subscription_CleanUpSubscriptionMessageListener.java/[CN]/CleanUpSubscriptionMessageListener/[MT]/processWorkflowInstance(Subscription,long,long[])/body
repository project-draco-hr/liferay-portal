{
  WorkflowInstance workflowInstance=WorkflowInstanceManagerUtil.getWorkflowInstance(subscription.getCompanyId(),subscription.getClassPK());
  Map<String,Serializable> workflowContext=workflowInstance.getWorkflowContext();
  long workflowInstanceGroupId=GetterUtil.getLong((String)workflowContext.get(WorkflowConstants.CONTEXT_GROUP_ID));
  if ((workflowInstanceGroupId > 0) && ((workflowInstanceGroupId == groupId) || !ArrayUtil.contains(groupIds,workflowInstanceGroupId))) {
    SubscriptionLocalServiceUtil.deleteSubscription(subscription.getSubscriptionId());
  }
}
