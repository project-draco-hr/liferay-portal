{
  WorkflowInstance workflowInstance=WorkflowInstanceManagerUtil.getWorkflowInstance(subscription.getCompanyId(),subscription.getClassPK());
  Map<String,Serializable> workflowContext=workflowInstance.getWorkflowContext();
  long instanceGroupId=GetterUtil.getLong((String)workflowContext.get(WorkflowConstants.CONTEXT_GROUP_ID));
  if ((instanceGroupId > 0) && ((instanceGroupId == groupId) || !ArrayUtil.contains(groupIds,instanceGroupId))) {
    SubscriptionLocalServiceUtil.deleteSubscription(subscription.getSubscriptionId());
  }
}
