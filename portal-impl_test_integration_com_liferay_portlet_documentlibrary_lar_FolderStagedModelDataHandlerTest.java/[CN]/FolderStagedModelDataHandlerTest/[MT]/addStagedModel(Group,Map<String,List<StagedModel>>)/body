{
  List<StagedModel> folderDependentStagedModels=dependentStagedModelsMap.get(DLFolder.class.getSimpleName());
  Folder folder=(Folder)folderDependentStagedModels.get(0);
  List<StagedModel> fileEntryTypeDependentStagedModels=dependentStagedModelsMap.get(DLFileEntryType.class.getSimpleName());
  DLFileEntryType dlFileEntryType=(DLFileEntryType)fileEntryTypeDependentStagedModels.get(0);
  folder=DLAppTestUtil.addFolder(group.getGroupId(),folder.getFolderId());
  DLFolder dlFolder=(DLFolder)folder.getModel();
  dlFolder.setDefaultFileEntryTypeId(dlFileEntryType.getFileEntryTypeId());
  dlFolder.setRestrictionType(DLFolderConstants.RESTRICTION_TYPE_FILE_ENTRY_TYPES_AND_WORKFLOW);
  DLFolderLocalServiceUtil.updateDLFolder(dlFolder);
  List<Long> dlFileEntryTypeIds=new ArrayList<>();
  dlFileEntryTypeIds.add(dlFileEntryType.getFileEntryTypeId());
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(folder.getGroupId(),TestPropsValues.getUserId());
  DLFileEntryTypeLocalServiceUtil.updateFolderFileEntryTypes(dlFolder,dlFileEntryTypeIds,dlFileEntryType.getFileEntryTypeId(),serviceContext);
  return folder;
}
