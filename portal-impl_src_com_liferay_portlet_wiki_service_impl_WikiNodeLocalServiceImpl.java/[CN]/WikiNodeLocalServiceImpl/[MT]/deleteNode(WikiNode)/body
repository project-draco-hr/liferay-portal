{
  wikiPageLocalService.deletePages(node.getNodeId());
  wikiNodePersistence.remove(node);
  resourceLocalService.deleteResource(node.getCompanyId(),WikiNode.class.getName(),ResourceConstants.SCOPE_INDIVIDUAL,node.getNodeId());
  systemEventLocalService.addSystemEvent(0,node.getGroupId(),WikiNode.class.getName(),node.getNodeId(),node.getUuid(),null,SystemEventConstants.TYPE_DELETE,null);
  long folderId=node.getAttachmentsFolderId();
  if (folderId != DLFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
    PortletFileRepositoryUtil.deleteFolder(folderId);
  }
  subscriptionLocalService.deleteSubscriptions(node.getCompanyId(),WikiNode.class.getName(),node.getNodeId());
  if (node.isInTrash()) {
    node.setName(TrashUtil.getOriginalTitle(node.getName()));
    trashEntryLocalService.deleteEntry(WikiNode.class.getName(),node.getNodeId());
    Indexer wikiNodeIndexer=IndexerRegistryUtil.nullSafeGetIndexer(WikiNode.class);
    wikiNodeIndexer.delete(node);
  }
  Indexer wikiPageIndexer=IndexerRegistryUtil.nullSafeGetIndexer(WikiPage.class);
  wikiPageIndexer.delete(node);
}
