{
  int oldStatus=node.getStatus();
  node=updateStatus(userId,node,WorkflowConstants.STATUS_IN_TRASH,new ServiceContext());
  UnicodeProperties typeSettingsProperties=new UnicodeProperties();
  typeSettingsProperties.put("title",node.getName());
  TrashEntry trashEntry=trashEntryLocalService.addTrashEntry(userId,node.getGroupId(),WikiNode.class.getName(),node.getNodeId(),node.getUuid(),null,oldStatus,null,typeSettingsProperties);
  node.setName(TrashUtil.getTrashTitle(trashEntry.getEntryId()));
  wikiNodePersistence.update(node);
  moveDependentToTrash(node.getNodeId());
  return node;
}
