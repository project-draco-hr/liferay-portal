{
  User user=userPersistence.findByPrimaryKey(userId);
  Date now=new Date();
  node.setStatus(status);
  node.setStatusByUserId(userId);
  node.setStatusByUserName(user.getFullName());
  node.setStatusDate(now);
  wikiNodePersistence.update(node);
  Indexer indexer=IndexerRegistryUtil.nullSafeGetIndexer(WikiNode.class);
  if (status == WorkflowConstants.STATUS_IN_TRASH) {
    indexer.reindex(node);
  }
 else {
    indexer.delete(node);
  }
  return node;
}
