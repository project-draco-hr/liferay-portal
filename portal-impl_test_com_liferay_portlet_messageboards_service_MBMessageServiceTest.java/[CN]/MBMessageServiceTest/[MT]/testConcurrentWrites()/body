{
  int numOfThreads=50;
  long categoryId=_category.getCategoryId();
  MBMessageWorkerThread[] threads=new MBMessageWorkerThread[numOfThreads];
  for (int i=0; i < threads.length; i++) {
    String subject="MBMessage Thread " + (i + 1);
    threads[i]=new MBMessageWorkerThread(categoryId,subject);
  }
  for (int i=0; i < threads.length; i++) {
    threads[i].start();
  }
  for (int i=0; i < threads.length; i++) {
    try {
      threads[i].join();
    }
 catch (    InterruptedException ie) {
    }
  }
  int successCount=0;
  for (int i=0; i < threads.length; i++) {
    if (threads[i].getSuccess()) {
      successCount++;
    }
  }
  assertTrue("Only " + successCount + " out of "+ numOfThreads+ " threads added messages successfully.",successCount == numOfThreads);
}
