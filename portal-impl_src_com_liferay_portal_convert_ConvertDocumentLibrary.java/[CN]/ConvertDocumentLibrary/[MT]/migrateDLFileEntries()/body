{
  int count=DLFileEntryLocalServiceUtil.getDLFileEntriesCount();
  int pages=count / Indexer.DEFAULT_INTERVAL;
  MaintenanceUtil.appendStatus("Migrating " + count + " document library files");
  for (int i=0; i <= pages; i++) {
    int start=(i * Indexer.DEFAULT_INTERVAL);
    int end=start + Indexer.DEFAULT_INTERVAL;
    List<DLFileEntry> entries=DLFileEntryLocalServiceUtil.getDLFileEntries(start,end);
    String portletId=PortletKeys.DOCUMENT_LIBRARY;
    for (    DLFileEntry entry : entries) {
      long companyId=entry.getCompanyId();
      long groupId=entry.getGroupId();
      long folderId=entry.getFolderId();
      long repositoryId=DLFileEntryLocalServiceUtil.getRepositoryId(groupId,folderId);
      migrateEntry(companyId,portletId,groupId,repositoryId,entry);
    }
  }
}
