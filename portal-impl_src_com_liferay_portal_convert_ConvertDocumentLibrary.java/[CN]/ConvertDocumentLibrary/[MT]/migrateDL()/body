{
  int count=DLFileEntryLocalServiceUtil.getFileEntriesCount();
  MaintenanceUtil.appendStatus("Migrating " + count + " documents and media files");
  ActionableDynamicQuery actionableDynamicQuery=DLFileEntryLocalServiceUtil.getActionableDynamicQuery();
  actionableDynamicQuery.setAddCriteriaMethod(new ActionableDynamicQuery.AddCriteriaMethod(){
    @Override public void addCriteria(    DynamicQuery dynamicQuery){
      Property classNameIdProperty=PropertyFactoryUtil.forName("classNameId");
      dynamicQuery.add(classNameIdProperty.eq(0L));
    }
  }
);
  actionableDynamicQuery.setPerformActionMethod(new ActionableDynamicQuery.PerformActionMethod(){
    @Override public void performAction(    Object object){
      DLFileEntry dlFileEntry=(DLFileEntry)object;
      migrateDLFileEntry(dlFileEntry.getCompanyId(),dlFileEntry.getDataRepositoryId(),dlFileEntry);
    }
  }
);
  actionableDynamicQuery.performActions();
}
