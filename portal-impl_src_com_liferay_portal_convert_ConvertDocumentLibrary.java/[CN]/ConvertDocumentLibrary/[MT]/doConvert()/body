{
  try {
    String[] values=getParameterValues();
    String targetHookClass=values[0];
    _targetHook=(Hook)PortalClassLoaderUtil.getClassLoader().loadClass(targetHookClass).newInstance();
    _sourceHook=HookFactory.getInstance();
    migrateDLFileEntries();
    migrateMessageBoardAttachments();
    migrateWikiAttachments();
    PropsValues.DL_HOOK_IMPL=targetHookClass;
    MaintenanceUtil.appendStatus("Please set " + PropsKeys.DL_HOOK_IMPL + " in your portal-ext.properties to use "+ targetHookClass+ " and delete the original repository.");
  }
 catch (  Exception e) {
    _log.fatal(e,e);
  }
 finally {
    HookFactory.setInstance(null);
  }
}
