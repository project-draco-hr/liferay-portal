{
  Element referenceElement=doAddReferenceElement(referrerClassedModel,element,classedModel,className,binPath,referenceType,false);
  if (referenceElement == null) {
    return null;
  }
  String referenceKey=getReferenceKey(classedModel);
  if (missing) {
    if (_references.contains(referenceKey)) {
      return referenceElement;
    }
    referenceElement.addAttribute("missing",Boolean.TRUE.toString());
    if (!_missingReferences.contains(referenceKey)) {
      _missingReferences.add(referenceKey);
      doAddReferenceElement(referrerClassedModel,null,classedModel,className,binPath,referenceType,true);
    }
  }
 else {
    _references.add(referenceKey);
    referenceElement.addAttribute("missing",Boolean.FALSE.toString());
    cleanUpMissingReferences(classedModel);
  }
  return referenceElement;
}
