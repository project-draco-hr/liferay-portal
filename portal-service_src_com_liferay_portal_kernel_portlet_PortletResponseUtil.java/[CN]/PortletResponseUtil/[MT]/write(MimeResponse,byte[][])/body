{
  if (!mimeResponse.isCommitted()) {
    int contentLength=0;
    for (    byte[] bytes : bytesArray) {
      contentLength+=bytes.length;
    }
    if (mimeResponse instanceof ResourceResponse) {
      ResourceResponse resourceResponse=(ResourceResponse)mimeResponse;
      resourceResponse.setContentLength(contentLength);
    }
    OutputStream outputStream=mimeResponse.getPortletOutputStream();
    for (    byte[] bytes : bytesArray) {
      outputStream.write(bytes);
    }
  }
}
