{
  CaptureHandler captureHandler=null;
  try {
    captureHandler=JDKLoggerTestUtil.configureJDKLogger(MPIHelperUtil.class.getName(),Level.WARNING);
    List<LogRecord> logRecords=captureHandler.getLogRecords();
    MPIHelperUtil.shutdown();
    MPIHelperUtil.shutdown();
    Assert.assertEquals(1,logRecords.size());
    LogRecord logRecord=logRecords.get(0);
    Assert.assertEquals("Unable to unexport " + _getMPIImpl(),logRecord.getMessage());
    Throwable throwable=logRecord.getThrown();
    Assert.assertSame(NoSuchObjectException.class,throwable.getClass());
    logRecords=captureHandler.resetLogLevel(Level.OFF);
    MPIHelperUtil.shutdown();
    Assert.assertTrue(logRecords.isEmpty());
  }
  finally {
    if (captureHandler != null) {
      captureHandler.close();
    }
  }
}
