{
  try {
    if (_closed || (_eventsCount == 0)) {
      return;
    }
    ObjectMapper objectMapper=new ObjectMapper();
    Path filePath=Files.createTempFile("manifest",".json");
    File file=filePath.toFile();
    objectMapper.writeValue(file,_batchParameters);
    writeFilePathToZip(filePath,"manifest.json");
    _zipOutputStream.close();
    Map<String,Object> parameters=new HashMap<String,Object>();
    parameters.put("handlers",_handlers);
    parameters.put("zipFilePath",_zipFilePath);
    UpdateFileEntriesEvent updateFileEntriesEvent=new UpdateFileEntriesEvent(_syncAccountId,parameters);
    updateFileEntriesEvent.run();
    _closed=true;
  }
 catch (  Exception e) {
    _logger.debug(e.getMessage(),e);
  }
}
