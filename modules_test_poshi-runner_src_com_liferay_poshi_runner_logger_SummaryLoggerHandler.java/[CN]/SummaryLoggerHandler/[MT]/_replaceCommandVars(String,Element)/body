{
  Matcher matcher=_pattern.matcher(token);
  while (matcher.find() && PoshiRunnerVariablesUtil.containsKeyInCommandMap(matcher.group(1))) {
    String varName=matcher.group(1);
    String varValue=PoshiRunnerVariablesUtil.getValueFromCommandMap(varName);
    if ((element.attributeValue("function") != null) && varName.startsWith("locator")) {
      String locator=element.attributeValue(varName);
      if (locator.contains("#")) {
        StringBuilder sb=new StringBuilder();
        sb.append("<em title=\"");
        sb.append(varValue);
        sb.append("\">");
        sb.append(locator.substring(locator.indexOf("#") + 1));
        sb.append("</em>");
        varValue=sb.toString();
      }
    }
    token=StringUtil.replace(token,matcher.group(),varValue);
  }
  return token;
}
