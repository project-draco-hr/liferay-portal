{
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  try {
    MDRRuleGroupInstance ruleGroupInstance=null;
    boolean add=false;
    if (cmd.equals(Constants.EDIT)) {
      long ruleGroupId=ParamUtil.getLong(actionRequest,MDRPortletConstants.MDR_RULE_GROUP_ID);
      String className=ParamUtil.getString(actionRequest,MDRPortletConstants.CLASS_NAME);
      long classPK=ParamUtil.getLong(actionRequest,MDRPortletConstants.CLASS_PK);
      ruleGroupInstance=MDRRuleGroupInstanceLocalServiceUtil.fetchRuleGroupInstance(className,classPK,ruleGroupId);
      add=(ruleGroupInstance == null);
      ruleGroupInstance=editRuleGroupInstance(actionRequest,ruleGroupId,className,classPK,ruleGroupInstance);
    }
 else     if (cmd.equals(Constants.DELETE)) {
      deleteRuleGroupInstance(actionRequest);
    }
    if (add) {
      String redirect=getRedirect(actionRequest,actionResponse,ruleGroupInstance);
      sendRedirect(actionRequest,actionResponse,redirect);
    }
 else {
      sendRedirect(actionRequest,actionResponse);
    }
  }
 catch (  NoSuchRuleGroupException nsrge) {
    SessionErrors.add(actionRequest,nsrge.getClass().getName());
  }
}
