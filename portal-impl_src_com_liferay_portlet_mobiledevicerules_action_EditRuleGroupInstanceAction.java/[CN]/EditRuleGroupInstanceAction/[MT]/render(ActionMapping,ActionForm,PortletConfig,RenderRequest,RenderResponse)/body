{
  long ruleGroupInstanceId=ParamUtil.getLong(renderRequest,MDRPortletConstants.MDR_RULE_GROUP_INSTANCE_ID);
  long ruleGroupId=0;
  MDRRuleGroupInstance ruleGroupInstance=MDRRuleGroupInstanceLocalServiceUtil.fetchRuleGroupInstance(ruleGroupInstanceId);
  renderRequest.setAttribute(MDRPortletConstants.MDR_RULE_GROUP_INSTANCE,ruleGroupInstance);
  if (ruleGroupInstance != null) {
    ruleGroupId=ruleGroupInstance.getRuleGroupId();
  }
 else {
    ruleGroupId=ParamUtil.getLong(renderRequest,MDRPortletConstants.MDR_RULE_GROUP_ID);
  }
  MDRRuleGroup ruleGroup=MDRRuleGroupLocalServiceUtil.fetchRuleGroup(ruleGroupId);
  renderRequest.setAttribute(MDRPortletConstants.MDR_RULE_GROUP,ruleGroup);
  return mapping.findForward("portlet.mobile_device_rules_admin.edit_rule_group_instance");
}
