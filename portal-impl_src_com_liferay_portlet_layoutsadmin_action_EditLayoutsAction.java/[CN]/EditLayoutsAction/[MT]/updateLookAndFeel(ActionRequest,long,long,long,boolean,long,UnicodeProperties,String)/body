{
  String[] devices=StringUtil.split(ParamUtil.getString(actionRequest,"devices"));
  for (  String device : devices) {
    String deviceThemeId=ParamUtil.getString(actionRequest,device + "ThemeId");
    String deviceColorSchemeId=ParamUtil.getString(actionRequest,device + "ColorSchemeId");
    String deviceCss=ParamUtil.getString(actionRequest,device + "Css");
    boolean deviceWapTheme=device.equals("wap");
    boolean deviceInheritLookAndFeel=ParamUtil.getBoolean(actionRequest,device + "InheritLookAndFeel");
    if (deviceInheritLookAndFeel) {
      deviceThemeId=ThemeImpl.getDefaultRegularThemeId(companyId);
      deviceColorSchemeId=StringPool.BLANK;
      deleteThemeSettingsProperties(typeSettingsProperties,device);
    }
 else     if (Validator.isNotNull(deviceThemeId)) {
      deviceColorSchemeId=getColorSchemeId(companyId,deviceThemeId,deviceColorSchemeId,deviceWapTheme);
      updateThemeSettingsProperties(actionRequest,companyId,typeSettingsProperties,themeId,device,deviceThemeId,deviceWapTheme);
    }
    long groupId=liveGroupId;
    if (stagingGroupId > 0) {
      groupId=stagingGroupId;
    }
    LayoutServiceUtil.updateLayout(groupId,privateLayout,layoutId,typeSettingsProperties.toString());
    LayoutServiceUtil.updateLookAndFeel(groupId,privateLayout,layoutId,deviceThemeId,deviceColorSchemeId,deviceCss,deviceWapTheme);
  }
}
