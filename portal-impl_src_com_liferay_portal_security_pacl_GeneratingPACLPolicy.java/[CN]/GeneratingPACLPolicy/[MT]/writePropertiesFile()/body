{
  boolean enabled=PortalSecurityManagerThreadLocal.isEnabled();
  try {
    PortalSecurityManagerThreadLocal.setEnabled(false);
    String fileName=getServletContextName().concat(_FILE_EXTENSION);
    String writePath=GetterUtil.getString(getProperty(_SECURITY_MANAGER_GENERATOR_DIR));
    if (Validator.isNull(writePath)) {
      writePath=PropsValues.LIFERAY_HOME.concat(File.separator).concat(_POLICY_DIR);
    }
    String properties=generateProperties();
    FileUtil.write(writePath,fileName,properties);
  }
 catch (  IOException ioe) {
    _log.error(ioe,ioe);
  }
 finally {
    PortalSecurityManagerThreadLocal.setEnabled(enabled);
  }
}
