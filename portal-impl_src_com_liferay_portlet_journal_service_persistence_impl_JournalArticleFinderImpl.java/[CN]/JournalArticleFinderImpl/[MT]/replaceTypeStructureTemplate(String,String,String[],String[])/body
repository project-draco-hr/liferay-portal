{
  StringBundler sb=new StringBundler(5);
  if (Validator.isNull(type) && isNullArray(ddmStructureKeys) && isNullArray(ddmTemplateKeys)) {
    return StringUtil.replace(sql,"([$TYPE_STRUCTURE_TEMPLATE$]) AND",StringPool.BLANK);
  }
  if (Validator.isNotNull(type)) {
    sb.append(_TYPE_SQL);
  }
  if (!isNullArray(ddmStructureKeys)) {
    if (Validator.isNotNull(type)) {
      sb.append(_AND_OR_CONNECTOR);
    }
    sb.append(_DDM_STRUCTURE_KEY_SQL);
  }
  if (!isNullArray(ddmTemplateKeys)) {
    if (Validator.isNotNull(type) || !isNullArray(ddmStructureKeys)) {
      sb.append(_AND_OR_CONNECTOR);
    }
    sb.append(_DDM_TEMPLATE_KEY_SQL);
  }
  return StringUtil.replace(sql,"[$TYPE_STRUCTURE_TEMPLATE$]",sb.toString());
}
