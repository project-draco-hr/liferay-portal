{
  String[] loaders=PropsValues.FREEMARKER_ENGINE_CONFIGURATION_TEMPLATE_LOADERS;
  LiferayTemplateLoader liferayTemplateLoader=new LiferayTemplateLoader();
  liferayTemplateLoader.setTemplateLoaders(loaders);
  _stringTemplateLoader=new StringTemplateLoader();
  MultiTemplateLoader multiTemplateLoader=new MultiTemplateLoader(new TemplateLoader[]{new ClassTemplateLoader(getClass(),"/"),_stringTemplateLoader,liferayTemplateLoader});
  _configuration=new Configuration();
  _configuration.setDefaultEncoding(StringPool.UTF8);
  _configuration.setLocalizedLookup(PropsValues.FREEMARKER_ENGINE_CONFIGURATION_LOCALIZED_LOOKUP);
  _configuration.setObjectWrapper(new DefaultObjectWrapper());
  _configuration.setTemplateUpdateDelay(PropsValues.FREEMARKER_ENGINE_CONFIGURATION_MODIFICATION_CHECK_INTERVAL);
  _configuration.setTemplateLoader(multiTemplateLoader);
  try {
    _configuration.setSetting("template_exception_handler",PropsValues.FREEMARKER_ENGINE_CONFIGURATION_TEMPLATE_EXCEPTION_HANDLER);
    _configuration.setSetting("auto_import",PropsValues.FREEMARKER_ENGINE_MACRO_LIBRARY);
    _configuration.setSetting("cache_storage",PropsValues.FREEMARKER_ENGINE_CONFIGURATION_CACHE_STORAGE);
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
  _restrictedToolsContext=new FreeMarkerContextImpl();
  FreeMarkerVariables.insertHelperUtilities(_restrictedToolsContext,PropsValues.JOURNAL_TEMPLATE_FREEMARKER_RESTRICTED_VARIABLES);
  _standardToolsContext=new FreeMarkerContextImpl();
  FreeMarkerVariables.insertHelperUtilities(_standardToolsContext,null);
}
