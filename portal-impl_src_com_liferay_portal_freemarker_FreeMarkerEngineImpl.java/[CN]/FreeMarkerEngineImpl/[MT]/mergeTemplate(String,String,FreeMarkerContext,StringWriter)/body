{
  try {
    if ((Validator.isNotNull(freeMarkerTemplateId)) && (!PropsValues.LAYOUT_TEMPLATE_CACHE_ENABLED || !resourceExists(freeMarkerTemplateId))) {
      _stringTemplateLoader.putTemplate(freeMarkerTemplateId,script);
      if (_log.isDebugEnabled()) {
        _log.debug("Added " + freeMarkerTemplateId + " to the FreeMarker template repository");
      }
    }
    FreeMarkerContextImpl freeMarkerContextImpl=(FreeMarkerContextImpl)freeMarkerContext;
    Template template=_configuration.getTemplate(freeMarkerTemplateId,StringPool.UTF8);
    template.process(freeMarkerContextImpl.getWrappedContext(),output);
    return true;
  }
 catch (  IOException ioe) {
    throw ioe;
  }
catch (  Exception e) {
    throw new SystemException(e);
  }
}
