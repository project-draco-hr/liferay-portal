{
  List<WikiPage> pages=new ArrayList<WikiPage>();
  Iterator<WikiPage> itr=wikiPageLocalService.getPages(nodeId,true,0,_MAX_END).iterator();
  while (itr.hasNext() && (pages.size() < max)) {
    WikiPage page=itr.next();
    if (WikiPagePermission.contains(getPermissionChecker(),page,ActionKeys.VIEW)) {
      pages.add(page);
    }
  }
  return pages;
}
