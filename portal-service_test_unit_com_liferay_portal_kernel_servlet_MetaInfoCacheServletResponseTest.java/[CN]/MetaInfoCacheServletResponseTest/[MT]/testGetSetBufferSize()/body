{
  final AtomicInteger bufferSizeReference=new AtomicInteger();
  StubHttpServletResponse stubHttpServletResponse=new StubHttpServletResponse(){
    @Override public boolean isCommitted(){
      return false;
    }
    @Override public void setBufferSize(    int bufferSzie){
      bufferSizeReference.set(bufferSzie);
    }
  }
;
  MetaInfoCacheServletResponse metaInfoCacheServletResponse=new MetaInfoCacheServletResponse(stubHttpServletResponse);
  Assert.assertEquals(0,metaInfoCacheServletResponse.getBufferSize());
  metaInfoCacheServletResponse.setBufferSize(1024);
  Assert.assertEquals(1024,metaInfoCacheServletResponse.getBufferSize());
  Assert.assertEquals(1024,bufferSizeReference.get());
  metaInfoCacheServletResponse.flushBuffer();
  try {
    metaInfoCacheServletResponse.setBufferSize(2048);
  }
 catch (  IllegalStateException ise) {
  }
}
