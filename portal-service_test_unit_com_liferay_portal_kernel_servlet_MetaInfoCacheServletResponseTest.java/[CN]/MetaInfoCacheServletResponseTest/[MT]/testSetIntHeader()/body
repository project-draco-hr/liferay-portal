{
  final List<ObjectValuePair<String,Integer>> intList=new ArrayList<ObjectValuePair<String,Integer>>();
  StubHttpServletResponse stubHttpServletResponse=new StubHttpServletResponse(){
    @Override public void setIntHeader(    String name,    int value){
      intList.add(new ObjectValuePair<String,Integer>(name,value));
    }
  }
;
  MetaInfoCacheServletResponse metaInfoCacheServletResponse=new MetaInfoCacheServletResponse(stubHttpServletResponse);
  Map<String,Set<Header>> headers=metaInfoCacheServletResponse.getHeaders();
  assertEquals(0,headers.size());
  metaInfoCacheServletResponse.setIntHeader("name1",1);
  assertEquals(1,headers.size());
  assertTrue(metaInfoCacheServletResponse.containsHeader("name1"));
  Set<Header> intHeaders1=headers.get("name1");
  assertEquals(1,intHeaders1.size());
  assertTrue(intHeaders1.contains(new Header(1)));
  assertEquals(1,intList.size());
  assertEquals(new ObjectValuePair<String,Integer>("name1",1),intList.get(0));
  metaInfoCacheServletResponse.setIntHeader("name1",2);
  assertEquals(1,headers.size());
  assertTrue(metaInfoCacheServletResponse.containsHeader("name1"));
  intHeaders1=headers.get("name1");
  assertEquals(1,intHeaders1.size());
  assertTrue(intHeaders1.contains(new Header(2)));
  assertEquals(2,intList.size());
  assertEquals(new ObjectValuePair<String,Integer>("name1",2),intList.get(1));
  metaInfoCacheServletResponse.setIntHeader("name2",1);
  assertEquals(2,headers.size());
  assertTrue(metaInfoCacheServletResponse.containsHeader("name2"));
  Set<Header> intHeaders2=headers.get("name2");
  assertEquals(1,intHeaders2.size());
  assertTrue(intHeaders2.contains(new Header(1)));
  assertEquals(3,intList.size());
  assertEquals(new ObjectValuePair<String,Integer>("name2",1),intList.get(2));
}
