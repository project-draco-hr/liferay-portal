{
  ExportImportContentProcessor exportImportContentProcessor=_bundleContext.getService(serviceReference);
  String modelClassName=GetterUtil.getString(serviceReference.getProperty("model.class.name"));
  int order=GetterUtil.getInteger(serviceReference.getProperty("content.processor.order"),1);
  ArrayList<ExportImportContentProcessor<?,?>> exportImportContentProcessorList=_exportImportContentProcessors.get(modelClassName);
  if (exportImportContentProcessorList == null) {
    exportImportContentProcessorList=new ArrayList<>();
  }
  int capacity=exportImportContentProcessorList.size() + 1;
  exportImportContentProcessorList.ensureCapacity(capacity);
  order=Math.max(0,order);
  order=Math.min(capacity,order) - 1;
  exportImportContentProcessorList.add(order,exportImportContentProcessor);
  _exportImportContentProcessors.put(modelClassName,exportImportContentProcessorList);
  return exportImportContentProcessor;
}
