{
  Menu menu=new Menu();
  menu.setCssClass("portlet-options");
  menu.setDirection("down");
  menu.setExtended(false);
  menu.setIcon("../aui/plus-sign-2");
  List<MenuItem> portletTitleMenuItems=new ArrayList<>();
  for (  PortletToolbarContributorLocator portletToolbarContributorLocator : _portletToolbarContributorLocators) {
    List<PortletToolbarContributor> portletToolbarContributors=portletToolbarContributorLocator.getPortletToolbarContributors(portletId,portletRequest);
    if (portletToolbarContributors == null) {
      continue;
    }
    for (    PortletToolbarContributor portletToolbarContributor : portletToolbarContributors) {
      List<MenuItem> curPortletTitleMenuItems=portletToolbarContributor.getPortletTitleMenuItems(portletRequest);
      if (curPortletTitleMenuItems == null) {
        continue;
      }
      portletTitleMenuItems.addAll(curPortletTitleMenuItems);
    }
  }
  menu.setMenuItems(portletTitleMenuItems);
  menu.setMessage("add");
  menu.setShowArrow(false);
  menu.setShowWhenSingleIcon(true);
  return menu;
}
