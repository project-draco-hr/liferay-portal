{
  List<MenuItem> contentAdditionMenuItems=new ArrayList<>();
  for (  PortletToolbarContributorLocator portletToolbarContributorLocator : _portletToolbarContributorLocators) {
    List<PortletToolbarContributor> portletToolbarContributors=portletToolbarContributorLocator.getPortletToolbarContributors(portletId,portletRequest);
    if (portletToolbarContributors == null) {
      continue;
    }
    for (    PortletToolbarContributor portletToolbarContributor : portletToolbarContributors) {
      List<MenuItem> curContentAdditionMenuItems=portletToolbarContributor.getContentAdditionMenuItems(portletRequest);
      if (curContentAdditionMenuItems != null) {
        contentAdditionMenuItems.addAll(curContentAdditionMenuItems);
      }
    }
  }
  Menu menu=new Menu();
  menu.setCssClass("portlet-options");
  menu.setDirection("down");
  menu.setExtended(false);
  menu.setIcon("../aui/plus-sign-2");
  menu.setLabel(StringPool.BLANK);
  menu.setMenuItems(contentAdditionMenuItems);
  menu.setMessage("add");
  menu.setShowArrow(true);
  menu.setShowExpanded(false);
  menu.setShowWhenSingleIcon(true);
  menu.setTriggerCssClass(StringPool.BLANK);
  return menu;
}
