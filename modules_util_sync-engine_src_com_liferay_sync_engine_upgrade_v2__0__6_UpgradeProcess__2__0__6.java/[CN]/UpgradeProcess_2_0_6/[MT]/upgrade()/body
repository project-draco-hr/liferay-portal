{
  SyncFilePersistence syncFilePersistence=SyncFileService.getSyncFilePersistence();
  syncFilePersistence.executeRaw("alter table SyncFile add versionId long before state");
  if (OSDetector.isWindows()) {
    return;
  }
  List<SyncFile> syncFiles=syncFilePersistence.queryForAll();
  for (  SyncFile syncFile : syncFiles) {
    Path filePath=Paths.get(syncFile.getFilePathName());
    if (Files.exists(filePath)) {
      FileUtil.writeFileKey(filePath,String.valueOf(syncFile.getSyncFileId()));
    }
  }
  syncFilePersistence.updateRaw("ALTER TABLE `SyncWatchEvent` ADD COLUMN previousFilePathName" + " VARCHAR(16777216);");
}
