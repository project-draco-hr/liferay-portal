{
  SyncFilePersistence syncFilePersistence=SyncFileService.getSyncFilePersistence();
  syncFilePersistence.executeRaw("ALTER TABLE `SyncFile` ADD COLUMN versionId LONG BEFORE state;");
  syncFilePersistence.executeRaw("ALTER TABLE `SyncWatchEvent` ADD COLUMN previousFilePathName" + " VARCHAR(16777216) BEFORE syncAccountId;");
  if (OSDetector.isWindows()) {
    return;
  }
  List<SyncFile> syncFiles=syncFilePersistence.queryForAll();
  for (  SyncFile syncFile : syncFiles) {
    Path filePath=Paths.get(syncFile.getFilePathName());
    if (Files.exists(filePath)) {
      FileUtil.writeFileKey(filePath,String.valueOf(syncFile.getSyncFileId()));
    }
  }
}
