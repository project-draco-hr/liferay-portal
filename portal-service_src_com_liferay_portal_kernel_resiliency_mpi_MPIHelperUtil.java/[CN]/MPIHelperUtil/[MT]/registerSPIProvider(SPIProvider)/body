{
  String spiProviderName=spiProvider.getName();
  SPIProvider previousSPIProvider=null;
  _lock.lock();
  try {
    previousSPIProvider=_spiProviders.putIfAbsent(spiProviderName,spiProvider);
  }
  finally {
    _lock.unlock();
  }
  if (previousSPIProvider != null) {
    if (_log.isWarnEnabled()) {
      _log.warn("Not registering SPI provider " + spiProvider + " because it duplicates "+ previousSPIProvider);
    }
    return false;
  }
 else {
    if (_log.isInfoEnabled()) {
      _log.info("Registered SPI provider " + spiProvider);
    }
    return true;
  }
}
