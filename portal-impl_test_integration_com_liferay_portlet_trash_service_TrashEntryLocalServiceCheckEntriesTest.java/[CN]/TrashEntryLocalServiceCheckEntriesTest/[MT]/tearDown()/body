{
  clearTrashEntries(TrashEntryLocalServiceUtil.getTrashEntries(QueryUtil.ALL_POS,QueryUtil.ALL_POS));
  for (  Group group : _groups) {
    List<BackgroundTask> backgroundTasks=BackgroundTaskLocalServiceUtil.getBackgroundTasks(group.getGroupId(),BackgroundTaskConstants.STATUS_IN_PROGRESS);
    int counter=0;
    while (!backgroundTasks.isEmpty() && (counter < 200)) {
      Thread.sleep(100);
      counter++;
      backgroundTasks=BackgroundTaskLocalServiceUtil.getBackgroundTasks(group.getGroupId(),BackgroundTaskConstants.STATUS_IN_PROGRESS);
    }
    GroupLocalServiceUtil.deleteGroup(group.getGroupId());
  }
  if (_companies != null) {
    for (    Long companyId : _companies) {
      CompanyLocalServiceUtil.deleteCompany(companyId);
    }
  }
  setTrashEntryCleanCount(_trashEntriesMaxCleanCount);
}
