{
  User user=UserTestUtil.getAdminUser(group.getCompanyId());
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(group.getGroupId(),user.getUserId());
  FileEntry fileEntry=DLAppLocalServiceUtil.addFileEntry(user.getUserId(),group.getGroupId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,RandomTestUtil.randomString(),ContentTypes.TEXT_PLAIN,RandomTestUtil.randomBytes(TikaSafeRandomizerBumper.INSTANCE),serviceContext);
  DLTrashLocalServiceUtil.moveFileEntryToTrash(user.getUserId(),fileEntry.getRepositoryId(),fileEntry.getFileEntryId());
  if (expired) {
    int maxAge=TrashUtil.getMaxAge(group);
    TrashEntry trashEntry=TrashEntryLocalServiceUtil.getEntry(DLFileEntry.class.getName(),fileEntry.getFileEntryId());
    Date createDate=trashEntry.getCreateDate();
    trashEntry.setCreateDate(new Date(createDate.getTime() - maxAge * Time.MINUTE - Time.DAY));
    TrashEntryLocalServiceUtil.updateTrashEntry(trashEntry);
  }
}
