{
  String protocol=url.getProtocol();
  if (protocol.equals("bundle") || protocol.equals("bundleresource")) {
    try {
      return url.toURI();
    }
 catch (    Exception e) {
      _log.log(e);
    }
  }
 else   if (protocol.equals("jar")) {
    try {
      JarURLConnection jarUrlConnection=(JarURLConnection)url.openConnection();
      return jarUrlConnection.getJarFileURL().toURI();
    }
 catch (    Exception e) {
      _log.log(e);
    }
  }
 else   if (protocol.equals("vfs")) {
    String file=url.getFile();
    int indexOf=file.indexOf(".jar") + 4;
    file=file.substring(0,indexOf) + "!" + url.getFile().substring(indexOf,url.getFile().length());
    return new File(file).toURI();
  }
  return null;
}
