{
  Map<String,Object> messages=null;
  try {
    messages=(Map<String,Object>)session.getAttribute(KEY);
    if ((messages == null) && createIfAbsent) {
      messages=new LinkedHashMap<String,Object>();
      session.setAttribute(KEY,messages);
    }
  }
 catch (  IllegalStateException ise) {
  }
  return messages;
}
