{
  if (session == null) {
    return null;
  }
  if (portletKey == null) {
    portletKey=StringPool.BLANK;
  }
  Map<String,Object> map=null;
  try {
    map=(Map<String,Object>)session.getAttribute(portletKey + _CLASS_NAME);
    if ((map == null) && createIfAbsent) {
      map=new SessionMessagesMap();
      session.setAttribute(portletKey + _CLASS_NAME,map);
    }
  }
 catch (  IllegalStateException ise) {
  }
  return map;
}
