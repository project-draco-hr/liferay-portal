{
  SearchContext searchContext=ServiceTestUtil.getSearchContext(_group.getGroupId());
  searchContext.setKeywords("Architectural");
  int initialSearchCount=searchCount(_group.getGroupId(),searchContext);
  JournalFolder folder=JournalTestUtil.addFolder(_group.getGroupId(),ServiceTestUtil.randomString());
  JournalArticle article1=JournalTestUtil.addArticleWithWorkflow(_group.getGroupId(),folder.getFolderId(),"title","Liferay Architectural Approach",true);
  Assert.assertEquals(initialSearchCount + 1,searchCount(_group.getGroupId(),searchContext));
  ServiceContext serviceContext=ServiceTestUtil.getServiceContext(_group.getGroupId());
  serviceContext.setWorkflowAction(WorkflowConstants.ACTION_PUBLISH);
  String content=DDMStructureTestUtil.getSampleStructuredContent("Architectural Approach");
  JournalTestUtil.updateArticle(article1,article1.getTitle(),content,serviceContext);
  JournalArticle article2=JournalTestUtil.addArticleWithWorkflow(_group.getGroupId(),folder.getFolderId(),"title","Apple Architectural Tablet",true);
  Assert.assertEquals(initialSearchCount + 2,searchCount(_group.getGroupId(),searchContext));
  content=DDMStructureTestUtil.getSampleStructuredContent("Architectural Tablet");
  JournalTestUtil.updateArticle(article2,article2.getTitle(),content,serviceContext);
  JournalArticleLocalServiceUtil.deleteArticles(_group.getGroupId());
  Assert.assertEquals(initialSearchCount,searchCount(_group.getGroupId(),searchContext));
}
