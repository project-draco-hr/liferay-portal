{
  ServiceContext serviceContext=ServiceTestUtil.getServiceContext(_group.getGroupId());
  SearchContext searchContext1=ServiceTestUtil.getSearchContext(_group.getGroupId());
  searchContext1.setKeywords("Arquitectura");
  searchContext1.setLocale(LocaleUtil.SPAIN);
  SearchContext searchContext2=ServiceTestUtil.getSearchContext(_group.getGroupId());
  searchContext2.setKeywords("Apple");
  searchContext2.setLocale(LocaleUtil.SPAIN);
  int initialBaseModelsSearchCountKeywords1=searchCount(_group.getGroupId(),searchContext1);
  int initialBaseModelsSearchCountKeywords2=searchCount(_group.getGroupId(),searchContext2);
  Map<Locale,String> titleMap=new HashMap<Locale,String>();
  titleMap.put(LocaleUtil.US,"Title");
  titleMap.put(LocaleUtil.GERMANY,"Titel");
  titleMap.put(LocaleUtil.SPAIN,"Titulo");
  Map<Locale,String> contentMap=new HashMap<Locale,String>();
  contentMap.put(LocaleUtil.US,"Liferay Architectural Approach");
  contentMap.put(LocaleUtil.GERMANY,"Liferay Architektur Ansatz");
  contentMap.put(LocaleUtil.SPAIN,"Liferay Arquitectura Aproximacion");
  JournalArticle article=JournalTestUtil.addArticleWithWorkflow(_group.getGroupId(),titleMap,titleMap,contentMap,true);
  User user=UserTestUtil.addUser(_group.getGroupId(),LocaleUtil.SPAIN);
  Assert.assertEquals(initialBaseModelsSearchCountKeywords1 + 1,searchCount(_group.getGroupId(),searchContext1));
  contentMap.put(LocaleUtil.SPAIN,"Apple manzana tablet");
  String content=JournalTestUtil.createLocalizedContent(contentMap,LocaleUtil.getDefault());
  article=JournalArticleLocalServiceUtil.updateArticleTranslation(_group.getGroupId(),article.getArticleId(),article.getVersion(),LocaleUtil.SPAIN,article.getTitle(LocaleUtil.SPAIN),article.getDescription(LocaleUtil.SPAIN),content,null,serviceContext);
  Assert.assertEquals(initialBaseModelsSearchCountKeywords2,searchCount(_group.getGroupId(),searchContext2));
  serviceContext.setWorkflowAction(WorkflowConstants.ACTION_PUBLISH);
  JournalArticleLocalServiceUtil.updateArticle(user.getUserId(),article.getGroupId(),article.getFolderId(),article.getArticleId(),article.getVersion(),article.getContent(),serviceContext);
  Assert.assertEquals(initialBaseModelsSearchCountKeywords2 + 1,searchCount(_group.getGroupId(),searchContext2));
}
