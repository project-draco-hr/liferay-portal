{
  String userIdString=userId.getUserId(securityToken);
  Person person=null;
  if (userIdString.startsWith("G-")) {
    String groupId=userIdString.substring("G-".length());
    person=getGroupPerson(groupId);
  }
 else {
    long userIdLong=GetterUtil.getLong(userIdString);
    User user=UserLocalServiceUtil.getUserById(userIdLong);
    if (!ShindigUtil.isValidUser(user)) {
      return null;
    }
    person=getUserPerson(user,fields,securityToken);
  }
  return person;
}
