{
  LayoutTypeController layoutTypeController=LayoutTypeControllerTracker.getLayoutTypeController(layout.getType());
  LayoutTypeAccessPolicy layoutTypeAccessPolicy=LayoutTypeAccessPolicyTracker.getLayoutTypeAccessPolicy(layout);
  if (layout.isTypeURL()) {
    return new LayoutTypeURLImpl(layout,layoutTypeController,layoutTypeAccessPolicy);
  }
  return new LayoutTypePortletImpl(layout,layoutTypeController,layoutTypeAccessPolicy);
}
