{
  Field weblogicField=ServerDetector.class.getDeclaredField("_webLogic");
  weblogicField.setAccessible(true);
  ServerDetector serverDetector=ServerDetector.getInstance();
  weblogicField.set(serverDetector,Boolean.TRUE);
  StubHttpServletResponse stubHttpServletResponse=new StubHttpServletResponse(){
    @Override public boolean isCommitted(){
      return false;
    }
  }
;
  BufferCacheServletResponse bufferCacheServletResponse=new BufferCacheServletResponse(stubHttpServletResponse);
  bufferCacheServletResponse.setBufferSize(1024);
  bufferCacheServletResponse.flushBuffer();
  try {
    bufferCacheServletResponse.setBufferSize(2048);
  }
 catch (  IllegalStateException ise) {
    Assert.fail();
  }
  weblogicField.set(serverDetector,Boolean.FALSE);
}
