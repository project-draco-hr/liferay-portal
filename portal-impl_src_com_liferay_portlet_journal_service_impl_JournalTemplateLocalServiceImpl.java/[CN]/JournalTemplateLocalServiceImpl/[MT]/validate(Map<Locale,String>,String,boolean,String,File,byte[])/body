{
  Locale locale=LocaleUtil.getDefault();
  if (nameMap.isEmpty() || Validator.isNull(nameMap.get(locale))) {
    throw new TemplateNameException();
  }
 else   if (Validator.isNull(xsl)) {
    throw new TemplateXslException();
  }
  String[] imageExtensions=PrefsPropsUtil.getStringArray(PropsKeys.JOURNAL_IMAGE_EXTENSIONS,StringPool.COMMA);
  if (smallImage && Validator.isNull(smallImageURL) && (smallImageFile != null)&& (smallImageBytes != null)) {
    String smallImageName=smallImageFile.getName();
    if (smallImageName != null) {
      boolean validSmallImageExtension=false;
      for (int i=0; i < imageExtensions.length; i++) {
        if (StringPool.STAR.equals(imageExtensions[i]) || StringUtil.endsWith(smallImageName,imageExtensions[i])) {
          validSmallImageExtension=true;
          break;
        }
      }
      if (!validSmallImageExtension) {
        throw new TemplateSmallImageNameException(smallImageName);
      }
    }
    long smallImageMaxSize=PrefsPropsUtil.getLong(PropsKeys.JOURNAL_IMAGE_SMALL_MAX_SIZE);
    if ((smallImageMaxSize > 0) && ((smallImageBytes == null) || (smallImageBytes.length > smallImageMaxSize))) {
      throw new TemplateSmallImageSizeException();
    }
  }
}
