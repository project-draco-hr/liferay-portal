{
  JournalTemplate template=doGetTemplate(groupId,templateId);
  DDMTemplate ddmTemplate=ddmTemplateLocalService.updateTemplate(template.getPrimaryKey(),nameMap,descriptionMap,DDMTemplateConstants.TEMPLATE_TYPE_DISPLAY,DDMTemplateConstants.TEMPLATE_MODE_CREATE,langType,xsl,cacheable,smallImage,smallImageURL,smallImageFile,serviceContext);
  if (Validator.isNull(template.getTemplateId()) && Validator.isNotNull(structureId)) {
    JournalStructure structure=journalStructureLocalService.getStructure(groupId,structureId,true);
    ddmTemplate.setClassPK(structure.getPrimaryKey());
    ddmTemplatePersistence.update(ddmTemplate);
  }
  return new JournalTemplateAdapter(ddmTemplate);
}
