{
  int articleCount=0;
  MirageTemplate mirageTemplate=new MirageTemplate(template);
  MirageTemplateCriteria criteria=new MirageTemplateCriteria(MirageTemplateCriteria.ARTICLE_COUNT_BY_G_T);
  ContentTypeService contentTypeService=MirageServiceFactory.getContentTypeService();
  try {
    articleCount=contentTypeService.getTemplatesCount(null,mirageTemplate,criteria);
  }
 catch (  CMSException cmse) {
    throw (SystemException)cmse.getCause();
  }
  if (articleCount > 0) {
    throw new RequiredTemplateException();
  }
  imageLocalService.deleteImage(template.getSmallImageId());
  webDAVPropsLocalService.deleteWebDAVProps(JournalTemplate.class.getName(),template.getPrimaryKey());
  resourceLocalService.deleteResource(template.getCompanyId(),JournalTemplate.class.getName(),ResourceConstants.SCOPE_INDIVIDUAL,template.getId());
  try {
    contentTypeService.deleteTemplateOfContentType(null,mirageTemplate);
  }
 catch (  CMSException cmse) {
    ExceptionTranslator.translate(cmse);
  }
}
