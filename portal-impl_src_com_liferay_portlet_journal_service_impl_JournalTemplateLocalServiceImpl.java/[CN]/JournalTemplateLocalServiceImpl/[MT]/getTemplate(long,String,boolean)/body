{
  templateId=StringUtil.toUpperCase(GetterUtil.getString(templateId));
  JournalTemplate template=fetchTemplate(groupId,templateId);
  if (template != null) {
    return template;
  }
  if (!includeGlobalTemplates) {
    throw new NoSuchTemplateException("No JournalTemplate exists with the template ID " + templateId);
  }
  Group group=groupPersistence.findByPrimaryKey(groupId);
  Group companyGroup=groupLocalService.getCompanyGroup(group.getCompanyId());
  return doGetTemplate(companyGroup.getGroupId(),templateId);
}
