{
  SearchCriteria criteria=new SearchCriteria();
  List<SearchFieldValue> searchFields=new ArrayList<SearchFieldValue>();
  Map<String,String> nameValues=new HashMap<String,String>();
  nameValues.put(OptionalJournalTemplateCriteria.FINDER,OptionalJournalTemplateCriteria.FIND_BY_KEYWORDS);
  nameValues.put(OptionalJournalTemplateCriteria.COMPANY_ID,Long.toString(companyId));
  nameValues.put(OptionalJournalTemplateCriteria.GROUP_ID,Long.toString(groupId));
  nameValues.put(OptionalJournalTemplateCriteria.KEYWORDS,keywords);
  nameValues.put(OptionalJournalTemplateCriteria.STRUCTURE_ID,structureId);
  nameValues.put(OptionalJournalTemplateCriteria.STRUCTURE_ID_COMPARATOR,structureIdComparator);
  nameValues.put(OptionalJournalTemplateCriteria.RANGE_START,Integer.toString(start));
  nameValues.put(OptionalJournalTemplateCriteria.RANGE_END,Integer.toString(end));
  _addSearchFields(searchFields,nameValues);
  criteria.setSearchFieldValues(searchFields);
  criteria.setOrderByComparator(obc);
  ContentTypeService contentTypeService=MirageServiceFactory.getContentTypeService();
  List<Template> templates=null;
  try {
    templates=contentTypeService.searchTemplates(criteria);
  }
 catch (  CMSException cmse) {
    _throwSystemException(cmse);
  }
  return _getJournalTemplatesFromTemplates(templates);
}
