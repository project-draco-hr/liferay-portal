{
  KaleoInstance kaleoInstance=kaleoInstanceLocalService.getKaleoInstance(kaleoTaskInstanceToken.getKaleoInstanceId());
  if (workflowContext == null) {
    workflowContext=WorkflowContextUtil.convert(kaleoInstance.getWorkflowContext());
  }
 else {
    Map<String,Serializable> storedWorkflowContext=WorkflowContextUtil.convert(kaleoInstance.getWorkflowContext());
    for (    Map.Entry<String,Serializable> entry : storedWorkflowContext.entrySet()) {
      String key=entry.getKey();
      if (!workflowContext.containsKey(key)) {
        workflowContext.put(key,entry.getValue());
      }
    }
  }
  return workflowContext;
}
