{
  if (key == null) {
    return null;
  }
  Object localValue=_localPortalCache.get(key);
  if (localValue == null) {
    Object clusterValue=_clusterPortalCache.get(key);
    if (key.equals(clusterValue)) {
      if (_log.isDebugEnabled()) {
        _log.debug("Flagging local key " + key);
      }
      _localPortalCache.put(key,_dummyValue);
    }
  }
 else {
    if (localValue.equals(_dummyValue)) {
      if (_log.isDebugEnabled()) {
        _log.debug("Local key " + key + " has dummy value");
      }
      return null;
    }
    Object clusterValue=_clusterPortalCache.get(key);
    if (!key.equals(clusterValue)) {
      if (_log.isDebugEnabled()) {
        _log.debug("Local key " + key + " is not in cluster");
      }
      return null;
    }
    return localValue;
  }
  return null;
}
