{
  UploadPortletRequest uploadPortletRequest=PortalUtil.getUploadPortletRequest(actionRequest);
  long groupId=ParamUtil.getLong(uploadPortletRequest,"groupId");
  InputStream inputStream=null;
  try {
    File file=uploadPortletRequest.getFile("fileName");
    inputStream=new ByteArrayFileInputStream(file,1024);
    inputStream.mark(0);
    LayoutSetServiceUtil.updateLogo(groupId,true,true,inputStream,false);
    inputStream.reset();
    LayoutSetServiceUtil.updateLogo(groupId,false,true,inputStream,false);
  }
  finally {
    StreamUtil.cleanUp(inputStream);
  }
}
