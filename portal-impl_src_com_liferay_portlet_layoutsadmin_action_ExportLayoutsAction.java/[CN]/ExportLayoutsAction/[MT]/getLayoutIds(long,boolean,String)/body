{
  List<Long> layoutIds=new ArrayList<Long>();
  if (Validator.isNotNull(layoutIdsJSON)) {
    JSONArray jsonArray=JSONFactoryUtil.createJSONArray(layoutIdsJSON);
    for (int i=0; i < jsonArray.length(); ++i) {
      JSONObject jsonObject=jsonArray.getJSONObject(i);
      long layoutId=jsonObject.getLong("layoutId");
      if (layoutId > 0) {
        layoutIds.add(layoutId);
      }
      if (jsonObject.getBoolean("includeChildren")) {
        addLayoutIds(layoutIds,groupId,privateLayout,layoutId);
      }
    }
  }
  return ArrayUtil.toArray(layoutIds.toArray(new Long[layoutIds.size()]));
}
