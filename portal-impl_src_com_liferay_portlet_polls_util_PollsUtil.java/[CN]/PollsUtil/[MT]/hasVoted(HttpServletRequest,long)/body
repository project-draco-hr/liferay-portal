{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  if (themeDisplay.isSignedIn()) {
    try {
      PollsVoteLocalServiceUtil.getVote(questionId,themeDisplay.getUserId());
    }
 catch (    NoSuchVoteException nsve) {
      return false;
    }
    return true;
  }
 else {
    String votedCookie=CookieKeys.getCookie(request,PollsQuestion.class.getName() + "." + questionId);
    Boolean hasVoted=GetterUtil.getBoolean(votedCookie);
    if (hasVoted) {
      return true;
    }
 else {
      return false;
    }
  }
}
