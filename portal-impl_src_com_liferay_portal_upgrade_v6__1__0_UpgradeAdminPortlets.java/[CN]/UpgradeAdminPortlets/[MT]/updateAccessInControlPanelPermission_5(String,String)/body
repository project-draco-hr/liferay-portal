{
  long[] companyIds=PortalInstances.getCompanyIdsBySQL();
  if (companyIds.length == 0) {
    return;
  }
  for (int i=0; i < companyIds.length; i++) {
    long companyId=companyIds[i];
    long[] newResourceIds=addResourceIds(companyId,portletTo);
    long[] oldResourceIds=getOldResourceIds(portletFrom);
    updatePermission(oldResourceIds,newResourceIds);
  }
}
