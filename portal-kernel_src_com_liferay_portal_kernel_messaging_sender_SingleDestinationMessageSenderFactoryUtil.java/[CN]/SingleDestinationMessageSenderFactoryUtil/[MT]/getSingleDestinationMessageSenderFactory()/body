{
  try {
    while (_singleDestinationMessageSenderFactory == null) {
      Registry registry=RegistryUtil.getRegistry();
      _singleDestinationMessageSenderFactory=registry.getService(SingleDestinationMessageSenderFactory.class);
      if (_singleDestinationMessageSenderFactory != null) {
        return _singleDestinationMessageSenderFactory;
      }
      if (_log.isDebugEnabled()) {
        _log.debug("Waiting for a destination factory");
      }
      Thread.sleep(500);
    }
  }
 catch (  InterruptedException ie) {
    throw new IllegalStateException("Unable to initialize " + "SingleDestinationMessageSenderFactoryUtil",ie);
  }
  return _singleDestinationMessageSenderFactory;
}
