{
  MBMessage message=MBMessageLocalServiceUtil.getMessage(messageId);
  if (className.equals(WorkflowInstance.class.getName())) {
    return permissionChecker.hasPermission(message.getGroupId(),PortletKeys.WORKFLOW_DEFINITIONS,message.getGroupId(),ActionKeys.VIEW);
  }
  if (PropsValues.DISCUSSION_COMMENTS_ALWAYS_EDITABLE_BY_OWNER && (permissionChecker.getUserId() == message.getUserId())) {
    return true;
  }
  if (message.isPending()) {
    Boolean hasPermission=WorkflowPermissionUtil.hasPermission(permissionChecker,message.getGroupId(),message.getWorkflowClassName(),message.getMessageId(),actionId);
    if (hasPermission != null) {
      return hasPermission.booleanValue();
    }
  }
  return contains(permissionChecker,companyId,groupId,className,classPK,ownerId,actionId);
}
