{
  User user=userPersistence.findByPrimaryKey(userId);
  long classNameId=PortalUtil.getClassNameId(className);
  Date now=new Date();
  validate(0,user.getCompanyId(),classNameId,classPK,url,typeId,primary);
  long websiteId=counterLocalService.increment();
  Website website=websitePersistence.create(websiteId);
  if (serviceContext != null) {
    website.setUuid(serviceContext.getUuid());
  }
  website.setCompanyId(user.getCompanyId());
  website.setUserId(user.getUserId());
  website.setUserName(user.getFullName());
  website.setCreateDate(now);
  if (serviceContext != null) {
    website.setCreateDate(serviceContext.getCreateDate(now));
    website.setModifiedDate(serviceContext.getModifiedDate(now));
  }
 else {
    website.setCreateDate(now);
    website.setModifiedDate(now);
  }
  website.setClassPK(classPK);
  website.setUrl(url);
  website.setTypeId(typeId);
  website.setPrimary(primary);
  websitePersistence.update(website);
  return website;
}
