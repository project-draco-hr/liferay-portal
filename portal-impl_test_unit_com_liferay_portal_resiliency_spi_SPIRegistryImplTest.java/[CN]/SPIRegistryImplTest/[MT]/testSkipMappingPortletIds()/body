{
  Assert.assertSame(_skipMappingPortletIds,_spiRegistryImpl.getExcludedPortletIds());
  String portlet1="portlet1";
  _spiRegistryImpl.addExcludedPortletId(portlet1);
  Assert.assertEquals(1,_skipMappingPortletIds.size());
  Assert.assertTrue(_skipMappingPortletIds.contains(portlet1));
  String portlet2="portlet2";
  SPI spi=new MockSPI();
  _portletIdToSPIMap.put(portlet2,spi);
  Assert.assertNull(_spiRegistryImpl.getPortletSPI(portlet1));
  Assert.assertSame(spi,_spiRegistryImpl.getPortletSPI(portlet2));
  _spiRegistryImpl.removeExcludedPortletId(portlet1);
  Assert.assertTrue(_skipMappingPortletIds.isEmpty());
}
