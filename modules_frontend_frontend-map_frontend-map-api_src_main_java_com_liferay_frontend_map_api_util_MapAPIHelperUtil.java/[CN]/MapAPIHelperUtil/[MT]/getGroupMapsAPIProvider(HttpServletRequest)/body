{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  Company company=themeDisplay.getCompany();
  PortletPreferences companyPortletPreferences=PrefsPropsUtil.getPreferences(company.getCompanyId());
  String companyMapsAPIProvider=PrefsParamUtil.getString(companyPortletPreferences,request,"mapsAPIProvider");
  Group liveGroup=(Group)request.getAttribute("site.liveGroup");
  UnicodeProperties groupTypeSettings=null;
  if (liveGroup != null) {
    groupTypeSettings=liveGroup.getTypeSettingsProperties();
  }
 else {
    groupTypeSettings=new UnicodeProperties();
  }
  return PropertiesParamUtil.getString(groupTypeSettings,request,"mapsAPIProvider",companyMapsAPIProvider);
}
