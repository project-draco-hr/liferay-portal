{
  if (exception.isEmpty()) {
    return false;
  }
  if (!ConnectionRetryUtil.retryInProgress(getSyncAccountId()) && _logger.isDebugEnabled()) {
    _logger.debug("Handling exception {}",exception);
  }
  if (exception.equals("com.liferay.portal.DuplicateLockException")) {
    SyncFile syncFile=getLocalSyncFile();
    syncFile.setState(SyncFile.STATE_ERROR);
    syncFile.setUiEvent(SyncFile.UI_EVENT_DUPLICATE_LOCK);
    SyncFileService.update(syncFile);
  }
 else   if (exception.equals("com.liferay.portal.kernel.upload.UploadException") || exception.contains("SizeLimitExceededException")) {
    SyncFile syncFile=getLocalSyncFile();
    syncFile.setState(SyncFile.STATE_ERROR);
    syncFile.setUiEvent(SyncFile.UI_EVENT_EXCEEDED_SIZE_LIMIT);
    SyncFileService.update(syncFile);
  }
 else   if (exception.equals("com.liferay.portal.security.auth.PrincipalException")) {
    SyncFile syncFile=getLocalSyncFile();
    syncFile.setState(SyncFile.STATE_ERROR);
    syncFile.setUiEvent(SyncFile.UI_EVENT_INVALID_PERMISSIONS);
    SyncFileService.update(syncFile);
  }
 else   if (exception.equals("com.liferay.portlet.documentlibrary." + "FileExtensionException")) {
    SyncFile syncFile=getLocalSyncFile();
    syncFile.setState(SyncFile.STATE_ERROR);
    syncFile.setUiEvent(SyncFile.UI_EVENT_INVALID_FILE_EXTENSION);
    SyncFileService.update(syncFile);
  }
 else   if (exception.equals("com.liferay.portlet.documentlibrary.FileNameException") || exception.equals("com.liferay.portlet.documentlibrary." + "FolderNameException")) {
    SyncFile syncFile=getLocalSyncFile();
    syncFile.setState(SyncFile.STATE_ERROR);
    syncFile.setUiEvent(SyncFile.UI_EVENT_INVALID_FILE_NAME);
    SyncFileService.update(syncFile);
  }
 else   if (exception.equals("com.liferay.portlet.documentlibrary." + "NoSuchFileEntryException")) {
    SyncFile syncFile=getLocalSyncFile();
    Path filePath=Paths.get(syncFile.getFilePathName());
    FileUtil.deleteFile(filePath);
    SyncFileService.deleteSyncFile(syncFile,false);
  }
 else   if (exception.equals("com.liferay.sync.SyncClientMinBuildException")) {
    retryServerConnection(SyncAccount.UI_EVENT_MIN_BUILD_REQUIREMENT_FAILED,-1);
  }
 else   if (exception.equals("com.liferay.sync.SyncServicesUnavailableException")) {
    retryServerConnection(SyncAccount.UI_EVENT_SYNC_SERVICES_NOT_ACTIVE,-1);
  }
 else   if (exception.equals("com.liferay.sync.SyncSiteUnavailableException")) {
    handleSiteDeactivatedException();
  }
 else   if (exception.equals("com.liferay.portal.kernel.jsonwebservice." + "NoSuchJSONWebServiceException") || exception.equals("java.lang.RuntimeException")) {
    retryServerConnection(SyncAccount.UI_EVENT_SYNC_WEB_MISSING,-1);
  }
 else   if (exception.equals("Authenticated access required") || exception.equals("java.lang.SecurityException")) {
    throw new HttpResponseException(HttpStatus.SC_UNAUTHORIZED,"Authenticated access required");
  }
 else {
    SyncFile syncFile=getLocalSyncFile();
    syncFile.setState(SyncFile.STATE_ERROR);
    syncFile.setUiEvent(SyncFile.UI_EVENT_NONE);
    SyncFileService.update(syncFile);
  }
  return true;
}
