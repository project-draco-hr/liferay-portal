{
  if (Validator.isNull(keywords)) {
    return new String[]{null};
  }
  if (_CUSTOM_SQL_AUTO_ESCAPE_WILDCARDS_ENABLED) {
    keywords=escapeWildCards(keywords);
  }
  if (lowerCase) {
    keywords=StringUtil.toLowerCase(keywords);
  }
  keywords=keywords.trim();
  List<String> keywordsList=new ArrayList<String>();
  for (int i=0; i < keywords.length(); i++) {
    char c=keywords.charAt(i);
    if (c == CharPool.QUOTE) {
      int pos=i + 1;
      i=keywords.indexOf(CharPool.QUOTE,pos);
      if (i == -1) {
        i=keywords.length();
      }
      if (i > pos) {
        String keyword=keywords.substring(pos,i);
        keywordsList.add(StringUtil.quote(keyword,StringPool.PERCENT));
      }
    }
 else {
      while (Character.isWhitespace(c)) {
        i++;
        c=keywords.charAt(i);
      }
      int pos=i;
      while (!Character.isWhitespace(c)) {
        i++;
        if (i == keywords.length()) {
          break;
        }
        c=keywords.charAt(i);
      }
      String keyword=keywords.substring(pos,i);
      keywordsList.add(StringUtil.quote(keyword,StringPool.PERCENT));
    }
  }
  return keywordsList.toArray(new String[keywordsList.size()]);
}
