{
  if (locale == null) {
    locale=_locale;
  }
  String languageId=locale.getLanguage();
  String countryId=locale.getCountry();
  String variantId=locale.getVariant();
  boolean hasCountryId=countryId.length() != 0;
  boolean hasVariantId=variantId.length() != 0;
  if ((!hasCountryId) && (!hasVariantId)) {
    return languageId;
  }
  int length=3;
  if (hasCountryId && hasVariantId) {
    length=5;
  }
  StringBundler sb=new StringBundler(length);
  sb.append(languageId);
  if (hasCountryId) {
    sb.append(StringPool.UNDERLINE);
    sb.append(countryId);
  }
  if (hasVariantId) {
    sb.append(StringPool.UNDERLINE);
    sb.append(variantId);
  }
  return sb.toString();
}
