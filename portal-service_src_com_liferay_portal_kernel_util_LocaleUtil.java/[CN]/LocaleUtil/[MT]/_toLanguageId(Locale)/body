{
  if (locale == null) {
    locale=_locale;
  }
  String country=locale.getCountry();
  boolean hasCountry=false;
  if (country.length() != 0) {
    hasCountry=true;
  }
  String variant=locale.getVariant();
  boolean hasVariant=false;
  if (variant.length() != 0) {
    hasVariant=true;
  }
  if (!hasCountry && !hasVariant) {
    return locale.getLanguage();
  }
  int length=3;
  if (hasCountry && hasVariant) {
    length=5;
  }
  StringBundler sb=new StringBundler(length);
  sb.append(locale.getLanguage());
  if (hasCountry) {
    sb.append(StringPool.UNDERLINE);
    sb.append(country);
  }
  if (hasVariant) {
    sb.append(StringPool.UNDERLINE);
    sb.append(variant);
  }
  return sb.toString();
}
