{
  _tagDynamicIncludes=ServiceTrackerCollections.multiValueMap(TagDynamicInclude.class,null,new ServiceReferenceMapper<String,TagDynamicInclude>(){
    @Override public void map(    ServiceReference<TagDynamicInclude> serviceReference,    final Emitter<String> emitter){
      Registry registry=RegistryUtil.getRegistry();
      TagDynamicInclude tagDynamicInclude=registry.getService(serviceReference);
      try {
        tagDynamicInclude.register(new TagDynamicInclude.TagItemRegistry(){
          @Override public void register(          String tagClassName,          String tagKey,          String tagPoint){
            String key=_getKey(tagClassName,tagKey,tagPoint);
            emitter.emit(key);
          }
        }
);
      }
  finally {
        registry.ungetService(serviceReference);
      }
    }
  }
);
  _tagDynamicIncludes.open();
}
