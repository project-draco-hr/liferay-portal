{
  Folder repositoryFolder=getRepositoryFolder(companyId,repositoryId);
  Folder versioningFolder=repositoryFolder;
  String[] dirNames=StringUtil.split(fileName,CharPool.SLASH);
  for (  String dirName : dirNames) {
    Folder subFolder=getFolder(versioningFolder,dirName);
    if (create && (subFolder == null)) {
      subFolder=createFolder(versioningFolder,dirName);
    }
    versioningFolder=subFolder;
  }
  return versioningFolder;
}
