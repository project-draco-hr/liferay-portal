{
  StringMaker url=new StringMaker();
  url.append("/wsrp/resource_proxy/get");
  if (params != null) {
    String paramValue=GetterUtil.getString((String)params.get(Constants.URL));
    url.append(Constants.PARAMS_START);
    url.append("url");
    url.append(Constants.EQUALS);
    try {
      byte[] paramValueBytes=Encryptor.encryptRaw(key,paramValue);
      paramValue=Base64.encode(paramValueBytes);
      url.append(paramValue);
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
  String cookie=SimpleHTTPSender.getCurrentCookie();
  try {
    byte[] cookieBytes=Encryptor.encryptRaw(key,cookie);
    cookie=Base64.encode(cookieBytes);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  url.append(Constants.NEXT_PARAM);
  url.append("cookie");
  url.append(Constants.EQUALS);
  url.append(cookie);
  return url.toString();
}
