{
  try (PreparedStatement ps1=connection.prepareStatement("select distinct groupId, articleId, urlTitle from " + "JournalArticle");ResultSet rs=ps1.executeQuery()){
    try (PreparedStatement ps2=AutoBatchPreparedStatementUtil.autoBatch(connection.prepareStatement("update JournalArticle set urlTitle = ? where " + "urlTitle = ?"))){
      while (rs.next()) {
        long groupId=rs.getLong("groupId");
        String articleId=rs.getString("articleId");
        String urlTitle=GetterUtil.getString(rs.getString("urlTitle"));
        String normalizedURLTitle=FriendlyURLNormalizerUtil.normalize(urlTitle,_friendlyURLPattern);
        if (urlTitle.equals(normalizedURLTitle)) {
          return;
        }
        normalizedURLTitle=_journalArticleLocalService.getUniqueUrlTitle(groupId,articleId,normalizedURLTitle);
        ps2.setString(1,normalizedURLTitle);
        ps2.setString(2,urlTitle);
        ps2.addBatch();
      }
      ps2.executeBatch();
    }
   }
 }
