{
  String description=StringPool.BLANK;
  String changeLog=StringPool.BLANK;
  byte[] bytes=null;
  if (Validator.isNotNull(sourceFileName)) {
    String newContent=_CONTENT + "\n" + System.currentTimeMillis();
    bytes=newContent.getBytes();
  }
  serviceContext=(ServiceContext)serviceContext.clone();
  serviceContext.setAddGroupPermissions(true);
  serviceContext.setAddGuestPermissions(true);
  serviceContext.setScopeGroupId(groupId);
  if (workflowEnabled && !approved) {
    serviceContext.setWorkflowAction(WorkflowConstants.ACTION_SAVE_DRAFT);
  }
 else {
    serviceContext.setWorkflowAction(WorkflowConstants.ACTION_PUBLISH);
  }
  String name=PrincipalThreadLocal.getName();
  FileEntry fileEntry=null;
  try {
    PrincipalThreadLocal.setName(serviceContext.getUserId());
    fileEntry=DLAppServiceUtil.updateFileEntry(fileEntryId,sourceFileName,mimeType,title,description,changeLog,majorVersion,bytes,serviceContext);
    if (workflowEnabled && approved) {
      updateStatus(serviceContext.getUserId(),fileEntry,serviceContext);
    }
  }
  finally {
    PrincipalThreadLocal.setName(name);
  }
  return fileEntry;
}
