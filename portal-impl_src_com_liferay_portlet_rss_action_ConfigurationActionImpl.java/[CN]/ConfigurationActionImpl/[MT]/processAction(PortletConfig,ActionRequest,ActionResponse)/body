{
  String cmd=ParamUtil.getString(req,Constants.CMD);
  String portletResource=ParamUtil.getString(req,"portletResource");
  PortletPreferences prefs=PortletPreferencesFactoryUtil.getPortletSetup(req,portletResource);
  if (cmd.equals("remove-footer-article")) {
    removeFooterArticle(req,prefs);
  }
 else   if (cmd.equals("remove-header-article")) {
    removeHeaderArticle(req,prefs);
  }
 else   if (cmd.equals("set-footer-article")) {
    setFooterArticle(req,prefs);
  }
 else   if (cmd.equals("set-header-article")) {
    setHeaderArticle(req,prefs);
  }
 else   if (cmd.equals(Constants.UPDATE)) {
    updateConfiguration(req,prefs);
  }
  if (SessionErrors.isEmpty(req)) {
    try {
      prefs.store();
    }
 catch (    ValidatorException ve) {
      SessionErrors.add(req,ValidatorException.class.getName(),ve);
      return;
    }
    SessionMessages.add(req,portletConfig.getPortletName() + ".doConfigure");
  }
}
