{
  Map<Locale,String> titleMap=new HashMap<Locale,String>();
  titleMap.put(LocaleUtil.getDefault(),RandomTestUtil.randomString());
  Map<Locale,String> descriptionMap=new HashMap<Locale,String>();
  descriptionMap.put(LocaleUtil.getDefault(),RandomTestUtil.randomString());
  String content=DDMStructureTestUtil.getSampleStructuredContent();
  String definition=DDMStructureTestUtil.getSampleStructureDefinition();
  DDMStructure ddmStructure=DDMStructureTestUtil.addStructure(groupId,JournalArticle.class.getName(),definition);
  DDMTemplate ddmTemplate=DDMTemplateTestUtil.addTemplate(groupId,ddmStructure.getStructureId());
  Calendar displayDateCalendar=getCalendar(displayDate,when);
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(groupId);
  if (approved) {
    serviceContext.setWorkflowAction(WorkflowConstants.ACTION_PUBLISH);
  }
 else {
    serviceContext.setWorkflowAction(WorkflowConstants.ACTION_SAVE_DRAFT);
  }
  return JournalArticleLocalServiceUtil.addArticle(TestPropsValues.getUserId(),groupId,JournalFolderConstants.DEFAULT_PARENT_FOLDER_ID,JournalArticleConstants.CLASSNAME_ID_DEFAULT,0,StringPool.BLANK,true,JournalArticleConstants.VERSION_DEFAULT,titleMap,descriptionMap,content,ddmStructure.getStructureKey(),ddmTemplate.getTemplateKey(),null,displayDateCalendar.get(Calendar.MONTH),displayDateCalendar.get(Calendar.DAY_OF_MONTH),displayDateCalendar.get(Calendar.YEAR),displayDateCalendar.get(Calendar.HOUR_OF_DAY),displayDateCalendar.get(Calendar.MINUTE),0,0,0,0,0,true,0,0,0,0,0,true,true,false,null,null,null,null,serviceContext);
}
