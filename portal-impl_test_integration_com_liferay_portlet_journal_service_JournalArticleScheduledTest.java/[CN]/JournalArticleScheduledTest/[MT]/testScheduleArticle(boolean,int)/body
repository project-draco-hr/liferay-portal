{
  int initialSearchArticlesCount=JournalTestUtil.getSearchArticlesCount(_group.getCompanyId(),_group.getGroupId());
  Date now=new Date();
  JournalArticle article=addArticle(_group.getGroupId(),now,when,approved);
  JournalArticleLocalServiceUtil.checkArticles();
  article=JournalArticleLocalServiceUtil.getArticle(article.getId());
  AssetEntry assetEntry=AssetEntryLocalServiceUtil.getEntry(JournalArticle.class.getName(),article.getResourcePrimKey());
  if (when == _WHEN_FUTURE) {
    Assert.assertFalse(article.isApproved());
    Assert.assertFalse(assetEntry.isVisible());
    if (approved) {
      Assert.assertTrue(article.isScheduled());
    }
 else {
      Assert.assertTrue(article.isDraft());
    }
  }
 else {
    Assert.assertFalse(article.isScheduled());
    Assert.assertEquals(approved,article.isApproved());
    Assert.assertEquals(approved,assetEntry.isVisible());
    if (approved) {
      Assert.assertEquals(initialSearchArticlesCount + 1,JournalTestUtil.getSearchArticlesCount(_group.getCompanyId(),_group.getGroupId()));
    }
 else {
      Assert.assertEquals(initialSearchArticlesCount,JournalTestUtil.getSearchArticlesCount(_group.getCompanyId(),_group.getGroupId()));
    }
  }
}
