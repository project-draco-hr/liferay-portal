{
  String cmd=ParamUtil.getString(req,Constants.CMD);
  Layout layout=(Layout)req.getAttribute(WebKeys.LAYOUT);
  String structureId=ParamUtil.getString(req,"structureId");
  boolean autoStructureId=ParamUtil.getBoolean(req,"autoStructureId");
  String name=ParamUtil.getString(req,"name");
  String description=ParamUtil.getString(req,"description");
  String xsd=ParamUtil.getString(req,"xsd");
  boolean addCommunityPermissions=ParamUtil.getBoolean(req,"addCommunityPermissions");
  boolean addGuestPermissions=ParamUtil.getBoolean(req,"addGuestPermissions");
  JournalStructure structure=null;
  if (cmd.equals(Constants.ADD)) {
    structure=JournalStructureServiceUtil.addStructure(structureId,autoStructureId,layout.getPlid(),name,description,xsd,addCommunityPermissions,addGuestPermissions);
  }
 else {
    structure=JournalStructureServiceUtil.updateStructure(structureId,name,description,xsd);
  }
  JournalUtil.addRecentStructure(req,structure);
}
