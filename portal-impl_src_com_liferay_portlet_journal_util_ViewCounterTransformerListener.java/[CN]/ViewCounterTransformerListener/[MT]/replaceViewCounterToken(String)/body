{
  Map tokens=getTokens();
  String articleResourcePKey=(String)tokens.get("article_resource_pkey");
  String counterToken=StringPool.AT + "view_counter" + StringPool.AT;
  StringMaker sm=new StringMaker();
  sm.append("<script type=\"text/javascript\" ");
  sm.append("src=\"/html/js/liferay/service_packed.js\"></script>");
  sm.append("<script type=\"text/javascript\">");
  sm.append("Liferay.Service.Tags.TagsAsset.incrementViewCounter");
  sm.append("({className:'");
  sm.append("com.liferay.portlet.journal.model.JournalArticle', ");
  sm.append("classPK:");
  sm.append(articleResourcePKey);
  sm.append("});");
  sm.append("</script>");
  s=StringUtil.replace(s,counterToken,sm.toString());
  return s;
}
