{
  Layout layout=(Layout)req.getAttribute(WebKeys.LAYOUT);
  String resourceId=ParamUtil.getString(req,"resourceId");
  String groupId=ParamUtil.getString(req,"groupId");
  String[] actionIds=StringUtil.split(ParamUtil.getString(req,"groupIdActionIds"));
  PermissionServiceUtil.setGroupPermissions(groupId,actionIds,resourceId);
  if (!Layout.isPrivateLayout(layout.getOwnerId())) {
    Resource resource=ResourceLocalServiceUtil.getResource(resourceId);
    if (resource.getPrimKey().startsWith(layout.getPlid() + Portlet.LAYOUT_SEPARATOR)) {
      LayoutCacheUtil.clearCache(layout.getCompanyId());
    }
  }
}
