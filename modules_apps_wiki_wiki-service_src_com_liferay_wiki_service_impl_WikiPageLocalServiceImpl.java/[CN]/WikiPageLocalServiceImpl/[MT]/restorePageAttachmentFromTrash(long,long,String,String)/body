{
  WikiPage page=getPage(nodeId,title);
  FileEntry fileEntry=PortletFileRepositoryUtil.getPortletFileEntry(page.getGroupId(),page.getAttachmentsFolderId(),fileName);
  JSONObject extraDataJSONObject=JSONFactoryUtil.createJSONObject();
  extraDataJSONObject.put("fileEntryId",fileEntry.getFileEntryId());
  extraDataJSONObject.put("fileEntryTitle",TrashUtil.getOriginalTitle(fileEntry.getTitle()));
  extraDataJSONObject.put("title",page.getTitle());
  extraDataJSONObject.put("version",page.getVersion());
  PortletFileRepositoryUtil.restorePortletFileEntryFromTrash(userId,fileEntry.getFileEntryId());
  SocialActivityHandlerUtil.addActivity(userId,page.getGroupId(),page,SocialActivityConstants.TYPE_RESTORE_ATTACHMENT_FROM_TRASH,extraDataJSONObject.toString(),0);
}
