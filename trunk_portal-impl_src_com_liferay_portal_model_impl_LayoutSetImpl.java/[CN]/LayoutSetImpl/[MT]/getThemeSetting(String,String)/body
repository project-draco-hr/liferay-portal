{
  UnicodeProperties settingsProperties=getSettingsProperties();
  String value=settingsProperties.getProperty(ThemeSettingImpl.namespaceProperty(device,key));
  if (value != null) {
    return value;
  }
  Theme theme=null;
  boolean controlPanel=false;
  try {
    Group group=getGroup();
    controlPanel=group.isControlPanel();
  }
 catch (  Exception e) {
  }
  if (controlPanel) {
    String themeId=PrefsPropsUtil.getString(getCompanyId(),PropsKeys.CONTROL_PANEL_LAYOUT_REGULAR_THEME_ID);
    theme=ThemeLocalServiceUtil.getTheme(getCompanyId(),themeId,!device.equals("regular"));
  }
 else   if (device.equals("regular")) {
    theme=getTheme();
  }
 else {
    theme=getWapTheme();
  }
  value=theme.getSetting(key);
  return value;
}
