{
  String portalPropertyKey=properties.getProperty("portalPropertyKey");
  if (Validator.isNull(portalPropertyKey)) {
    throw new RuntimeException("portalPropertyKey is null");
  }
  String[] values=PropsUtil.getArray(portalPropertyKey);
  if (_log.isInfoEnabled()) {
    _log.info("portalPropertyKey " + portalPropertyKey + " has value "+ Arrays.toString(values));
  }
  Properties portalProperties=new Properties();
  for (  String value : values) {
    String[] valueParts=StringUtil.split(value,CharPool.EQUAL);
    if (valueParts.length != 2) {
      if (_log.isWarnEnabled()) {
        _log.warn("Ignore malformed value " + value);
      }
    }
    portalProperties.put(valueParts[0],_htmlUtil.unescape(valueParts[1]));
  }
  if (_log.isDebugEnabled()) {
    _log.debug(PropertiesUtil.list(portalProperties));
  }
  return _cacheManagerPeerProviderFactory.createCachePeerProvider(cacheManager,portalProperties);
}
