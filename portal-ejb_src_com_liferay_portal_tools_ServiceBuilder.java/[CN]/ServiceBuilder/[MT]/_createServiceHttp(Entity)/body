{
  JavaClass javaClass=_getJavaClass(_outputPath + "/service/impl/" + entity.getName()+ "ServiceImpl.java");
  JavaMethod[] methods=javaClass.getMethods();
  StringBuffer sb=new StringBuffer();
  sb.append("package " + _packagePath + ".service.http;");
  if (_hasHttpMethods(javaClass)) {
    sb.append("import " + _packagePath + ".service."+ entity.getName()+ "ServiceUtil;");
  }
  sb.append("import com.liferay.portal.kernel.log.Log;");
  sb.append("import com.liferay.portal.kernel.log.LogFactoryUtil;");
  sb.append("import com.liferay.portal.kernel.util.BooleanWrapper;");
  sb.append("import com.liferay.portal.kernel.util.DoubleWrapper;");
  sb.append("import com.liferay.portal.kernel.util.FloatWrapper;");
  sb.append("import com.liferay.portal.kernel.util.IntegerWrapper;");
  sb.append("import com.liferay.portal.kernel.util.LongWrapper;");
  sb.append("import com.liferay.portal.kernel.util.MethodWrapper;");
  sb.append("import com.liferay.portal.kernel.util.NullWrapper;");
  sb.append("import com.liferay.portal.kernel.util.ShortWrapper;");
  sb.append("import com.liferay.portal.security.auth.HttpPrincipal;");
  sb.append("import com.liferay.portal.service.http.TunnelUtil;");
  sb.append("public class " + entity.getName() + "ServiceHttp {");
  for (int i=0; i < methods.length; i++) {
    JavaMethod javaMethod=methods[i];
    String methodName=javaMethod.getName();
    if (!javaMethod.isConstructor() && javaMethod.isPublic() && _isCustomMethod(javaMethod)) {
      Type returnType=javaMethod.getReturns();
      String returnTypeName=returnType.getValue() + _getDimensions(returnType);
      sb.append("public static " + returnTypeName + " "+ methodName+ "(HttpPrincipal httpPrincipal");
      JavaParameter[] parameters=javaMethod.getParameters();
      for (int j=0; j < parameters.length; j++) {
        JavaParameter javaParameter=parameters[j];
        if (j == 0) {
          sb.append(", ");
        }
        sb.append(javaParameter.getType().getValue() + _getDimensions(javaParameter.getType()) + " "+ javaParameter.getName());
        if ((j + 1) != parameters.length) {
          sb.append(", ");
        }
      }
      sb.append(")");
      Type[] thrownExceptions=javaMethod.getExceptions();
      Set newExceptions=new LinkedHashSet();
      for (int j=0; j < thrownExceptions.length; j++) {
        Type thrownException=thrownExceptions[j];
        newExceptions.add(thrownException.getValue());
      }
      newExceptions.add("com.liferay.portal.SystemException");
      if (newExceptions.size() > 0) {
        sb.append(" throws ");
        Iterator itr=newExceptions.iterator();
        while (itr.hasNext()) {
          sb.append(itr.next());
          if (itr.hasNext()) {
            sb.append(", ");
          }
        }
      }
      sb.append("{");
      sb.append("try {");
      for (int j=0; j < parameters.length; j++) {
        JavaParameter javaParameter=parameters[j];
        String parameterTypeName=javaParameter.getType().getValue() + _getDimensions(javaParameter.getType());
        sb.append("Object paramObj" + j + " = ");
        if (parameterTypeName.equals("boolean")) {
          sb.append("new BooleanWrapper(" + javaParameter.getName() + ");");
        }
 else         if (parameterTypeName.equals("double")) {
          sb.append("new DoubleWrapper(" + javaParameter.getName() + ");");
        }
 else         if (parameterTypeName.equals("float")) {
          sb.append("new FloatWrapper(" + javaParameter.getName() + ");");
        }
 else         if (parameterTypeName.equals("int")) {
          sb.append("new IntegerWrapper(" + javaParameter.getName() + ");");
        }
 else         if (parameterTypeName.equals("long")) {
          sb.append("new LongWrapper(" + javaParameter.getName() + ");");
        }
 else         if (parameterTypeName.equals("short")) {
          sb.append("new ShortWrapper(" + javaParameter.getName() + ");");
        }
 else {
          sb.append(javaParameter.getName() + ";");
          sb.append("if (" + javaParameter.getName() + " == null) {");
          sb.append("paramObj" + j + " = new NullWrapper(\""+ _getClassName(javaParameter.getType())+ "\");");
          sb.append("}");
        }
      }
      sb.append("MethodWrapper methodWrapper = new MethodWrapper(");
      sb.append(entity.getName() + "ServiceUtil.class.getName(),");
      sb.append("\"" + methodName + "\",");
      if (parameters.length == 0) {
        sb.append("new Object[0]);");
      }
 else {
        sb.append("new Object[] {");
        for (int j=0; j < parameters.length; j++) {
          sb.append("paramObj" + j);
          if ((j + 1) != parameters.length) {
            sb.append(", ");
          }
        }
        sb.append("});");
      }
      if (!returnTypeName.equals("void")) {
        sb.append("Object returnObj = null;");
      }
      sb.append("try {");
      if (!returnTypeName.equals("void")) {
        sb.append("returnObj =");
      }
      sb.append("TunnelUtil.invoke(httpPrincipal, methodWrapper);");
      sb.append("}");
      sb.append("catch (Exception e) {");
      Iterator itr=newExceptions.iterator();
      while (itr.hasNext()) {
        String exceptionType=(String)itr.next();
        sb.append("if (e instanceof " + exceptionType + ") {");
        sb.append("throw (" + exceptionType + ")e;");
        sb.append("}");
      }
      sb.append("throw new com.liferay.portal.SystemException(e);");
      sb.append("}");
      if (!returnTypeName.equals("void")) {
        if (returnTypeName.equals("boolean")) {
          sb.append("return ((Boolean)returnObj).booleanValue();");
        }
 else         if (returnTypeName.equals("double")) {
          sb.append("return ((Double)returnObj).doubleValue();");
        }
 else         if (returnTypeName.equals("float")) {
          sb.append("return ((Float)returnObj).floatValue();");
        }
 else         if (returnTypeName.equals("int")) {
          sb.append("return ((Integer)returnObj).intValue();");
        }
 else         if (returnTypeName.equals("long")) {
          sb.append("return ((Long)returnObj).longValue();");
        }
 else         if (returnTypeName.equals("short")) {
          sb.append("return ((Short)returnObj).shortValue();");
        }
 else {
          sb.append("return (" + returnTypeName + ")returnObj;");
        }
      }
      sb.append("}");
      sb.append("catch (com.liferay.portal.SystemException se) {");
      sb.append("_log.error(se, se);");
      sb.append("throw se;");
      sb.append("}");
      sb.append("}");
    }
  }
  if (sb.indexOf("_log.") != -1) {
    sb.append("private static Log _log = LogFactoryUtil.getLog(" + entity.getName() + "ServiceHttp.class);");
  }
  sb.append("}");
  File ejbFile=new File(_outputPath + "/service/http/" + entity.getName()+ "ServiceHttp.java");
  writeFile(ejbFile,sb.toString());
}
