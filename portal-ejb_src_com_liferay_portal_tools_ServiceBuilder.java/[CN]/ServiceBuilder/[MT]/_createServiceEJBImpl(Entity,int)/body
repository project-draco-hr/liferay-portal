{
  JavaClass javaClass=_getJavaClass(_serviceOutputPath + "/service/" + entity.getName()+ (sessionType != _REMOTE ? "Local" : "")+ "Service.java");
  JavaMethod[] methods=javaClass.getMethods();
  StringBuffer sb=new StringBuffer();
  sb.append("package " + _packagePath + ".service.ejb;");
  sb.append("import " + _packagePath + ".service."+ entity.getName()+ _getSessionTypeName(sessionType)+ "Service;");
  if (methods.length > 0) {
    sb.append("import " + _packagePath + ".service."+ entity.getName()+ _getSessionTypeName(sessionType)+ "ServiceFactory;");
  }
  sb.append("import javax.ejb.CreateException;");
  sb.append("import javax.ejb.SessionContext;");
  sb.append("import javax.ejb.SessionBean;");
  if (sessionType == _REMOTE) {
    sb.append("import com.liferay.portal.service.impl.PrincipalSessionBean;");
  }
  sb.append("public class " + entity.getName() + _getSessionTypeName(sessionType)+ "ServiceEJBImpl implements "+ entity.getName()+ _getSessionTypeName(sessionType)+ "Service, SessionBean {");
  for (int i=0; i < methods.length; i++) {
    JavaMethod javaMethod=methods[i];
    String methodName=javaMethod.getName();
    if (!javaMethod.isConstructor() && javaMethod.isPublic() && _isCustomMethod(javaMethod)) {
      sb.append("public " + javaMethod.getReturns().getValue() + _getDimensions(javaMethod.getReturns())+ " "+ methodName+ "(");
      JavaParameter[] parameters=javaMethod.getParameters();
      for (int j=0; j < parameters.length; j++) {
        JavaParameter javaParameter=parameters[j];
        sb.append(javaParameter.getType().getValue() + _getDimensions(javaParameter.getType()) + " "+ javaParameter.getName());
        if ((j + 1) != parameters.length) {
          sb.append(", ");
        }
      }
      sb.append(")");
      Type[] thrownExceptions=javaMethod.getExceptions();
      Set newExceptions=new LinkedHashSet();
      for (int j=0; j < thrownExceptions.length; j++) {
        Type thrownException=thrownExceptions[j];
        newExceptions.add(thrownException.getValue());
      }
      if (newExceptions.size() > 0) {
        sb.append(" throws ");
        Iterator itr=newExceptions.iterator();
        while (itr.hasNext()) {
          sb.append(itr.next());
          if (itr.hasNext()) {
            sb.append(", ");
          }
        }
      }
      sb.append("{");
      if (sessionType == _REMOTE) {
        sb.append("PrincipalSessionBean.setThreadValues(_sc);");
      }
      if (!javaMethod.getReturns().getValue().equals("void")) {
        sb.append("return ");
      }
      sb.append(entity.getName() + _getSessionTypeName(sessionType) + "ServiceFactory.getTxImpl()."+ methodName+ "(");
      for (int j=0; j < parameters.length; j++) {
        JavaParameter javaParameter=parameters[j];
        sb.append(javaParameter.getName());
        if ((j + 1) != parameters.length) {
          sb.append(", ");
        }
      }
      sb.append(");");
      sb.append("}");
    }
  }
  sb.append("public void ejbCreate() throws CreateException {");
  sb.append("}");
  sb.append("public void ejbRemove() {");
  sb.append("}");
  sb.append("public void ejbActivate() {");
  sb.append("}");
  sb.append("public void ejbPassivate() {");
  sb.append("}");
  sb.append("public SessionContext getSessionContext() {");
  sb.append("return _sc;");
  sb.append("}");
  sb.append("public void setSessionContext(SessionContext sc) {");
  sb.append("_sc = sc;");
  sb.append("}");
  sb.append("private SessionContext _sc;");
  sb.append("}");
  File ejbFile=new File(_outputPath + "/service/ejb/" + entity.getName()+ _getSessionTypeName(sessionType)+ "ServiceEJBImpl.java");
  writeFile(ejbFile,sb.toString());
}
