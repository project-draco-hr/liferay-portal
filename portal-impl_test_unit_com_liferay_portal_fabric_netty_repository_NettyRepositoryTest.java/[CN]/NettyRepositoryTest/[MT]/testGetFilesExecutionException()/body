{
  Map<Path,Path> pathMap=new HashMap<>();
  Path remoteFilePath1=Paths.get("remoteFile1");
  pathMap.put(remoteFilePath1,Paths.get("requestFile1"));
  pathMap.put(Paths.get("remoteFile2"),Paths.get("requestFile2"));
  NoticeableFuture<Map<Path,Path>> noticeableFuture=_nettyRepository.getFiles(_embeddedChannel,pathMap,true);
  Exception exception=new Exception();
  Assert.assertTrue(_asyncBroker.takeWithException(remoteFilePath1,exception));
  try {
    noticeableFuture.get();
    Assert.fail();
  }
 catch (  ExecutionException ee) {
    Assert.assertSame(exception,ee.getCause());
  }
}
