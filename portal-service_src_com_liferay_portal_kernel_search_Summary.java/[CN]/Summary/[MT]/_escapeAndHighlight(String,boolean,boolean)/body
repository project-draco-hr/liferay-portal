{
  if (Validator.isNull(s) || ArrayUtil.isEmpty(_queryTerms)) {
    return s;
  }
  String result=s;
  if (highlight) {
    result=SearchUtil.highlight(result,_queryTerms,ESCAPE_SAFE_HIGHLIGHT_1,ESCAPE_SAFE_HIGHLIGHT_2);
  }
  if (escape) {
    result=HtmlUtil.escape(result);
  }
  if (highlight) {
    result=StringUtil.replace(result,new String[]{ESCAPE_SAFE_HIGHLIGHT_1,ESCAPE_SAFE_HIGHLIGHT_2},new String[]{SearchUtil.DEFAULT_HIGHLIGHT_1,SearchUtil.DEFAULT_HIGHLIGHT_2});
  }
  return result;
}
