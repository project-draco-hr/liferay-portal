{
  if (_log.isDebugEnabled()) {
    _log.debug("Forward URI " + uri);
  }
  if (uri.equals(Constants.COMMON_NULL)) {
    return;
  }
  if (!res.isCommitted()) {
    String path=Constants.TEXT_HTML_DIR + uri;
    if (BrowserSniffer.is_wml(req)) {
      path=Constants.TEXT_WML_DIR + uri;
    }
    if (_log.isDebugEnabled()) {
      _log.debug("Forward path " + path);
    }
    ServletContext portalCtx=_getPortalCtx(ctx,req);
    RequestDispatcher rd=portalCtx.getRequestDispatcher(path);
    try {
      rd.forward(req,res);
    }
 catch (    IOException ioe1) {
      _log.warn(StackTraceUtil.getStackTrace(ioe1));
    }
catch (    ServletException se1) {
      req.setAttribute(PageContext.EXCEPTION,se1.getRootCause());
      String errorPath=Constants.TEXT_HTML_DIR + Constants.COMMON_ERROR;
      if (BrowserSniffer.is_wml(req)) {
        path=Constants.TEXT_WML_DIR + Constants.COMMON_ERROR;
      }
      rd=portalCtx.getRequestDispatcher(errorPath);
      try {
        rd.forward(req,res);
      }
 catch (      IOException ioe2) {
        _log.warn(StackTraceUtil.getStackTrace(ioe2));
      }
catch (      ServletException se2) {
        throw se2;
      }
    }
  }
 else {
    _log.warn(uri + " is already committed");
  }
}
