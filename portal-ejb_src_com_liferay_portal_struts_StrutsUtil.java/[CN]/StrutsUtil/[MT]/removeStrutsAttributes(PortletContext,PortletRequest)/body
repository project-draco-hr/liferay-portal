{
  Map strutsAttributes=new HashMap();
  Enumeration enu=req.getAttributeNames();
  while (enu.hasMoreElements()) {
    String attributeName=(String)enu.nextElement();
    if (attributeName.startsWith(STRUTS_PACKAGE)) {
      strutsAttributes.put(attributeName,req.getAttribute(attributeName));
    }
  }
  Iterator itr=strutsAttributes.keySet().iterator();
  while (itr.hasNext()) {
    String attributeName=(String)itr.next();
    req.setAttribute(attributeName,null);
  }
  Object moduleConfig=portletContext.getAttribute(Globals.MODULE_KEY);
  req.setAttribute(Globals.MODULE_KEY,moduleConfig);
  return strutsAttributes;
}
