{
  ExportActionableDynamicQuery exportActionableDynamicQuery=DDMStructureLocalServiceUtil.getExportActionableDynamicQuery(portletDataContext);
  final ActionableDynamicQuery.AddCriteriaMethod addCriteriaMethod=exportActionableDynamicQuery.getAddCriteriaMethod();
  exportActionableDynamicQuery.setAddCriteriaMethod(new ActionableDynamicQuery.AddCriteriaMethod(){
    @Override public void addCriteria(    DynamicQuery dynamicQuery){
      addCriteriaMethod.addCriteria(dynamicQuery);
      Property classNameIdProperty=PropertyFactoryUtil.forName("classNameId");
      long classNameId=PortalUtil.getClassNameId(DDLRecordSet.class);
      dynamicQuery.add(classNameIdProperty.eq(classNameId));
    }
  }
);
  exportActionableDynamicQuery.setPerformActionMethod(new ActionableDynamicQuery.PerformActionMethod<DDMStructure>(){
    @Override public void performAction(    DDMStructure ddmStructure) throws PortalException {
      StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,ddmStructure);
      ddmTemplates.addAll(ddmStructure.getTemplates());
    }
  }
);
  exportActionableDynamicQuery.setStagedModelType(new StagedModelType(DDMStructure.class.getName(),DDLRecordSet.class.getName()));
  return exportActionableDynamicQuery;
}
