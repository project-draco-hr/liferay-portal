{
  List<Permission> rolePermissions=PermissionLocalServiceUtil.getRolePermissions(roleId);
  Group userPersonalSite=GroupLocalServiceUtil.getGroup(companyId,GroupConstants.USER_PERSONAL_SITE);
  String groupIdString=String.valueOf(userPersonalSite.getGroupId());
  for (  Permission permission : rolePermissions) {
    if (permission.getActionId() != ActionKeys.ADD_TO_PAGE) {
      continue;
    }
    PermissionLocalServiceUtil.unsetRolePermission(roleId,companyId,permission.getName(),permission.getScope(),permission.getPrimKey(),ActionKeys.ADD_TO_PAGE);
    if (!limitScope || groupIdString.equals(permission.getPrimKey())) {
      continue;
    }
    PermissionLocalServiceUtil.setRolePermission(roleId,companyId,permission.getName(),ResourceConstants.SCOPE_GROUP,groupIdString,ActionKeys.ADD_TO_PAGE);
  }
}
