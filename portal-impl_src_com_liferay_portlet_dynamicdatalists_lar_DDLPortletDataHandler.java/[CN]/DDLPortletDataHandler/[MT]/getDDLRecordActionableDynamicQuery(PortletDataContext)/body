{
  return new DDLRecordExportActionableDynamicQuery(portletDataContext){
    @Override protected void addCriteria(    DynamicQuery dynamicQuery){
      super.addCriteria(dynamicQuery);
      DynamicQuery ddlRecordVersionDynamicQuery=DynamicQueryFactoryUtil.forClass(DDLRecordVersion.class,"recordVersion",PortalClassLoaderUtil.getClassLoader());
      ddlRecordVersionDynamicQuery.setProjection(ProjectionFactoryUtil.property("recordId"));
      Property workflowStatusProperty=PropertyFactoryUtil.forName("status");
      StagedModelDataHandler<?> stagedModelDataHandler=StagedModelDataHandlerRegistryUtil.getStagedModelDataHandler(DDLRecord.class.getName());
      ddlRecordVersionDynamicQuery.add(workflowStatusProperty.in(stagedModelDataHandler.getExportableStatuses()));
      ddlRecordVersionDynamicQuery.add(RestrictionsFactoryUtil.eqProperty("recordVersion.version","version"));
      ddlRecordVersionDynamicQuery.add(RestrictionsFactoryUtil.eqProperty("recordVersion.recordId","recordId"));
      Property recordIdProperty=PropertyFactoryUtil.forName("recordId");
      dynamicQuery.add(recordIdProperty.in(ddlRecordVersionDynamicQuery));
    }
  }
;
}
