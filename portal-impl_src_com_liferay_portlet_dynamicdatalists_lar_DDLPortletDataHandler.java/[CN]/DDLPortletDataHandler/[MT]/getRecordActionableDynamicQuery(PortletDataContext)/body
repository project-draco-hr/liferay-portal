{
  return new DDLRecordExportActionableDynamicQuery(portletDataContext){
    @Override protected void addCriteria(    DynamicQuery dynamicQuery){
      super.addCriteria(dynamicQuery);
      Property recordIdProperty=PropertyFactoryUtil.forName("recordId");
      DynamicQuery recordVersionDynamicQuery=DynamicQueryFactoryUtil.forClass(DDLRecordVersion.class,"recordVersion",PortalClassLoaderUtil.getClassLoader());
      recordVersionDynamicQuery.setProjection(ProjectionFactoryUtil.property("recordId"));
      Property statusProperty=PropertyFactoryUtil.forName("status");
      StagedModelDataHandler<?> stagedModelDataHandler=StagedModelDataHandlerRegistryUtil.getStagedModelDataHandler(DDLRecord.class.getName());
      recordVersionDynamicQuery.add(statusProperty.in(stagedModelDataHandler.getExportableStatuses()));
      recordVersionDynamicQuery.add(RestrictionsFactoryUtil.eqProperty("recordVersion.version","version"));
      recordVersionDynamicQuery.add(RestrictionsFactoryUtil.eqProperty("recordVersion.recordId","recordId"));
      dynamicQuery.add(recordIdProperty.in(recordVersionDynamicQuery));
    }
  }
;
}
