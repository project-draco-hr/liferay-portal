{
  List<MenuItemGroup> menuItems=new ArrayList<>();
  if (getAddMenuItemsCount() == 1) {
    MenuItemGroup menuItem=new MenuItemGroup(AddMenuKeys.getAddMenuTypeLabel(AddMenuKeys.AddMenuType.DEFAULT),getAddMenuItems());
    menuItems.add(menuItem);
    return menuItems;
  }
  List<AddMenuItem> primaryAddMenuItems=new ArrayList<>();
  List<AddMenuItem> favoriteAddMenuItems=new ArrayList<>();
  List<AddMenuItem> recentAddMenuItems=new ArrayList<>();
  List<AddMenuItem> defaultAddMenuItems=new ArrayList<>();
  for (  AddMenuItem addMenuItem : getAddMenuItems()) {
    if (Objects.equals(AddMenuKeys.AddMenuType.DEFAULT,addMenuItem.getType())) {
      defaultAddMenuItems.add(addMenuItem);
    }
 else     if (Objects.equals(AddMenuKeys.AddMenuType.FAVORITE,addMenuItem.getType())) {
      favoriteAddMenuItems.add(addMenuItem);
    }
 else     if (Objects.equals(AddMenuKeys.AddMenuType.PRIMARY,addMenuItem.getType())) {
      primaryAddMenuItems.add(addMenuItem);
    }
 else     if (Objects.equals(AddMenuKeys.AddMenuType.RECENT,addMenuItem.getType())) {
      recentAddMenuItems.add(addMenuItem);
    }
  }
  boolean showDivider=false;
  if (!primaryAddMenuItems.isEmpty() && (!defaultAddMenuItems.isEmpty() || !favoriteAddMenuItems.isEmpty() || !recentAddMenuItems.isEmpty())) {
    showDivider=true;
  }
  menuItems.add(new MenuItemGroup(primaryAddMenuItems,showDivider));
  showDivider=false;
  if ((primaryAddMenuItems.size() < _maxItems) && !favoriteAddMenuItems.isEmpty() && (!recentAddMenuItems.isEmpty() || !defaultAddMenuItems.isEmpty())) {
    showDivider=true;
  }
  MenuItemGroup favoriteMenuItem=new MenuItemGroup(AddMenuKeys.getAddMenuTypeLabel(AddMenuKeys.AddMenuType.FAVORITE),favoriteAddMenuItems,showDivider);
  menuItems.add(favoriteMenuItem);
  menuItems.add(new MenuItemGroup(recentAddMenuItems));
  menuItems.add(new MenuItemGroup(defaultAddMenuItems));
  return menuItems;
}
