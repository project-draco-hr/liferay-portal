{
  String path=req.getParameter("struts_action");
  if (Validator.isNotNull(path)) {
    PermissionCheckerImpl permissionChecker=(PermissionCheckerImpl)PermissionThreadLocal.getPermissionChecker();
    try {
      permissionChecker.setValues(req);
      PortletRequestProcessor processor=_getPortletRequestProcessor(req);
      processor.process(req,res,path);
    }
 catch (    ServletException se) {
      throw new PortletException(se);
    }
 finally {
      permissionChecker.resetValues();
    }
  }
  if (copyRequestParameters) {
    PortalUtil.copyRequestParameters(req,res);
  }
}
