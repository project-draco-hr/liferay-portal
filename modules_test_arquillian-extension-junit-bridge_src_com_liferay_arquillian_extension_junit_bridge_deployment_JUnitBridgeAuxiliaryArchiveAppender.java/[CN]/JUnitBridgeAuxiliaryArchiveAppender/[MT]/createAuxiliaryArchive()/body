{
  JavaArchive javaArchive=ShrinkWrap.create(JavaArchive.class,"arquillian-junit-bridge.jar");
  javaArchive.add(EmptyAsset.INSTANCE,"/arquillian.remote.marker");
  javaArchive.addAsServiceProviderAndClasses(RemoteLoadableExtension.class,LiferayArquillianJUnitBridgeExtension.class);
  javaArchive.addClass(JUnitBridgeObserver.class);
  javaArchive.addClass(Arquillian.class);
  javaArchive.addPackage("org.jboss.arquillian.junit.event");
  javaArchive.addPackage(org.jboss.arquillian.junit.Arquillian.class.getPackage().getName());
  javaArchive.addClass(TestRunner.class);
  javaArchive.addClass(JUnitTestRunner.class);
  javaArchive.addAsServiceProvider(TestRunner.class,JUnitTestRunner.class);
  final OSGiManifestBuilder builder=OSGiManifestBuilder.newInstance();
  builder.addImportPackages("org.junit.internal","org.junit.internal.runners","org.junit.internal.runners.statements","org.junit.internal.runners.model","org.junit.runners","org.junit.runners.model","org.junit.runner.notification");
  builder.addBundleManifestVersion(1);
  Manifest manifest=builder.getManifest();
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  try {
    manifest.write(baos);
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  ByteArrayAsset byteArrayAsset=new ByteArrayAsset(baos.toByteArray());
  javaArchive.add(byteArrayAsset,"/META-INF/MANIFEST.MF");
  return javaArchive;
}
