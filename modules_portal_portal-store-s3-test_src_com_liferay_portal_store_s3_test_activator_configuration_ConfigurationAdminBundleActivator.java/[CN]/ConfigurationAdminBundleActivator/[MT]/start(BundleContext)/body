{
  ServiceReference<ConfigurationAdmin> serviceReference=bundleContext.getServiceReference(ConfigurationAdmin.class);
  try {
    ConfigurationAdmin configurationAdmin=bundleContext.getService(serviceReference);
    _s3Configuration=configurationAdmin.getConfiguration("com.liferay.portal.store.s3.configuration.S3Configuration",null);
    Dictionary<String,Object> properties=new Hashtable<>();
    properties.put("accessKey","");
    properties.put("bucketName","");
    properties.put("httpClientMaxConnections","50");
    properties.put("s3serviceDefaultBucketLocation","US");
    properties.put("s3serviceDefaultStorageClass","STANDARD");
    properties.put("s3serviceS3Endpoint","s3.amazonws.com");
    properties.put("secretKey","");
    properties.put("tempDirCleanUpExpunge","7");
    properties.put("tempDirCleanUpFrequency","100");
    _s3Configuration.update(properties);
  }
  finally {
    bundleContext.ungetService(serviceReference);
  }
}
