{
  List<KaleoTaskAssignment> calculatedKaleoTaskAssignments=new ArrayList<>();
  KaleoInstanceToken kaleoInstanceToken=kaleoTaskInstanceToken.getKaleoInstanceToken();
  Map<String,Serializable> workflowContext=WorkflowContextUtil.convert(kaleoTaskInstanceToken.getWorkflowContext());
  ServiceContext workflowContextServiceContext=(ServiceContext)workflowContext.get(WorkflowConstants.CONTEXT_SERVICE_CONTEXT);
  ExecutionContext executionContext=new ExecutionContext(kaleoInstanceToken,workflowContext,workflowContextServiceContext);
  List<KaleoTaskAssignment> configuredKaleoTaskAssignments=_kaleoTaskAssignmentLocalService.getKaleoTaskAssignments(kaleoTaskInstanceToken.getKaleoTaskId());
  for (  KaleoTaskAssignment configuredKaleoTaskAssignment : configuredKaleoTaskAssignments) {
    Collection<KaleoTaskAssignment> kaleoTaskAssignments=_taskAssignmentSelector.calculateTaskAssignments(configuredKaleoTaskAssignment,executionContext);
    calculatedKaleoTaskAssignments.addAll(kaleoTaskAssignments);
  }
  return calculatedKaleoTaskAssignments;
}
