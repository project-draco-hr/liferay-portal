{
  if (GradleUtil.isSnapshot(project)) {
    return;
  }
  Task uploadArchivesTask=GradleUtil.getTask(project,BasePlugin.UPLOAD_ARCHIVES_TASK_NAME);
  TaskContainer taskContainer=project.getTasks();
  TaskCollection<PublishNodeModuleTask> publishNodeModuleTasks=taskContainer.withType(PublishNodeModuleTask.class);
  uploadArchivesTask.dependsOn(publishNodeModuleTasks);
  Task updateBundleVersionTask=taskContainer.findByName(UPDATE_BUNDLE_VERSION_TASK_NAME);
  if (updateBundleVersionTask != null) {
    uploadArchivesTask.finalizedBy(updateBundleVersionTask);
  }
  uploadArchivesTask.finalizedBy(updateFileVersionsTask);
}
