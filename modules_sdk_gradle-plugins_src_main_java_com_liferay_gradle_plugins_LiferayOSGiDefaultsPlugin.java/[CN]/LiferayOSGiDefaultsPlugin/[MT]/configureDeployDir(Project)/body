{
  final LiferayExtension liferayExtension=GradleUtil.getExtension(project,LiferayExtension.class);
  liferayExtension.setDeployDir(new Callable<File>(){
    @Override public File call() throws Exception {
      if (FileUtil.exists(project,".lfrbuild-static")) {
        return new File(liferayExtension.getLiferayHome(),"osgi/static");
      }
      String archivesBaseName=GradleUtil.getArchivesBaseName(project);
      if (archivesBaseName.startsWith("com.liferay.portal.")) {
        return new File(liferayExtension.getLiferayHome(),"osgi/portal");
      }
      return new File(liferayExtension.getLiferayHome(),"osgi/modules");
    }
  }
);
}
