{
  final LiferayExtension liferayExtension=GradleUtil.getExtension(project,LiferayExtension.class);
  liferayExtension.setDeployDir(new Callable<File>(){
    @Override public File call() throws Exception {
      String archivesBaseName=GradleUtil.getArchivesBaseName(project);
      if (archivesBaseName.startsWith("com.liferay.portal.")) {
        return new File(liferayExtension.getLiferayHome(),"osgi/portal");
      }
 else {
        return new File(liferayExtension.getLiferayHome(),"osgi/modules");
      }
    }
  }
);
}
