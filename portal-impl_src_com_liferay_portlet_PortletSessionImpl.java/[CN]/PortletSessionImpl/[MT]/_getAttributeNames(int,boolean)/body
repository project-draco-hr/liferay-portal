{
  if (scope != PortletSession.PORTLET_SCOPE) {
    return _session.getAttributeNames();
  }
  List<String> attributeNames=new ArrayList<String>();
  int portletScopeLength=_portletScope.length();
  Enumeration<String> enu=_session.getAttributeNames();
  while (enu.hasMoreElements()) {
    String name=enu.nextElement();
    if (removePrefix) {
      if ((name.length() <= (portletScopeLength + 1)) || !name.startsWith(_portletScope + StringPool.QUESTION)) {
        continue;
      }
      name=name.substring(portletScopeLength + 1);
    }
    attributeNames.add(name);
  }
  return Collections.enumeration(attributeNames);
}
