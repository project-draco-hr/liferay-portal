{
  if (scope == PortletSession.PORTLET_SCOPE) {
    List<String> attributeNames=new ArrayList<String>();
    int portletScopeLength=_portletScope.length();
    Enumeration<String> enu=_session.getAttributeNames();
    while (enu.hasMoreElements()) {
      String name=enu.nextElement();
      if ((name.length() > (portletScopeLength + 1)) && (name.charAt(portletScopeLength) == CharPool.QUESTION) && name.startsWith(_portletScope)) {
        if (removePrefix) {
          name=name.substring(portletScopeLength + 1);
        }
        attributeNames.add(name);
      }
    }
    return Collections.enumeration(attributeNames);
  }
 else {
    return _session.getAttributeNames();
  }
}
