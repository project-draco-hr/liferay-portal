{
  if (scope != PORTLET_SCOPE) {
    return session.getAttributeNames();
  }
  List<String> attributeNames=new ArrayList<>();
  Enumeration<String> enu=session.getAttributeNames();
  while (enu.hasMoreElements()) {
    String name=enu.nextElement();
    if (name.startsWith(scopePrefix)) {
      name=name.substring(scopePrefix.length());
      attributeNames.add(name);
    }
  }
  return Collections.enumeration(attributeNames);
}
