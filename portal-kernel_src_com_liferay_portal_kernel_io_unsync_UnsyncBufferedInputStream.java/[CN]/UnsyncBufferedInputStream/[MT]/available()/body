{
  if (in == null) {
    throw new IOException("Stream closed");
  }
  return in.available() + (firstInvalidIndex - index);
}
