{
  CompanyThreadLocal.setCompanyId(_companyId);
  while (true) {
    BufferedIncreasableEntry bufferedIncreasableEntry=(BufferedIncreasableEntry)_batchablePipe.take();
    if (bufferedIncreasableEntry == null) {
      break;
    }
    try {
      bufferedIncreasableEntry.proceed();
    }
 catch (    Throwable t) {
      _log.error("Cannot write buffered increment value to the database",t);
    }
    if (_bufferedIncrementConfiguration.isStandbyEnabled()) {
      int queueLength=_queueLengthTracker.decrementAndGet();
      long standbyTime=_bufferedIncrementConfiguration.calculateStandbyTime(queueLength);
      try {
        Thread.sleep(standbyTime);
      }
 catch (      InterruptedException ie) {
        break;
      }
    }
  }
}
