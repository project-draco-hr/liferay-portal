{
  PermissionChecker permissionChecker=getPermissionChecker();
  if (!GroupPermissionUtil.contains(permissionChecker,targetGroupId,ActionKeys.MANAGE_STAGING) && !GroupPermissionUtil.contains(permissionChecker,targetGroupId,ActionKeys.PUBLISH_STAGING)) {
    throw new PrincipalException();
  }
  String jobName=PortalUUIDUtil.generate();
  Trigger trigger=new CronTrigger(jobName,groupName,schedulerStartDate,schedulerEndDate,cronText);
  String command=StringPool.BLANK;
  if (scope.equals("all-pages")) {
    command=LayoutsLocalPublisherRequest.COMMAND_ALL_PAGES;
  }
 else   if (scope.equals("selected-pages")) {
    command=LayoutsLocalPublisherRequest.COMMAND_SELECTED_PAGES;
  }
  LayoutsLocalPublisherRequest publisherRequest=new LayoutsLocalPublisherRequest(command,getUserId(),sourceGroupId,targetGroupId,privateLayout,layoutIdMap,parameterMap,startDate,endDate);
  SchedulerEngineUtil.schedule(trigger,description,DestinationNames.LAYOUTS_LOCAL_PUBLISHER,publisherRequest);
}
