{
  GroupPermissionUtil.check(getPermissionChecker(),targetGroupId,ActionKeys.PUBLISH_STAGING);
  Trigger trigger=new CronTrigger(PortalUUIDUtil.generate(),groupName,schedulerStartDate,schedulerEndDate,cronText);
  Map<String,Serializable> settingsMap=ExportImportConfigurationSettingsMapFactory.buildSettingsMap(getUserId(),sourceGroupId,targetGroupId,privateLayout,null,parameterMap,startDate,endDate,null,null);
  HashMap<Long,Boolean> serializableLayoutIdMap=new HashMap<Long,Boolean>(layoutIdMap);
  settingsMap.put("layoutIdMap",serializableLayoutIdMap);
  ExportImportConfiguration exportImportConfiguration=exportImportConfigurationLocalService.addExportImportConfiguration(getUserId(),sourceGroupId,trigger.getJobName(),description,ExportImportConfigurationConstants.TYPE_SCHEDULED_PUBLISH_LAYOUT_LOCAL,settingsMap,new ServiceContext());
  SchedulerEngineHelperUtil.schedule(trigger,StorageType.PERSISTED,description,DestinationNames.LAYOUTS_LOCAL_PUBLISHER,exportImportConfiguration.getExportImportConfigurationId(),0);
}
