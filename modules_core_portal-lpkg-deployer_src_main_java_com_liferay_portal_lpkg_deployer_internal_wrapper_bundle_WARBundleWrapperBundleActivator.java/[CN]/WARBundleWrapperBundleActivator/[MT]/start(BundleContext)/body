{
  Bundle bundle=bundleContext.getBundle();
  Dictionary<String,String> headers=bundle.getHeaders();
  String contextName=headers.get("wab-contextName");
  if (contextName == null) {
    throw new IllegalArgumentException("Missing wab-contextName header");
  }
  String lpkgURLString=headers.get("wab-lpkg-url");
  if (lpkgURLString == null) {
    throw new IllegalArgumentException("Missing wab-lpkg-url header");
  }
  String startLevelString=headers.get("wab-startLevel");
  if (startLevelString == null) {
    throw new IllegalArgumentException("Missing wab-startLevel header");
  }
  int startLevel=Integer.parseInt(startLevelString);
  LPKGWar1BundleRegistry lpkgWarBundleRegistry=bundleContext.getService(bundleContext.getServiceReference(LPKGWar1BundleRegistry.class));
  _serviceTracker=new ServiceTracker<>(bundleContext,bundleContext.createFilter("(&(objectClass=" + URLStreamHandlerService.class.getName() + ")("+ URLConstants.URL_HANDLER_PROTOCOL+ "=webbundle))"),new URLStreamHandlerServiceServiceTrackerCustomizer(bundleContext,contextName,new URL(lpkgURLString),startLevel,lpkgWarBundleRegistry));
  _serviceTracker.open();
}
