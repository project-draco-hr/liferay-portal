{
  if (GetterUtil.getBoolean(PropsUtil.get(PropsUtil.SESSION_TRACKER_PERSISTENCE_ENABLED))) {
    String userTrackerId=Long.toString(CounterServiceUtil.increment(UserTracker.class.getName()));
    UserTracker userTracker=UserTrackerUtil.create(userTrackerId);
    userTracker.setCompanyId(companyId);
    userTracker.setUserId(userId);
    userTracker.setModifiedDate(modifiedDate);
    userTracker.setRemoteAddr(remoteAddr);
    userTracker.setRemoteHost(remoteHost);
    userTracker.setUserAgent(userAgent);
    UserTrackerUtil.update(userTracker);
    Iterator itr=userTrackerPaths.iterator();
    while (itr.hasNext()) {
      UserTrackerPath userTrackerPath=(UserTrackerPath)itr.next();
      String pathId=Long.toString(CounterServiceUtil.increment(UserTrackerPath.class.getName()));
      userTrackerPath.setUserTrackerPathId(pathId);
      userTrackerPath.setUserTrackerId(userTrackerId);
      UserTrackerPathUtil.update(userTrackerPath);
    }
    return userTracker;
  }
 else {
    return null;
  }
}
