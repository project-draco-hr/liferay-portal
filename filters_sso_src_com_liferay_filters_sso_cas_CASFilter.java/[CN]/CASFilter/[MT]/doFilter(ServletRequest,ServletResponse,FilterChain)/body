{
  if (_log.isDebugEnabled()) {
    if (USE_CAS_FILTER) {
      _log.debug("CAS filter is enabled");
    }
 else {
      _log.debug("CAS filter is disabled");
    }
  }
  if (USE_CAS_FILTER) {
    HttpServletRequest httpReq=(HttpServletRequest)req;
    String pathInfo=httpReq.getPathInfo();
    if (pathInfo.indexOf("/portal/logout") != -1) {
      HttpServletResponse httpRes=(HttpServletResponse)res;
      HttpSession httpSes=httpReq.getSession();
      httpSes.invalidate();
      httpRes.sendRedirect(_logoutUrl);
    }
 else {
      super.doFilter(req,res,chain);
    }
  }
 else {
    chain.doFilter(req,res);
  }
}
