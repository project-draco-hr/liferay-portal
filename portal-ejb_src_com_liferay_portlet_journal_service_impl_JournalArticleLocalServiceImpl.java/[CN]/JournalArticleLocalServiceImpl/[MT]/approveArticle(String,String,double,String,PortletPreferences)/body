{
  User user=UserUtil.findByPrimaryKey(userId);
  Date now=new Date();
  JournalArticlePK pk=new JournalArticlePK(user.getCompanyId(),articleId,version);
  JournalArticle article=JournalArticleUtil.findByPrimaryKey(pk);
  article.setModifiedDate(now);
  article.setApproved(true);
  article.setApprovedByUserId(user.getUserId());
  article.setApprovedByUserName(user.getFullName());
  article.setApprovedDate(now);
  JournalArticleUtil.update(article);
  sendEmail(article,articleURL,prefs,"granted");
  try {
    Indexer.updateArticle(article.getCompanyId(),article.getGroupId(),article.getArticleId(),article.getVersion(),article.getTitle(),article.getDescription(),article.getContent(),article.getType(),article.getDisplayDate());
  }
 catch (  IOException ioe) {
    _log.error(ioe);
  }
  return article;
}
