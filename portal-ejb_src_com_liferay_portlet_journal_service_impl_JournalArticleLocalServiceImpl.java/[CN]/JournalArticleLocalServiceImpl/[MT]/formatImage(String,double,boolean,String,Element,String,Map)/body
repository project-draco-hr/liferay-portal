{
  List imageContents=el.elements("dynamic-content");
  Iterator itr=imageContents.listIterator();
  while (itr.hasNext()) {
    Element dynamicContent=(Element)itr.next();
    String elLanguage=dynamicContent.attributeValue("language-id",StringPool.BLANK);
    if (!elLanguage.equals(StringPool.BLANK)) {
      elLanguage="_" + elLanguage;
    }
    String imageId=companyId + ".journal.article." + articleId+ "."+ elName+ elLanguage+ "."+ version;
    double oldVersion=MathUtil.format(version - 0.1,1,1);
    String oldImageId=companyId + ".journal.article." + articleId+ "."+ elName+ elLanguage+ "."+ oldVersion;
    String elContent="/image/journal/article?img_id=" + articleId + "."+ elName+ elLanguage+ "&version="+ version;
    if (dynamicContent.getText().equals("delete")) {
      dynamicContent.setText(StringPool.BLANK);
      ImageLocalUtil.remove(imageId);
      String defaultElLanguage="";
      if (!Validator.isNotNull(elLanguage)) {
        defaultElLanguage="_" + LocaleUtil.toLanguageId(Locale.getDefault());
      }
      String defaultImageId=companyId + ".journal.article." + articleId+ "."+ elName+ defaultElLanguage+ "."+ version;
      ImageLocalUtil.remove(defaultImageId);
      continue;
    }
    byte[] bytes=(byte[])images.get(elName + elLanguage);
    if (bytes != null && (bytes.length > 0)) {
      dynamicContent.setText(elContent);
      dynamicContent.addAttribute("id",imageId);
      ImageLocalUtil.put(imageId,bytes);
      continue;
    }
    if ((version > JournalArticleImpl.DEFAULT_VERSION) && (incrementVersion)) {
      Image oldImage=ImageLocalUtil.get(oldImageId);
      if (oldImage != null) {
        dynamicContent.setText(elContent);
        dynamicContent.addAttribute("id",imageId);
        bytes=oldImage.getTextObj();
        ImageLocalUtil.put(imageId,bytes);
      }
      continue;
    }
    Image image=ImageLocalUtil.get(imageId);
    if (image != null) {
      dynamicContent.setText(elContent);
      dynamicContent.addAttribute("id",imageId);
      continue;
    }
    String defaultElLanguage="";
    if (!Validator.isNotNull(elLanguage)) {
      defaultElLanguage="_" + LocaleUtil.toLanguageId(Locale.getDefault());
    }
    String defaultImageId=companyId + ".journal.article." + articleId+ "."+ elName+ defaultElLanguage+ "."+ version;
    Image defaultImage=ImageLocalUtil.get(defaultImageId);
    if (defaultImage != null) {
      dynamicContent.setText(elContent);
      dynamicContent.addAttribute("id",imageId);
      bytes=defaultImage.getTextObj();
      ImageLocalUtil.put(imageId,bytes);
      continue;
    }
    dynamicContent.setText(StringPool.BLANK);
  }
}
