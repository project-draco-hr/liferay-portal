{
  long classNameId=PortalUtil.getClassNameId(className);
  WorkflowDefinitionLink workflowDefinitionLink=null;
  if (groupId > 0) {
    workflowDefinitionLink=workflowDefinitionLinkPersistence.fetchByG_C_C(groupId,companyId,classNameId);
  }
  if (workflowDefinitionLink == null) {
    Group group=groupLocalService.getCompanyGroup(companyId);
    workflowDefinitionLink=workflowDefinitionLinkPersistence.fetchByG_C_C(group.getGroupId(),companyId,classNameId);
  }
  if (workflowDefinitionLink == null) {
    throw new NoSuchWorkflowDefinitionLinkException("No workflow for groupId=" + groupId + ", companyId="+ companyId+ " and classNameId="+ classNameId);
  }
  return workflowDefinitionLink;
}
