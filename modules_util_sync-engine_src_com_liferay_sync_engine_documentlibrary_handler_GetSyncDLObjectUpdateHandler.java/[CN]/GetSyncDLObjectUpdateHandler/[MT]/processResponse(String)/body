{
  ObjectMapper objectMapper=new ObjectMapper();
  SyncDLObjectUpdate syncDLObjectUpdate=objectMapper.readValue(response,new TypeReference<SyncDLObjectUpdate>(){
  }
);
  boolean firedProcessingState=false;
  long start=System.currentTimeMillis();
  for (  SyncFile targetSyncFile : syncDLObjectUpdate.getSyncDLObjects()) {
    processSyncFile(targetSyncFile);
    if (!firedProcessingState && ((System.currentTimeMillis() - start) > 1000)) {
      SyncEngineUtil.fireSyncEngineStateChanged(getSyncAccountId(),SyncEngineUtil.SYNC_ENGINE_STATE_PROCESSING);
      firedProcessingState=true;
    }
  }
  if (firedProcessingState) {
    SyncEngineUtil.fireSyncEngineStateChanged(getSyncAccountId(),SyncEngineUtil.SYNC_ENGINE_STATE_PROCESSED);
  }
  if (getParameterValue("parentFolderId") == null) {
    SyncSite syncSite=SyncSiteService.fetchSyncSite((Long)getParameterValue("repositoryId"),getSyncAccountId());
    if ((syncSite == null) || ((Long)getParameterValue("lastAccessTime") != syncSite.getRemoteSyncTime())) {
      return;
    }
    syncSite.setRemoteSyncTime(syncDLObjectUpdate.getLastAccessTime());
    SyncSiteService.update(syncSite);
  }
}
