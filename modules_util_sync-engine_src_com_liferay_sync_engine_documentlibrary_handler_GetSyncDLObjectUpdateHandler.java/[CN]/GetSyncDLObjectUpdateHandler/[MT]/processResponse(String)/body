{
  if (_syncDLObjectUpdate == null) {
    ObjectMapper objectMapper=new ObjectMapper();
    _syncDLObjectUpdate=objectMapper.readValue(response,new TypeReference<SyncDLObjectUpdate>(){
    }
);
  }
  _scheduledFuture.cancel(true);
  long start=System.currentTimeMillis();
  for (  SyncFile targetSyncFile : _syncDLObjectUpdate.getSyncDLObjects()) {
    processSyncFile(targetSyncFile);
    if (!_firedProcessingState && ((System.currentTimeMillis() - start) > 1000)) {
      fireProcessingState();
    }
  }
  if (_firedProcessingState) {
    fireProcessedState();
  }
  if (getParameterValue("parentFolderId") == null) {
    SyncSite syncSite=SyncSiteService.fetchSyncSite((Long)getParameterValue("repositoryId"),getSyncAccountId());
    if ((syncSite == null) || ((Long)getParameterValue("lastAccessTime") != syncSite.getRemoteSyncTime())) {
      return;
    }
    syncSite.setRemoteSyncTime(_syncDLObjectUpdate.getLastAccessTime());
    SyncSiteService.update(syncSite);
  }
}
