{
  Path sourceFilePath=Paths.get(sourceSyncFile.getFilePathName());
  Path targetFilePath=Paths.get(targetFilePathName);
  sourceSyncFile=SyncFileService.updateSyncFile(targetFilePath,targetSyncFile.getParentFolderId(),sourceSyncFile);
  if (Files.exists(sourceFilePath)) {
    FileUtil.moveFile(sourceFilePath,targetFilePath);
    sourceSyncFile.setState(SyncFile.STATE_SYNCED);
  }
 else   if (targetSyncFile.isFolder()) {
    Files.createDirectories(targetFilePath);
    sourceSyncFile.setState(SyncFile.STATE_SYNCED);
    FileKeyUtil.writeFileKey(targetFilePath,String.valueOf(sourceSyncFile.getSyncFileId()),false);
  }
 else {
    downloadFile(sourceSyncFile,null,0,false);
  }
  sourceSyncFile.setModifiedTime(targetSyncFile.getModifiedTime());
  sourceSyncFile.setUiEvent(SyncFile.UI_EVENT_MOVED_REMOTE);
  SyncFileService.update(sourceSyncFile);
}
