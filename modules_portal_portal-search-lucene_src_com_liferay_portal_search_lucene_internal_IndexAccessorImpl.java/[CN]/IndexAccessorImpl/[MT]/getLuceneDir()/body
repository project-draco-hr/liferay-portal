{
  if (_directory != null) {
    return _directory;
  }
  if (_log.isDebugEnabled()) {
    _log.debug("Lucene store type " + luceneConfiguration.storeType());
  }
  String storeType=luceneConfiguration.storeType();
  if (storeType.equals(_LUCENE_STORE_TYPE_FILE)) {
    _directory=_getLuceneDirFile();
  }
 else   if (storeType.equals(_LUCENE_STORE_TYPE_JDBC)) {
    throw new IllegalArgumentException("Store type JDBC is no longer supported in favor of SOLR");
  }
 else   if (storeType.equals(_LUCENE_STORE_TYPE_RAM)) {
    _directory=new RAMDirectory();
  }
 else {
    throw new RuntimeException("Invalid store type " + storeType);
  }
  return _directory;
}
