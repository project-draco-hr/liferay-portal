{
  List<Element> addressElements=portletDataContext.getReferenceDataElements(organization,Address.class);
  List<Address> addresses=new ArrayList<Address>(addressElements.size());
  for (  Element addressElement : addressElements) {
    String path=addressElement.attributeValue("path");
    Address address=(Address)portletDataContext.getZipEntryAsObject(path);
    address.setClassPK(importedOrganization.getOrganizationId());
    StagedModelDataHandlerUtil.importStagedModel(portletDataContext,address);
    Map<Long,Long> newPrimaryKeysMap=(Map<Long,Long>)portletDataContext.getNewPrimaryKeysMap(Address.class);
    long addressId=newPrimaryKeysMap.get(address.getPrimaryKey());
    address.setPrimaryKey(addressId);
    addresses.add(address);
  }
  UsersAdminUtil.updateAddresses(Organization.class.getName(),importedOrganization.getOrganizationId(),addresses);
}
