{
  List<Element> addressElements=portletDataContext.getReferenceDataElements(organization,Address.class);
  List<Address> addresses=new ArrayList<Address>(addressElements.size());
  for (  Element addressElement : addressElements) {
    String addressPath=addressElement.attributeValue("path");
    Address address=(Address)portletDataContext.getZipEntryAsObject(addressPath);
    address.setClassPK(importedOrganization.getOrganizationId());
    StagedModelDataHandlerUtil.importReferenceStagedModel(portletDataContext,address);
    Map<Long,Long> addressIds=(Map<Long,Long>)portletDataContext.getNewPrimaryKeysMap(Address.class);
    long addressId=addressIds.get(address.getPrimaryKey());
    address.setAddressId(addressId);
    addresses.add(address);
  }
  UsersAdminUtil.updateAddresses(Organization.class.getName(),importedOrganization.getOrganizationId(),addresses);
}
