{
  List<Element> emailAddressElements=portletDataContext.getReferenceDataElements(organization,EmailAddress.class);
  List<EmailAddress> emailAddresses=new ArrayList<EmailAddress>(emailAddressElements.size());
  for (  Element emailAddressElement : emailAddressElements) {
    String path=emailAddressElement.attributeValue("path");
    EmailAddress emailAddress=(EmailAddress)portletDataContext.getZipEntryAsObject(path);
    emailAddress.setClassPK(importedOrganization.getOrganizationId());
    StagedModelDataHandlerUtil.importStagedModel(portletDataContext,emailAddress);
    Map<Long,Long> newPrimaryKeysMap=(Map<Long,Long>)portletDataContext.getNewPrimaryKeysMap(EmailAddress.class);
    long emailAddressId=newPrimaryKeysMap.get(emailAddress.getPrimaryKey());
    emailAddress.setPrimaryKey(emailAddressId);
    emailAddresses.add(emailAddress);
  }
  UsersAdminUtil.updateEmailAddresses(Organization.class.getName(),importedOrganization.getOrganizationId(),emailAddresses);
}
