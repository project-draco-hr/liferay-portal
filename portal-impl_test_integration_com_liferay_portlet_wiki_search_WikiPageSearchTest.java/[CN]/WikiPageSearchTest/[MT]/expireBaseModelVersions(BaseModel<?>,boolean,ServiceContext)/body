{
  WikiPage page=(WikiPage)baseModel;
  if (expireAllVersions) {
    WikiPageServiceUtil.deletePage(page.getNodeId(),page.getTitle());
  }
 else {
    List<WikiPage> pages=WikiPageServiceUtil.getPages(page.getGroupId(),page.getNodeId(),false,WorkflowConstants.STATUS_ANY,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
    WikiPage previousPage=pages.get(0);
    WikiPageServiceUtil.revertPage(page.getNodeId(),page.getTitle(),previousPage.getVersion(),serviceContext);
  }
}
