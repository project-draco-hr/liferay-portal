{
  super(req);
  _req=req;
  _portletRequest=portletRequest;
  _pathInfo=GetterUtil.getString(pathInfo);
  _queryString=GetterUtil.getString(queryString);
  _requestURI=GetterUtil.getString(requestURI);
  _servletPath=GetterUtil.getString(servletPath);
  long userId=PortalUtil.getUserId(req);
  String remoteUser=req.getRemoteUser();
  if ((userId > 0) && (remoteUser == null)) {
    _remoteUser=String.valueOf(userId);
    _userPrincipal=new ProtectedPrincipal(_remoteUser);
  }
 else {
    _remoteUser=remoteUser;
    _userPrincipal=req.getUserPrincipal();
  }
}
