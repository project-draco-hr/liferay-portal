{
  int threadCount=Integer.parseInt(TestProps.get("portal.soap.add.user.thread.count"));
  AddUserWorker[] workers=new AddUserWorker[threadCount];
  try {
    for (int i=0; i < threadCount; i++) {
      workers[i]=new AddUserWorker(getUserService(),i);
      workers[i].start();
    }
    while (true) {
      int activeThreads=0;
      for (int i=0; i < threadCount; i++) {
        if (workers[i].isAlive()) {
          activeThreads++;
        }
      }
      if (activeThreads == 0) {
        break;
      }
    }
    for (int i=0; i < threadCount; i++) {
      Exception e=workers[i].getException();
      if (e != null) {
        throw e;
      }
    }
  }
 catch (  Exception e) {
    fail(e);
  }
}
