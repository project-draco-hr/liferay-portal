{
  UnsyncByteArrayOutputStream outputStream=new UnsyncByteArrayOutputStream();
  ConfigurationHandler.write(outputStream,dictionary);
  Connection connection=null;
  PreparedStatement preparedStatement=null;
  ResultSet resultSet=null;
  try {
    connection=_dataSource.getConnection();
    connection.setAutoCommit(false);
    preparedStatement=connection.prepareStatement(buildSQL("select configurationId, dictionary from Configuration_ " + "where configurationId = ?"),ResultSet.TYPE_FORWARD_ONLY,ResultSet.CONCUR_UPDATABLE);
    preparedStatement.setString(1,pid);
    resultSet=preparedStatement.executeQuery();
    if (resultSet.next()) {
      resultSet.updateString(2,outputStream.toString());
      resultSet.updateRow();
    }
 else {
      preparedStatement=prepareStatement(connection,"insert into Configuration_ (configurationId, " + "dictionary) values (?, ?)");
      preparedStatement.setString(1,pid);
      preparedStatement.setString(2,outputStream.toString());
      preparedStatement.executeUpdate();
    }
    connection.commit();
  }
 catch (  SQLException sqle) {
    ReflectionUtil.throwException(sqle);
  }
 finally {
    cleanUp(connection,preparedStatement,resultSet);
    outputStream.close();
  }
}
