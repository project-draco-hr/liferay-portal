{
  if (_compatClassNamesMap != null) {
    return _compatClassNamesMap;
  }
  Map<String,String> compatClassNamesMap=new HashMap<>();
  String[] includes=new String[]{"**/portal-compat-shared/src/com/liferay/compat/**/*.java"};
  String basedir=sourceFormatterArgs.getBaseDirName();
  List<String> fileNames=new ArrayList<>();
  for (int i=0; i < 3; i++) {
    fileNames=getFileNames(basedir,new String[0],includes);
    if (!fileNames.isEmpty()) {
      break;
    }
    basedir="../" + basedir;
  }
  for (  String fileName : fileNames) {
    if (!fileName.startsWith(sourceFormatterArgs.getBaseDirName() + "shared")) {
      break;
    }
    File file=new File(basedir + fileName);
    String content=FileUtil.read(file);
    fileName=StringUtil.replace(fileName,StringPool.BACK_SLASH,StringPool.SLASH);
    fileName=StringUtil.replace(fileName,StringPool.SLASH,StringPool.PERIOD);
    int pos=fileName.indexOf("com.");
    String compatClassName=fileName.substring(pos);
    compatClassName=compatClassName.substring(0,compatClassName.length() - 5);
    String extendedClassName=StringUtil.replace(compatClassName,"compat.",StringPool.BLANK);
    if (content.contains("extends " + extendedClassName)) {
      compatClassNamesMap.put(compatClassName,extendedClassName);
    }
  }
  _compatClassNamesMap=compatClassNamesMap;
  return _compatClassNamesMap;
}
