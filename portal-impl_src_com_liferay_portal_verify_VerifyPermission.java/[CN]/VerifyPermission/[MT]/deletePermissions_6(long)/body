{
  Group group=GroupLocalServiceUtil.getGroup(companyId,GroupConstants.CONTROL_PANEL);
  long plid=LayoutLocalServiceUtil.getDefaultPlid(group.getGroupId(),true);
  Role role=RoleLocalServiceUtil.getRole(companyId,RoleConstants.GUEST);
  List<ResourcePermission> resourcePermissions=ResourcePermissionLocalServiceUtil.getRoleResourcePermissions(role.getRoleId());
  for (  ResourcePermission resourcePermission : resourcePermissions) {
    if (isControlPanelLayout(plid,resourcePermission.getPrimKey()) || isPrivateLayout(resourcePermission.getName(),resourcePermission.getPrimKey())) {
      ResourcePermissionLocalServiceUtil.deleteResourcePermission(resourcePermission.getResourcePermissionId());
    }
  }
}
