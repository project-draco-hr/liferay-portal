{
  long[] companyIds=PortalInstances.getCompanyIdsBySQL();
  for (  long companyId : companyIds) {
    try {
      if (PropsValues.PERMISSIONS_USER_CHECK_ALGORITHM == 5) {
        deleteDefaultPrivateLayoutPermissions_5(companyId);
      }
 else       if (PropsValues.PERMISSIONS_USER_CHECK_ALGORITHM == 6) {
        deleteDefaultPrivateLayoutPermissions_6(companyId);
      }
 else {
        deleteDefaultPrivateLayoutPermissions_1to4(companyId);
      }
    }
 catch (    Exception e) {
      if (_log.isDebugEnabled()) {
        _log.debug(e,e);
      }
    }
  }
  if ((PropsValues.PERMISSIONS_USER_CHECK_ALGORITHM != 5) && (PropsValues.PERMISSIONS_USER_CHECK_ALGORITHM != 6)) {
    return;
  }
  List<String> modelNames=ResourceActionsUtil.getModelNames();
  for (  String modelName : modelNames) {
    List<String> actionIds=ResourceActionsUtil.getModelResourceActions(modelName);
    if (PropsValues.PERMISSIONS_USER_CHECK_ALGORITHM == 5) {
      PermissionLocalServiceUtil.checkPermissions(modelName,actionIds);
    }
 else     if (PropsValues.PERMISSIONS_USER_CHECK_ALGORITHM == 6) {
      ResourceActionLocalServiceUtil.checkResourceActions(modelName,actionIds,true);
    }
  }
}
