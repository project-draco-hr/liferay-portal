{
  Resource groupResource=null;
  try {
    groupResource=ResourceLocalServiceUtil.getResource(resource.getCompanyId(),Group.class.getName(),resource.getScope(),resource.getPrimKey());
  }
 catch (  NoSuchResourceException nsre) {
    groupResource=ResourceLocalServiceUtil.addResource(resource.getCompanyId(),Group.class.getName(),resource.getScope(),resource.getPrimKey());
  }
  for (  Permission permission : permissions) {
    for (    Object[] actionIdToMask : _ORGANIZATION_ACTION_IDS_TO_MASKS) {
      String actionId=(String)actionIdToMask[0];
      long mask=(Long)actionIdToMask[2];
      if (!actionId.equals(permission.getActionId())) {
        continue;
      }
      try {
        if (mask != 0L) {
          permission.resetOriginalValues();
          permission.setResourceId(groupResource.getResourceId());
          PermissionLocalServiceUtil.updatePermission(permission,false);
        }
 else {
          PermissionLocalServiceUtil.deletePermission(permission.getPermissionId());
        }
      }
 catch (      Exception e) {
        _log.error(e,e);
      }
      break;
    }
  }
}
