{
  long commentId=GetterUtil.getLong(commentEl.elementTextTrim(SAXReaderUtil.createQName("comment_id",_NS_WP)));
  String commentContent=commentEl.elementTextTrim(SAXReaderUtil.createQName("comment_content",_NS_WP));
  if (Validator.isNull(commentContent)) {
    return;
  }
  String commentAuthor=commentEl.elementTextTrim(SAXReaderUtil.createQName("comment_author",_NS_WP));
  commentAuthor=commentAuthor.substring(0,Math.min(75,commentAuthor.length()));
  long commentParentId=GetterUtil.getLong(commentEl.elementTextTrim(SAXReaderUtil.createQName("comment_parent",_NS_WP)));
  if (commentParentId == 0) {
    commentParentId=messageDisplay.getMessage().getMessageId();
  }
 else {
    commentParentId=messageIdMap.get(commentParentId);
  }
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setAddCommunityPermissions(true);
  serviceContext.setAddGuestPermissions(true);
  MBMessage message=MBMessageLocalServiceUtil.addDiscussionMessage(null,defaultUser.getUserId(),commentAuthor,context.getGroupId(),BlogsEntry.class.getName(),entry.getEntryId(),messageDisplay.getThread().getThreadId(),commentParentId,null,commentContent,serviceContext);
  messageIdMap.put(commentId,message.getMessageId());
}
