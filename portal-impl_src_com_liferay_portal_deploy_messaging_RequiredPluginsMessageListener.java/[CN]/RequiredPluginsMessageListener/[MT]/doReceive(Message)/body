{
  if (_firstMessage) {
    _firstMessage=false;
    return;
  }
  List<String[]> levelsRequiredDeploymentContexts=DeployManagerUtil.getLevelsRequiredDeploymentContexts();
  List<String[]> levelsRequiredDeploymentWARFileNames=DeployManagerUtil.getLevelsRequiredDeploymentWARFileNames();
  for (int i=0; i < levelsRequiredDeploymentContexts.size(); i++) {
    String[] levelRequiredDeploymentContexts=levelsRequiredDeploymentContexts.get(i);
    String[] levelRequiredDeploymentWARFileNames=levelsRequiredDeploymentWARFileNames.get(i);
    for (int j=0; j < levelRequiredDeploymentContexts.length; j++) {
      String levelRequiredDeploymentContext=levelRequiredDeploymentContexts[j];
      if (DeployManagerUtil.isDeployed(levelRequiredDeploymentContext)) {
        continue;
      }
      String levelRequiredDeploymentWARFileName=levelRequiredDeploymentWARFileNames[j];
      if (_log.isDebugEnabled()) {
        _log.debug("Automatically deploying the required plugin " + levelRequiredDeploymentWARFileName);
      }
      Class<?> clazz=getClass();
      ClassLoader classLoader=clazz.getClassLoader();
      InputStream inputStream=classLoader.getResourceAsStream("com/liferay/portal/deploy/dependencies/plugins" + (i + 1) + "/"+ levelRequiredDeploymentWARFileNames[j]);
      AutoDeployDir autoDeployDir=AutoDeployUtil.getDir(AutoDeployDir.DEFAULT_NAME);
      StreamUtil.transfer(inputStream,new FileOutputStream(autoDeployDir.getDeployDir() + "/" + levelRequiredDeploymentWARFileNames[j]));
    }
  }
}
