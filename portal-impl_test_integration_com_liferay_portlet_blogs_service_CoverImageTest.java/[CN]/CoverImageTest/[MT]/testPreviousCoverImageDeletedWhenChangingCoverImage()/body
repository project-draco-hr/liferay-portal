{
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(_group.getGroupId(),_user.getUserId());
  FileEntry fileEntry=getTempFileEntry(_user.getUserId(),"image1.jpg",serviceContext);
  ImageSelector coverImageSelector=new ImageSelector(fileEntry.getFileEntryId(),StringPool.BLANK,_IMAGE_CROP_REGION);
  ImageSelector smallImageSelector=null;
  BlogsEntry entry=BlogsEntryLocalServiceUtil.addEntry(_user.getUserId(),RandomTestUtil.randomString(),RandomTestUtil.randomString(),RandomTestUtil.randomString(),RandomTestUtil.randomString(),new Date(),true,true,new String[0],StringPool.BLANK,coverImageSelector,smallImageSelector,serviceContext);
  FileEntry initialCoverImageFileEntry=PortletFileRepositoryUtil.getPortletFileEntry(entry.getCoverImageFileEntryId());
  fileEntry=getTempFileEntry(_user.getUserId(),"image2.jpg",serviceContext);
  coverImageSelector=new ImageSelector(fileEntry.getFileEntryId(),StringPool.BLANK,_IMAGE_CROP_REGION);
  entry=BlogsEntryLocalServiceUtil.updateEntry(_user.getUserId(),entry.getEntryId(),RandomTestUtil.randomString(),RandomTestUtil.randomString(),RandomTestUtil.randomString(),RandomTestUtil.randomString(),new Date(),true,true,new String[0],StringPool.BLANK,coverImageSelector,smallImageSelector,serviceContext);
  FileEntry finalCoverImageFileEntry=PortletFileRepositoryUtil.getPortletFileEntry(entry.getCoverImageFileEntryId());
  Assert.assertEquals("image2.jpg",finalCoverImageFileEntry.getTitle());
  PortletFileRepositoryUtil.getPortletFileEntry(initialCoverImageFileEntry.getFileEntryId());
}
