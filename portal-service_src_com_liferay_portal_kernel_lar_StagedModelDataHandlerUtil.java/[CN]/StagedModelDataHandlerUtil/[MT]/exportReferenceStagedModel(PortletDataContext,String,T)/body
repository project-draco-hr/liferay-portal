{
  Element referenceElement=null;
  Portlet referrerPortlet=PortletLocalServiceUtil.getPortletById(referrerPortletId);
  if (stagedModel instanceof StagedGroupedModel) {
    StagedGroupedModel stagedGroupedModel=(StagedGroupedModel)stagedModel;
    if (portletDataContext.isCompanyStagedGroupedModel(stagedGroupedModel)) {
      referenceElement=portletDataContext.addReferenceElement(referrerPortlet,portletDataContext.getExportDataRootElement(),stagedModel,stagedModel.getModelClass(),PortletDataContext.REFERENCE_TYPE_DEPENDENCY,true);
      return referenceElement;
    }
  }
  exportStagedModel(portletDataContext,stagedModel);
  referenceElement=portletDataContext.addReferenceElement(referrerPortlet,portletDataContext.getExportDataRootElement(),stagedModel,stagedModel.getModelClass(),PortletDataContext.REFERENCE_TYPE_DEPENDENCY,false);
  return referenceElement;
}
