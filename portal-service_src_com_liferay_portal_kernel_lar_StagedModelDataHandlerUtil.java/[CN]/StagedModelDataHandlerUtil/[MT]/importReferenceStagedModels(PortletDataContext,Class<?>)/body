{
  Element importDataRootElement=portletDataContext.getImportDataRootElement();
  Element referencesElement=importDataRootElement.element("references");
  if (referencesElement == null) {
    return;
  }
  List<Element> referenceElements=referencesElement.elements();
  for (  Element referenceElement : referenceElements) {
    String className=referenceElement.attributeValue("class-name");
    String stagedModelClassName=stagedModelClass.getName();
    if (!stagedModelClassName.equals(className)) {
      continue;
    }
    long groupId=GetterUtil.getLong(referenceElement.attributeValue("group-id"));
    if ((portletDataContext.getSourceCompanyGroupId() == groupId) && (portletDataContext.getGroupId() != portletDataContext.getCompanyGroupId())) {
      StagedModelDataHandler<?> stagedModelDataHandler=StagedModelDataHandlerRegistryUtil.getStagedModelDataHandler(stagedModelClass.getName());
      stagedModelDataHandler.importCompanyStagedModel(portletDataContext,referenceElement);
      continue;
    }
    long classPK=GetterUtil.getLong(referenceElement.attributeValue("class-pk"));
    String stagedModelPath=ExportImportPathUtil.getModelPath(portletDataContext,stagedModelClass.getName(),classPK);
    StagedModel stagedModel=(StagedModel)portletDataContext.getZipEntryAsObject(stagedModelPath);
    importStagedModel(portletDataContext,stagedModel);
  }
}
