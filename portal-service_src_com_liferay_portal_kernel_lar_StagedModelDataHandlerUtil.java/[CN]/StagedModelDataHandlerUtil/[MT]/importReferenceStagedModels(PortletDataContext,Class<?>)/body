{
  Element importDataRootElement=portletDataContext.getImportDataRootElement();
  Element referencesElement=importDataRootElement.element("references");
  if (referencesElement == null) {
    return;
  }
  List<Element> referenceElements=referencesElement.elements();
  for (  Element referenceElement : referenceElements) {
    String className=referenceElement.attributeValue("class-name");
    String stagedModelClassName=stagedModelClass.getName();
    if (!stagedModelClassName.equals(className)) {
      continue;
    }
    boolean missing=GetterUtil.getBoolean(referenceElement.attributeValue("missing"));
    if (missing) {
      StagedModelDataHandler<?> stagedModelDataHandler=StagedModelDataHandlerRegistryUtil.getStagedModelDataHandler(stagedModelClass.getName());
      stagedModelDataHandler.importMissingReference(portletDataContext,referenceElement);
      continue;
    }
    long classPK=GetterUtil.getLong(referenceElement.attributeValue("class-pk"));
    long groupId=GetterUtil.getLong(referenceElement.attributeValue("group-id"),portletDataContext.getSourceGroupId());
    String stagedModelPath=ExportImportPathUtil.getModelPath(groupId,stagedModelClass.getName(),classPK);
    StagedModel stagedModel=(StagedModel)portletDataContext.getZipEntryAsObject(stagedModelPath);
    importStagedModel(portletDataContext,stagedModel);
  }
}
