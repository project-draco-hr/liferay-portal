{
  String orderByCol=prefs.getValue("order-by-col",StringPool.BLANK);
  String orderByType=prefs.getValue("order-by-type",StringPool.BLANK);
  if (orderByCol.equals("s")) {
    if (orderByType.equals("asc")) {
      return new ItemSKUComparator(true);
    }
 else {
      return new ItemSKUComparator(false);
    }
  }
 else   if (orderByCol.equals("n")) {
    if (orderByType.equals("desc")) {
      return new ItemNameComparator(false);
    }
  }
 else   if (orderByCol.equals("min")) {
    if (orderByType.equals("asc")) {
      return new ItemMinQuantityComparator(true);
    }
 else {
      return new ItemMinQuantityComparator(false);
    }
  }
 else   if (orderByCol.equals("p")) {
    if (orderByType.equals("asc")) {
      return new ItemPriceComparator(true);
    }
 else {
      return new ItemPriceComparator(false);
    }
  }
  return new ItemNameComparator(true);
}
