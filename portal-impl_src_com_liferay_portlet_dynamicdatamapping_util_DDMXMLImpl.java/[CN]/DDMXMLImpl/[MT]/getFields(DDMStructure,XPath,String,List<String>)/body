{
  Document document=null;
  try {
    document=SAXReaderUtil.read(xml);
  }
 catch (  DocumentException e) {
    return null;
  }
  if ((conditionXPath != null) && !conditionXPath.booleanValueOf(document)) {
    return null;
  }
  Fields fields=new Fields();
  Element rootElement=document.getRootElement();
  List<Element> dynamicElementElements=rootElement.elements("dynamic-element");
  for (  Element dynamicElementElement : dynamicElementElements) {
    String fieldName=dynamicElementElement.attributeValue("name");
    String fieldValue=dynamicElementElement.elementText("dynamic-content");
    if (!ddmStructure.hasField(fieldName) || ((fieldNames != null) && !fieldNames.contains(fieldName))) {
      continue;
    }
    String fieldDataType=ddmStructure.getFieldDataType(fieldName);
    Serializable fieldValueSerializable=FieldConstants.getSerializable(fieldDataType,fieldValue);
    Field field=new Field(ddmStructure.getStructureId(),fieldName,fieldValueSerializable);
    fields.put(field);
  }
  return fields;
}
