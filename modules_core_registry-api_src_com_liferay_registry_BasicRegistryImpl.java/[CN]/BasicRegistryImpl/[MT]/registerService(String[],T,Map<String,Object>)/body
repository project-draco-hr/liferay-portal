{
  if ((classNames == null) || (classNames.length == 0)) {
    throw new IllegalArgumentException();
  }
  properties.put("objectClass",classNames);
  Integer serviceRanking=(Integer)properties.get("service.ranking");
  if (serviceRanking == null) {
    serviceRanking=new Integer(0);
  }
  BasicServiceReference<T> basicServiceReference=new BasicServiceReference<T>(classNames[0],_serviceIdCounter.incrementAndGet(),serviceRanking.intValue(),properties);
  _addingService(basicServiceReference,service);
  return new BasicServiceRegistration<T>(basicServiceReference);
}
