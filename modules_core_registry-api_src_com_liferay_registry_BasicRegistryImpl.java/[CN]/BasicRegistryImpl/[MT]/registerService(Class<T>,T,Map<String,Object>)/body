{
  Integer serviceRanking=(Integer)properties.get("service.ranking");
  if (serviceRanking == null) {
    serviceRanking=Integer.valueOf(0);
  }
  BasicServiceReference<T> basicServiceReference=new BasicServiceReference<T>(clazz.getName(),_serviceIdCounter.incrementAndGet(),serviceRanking.intValue(),properties);
  _addingService(basicServiceReference,service);
  return new BasicServiceRegistration<>(basicServiceReference);
}
