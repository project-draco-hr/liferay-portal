{
  int length=value.length();
  if (length <= 0) {
    return defaultValue;
  }
  boolean negative=false;
  int index=0;
  long limit=-Long.MAX_VALUE;
  char firstChar=value.charAt(0);
  if (firstChar < '0') {
    if (firstChar == '-') {
      negative=true;
      limit=Long.MIN_VALUE;
    }
 else     if (firstChar != '+') {
      return defaultValue;
    }
    if (length == 1) {
      return defaultValue;
    }
    index++;
  }
  long smallerMin=limit / 10;
  long result=0;
  while (index < length) {
    if (result < smallerMin) {
      return defaultValue;
    }
    char ch=value.charAt(index++);
    if (ch < '0' || ch > '9') {
      return defaultValue;
    }
    int number=ch - '0';
    result*=10;
    if (result < limit + number) {
      return defaultValue;
    }
    result-=number;
  }
  return negative ? result : -result;
}
