{
  int length=value.length();
  if (length <= 0) {
    return defaultValue;
  }
  long result=0;
  boolean negative=false;
  int index=0;
  long limit=-Long.MAX_VALUE;
  long multmin;
  int digit;
  char firstChar=value.charAt(0);
  if (firstChar < '0') {
    if (firstChar == '-') {
      negative=true;
      limit=Long.MIN_VALUE;
    }
 else     if (firstChar != '+') {
      return defaultValue;
    }
    if (length == 1) {
      return defaultValue;
    }
    index++;
  }
  multmin=limit / 10;
  while (index < length) {
    digit=Character.digit(value.charAt(index++),10);
    if (digit < 0) {
      return defaultValue;
    }
    if (result < multmin) {
      return defaultValue;
    }
    result*=10;
    if (result < limit + digit) {
      return defaultValue;
    }
    result-=digit;
  }
  return negative ? result : -result;
}
