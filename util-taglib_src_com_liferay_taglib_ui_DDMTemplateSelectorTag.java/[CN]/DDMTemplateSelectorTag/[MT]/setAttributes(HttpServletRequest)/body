{
  String displayStyle=getDisplayStyle();
  long displayStyleGroupId=getDisplayStyleGroupId();
  DDMTemplate portletDisplayDDMTemplate=PortletDisplayTemplateUtil.getPortletDisplayTemplateDDMTemplate(displayStyleGroupId,PortalUtil.getClassNameId(_className),displayStyle,true);
  if (Validator.isNull(displayStyle) && (portletDisplayDDMTemplate != null)) {
    displayStyle=PortletDisplayTemplateUtil.getDisplayStyle(portletDisplayDDMTemplate.getTemplateKey());
  }
  request.setAttribute("liferay-ui:ddm-template-select:classNameId",String.valueOf(PortalUtil.getClassNameId(_className)));
  request.setAttribute("liferay-ui:ddm-template-select:displayStyle",displayStyle);
  request.setAttribute("liferay-ui:ddm-template-select:displayStyleGroupId",String.valueOf(displayStyleGroupId));
  request.setAttribute("liferay-ui:ddm-template-select:displayStyles",_displayStyles);
  request.setAttribute("liferay-ui:ddm-template-select:icon",_icon);
  request.setAttribute("liferay-ui:ddm-template-select:label",_label);
  request.setAttribute("liferay-ui:ddm-template-select:portletDisplayDDMTemplate",portletDisplayDDMTemplate);
  request.setAttribute("liferay-ui:ddm-template-select:refreshURL",_refreshURL);
  request.setAttribute("liferay-ui:ddm-template-select:showEmptyOption",String.valueOf(_showEmptyOption));
}
