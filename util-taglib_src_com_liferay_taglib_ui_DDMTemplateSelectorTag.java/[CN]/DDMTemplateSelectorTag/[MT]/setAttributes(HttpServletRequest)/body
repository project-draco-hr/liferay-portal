{
  if (_displayStyleGroupId == 0) {
    ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
    _displayStyleGroupId=themeDisplay.getScopeGroupId();
  }
  _portletDisplayDDMTemplate=PortletDisplayTemplateUtil.getPortletDisplayTemplateDDMTemplate(_displayStyleGroupId,PortalUtil.getClassNameId(_className),_displayStyle);
  if (_portletDisplayDDMTemplate == null) {
    _portletDisplayDDMTemplate=PortletDisplayTemplateUtil.getDefaultPortletDisplayTemplateDDMTemplate(_displayStyleGroupId,PortalUtil.getClassNameId(_className));
  }
  if (Validator.isNull(_displayStyle)) {
    _displayStyle=_defaultDisplayStyle;
  }
  if (Validator.isNull(_displayStyle) && (_portletDisplayDDMTemplate != null)) {
    _displayStyle=PortletDisplayTemplate.DISPLAY_STYLE_PREFIX + _portletDisplayDDMTemplate.getTemplateKey();
  }
  request.setAttribute("liferay-ui:ddm-template-select:classNameId",String.valueOf(PortalUtil.getClassNameId(_className)));
  request.setAttribute("liferay-ui:ddm-template-select:displayStyle",_displayStyle);
  request.setAttribute("liferay-ui:ddm-template-select:displayStyleGroupId",String.valueOf(_displayStyleGroupId));
  request.setAttribute("liferay-ui:ddm-template-select:displayStyles",_displayStyles);
  request.setAttribute("liferay-ui:ddm-template-select:icon",_icon);
  request.setAttribute("liferay-ui:ddm-template-select:label",_label);
  request.setAttribute("liferay-ui:ddm-template-select:portletDisplayDDMTemplate",_portletDisplayDDMTemplate);
  request.setAttribute("liferay-ui:ddm-template-select:refreshURL",_refreshURL);
  request.setAttribute("liferay-ui:ddm-template-select:showEmptyOption",String.valueOf(_showEmptyOption));
}
