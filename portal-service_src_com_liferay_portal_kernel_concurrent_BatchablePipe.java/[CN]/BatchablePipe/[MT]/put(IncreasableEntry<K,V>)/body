{
  K key=increasableEntry.getKey();
  while (true) {
    IncreasableEntryWrapper<K,V> previousIncreasableEntryWrapper=concurrentMap.putIfAbsent(key,new IncreasableEntryWrapper<K,V>(increasableEntry));
    if (previousIncreasableEntryWrapper == null) {
      queue.offer(increasableEntry);
      return true;
    }
    IncreasableEntry<K,V> previousIncreasableEntry=previousIncreasableEntryWrapper.increasableEntry;
    IncreasableEntry<K,V> newIncreasableEntry=increasableEntry.increase(previousIncreasableEntry.getValue());
    if (concurrentMap.replace(key,previousIncreasableEntryWrapper,new IncreasableEntryWrapper<K,V>(newIncreasableEntry))) {
      queue.offer(newIncreasableEntry);
      return false;
    }
  }
}
