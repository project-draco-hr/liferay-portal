{
  if (companyId == 0) {
    throw new IllegalArgumentException("Unable to determine company");
  }
  long systemEventId=counterLocalService.increment();
  SystemEvent systemEvent=systemEventPersistence.create(systemEventId);
  systemEvent.setGroupId(groupId);
  systemEvent.setCompanyId(companyId);
  systemEvent.setUserId(userId);
  systemEvent.setUserName(userName);
  systemEvent.setCreateDate(new Date());
  systemEvent.setClassName(className);
  systemEvent.setClassPK(classPK);
  systemEvent.setClassUuid(classUuid);
  systemEvent.setReferrerClassName(referrerClassName);
  systemEvent.setType(type);
  systemEvent.setExtraData(extraData);
  return systemEventPersistence.update(systemEvent);
}
