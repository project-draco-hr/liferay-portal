{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  String[] scopeIds=preferences.getValues("scopeIds",new String[]{AssetPublisherUtil.SCOPE_ID_GROUP_PREFIX + GroupConstants.DEFAULT});
  long groupId=ParamUtil.getLong(actionRequest,"groupId");
  Group selectedGroup=_groupLocalService.fetchGroup(groupId);
  String scopeId=AssetPublisherUtil.getScopeId(selectedGroup,themeDisplay.getScopeGroupId());
  checkPermission(actionRequest,scopeId);
  if (!ArrayUtil.contains(scopeIds,scopeId)) {
    scopeIds=ArrayUtil.append(scopeIds,scopeId);
  }
  preferences.setValues("scopeIds",scopeIds);
}
