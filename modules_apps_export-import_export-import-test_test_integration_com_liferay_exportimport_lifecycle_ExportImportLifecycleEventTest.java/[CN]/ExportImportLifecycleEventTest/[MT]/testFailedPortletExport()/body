{
  long plid=RandomTestUtil.nextLong();
  Map<String,Serializable> exportPortletSettingsMap=ExportImportConfigurationSettingsMapFactory.buildExportPortletSettingsMap(TestPropsValues.getUserId(),plid,_group.getGroupId(),StringPool.BLANK,_parameterMap,Locale.US,TimeZoneUtil.GMT,StringPool.BLANK);
  ExportImportConfiguration exportImportConfiguration=ExportImportConfigurationLocalServiceUtil.addExportImportConfiguration(TestPropsValues.getUserId(),0,RandomTestUtil.randomString(),StringPool.BLANK,ExportImportConfigurationConstants.TYPE_EXPORT_PORTLET,exportPortletSettingsMap,WorkflowConstants.STATUS_DRAFT,ServiceContextTestUtil.getServiceContext());
  try {
    ExportImportLocalServiceUtil.exportPortletInfoAsFile(exportImportConfiguration);
    Assert.fail();
  }
 catch (  NoSuchLayoutException nsle) {
    Assert.assertEquals("No Layout exists with the primary key " + plid,nsle.getMessage());
  }
  Assert.assertTrue(_firedExportImportLifecycleEventsMap.containsKey(ExportImportLifecycleConstants.EVENT_PORTLET_EXPORT_FAILED));
}
