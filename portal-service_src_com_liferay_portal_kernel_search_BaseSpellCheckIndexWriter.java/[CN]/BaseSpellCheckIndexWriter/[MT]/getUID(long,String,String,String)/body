{
  StringBundler uidSB=new StringBundler(5);
  uidSB.append(String.valueOf(companyId));
  uidSB.append(StringPool.UNDERLINE);
  uidSB.append(PortletKeys.SEARCH);
  uidSB.append(_PORTLET_SEPARATOR);
  int length=4;
  if (parameters != null) {
    length+=parameters.length;
  }
  try {
    CharsetEncoder charsetEncoder=CharsetEncoderUtil.getCharsetEncoder(StringPool.UTF8);
    StringBundler keySB=new StringBundler(length);
    keySB.append(languageId);
    keySB.append(StringPool.UNDERLINE);
    keySB.append(word);
    keySB.append(StringPool.UNDERLINE);
    keySB.append(StringUtil.toLowerCase(word));
    if (parameters != null) {
      for (      String parameter : parameters) {
        keySB.append(parameter);
        keySB.append(StringPool.UNDERLINE);
      }
    }
    String key=keySB.toString();
    byte[] bytes=DigesterUtil.digestRaw(Digester.MD5,charsetEncoder.encode(CharBuffer.wrap(key)));
    uidSB.append(Base64.encode(bytes));
  }
 catch (  Exception e) {
    throw new IllegalStateException(e);
  }
  return uidSB.toString();
}
