{
  StringBundler sb=new StringBundler();
  sb.append(String.valueOf(companyId));
  sb.append(StringPool.UNDERLINE);
  sb.append(PortletKeys.SEARCH);
  sb.append(_UID_PORTLET);
  int length=4;
  if (parameters != null) {
    length+=parameters.length;
  }
  StringBundler keyStringBundler=new StringBundler(length);
  keyStringBundler.append(languageId);
  keyStringBundler.append(StringPool.UNDERLINE);
  keyStringBundler.append(word);
  keyStringBundler.append(StringPool.UNDERLINE);
  keyStringBundler.append(word.toLowerCase());
  if (parameters != null) {
    for (    String parameter : parameters) {
      keyStringBundler.append(parameter);
      keyStringBundler.append(StringPool.UNDERLINE);
    }
  }
  String key=keyStringBundler.toString();
  try {
    MessageDigest messageDigest=MessageDigest.getInstance(_MD5_ALGORITHM);
    CharsetEncoder charsetEncoder=CharsetEncoderUtil.getCharsetEncoder(StringPool.UTF8);
    messageDigest.update(charsetEncoder.encode(CharBuffer.wrap(key)));
    byte[] bytes=messageDigest.digest();
    return Base64.encode(bytes);
  }
 catch (  Exception e) {
    throw new IllegalStateException(e);
  }
}
