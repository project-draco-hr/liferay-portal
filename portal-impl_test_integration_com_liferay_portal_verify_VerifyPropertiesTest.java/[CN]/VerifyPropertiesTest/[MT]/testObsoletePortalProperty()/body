{
  String[] originalObsoletePortalProperty=ReflectionTestUtil.getFieldValue(VerifyProperties.class,"_OBSOLETE_PORTAL_KEYS");
  String obsoletePortalPropertyKey=getFirstExistPortalPropertyName();
  ReflectionTestUtil.setFieldValue(VerifyProperties.class,"_OBSOLETE_PORTAL_KEYS",new String[]{obsoletePortalPropertyKey});
  try (CaptureAppender captureAppender=Log4JLoggerTestUtil.configureLog4JLogger(VerifyProperties.class.getName(),Level.ERROR)){
    doVerify();
    List<LoggingEvent> loggingEvents=captureAppender.getLoggingEvents();
    LoggingEvent loggingEvent=loggingEvents.get(0);
    Assert.assertEquals("Portal property \"" + obsoletePortalPropertyKey + "\" is obsolete",loggingEvent.getMessage().toString());
  }
  finally {
    ReflectionTestUtil.setFieldValue(VerifyProperties.class,"_OBSOLETE_PORTAL_KEYS",originalObsoletePortalProperty);
  }
}
