{
  try {
    if (_closed || (_eventCount == 0)) {
      return;
    }
    Path filePath=Files.createTempFile("manifest",".json");
    JSONUtil.writeValue(filePath.toFile(),_batchParameters);
    writeFilePathToZip(filePath,"manifest.json");
    _zipOutputStream.close();
    Map<String,Object> parameters=new HashMap<>();
    parameters.put("handlers",_handlers);
    SyncSite syncSite=SyncSiteService.fetchSyncSite(_syncSiteId);
    SyncFile syncFile=SyncFileService.fetchSyncFile(syncSite.getFilePathName());
    parameters.put("syncFile",syncFile);
    parameters.put("zipFilePath",_zipFilePath);
    UpdateFileEntriesEvent updateFileEntriesEvent=new UpdateFileEntriesEvent(_syncAccountId,parameters);
    updateFileEntriesEvent.run();
    _closed=true;
  }
 catch (  Exception e) {
    if (_logger.isDebugEnabled()) {
      _logger.debug(e.getMessage(),e);
    }
  }
}
