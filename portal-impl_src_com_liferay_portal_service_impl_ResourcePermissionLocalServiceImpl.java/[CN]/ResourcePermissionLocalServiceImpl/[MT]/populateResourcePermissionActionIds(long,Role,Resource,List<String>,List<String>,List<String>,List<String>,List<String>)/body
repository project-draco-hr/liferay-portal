{
  if (ResourceBlockLocalServiceUtil.isSupported(resource.getName())) {
    ResourceBlock resourceBlock=ResourceBlockLocalServiceUtil.getResourceBlock(resource.getName(),Long.valueOf(resource.getPrimKey()));
    individualActions.addAll(ResourceBlockLocalServiceUtil.getPermissions(resourceBlock,role.getRoleId()));
    groupActions.addAll(ResourceBlockLocalServiceUtil.getGroupScopePermissions(resourceBlock,role.getRoleId()));
    if (role.getType() == RoleConstants.TYPE_REGULAR) {
      companyActions.addAll(ResourceBlockLocalServiceUtil.getCompanyScopePermissions(resourceBlock,role.getRoleId()));
    }
 else {
      groupTemplateActions.addAll(ResourceBlockLocalServiceUtil.getCompanyScopePermissions(resourceBlock,role.getRoleId()));
    }
  }
 else {
    individualActions.addAll(getAvailableResourcePermissionActionIds(resource.getCompanyId(),resource.getName(),resource.getScope(),resource.getPrimKey(),role.getRoleId(),actions));
    groupActions.addAll(getAvailableResourcePermissionActionIds(resource.getCompanyId(),resource.getName(),ResourceConstants.SCOPE_GROUP,String.valueOf(groupId),role.getRoleId(),actions));
    groupTemplateActions.addAll(getAvailableResourcePermissionActionIds(resource.getCompanyId(),resource.getName(),ResourceConstants.SCOPE_GROUP_TEMPLATE,"0",role.getRoleId(),actions));
    companyActions.addAll(getAvailableResourcePermissionActionIds(resource.getCompanyId(),resource.getName(),ResourceConstants.SCOPE_COMPANY,String.valueOf(resource.getCompanyId()),role.getRoleId(),actions));
  }
}
