{
  List<Role> roles=rolePersistence.findByName(roleName);
  for (  Role role : roles) {
    List<ResourcePermission> resourcePermissions=resourcePermissionPersistence.findByN_S_R(resourceName,scope,role.getRoleId());
    for (    ResourcePermission resourcePermission : resourcePermissions) {
      long companyId=resourcePermission.getCompanyId();
      String primKey=resourcePermission.getPrimKey();
      List<String> actionIds=getAvailableResourcePermissionActionIds(companyId,resourceName,scope,primKey,role.getRoleId(),ResourceActionsUtil.getResourceActions(resourceName));
      if (actionIds == (List<?>)Collections.emptyList()) {
        actionIds=new ArrayList<String>();
      }
      actionIds.add(actionId);
      setResourcePermissions(companyId,resourceName,scope,primKey,role.getRoleId(),actionIds.toArray(new String[actionIds.size()]));
    }
  }
}
