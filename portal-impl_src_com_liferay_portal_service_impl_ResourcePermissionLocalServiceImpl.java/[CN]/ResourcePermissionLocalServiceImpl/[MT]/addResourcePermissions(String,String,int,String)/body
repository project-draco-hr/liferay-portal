{
  List<Role> roles=rolePersistence.findByName(roleName);
  for (  Role role : roles) {
    long companyId=role.getCompanyId();
    long roleId=role.getRoleId();
    List<String> primKeys=resourcePermissionFinder.findByC_N_S(companyId,resourceName,scope);
    for (    String primKey : primKeys) {
      List<String> actionIds=getAvailableResourcePermissionActionIds(companyId,resourceName,scope,primKey,roleId,ResourceActionsUtil.getResourceActions(resourceName));
      if (actionIds == (List<?>)Collections.emptyList()) {
        actionIds=new ArrayList<String>();
      }
      actionIds.add(actionId);
      setResourcePermissions(companyId,resourceName,scope,primKey,roleId,actionIds.toArray(new String[actionIds.size()]));
    }
  }
}
