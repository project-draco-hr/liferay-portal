{
  List<Role> roles=rolePersistence.findByName(roleName);
  for (  Role role : roles) {
    List<String> primKeys=resourcePermissionFinder.findByC_N_S(role.getCompanyId(),resourceName,scope);
    for (    String primKey : primKeys) {
      List<String> actionIds=getAvailableResourcePermissionActionIds(role.getCompanyId(),resourceName,scope,primKey,role.getRoleId(),ResourceActionsUtil.getResourceActions(resourceName));
      if (actionIds == (List<?>)Collections.emptyList()) {
        actionIds=new ArrayList<String>();
      }
      actionIds.add(actionId);
      setResourcePermissions(role.getCompanyId(),resourceName,scope,primKey,role.getRoleId(),actionIds.toArray(new String[actionIds.size()]));
    }
  }
}
