{
  ResourceAction resourceAction=resourceActionLocalService.getResourceAction(name,actionId);
  List<ResourcePermission> resourcePermissions=resourcePermissionPersistence.findByC_N_S_P(companyId,name,scope,primKey);
  boolean[] hasResourcePermissions=new boolean[roleIds.length];
  if (resourcePermissions.isEmpty()) {
    return hasResourcePermissions;
  }
  Set<Long> roleIdsSet=SetUtil.fromArray(roleIds);
  for (  ResourcePermission resourcePermission : resourcePermissions) {
    if (!roleIdsSet.contains(resourcePermission.getRoleId())) {
      continue;
    }
    if (hasActionId(resourcePermission,resourceAction)) {
      long roleId=resourcePermission.getRoleId();
      for (int i=0; i < roleIds.length; i++) {
        if (roleIds[i] == roleId) {
          hasResourcePermissions[i]=true;
          break;
        }
      }
    }
  }
  return hasResourcePermissions;
}
