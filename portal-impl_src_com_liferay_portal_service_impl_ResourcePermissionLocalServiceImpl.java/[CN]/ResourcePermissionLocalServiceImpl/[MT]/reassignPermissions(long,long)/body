{
  ResourcePermission resourcePermission=getResourcePermission(resourcePermissionId);
  long companyId=resourcePermission.getCompanyId();
  String name=resourcePermission.getName();
  int scope=resourcePermission.getScope();
  String primKey=resourcePermission.getPrimKey();
  long fromRoleId=resourcePermission.getRoleId();
  Role toRole=roleLocalService.getRole(toRoleId);
  List<String> actionIds=null;
  if (toRole.getType() == RoleConstants.TYPE_REGULAR) {
    actionIds=ResourceActionsUtil.getModelResourceActions(name);
  }
 else {
    actionIds=ResourceActionsUtil.getModelResourceGroupDefaultActions(name);
  }
  setResourcePermissions(companyId,name,scope,primKey,toRoleId,actionIds.toArray(new String[actionIds.size()]));
  resourcePermissionPersistence.remove(resourcePermissionId);
  List<ResourcePermission> resourcePermissions=getRoleResourcePermissions(fromRoleId);
  if (resourcePermissions.isEmpty()) {
    roleLocalService.deleteRole(fromRoleId);
  }
  PermissionCacheUtil.clearCache();
}
