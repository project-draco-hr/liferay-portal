{
  if (ArrayUtil.isEmpty(typePKs)) {
    return Collections.emptyList();
  }
  Session session=null;
  try {
    session=openSession();
    String sql=CustomSQLUtil.get(FIND_BY_TYPE_PKS);
    sql=StringUtil.replace(sql,new String[]{"[$TYPE_PKS$]","[$ROLE_IDS_OR_OWNER_ID$]"},new String[]{getTypePKsSQL(typePKs),getRoleOwnerIdsSQL(groupId,userId)});
    SQLQuery sqlQuery=session.createSynchronizedSQLQuery(sql);
    sqlQuery.addScalar("primKey",Type.LONG);
    QueryPos qPos=QueryPos.getInstance(sqlQuery);
    qPos.add(CompanyThreadLocal.getCompanyId());
    qPos.add(ResourceConstants.SCOPE_INDIVIDUAL);
    return (List<Long>)sqlQuery.list();
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
 finally {
    closeSession(session);
  }
}
