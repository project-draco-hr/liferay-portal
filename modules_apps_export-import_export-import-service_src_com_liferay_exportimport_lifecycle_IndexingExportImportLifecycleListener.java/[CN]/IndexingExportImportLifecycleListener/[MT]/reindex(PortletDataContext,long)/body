{
  boolean importPermissions=MapUtil.getBoolean(portletDataContext.getParameterMap(),PortletDataHandlerKeys.PERMISSIONS);
  if (importPermissions) {
    if (userId > 0) {
      Indexer<User> indexer=IndexerRegistryUtil.nullSafeGetIndexer(User.class);
      try {
        User user=_userLocalService.fetchUser(userId);
        if (user != null) {
          indexer.reindex(user);
        }
      }
 catch (      SearchException se) {
        if (_log.isDebugEnabled()) {
          _log.debug("Unable to reindex user " + userId,se);
        }
      }
    }
  }
  Indexer<PortletDataContext> portletDataContextIndexer=IndexerRegistryUtil.getIndexer(PortletDataContext.class);
  try {
    portletDataContextIndexer.reindex(portletDataContext);
  }
 catch (  SearchException se) {
    if (_log.isDebugEnabled()) {
      _log.debug("Unable to reindex portlet data context",se);
    }
  }
}
