{
  boolean hasPrivateAppsDir=false;
  int level=PLUGINS_MAX_DIR_LEVEL;
  if (portalSource) {
    File privateAppsDir=getFile("modules/private/apps",PORTAL_MAX_DIR_LEVEL);
    if (privateAppsDir != null) {
      hasPrivateAppsDir=true;
    }
    level=PORTAL_MAX_DIR_LEVEL;
  }
  Properties properties=new Properties();
  InputStream inputStream=new FileInputStream(fileName);
  properties.load(inputStream);
  Enumeration<String> enu=(Enumeration<String>)properties.propertyNames();
  while (enu.hasMoreElements()) {
    String key=enu.nextElement();
    if (!key.endsWith("excludes")) {
      continue;
    }
    String value=properties.getProperty(key);
    if (Validator.isNull(value)) {
      continue;
    }
    List<String> propertyFileNames=ListUtil.fromString(value,StringPool.COMMA);
    for (    String propertyFileName : propertyFileNames) {
      if (propertyFileName.contains(StringPool.STAR) || propertyFileName.endsWith("-ext.properties") || (portalSource && !hasPrivateAppsDir && propertyFileName.contains("/private/apps/"))) {
        continue;
      }
      int pos=propertyFileName.indexOf(CharPool.AT);
      if (pos != -1) {
        propertyFileName=propertyFileName.substring(0,pos);
      }
      File file=getFile(propertyFileName,level);
      if (file == null) {
        processMessage(fileName,"Property value '" + propertyFileName + "' points to file that does not exist");
      }
    }
  }
}
