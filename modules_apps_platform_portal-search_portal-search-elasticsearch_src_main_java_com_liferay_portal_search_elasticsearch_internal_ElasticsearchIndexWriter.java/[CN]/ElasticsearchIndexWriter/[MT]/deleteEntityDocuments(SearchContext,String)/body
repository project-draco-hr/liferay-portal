{
  SearchResponseScroller searchResponseScroller=null;
  try {
    Client client=_elasticsearchConnectionManager.getClient();
    MatchAllQueryBuilder matchAllQueryBuilder=QueryBuilders.matchAllQuery();
    TermQueryBuilder termQueryBuilder=QueryBuilders.termQuery(Field.ENTRY_CLASS_NAME,className);
    BoolQueryBuilder boolQueryBuilder=QueryBuilders.boolQuery();
    boolQueryBuilder.filter(termQueryBuilder);
    boolQueryBuilder.must(matchAllQueryBuilder);
    searchResponseScroller=new SearchResponseScroller(client,searchContext,indexNameBuilder,boolQueryBuilder,TimeValue.timeValueSeconds(30),DocumentTypes.LIFERAY);
    searchResponseScroller.prepare();
    searchResponseScroller.scroll(_searchHitsProcessor);
  }
 catch (  IndexNotFoundException infe) {
    if (_log.isInfoEnabled()) {
      _log.info("No index found while attempting to delete documents for " + className + " in index "+ indexNameBuilder.getIndexName(searchContext.getCompanyId()));
    }
  }
catch (  Exception e) {
    throw new SearchException("Unable to delete data for entity " + className,e);
  }
 finally {
    if (searchResponseScroller != null) {
      searchResponseScroller.close();
    }
  }
}
