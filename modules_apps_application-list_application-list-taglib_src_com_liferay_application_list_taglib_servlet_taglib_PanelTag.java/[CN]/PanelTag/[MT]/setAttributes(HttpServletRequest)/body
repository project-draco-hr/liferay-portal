{
  if (_panelCategory == null) {
    _panelCategory=RootPanelCategory.getInstance();
  }
  PanelCategoryRegistry panelCategoryRegistry=(PanelCategoryRegistry)request.getAttribute(ApplicationListWebKeys.PANEL_CATEGORY_REGISTRY);
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  List<PanelCategory> childPanelCategories=panelCategoryRegistry.getChildPanelCategories(_panelCategory,themeDisplay.getPermissionChecker(),themeDisplay.getScopeGroup());
  request.setAttribute("liferay-application-list:panel:childPanelCategories",childPanelCategories);
  request.setAttribute("liferay-application-list:panel:panelCategory",_panelCategory);
}
