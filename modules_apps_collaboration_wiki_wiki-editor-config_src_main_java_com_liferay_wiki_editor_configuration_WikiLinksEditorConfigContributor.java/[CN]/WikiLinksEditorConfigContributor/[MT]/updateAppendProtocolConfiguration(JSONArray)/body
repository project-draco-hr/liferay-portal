{
  JSONArray newButtonsJSONArray=JSONFactoryUtil.createJSONArray();
  for (int j=0; j < buttonsJSONArray.length(); j++) {
    JSONObject buttonJSONObject=buttonsJSONArray.getJSONObject(j);
    if (buttonJSONObject == null) {
      String buttonName=buttonsJSONArray.getString(j);
      if (buttonName.equals("link") || buttonName.equals("linkEdit")) {
        buttonJSONObject=getWikiLinkButtonJSONObject(buttonName);
        newButtonsJSONArray.put(buttonJSONObject);
      }
 else {
        newButtonsJSONArray.put(buttonName);
      }
    }
 else {
      String buttonName=buttonJSONObject.getString("name");
      if (buttonName.equals("link") || buttonName.equals("linkEdit")) {
        JSONObject config=buttonJSONObject.getJSONObject("cfg");
        if (config == null) {
          config=JSONFactoryUtil.createJSONObject();
          buttonJSONObject.put("cfg",config);
        }
        config.put("appendProtocol",false);
      }
      newButtonsJSONArray.put(buttonJSONObject);
    }
  }
  return newButtonsJSONArray;
}
