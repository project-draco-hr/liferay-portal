{
  AssetEntryQuery assetEntryQuery=new AssetEntryQuery();
  long[] allAssetCategoryIds=new long[0];
  long[] anyAssetCategoryIds=new long[0];
  long[] notAllAssetCategoryIds=new long[0];
  long[] notAnyAssetCategoryIds=new long[0];
  String[] allAssetTagNames=new String[0];
  String[] anyAssetTagNames=new String[0];
  String[] notAllAssetTagNames=new String[0];
  String[] notAnyAssetTagNames=new String[0];
  for (int i=0; true; i++) {
    String[] queryValues=portletPreferences.getValues("queryValues" + i,null);
    if ((queryValues == null) || (queryValues.length == 0)) {
      break;
    }
    boolean queryContains=GetterUtil.getBoolean(portletPreferences.getValue("queryContains" + i,StringPool.BLANK));
    boolean queryAndOperator=GetterUtil.getBoolean(portletPreferences.getValue("queryAndOperator" + i,StringPool.BLANK));
    String queryName=portletPreferences.getValue("queryName" + i,StringPool.BLANK);
    if (Validator.equals(queryName,"assetCategories")) {
      long[] assetCategoryIds=GetterUtil.getLongValues(queryValues);
      if (queryContains && (queryAndOperator || (assetCategoryIds.length == 1))) {
        allAssetCategoryIds=assetCategoryIds;
      }
 else       if (queryContains && !queryAndOperator) {
        anyAssetCategoryIds=assetCategoryIds;
      }
 else       if (!queryContains && queryAndOperator) {
        notAllAssetCategoryIds=assetCategoryIds;
      }
 else {
        notAnyAssetCategoryIds=assetCategoryIds;
      }
    }
 else {
      if (queryContains && queryAndOperator) {
        allAssetTagNames=queryValues;
      }
 else       if (queryContains && !queryAndOperator) {
        anyAssetTagNames=queryValues;
      }
 else       if (!queryContains && queryAndOperator) {
        notAllAssetTagNames=queryValues;
      }
 else {
        notAnyAssetTagNames=queryValues;
      }
    }
  }
  assetEntryQuery.setAllCategoryIds(allAssetCategoryIds);
  for (  String assetTagName : allAssetTagNames) {
    long[] allAssetTagIds=AssetTagLocalServiceUtil.getTagIds(scopeGroupIds,assetTagName);
    assetEntryQuery.addAllTagIdsArray(allAssetTagIds);
  }
  assetEntryQuery.setAnyCategoryIds(anyAssetCategoryIds);
  long[] anyAssetTagIds=AssetTagLocalServiceUtil.getTagIds(scopeGroupIds,anyAssetTagNames);
  assetEntryQuery.setAnyTagIds(anyAssetTagIds);
  assetEntryQuery.setNotAllCategoryIds(notAllAssetCategoryIds);
  for (  String assetTagName : notAllAssetTagNames) {
    long[] notAllAssetTagIds=AssetTagLocalServiceUtil.getTagIds(scopeGroupIds,assetTagName);
    assetEntryQuery.addNotAllTagIdsArray(notAllAssetTagIds);
  }
  assetEntryQuery.setNotAnyCategoryIds(notAnyAssetCategoryIds);
  long[] notAnyAssetTagIds=AssetTagLocalServiceUtil.getTagIds(scopeGroupIds,notAnyAssetTagNames);
  assetEntryQuery.setNotAnyTagIds(notAnyAssetTagIds);
  return assetEntryQuery;
}
