{
  List results=ListUtil.fromArray(assetEntryXmls);
  List<AssetEntry> viewableResults=new ArrayList<AssetEntry>();
  List<String> deletedAssets=new ArrayList<String>();
  for (int i=0; i < results.size(); i++) {
    String assetEntryXml=(String)results.get(i);
    Document document=SAXReaderUtil.read(assetEntryXml);
    Element rootElement=document.getRootElement();
    String assetEntryUuid=rootElement.elementText("asset-entry-uuid");
    AssetEntry assetEntry=null;
    for (    long groupId : groupIds) {
      assetEntry=AssetEntryLocalServiceUtil.fetchEntry(groupId,assetEntryUuid);
      if (assetEntry != null) {
        break;
      }
    }
    if ((assetEntry == null) || !assetEntry.isVisible()) {
      continue;
    }
    AssetRendererFactory assetRendererFactory=AssetRendererFactoryRegistryUtil.getAssetRendererFactoryByClassName(assetEntry.getClassName());
    AssetRenderer assetRenderer=assetRendererFactory.getAssetRenderer(assetEntry.getClassPK());
    if (isConfiguration) {
      if (!assetRendererFactory.isActive(permissionChecker.getCompanyId())) {
        deletedAssets.add(assetEntryUuid);
        continue;
      }
    }
 else     if (!assetRenderer.isDisplayable() || (checkPermission && !assetRenderer.hasViewPermission(permissionChecker))) {
      continue;
    }
    viewableResults.add(assetEntry);
  }
  return new Object[]{viewableResults,deletedAssets};
}
