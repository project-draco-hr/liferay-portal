{
  LayoutTestUtil.updateLayoutPortletPreference(prototypeLayout,portletId,"showAvailableLocales",Boolean.FALSE.toString());
  SitesUtil.resetPrototype(layout);
  SitesUtil.resetPrototype(_layout);
  propagateChanges(group);
  setLinkEnabled(true);
  layout=LayoutTestUtil.updateLayoutPortletPreference(layout,portletId,"showAvailableLocales",Boolean.TRUE.toString());
  Assert.assertTrue(SitesUtil.isLayoutModifiedSinceLastMerge(layout));
  Assert.assertFalse(SitesUtil.isLayoutModifiedSinceLastMerge(_layout));
  _layout=LayoutTestUtil.updateLayoutPortletPreference(_layout,_portletId,"showAvailableLocales",Boolean.TRUE.toString());
  layout=LayoutLocalServiceUtil.getLayout(layout.getPlid());
  SitesUtil.resetPrototype(layout);
  layout=propagateChanges(layout);
  Assert.assertFalse(SitesUtil.isLayoutModifiedSinceLastMerge(layout));
  PortletPreferences layoutPortletPreferences=LayoutTestUtil.getPortletPreferences(layout,portletId);
  Assert.assertEquals(Boolean.FALSE.toString(),layoutPortletPreferences.getValue("showAvailableLocales",StringPool.BLANK));
  _layout=propagateChanges(_layout);
  Assert.assertTrue(SitesUtil.isLayoutModifiedSinceLastMerge(_layout));
  layoutPortletPreferences=LayoutTestUtil.getPortletPreferences(_layout,_portletId);
  Assert.assertEquals(Boolean.TRUE.toString(),layoutPortletPreferences.getValue("showAvailableLocales",StringPool.BLANK));
}
