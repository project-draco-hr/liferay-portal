{
  if (Validator.isNull(version)) {
    return getMimeType();
  }
  try {
    for (    Document document : getAllVersions()) {
      if (!version.equals(document.getVersionLabel())) {
        continue;
      }
      String mimeType=document.getContentStreamMimeType();
      if (Validator.isNotNull(mimeType)) {
        return mimeType;
      }
      return MimeTypesUtil.getContentType(document.getName());
    }
  }
 catch (  PortalException pe) {
    _log.error(pe,pe);
  }
  return ContentTypes.APPLICATION_OCTET_STREAM;
}
