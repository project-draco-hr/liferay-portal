{
  _logger.log(org.apache.felix.utils.log.Logger.LOG_INFO,"Using " + outputStreamName + " as output");
  Writer writer=_writerThreadLocal.get();
  OutputStreamWriter outputStreamWriter=new OutputStreamWriter(outputStream,Charset.forName("UTF-8"));
  _writerThreadLocal.set(outputStreamWriter);
  try {
    runnable.run();
    outputStreamWriter.flush();
  }
 catch (  IOException ioe) {
    _logger.log(org.apache.felix.utils.log.Logger.LOG_ERROR,ioe.getLocalizedMessage());
  }
 finally {
    _writerThreadLocal.set(writer);
  }
}
