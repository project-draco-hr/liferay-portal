{
  List<Object> foldersAndFileEntriesAndFileShortcuts=_dlAppService.getFoldersAndFileEntriesAndFileShortcuts(repositoryId,folderId,WorkflowConstants.STATUS_APPROVED,false,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  for (  Object entry : foldersAndFileEntriesAndFileShortcuts) {
    if (entry instanceof Folder) {
      Folder folder=(Folder)entry;
      zipFolder(folder.getRepositoryId(),folder.getFolderId(),path.concat(StringPool.SLASH).concat(folder.getName()),zipWriter);
    }
 else     if (entry instanceof FileEntry) {
      FileEntry fileEntry=(FileEntry)entry;
      zipWriter.addEntry(path + StringPool.SLASH + HtmlUtil.escapeURL(fileEntry.getTitle()),fileEntry.getContentStream());
    }
  }
}
