{
  PortletProvider portletProvider=null;
  if (action.equals(PortletProvider.Action.ADD)) {
    portletProvider=_addServiceTrackerMap.getService(className);
    if (portletProvider == null) {
      portletProvider=_addServiceTrackerMap.getService(PortletProvider.CLASS_NAME_ANY);
    }
  }
 else   if (action.equals(PortletProvider.Action.BROWSE)) {
    portletProvider=_browseServiceTrackerMap.getService(className);
    if (portletProvider == null) {
      portletProvider=_browseServiceTrackerMap.getService(PortletProvider.CLASS_NAME_ANY);
    }
  }
 else   if (action.equals(PortletProvider.Action.VIEW)) {
    portletProvider=_viewServiceTrackerMap.getService(className);
    if (portletProvider == null) {
      portletProvider=_viewServiceTrackerMap.getService(PortletProvider.CLASS_NAME_ANY);
    }
  }
  if (portletProvider != null) {
    return portletProvider.getPortletId();
  }
  return StringPool.BLANK;
}
