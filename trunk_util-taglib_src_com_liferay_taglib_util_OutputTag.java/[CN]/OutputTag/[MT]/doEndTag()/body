{
  try {
    if (!_output) {
      return EVAL_PAGE;
    }
    if (isPositionInLine()) {
      JspWriter jspWriter=pageContext.getOut();
      StringBundler bodyContent=getBodyContentAsStringBundler();
      jspWriter.write(bodyContent.toString());
    }
 else {
      HttpServletRequest request=(HttpServletRequest)pageContext.getRequest();
      StringBundler sb=(StringBundler)request.getAttribute(_webKey);
      if (sb == null) {
        sb=new StringBundler();
        request.setAttribute(_webKey,sb);
      }
      sb.append(getBodyContentAsStringBundler());
    }
    return EVAL_PAGE;
  }
 catch (  Exception e) {
    throw new JspException(e);
  }
 finally {
    if (!ServerDetector.isResin()) {
      cleanUp();
    }
  }
}
