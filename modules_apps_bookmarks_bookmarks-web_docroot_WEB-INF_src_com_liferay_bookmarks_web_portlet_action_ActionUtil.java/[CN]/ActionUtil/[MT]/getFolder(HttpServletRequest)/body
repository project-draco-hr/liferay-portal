{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  long folderId=ParamUtil.getLong(request,"folderId");
  BookmarksFolder folder=null;
  if ((folderId > 0) && (folderId != BookmarksFolderConstants.DEFAULT_PARENT_FOLDER_ID)) {
    folder=BookmarksFolderServiceUtil.getFolder(folderId);
    if (folder.isInTrash()) {
      throw new NoSuchFolderException("{folderId=" + folderId + "}");
    }
  }
 else {
    BookmarksResourcePermissionChecker.check(themeDisplay.getPermissionChecker(),themeDisplay.getScopeGroupId(),ActionKeys.VIEW);
  }
  request.setAttribute(BookmarksWebKeys.BOOKMARKS_FOLDER,folder);
}
