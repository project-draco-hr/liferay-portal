{
  DynamicQuery dynamicQuery=DynamicQueryFactoryUtil.forClass(BookmarksFolder.class,PACLClassLoaderUtil.getPortalClassLoader());
  Projection minFolderIdProjection=ProjectionFactoryUtil.min("folderId");
  Projection maxFolderIdProjection=ProjectionFactoryUtil.max("folderId");
  ProjectionList projectionList=ProjectionFactoryUtil.projectionList();
  projectionList.add(minFolderIdProjection);
  projectionList.add(maxFolderIdProjection);
  dynamicQuery.setProjection(projectionList);
  addReindexCriteria(dynamicQuery,companyId);
  List<Object[]> results=BookmarksFolderLocalServiceUtil.dynamicQuery(dynamicQuery);
  Object[] minAndMaxFolderIds=results.get(0);
  if ((minAndMaxFolderIds[0] == null) || (minAndMaxFolderIds[1] == null)) {
    return;
  }
  long minFolderId=(Long)minAndMaxFolderIds[0];
  long maxFolderId=(Long)minAndMaxFolderIds[1];
  long startFolderId=minFolderId;
  long endFolderId=startFolderId + DEFAULT_INTERVAL;
  while (startFolderId <= maxFolderId) {
    reindexFolders(companyId,startFolderId,endFolderId);
    startFolderId=endFolderId;
    endFolderId+=DEFAULT_INTERVAL;
  }
}
