{
  Lock writeLock=_cometHandlerPoolRWLock.writeLock();
  try {
    writeLock.lock();
    String sessionId=cometSession.getSessionId();
    if (_cometHandlerPool.containsKey(sessionId)) {
      if (_log.isWarnEnabled()) {
        _log.warn("Initializing handler on CometProcessor with " + "live handler, closing original handler");
      }
      closeCometHandler(sessionId);
    }
    _cometHandlerPool.put(sessionId,cometHandler);
    cometHandler.init(cometSession);
  }
  finally {
    writeLock.unlock();
  }
}
