{
  Portlet portlet=ActionUtil.getPortlet(actionRequest);
  PortletPreferences portletPreferences=ActionUtil.getLayoutPortletSetup(actionRequest,portlet);
  actionRequest=ActionUtil.getWrappedActionRequest(actionRequest,portletPreferences);
  updateAnyWebsite(actionRequest,portletPreferences);
  updateFacebook(actionRequest,portletPreferences);
  updateFriends(actionRequest,portletPreferences);
  updateGoogleGadget(actionRequest,portletPreferences);
  updateNetvibes(actionRequest,portletPreferences);
  portletPreferences.store();
  if (!SessionErrors.isEmpty(actionRequest)) {
    return;
  }
  String portletResource=ParamUtil.getString(actionRequest,"portletResource");
  SessionMessages.add(actionRequest,PortalUtil.getPortletId(actionRequest) + SessionMessages.KEY_SUFFIX_REFRESH_PORTLET,portletResource);
  SessionMessages.add(actionRequest,PortalUtil.getPortletId(actionRequest) + SessionMessages.KEY_SUFFIX_UPDATED_CONFIGURATION);
}
