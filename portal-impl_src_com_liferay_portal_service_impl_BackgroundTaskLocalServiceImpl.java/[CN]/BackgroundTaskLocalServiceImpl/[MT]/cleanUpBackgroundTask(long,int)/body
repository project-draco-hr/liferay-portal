{
  final BackgroundTask backgroundTask=fetchBackgroundTask(backgroundTaskId);
  try {
    BackgroundTaskLockHelperUtil.unlockBackgroundTask(backgroundTask);
  }
 catch (  Exception e) {
  }
  TransactionCommitCallbackUtil.registerCallback(new Callable<Void>(){
    @Override public Void call() throws Exception {
      Message message=new Message();
      message.put("backgroundTaskId",backgroundTask.getBackgroundTaskId());
      message.put("name",backgroundTask.getName());
      message.put("status",status);
      message.put("taskExecutorClassName",backgroundTask.getTaskExecutorClassName());
      MessageBusUtil.sendMessage(DestinationNames.BACKGROUND_TASK_STATUS,message);
      return null;
    }
  }
);
}
