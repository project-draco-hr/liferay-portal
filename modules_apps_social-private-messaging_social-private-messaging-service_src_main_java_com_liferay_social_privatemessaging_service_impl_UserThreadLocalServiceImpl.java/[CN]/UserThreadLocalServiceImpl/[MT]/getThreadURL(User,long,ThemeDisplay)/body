{
  Group group=user.getGroup();
  long plid=PortalUtil.getPlidFromPortletId(group.getGroupId(),true,PrivateMessagingPortletKeys.PRIVATE_MESSAGING);
  Layout layout=layoutLocalService.fetchLayout(plid);
  if (layout == null) {
    throw new NoSuchLayoutException();
  }
  String privateMessageURL=PortalUtil.getLayoutFullURL(layout,themeDisplay,false);
  return privateMessageURL + "/-/private_messaging/thread/" + threadId;
}
