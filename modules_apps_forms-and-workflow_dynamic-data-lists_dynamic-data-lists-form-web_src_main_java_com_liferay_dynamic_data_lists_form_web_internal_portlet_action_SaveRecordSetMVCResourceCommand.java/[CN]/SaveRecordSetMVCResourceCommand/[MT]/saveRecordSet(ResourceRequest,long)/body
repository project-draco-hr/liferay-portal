{
  ThemeDisplay themeDisplay=(ThemeDisplay)resourceRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long recordSetId=ParamUtil.getLong(resourceRequest,"recordSetId");
  long groupId=ParamUtil.getLong(resourceRequest,"groupId");
  String recordSetKey=ParamUtil.getString(resourceRequest,"recordSetKey");
  String name=ParamUtil.getString(resourceRequest,"name");
  String description=ParamUtil.getString(resourceRequest,"description");
  ServiceContext serviceContext=ServiceContextFactory.getInstance(DDLRecordSet.class.getName(),resourceRequest);
  if (recordSetId != 0) {
    return ddlRecordSetService.updateRecordSet(recordSetId,ddmStructureId,getLocalizedMap(themeDisplay.getSiteDefaultLocale(),name),getLocalizedMap(themeDisplay.getSiteDefaultLocale(),description),DDLRecordSetConstants.MIN_DISPLAY_ROWS_DEFAULT,serviceContext);
  }
 else {
    return ddlRecordSetService.addRecordSet(groupId,ddmStructureId,recordSetKey,getLocalizedMap(themeDisplay.getSiteDefaultLocale(),name),getLocalizedMap(themeDisplay.getSiteDefaultLocale(),description),DDLRecordSetConstants.MIN_DISPLAY_ROWS_DEFAULT,DDLRecordSetConstants.SCOPE_FORMS,serviceContext);
  }
}
