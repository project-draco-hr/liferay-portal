{
  Map<String,Object> response=new HashMap<>();
  try {
    DDLRecordSet recordSet=saveRecordSetInTransaction(resourceRequest,resourceResponse);
    response.put("ddmStructureId",recordSet.getDDMStructureId());
    response.put("recordSetId",recordSet.getRecordSetId());
  }
 catch (  Throwable t) {
    resourceResponse.setProperty(ResourceResponse.HTTP_STATUS_CODE,String.valueOf(HttpServletResponse.SC_BAD_REQUEST));
    response.put("error",t.getMessage());
  }
  JSONSerializer jsonSerializer=jsonFactory.createJSONSerializer();
  PortletResponseUtil.write(resourceResponse,jsonSerializer.serializeDeep(response));
}
