{
  ExternalContext externalContext=facesContext.getExternalContext();
  Locale locale=externalContext.getRequestLocale();
  if (obj instanceof String) {
    String emailAddress=(String)obj;
    if (Validator.isNotNull(emailAddress)) {
      if (!EmailValidator.getInstance().isValid(emailAddress)) {
        String summary=LanguageUtil.get(locale,"please-enter-a-valid-email-address");
        FacesMessage facesMessage=new FacesMessage(FacesMessage.SEVERITY_ERROR,summary,null);
        throw new ValidatorException(facesMessage);
      }
    }
  }
 else {
    String summary=LanguageUtil.format(locale,"validator-expected-type-string,-but-instead-received-type-x",obj.getClass().getName());
    FacesMessage facesMessage=new FacesMessage(FacesMessage.SEVERITY_ERROR,summary,null);
    throw new ValidatorException(facesMessage);
  }
}
