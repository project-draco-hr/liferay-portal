{
  WebSocketContainer webSocketContainer=ContainerProvider.getWebSocketContainer();
  SynchronousQueue<Example> synchronousQueue=new SynchronousQueue<>();
  EncodeWebSocketClient encodeWebSocketClient=new EncodeWebSocketClient(synchronousQueue);
  StringBuilder sb=new StringBuilder();
  sb.append("ws://");
  sb.append(_url.getHost());
  sb.append(":");
  sb.append(_url.getPort());
  sb.append("/o/websocket/decoder");
  URI uri=new URI(sb.toString());
  webSocketContainer.connectToServer(encodeWebSocketClient,uri);
  encodeWebSocketClient.sendMessage(new Example(2,"echo"));
  Example example=synchronousQueue.poll(1,TimeUnit.HOURS);
  Assert.assertEquals("echo",example.getData());
  Assert.assertEquals(2,example.getNumber());
}
