{
  final TaskQueue<Object> taskQueue=new TaskQueue<>();
  final Object object=new Object();
  Assert.assertTrue(taskQueue.offer(object,new boolean[1]));
  Assert.assertSame(object,taskQueue.take());
  Thread thread=new Thread(){
    @Override public void run(){
      try {
        for (int i=0; i < 10; i++) {
          Assert.assertEquals(i,taskQueue.take());
        }
      }
 catch (      InterruptedException ie) {
        Assert.fail();
      }
      try {
        taskQueue.take();
        Assert.fail();
      }
 catch (      InterruptedException ie) {
      }
    }
  }
;
  thread.start();
  for (int i=0; i < 10; i++) {
    Assert.assertTrue(taskQueue.offer(i,new boolean[1]));
  }
  Thread.sleep(TestUtil.SHORT_WAIT);
  thread.interrupt();
  thread.join();
}
