{
  BundleServletContext bundleServletContext=(BundleServletContext)servletContext;
  Thread currentThread=Thread.currentThread();
  ClassLoader bundleClassLoader=bundleServletContext.getClassLoader();
  ClassLoader contextClassLoader=currentThread.getContextClassLoader();
  try {
    currentThread.setContextClassLoader(bundleClassLoader);
    RequestDispatcher requestDispatcher=bundleServletContext.getRequestDispatcher(requestURI);
    if (requestDispatcher != null) {
      requestDispatcher.forward(request,response);
      return;
    }
    if (requestURI.endsWith("/invoke") && Validator.isNotNull(portletId)) {
      super.service(request,response);
      return;
    }
    PortalUtil.sendError(HttpServletResponse.SC_NOT_FOUND,new IllegalArgumentException("No servlet or resource mapped to path: " + requestURI),request,response);
  }
  finally {
    currentThread.setContextClassLoader(contextClassLoader);
  }
}
