{
  MethodTargetClassKey methodTargetClassKey=new MethodTargetClassKey(method,targetClass);
  TransactionAttribute transactionAttribute=_transactionAttributes.get(methodTargetClassKey);
  if (transactionAttribute != null) {
    if (transactionAttribute == _nullTransactionAttribute) {
      return null;
    }
 else {
      return transactionAttribute;
    }
  }
  Transactional transactional=AnnotationLocator.locate(method,targetClass,Transactional.class);
  if (transactional != null) {
    transactionAttribute=TransactionAttributeBuilder.build(transactional);
  }
 else {
    @SuppressWarnings("deprecation") com.liferay.portal.kernel.annotation.Transactional oldTransactional=AnnotationLocator.locate(method,targetClass,com.liferay.portal.kernel.annotation.Transactional.class);
    transactionAttribute=TransactionAttributeBuilder.build(oldTransactional);
  }
  if (transactionAttribute == null) {
    _transactionAttributes.put(methodTargetClassKey,_nullTransactionAttribute);
  }
 else {
    _transactionAttributes.put(methodTargetClassKey,transactionAttribute);
  }
  return transactionAttribute;
}
