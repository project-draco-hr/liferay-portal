{
  CacheKey key=new CacheKey(method,targetClass);
  TransactionAttribute value=_cache.get(key);
  if (value != null) {
    if (value == _NULL_TRANSACTION_ATTRIBUTE) {
      return null;
    }
 else {
      return value;
    }
  }
 else {
    Queue<Class<?>> candidateQueue=new LinkedList<Class<?>>();
    if (targetClass == null) {
      candidateQueue.offer(method.getDeclaringClass());
    }
 else {
      candidateQueue.offer(targetClass);
    }
    Transactional annotation=_findTransactionAnnotation(method,candidateQueue);
    TransactionAttribute transactionAttribute=_parseTransactionAnnotation(annotation);
    if (transactionAttribute == null) {
      _cache.put(key,_NULL_TRANSACTION_ATTRIBUTE);
    }
 else {
      _cache.put(key,transactionAttribute);
    }
    return transactionAttribute;
  }
}
