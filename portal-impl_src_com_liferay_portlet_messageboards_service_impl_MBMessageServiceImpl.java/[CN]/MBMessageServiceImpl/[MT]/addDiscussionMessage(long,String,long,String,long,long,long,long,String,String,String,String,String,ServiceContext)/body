{
  User user=getGuestOrUser();
  MBDiscussionPermission.check(getPermissionChecker(),user.getCompanyId(),serviceContext.getScopeGroupId(),permissionClassName,permissionClassPK,permissionOwnerId,ActionKeys.ADD_DISCUSSION);
  return mbMessageLocalService.addDiscussionMessage(user.getUserId(),null,groupId,className,classPK,threadId,parentMessageId,subject,body,guestEmail,guestName,guestURL,serviceContext);
}
