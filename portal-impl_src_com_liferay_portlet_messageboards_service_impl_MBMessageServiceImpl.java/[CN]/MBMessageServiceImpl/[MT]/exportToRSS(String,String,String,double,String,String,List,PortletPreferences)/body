{
  SyndFeed syndFeed=new SyndFeedImpl();
  syndFeed.setFeedType(type + "_" + version);
  syndFeed.setTitle(name);
  syndFeed.setLink(feedURL);
  syndFeed.setDescription(description);
  List entries=new ArrayList();
  syndFeed.setEntries(entries);
  int rssContentLength=MBUtil.getRSSContentLength(prefs);
  Iterator itr=messages.iterator();
  while (itr.hasNext()) {
    MBMessage message=(MBMessage)itr.next();
    SyndEntry syndEntry=new SyndEntryImpl();
    if (!message.isAnonymous()) {
      String userName=MBUtil.getUserName(message.getUserId(),message.getUserName(),prefs);
      syndEntry.setAuthor(userName);
    }
    syndEntry.setTitle(message.getSubject());
    syndEntry.setLink(entryURL + "&messageId=" + message.getMessageId());
    syndEntry.setPublishedDate(message.getCreateDate());
    SyndContent syndContent=new SyndContentImpl();
    syndContent.setType("html");
    syndContent.setValue(message.getBody());
    syndEntry.setDescription(syndContent);
    entries.add(syndEntry);
  }
  try {
    return RSSUtil.export(syndFeed);
  }
 catch (  FeedException fe) {
    throw new SystemException(fe);
  }
catch (  IOException ioe) {
    throw new SystemException(ioe);
  }
}
