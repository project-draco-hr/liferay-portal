{
  Company company=companyPersistence.findByPrimaryKey(companyId);
  String name=company.getName();
  String description=company.getName();
  List<MBMessage> messages=new ArrayList<MBMessage>();
  MessageCreateDateComparator comparator=new MessageCreateDateComparator(false,false);
  Iterator<MBMessage> itr=mbMessageLocalService.getCompanyMessages(companyId,0,_MAX_END,comparator).iterator();
  while (itr.hasNext() && (messages.size() < max)) {
    MBMessage message=itr.next();
    long categoryId=message.getCategoryId();
    if (MBMessagePermission.contains(getPermissionChecker(),message,ActionKeys.VIEW) && MBCategoryPermission.contains(getPermissionChecker(),categoryId,ActionKeys.VIEW)) {
      messages.add(message);
    }
  }
  return exportToRSS(name,description,type,version,displayStyle,feedURL,entryURL,messages);
}
