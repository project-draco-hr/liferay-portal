{
  MBCategory category=MBCategoryLocalServiceUtil.getCategory(categoryId);
  String name=category.getName();
  String description=category.getDescription();
  List messages=new ArrayList();
  Iterator itr=MBMessageLocalServiceUtil.getCategoryMessages(categoryId,0,_MAX_END,new MessageCreateDateComparator(false)).iterator();
  while (itr.hasNext() && (messages.size() < max)) {
    MBMessage message=(MBMessage)itr.next();
    if (MBMessagePermission.contains(getPermissionChecker(),message,ActionKeys.VIEW)) {
      messages.add(message);
    }
  }
  return exportToRSS(name,description,type,version,feedURL,entryURL,messages,prefs);
}
