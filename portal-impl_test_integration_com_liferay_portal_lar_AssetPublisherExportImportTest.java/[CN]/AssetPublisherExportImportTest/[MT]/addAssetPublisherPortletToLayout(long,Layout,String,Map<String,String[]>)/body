{
  LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
  String assetPublisherPortletId=layoutTypePortlet.addPortletId(userId,PortletKeys.ASSET_PUBLISHER,columnId,-1);
  LayoutLocalServiceUtil.updateLayout(layout.getGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),layout.getTypeSettings());
  PortletPreferences portletPreferences=getPortletPreferences(layout.getCompanyId(),layout.getPlid(),assetPublisherPortletId);
  for (  String key : preferenceMap.keySet()) {
    portletPreferences.setValues(key,preferenceMap.get(key));
  }
  updatePortletPreferences(layout.getPlid(),assetPublisherPortletId,portletPreferences);
  return assetPublisherPortletId;
}
