{
  LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
  String assetPublisherPortletId=layoutTypePortlet.addPortletId(userId,PortletKeys.ASSET_PUBLISHER,columnId,-1);
  LayoutLocalServiceUtil.updateLayout(layout.getGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),layout.getTypeSettings());
  javax.portlet.PortletPreferences prefs=getPortletPreferences(layout.getCompanyId(),layout.getPlid(),assetPublisherPortletId);
  for (  String key : preferences.keySet()) {
    prefs.setValues(key,preferences.get(key));
  }
  updatePortletPreferences(layout.getPlid(),assetPublisherPortletId,prefs);
  return assetPublisherPortletId;
}
