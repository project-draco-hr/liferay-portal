{
  Company company=CompanyLocalServiceUtil.getCompany(_layout.getCompanyId());
  Layout secondLayout=ServiceTestUtil.addLayout(_group.getGroupId(),ServiceTestUtil.randomString());
  getScopeGroup(TestPropsValues.getUserId(),secondLayout);
  Map<String,String[]> preferences=new HashMap<String,String[]>();
  getScopeGroup(TestPropsValues.getUserId(),_layout);
  preferences.put("defaultScope",new String[]{Boolean.FALSE.toString()});
  preferences.put("scopeIds",new String[]{"GroupId_" + company.getGroup().getGroupId(),"LayoutUuid_" + _layout.getUuid(),"LayoutUuid_" + secondLayout.getUuid()});
  javax.portlet.PortletPreferences newPreferences=getImportedPortletPreferences(_layout,preferences);
  Layout importedSecondLayout=LayoutLocalServiceUtil.fetchLayoutByUuidAndGroupId(secondLayout.getUuid(),_importedGroup.getGroupId(),_importedLayout.isPrivateLayout());
  Assert.assertEquals(Boolean.FALSE.toString(),newPreferences.getValue("defaultScope",null));
  Assert.assertEquals("GroupId_" + company.getGroup().getGroupId() + ",LayoutUuid_"+ _importedLayout.getUuid()+ ",LayoutUuid_"+ importedSecondLayout.getUuid(),StringUtil.merge(newPreferences.getValues("scopeIds",null)));
  Assert.assertEquals(null,newPreferences.getValue("scopeId",null));
}
