{
  Company company=CompanyLocalServiceUtil.getCompany(_layout.getCompanyId());
  Layout secondLayout=ServiceTestUtil.addLayout(_group.getGroupId(),ServiceTestUtil.randomString());
  addGroup(TestPropsValues.getUserId(),secondLayout);
  Map<String,String[]> preferenceMap=new HashMap<String,String[]>();
  addGroup(TestPropsValues.getUserId(),_layout);
  preferenceMap.put("defaultScope",new String[]{Boolean.FALSE.toString()});
  Group companyGroup=company.getGroup();
  preferenceMap.put("scopeIds",new String[]{AssetPublisherUtil.SCOPE_ID_GROUP_PREFIX + companyGroup.getGroupId(),AssetPublisherUtil.SCOPE_ID_LAYOUT_UUID_PREFIX + _layout.getUuid(),AssetPublisherUtil.SCOPE_ID_LAYOUT_UUID_PREFIX + secondLayout.getUuid()});
  PortletPreferences portletPreferences=getImportedPortletPreferences(_layout,preferenceMap);
  Layout importedSecondLayout=LayoutLocalServiceUtil.fetchLayoutByUuidAndGroupId(secondLayout.getUuid(),_importedGroup.getGroupId(),_importedLayout.isPrivateLayout());
  Assert.assertEquals(Boolean.FALSE.toString(),portletPreferences.getValue("defaultScope",null));
  Assert.assertEquals(null,portletPreferences.getValue("scopeId",null));
  Assert.assertEquals(AssetPublisherUtil.SCOPE_ID_GROUP_PREFIX + companyGroup.getGroupId() + StringPool.COMMA+ AssetPublisherUtil.SCOPE_ID_LAYOUT_UUID_PREFIX+ _importedLayout.getUuid()+ StringPool.COMMA+ AssetPublisherUtil.SCOPE_ID_LAYOUT_UUID_PREFIX+ importedSecondLayout.getUuid(),StringUtil.merge(portletPreferences.getValues("scopeIds",null)));
}
