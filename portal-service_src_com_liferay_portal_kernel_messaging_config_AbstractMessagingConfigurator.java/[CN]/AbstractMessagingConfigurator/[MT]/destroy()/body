{
  disconnect();
  _messageBusEventListeners.clear();
  if (_messageBusEventListenerServiceRegistrar != null) {
    _messageBusEventListenerServiceRegistrar.destroy();
  }
  _destinationConfigurations.clear();
  if (_destinationConfigurationServiceRegistrar != null) {
    _destinationConfigurationServiceRegistrar.destroy();
  }
  _destinations.clear();
  if (_destinationServiceRegistrar != null) {
    _destinationServiceRegistrar.destroy(new ServiceFinalizer<Destination>(){
      @Override public void finalize(      ServiceReference<Destination> serviceReference,      Destination destination){
        destination.close();
        destination.removeDestinationEventListeners();
        destination.unregisterMessageListeners();
      }
    }
);
  }
  _messageListeners.clear();
  if (_messageListenerServiceRegistrar != null) {
    _messageListenerServiceRegistrar.destroy();
  }
  _destinationEventListeners.clear();
  if (_destinationEventListenerServiceRegistrar != null) {
    _destinationEventListenerServiceRegistrar.destroy();
  }
  ClassLoader operatingClassLoader=getOperatingClassloader();
  String servletContextName=ClassLoaderPool.getContextName(operatingClassLoader);
  MessagingConfiguratorRegistry.unregisterMessagingConfigurator(servletContextName,this);
}
