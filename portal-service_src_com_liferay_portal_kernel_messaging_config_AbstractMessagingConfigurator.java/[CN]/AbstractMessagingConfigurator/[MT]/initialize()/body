{
  Thread currentThread=Thread.currentThread();
  ClassLoader contextClassLoader=currentThread.getContextClassLoader();
  ClassLoader operatingClassLoader=getOperatingClassloader();
  if (contextClassLoader == operatingClassLoader) {
    _portalMessagingConfigurator=true;
  }
  registerMessageBusEventListeners();
  registerDestinationConfigurations();
  registerDestinations();
  registerDestinationEventListeners();
  connect();
  String servletContextName=ClassLoaderPool.getContextName(operatingClassLoader);
  if ((servletContextName != null) && !servletContextName.equals(StringPool.NULL)) {
    MessagingConfiguratorRegistry.registerMessagingConfigurator(servletContextName,this);
  }
}
