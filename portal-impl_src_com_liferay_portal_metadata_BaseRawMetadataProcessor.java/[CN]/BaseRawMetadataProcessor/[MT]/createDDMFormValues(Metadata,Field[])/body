{
  DDMForm ddmForm=new DDMForm();
  Set<Locale> availableLocales=new LinkedHashSet<>();
  Locale defaultLocale=LocaleUtil.getDefault();
  availableLocales.add(defaultLocale);
  ddmForm.setAvailableLocales(availableLocales);
  ddmForm.setDefaultLocale(defaultLocale);
  DDMFormValues ddmFormValues=new DDMFormValues(ddmForm);
  ddmFormValues.setAvailableLocales(availableLocales);
  ddmFormValues.setDefaultLocale(defaultLocale);
  for (  Field field : fields) {
    Class<?> fieldClass=field.getDeclaringClass();
    String fieldClassName=fieldClass.getSimpleName();
    String name=fieldClassName.concat(StringPool.UNDERLINE).concat(field.getName());
    String value=getMetadataValue(metadata,field);
    if (value == null) {
      continue;
    }
    DDMFormField ddmFormField=new DDMFormField(name,"text");
    ddmFormField.setDataType("string");
    ddmForm.addDDMFormField(ddmFormField);
    DDMFormFieldValue ddmFormFieldValue=new DDMFormFieldValue();
    ddmFormFieldValue.setName(name);
    ddmFormFieldValue.setValue(new UnlocalizedValue(value));
    ddmFormValues.addDDMFormFieldValue(ddmFormFieldValue);
  }
  return ddmFormValues;
}
