{
  Map<String,Fields> ddmFieldsMap=new HashMap<String,Fields>();
  if (metadata == null) {
    return ddmFieldsMap;
  }
  for (  String key : fieldsMap.keySet()) {
    Field[] fields=fieldsMap.get(key);
    Fields ddmFields=createDDMFields(metadata,fields);
    Set<String> names=ddmFields.getNames();
    if (names.isEmpty()) {
      continue;
    }
    ddmFieldsMap.put(key,ddmFields);
  }
  return ddmFieldsMap;
}
