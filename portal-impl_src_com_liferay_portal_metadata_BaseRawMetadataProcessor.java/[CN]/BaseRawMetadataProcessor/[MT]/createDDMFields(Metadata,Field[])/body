{
  Fields ddmFields=new Fields();
  for (  Field field : fields) {
    String value=getMetadataValue(metadata,field);
    if (value == null) {
      continue;
    }
    String fieldClassname=field.getDeclaringClass().getSimpleName();
    StringBundler sb=new StringBundler(3);
    sb.append(fieldClassname);
    sb.append(StringPool.UNDERLINE);
    sb.append(field.getName());
    com.liferay.portlet.dynamicdatamapping.storage.Field ddmField=new com.liferay.portlet.dynamicdatamapping.storage.Field(sb.toString(),value);
    ddmFields.put(ddmField);
  }
  return ddmFields;
}
