{
  Fields ddmFields=new Fields();
  for (  Field field : fields) {
    Class<?> fieldClass=field.getDeclaringClass();
    String fieldClassName=fieldClass.getSimpleName();
    String name=fieldClassName.concat(StringPool.UNDERLINE).concat(field.getName());
    String value=getMetadataValue(metadata,field);
    if (value == null) {
      continue;
    }
    com.liferay.portlet.dynamicdatamapping.storage.Field ddmField=new com.liferay.portlet.dynamicdatamapping.storage.Field(name,value);
    ddmFields.put(ddmField);
  }
  return ddmFields;
}
