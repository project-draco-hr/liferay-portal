{
  if (httpPrincipal == null || httpPrincipal.getUrl() == null) {
    return null;
  }
  URL url=null;
  if (Validator.isNotNull(httpPrincipal.getUserId()) || (httpPrincipal.getPassword() == null)) {
    url=new URL(httpPrincipal.getUrl() + "/tunnel-web/liferay/do");
  }
 else {
    url=new URL(httpPrincipal.getUrl() + "/tunnel-web/secure/liferay/do");
  }
  HttpURLConnection urlc=(HttpURLConnection)url.openConnection();
  urlc.setDoInput(true);
  urlc.setDoOutput(true);
  urlc.setUseCaches(false);
  urlc.setRequestMethod("POST");
  if (Validator.isNotNull(httpPrincipal.getUserId()) && (httpPrincipal.getPassword() != null)) {
    String userNameAndPassword=httpPrincipal.getUserId() + StringPool.COLON + httpPrincipal.getPassword();
    urlc.setRequestProperty(HttpHeaders.AUTHORIZATION,HttpServletRequest.BASIC_AUTH + StringPool.SPACE + Base64.encode(userNameAndPassword.getBytes()));
  }
  return urlc;
}
