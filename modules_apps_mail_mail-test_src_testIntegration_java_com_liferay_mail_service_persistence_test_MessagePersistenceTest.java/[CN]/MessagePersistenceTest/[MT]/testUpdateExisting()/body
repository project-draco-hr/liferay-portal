{
  long pk=RandomTestUtil.nextLong();
  Message newMessage=_persistence.create(pk);
  newMessage.setCompanyId(RandomTestUtil.nextLong());
  newMessage.setUserId(RandomTestUtil.nextLong());
  newMessage.setUserName(RandomTestUtil.randomString());
  newMessage.setCreateDate(RandomTestUtil.nextDate());
  newMessage.setModifiedDate(RandomTestUtil.nextDate());
  newMessage.setAccountId(RandomTestUtil.nextLong());
  newMessage.setFolderId(RandomTestUtil.nextLong());
  newMessage.setSender(RandomTestUtil.randomString());
  newMessage.setTo(RandomTestUtil.randomString());
  newMessage.setCc(RandomTestUtil.randomString());
  newMessage.setBcc(RandomTestUtil.randomString());
  newMessage.setSentDate(RandomTestUtil.nextDate());
  newMessage.setSubject(RandomTestUtil.randomString());
  newMessage.setPreview(RandomTestUtil.randomString());
  newMessage.setBody(RandomTestUtil.randomString());
  newMessage.setFlags(RandomTestUtil.randomString());
  newMessage.setSize(RandomTestUtil.nextLong());
  newMessage.setRemoteMessageId(RandomTestUtil.nextLong());
  newMessage.setContentType(RandomTestUtil.randomString());
  _messages.add(_persistence.update(newMessage));
  Message existingMessage=_persistence.findByPrimaryKey(newMessage.getPrimaryKey());
  Assert.assertEquals(existingMessage.getMessageId(),newMessage.getMessageId());
  Assert.assertEquals(existingMessage.getCompanyId(),newMessage.getCompanyId());
  Assert.assertEquals(existingMessage.getUserId(),newMessage.getUserId());
  Assert.assertEquals(existingMessage.getUserName(),newMessage.getUserName());
  Assert.assertEquals(Time.getShortTimestamp(existingMessage.getCreateDate()),Time.getShortTimestamp(newMessage.getCreateDate()));
  Assert.assertEquals(Time.getShortTimestamp(existingMessage.getModifiedDate()),Time.getShortTimestamp(newMessage.getModifiedDate()));
  Assert.assertEquals(existingMessage.getAccountId(),newMessage.getAccountId());
  Assert.assertEquals(existingMessage.getFolderId(),newMessage.getFolderId());
  Assert.assertEquals(existingMessage.getSender(),newMessage.getSender());
  Assert.assertEquals(existingMessage.getTo(),newMessage.getTo());
  Assert.assertEquals(existingMessage.getCc(),newMessage.getCc());
  Assert.assertEquals(existingMessage.getBcc(),newMessage.getBcc());
  Assert.assertEquals(Time.getShortTimestamp(existingMessage.getSentDate()),Time.getShortTimestamp(newMessage.getSentDate()));
  Assert.assertEquals(existingMessage.getSubject(),newMessage.getSubject());
  Assert.assertEquals(existingMessage.getPreview(),newMessage.getPreview());
  Assert.assertEquals(existingMessage.getBody(),newMessage.getBody());
  Assert.assertEquals(existingMessage.getFlags(),newMessage.getFlags());
  Assert.assertEquals(existingMessage.getSize(),newMessage.getSize());
  Assert.assertEquals(existingMessage.getRemoteMessageId(),newMessage.getRemoteMessageId());
  Assert.assertEquals(existingMessage.getContentType(),newMessage.getContentType());
}
