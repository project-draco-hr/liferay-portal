{
  List userOrgs=OrganizationServiceUtil.getUserOrganizations(userId);
  if (userOrgs.size() == 0) {
    return userOrgs;
  }
  List organizations=new ArrayList();
  Iterator itr=userOrgs.iterator();
  while (itr.hasNext()) {
    Organization organization=(Organization)itr.next();
    organizations.add(organization);
    if (!organization.isLocation()) {
      List recursableAncestorOrgs=OrganizationLocalServiceUtil.getRecursableAncestorOrganizations(organization.getOrganizationId());
      organizations.addAll(recursableAncestorOrgs);
    }
  }
  return organizations;
}
