{
  List userOrgs=OrganizationLocalServiceUtil.getUserOrganizations(userId);
  if (userOrgs.size() == 0) {
    return userOrgs;
  }
  List organizations=new UniqueList();
  Iterator itr=userOrgs.iterator();
  while (itr.hasNext()) {
    Organization organization=(Organization)itr.next();
    if (!organizations.contains(organization)) {
      organizations.add(organization);
      List ancestorOrganizations=OrganizationLocalServiceUtil.getParentOrganizations(organization.getOrganizationId());
      organizations.addAll(ancestorOrganizations);
    }
  }
  return organizations;
}
