{
  _resourceBundle=resourceBundle;
  if (resourceBundle != null) {
    _resourceBundles.add(resourceBundle);
  }
  if (languageId.isEmpty()) {
    setParent(ResourceBundleUtil.getBundle(_portlet.getResourceBundle(),LocaleUtil.fromLanguageId(languageId),_classLoader));
  }
 else {
    String parentLanguageId=StringPool.BLANK;
    int index=languageId.lastIndexOf(CharPool.UNDERLINE);
    if (index > 0) {
      parentLanguageId=languageId.substring(0,index);
    }
    setParent(getResourceBundle(parentLanguageId));
  }
}
