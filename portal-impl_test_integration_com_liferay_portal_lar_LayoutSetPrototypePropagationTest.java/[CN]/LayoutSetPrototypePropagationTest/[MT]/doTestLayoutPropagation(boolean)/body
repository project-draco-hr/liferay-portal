{
  setLinkEnabled(linkEnabled);
  Layout layout=LayoutTestUtil.addLayout(_layoutSetPrototypeGroup.getGroupId(),RandomTestUtil.randomString(FriendlyURLRandomizerBumper.INSTANCE),true);
  Assert.assertEquals(_initialPrototypeLayoutCount,getGroupLayoutCount());
  propagateChanges(group);
  if (linkEnabled) {
    Assert.assertEquals(_initialPrototypeLayoutCount + 1,getGroupLayoutCount());
  }
 else {
    Assert.assertEquals(_initialPrototypeLayoutCount,getGroupLayoutCount());
  }
  LayoutLocalServiceUtil.deleteLayout(layout,true,ServiceContextTestUtil.getServiceContext());
  if (linkEnabled) {
    Assert.assertEquals(_initialPrototypeLayoutCount + 1,getGroupLayoutCount());
  }
 else {
    Assert.assertEquals(_initialPrototypeLayoutCount,getGroupLayoutCount());
  }
  propagateChanges(group);
  Assert.assertEquals(_initialPrototypeLayoutCount,getGroupLayoutCount());
}
