{
  Layout layoutSetPrototypeLayout=LayoutTestUtil.addLayout(_layoutSetPrototypeGroup.getGroupId(),ServiceTestUtil.randomString(),true,_layoutPrototype,layoutSetLayoutLinkEnabled);
  layoutSetPrototypeLayout=propagateChanges(layoutSetPrototypeLayout);
  propagateChanges(_group);
  Layout layout=LayoutLocalServiceUtil.getFriendlyURLLayout(_group.getGroupId(),false,layoutSetPrototypeLayout.getFriendlyURL());
  LayoutTestUtil.updateLayoutTemplateId(_layoutPrototypeLayout,"1_column");
  if (layoutSetLayoutLinkEnabled) {
    Assert.assertEquals(_initialLayoutTemplateId,LayoutTestUtil.getLayoutTemplateId(layout));
  }
  layout=propagateChanges(layout);
  propagateChanges(_group);
  if (layoutSetLayoutLinkEnabled) {
    Assert.assertEquals("1_column",LayoutTestUtil.getLayoutTemplateId(layout));
  }
 else {
    Assert.assertEquals(_initialLayoutTemplateId,LayoutTestUtil.getLayoutTemplateId(layout));
  }
}
