{
  MergeLayoutPrototypesThreadLocal.clearMergeComplete();
  _layoutSetPrototypeLayout=LayoutTestUtil.addLayout(_layoutSetPrototypeGroup,true,layoutPrototype,layoutSetLayoutLinkEnabled);
  _layoutSetPrototypeLayout=propagateChanges(_layoutSetPrototypeLayout);
  propagateChanges(group);
  Layout layout=LayoutLocalServiceUtil.getFriendlyURLLayout(group.getGroupId(),false,_layoutSetPrototypeLayout.getFriendlyURL());
  LayoutTestUtil.updateLayoutTemplateId(layoutPrototypeLayout,"1_column");
  if (layoutSetLayoutLinkEnabled) {
    Assert.assertEquals(initialLayoutTemplateId,LayoutTestUtil.getLayoutTemplateId(layout));
  }
  layout=propagateChanges(layout);
  propagateChanges(group);
  if (layoutSetLayoutLinkEnabled) {
    Assert.assertEquals("1_column",LayoutTestUtil.getLayoutTemplateId(layout));
  }
 else {
    Assert.assertEquals(initialLayoutTemplateId,LayoutTestUtil.getLayoutTemplateId(layout));
  }
}
