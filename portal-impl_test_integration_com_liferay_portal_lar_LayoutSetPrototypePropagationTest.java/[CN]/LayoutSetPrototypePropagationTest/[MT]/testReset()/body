{
  SitesUtil.resetPrototype(layout);
  SitesUtil.resetPrototype(_layout);
  propagateChanges(group);
  layout=LayoutLocalServiceUtil.getLayout(layout.getPlid());
  layout.setLayoutPrototypeLinkEnabled(true);
  LayoutLocalServiceUtil.updateLayout(layout);
  _layout=LayoutLocalServiceUtil.getLayout(_layout.getPlid());
  _layout.setLayoutPrototypeLinkEnabled(true);
  LayoutLocalServiceUtil.updateLayout(_layout);
  layout=LayoutTestUtil.updateLayoutTemplateId(layout,"1_column");
  Assert.assertTrue(SitesUtil.isLayoutModifiedSinceLastMerge(layout));
  Assert.assertFalse(SitesUtil.isLayoutModifiedSinceLastMerge(_layout));
  _layout=LayoutTestUtil.updateLayoutTemplateId(_layout,"1_column");
  layout=LayoutLocalServiceUtil.getLayout(layout.getPlid());
  SitesUtil.resetPrototype(layout);
  layout=propagateChanges(layout);
  Assert.assertFalse(SitesUtil.isLayoutModifiedSinceLastMerge(layout));
  Assert.assertEquals(initialLayoutTemplateId,LayoutTestUtil.getLayoutTemplateId(layout));
  Assert.assertTrue(SitesUtil.isLayoutModifiedSinceLastMerge(_layout));
  Assert.assertEquals("1_column",LayoutTestUtil.getLayoutTemplateId(_layout));
}
