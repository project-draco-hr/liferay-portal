{
  try {
    LiferayPortletRequest liferayPortletRequest=PortalUtil.getLiferayPortletRequest(request);
    LiferayPortletResponse liferayPortletResponse=PortalUtil.getLiferayPortletResponse(response);
    long workflowTaskId=ParamUtil.getLong(request,ActionUtil.WORKFLOW_TASK_ID);
    if (workflowTaskId > 0) {
      ActionUtil.getWorkflowTask(liferayPortletRequest,workflowTaskId);
    }
 else {
      ActionUtil.searchWorkflowTasks(liferayPortletRequest,liferayPortletResponse);
    }
  }
 catch (  Exception e) {
    if (e instanceof WorkflowException) {
      SessionErrors.add(request,e.getClass());
      PortletSession portletSession=request.getPortletSession();
      PortletContext portletContext=portletSession.getPortletContext();
      PortletRequestDispatcher portletRequestDispatcher=portletContext.getRequestDispatcher("/error.jsp");
      portletRequestDispatcher.include(request,response);
    }
 else {
      throw new PortletException(e);
    }
  }
  super.render(request,response);
}
