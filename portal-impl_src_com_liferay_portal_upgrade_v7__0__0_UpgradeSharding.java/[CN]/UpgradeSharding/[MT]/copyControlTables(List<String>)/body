{
  try (LoggingTimer loggingTimer=new LoggingTimer()){
    List<String> uniqueShardNames=ListUtil.unique(shardNames);
    if (uniqueShardNames.size() == 1) {
      if (_log.isInfoEnabled()) {
        _log.info("All companies are located in the default shard, so " + "it's not necessary to copy the control tables.");
      }
      return;
    }
    String defaultShardName=PropsUtil.get("shard.default.name");
    if (Validator.isNull(defaultShardName)) {
      String shardNamesString=StringUtil.merge(shardNames,", ");
      throw new RuntimeException("The property \"shard.default.name\" is not set in " + "portal.properties. Please specify a default shard " + "name from: " + shardNamesString + ".");
    }
    for (    String uniqueShardName : uniqueShardNames) {
      if (!uniqueShardName.equals(defaultShardName)) {
        copyControlTables(uniqueShardName);
      }
    }
  }
 }
