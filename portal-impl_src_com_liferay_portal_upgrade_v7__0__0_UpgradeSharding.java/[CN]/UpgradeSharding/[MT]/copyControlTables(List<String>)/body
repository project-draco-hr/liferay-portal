{
  boolean defaultPartitioningEnabled=false;
  try (LoggingTimer loggingTimer=new LoggingTimer()){
    List<String> uniqueShardNames=ListUtil.unique(shardNames);
    if (uniqueShardNames.size() < shardNames.size()) {
      defaultPartitioningEnabled=true;
    }
    String defaultShardName=PropsUtil.get("shard.default.name");
    if (!defaultPartitioningEnabled && Validator.isNull(defaultShardName)) {
      throw new RuntimeException("The property \"shard.default.name\" is not set in " + "portal.properties. Please specify a default shard " + "name from: " + StringUtil.merge(shardNames,", ") + ".");
    }
    for (    String uniqueShardName : uniqueShardNames) {
      if (!uniqueShardName.equals(defaultShardName)) {
        copyControlTables(uniqueShardName);
      }
    }
  }
 }
