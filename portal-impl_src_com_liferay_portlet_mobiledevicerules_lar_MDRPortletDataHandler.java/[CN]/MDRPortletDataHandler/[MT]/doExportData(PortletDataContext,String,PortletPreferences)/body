{
  portletDataContext.addPortletPermissions(MDRPermission.RESOURCE_NAME);
  Element rootElement=addExportDataRootElement(portletDataContext);
  if (portletDataContext.getBooleanParameter(NAMESPACE,"rules")) {
    ActionableDynamicQuery rulesActionableDynamicQuery=MDRRuleLocalServiceUtil.getExportActionableDynamicQuery(portletDataContext);
    rulesActionableDynamicQuery.performActions();
  }
  if (portletDataContext.getBooleanParameter(NAMESPACE,"actions")) {
    ExportActionableDynamicQuery actionsExportActionableDynamicQuery=MDRActionLocalServiceUtil.getExportActionableDynamicQuery(portletDataContext);
    actionsExportActionableDynamicQuery.setStagedModelType(new StagedModelType(PortalUtil.getClassNameId(MDRAction.class),StagedModelType.REFERRER_CLASS_NAME_ID_ALL));
    actionsExportActionableDynamicQuery.performActions();
  }
  return getExportDataRootElementString(rootElement);
}
