{
  User user=userPersistence.findByPrimaryKey(userId);
  Date birthday=PortalUtil.getDate(birthdayMonth,birthdayDay,birthdayYear,ContactBirthdayException.class);
  Date now=new Date();
  validate(className,classPK);
  long contactId=counterLocalService.increment();
  Contact contact=contactPersistence.create(contactId);
  contact.setCompanyId(user.getCompanyId());
  contact.setUserId(user.getUserId());
  contact.setUserName(user.getFullName());
  contact.setCreateDate(now);
  contact.setModifiedDate(now);
  contact.setClassName(className);
  contact.setClassPK(classPK);
  contact.setEmailAddress(emailAddress);
  contact.setFirstName(firstName);
  contact.setMiddleName(middleName);
  contact.setLastName(lastName);
  contact.setPrefixId(prefixId);
  contact.setSuffixId(suffixId);
  contact.setMale(male);
  contact.setBirthday(birthday);
  contact.setSmsSn(smsSn);
  contact.setAimSn(aimSn);
  contact.setFacebookSn(facebookSn);
  contact.setIcqSn(icqSn);
  contact.setJabberSn(jabberSn);
  contact.setMsnSn(msnSn);
  contact.setMySpaceSn(mySpaceSn);
  contact.setSkypeSn(skypeSn);
  contact.setTwitterSn(twitterSn);
  contact.setYmSn(ymSn);
  contact.setJobTitle(jobTitle);
  contactPersistence.update(contact,false);
  return contact;
}
