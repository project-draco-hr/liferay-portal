{
  IndicesAdminClient indicesAdminClient=adminClient.indices();
  if (hasIndex(indicesAdminClient,companyId)) {
    return;
  }
  CreateIndexRequestBuilder createIndexRequestBuilder=indicesAdminClient.prepareCreate(String.valueOf(companyId));
  for (  Map.Entry<String,String> entry : _typeMappings.entrySet()) {
    Class<?> clazz=getClass();
    String typeMapping=StringUtil.read(clazz.getClassLoader(),entry.getValue());
    createIndexRequestBuilder.addMapping(entry.getKey(),typeMapping);
  }
  Future<CreateIndexResponse> future=createIndexRequestBuilder.execute();
  CreateIndexResponse createIndexResponse=future.get();
  if (_log.isInfoEnabled()) {
    StringOutputStream stringOutputStream=new StringOutputStream();
    createIndexResponse.writeTo(new OutputStreamStreamOutput(stringOutputStream));
    _log.info(stringOutputStream);
  }
}
