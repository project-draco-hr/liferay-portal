{
  IndicesAdminClient indicesAdminClient=adminClient.indices();
  IndicesExistsRequestBuilder indicesExistsRequestBuilder=indicesAdminClient.prepareExists(String.valueOf(companyId));
  Future<IndicesExistsResponse> indicesExistsRequestFuture=indicesExistsRequestBuilder.execute();
  IndicesExistsResponse indicesExistsResponse=indicesExistsRequestFuture.get();
  if (indicesExistsResponse.isExists()) {
    return;
  }
  CreateIndexRequestBuilder createIndexRequestBuilder=indicesAdminClient.prepareCreate(String.valueOf(companyId));
  for (  Map.Entry<String,String> entry : _typeMappings.entrySet()) {
    Class<?> clazz=getClass();
    String typeMapping=StringUtil.read(clazz.getClassLoader(),entry.getValue());
    createIndexRequestBuilder.addMapping(entry.getKey(),typeMapping);
  }
  Future<CreateIndexResponse> createIndexFuture=createIndexRequestBuilder.execute();
  CreateIndexResponse createIndexResponse=createIndexFuture.get();
  if (_log.isInfoEnabled()) {
    StringOutputStream stringOutputStream=new StringOutputStream();
    createIndexResponse.writeTo(new OutputStreamStreamOutput(stringOutputStream));
    _log.info(stringOutputStream);
  }
}
