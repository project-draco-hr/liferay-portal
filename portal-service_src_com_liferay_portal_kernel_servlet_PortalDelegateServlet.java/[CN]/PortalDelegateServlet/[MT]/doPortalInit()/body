{
  ServletContext servletContext=_servletConfig.getServletContext();
  ClassLoader classLoader=(ClassLoader)servletContext.getAttribute(PluginContextListener.PLUGIN_CLASS_LOADER);
  String servletClass=_servletConfig.getInitParameter("servlet-class");
  _subContext=_servletConfig.getInitParameter("sub-context");
  if (_subContext == null) {
    _subContext=getServletName();
  }
  _servlet=(Servlet)InstanceFactory.newInstance(classLoader,servletClass);
  if (!(_servlet instanceof HttpServlet)) {
    throw new IllegalArgumentException("servlet-class is not an instance of " + "javax.servlet.http.HttpServlet");
  }
  _servlet.init(_servletConfig);
  PortalDelegatorServlet.addDelegate(_subContext,(HttpServlet)_servlet);
}
