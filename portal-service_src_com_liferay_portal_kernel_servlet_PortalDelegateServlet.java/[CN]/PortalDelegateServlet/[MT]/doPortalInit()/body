{
  ServletContext servletContext=servletConfig.getServletContext();
  ClassLoader classLoader=servletContext.getClassLoader();
  String servletClass=servletConfig.getInitParameter("servlet-class");
  _subContext=servletConfig.getInitParameter("sub-context");
  if (_subContext == null) {
    _subContext=getServletName();
  }
  servlet=(Servlet)InstanceFactory.newInstance(classLoader,servletClass);
  if (!(servlet instanceof HttpServlet)) {
    throw new IllegalArgumentException("servlet-class is not an instance of " + HttpServlet.class.getName());
  }
  servlet.init(servletConfig);
  PortalDelegatorServlet.addDelegate(_subContext,(HttpServlet)servlet);
}
