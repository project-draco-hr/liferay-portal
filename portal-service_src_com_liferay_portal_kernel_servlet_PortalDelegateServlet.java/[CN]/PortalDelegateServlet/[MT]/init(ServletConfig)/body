{
  String servletClass=servletConfig.getInitParameter("servlet-class");
  _subContext=servletConfig.getInitParameter("sub-context");
  if (_subContext == null) {
    _subContext=getServletName();
  }
  try {
    Thread currentThread=Thread.currentThread();
    ClassLoader contextClassLoader=currentThread.getContextClassLoader();
    HttpServlet servlet=(HttpServlet)contextClassLoader.loadClass(servletClass).newInstance();
    servlet.init(servletConfig);
    PortalDelegatorServlet.addDelegate(_subContext,servlet);
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
}
