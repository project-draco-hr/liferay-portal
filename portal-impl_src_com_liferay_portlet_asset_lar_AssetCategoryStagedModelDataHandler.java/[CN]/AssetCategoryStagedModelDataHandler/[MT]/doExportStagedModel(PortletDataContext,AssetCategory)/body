{
  if (category.getParentCategoryId() != AssetCategoryConstants.DEFAULT_PARENT_CATEGORY_ID) {
    AssetCategory parentCategory=AssetCategoryLocalServiceUtil.fetchAssetCategory(category.getParentCategoryId());
    StagedModelDataHandlerUtil.exportReferenceStagedModel(portletDataContext,category,parentCategory,PortletDataContext.REFERENCE_TYPE_PARENT);
  }
 else {
    AssetVocabulary assetVocabulary=AssetVocabularyLocalServiceUtil.fetchAssetVocabulary(category.getVocabularyId());
    StagedModelDataHandlerUtil.exportReferenceStagedModel(portletDataContext,category,assetVocabulary,PortletDataContext.REFERENCE_TYPE_PARENT);
  }
  Element categoryElement=portletDataContext.getExportDataElement(category);
  category.setUserUuid(category.getUserUuid());
  List<AssetCategoryProperty> categoryProperties=AssetCategoryPropertyLocalServiceUtil.getCategoryProperties(category.getCategoryId());
  for (  AssetCategoryProperty categoryProperty : categoryProperties) {
    Element propertyElement=categoryElement.addElement("property");
    propertyElement.addAttribute("userUuid",categoryProperty.getUserUuid());
    propertyElement.addAttribute("key",categoryProperty.getKey());
    propertyElement.addAttribute("value",categoryProperty.getValue());
  }
  String categoryPath=ExportImportPathUtil.getModelPath(category);
  categoryElement.addAttribute("path",categoryPath);
  portletDataContext.addPermissions(AssetCategory.class,category.getCategoryId());
  portletDataContext.addZipEntry(categoryPath,category);
}
