{
  try {
    ServletContext servletContext=getServletContext();
    HttpServletRequest request=getServletRequest();
    StringServletResponse stringResponse=getServletResponse();
    Theme theme=(Theme)request.getAttribute(WebKeys.THEME);
    if (isTheme()) {
      ThemeUtil.include(servletContext,request,stringResponse,pageContext,getTop(),theme);
    }
 else {
      RequestDispatcher requestDispatcher=servletContext.getRequestDispatcher(getTop());
      requestDispatcher.include(request,stringResponse);
    }
    pageContext.getOut().print(stringResponse.getString());
    pageContext.getOut().print(_bodyContentString);
    stringResponse.recycle();
    if (isTheme()) {
      ThemeUtil.include(servletContext,request,stringResponse,pageContext,getBottom(),theme);
    }
 else {
      RequestDispatcher requestDispatcher=servletContext.getRequestDispatcher(getBottom());
      requestDispatcher.include(request,stringResponse);
    }
    pageContext.getOut().print(stringResponse.getString());
    return EVAL_PAGE;
  }
 catch (  Exception e) {
    throw new JspException(e);
  }
 finally {
    clearParams();
    clearProperties();
  }
}
