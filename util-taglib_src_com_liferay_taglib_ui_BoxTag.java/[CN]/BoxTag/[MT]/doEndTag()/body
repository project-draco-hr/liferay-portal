{
  try {
    ServletContext ctx=getServletContext();
    HttpServletRequest req=getServletRequest();
    StringServletResponse res=getServletResponse();
    Theme theme=(Theme)req.getAttribute(WebKeys.THEME);
    if (isTheme()) {
      ThemeUtil.include(ctx,req,res,pageContext,getTop(),theme);
    }
 else {
      RequestDispatcher rd=ctx.getRequestDispatcher(getTop());
      rd.include(req,res);
    }
    pageContext.getOut().print(res.getString());
    pageContext.getOut().print(_bodyContentString);
    res.recycle();
    if (isTheme()) {
      ThemeUtil.include(ctx,req,res,pageContext,getBottom(),theme);
    }
 else {
      RequestDispatcher rd=ctx.getRequestDispatcher(getBottom());
      rd.include(req,res);
    }
    pageContext.getOut().print(res.getString());
    return EVAL_PAGE;
  }
 catch (  Exception e) {
    throw new JspException(e);
  }
 finally {
    clearParams();
    clearProperties();
  }
}
