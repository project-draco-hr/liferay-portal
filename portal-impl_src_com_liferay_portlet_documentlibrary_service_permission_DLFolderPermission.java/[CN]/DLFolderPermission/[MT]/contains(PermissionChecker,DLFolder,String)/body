{
  if (actionId.equals(ActionKeys.ADD_FOLDER)) {
    actionId=ActionKeys.ADD_SUBFOLDER;
  }
  String portletId=PortletProviderUtil.getPortletId(Folder.class.getName(),PortletProvider.Action.EDIT);
  Boolean hasPermission=StagingPermissionUtil.hasPermission(permissionChecker,dlFolder.getGroupId(),DLFolder.class.getName(),dlFolder.getFolderId(),portletId,actionId);
  if (hasPermission != null) {
    return hasPermission.booleanValue();
  }
  if (actionId.equals(ActionKeys.VIEW) && PropsValues.PERMISSIONS_VIEW_DYNAMIC_INHERITANCE) {
    try {
      long dlFolderId=dlFolder.getFolderId();
      while (dlFolderId != DLFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
        dlFolder=DLFolderLocalServiceUtil.getFolder(dlFolderId);
        if (!_hasPermission(permissionChecker,dlFolder,actionId)) {
          return false;
        }
        dlFolderId=dlFolder.getParentFolderId();
      }
    }
 catch (    NoSuchFolderException nsfe) {
      if (!dlFolder.isInTrash()) {
        throw nsfe;
      }
    }
    return DLPermission.contains(permissionChecker,dlFolder.getGroupId(),actionId);
  }
  return _hasPermission(permissionChecker,dlFolder,actionId);
}
