{
  for (  Map.Entry<String,ThreadPoolExecutor> entry : _threadPoolExecutors.entrySet()) {
    String name=entry.getKey();
    ThreadPoolExecutor threadPoolExecutor=entry.getValue();
    try {
      SecurityManager securityManager=System.getSecurityManager();
      if (securityManager != null) {
        Permission permission=new PortalRuntimePermission(PACLConstants.PORTAL_RUNTIME_PERMISSION_THREAD_POOL_EXECUTOR,name);
        securityManager.checkPermission(permission);
      }
    }
 catch (    SecurityException se) {
      _log.error(se,se);
      continue;
    }
    if (interrupt) {
      threadPoolExecutor.shutdownNow();
    }
 else {
      threadPoolExecutor.shutdown();
    }
  }
  _threadPoolExecutors.clear();
}
