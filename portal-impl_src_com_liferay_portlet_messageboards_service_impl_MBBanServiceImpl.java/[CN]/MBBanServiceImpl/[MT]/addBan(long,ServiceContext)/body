{
  PermissionChecker permissionChecker=getPermissionChecker();
  MBPermission.check(permissionChecker,serviceContext.getScopeGroupId(),ActionKeys.BAN_USER);
  User banUser=userLocalService.getUser(banUserId);
  if (PortalUtil.isCommunityAdmin(banUser,serviceContext.getScopeGroupId())) {
    throw new PrincipalException();
  }
  return mbBanLocalService.addBan(getUserId(),banUserId,serviceContext);
}
