{
  PreparedStatement ps=null;
  ResultSet rs=null;
  try {
    ps=connection.prepareStatement("select companyId, scope, primKey " + "from ResourcePermission where name = '" + _DOCUMENT_LIBRARY_PORTLET + "'");
    rs=ps.executeQuery();
    while (rs.next()) {
      PreparedStatement ps2=null;
      try {
        ps2=connection.prepareStatement("delete from ResourcePermission where name = ? " + "and companyId = ? and scope = ? and primKey = ?");
        ps2.setString(1,_DL_DISPLAY_PORTLET);
        ps2.setString(2,rs.getString("companyId"));
        ps2.setString(3,rs.getString("scope"));
        ps2.setString(4,rs.getString("primKey"));
        ps2.execute();
      }
  finally {
        DataAccess.cleanUp(ps2);
      }
    }
  }
  finally {
    DataAccess.cleanUp(ps,rs);
  }
}
