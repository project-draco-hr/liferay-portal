{
  TestInstance testInstance=new TestInstance();
  ReflectionServiceTracker reflectionServiceTracker=new ReflectionServiceTracker(testInstance);
  TrackedOne trackedOne=new TrackedOne();
  ServiceRegistration<TrackedOne> sr1=registerService(TrackedOne.class,trackedOne,2);
  TrackedTwo trackedTwo=new TrackedTwo();
  ServiceRegistration<TrackedTwo> sr2=registerService(TrackedTwo.class,trackedTwo,2);
  TrackedOne trackedOne2=new TrackedOne();
  ServiceRegistration<TrackedOne> sr3=registerService(TrackedOne.class,trackedOne2,1);
  TrackedTwo trackedTwo2=new TrackedTwo();
  ServiceRegistration<TrackedTwo> sr4=registerService(TrackedTwo.class,trackedTwo2,1);
  sr3.unregister();
  sr4.unregister();
  Assert.assertNull(testInstance.getTrackedOne());
  Assert.assertNull(testInstance.getTrackedTwo());
  sr1.unregister();
  sr2.unregister();
  reflectionServiceTracker.close();
}
