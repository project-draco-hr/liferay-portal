{
  WikiPage page=(WikiPage)obj;
  Document document=getBaseModelDocument(PORTLET_ID,page);
  document.addUID(PORTLET_ID,page.getNodeId(),page.getTitle());
  String content=HtmlUtil.extractText(WikiUtil.convert(page,null,null,null));
  document.addText(Field.CONTENT,content);
  document.addKeyword(Field.NODE_ID,page.getNodeId());
  document.addText(Field.TITLE,page.getTitle());
  if (!page.isInTrash() && page.isInTrashNode()) {
    addTrashFields(document,WikiNode.class.getName(),page.getNodeId(),null,null,WikiPageAssetRendererFactory.TYPE);
    document.addKeyword(Field.ROOT_ENTRY_CLASS_NAME,WikiNode.class.getName());
    document.addKeyword(Field.ROOT_ENTRY_CLASS_PK,page.getNodeId());
    document.addKeyword(Field.STATUS,WorkflowConstants.STATUS_IN_TRASH);
  }
  return document;
}
