{
  int status=GetterUtil.getInteger(searchContext.getAttribute(Field.STATUS),WorkflowConstants.STATUS_APPROVED);
  if (status != WorkflowConstants.STATUS_ANY) {
    contextQuery.addRequiredTerm(Field.STATUS,status);
  }
  long[] nodeIds=searchContext.getNodeIds();
  if ((nodeIds != null) && (nodeIds.length > 0)) {
    BooleanQuery nodeIdsQuery=BooleanQueryFactoryUtil.create(searchContext);
    for (    long nodeId : nodeIds) {
      try {
        WikiNodeServiceUtil.getNode(nodeId);
      }
 catch (      Exception e) {
        continue;
      }
      nodeIdsQuery.addTerm(Field.NODE_ID,nodeId);
    }
    contextQuery.add(nodeIdsQuery,BooleanClauseOccur.MUST);
  }
}
