{
  PortalPreferences portalPreferences=portalPreferencesPersistence.fetchByO_O(ownerId,ownerType);
  if (portalPreferences == null) {
    long portalPreferencesId=counterLocalService.increment();
    portalPreferences=portalPreferencesPersistence.create(portalPreferencesId);
    portalPreferences.setOwnerId(ownerId);
    portalPreferences.setOwnerType(ownerType);
  }
  portalPreferences.setPreferences(xml);
  portalPreferencesPersistence.update(portalPreferences,false);
  return portalPreferences;
}
