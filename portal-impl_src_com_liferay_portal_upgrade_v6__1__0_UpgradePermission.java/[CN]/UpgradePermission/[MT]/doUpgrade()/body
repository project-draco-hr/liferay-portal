{
  ResourcePermissionClassThreadLocal.setResourcePermissionClassName("com.liferay.portal.model.ResourcePermission");
  RoleClassNameThreadLocal.setRoleClassName("com.liferay.portal.model.Role");
  List<String> modelActions=ResourceActionsUtil.getModelResourceActions("com.liferay.portal.model.Role");
  ResourceActionLocalServiceUtil.checkResourceActions("com.liferay.portal.model.Role",modelActions);
  RoleLocalServiceUtil.checkSystemRoles();
  updatePermissions("com.liferay.portlet.bookmarks",true,true);
  updatePermissions("com.liferay.portlet.documentlibrary",false,true);
  updatePermissions("com.liferay.portlet.imagegallery",true,true);
  updatePermissions("com.liferay.portlet.messageboards",true,true);
  updatePermissions("com.liferay.portlet.shopping",true,true);
  convertResourcePermissions("com.liferay.portlet.bookmarks.model.BookmarksEntry","BookmarksEntry","entryId");
  convertResourcePermissions("com.liferay.portlet.bookmarks.model.BookmarksFolder","BookmarksFolder","folderId");
  ResourcePermissionClassThreadLocal.setResourcePermissionClassName(ResourcePermission.class.getName());
  RoleClassNameThreadLocal.setRoleClassName(Role.class.getName());
}
