{
  try (Closeable closeable1=ServiceWrapperProxyUtil.createProxy(PortalBeanLocatorUtil.locate(RoleLocalService.class.getName()),SwitchClassNameRoleLocalServiceWrapper.class);Closeable closeable2=ServiceWrapperProxyUtil.createProxy(PortalBeanLocatorUtil.locate(ResourceLocalService.class.getName()),SwitchClassNameResourceLocalServiceWrapper.class);Closeable closeable3=ServiceWrapperProxyUtil.createProxy(PortalBeanLocatorUtil.locate(ResourcePermissionLocalService.class.getName()),SwitchClassNameResourcePermissionLocalServiceWrapper.class)){
    Class<? extends UpgradePermission> upgradePermissionClass=this.getClass();
    ResourceActionsUtil.read(null,upgradePermissionClass.getClassLoader(),"resource-actions/portal-6.1.0.xml");
    List<String> modelActions=ResourceActionsUtil.getModelResourceActions("com.liferay.portal.model.Role");
    ResourceActionLocalServiceUtil.checkResourceActions("com.liferay.portal.model.Role",modelActions);
    RoleLocalServiceUtil.checkSystemRoles();
    updatePermissions("com.liferay.portlet.bookmarks",true,true);
    updatePermissions("com.liferay.portlet.documentlibrary",false,true);
    updatePermissions("com.liferay.portlet.imagegallery",true,true);
    updatePermissions("com.liferay.portlet.messageboards",true,true);
    updatePermissions("com.liferay.portlet.shopping",true,true);
    convertResourcePermissions("com.liferay.portlet.bookmarks.model.BookmarksEntry","BookmarksEntry","entryId");
    convertResourcePermissions("com.liferay.portlet.bookmarks.model.BookmarksFolder","BookmarksFolder","folderId");
  }
 }
