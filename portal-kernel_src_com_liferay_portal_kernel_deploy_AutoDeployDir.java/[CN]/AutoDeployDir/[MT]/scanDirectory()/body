{
  File[] files=_deployDir.listFiles();
  for (int i=0; i < files.length; i++) {
    File file=files[i];
    if (file.isFile() && file.getName().endsWith(".war")) {
      if (!_inProcessFiles.contains(file.getName())) {
        _inProcessFiles.add(file.getName());
        try {
          Iterator itr=_listeners.iterator();
          while (itr.hasNext()) {
            AutoDeployListener listener=(AutoDeployListener)itr.next();
            listener.deploy(file);
          }
        }
 catch (        Exception e) {
          _log.error(e,e);
        }
 finally {
          if (file.delete()) {
            _inProcessFiles.remove(file.getName());
          }
 else {
            _log.error("Auto deploy failed to remove " + file.getName());
          }
        }
      }
    }
  }
}
