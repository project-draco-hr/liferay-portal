{
  ManagedService managedService=new ManagedService(){
    @Override public void updated(    Dictionary<String,?> properties) throws ConfigurationException {
      if (properties == null) {
        properties=_emptDictionary;
      }
      _configurationBeanBuilder.updateProperties(properties);
    }
  }
;
  Dictionary<String,String> properties=new HashMapDictionary<>();
  properties.put(Constants.SERVICE_PID,SettingsDefinitionUtil.getConfigurationPid(_settingsDefinition));
  _managedServiceServiceRegistration=_bundleContext.registerService(ManagedService.class,managedService,properties);
  _configurationBeanBuilder.updateProperties(_getConfigurationProperties());
  if (_log.isDebugEnabled()) {
    String pid=SettingsDefinitionUtil.getConfigurationPid(_settingsDefinition);
    _log.debug("Registered listener for changes in configurationPid " + pid);
  }
}
