{
  String prefName=RandomTestUtil.randomString(20);
  String[] prefValues=new String[]{RandomTestUtil.randomString(20)};
  String portletPreferencesXML=PortletPreferencesTestUtil.getPortletPreferencesXML(prefName,prefValues);
  long ownerId=_USER_ID;
  int ownerType=PortletKeys.PREFS_OWNER_TYPE_USER;
  String customizableColumnPortletId=PortletConstants.assemblePortletId(_PORTLET_ID,_USER_ID,null);
  PortletPreferencesLocalServiceUtil.addPortletPreferences(TestPropsValues.getCompanyId(),ownerId,ownerType,_layout.getPlid(),customizableColumnPortletId,_portlet,portletPreferencesXML);
  PortletPreferences layoutPortletSetup=PortletPreferencesFactoryUtil.getLayoutPortletSetup(_layout,customizableColumnPortletId);
  Assert.assertArrayEquals(layoutPortletSetup.getValues(prefName,null),prefValues);
}
