{
  String expectedXML="<portlet-preferences><preference><name>name</name></preference>" + "</portlet-preferences>";
  PortletPreferencesImpl portletPreferencesImpl=new PortletPreferencesImpl();
  portletPreferencesImpl.setValues("name",new String[0]);
  String actualXML=PortletPreferencesFactoryUtil.toXML(portletPreferencesImpl);
  Assert.assertEquals(expectedXML,actualXML);
  portletPreferencesImpl=deserialize(expectedXML);
  Map<String,Preference> preferencesMap=portletPreferencesImpl.getPreferences();
  Assert.assertEquals(1,preferencesMap.size());
  Preference preference=preferencesMap.values().iterator().next();
  Assert.assertEquals("name",preference.getName());
  Assert.assertEquals(0,preference.getValues().length);
  Assert.assertFalse(preference.isReadOnly());
}
