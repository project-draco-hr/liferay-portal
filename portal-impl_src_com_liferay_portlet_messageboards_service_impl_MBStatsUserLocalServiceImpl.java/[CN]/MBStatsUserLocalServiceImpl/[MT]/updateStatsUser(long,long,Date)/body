{
  int messageCount=mbMessagePersistence.countByG_U_S(groupId,userId,WorkflowConstants.STATUS_APPROVED);
  QueryDefinition queryDefinition=new QueryDefinition(WorkflowConstants.STATUS_IN_TRASH);
  List<MBThread> threads=mbThreadLocalService.getGroupThreads(groupId,queryDefinition);
  for (  MBThread thread : threads) {
    messageCount=messageCount - thread.getMessageCount();
  }
  return updateStatsUser(groupId,userId,messageCount,lastPostDate);
}
