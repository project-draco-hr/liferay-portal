{
  long[] categoryIds=mbCategoryService.getCategoryIds(groupId,MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID);
  int messageCount=mbMessagePersistence.countByG_U_C_S(groupId,userId,categoryIds,WorkflowConstants.STATUS_APPROVED);
  QueryDefinition queryDefinition=new QueryDefinition(WorkflowConstants.STATUS_IN_TRASH);
  List<MBThread> threads=mbThreadLocalService.getGroupThreads(groupId,queryDefinition);
  for (  MBThread thread : threads) {
    messageCount=messageCount - thread.getMessageCount();
  }
  return updateStatsUser(groupId,userId,messageCount,lastPostDate);
}
