{
  int messageCount=mbMessagePersistence.countByG_U_S(groupId,userId,WorkflowConstants.STATUS_APPROVED);
  List<MBThread> trashedThreads=mbThreadLocalService.getGroupThreads(groupId,WorkflowConstants.STATUS_IN_TRASH,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  for (  MBThread thread : trashedThreads) {
    messageCount=messageCount - thread.getMessageCount();
  }
  return updateStatsUser(groupId,userId,messageCount,lastPostDate);
}
