{
  DynamicQuery dynamicQuery=DynamicQueryFactoryUtil.forClass(MBThread.class,MBStatsUserImpl.TABLE_NAME,ClassLoaderUtil.getPortalClassLoader());
  Projection projection=ProjectionFactoryUtil.max("lastPostDate");
  dynamicQuery.setProjection(projection);
  Property property=PropertyFactoryUtil.forName("threadId");
  Disjunction disjunction=RestrictionsFactoryUtil.disjunction();
  QueryDefinition<MBThread> queryDefinition=new QueryDefinition<MBThread>(WorkflowConstants.STATUS_IN_TRASH);
  List<MBThread> threads=mbThreadLocalService.getGroupThreads(groupId,queryDefinition);
  for (  MBThread thread : threads) {
    disjunction.add(property.ne(thread.getThreadId()));
  }
  dynamicQuery.add(disjunction);
  List<Date> results=mbStatsUserLocalService.dynamicQuery(dynamicQuery);
  return results.get(0);
}
