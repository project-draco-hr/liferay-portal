{
  String languageId=ParamUtil.getString(req,"languageId");
  if (Validator.isNotNull(languageId)) {
    return languageId;
  }
  Locale locale=(Locale)req.getSession().getAttribute(Globals.LOCALE_KEY);
  if (locale == null) {
    languageId=CookieUtil.get(req.getCookies(),CookieKeys.GUEST_LANGUAGE_ID);
    if (Validator.isNotNull(languageId)) {
      locale=LocaleUtil.fromLanguageId(languageId);
    }
  }
  return LocaleUtil.toLanguageId(locale);
}
