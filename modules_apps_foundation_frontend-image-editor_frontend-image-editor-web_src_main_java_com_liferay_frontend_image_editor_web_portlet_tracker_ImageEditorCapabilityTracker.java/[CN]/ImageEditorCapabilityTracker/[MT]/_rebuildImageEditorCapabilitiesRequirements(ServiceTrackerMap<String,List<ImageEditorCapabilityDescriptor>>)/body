{
  Set<String> requiredModules=new HashSet<>();
  for (  String key : serviceTrackerMap.keySet()) {
    List<ImageEditorCapabilityDescriptor> imageEditorCapabilityDescriptors=serviceTrackerMap.getService(key);
    for (    ImageEditorCapabilityDescriptor imageEditorCapabilityDescriptor : imageEditorCapabilityDescriptors) {
      try {
        ImageEditorCapability imageEditorCapability=imageEditorCapabilityDescriptor.getImageEditorCapability();
        String moduleName=imageEditorCapability.getModuleName();
        List<URL> resourceURLs=imageEditorCapability.getResourceURLs();
        for (        URL resourceURL : resourceURLs) {
          String fullFileName=resourceURL.getFile();
          String fileName=_getJavaScriptFileName(fullFileName);
          requiredModules.add(moduleName.concat(StringPool.SLASH).concat(fileName));
        }
      }
 catch (      Exception e) {
        _log.error(e,e);
      }
    }
  }
  return requiredModules;
}
