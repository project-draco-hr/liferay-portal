{
  ImageEditorCapability imageEditorCapability=_bundleContext.getService(serviceReference);
  Map<String,Object> properties=new HashMap<>();
  String[] propertyKeys=serviceReference.getPropertyKeys();
  for (  String propertyKey : propertyKeys) {
    properties.put(propertyKey,serviceReference.getProperty(propertyKey));
  }
  try {
    return new ImageEditorCapabilityDescriptor(imageEditorCapability,properties);
  }
 catch (  Exception e) {
    _bundleContext.ungetService(serviceReference);
    return null;
  }
}
