{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long wsrpProducerId=ParamUtil.getLong(actionRequest,"wsrpProducerId");
  String name=ParamUtil.getString(actionRequest,"name");
  String version=ParamUtil.getString(actionRequest,"version");
  String portletIds=ParamUtil.getString(actionRequest,"portletIds");
  if (wsrpProducerId <= 0) {
    ServiceContext serviceContext=ServiceContextFactory.getInstance(WSRPProducer.class.getName(),actionRequest);
    WSRPProducerLocalServiceUtil.addWSRPProducer(themeDisplay.getUserId(),name,version,portletIds,serviceContext);
  }
 else {
    WSRPProducerLocalServiceUtil.updateWSRPProducer(wsrpProducerId,name,version,portletIds);
  }
}
