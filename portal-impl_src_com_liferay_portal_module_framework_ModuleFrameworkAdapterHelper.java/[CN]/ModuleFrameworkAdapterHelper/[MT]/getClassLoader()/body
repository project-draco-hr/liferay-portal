{
  if (_classLoader != null) {
    return _classLoader;
  }
  try {
    File coreDir=new File(PropsValues.MODULE_FRAMEWORK_CORE_DIR);
    File[] files=coreDir.listFiles();
    URL[] classpath=new URL[files.length];
    for (int i=0; i < classpath.length; i++) {
      classpath[i]=new URL("file:" + files[i].getAbsolutePath());
    }
    _classLoader=new ModuleFrameworkClassLoader(classpath,PACLClassLoaderUtil.getPortalClassLoader());
    return _classLoader;
  }
 catch (  Exception e) {
    _log.error("Unexpected error while configuring the custom classloader " + "for the module framework. It will be unusable!");
    throw new RuntimeException(e);
  }
}
