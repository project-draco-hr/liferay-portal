{
  if (_classLoader != null) {
    return _classLoader;
  }
  try {
    if (FileUtil.getFile() == null) {
      FileUtil fileUtil=new FileUtil();
      fileUtil.setFile(DoPrivilegedUtil.wrap(new FileImpl()));
    }
    List<ClasspathResolver> resolvers=ServiceLoader.load(ClasspathResolver.class);
    ClasspathResolver classpathResolver=resolvers.get(0);
    URL[] classpathURLs=classpathResolver.getClasspathURLs();
    _classLoader=new ModuleFrameworkClassLoader(classpathURLs,ClassLoaderUtil.getPortalClassLoader());
    return _classLoader;
  }
 catch (  Exception e) {
    _log.error("Unable to configure the class loader for the module " + "framework");
    throw new RuntimeException(e);
  }
}
