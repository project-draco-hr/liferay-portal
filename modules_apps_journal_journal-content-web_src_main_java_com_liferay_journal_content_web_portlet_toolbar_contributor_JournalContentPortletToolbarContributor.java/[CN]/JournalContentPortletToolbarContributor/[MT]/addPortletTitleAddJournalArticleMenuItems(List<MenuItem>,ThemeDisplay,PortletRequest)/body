{
  long plid=themeDisplay.getPlid();
  PortletDisplay portletDisplay=themeDisplay.getPortletDisplay();
  long scopeGroupId=themeDisplay.getScopeGroupId();
  PortletURL portletURL=PortalUtil.getControlPanelPortletURL(portletRequest,JournalPortletKeys.JOURNAL,PortletRequest.RENDER_PHASE);
  portletURL.setParameter("hideDefaultSuccessMessage",Boolean.TRUE.toString());
  portletURL.setParameter("groupId",String.valueOf(scopeGroupId));
  portletURL.setParameter("mvcPath","/edit_article.jsp");
  portletURL.setParameter("portletResource",portletDisplay.getId());
  portletURL.setParameter("redirect",_getAddJournalArticleRedirectURL(themeDisplay,portletRequest));
  portletURL.setParameter("referringPlid",String.valueOf(plid));
  portletURL.setParameter("showHeader",Boolean.FALSE.toString());
  portletURL.setWindowState(LiferayWindowState.POP_UP);
  List<DDMStructure> ddmStructures=_ddmStructureService.getStructures(themeDisplay.getCompanyId(),PortalUtil.getCurrentAndAncestorSiteGroupIds(scopeGroupId),PortalUtil.getClassNameId(JournalArticle.class),WorkflowConstants.STATUS_APPROVED);
  Map<String,Object> data=new HashMap<>();
  data.put("id",HtmlUtil.escape(portletDisplay.getNamespace()) + "editAsset");
  for (  DDMStructure ddmStructure : ddmStructures) {
    portletURL.setParameter("ddmStructureId",String.valueOf(ddmStructure.getStructureId()));
    URLMenuItem urlMenuItem=new URLMenuItem();
    String ddmStructureName=ddmStructure.getName(themeDisplay.getLocale());
    String title=LanguageUtil.format(themeDisplay.getLocale(),"new-x",ddmStructureName);
    data.put("title",HtmlUtil.escape(title));
    urlMenuItem.setData(data);
    urlMenuItem.setLabel(ddmStructureName);
    urlMenuItem.setURL(portletURL.toString());
    urlMenuItem.setUseDialog(true);
    menuItems.add(urlMenuItem);
  }
}
