{
  className=GetterUtil.getString(className);
  long classNameId=PortalUtil.getClassNameId(className);
  validate(0,companyId,name);
  long roleId=counterLocalService.increment();
  if ((classNameId <= 0) || className.equals(Role.class.getName())) {
    classNameId=PortalUtil.getClassNameId(Role.class);
    classPK=roleId;
  }
  Role role=rolePersistence.create(roleId);
  role.setCompanyId(companyId);
  role.setClassNameId(classNameId);
  role.setClassPK(classPK);
  role.setName(name);
  role.setDescription(description);
  role.setType(type);
  rolePersistence.update(role,false);
  if (userId > 0) {
    resourceLocalService.addResources(companyId,0,userId,Role.class.getName(),role.getRoleId(),false,false,false);
    userLocalService.reIndex(userId);
  }
  return role;
}
