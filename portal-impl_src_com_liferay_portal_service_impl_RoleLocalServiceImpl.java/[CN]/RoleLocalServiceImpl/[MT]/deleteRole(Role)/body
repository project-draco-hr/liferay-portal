{
  if (PortalUtil.isSystemRole(role.getName())) {
    throw new RequiredRoleException();
  }
  List<ResourcePermission> resourcePermissions=resourcePermissionPersistence.findByRoleId(role.getRoleId());
  for (  ResourcePermission resourcePermission : resourcePermissions) {
    resourcePermissionLocalService.deleteResourcePermission(resourcePermission);
  }
  String className=role.getClassName();
  long classNameId=role.getClassNameId();
  if ((classNameId <= 0) || className.equals(Role.class.getName())) {
    resourceLocalService.deleteResource(role.getCompanyId(),Role.class.getName(),ResourceConstants.SCOPE_INDIVIDUAL,role.getRoleId());
  }
  if ((role.getType() == RoleConstants.TYPE_ORGANIZATION) || (role.getType() == RoleConstants.TYPE_SITE)) {
    userGroupRoleLocalService.deleteUserGroupRolesByRoleId(role.getRoleId());
    userGroupGroupRoleLocalService.deleteUserGroupGroupRolesByRoleId(role.getRoleId());
  }
  rolePersistence.remove(role);
  expandoValueLocalService.deleteValues(Role.class.getName(),role.getRoleId());
  PermissionCacheUtil.clearCache();
  return role;
}
