{
  int assigneesTotal=0;
  Role role=getRole(roleId);
  int type=role.getType();
  if (type == RoleConstants.TYPE_REGULAR) {
    assigneesTotal+=groupLocalService.getRoleGroupsCount(roleId);
    assigneesTotal+=userLocalService.getRoleUsersCount(roleId);
  }
  if (type == RoleConstants.TYPE_SITE) {
    DynamicQuery userGroupGroupRoleQuery=userGroupGroupRoleLocalService.dynamicQuery();
    Property property=PropertyFactoryUtil.forName("primaryKey.roleId");
    userGroupGroupRoleQuery.add(property.eq(roleId));
    userGroupGroupRoleQuery.setProjection(ProjectionFactoryUtil.countDistinct("primaryKey.userGroupId"));
    List<?> list=userGroupRoleLocalService.dynamicQuery(userGroupGroupRoleQuery);
    Long userGroupGroupRoleCount=(Long)list.get(0);
    assigneesTotal+=userGroupGroupRoleCount.intValue();
  }
  if ((type == RoleConstants.TYPE_SITE) || (type == RoleConstants.TYPE_ORGANIZATION)) {
    DynamicQuery userGroupRoleQuery=userGroupRoleLocalService.dynamicQuery();
    Property property=PropertyFactoryUtil.forName("primaryKey.roleId");
    userGroupRoleQuery.add(property.eq(roleId));
    userGroupRoleQuery.setProjection(ProjectionFactoryUtil.countDistinct("primaryKey.userId"));
    List<?> list=userGroupRoleLocalService.dynamicQuery(userGroupRoleQuery);
    Long userGroupGroupRoleCount=(Long)list.get(0);
    assigneesTotal+=userGroupGroupRoleCount.intValue();
  }
  return assigneesTotal;
}
