{
  int assigneesTotal=0;
  Role role=getRole(roleId);
  int type=role.getType();
  if (type == RoleConstants.TYPE_REGULAR) {
    assigneesTotal+=groupLocalService.getRoleGroupsCount(roleId);
    assigneesTotal+=userLocalService.getRoleUsersCount(roleId);
  }
  if (type == RoleConstants.TYPE_SITE) {
    DynamicQuery userGroupGroupRoleDynamicQuery=userGroupGroupRoleLocalService.dynamicQuery();
    Property property=PropertyFactoryUtil.forName("primaryKey.roleId");
    userGroupGroupRoleDynamicQuery.add(property.eq(roleId));
    userGroupGroupRoleDynamicQuery.setProjection(ProjectionFactoryUtil.countDistinct("primaryKey.userGroupId"));
    List<?> list=userGroupRoleLocalService.dynamicQuery(userGroupGroupRoleDynamicQuery);
    Long count=(Long)list.get(0);
    assigneesTotal+=count.intValue();
  }
  if ((type == RoleConstants.TYPE_SITE) || (type == RoleConstants.TYPE_ORGANIZATION)) {
    DynamicQuery userGroupRoleDynamicQuery=userGroupRoleLocalService.dynamicQuery();
    Property property=PropertyFactoryUtil.forName("primaryKey.roleId");
    userGroupRoleDynamicQuery.add(property.eq(roleId));
    userGroupRoleDynamicQuery.setProjection(ProjectionFactoryUtil.countDistinct("primaryKey.userId"));
    List<?> list=userGroupRoleLocalService.dynamicQuery(userGroupRoleDynamicQuery);
    Long count=(Long)list.get(0);
    assigneesTotal+=count.intValue();
  }
  return assigneesTotal;
}
