{
  String companyIdHexString=StringUtil.toHexString(companyId);
  List<Role> roles=null;
  try {
    roles=roleFinder.findBySystem(companyId);
  }
 catch (  Exception e) {
    DB db=DBFactoryUtil.getDB();
    try {
      runSQL(db.buildSQL("alter table Role_ add uuid_ VARCHAR(75) null"));
      runSQL(db.buildSQL("alter table Role_ add userId LONG"));
      runSQL(db.buildSQL("alter table Role_ add userName VARCHAR(75) null"));
      runSQL(db.buildSQL("alter table Role_ add createDate DATE null"));
      runSQL(db.buildSQL("alter table Role_ add modifiedDate DATE null"));
    }
 catch (    IOException ioe) {
      throw new SystemException(ioe);
    }
    roles=roleFinder.findBySystem(companyId);
  }
  for (  Role role : roles) {
    _systemRolesMap.put(companyIdHexString.concat(role.getName()),role);
  }
  String[] systemRoles=PortalUtil.getSystemRoles();
  for (  String name : systemRoles) {
    String key="system.role." + StringUtil.replace(name,CharPool.SPACE,CharPool.PERIOD) + ".description";
    Map<Locale,String> descriptionMap=new HashMap<Locale,String>();
    descriptionMap.put(LocaleUtil.getDefault(),PropsUtil.get(key));
    int type=RoleConstants.TYPE_REGULAR;
    checkSystemRole(companyId,name,descriptionMap,type);
  }
  String[] systemOrganizationRoles=PortalUtil.getSystemOrganizationRoles();
  for (  String name : systemOrganizationRoles) {
    String key="system.organization.role." + StringUtil.replace(name,CharPool.SPACE,CharPool.PERIOD) + ".description";
    Map<Locale,String> descriptionMap=new HashMap<Locale,String>();
    descriptionMap.put(LocaleUtil.getDefault(),PropsUtil.get(key));
    int type=RoleConstants.TYPE_ORGANIZATION;
    checkSystemRole(companyId,name,descriptionMap,type);
  }
  String[] systemSiteRoles=PortalUtil.getSystemSiteRoles();
  for (  String name : systemSiteRoles) {
    String key="system.site.role." + StringUtil.replace(name,CharPool.SPACE,CharPool.PERIOD) + ".description";
    Map<Locale,String> descriptionMap=new HashMap<Locale,String>();
    descriptionMap.put(LocaleUtil.getDefault(),PropsUtil.get(key));
    int type=RoleConstants.TYPE_SITE;
    checkSystemRole(companyId,name,descriptionMap,type);
  }
}
