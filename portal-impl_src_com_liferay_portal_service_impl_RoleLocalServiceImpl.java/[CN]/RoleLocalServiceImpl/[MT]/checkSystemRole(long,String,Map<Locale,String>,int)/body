{
  String companyIdHexString=StringUtil.toHexString(companyId);
  String key=companyIdHexString.concat(name);
  Role role=_systemRolesMap.get(key);
  try {
    if (role == null) {
      role=rolePersistence.findByC_N(companyId,name);
    }
    if (!descriptionMap.equals(role.getDescriptionMap())) {
      role.setDescriptionMap(descriptionMap);
      roleLocalService.updateRole(role,false);
    }
  }
 catch (  NoSuchRoleException nsre) {
    role=roleLocalService.addRole(0,companyId,name,null,descriptionMap,type);
  }
  if (name.equals(RoleConstants.USER)) {
    initPersonalControlPanelPortletsPermissions(role);
  }
  _systemRolesMap.put(key,role);
}
