{
  PortletPreferencesTestUtil.addLayoutPortletPreferences(_layout,_portlet);
  List<PortletPreferences> portletPreferencesList=PortletPreferencesLocalServiceUtil.getPortletPreferences(PortletKeys.PREFS_OWNER_TYPE_LAYOUT,_layout.getPlid(),_portlet.getPortletId());
  Assert.assertEquals(1,portletPreferencesList.size());
  PortletPreferencesImpl portletPreferenesImpl=PortletPreferencesImplTestUtil.toPortletPreferencesImpl(portletPreferencesList.get(0));
  assertOwner(_layout,portletPreferenesImpl);
  Group group=GroupTestUtil.addGroup();
  _groups.add(group);
  Layout layout=LayoutTestUtil.addLayout(group);
  PortletPreferencesTestUtil.addLayoutPortletPreferences(layout,_portlet);
  Assert.assertEquals(1,portletPreferencesList.size());
}
