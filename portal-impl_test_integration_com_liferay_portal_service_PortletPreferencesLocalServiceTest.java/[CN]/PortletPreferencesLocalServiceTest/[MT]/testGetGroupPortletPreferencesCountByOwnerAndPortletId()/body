{
  long initialCount=PortletPreferencesLocalServiceUtil.getPortletPreferencesCount(_group.getGroupId(),PortletKeys.PREFS_OWNER_TYPE_GROUP,_portlet.getPortletId(),false);
  Assert.assertEquals(0,initialCount);
  PortletPreferencesTestUtil.addGroupPortletPreferences(_layout,_portlet);
  Layout layout=LayoutTestUtil.addLayout(GroupTestUtil.addGroup());
  Portlet portlet=PortletLocalServiceUtil.getPortletById(TestPropsValues.getCompanyId(),String.valueOf(_PORTLET_ID + 1));
  PortletPreferencesTestUtil.addGroupPortletPreferences(layout,portlet);
  long actualCount=PortletPreferencesLocalServiceUtil.getPortletPreferencesCount(_group.getGroupId(),PortletKeys.PREFS_OWNER_TYPE_GROUP,_portlet.getPortletId(),false);
  Assert.assertEquals(1,actualCount);
}
