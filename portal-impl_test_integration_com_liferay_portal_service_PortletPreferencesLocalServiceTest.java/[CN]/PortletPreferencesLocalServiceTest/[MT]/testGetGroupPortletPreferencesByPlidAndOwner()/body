{
  Group group=GroupTestUtil.addGroup();
  Layout layout=LayoutTestUtil.addLayout(group);
  Portlet portlet=PortletLocalServiceUtil.getPortletById(TestPropsValues.getCompanyId(),String.valueOf(_PORTLET_ID + 1));
  Portlet portlet2=PortletLocalServiceUtil.getPortletById(TestPropsValues.getCompanyId(),String.valueOf(_PORTLET_ID + 2));
  PortletPreferencesTestUtil.addGroupPortletPreferences(_layout,_portlet);
  PortletPreferencesTestUtil.addGroupPortletPreferences(layout,portlet);
  PortletPreferencesTestUtil.addGroupPortletPreferences(layout,portlet2);
  List<PortletPreferences> portletPreferencesList=PortletPreferencesLocalServiceUtil.getPortletPreferences(_group.getGroupId(),PortletKeys.PREFS_OWNER_TYPE_GROUP,_layout.getPlid());
  Assert.assertEquals(1,portletPreferencesList.size());
  portletPreferencesList=PortletPreferencesLocalServiceUtil.getPortletPreferences(group.getGroupId(),PortletKeys.PREFS_OWNER_TYPE_GROUP,layout.getPlid());
  Assert.assertEquals(2,portletPreferencesList.size());
}
