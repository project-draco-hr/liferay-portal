{
  PortletPreferencesTestUtil.addLayoutPortletPreferences(_layout,_portlet);
  Layout layout=LayoutTestUtil.addLayout(GroupTestUtil.addGroup());
  PortletPreferencesTestUtil.addGroupPortletPreferences(layout,_portlet);
  long currentCountTypeLayout=PortletPreferencesLocalServiceUtil.getPortletPreferencesCount(PortletKeys.PREFS_OWNER_TYPE_LAYOUT,_layout.getPlid(),_portlet.getPortletId());
  Assert.assertEquals(1,currentCountTypeLayout);
  long currentCountTypeGroup=PortletPreferencesLocalServiceUtil.getPortletPreferencesCount(PortletKeys.PREFS_OWNER_TYPE_GROUP,layout.getPlid(),_portlet.getPortletId());
  Assert.assertEquals(1,currentCountTypeGroup);
  long currentCountTypeCompany=PortletPreferencesLocalServiceUtil.getPortletPreferencesCount(PortletKeys.PREFS_OWNER_TYPE_COMPANY,_layout.getPlid(),_portlet.getPortletId());
  Assert.assertEquals(0,currentCountTypeCompany);
}
