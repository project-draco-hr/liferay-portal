{
  assertNullLayoutPreferences(_layout,_portlet);
  String preferencesAsXML=PortletPreferencesTestUtil.getPreferencesAsXMLString(_PREFERENCE_NAME,_PREFERENCE_VALUES_SINGLE);
  _portlet.setDefaultPreferences(preferencesAsXML);
  PortletPreferences portletPreferences=PortletPreferencesTestUtil.addLayoutPortletPreferences(_layout,_portlet);
  PortletPreferencesImpl portletPreferencesImpl=PortletPreferencesTestUtil.toPortletPreferencesImpl(portletPreferences);
  assertOwnedByLayout(_layout,portletPreferencesImpl);
  assertPortletPreferenceValues(portletPreferences,_PREFERENCE_NAME,_PREFERENCE_VALUES_SINGLE);
}
