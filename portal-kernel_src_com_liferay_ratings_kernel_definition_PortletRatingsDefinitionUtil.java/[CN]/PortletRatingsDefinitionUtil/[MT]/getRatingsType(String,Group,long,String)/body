{
  String type=defaultType;
  UnicodeProperties groupTypeSettings=new UnicodeProperties();
  if (group != null) {
    groupTypeSettings=group.getTypeSettingsProperties();
  }
  RatingsType defaultRatingsType=getDefaultRatingsType(className);
  if (defaultRatingsType != null) {
    String propertyKey=RatingsDataTransformerUtil.getPropertyKey(className);
    PortletPreferences companyPortletPreferences=PrefsPropsUtil.getPreferences(companyId);
    type=companyPortletPreferences.getValue(propertyKey,defaultRatingsType.getValue());
    type=groupTypeSettings.getProperty(propertyKey,type);
  }
  return type;
}
