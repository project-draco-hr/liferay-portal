{
  Group group=GroupLocalServiceUtil.getGroup(groupId);
  UnicodeProperties groupTypeSettings=group.getTypeSettingsProperties();
  RatingsType defaultRatingsType=getDefaultRatingsType(className);
  if (defaultRatingsType != null) {
    String propertyKey=RatingsDataTransformerUtil.getPropertyKey(className);
    PortletPreferences companyPortletPreferences=PrefsPropsUtil.getPreferences(companyId);
    String type=companyPortletPreferences.getValue(propertyKey,defaultRatingsType.getValue());
    type=groupTypeSettings.getProperty(propertyKey,type);
    return RatingsType.parse(type);
  }
  return null;
}
