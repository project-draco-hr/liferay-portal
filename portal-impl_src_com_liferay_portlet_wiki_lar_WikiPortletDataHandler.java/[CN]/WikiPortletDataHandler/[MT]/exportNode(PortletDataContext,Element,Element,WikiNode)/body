{
  if (portletDataContext.isWithinDateRange(node.getModifiedDate())) {
    String path=getNodePath(portletDataContext,node);
    if (portletDataContext.isPathNotProcessed(path)) {
      Element nodeElement=nodesElement.addElement("node");
      portletDataContext.addClassedModel(nodeElement,path,node,NAMESPACE);
    }
  }
  Element dlFileEntryTypesElement=pagesElement.element("dl-file-entry-types");
  if (dlFileEntryTypesElement == null) {
    pagesElement.addElement("dl-file-entry-types");
  }
  Element dlFoldersElement=pagesElement.element("dl-folders");
  if (dlFoldersElement == null) {
    pagesElement.addElement("dl-folders");
  }
  Element dlFileEntriesElement=pagesElement.element("dl-file-entries");
  if (dlFileEntriesElement == null) {
    pagesElement.addElement("dl-file-entries");
  }
  Element dlFileRanksElement=pagesElement.element("dl-file-ranks");
  if (dlFileRanksElement == null) {
    pagesElement.addElement("dl-file-ranks");
  }
  Element dlRepositoriesElement=pagesElement.element("dl-repositories");
  if (dlRepositoriesElement == null) {
    pagesElement.addElement("dl-repositories");
  }
  Element dlRepositoryEntriesElement=pagesElement.element("dl-repository-entries");
  if (dlRepositoryEntriesElement == null) {
    pagesElement.addElement("dl-repository-entries");
  }
  List<WikiPage> pages=WikiPageUtil.findByN_S(node.getNodeId(),WorkflowConstants.STATUS_APPROVED,QueryUtil.ALL_POS,QueryUtil.ALL_POS,new PageVersionComparator(true));
  for (  WikiPage page : pages) {
    exportPage(portletDataContext,nodesElement,pagesElement,dlFileEntryTypesElement,dlFoldersElement,dlFileEntriesElement,dlFileRanksElement,dlRepositoriesElement,dlRepositoryEntriesElement,page,true);
  }
}
