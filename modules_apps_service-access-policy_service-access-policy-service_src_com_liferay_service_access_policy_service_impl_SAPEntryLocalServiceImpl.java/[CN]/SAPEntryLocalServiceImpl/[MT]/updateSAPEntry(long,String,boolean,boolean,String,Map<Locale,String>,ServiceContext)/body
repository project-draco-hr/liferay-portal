{
  SAPEntry sapEntry=sapEntryPersistence.findByPrimaryKey(sapEntryId);
  SAPEntry existingSAPEntry=sapEntryPersistence.fetchByC_N(sapEntry.getCompanyId(),name);
  if ((existingSAPEntry != null) && (existingSAPEntry.getSapEntryId() != sapEntryId)) {
    throw new DuplicateSAPEntryNameException();
  }
  if (sapEntry.isSystem()) {
    defaultSAPEntry=sapEntry.getDefaultSAPEntry();
    name=sapEntry.getName();
  }
  name=StringUtil.trim(name);
  allowedServiceSignatures=normalizeServiceSignatures(allowedServiceSignatures);
  validate(name,titleMap);
  sapEntry.setAllowedServiceSignatures(allowedServiceSignatures);
  sapEntry.setDefaultSAPEntry(defaultSAPEntry);
  sapEntry.setEnabled(enabled);
  sapEntry.setName(name);
  sapEntry.setTitleMap(titleMap);
  sapEntry=sapEntryPersistence.update(sapEntry,serviceContext);
  return sapEntry;
}
