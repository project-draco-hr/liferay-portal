{
  PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
  if ((layout != null) && !LayoutPermissionUtil.contains(permissionChecker,layout,ActionKeys.UPDATE)) {
    throw new PrincipalException.MustHavePermission(permissionChecker.getUserId(),layout.getName(),layout.getLayoutId(),ActionKeys.UPDATE);
  }
 else   if (!group.isUser() && !GroupPermissionUtil.contains(permissionChecker,group,ActionKeys.UPDATE)) {
    throw new PrincipalException.MustHavePermission(permissionChecker.getUserId(),group.getName(),group.getGroupId(),ActionKeys.UPDATE);
  }
 else   if (group.isUser() && (permissionChecker.getUserId() != group.getClassPK())) {
    throw new PrincipalException();
  }
}
