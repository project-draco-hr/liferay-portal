{
  PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
  if ((layout != null) && !LayoutPermissionUtil.contains(permissionChecker,layout,ActionKeys.UPDATE)) {
    throw new PrincipalException();
  }
 else   if (!group.isUser() && !GroupPermissionUtil.contains(permissionChecker,group,ActionKeys.UPDATE)) {
    throw new PrincipalException();
  }
 else   if (group.isUser() && (permissionChecker.getUserId() != group.getClassPK())) {
    throw new PrincipalException();
  }
}
