{
  String layoutSetPrototypeUuid=null;
  if (layoutSetPrototypeId > 0) {
    LayoutSetPrototype layoutSetPrototype=LayoutSetPrototypeLocalServiceUtil.fetchLayoutSetPrototype(layoutSetPrototypeId);
    if (layoutSetPrototype != null) {
      layoutSetPrototypeUuid=layoutSetPrototype.getUuid();
      if (!layoutSetPrototypeLinkEnabled && (layoutSetPrototypeId > 0)) {
        Map<String,String[]> parameterMap=getLayoutSetPrototypesParameters(true);
        importLayoutSetPrototype(layoutSetPrototype,groupId,privateLayout,parameterMap,true);
      }
    }
  }
  LayoutSetServiceUtil.updateLayoutSetPrototypeLinkEnabled(groupId,privateLayout,layoutSetPrototypeLinkEnabled,layoutSetPrototypeUuid);
  LayoutLocalServiceUtil.updatePriorities(groupId,privateLayout);
  Group group=GroupLocalServiceUtil.getGroup(groupId);
  LayoutSet layoutSet=LayoutSetLocalServiceUtil.getLayoutSet(groupId,privateLayout);
  mergeLayoutSetPrototypeLayouts(group,layoutSet);
}
