{
  if (inputBufferSize < 4) {
    throw new IllegalArgumentException("Input buffer size " + inputBufferSize + " is less than 4");
  }
  if (outputBufferSize <= 0) {
    throw new IllegalArgumentException("Output buffer size " + outputBufferSize + " must be a positive number");
  }
  if (charsetName == null) {
    charsetName=DEFAULT_CHARSET_NAME;
  }
  _writer=writer;
  _charsetName=charsetName;
  _charsetDecoder=CharsetDecoderUtil.getCharsetDecoder(charsetName);
  _inputBuffer=ByteBuffer.allocate(inputBufferSize);
  _outputBuffer=CharBuffer.allocate(outputBufferSize);
  _autoFlush=autoFlush;
}
