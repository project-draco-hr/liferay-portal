{
  if (!_fileEntryDisplayContextHelper.isPermissionsButtonVisible()) {
    return;
  }
  String permissionsURL=null;
  try {
    permissionsURL=PermissionsURLTag.doTag(null,DLFileEntryConstants.getClassName(),HtmlUtil.unescape(_fileEntry.getTitle()),null,String.valueOf(_fileEntry.getFileEntryId()),LiferayWindowState.POP_UP.toString(),null,_request);
  }
 catch (  Exception e) {
    throw new SystemException("Unable to create permissions URL",e);
  }
  StringBundler sb=new StringBundler(6);
  sb.append("Liferay.Util.openWindow({");
  sb.append("title: '");
  sb.append(UnicodeLanguageUtil.get(_request,"permissions"));
  sb.append("', uri: '");
  sb.append(permissionsURL);
  sb.append("'});");
  _addJavaScriptUIItem(new JavaScriptToolbarItem(),toolbarItems,DLUIItemKeys.PERMISSIONS,LanguageUtil.get(_request,"permissions"),sb.toString());
}
