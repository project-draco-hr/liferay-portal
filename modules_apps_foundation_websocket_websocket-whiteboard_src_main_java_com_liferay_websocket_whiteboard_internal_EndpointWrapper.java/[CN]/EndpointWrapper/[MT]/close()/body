{
  _closed=true;
  Iterator<Session> iterator=_sessions.iterator();
  while (iterator.hasNext()) {
    Session session=iterator.next();
    iterator.remove();
    try {
      CloseReason closeReason=new CloseReason(CloseReason.CloseCodes.GOING_AWAY,"Service is going away");
      session.close(closeReason);
      _endpoint.onClose(session,closeReason);
      _serviceObjects.ungetService(_endpoint);
    }
 catch (    IOException ioe) {
      _logService.log(LogService.LOG_ERROR,"Unable to close the session",ioe);
    }
  }
}
