{
  if (!className.equals(DLFolder.class.getName())) {
    return;
  }
  long folderId=GetterUtil.getLong(primKey);
  Folder folder=DLAppServiceUtil.getFolder(folderId);
  List<Object> foldersAndFileEntriesAndFileShortcuts=DLAppServiceUtil.getFoldersAndFileEntriesAndFileShortcuts(folder.getGroupId(),folderId,WorkflowConstants.STATUS_ANY,true,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  for (  Object folderAndFileEntryAndFileShortcut : foldersAndFileEntriesAndFileShortcuts) {
    if (folderAndFileEntryAndFileShortcut instanceof DLFileShortcut) {
      DLFileShortcut dlFileShorcut=(DLFileShortcut)folderAndFileEntryAndFileShortcut;
      for (      long roleId : roleIds) {
        propagateRolePermissions(actionRequest,roleId,DLFolder.class.getName(),folderId,DLFileShortcut.class.getName(),dlFileShorcut.getFileShortcutId());
      }
    }
 else     if (folderAndFileEntryAndFileShortcut instanceof FileEntry) {
      FileEntry fileEntry=(FileEntry)folderAndFileEntryAndFileShortcut;
      for (      long roleId : roleIds) {
        propagateRolePermissions(actionRequest,roleId,DLFolder.class.getName(),folderId,DLFileEntry.class.getName(),fileEntry.getFileEntryId());
      }
    }
 else     if (folderAndFileEntryAndFileShortcut instanceof Folder) {
      Folder subfolder=(Folder)folderAndFileEntryAndFileShortcut;
      for (      long roleId : roleIds) {
        propagateRolePermissions(actionRequest,roleId,DLFolder.class.getName(),folderId,DLFolder.class.getName(),subfolder.getFolderId());
      }
      propagateRolePermissions(actionRequest,className,String.valueOf(subfolder.getFolderId()),roleIds);
    }
  }
}
