{
  Connection connection=null;
  try {
    connection=DataAccess.getUpgradeOptimizedConnection();
    DatabaseMetaData databaseMetaData=connection.getMetaData();
    List<Element> classElements=getClassElements();
    for (    Element classElement : classElements) {
      if (classElement.element("version") == null) {
        continue;
      }
      upgradeMVCC(databaseMetaData,classElement);
    }
    List<String> modulesTableNames=getModulesTableNames();
    for (    String modulesTableName : modulesTableNames) {
      upgradeMVCC(databaseMetaData,modulesTableName);
    }
  }
  finally {
    DataAccess.cleanUp(connection);
  }
}
