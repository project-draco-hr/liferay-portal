{
  Configuration cfg=new Configuration();
  try {
    ExtPropertiesLoader extPropsLoader=ExtPropertiesLoader.getInstance(_propsName);
    ClassLoader classLoader=getClass().getClassLoader();
    String[] configs=StringUtil.split(extPropsLoader.get("hibernate.configs"));
    for (int i=0; i < configs.length; i++) {
      try {
        InputStream is=classLoader.getResourceAsStream(configs[i]);
        if (is != null) {
          cfg=cfg.addInputStream(is);
          is.close();
        }
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
    cfg.setProperties(extPropsLoader.getProperties());
  }
 catch (  Exception e) {
    _log.error(StackTraceUtil.getStackTrace(e));
  }
  return cfg;
}
