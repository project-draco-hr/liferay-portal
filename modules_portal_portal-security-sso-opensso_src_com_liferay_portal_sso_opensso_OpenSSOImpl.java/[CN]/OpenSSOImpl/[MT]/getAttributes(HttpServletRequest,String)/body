{
  Map<String,String> nameValues=new HashMap<>();
  String url=serviceUrl.concat(_GET_ATTRIBUTES);
  try {
    URL urlObj=new URL(url);
    HttpURLConnection httpURLConnection=(HttpURLConnection)urlObj.openConnection();
    httpURLConnection.setDoOutput(true);
    httpURLConnection.setRequestMethod("POST");
    httpURLConnection.setRequestProperty("Content-type","application/x-www-form-urlencoded");
    String[] cookieNames=getCookieNames(serviceUrl);
    setCookieProperty(request,httpURLConnection,cookieNames);
    OutputStreamWriter osw=new OutputStreamWriter(httpURLConnection.getOutputStream());
    osw.write("dummy");
    osw.flush();
    int responseCode=httpURLConnection.getResponseCode();
    if (responseCode == HttpURLConnection.HTTP_OK) {
      InputStream inputStream=(InputStream)httpURLConnection.getContent();
      UnsyncBufferedReader unsyncBufferedReader=new UnsyncBufferedReader(new InputStreamReader(inputStream));
      String line=null;
      while ((line=unsyncBufferedReader.readLine()) != null) {
        if (line.startsWith("userdetails.attribute.name=")) {
          String name=line.replaceFirst("userdetails.attribute.name=","");
          line=unsyncBufferedReader.readLine();
          if (line.startsWith("userdetails.attribute.value=")) {
            String value=line.replaceFirst("userdetails.attribute.value=","");
            nameValues.put(name,value);
          }
        }
      }
    }
 else     if (_log.isDebugEnabled()) {
      _log.debug("Attributes response code " + responseCode);
    }
  }
 catch (  MalformedURLException murle) {
    _log.error(murle.getMessage());
    if (_log.isDebugEnabled()) {
      _log.debug(murle,murle);
    }
  }
catch (  IOException ioe) {
    _log.error(ioe.getMessage());
    if (_log.isDebugEnabled()) {
      _log.debug(ioe,ioe);
    }
  }
  return nameValues;
}
