{
  String xml=HttpUtil.URLtoString(xmlUrl);
  String xsl=HttpUtil.URLtoString(xslUrl);
  DocumentBuilderFactory documentBuilderFactory=DocumentBuilderFactory.newInstance();
  documentBuilderFactory.setFeature("http://apache.org/xml/features/disallow-doctype-decl",!xslContentConfiguration.isXmlDoctypeDeclarationAllowed());
  documentBuilderFactory.setFeature("http://xml.org/sax/features/external-general-entities",xslContentConfiguration.isXmlExternalGeneralEntitiesAllowed());
  documentBuilderFactory.setFeature("http://xml.org/sax/features/external-parameter-entities",xslContentConfiguration.isXmlExternalGeneralEntitiesAllowed());
  documentBuilderFactory.setNamespaceAware(true);
  DocumentBuilder documentBuilder=documentBuilderFactory.newDocumentBuilder();
  Document xmlDocument=documentBuilder.parse(new ByteArrayInputStream(xml.getBytes()));
  Document xslDocument=documentBuilder.parse(new ByteArrayInputStream(xsl.getBytes()));
  Source xmlSource=new DOMSource(xmlDocument);
  Source xslSource=new DOMSource(xslDocument);
  TransformerFactory transformerFactory=TransformerFactory.newInstance();
  transformerFactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING,xslContentConfiguration.isXslSecureProcessingEnabled());
  Transformer transformer=transformerFactory.newTransformer(xslSource);
  UnsyncByteArrayOutputStream unsyncByteArrayOutputStream=new UnsyncByteArrayOutputStream();
  transformer.transform(xmlSource,new StreamResult(unsyncByteArrayOutputStream));
  return unsyncByteArrayOutputStream.toString();
}
