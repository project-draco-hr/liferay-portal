{
  String xml=HttpUtil.URLtoString(xmlUrl);
  String xsl=HttpUtil.URLtoString(xslUrl);
  DocumentBuilderFactory documentBuilderFactory=DocumentBuilderFactory.newInstance();
  documentBuilderFactory.setFeature(_FEATURE_DISALLOW_DOCTYPE_DECLARATION,!xslContentConfiguration.isXmlDoctypeDeclarationAllowed());
  documentBuilderFactory.setFeature(_FEATURE_EXTERNAL_GENERAL_ENTITIES,xslContentConfiguration.isXmlExternalGeneralEntitiesAllowed());
  documentBuilderFactory.setFeature(_FEATURE_EXTERNAL_PARAMETER_ENTITIES,xslContentConfiguration.isXmlExternalGeneralEntitiesAllowed());
  documentBuilderFactory.setNamespaceAware(true);
  DocumentBuilder documentBuilder=documentBuilderFactory.newDocumentBuilder();
  Document xmlDocument=documentBuilder.parse(new ByteArrayInputStream(xml.getBytes()));
  Document xslDocument=documentBuilder.parse(new ByteArrayInputStream(xsl.getBytes()));
  Source xmlSource=new DOMSource(xmlDocument);
  Source xslSource=new DOMSource(xslDocument);
  TransformerFactory transformerFactory=TransformerFactory.newInstance();
  transformerFactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING,xslContentConfiguration.isXslSecureProcessingEnabled());
  Transformer transformer=transformerFactory.newTransformer(xslSource);
  UnsyncByteArrayOutputStream unsyncByteArrayOutputStream=new UnsyncByteArrayOutputStream();
  transformer.transform(xmlSource,new StreamResult(unsyncByteArrayOutputStream));
  return unsyncByteArrayOutputStream.toString();
}
