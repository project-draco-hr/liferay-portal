{
  String content=FileUtil.read(propsFile);
  BufferedReader br=new BufferedReader(new UnsyncStringReader(content));
  BufferedWriter bw=new BufferedWriter(new FileWriter(propsFile));
  Set<String> messages=new TreeSet<String>();
  boolean begin=false;
  String line=null;
  while ((line=br.readLine()) != null) {
    int pos=line.indexOf("=");
    if (pos != -1) {
      String key=line.substring(0,pos);
      String value=line.substring(pos + 1,line.length());
      messages.add(key + "=" + value);
    }
 else {
      if (begin == true && line.equals("")) {
        _sortAndWrite(bw,messages);
      }
      if (line.equals("")) {
        begin=!begin;
      }
      bw.write(line);
      bw.newLine();
    }
    bw.flush();
  }
  if (messages.size() > 0) {
    _sortAndWrite(bw,messages);
  }
  br.close();
  bw.close();
  return FileUtil.read(propsFile);
}
