{
  try {
    FreeMarkerRenderer freeMarkerRenderer=new FreeMarkerRenderer("com/liferay/document/library/google/docs/context/" + "dependencies/google_file_picker.ftl");
    PortletPreferences companyPortletPreferences=PrefsPropsUtil.getPreferences(_themeDisplay.getCompanyId());
    String googleAppsAPIKey=companyPortletPreferences.getValue("googleAppsAPIKey",null);
    String googleClientId=companyPortletPreferences.getValue("googleClientId",null);
    freeMarkerRenderer.setAttribute("googleAppsAPIKey",googleAppsAPIKey);
    freeMarkerRenderer.setAttribute("googleClientId",googleClientId);
    freeMarkerRenderer.setAttribute("namespace",_namespace);
    freeMarkerRenderer.setAttribute("onFilePickCallback",_onFilePickCallback);
    return freeMarkerRenderer.render();
  }
 catch (  IOException|TemplateException e) {
    throw new PortalException(e);
  }
}
