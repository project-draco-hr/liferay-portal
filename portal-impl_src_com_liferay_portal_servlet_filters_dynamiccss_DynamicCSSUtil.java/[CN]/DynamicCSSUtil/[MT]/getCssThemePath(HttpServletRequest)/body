{
  ThemeDisplay themeDisplay=null;
  if (request != null) {
    themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  }
  if (themeDisplay != null) {
    return themeDisplay.getPathThemeCss();
  }
  long companyId=PortalUtil.getCompanyId(request);
  String themeId=ParamUtil.getString(request,"themeId");
  if (Validator.isNotNull(themeId)) {
    try {
      Theme theme=ThemeLocalServiceUtil.getTheme(companyId,themeId,false);
      String themeStaticResourcePath=theme.getStaticResourcePath();
      return themeStaticResourcePath + theme.getCssPath();
    }
 catch (    SystemException e) {
      _log.error(e,e);
    }
  }
  return null;
}
