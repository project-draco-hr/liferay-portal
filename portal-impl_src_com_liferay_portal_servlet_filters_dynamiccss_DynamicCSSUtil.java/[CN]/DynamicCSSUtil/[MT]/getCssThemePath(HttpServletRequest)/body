{
  if (request == null) {
    return null;
  }
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  if (themeDisplay != null) {
    return themeDisplay.getPathThemeCss();
  }
  long companyId=PortalUtil.getCompanyId(request);
  String themeId=ParamUtil.getString(request,"themeId");
  if (Validator.isNull(themeId)) {
    return null;
  }
  try {
    Theme theme=ThemeLocalServiceUtil.getTheme(companyId,themeId,false);
    String themeStaticResourcePath=theme.getStaticResourcePath();
    return themeStaticResourcePath.concat(theme.getCssPath());
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
  return null;
}
