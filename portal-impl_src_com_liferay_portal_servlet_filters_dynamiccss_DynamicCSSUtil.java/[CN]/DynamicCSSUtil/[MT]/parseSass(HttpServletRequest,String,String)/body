{
  String cssThemePath=getCssThemePath(request,cssRealPath);
  if (!DynamicCSSFilter.ENABLED || (cssThemePath == null)) {
    return content;
  }
  StopWatch stopWatch=null;
  if (_log.isDebugEnabled()) {
    stopWatch=new StopWatch();
    stopWatch.start();
  }
  Map<String,Object> inputObjects=new HashMap<String,Object>();
  inputObjects.put("content",content);
  inputObjects.put("cssRealPath",cssRealPath);
  inputObjects.put("cssThemePath",cssThemePath);
  inputObjects.put("sassCachePath",_SASS_DIR);
  UnsyncByteArrayOutputStream unsyncByteArrayOutputStream=new UnsyncByteArrayOutputStream();
  UnsyncPrintWriter unsyncPrintWriter=UnsyncPrintWriterPool.borrow(unsyncByteArrayOutputStream);
  inputObjects.put("out",unsyncPrintWriter);
  _rubyExecutor.eval(null,inputObjects,null,_rubyScript);
  unsyncPrintWriter.flush();
  String parsedContent=unsyncByteArrayOutputStream.toString();
  if (_log.isDebugEnabled()) {
    _log.debug("Parsing SASS for " + cssRealPath + " takes "+ stopWatch.getTime()+ " ms");
  }
  if (Validator.isNotNull(parsedContent)) {
    return parsedContent;
  }
  return content;
}
