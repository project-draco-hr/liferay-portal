{
  String sourceFilePathName=syncFile.getFilePathName();
  String targetFilePathName=filePath.toString();
  syncFile.setFilePathName(targetFilePathName);
  syncFile.setLocalSyncTime(System.currentTimeMillis());
  syncFile.setName(String.valueOf(filePath.getFileName()));
  syncFile.setParentFolderId(parentFolderId);
  update(syncFile);
  if (syncFile.isFile() || (syncFile.getTypePK() == 0)) {
    return syncFile;
  }
  List<SyncFile> childSyncFiles=findSyncFiles(syncFile.getTypePK(),syncFile.getSyncAccountId());
  for (  SyncFile childSyncFile : childSyncFiles) {
    String childFilePathName=childSyncFile.getFilePathName();
    childFilePathName=childFilePathName.replace(sourceFilePathName,targetFilePathName);
    if (childSyncFile.isFolder()) {
      updateSyncFile(Paths.get(childFilePathName),childSyncFile.getParentFolderId(),childSyncFile);
    }
 else {
      childSyncFile.setFilePathName(childFilePathName);
      update(childSyncFile);
    }
  }
  return syncFile;
}
