{
  File archetypeFile=null;
  String archetypeFileName=artifactId + ".jar";
  try {
    File file=FileUtil.getJarFile();
    if (file.isDirectory()) {
      Path jarDirPath=file.toPath();
      Path archetypePath=jarDirPath.resolve(archetypeFileName);
      archetypeFile=archetypePath.toFile();
    }
 else {
      try (JarFile jarFile=new JarFile(file)){
        Enumeration<JarEntry> enumeration=jarFile.entries();
        while (enumeration.hasMoreElements()) {
          JarEntry jarEntry=enumeration.nextElement();
          if (jarEntry.isDirectory()) {
            continue;
          }
          String name=jarEntry.getName();
          if (!name.equals(archetypeFileName)) {
            continue;
          }
          Path archetypePath=Files.createTempFile("temp-archetype",null);
          Files.copy(jarFile.getInputStream(jarEntry),archetypePath);
          archetypeFile=archetypePath.toFile();
          archetypeFile.deleteOnExit();
          break;
        }
      }
     }
  }
 catch (  Exception e) {
    throw new UnknownArchetype(e);
  }
  if (archetypeFile == null) {
    throw new UnknownArchetype();
  }
  return archetypeFile;
}
