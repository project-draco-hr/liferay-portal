{
  FilesetArchetypeGenerator filesetArchetypeGenerator=new DefaultFilesetArchetypeGenerator();
  _setField(DefaultFilesetArchetypeGenerator.class,"archetypeArtifactManager",filesetArchetypeGenerator,_getArchetypeArtifactManager());
  _getLoggerField().set(filesetArchetypeGenerator,_logger);
  DefaultArchetypeFilesResolver defaultArchetypeFilesResolver=new DefaultArchetypeFilesResolver();
  _setField(DefaultFilesetArchetypeGenerator.class,"archetypeFilesResolver",filesetArchetypeGenerator,defaultArchetypeFilesResolver);
  DefaultVelocityComponent velocityComponent=new DefaultVelocityComponent();
  _getLoggerField().set(velocityComponent,_logger);
  Properties velocityProps=new Properties();
  velocityProps.setProperty(RuntimeConstants.RESOURCE_LOADER,"classpath");
  velocityProps.setProperty("classpath.resource.loader.class",ClasspathResourceLoader.class.getName());
  _setField(DefaultVelocityComponent.class,"properties",velocityComponent,velocityProps);
  _setField(DefaultFilesetArchetypeGenerator.class,"velocity",filesetArchetypeGenerator,velocityComponent);
  velocityComponent.initialize();
  return filesetArchetypeGenerator;
}
