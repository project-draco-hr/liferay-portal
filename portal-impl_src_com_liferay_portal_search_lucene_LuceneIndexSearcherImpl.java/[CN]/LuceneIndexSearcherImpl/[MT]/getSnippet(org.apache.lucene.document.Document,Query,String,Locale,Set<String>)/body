{
  String localizedName=DocumentImpl.getLocalizedName(locale,field);
  String[] values=doc.getValues(localizedName);
  if ((values == null) || (values.length == 0)) {
    values=doc.getValues(field);
  }
 else {
    field=localizedName;
  }
  String snippet=null;
  if (Validator.isNull(values)) {
    return snippet;
  }
  String s=StringUtil.merge(values);
  TermCollectingFormatter termCollectingFormatter=new TermCollectingFormatter();
  try {
    snippet=LuceneHelperUtil.getSnippet((org.apache.lucene.search.Query)QueryTranslatorUtil.translate(query),field,s,termCollectingFormatter);
    matchingTerms.addAll(termCollectingFormatter.getCollectedTerms());
  }
 catch (  ParseException pe) {
    _log.error("Query " + query,pe);
  }
  return snippet;
}
