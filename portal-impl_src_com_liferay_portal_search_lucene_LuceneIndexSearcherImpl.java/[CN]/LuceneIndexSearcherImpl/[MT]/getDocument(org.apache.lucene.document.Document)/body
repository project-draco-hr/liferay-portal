{
  DocumentImpl newDoc=new DocumentImpl();
  List<org.apache.lucene.document.Field> oldFields=oldDoc.getFields();
  for (  org.apache.lucene.document.Field oldField : oldFields) {
    String[] values=oldDoc.getValues(oldField.name());
    if ((values != null) && (values.length > 1)) {
      Field newField=new Field(oldField.name(),values,oldField.isTokenized());
      newDoc.add(newField);
    }
 else {
      Field newField=new Field(oldField.name(),oldField.stringValue(),oldField.isTokenized());
      newDoc.add(newField);
    }
  }
  return newDoc;
}
