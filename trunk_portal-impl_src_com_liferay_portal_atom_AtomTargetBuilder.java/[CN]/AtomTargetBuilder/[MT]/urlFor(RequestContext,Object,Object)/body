{
  String url=String.valueOf(requestContext.getBaseUri());
  if (url.endsWith(StringPool.SLASH)) {
    url=url.substring(0,url.length() - 1);
  }
  url+=requestContext.getTargetPath();
  String query=StringPool.BLANK;
  int questionIndex=url.indexOf(CharPool.QUESTION);
  if (questionIndex != -1) {
    query=url.substring(questionIndex);
    url=url.substring(0,questionIndex);
  }
  String keyString=key.toString();
  if (keyString.equals(TargetType.SERVICE)) {
    return url + query;
  }
  if (!keyString.equals(TargetType.COLLECTION)) {
    return null;
  }
  String collectionName=CharPool.SLASH + (String)param;
  if (url.endsWith(collectionName)) {
    return url + query;
  }
  if (url.contains(collectionName + CharPool.SLASH)) {
    int collectionIndex=url.indexOf(collectionName);
    collectionIndex+=collectionName.length() + 1;
    url=url.substring(0,collectionIndex);
    return url;
  }
  return url + collectionName + query;
}
