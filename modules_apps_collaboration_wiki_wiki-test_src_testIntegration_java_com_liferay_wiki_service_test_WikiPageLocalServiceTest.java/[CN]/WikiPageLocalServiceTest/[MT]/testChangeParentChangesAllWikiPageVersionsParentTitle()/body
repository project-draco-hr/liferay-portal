{
  WikiTestUtil.addPage(TestPropsValues.getUserId(),_group.getGroupId(),_node.getNodeId(),"ParentPage1",true);
  WikiTestUtil.addPage(TestPropsValues.getUserId(),_group.getGroupId(),_node.getNodeId(),"ParentPage2",true);
  ServiceContext serviceContext=ServiceContextTestUtil.getServiceContext(_group.getGroupId());
  WikiPage childPage=WikiTestUtil.addPage(TestPropsValues.getUserId(),_node.getNodeId(),"ChildPage",RandomTestUtil.randomString(),"ParentPage1",true,serviceContext);
  WikiTestUtil.updatePage(childPage,TestPropsValues.getUserId(),StringUtil.randomString(),serviceContext);
  WikiPageLocalServiceUtil.changeParent(TestPropsValues.getUserId(),_node.getNodeId(),childPage.getTitle(),"ParentPage2",serviceContext);
  List<WikiPage> pages=WikiPageLocalServiceUtil.getPages(childPage.getNodeId(),childPage.getTitle(),QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  Assert.assertEquals(3,pages.size());
  for (  WikiPage curWikiPage : pages) {
    Assert.assertEquals("ParentPage2",curWikiPage.getParentTitle());
  }
}
