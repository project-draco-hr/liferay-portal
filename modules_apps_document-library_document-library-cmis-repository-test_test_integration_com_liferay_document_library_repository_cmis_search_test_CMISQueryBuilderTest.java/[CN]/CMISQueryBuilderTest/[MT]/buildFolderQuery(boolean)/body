{
  when(_mockBeanLocator.locate(DLAppService.class.getName())).thenReturn(_dlAppService);
  when(_mockBeanLocator.locate(RepositoryEntryLocalService.class.getName())).thenReturn(_repositoryEntryLocalService);
  when(_repositoryEntry.getMappedId()).thenReturn("1000");
  when(_repositoryEntryLocalService.fetchRepositoryEntry(Matchers.eq(1000l))).thenReturn(_repositoryEntry);
  SearchContext searchContext=getSearchContext();
  searchContext.setFolderIds(new long[]{1000});
  searchContext.setKeywords("test");
  BooleanQuery searchQuery=RepositorySearchQueryBuilderUtil.getFullQuery(searchContext);
  QueryConfig queryConfig=searchContext.getQueryConfig();
  queryConfig.setAttribute("capabilityQuery",CapabilityQuery.BOTHCOMBINED.value());
  queryConfig.setSearchSubfolders(searchSubfolders);
  return CMISSearchQueryBuilderUtil.buildQuery(searchContext,searchQuery);
}
