{
  final WorkflowDefinition definition=_context.mock(WorkflowDefinition.class);
  final long callingUserId=1;
  _context.checking(new Expectations(){
{
      oneOf(_factory).createCredential(callingUserId);
      will(returnValue(null));
      oneOf(_manager).deployWorkflowDefinition(definition,callingUserId);
    }
  }
);
  WorkflowDefinitionRequest request=WorkflowDefinitionRequest.createDeployWorkflowDefinitionRequest(definition,callingUserId);
  assertFalse(request.hasReturnValue());
  request.execute(_manager);
}
