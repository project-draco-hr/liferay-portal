{
  List<FileEntry> fileEntryAttachments=new ArrayList<>(tempFileEntryAttachments.size());
  String content=ParamUtil.getString(actionRequest,"content");
  for (  FileEntry tempAttachment : tempFileEntryAttachments) {
    String fileName=ParamUtil.getString(actionRequest,"fileName",StringUtil.randomString());
    InputStream inputStream=tempAttachment.getContentStream();
    File file=null;
    try {
      file=FileUtil.createTempFile(inputStream);
      String mimeType=MimeTypesUtil.getContentType(file,fileName);
      FileEntry fileEntryAttachment=BlogsEntryServiceUtil.addEntryAttachment(groupId,entry.getEntryId(),fileName,file,mimeType);
      fileEntryAttachments.add(fileEntryAttachment);
      ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
      content=StringUtil.replace(content,getAttachmentLink(tempAttachment,themeDisplay),getAttachmentLink(fileEntryAttachment,themeDisplay));
    }
 catch (    IOException ioe) {
      throw new SystemException("Unable to write temporary file",ioe);
    }
 finally {
      FileUtil.delete(file);
    }
  }
  return content;
}
