{
  Set<String> resourcePaths=servletContext.getResourcePaths(resourcePath);
  if (resourcePaths == null) {
    return;
  }
  List<File> images=new ArrayList<File>(resourcePaths.size());
  for (  String curResourcePath : resourcePaths) {
    if (curResourcePath.endsWith(StringPool.SLASH)) {
      _setSpriteImages(servletContext,theme,curResourcePath);
    }
 else     if (curResourcePath.endsWith(".png")) {
      images.add(new File(servletContext.getRealPath(curResourcePath)));
    }
  }
  String spriteFileName=".sprite.png";
  String spritePropertiesFileName=".sprite.properties";
  String spritePropertiesRootPath=servletContext.getRealPath(theme.getImagesPath());
  Properties spriteProperties=SpriteProcessorUtil.generate(images,spriteFileName,spritePropertiesFileName,spritePropertiesRootPath,16,16,10 * 1024);
  if (spriteProperties == null) {
    return;
  }
  spriteFileName=resourcePath.substring(theme.getImagesPath().length(),resourcePath.length()) + spriteFileName;
  theme.setSpriteImages(spriteFileName,spriteProperties);
}
