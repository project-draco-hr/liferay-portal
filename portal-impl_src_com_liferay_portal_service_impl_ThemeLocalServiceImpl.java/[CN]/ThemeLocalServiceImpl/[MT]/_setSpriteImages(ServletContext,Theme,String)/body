{
  if (!resourcePath.startsWith(StringPool.SLASH)) {
    resourcePath=StringPool.SLASH.concat(resourcePath);
  }
  Set<String> resourcePaths=servletContext.getResourcePaths(resourcePath);
  if ((resourcePaths == null) || resourcePaths.isEmpty()) {
    return;
  }
  List<URL> imageURLs=new ArrayList<>(resourcePaths.size());
  for (  String curResourcePath : resourcePaths) {
    if (curResourcePath.endsWith(StringPool.SLASH)) {
      _setSpriteImages(servletContext,theme,curResourcePath);
    }
 else     if (curResourcePath.endsWith(".png")) {
      URL imageURL=servletContext.getResource(curResourcePath);
      if (imageURL != null) {
        imageURLs.add(imageURL);
      }
 else {
        _log.error("Resource URL for " + curResourcePath + " is null");
      }
    }
  }
  String spriteRootDirName=PropsValues.SPRITE_ROOT_DIR;
  String spriteFileName=resourcePath.concat(PropsValues.SPRITE_FILE_NAME);
  String spritePropertiesFileName=resourcePath.concat(PropsValues.SPRITE_PROPERTIES_FILE_NAME);
  String rootPath=ServletContextUtil.getRootPath(servletContext);
  Properties spriteProperties=SpriteProcessorUtil.generate(servletContext,imageURLs,spriteRootDirName,spriteFileName,spritePropertiesFileName,rootPath,16,16,10240);
  if (spriteProperties == null) {
    return;
  }
  String contextPath=servletContext.getContextPath();
  spriteFileName=contextPath.concat(SpriteProcessor.PATH).concat(spriteFileName);
  theme.setSpriteImages(spriteFileName,spriteProperties);
}
