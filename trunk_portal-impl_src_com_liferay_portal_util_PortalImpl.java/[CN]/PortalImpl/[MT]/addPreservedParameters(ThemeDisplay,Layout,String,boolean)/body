{
  if (doAsUser) {
    if (Validator.isNotNull(themeDisplay.getDoAsUserId())) {
      url=HttpUtil.addParameter(url,"doAsUserId",themeDisplay.getDoAsUserId());
    }
    if (Validator.isNotNull(themeDisplay.getDoAsUserLanguageId())) {
      url=HttpUtil.addParameter(url,"doAsUserLanguageId",themeDisplay.getDoAsUserLanguageId());
    }
  }
  if (layout.isTypeControlPanel()) {
    if (themeDisplay.getDoAsGroupId() > 0) {
      url=HttpUtil.addParameter(url,"doAsGroupId",themeDisplay.getDoAsGroupId());
    }
    if (themeDisplay.getRefererPlid() != LayoutConstants.DEFAULT_PLID) {
      url=HttpUtil.addParameter(url,"refererPlid",themeDisplay.getRefererPlid());
    }
    if (Validator.isNotNull(themeDisplay.getControlPanelCategory())) {
      url=HttpUtil.addParameter(url,"controlPanelCategory",themeDisplay.getControlPanelCategory());
    }
  }
  return url;
}
