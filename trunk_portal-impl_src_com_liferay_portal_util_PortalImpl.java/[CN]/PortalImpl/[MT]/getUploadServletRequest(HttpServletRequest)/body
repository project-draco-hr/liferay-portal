{
  HttpServletRequestWrapper requestWrapper=null;
  if (request instanceof HttpServletRequestWrapper) {
    requestWrapper=(HttpServletRequestWrapper)request;
  }
  UploadServletRequest uploadRequest=null;
  while (uploadRequest == null) {
    if (requestWrapper instanceof UploadServletRequest) {
      uploadRequest=(UploadServletRequest)requestWrapper;
    }
 else {
      HttpServletRequest parentRequest=(HttpServletRequest)requestWrapper.getRequest();
      if (!(parentRequest instanceof HttpServletRequestWrapper)) {
        uploadRequest=new UploadServletRequestImpl(parentRequest);
        break;
      }
 else {
        requestWrapper=(HttpServletRequestWrapper)parentRequest;
      }
    }
  }
  return uploadRequest;
}
