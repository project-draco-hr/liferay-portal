{
  User user=userPersistence.findByPrimaryKey(userId);
  if (LDAPSettingsUtil.isPasswordPolicyEnabled(user.getCompanyId())) {
    return null;
  }
  PasswordPolicyRel passwordPolicyRel=passwordPolicyRelLocalService.fetchPasswordPolicyRel(User.class.getName(),userId);
  if (passwordPolicyRel != null) {
    return getPasswordPolicy(passwordPolicyRel.getPasswordPolicyId());
  }
 else {
    long[] organizationIds=user.getOrganizationIds();
    return getPasswordPolicy(user.getCompanyId(),organizationIds);
  }
}
