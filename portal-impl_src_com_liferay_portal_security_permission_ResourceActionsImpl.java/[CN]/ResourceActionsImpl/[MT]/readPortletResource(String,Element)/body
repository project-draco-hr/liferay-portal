{
  String name=portletResourceElement.elementTextTrim("portlet-name");
  if (servletContextName != null) {
    name=name.concat(PortletConstants.WAR_SEPARATOR).concat(servletContextName);
  }
  name=JS.getSafeName(name);
  PortletResourceActionsBag portletResourceActionsBag=getPortletResourceActionsBag(name);
  Set<String> portletResourceActions=portletResourceActionsBag.getResourceActions();
  readSupportsActions(portletResourceElement,portletResourceActions);
  portletResourceActions.addAll(getPortletMimeTypeActions(name));
  if (!name.equals(PortletKeys.PORTAL)) {
    checkPortletActions(name,portletResourceActions);
  }
  if (portletResourceActions.size() > 64) {
    throw new ResourceActionsException("There are more than 64 actions for resource " + name);
  }
  Set<String> portletResourceGroupDefaultActions=portletResourceActionsBag.getResourceGroupDefaultActions();
  readGroupDefaultActions(portletResourceElement,portletResourceGroupDefaultActions);
  Set<String> portletResourceGuestDefaultActions=portletResourceActionsBag.getResourceGuestDefaultActions();
  readGuestDefaultActions(portletResourceElement,portletResourceGuestDefaultActions);
  Set<String> portletResourceGuestUnsupportedActions=portletResourceActionsBag.getResourceGuestUnsupportedActions();
  readGuestUnsupportedActions(portletResourceElement,portletResourceGuestUnsupportedActions,portletResourceGuestDefaultActions);
  Set<String> portletResourceLayoutManagerActions=portletResourceActionsBag.getResourceLayoutManagerActions();
  readLayoutManagerActions(portletResourceElement,portletResourceLayoutManagerActions,portletResourceActions);
}
