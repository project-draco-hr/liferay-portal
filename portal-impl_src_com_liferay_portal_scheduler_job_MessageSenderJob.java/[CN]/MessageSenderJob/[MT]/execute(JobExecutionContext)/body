{
  try {
    JobDetail jobDetail=jobExecutionContext.getJobDetail();
    JobDataMap jobDataMap=jobDetail.getJobDataMap();
    String destination=jobDataMap.getString(SchedulerEngine.DESTINATION);
    Message message=(Message)jobDataMap.get(SchedulerEngine.MESSAGE);
    if (message == null) {
      message=new Message();
    }
    Date scheduledFireTime=jobExecutionContext.getScheduledFireTime();
    message.put("scheduledFireTime",scheduledFireTime);
    String fullJobName=jobDetail.getFullName();
    Scheduler scheduler=jobExecutionContext.getScheduler();
    SchedulerContext schedulerContext=scheduler.getContext();
    message.put(SchedulerEngine.JOB_STATE,schedulerContext.get(fullJobName));
    if (jobExecutionContext.getNextFireTime() == null) {
      message.put(SchedulerEngine.DISABLE,true);
    }
    MessageBusUtil.sendMessage(destination,message);
  }
 catch (  Exception e) {
    _log.error("Unable to execute job",e);
  }
}
