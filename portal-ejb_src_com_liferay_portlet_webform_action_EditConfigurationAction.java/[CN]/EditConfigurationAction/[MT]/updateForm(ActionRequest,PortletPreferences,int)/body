{
  String title=ParamUtil.getString(req,"title");
  String description=ParamUtil.getString(req,"description");
  String subject=ParamUtil.getString(req,"subject");
  String email=ParamUtil.getString(req,"email");
  if (Validator.isNull(title)) {
    SessionErrors.add(req,"titleRequired");
  }
  if (Validator.isNull(subject)) {
    SessionErrors.add(req,"subjectRequired");
  }
  if (Validator.isNull(email)) {
    SessionErrors.add(req,"emailRequired");
  }
  if (Validator.isNotNull(email) && !Validator.isEmailAddress(email)) {
    SessionErrors.add(req,"invalidEmail");
  }
  if (!SessionErrors.isEmpty(req)) {
    return;
  }
  prefs.setValue("title",title);
  prefs.setValue("description",description);
  prefs.setValue("email",email);
  prefs.setValue("subject",subject);
  for (int i=1; i <= maxNumOfFields; i++) {
    String fieldLabel=ParamUtil.getString(req,"fieldLabel" + i,"");
    String fieldType=ParamUtil.getString(req,"fieldType" + i,"");
    String fieldOptions=ParamUtil.getString(req,"fieldOptions" + i,"");
    prefs.setValue("fieldLabel" + i,fieldLabel);
    prefs.setValue("fieldType" + i,fieldType);
    prefs.setValue("fieldOptions" + i,fieldOptions);
  }
}
