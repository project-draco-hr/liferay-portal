{
  Map<String,String> fileBrowserParamsMap=(Map<String,String>)inputEditorTaglibAttributes.get("liferay-ui:input-editor:fileBrowserParams");
  long resourcePrimKey=0;
  if (fileBrowserParamsMap != null) {
    resourcePrimKey=GetterUtil.getLong(fileBrowserParamsMap.get("resourcePrimKey"));
  }
  ItemSelectorCriterion[] itemSelectorCriteria=new ItemSelectorCriterion[0];
  List<ItemSelectorReturnType> desiredItemSelectorReturnTypes=new ArrayList<>();
  desiredItemSelectorReturnTypes.add(new FileEntryItemSelectorReturnType());
  if (resourcePrimKey != 0) {
    ItemSelectorCriterion attachmentItemSelectorCriterion=new KnowlegeBaseAttachmentItemSelectorCriterion(resourcePrimKey);
    attachmentItemSelectorCriterion.setDesiredItemSelectorReturnTypes(desiredItemSelectorReturnTypes);
    itemSelectorCriteria=ArrayUtil.append(itemSelectorCriteria,attachmentItemSelectorCriterion);
  }
  ItemSelectorCriterion imageItemSelectorCriterion=new ImageItemSelectorCriterion();
  imageItemSelectorCriterion.setDesiredItemSelectorReturnTypes(desiredItemSelectorReturnTypes);
  itemSelectorCriteria=ArrayUtil.append(itemSelectorCriteria,imageItemSelectorCriterion);
  ItemSelectorCriterion urlItemSelectorCriterion=new URLItemSelectorCriterion();
  List<ItemSelectorReturnType> urlDesiredItemSelectorReturnTypes=new ArrayList<>();
  urlDesiredItemSelectorReturnTypes.add(new URLItemSelectorReturnType());
  urlItemSelectorCriterion.setDesiredItemSelectorReturnTypes(urlDesiredItemSelectorReturnTypes);
  itemSelectorCriteria=ArrayUtil.append(itemSelectorCriteria,urlItemSelectorCriterion);
  String namespace=GetterUtil.getString(inputEditorTaglibAttributes.get("liferay-ui:input-editor:namespace"));
  String name=GetterUtil.getString(inputEditorTaglibAttributes.get("liferay-ui:input-editor:name"));
  PortletURL itemSelectorURL=_itemSelector.getItemSelectorURL(requestBackedPortletURLFactory,namespace + name + "selectItem",itemSelectorCriteria);
  jsonObject.put("filebrowserImageBrowseLinkUrl",itemSelectorURL.toString());
  jsonObject.put("filebrowserImageBrowseUrl",itemSelectorURL.toString());
}
