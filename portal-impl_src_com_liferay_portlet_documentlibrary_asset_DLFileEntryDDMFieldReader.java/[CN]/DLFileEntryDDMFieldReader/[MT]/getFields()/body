{
  Fields fields=new Fields();
  long classNameId=ClassNameLocalServiceUtil.getClassNameId(DLFileEntryMetadata.class);
  List<DDMStructure> ddmStructures=DDMStructureLocalServiceUtil.getClassStructures(_fileEntry.getCompanyId(),classNameId);
  for (  DDMStructure ddmStructure : ddmStructures) {
    DLFileEntryMetadata dlFileEntryMetadata=DLFileEntryMetadataLocalServiceUtil.fetchFileEntryMetadata(ddmStructure.getStructureId(),_fileVersion.getFileVersionId());
    if (dlFileEntryMetadata == null) {
      continue;
    }
    Fields ddmStorageFields=StorageEngineUtil.getFields(dlFileEntryMetadata.getDDMStorageId());
    for (    Field ddmStorageField : ddmStorageFields) {
      fields.put(ddmStorageField);
    }
  }
  return fields;
}
