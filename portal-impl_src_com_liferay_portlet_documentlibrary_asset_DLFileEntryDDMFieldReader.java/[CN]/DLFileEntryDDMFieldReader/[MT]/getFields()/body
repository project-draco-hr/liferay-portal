{
  long classNameId=ClassNameLocalServiceUtil.getClassNameId(DLFileEntryMetadata.class);
  Fields allFields=new Fields();
  List<DDMStructure> ddmStructures=DDMStructureLocalServiceUtil.getClassStructures(_fileEntry.getCompanyId(),classNameId);
  for (  DDMStructure ddmStructure : ddmStructures) {
    DLFileEntryMetadata dlFileEntryMetadata=DLFileEntryMetadataLocalServiceUtil.fetchFileEntryMetadata(ddmStructure.getStructureId(),_fileVersion.getFileVersionId());
    if (dlFileEntryMetadata == null) {
      continue;
    }
    Fields fields=StorageEngineUtil.getFields(dlFileEntryMetadata.getDDMStorageId());
    for (    Field field : fields) {
      allFields.put(field);
    }
  }
  return allFields;
}
