{
  Bundle bundle=FrameworkUtil.getBundle(NtlmCompanySettingsVerifyProcessTest.class);
  _bundleContext=bundle.getBundleContext();
  ServiceReference<CompanyLocalService> companyLocalServiceReference=_bundleContext.getServiceReference(CompanyLocalService.class);
  _companyLocalService=_bundleContext.getService(companyLocalServiceReference);
  ServiceReference<PrefsProps> prefsPropsServiceReference=_bundleContext.getServiceReference(PrefsProps.class);
  _prefsProps=_bundleContext.getService(prefsPropsServiceReference);
  ServiceReference<SettingsFactory> configurationAdminServiceReference=_bundleContext.getServiceReference(SettingsFactory.class);
  _settingsFactory=_bundleContext.getService(configurationAdminServiceReference);
  UnicodeProperties properties=new UnicodeProperties();
  properties.put(LegacyNtlmPropsKeys.NTLM_AUTH_DOMAIN,"testDomain");
  properties.put(LegacyNtlmPropsKeys.NTLM_AUTH_DOMAIN_CONTROLLER,"testDomainController");
  properties.put(LegacyNtlmPropsKeys.NTLM_AUTH_DOMAIN_CONTROLLER_NAME,"testDomainControllerName");
  properties.put(LegacyNtlmPropsKeys.NTLM_AUTH_ENABLED,StringPool.TRUE);
  properties.put(LegacyNtlmPropsKeys.NTLM_AUTH_NEGOTIATE_FLAGS,"testNegotiateFlags");
  properties.put(LegacyNtlmPropsKeys.NTLM_AUTH_SERVICE_ACCOUNT,"test@serviceAccount.com");
  properties.put(LegacyNtlmPropsKeys.NTLM_AUTH_SERVICE_PASSWORD,"testServicePassword");
  List<Company> companies=_companyLocalService.getCompanies(false);
  for (  Company company : companies) {
    _companyLocalService.updatePreferences(company.getCompanyId(),properties);
  }
}
