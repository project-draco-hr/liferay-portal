{
  List<TreeNode<HeadingNode>> treeNodes=tableOfContents.getChildNodes();
  if ((treeNodes == null) || treeNodes.isEmpty()) {
    return;
  }
  append("<ol>");
  for (  TreeNode<HeadingNode> treeNode : treeNodes) {
    append("<li class=\"toc-level-");
    append(depth);
    append("\">");
    HeadingNode headingNode=treeNode.getValue();
    String content=getUnformattedHeadingText(headingNode);
    append("<a class=\"wikipage\" href=\"");
    if (_viewPageURL != null) {
      String viewPageURLString=_viewPageURL.toString();
      int index=viewPageURLString.indexOf(StringPool.POUND);
      if (index != -1) {
        viewPageURLString=viewPageURLString.substring(0,index);
      }
      append(viewPageURLString);
    }
    append(StringPool.POUND);
    append(getHeadingMarkup(_page.getTitle(),content));
    append("\">");
    append(content);
    append("</a>");
    appendTableOfContents(treeNode,depth + 1);
    append("</li>");
  }
  append("</ol>");
}
