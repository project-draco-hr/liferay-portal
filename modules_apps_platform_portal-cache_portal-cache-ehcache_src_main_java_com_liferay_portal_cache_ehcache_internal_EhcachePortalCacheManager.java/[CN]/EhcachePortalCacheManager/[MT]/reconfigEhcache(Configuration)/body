{
  Map<String,CacheConfiguration> cacheConfigurations=configuration.getCacheConfigurations();
  for (  CacheConfiguration cacheConfiguration : cacheConfigurations.values()) {
    String portalCacheName=cacheConfiguration.getName();
synchronized (_cacheManager) {
      Ehcache ehcache=createEhcache(portalCacheName,cacheConfiguration);
      PortalCache<K,V> portalCache=portalCaches.get(portalCacheName);
      if (portalCache != null) {
        EhcachePortalCache<K,V> ehcachePortalCache=(EhcachePortalCache<K,V>)EhcacheUnwrapUtil.getWrappedPortalCache(portalCache);
        if (ehcachePortalCache != null) {
          ehcachePortalCache.reconfigEhcache(ehcache);
        }
 else {
          _log.error("Unable to reconfigure cache with name " + portalCacheName);
        }
      }
    }
  }
}
