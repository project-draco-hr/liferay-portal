{
  int oldStatus=entry.getStatus();
  User user=userPersistence.findByPrimaryKey(userId);
  Date now=new Date();
  entry.setStatus(serviceContext.getStatus());
  entry.setStatusByUserId(user.getUserId());
  entry.setStatusByUserName(user.getFullName());
  entry.setStatusDate(now);
  blogsEntryPersistence.update(entry,false);
  if ((serviceContext.getStatus() == StatusConstants.APPROVED) && (oldStatus != StatusConstants.APPROVED)) {
    assetEntryLocalService.updateVisible(BlogsEntry.class.getName(),entry.getEntryId(),true);
    if (reIndex) {
      reIndex(entry);
    }
  }
  if ((serviceContext.getStatus() != StatusConstants.APPROVED) && (oldStatus == StatusConstants.APPROVED)) {
    assetEntryLocalService.updateVisible(BlogsEntry.class.getName(),entry.getEntryId(),false);
  }
  if ((oldStatus != StatusConstants.APPROVED) && (serviceContext.getStatus() == StatusConstants.APPROVED)) {
    socialActivityLocalService.addActivity(userId,entry.getGroupId(),BlogsEntry.class.getName(),entry.getEntryId(),BlogsActivityKeys.ADD_ENTRY,StringPool.BLANK,0);
  }
  if (serviceContext.getStatus() == StatusConstants.APPROVED) {
    pingGoogle(entry,serviceContext);
    if (entry.getAllowTrackbacks()) {
      pingTrackbacks(entry,trackbacks,pingOldTrackbaks,serviceContext);
    }
  }
  return entry;
}
