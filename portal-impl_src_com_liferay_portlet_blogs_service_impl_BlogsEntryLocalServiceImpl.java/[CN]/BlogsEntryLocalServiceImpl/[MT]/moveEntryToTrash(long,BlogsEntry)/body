{
  int oldStatus=entry.getStatus();
  if (oldStatus == WorkflowConstants.STATUS_PENDING) {
    entry.setStatus(WorkflowConstants.STATUS_DRAFT);
    blogsEntryPersistence.update(entry,false);
  }
  updateStatus(userId,entry.getEntryId(),WorkflowConstants.STATUS_IN_TRASH,new ServiceContext());
  socialActivityLocalService.addActivity(userId,entry.getGroupId(),BlogsEntry.class.getName(),entry.getEntryId(),SocialActivityConstants.TYPE_MOVE_TO_TRASH,StringPool.BLANK,0);
  trashEntryLocalService.addTrashEntry(userId,entry.getGroupId(),BlogsEntry.class.getName(),entry.getEntryId(),entry.getStatus(),null,null);
  if (oldStatus == WorkflowConstants.STATUS_PENDING) {
    WorkflowInstanceLink workflowInstanceLink=workflowInstanceLinkLocalService.getWorkflowInstanceLink(entry.getCompanyId(),entry.getGroupId(),BlogsEntry.class.getName(),entry.getEntryId());
    workflowInstanceLinkLocalService.deleteWorkflowInstanceLink(workflowInstanceLink.getWorkflowInstanceLinkId());
  }
  return entry;
}
