{
  String xsd=structure.getXsd();
  Document structureDocument=null;
  try {
    structureDocument=SAXReaderUtil.read(xsd);
  }
 catch (  DocumentException de) {
    if (_log.isWarnEnabled()) {
      _log.warn(de,de);
    }
    return;
  }
  Element templateElement=templateDocument.getRootElement();
  XPath structureXPath=SAXReaderUtil.createXPath("//dynamic-element[.//meta-data/entry[@name=\"required\"]=" + "\"true\"]");
  List<Node> nodes=structureXPath.selectNodes(structureDocument);
  Iterator<Node> itr=nodes.iterator();
  while (itr.hasNext()) {
    Element element=(Element)itr.next();
    String name=element.attributeValue("name");
    XPath templateXPath=SAXReaderUtil.createXPath("//dynamic-element[@name=\"" + name + "\"]");
    if (!templateXPath.booleanValueOf(templateDocument)) {
      templateElement.add(element.createCopy());
    }
  }
}
