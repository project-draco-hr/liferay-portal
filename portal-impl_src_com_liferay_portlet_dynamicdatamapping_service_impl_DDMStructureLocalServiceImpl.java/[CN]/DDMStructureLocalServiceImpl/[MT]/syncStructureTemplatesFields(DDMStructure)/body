{
  long classNameId=classNameLocalService.getClassNameId(DDMStructure.class);
  List<DDMTemplate> templates=ddmTemplateLocalService.getTemplates(structure.getGroupId(),classNameId,structure.getStructureId(),DDMTemplateConstants.TEMPLATE_TYPE_FORM);
  DDMForm structureDDMForm=structure.getDDMForm();
  for (  DDMTemplate template : templates) {
    DDMForm templateDDMForm=DDMFormXSDDeserializerUtil.deserialize(template.getScript());
    syncStructureTemplatesFields(structure.getDDMForm(),templateDDMForm.getDDMFormFields(),template.getMode());
    if (template.getMode().equals(DDMTemplateConstants.TEMPLATE_MODE_CREATE)) {
      appendNewStructureRequiredFields(structureDDMForm.getDDMFormFields(),templateDDMForm.getDDMFormFields());
    }
    String script=DDMXMLUtil.formatXML(DDMFormXSDSerializerUtil.serialize(templateDDMForm));
    template.setScript(script);
    ddmTemplatePersistence.update(template);
  }
}
