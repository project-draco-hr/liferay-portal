{
  try {
    xsd=DDMXMLUtil.formatXML(xsd);
  }
 catch (  Exception e) {
    throw new StructureXsdException();
  }
  DDMStructure structure=ddmStructurePersistence.findByG_S(groupId,structureKey);
  validate(groupId,name,xsd);
  structure.setModifiedDate(serviceContext.getModifiedDate(null));
  structure.setName(name);
  structure.setDescription(description);
  structure.setXsd(xsd);
  structure.setStorageType(storageType);
  try {
    structure.setXsdDocument(SAXReaderUtil.read(xsd));
  }
 catch (  DocumentException de) {
  }
  ddmStructurePersistence.update(structure,false);
  return structure;
}
