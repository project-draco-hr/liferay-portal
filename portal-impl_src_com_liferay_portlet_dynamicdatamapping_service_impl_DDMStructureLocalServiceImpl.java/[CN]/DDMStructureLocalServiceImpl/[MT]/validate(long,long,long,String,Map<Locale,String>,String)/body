{
  structureKey=getStructureKey(structureKey);
  DDMStructure structure=ddmStructurePersistence.fetchByG_C_S(groupId,classNameId,structureKey);
  if (structure != null) {
    StructureDuplicateStructureKeyException sdske=new StructureDuplicateStructureKeyException();
    sdske.setStructureKey(structure.getStructureKey());
    throw sdske;
  }
  String parentXsd=StringPool.BLANK;
  DDMStructure parentStructure=ddmStructurePersistence.fetchByPrimaryKey(parentStructureId);
  if (parentStructure != null) {
    parentXsd=parentStructure.getCompleteXsd();
  }
  validate(nameMap,parentXsd,xsd);
}
