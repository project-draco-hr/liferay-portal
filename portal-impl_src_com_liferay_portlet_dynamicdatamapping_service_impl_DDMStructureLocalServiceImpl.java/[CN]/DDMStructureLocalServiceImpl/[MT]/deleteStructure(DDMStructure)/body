{
  if (!GroupThreadLocal.isDeleteInProcess()) {
    if (ddmStructureLinkPersistence.countByStructureId(structure.getStructureId()) > 0) {
      throw new RequiredStructureException(RequiredStructureException.REFERENCED_STRUCTURE_LINK);
    }
    if (ddmStructurePersistence.countByParentStructureId(structure.getStructureId()) > 0) {
      throw new RequiredStructureException(RequiredStructureException.REFERENCED_STRUCTURE);
    }
    long classNameId=classNameLocalService.getClassNameId(DDMStructure.class);
    if (ddmTemplatePersistence.countByG_C_C(structure.getGroupId(),classNameId,structure.getPrimaryKey()) > 0) {
      throw new RequiredStructureException(RequiredStructureException.REFERENCED_TEMPLATE);
    }
  }
  ddmStructurePersistence.remove(structure);
  resourceLocalService.deleteResource(structure.getCompanyId(),DDMStructure.class.getName(),ResourceConstants.SCOPE_INDIVIDUAL,structure.getStructureId());
}
