{
  PKUpgradeColumnImpl pkUpgradeColumn=new PKUpgradeColumnImpl("folderId",true);
  UpgradeTable upgradeTable=new DefaultUpgradeTableImpl(IGFolderImpl.TABLE_NAME,IGFolderImpl.TABLE_COLUMNS,pkUpgradeColumn);
  upgradeTable.updateTable();
  ValueMapper folderIdMapper=new DefaultPKMapper(pkUpgradeColumn.getValueMapper());
  UpgradeColumn upgradeParentFolderIdColumn=new SwapUpgradeColumnImpl("parentFolderId",folderIdMapper);
  upgradeTable=new DefaultUpgradeTableImpl(IGFolderImpl.TABLE_NAME,IGFolderImpl.TABLE_COLUMNS,upgradeParentFolderIdColumn);
  upgradeTable.updateTable();
  UpgradeColumn upgradeFolderIdColumn=new SwapUpgradeColumnImpl("folderId",folderIdMapper);
  pkUpgradeColumn=new PKUpgradeColumnImpl("imageId",true);
  upgradeTable=new DefaultUpgradeTableImpl(IGImageImpl.TABLE_NAME,IGImageImpl.TABLE_COLUMNS,pkUpgradeColumn,upgradeFolderIdColumn);
  upgradeTable.updateTable();
  ValueMapper imageIdMapper=pkUpgradeColumn.getValueMapper();
  ResourceUtil.upgradePrimKey(folderIdMapper,IGFolder.class.getName());
  ResourceUtil.upgradePrimKey(imageIdMapper,IGImage.class.getName());
  CounterLocalServiceUtil.reset(IGFolder.class.getName());
  CounterLocalServiceUtil.reset(IGImage.class.getName());
  DBUtil.getInstance().executeSQL(_UPGRADE_SCHEMA);
}
