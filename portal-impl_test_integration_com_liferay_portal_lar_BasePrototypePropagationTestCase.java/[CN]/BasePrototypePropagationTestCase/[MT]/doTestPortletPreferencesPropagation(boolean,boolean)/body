{
  setLinkEnabled(linkEnabled);
  PortletPreferences layoutSetPrototypePortletPreferences=LayoutTestUtil.getPortletPreferences(prototypeLayout,journalContentPortletId);
  layoutSetPrototypePortletPreferences.setValue("articleId",StringPool.BLANK);
  layoutSetPrototypePortletPreferences.setValue("showAvailableLocales",Boolean.FALSE.toString());
  if (globalScope) {
    layoutSetPrototypePortletPreferences.setValue("groupId",String.valueOf(globalGroupId));
    layoutSetPrototypePortletPreferences.setValue("lfrScopeType","company");
  }
  LayoutTestUtil.updatePortletPreferences(prototypeLayout.getPlid(),journalContentPortletId,layoutSetPrototypePortletPreferences);
  PortletPreferences portletPreferences=LayoutTestUtil.getPortletPreferences(layout,journalContentPortletId);
  if (linkEnabled) {
    if (globalScope) {
      Assert.assertEquals(StringPool.BLANK,portletPreferences.getValue("articleId",StringPool.BLANK));
    }
 else {
      Assert.assertEquals(journalArticle.getArticleId(),portletPreferences.getValue("articleId",StringPool.BLANK));
    }
    Assert.assertEquals(Boolean.FALSE.toString(),portletPreferences.getValue("showAvailableLocales",StringPool.BLANK));
  }
 else {
    Assert.assertEquals(journalArticle.getArticleId(),portletPreferences.getValue("articleId",StringPool.BLANK));
  }
}
