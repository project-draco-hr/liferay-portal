{
  String key=RandomTestUtil.randomString();
  LocaleUtil.setDefault(LocaleUtil.US.getLanguage(),LocaleUtil.US.getCountry(),LocaleUtil.US.getVariant());
  PortletPreferences preferences=new PortletPreferencesImpl();
  LocalizationUtil.setPreferencesValue(preferences,key,_ENGLISH_LANGUAGE_ID,"A");
  LocalizationUtil.setPreferencesValue(preferences,key,_GERMAN_LANGUAGE_ID,"B");
  Assert.assertEquals("A",LocalizationUtil.getPreferencesValue(preferences,key,_ENGLISH_LANGUAGE_ID));
  Assert.assertEquals("B",LocalizationUtil.getPreferencesValue(preferences,key,_GERMAN_LANGUAGE_ID));
  Assert.assertEquals("A",LocalizationUtil.getPreferencesValue(preferences,key,_SPANISH_LANGUAGE_ID));
  LocaleUtil.setDefault(LocaleUtil.GERMANY.getLanguage(),LocaleUtil.GERMANY.getCountry(),LocaleUtil.GERMANY.getVariant());
  Assert.assertEquals("A",LocalizationUtil.getPreferencesValue(preferences,key,_ENGLISH_LANGUAGE_ID));
  Assert.assertEquals("B",LocalizationUtil.getPreferencesValue(preferences,key,_GERMAN_LANGUAGE_ID));
  Assert.assertEquals("B",LocalizationUtil.getPreferencesValue(preferences,key,_SPANISH_LANGUAGE_ID));
}
