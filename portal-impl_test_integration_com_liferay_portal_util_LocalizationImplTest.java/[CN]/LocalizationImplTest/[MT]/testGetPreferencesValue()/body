{
  String key=RandomTestUtil.randomString();
  LocaleUtil.setDefault(LocaleUtil.US.getLanguage(),LocaleUtil.US.getCountry(),LocaleUtil.US.getVariant());
  PortletPreferences preferences=new PortletPreferencesImpl();
  LocalizationUtil.setPreferencesValue(preferences,key,_englishLanguageId,"A");
  LocalizationUtil.setPreferencesValue(preferences,key,_germanLanguageId,"B");
  Assert.assertEquals("A",LocalizationUtil.getPreferencesValue(preferences,key,_englishLanguageId));
  Assert.assertEquals("B",LocalizationUtil.getPreferencesValue(preferences,key,_germanLanguageId));
  Assert.assertEquals("A",LocalizationUtil.getPreferencesValue(preferences,key,_spanishLanguageId));
  LocaleUtil.setDefault(LocaleUtil.GERMANY.getLanguage(),LocaleUtil.GERMANY.getCountry(),LocaleUtil.GERMANY.getVariant());
  Assert.assertEquals("A",LocalizationUtil.getPreferencesValue(preferences,key,_englishLanguageId));
  Assert.assertEquals("B",LocalizationUtil.getPreferencesValue(preferences,key,_germanLanguageId));
  Assert.assertEquals("B",LocalizationUtil.getPreferencesValue(preferences,key,_spanishLanguageId));
}
