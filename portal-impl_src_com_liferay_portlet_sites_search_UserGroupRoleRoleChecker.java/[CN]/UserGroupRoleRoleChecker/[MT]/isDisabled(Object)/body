{
  Role role=(Role)obj;
  try {
    PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
    if ((!isChecked(role) && !SiteMembershipPolicyUtil.isRoleAllowed(_user.getUserId(),_group.getGroupId(),role.getRoleId())) || (isChecked(role) && SiteMembershipPolicyUtil.isRoleProtected(permissionChecker,_user.getUserId(),_group.getGroupId(),role.getRoleId())) || (isChecked(role) && SiteMembershipPolicyUtil.isRoleRequired(_user.getUserId(),_group.getGroupId(),role.getRoleId()))) {
      return true;
    }
  }
  finally {
    return super.isDisabled(obj);
  }
}
