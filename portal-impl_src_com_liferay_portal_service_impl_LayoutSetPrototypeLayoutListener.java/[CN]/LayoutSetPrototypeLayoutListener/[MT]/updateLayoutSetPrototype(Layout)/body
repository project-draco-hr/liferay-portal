{
  try {
    Group group=layout.getGroup();
    if (!group.isLayoutSetPrototype()) {
      return;
    }
    LayoutSetPrototype layoutSetPrototype=LayoutSetPrototypeLocalServiceUtil.getLayoutSetPrototype(group.getClassPK());
    LayoutSet layoutSet=layoutSetPrototype.getLayoutSet();
    layoutSetPrototype.setModifiedDate(layout.getModifiedDate());
    UnicodeProperties settingsProperties=layoutSet.getSettingsProperties();
    settingsProperties.remove("merge-fail-count");
    LayoutSetLocalServiceUtil.updateLayoutSet(layoutSet,false);
    LayoutSetPrototypeUtil.update(layoutSetPrototype,false);
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
}
