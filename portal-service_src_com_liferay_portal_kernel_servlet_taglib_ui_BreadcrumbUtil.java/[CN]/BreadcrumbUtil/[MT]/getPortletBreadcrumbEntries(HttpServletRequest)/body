{
  List<BreadcrumbEntry> portletBreadcrumbEntries=_getPortletBreadcrumbs(request);
  if (portletBreadcrumbEntries == null) {
    return Collections.emptyList();
  }
  List<BreadcrumbEntry> breadcrumbEntries=new ArrayList<BreadcrumbEntry>(portletBreadcrumbEntries.size());
  for (int i=0; i < portletBreadcrumbEntries.size(); i++) {
    BreadcrumbEntry portletBreadcrumbEntry=portletBreadcrumbEntries.get(i);
    BreadcrumbEntry breadcrumbEntry=new BreadcrumbEntry();
    breadcrumbEntry.setBaseModel(portletBreadcrumbEntry.getBaseModel());
    breadcrumbEntry.setData(portletBreadcrumbEntry.getData());
    breadcrumbEntry.setTitle(portletBreadcrumbEntry.getTitle());
    String url=portletBreadcrumbEntry.getURL();
    if (Validator.isNotNull(url) && ((i + 1) < portletBreadcrumbEntries.size())) {
      if (!CookieKeys.hasSessionId(request)) {
        HttpSession session=request.getSession();
        url=PortalUtil.getURLWithSessionId(url,session.getId());
      }
      breadcrumbEntry.setURL(url);
    }
    breadcrumbEntries.add(breadcrumbEntry);
  }
  return breadcrumbEntries;
}
