{
  OutputStream outputStream=null;
  try {
    response.setHeader("Cache-Control","public");
    if (!response.isCommitted()) {
      outputStream=new BufferedOutputStream(response.getOutputStream());
      int c=inputStream.read();
      while (c != -1) {
        outputStream.write(c);
        c=inputStream.read();
      }
    }
  }
  finally {
    try {
      if (outputStream != null) {
        outputStream.flush();
      }
    }
 catch (    Exception e) {
      if (_log.isWarnEnabled()) {
        _log.warn(e);
      }
    }
    try {
      if (outputStream != null) {
        outputStream.close();
      }
    }
 catch (    Exception e) {
      if (_log.isWarnEnabled()) {
        _log.warn(e);
      }
    }
    try {
      if (inputStream != null) {
        inputStream.close();
      }
    }
 catch (    Exception e) {
      if (_log.isWarnEnabled()) {
        _log.warn(e);
      }
    }
  }
}
