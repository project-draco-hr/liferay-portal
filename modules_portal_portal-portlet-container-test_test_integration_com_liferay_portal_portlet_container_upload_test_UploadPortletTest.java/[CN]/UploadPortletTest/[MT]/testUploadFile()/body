{
  registerMVCActionCommand(new TestUploadMVCActionCommand());
  InputStream inputStream=getClass().getResourceAsStream("/com/liferay/portal/portlet/container/upload/test/dependencies/" + "file_upload.txt");
  byte[] bytes=PortletContainerTestUtil.toByteArray(inputStream);
  Map<String,List<String>> responseMap=testUpload(bytes);
  Assert.assertEquals("200",PortletContainerTestUtil.getString(responseMap,"code"));
  String body=PortletContainerTestUtil.getString(responseMap,"body");
  JSONObject jsonObject=JSONFactoryUtil.createJSONObject(body);
  Assert.assertTrue(jsonObject.getBoolean("success"));
  String key=group.getGroupId() + "_0_" + TestUploadPortlet.TEST_UPLOAD_FILE_NAME_PARAMETER;
  TestFileEntry actualTestFileEntry=TestUploadPortlet.get(key);
  Assert.assertNotNull(actualTestFileEntry);
  byte[] actualBytes=PortletContainerTestUtil.toByteArray(actualTestFileEntry.getInputStream());
  Assert.assertArrayEquals(bytes,actualBytes);
}
