{
  registerMVCActionCommand(new TestUploadMVCActionCommand());
  InputStream inputStream=getClass().getResourceAsStream("/com/liferay/portal/portlet/container/upload/test/dependencies/" + "file_upload.txt");
  byte[] bytes=FileUtil.getBytes(inputStream);
  Response response=testUpload(bytes);
  Assert.assertEquals(200,response.getCode());
  JSONObject jsonObject=JSONFactoryUtil.createJSONObject(response.getBody());
  Assert.assertTrue(jsonObject.getBoolean("success"));
  String key=group.getGroupId() + "_0_" + TestUploadPortlet.TEST_UPLOAD_FILE_NAME_PARAMETER;
  TestFileEntry actualTestFileEntry=TestUploadPortlet.get(key);
  Assert.assertNotNull(actualTestFileEntry);
  byte[] actualBytes=FileUtil.getBytes(actualTestFileEntry.getInputStream());
  Assert.assertArrayEquals(bytes,actualBytes);
}
