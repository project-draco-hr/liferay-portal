{
  if (query instanceof BooleanQueryImpl) {
    return ((BooleanQueryImpl)query).getBooleanQuery();
  }
 else   if (query instanceof LuceneQueryImpl) {
    return ((LuceneQueryImpl)query).getQuery();
  }
 else   if (query instanceof StringQueryImpl) {
    QueryParser parser=new QueryParser(StringPool.BLANK,LuceneUtil.getAnalyzer());
    return parser.parse(query.toString());
  }
 else   if (query instanceof TermQueryImpl) {
    return ((TermQueryImpl)query).getTermQuery();
  }
 else {
    return null;
  }
}
