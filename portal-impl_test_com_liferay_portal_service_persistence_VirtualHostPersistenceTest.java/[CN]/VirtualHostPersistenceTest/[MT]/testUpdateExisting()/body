{
  long pk=nextLong();
  VirtualHost newVirtualHost=_persistence.create(pk);
  newVirtualHost.setCompanyId(nextLong());
  newVirtualHost.setLayoutSetId(nextLong());
  newVirtualHost.setHostname(randomString());
  _persistence.update(newVirtualHost,false);
  VirtualHost existingVirtualHost=_persistence.findByPrimaryKey(newVirtualHost.getPrimaryKey());
  assertEquals(existingVirtualHost.getVirtualHostId(),newVirtualHost.getVirtualHostId());
  assertEquals(existingVirtualHost.getCompanyId(),newVirtualHost.getCompanyId());
  assertEquals(existingVirtualHost.getLayoutSetId(),newVirtualHost.getLayoutSetId());
  assertEquals(existingVirtualHost.getHostname(),newVirtualHost.getHostname());
}
