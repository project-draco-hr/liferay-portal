{
  PortalCache<K,V> currentPortalCache=portalCache;
  while (currentPortalCache instanceof PortalCacheWrapper) {
    PortalCacheWrapper<K,V> portalCacheWrapper=(PortalCacheWrapper<K,V>)currentPortalCache;
    currentPortalCache=portalCacheWrapper.getWrappedPortalCache();
  }
  if (currentPortalCache instanceof EhcachePortalCache) {
    return (EhcachePortalCache<K,V>)currentPortalCache;
  }
  throw new IllegalArgumentException("Unable to locate Ehcache from " + portalCache);
}
