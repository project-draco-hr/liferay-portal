{
  Session session=null;
  try {
    if (layoutSet.isNew() || layoutSet.isModified()) {
      session=openSession();
      if (layoutSet.isNew()) {
        LayoutSetHBM layoutSetHBM=new LayoutSetHBM();
        layoutSetHBM.setOwnerId(layoutSet.getOwnerId());
        layoutSetHBM.setCompanyId(layoutSet.getCompanyId());
        layoutSetHBM.setGroupId(layoutSet.getGroupId());
        layoutSetHBM.setUserId(layoutSet.getUserId());
        layoutSetHBM.setPrivateLayout(layoutSet.getPrivateLayout());
        layoutSetHBM.setThemeId(layoutSet.getThemeId());
        layoutSetHBM.setColorSchemeId(layoutSet.getColorSchemeId());
        layoutSetHBM.setPageCount(layoutSet.getPageCount());
        session.save(layoutSetHBM);
        session.flush();
      }
 else {
        LayoutSetHBM layoutSetHBM=(LayoutSetHBM)session.get(LayoutSetHBM.class,layoutSet.getPrimaryKey());
        if (layoutSetHBM != null) {
          layoutSetHBM.setCompanyId(layoutSet.getCompanyId());
          layoutSetHBM.setGroupId(layoutSet.getGroupId());
          layoutSetHBM.setUserId(layoutSet.getUserId());
          layoutSetHBM.setPrivateLayout(layoutSet.getPrivateLayout());
          layoutSetHBM.setThemeId(layoutSet.getThemeId());
          layoutSetHBM.setColorSchemeId(layoutSet.getColorSchemeId());
          layoutSetHBM.setPageCount(layoutSet.getPageCount());
          session.flush();
        }
 else {
          layoutSetHBM=new LayoutSetHBM();
          layoutSetHBM.setOwnerId(layoutSet.getOwnerId());
          layoutSetHBM.setCompanyId(layoutSet.getCompanyId());
          layoutSetHBM.setGroupId(layoutSet.getGroupId());
          layoutSetHBM.setUserId(layoutSet.getUserId());
          layoutSetHBM.setPrivateLayout(layoutSet.getPrivateLayout());
          layoutSetHBM.setThemeId(layoutSet.getThemeId());
          layoutSetHBM.setColorSchemeId(layoutSet.getColorSchemeId());
          layoutSetHBM.setPageCount(layoutSet.getPageCount());
          session.save(layoutSetHBM);
          session.flush();
        }
      }
      layoutSet.setNew(false);
      layoutSet.setModified(false);
    }
    return layoutSet;
  }
 catch (  HibernateException he) {
    throw new SystemException(he);
  }
 finally {
    closeSession(session);
  }
}
