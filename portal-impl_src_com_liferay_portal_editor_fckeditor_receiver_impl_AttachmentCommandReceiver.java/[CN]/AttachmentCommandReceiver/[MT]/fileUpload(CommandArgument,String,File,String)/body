{
  try {
    HttpServletRequest request=commandArgument.getHttpServletRequest();
    long resourcePK=ParamUtil.getLong(request,"wikiPageResourcePrimKey");
    WikiPage page=WikiPageLocalServiceUtil.getPage(resourcePK);
    String title=page.getTitle();
    long nodeId=page.getNodeId();
    List<ObjectValuePair<String,byte[]>> files=new ArrayList<ObjectValuePair<String,byte[]>>();
    if (file != null) {
      byte[] bytes=FileUtil.getBytes(file);
      if ((bytes != null) && (bytes.length > 0)) {
        ObjectValuePair<String,byte[]> ovp=new ObjectValuePair<String,byte[]>(fileName,bytes);
        files.add(ovp);
      }
    }
    WikiPageServiceUtil.addPageAttachments(nodeId,title,files);
  }
 catch (  Exception e) {
    throw new FCKException(e);
  }
  return "0";
}
