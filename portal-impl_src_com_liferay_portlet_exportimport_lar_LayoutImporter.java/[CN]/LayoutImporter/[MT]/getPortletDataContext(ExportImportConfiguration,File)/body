{
  Map<String,Serializable> settingsMap=exportImportConfiguration.getSettingsMap();
  long userId=MapUtil.getLong(settingsMap,"userId");
  long targetGroupId=MapUtil.getLong(settingsMap,"targetGroupId");
  boolean privateLayout=MapUtil.getBoolean(settingsMap,"privateLayout");
  Map<String,String[]> parameterMap=(Map<String,String[]>)settingsMap.get("parameterMap");
  Group group=GroupLocalServiceUtil.getGroup(targetGroupId);
  String userIdStrategyString=MapUtil.getString(parameterMap,PortletDataHandlerKeys.USER_ID_STRATEGY);
  UserIdStrategy userIdStrategy=ExportImportHelperUtil.getUserIdStrategy(userId,userIdStrategyString);
  ZipReader zipReader=ZipReaderFactoryUtil.getZipReader(file);
  PortletDataContext portletDataContext=PortletDataContextFactoryUtil.createImportPortletDataContext(group.getCompanyId(),targetGroupId,parameterMap,userIdStrategy,zipReader);
  portletDataContext.setPrivateLayout(privateLayout);
  return portletDataContext;
}
