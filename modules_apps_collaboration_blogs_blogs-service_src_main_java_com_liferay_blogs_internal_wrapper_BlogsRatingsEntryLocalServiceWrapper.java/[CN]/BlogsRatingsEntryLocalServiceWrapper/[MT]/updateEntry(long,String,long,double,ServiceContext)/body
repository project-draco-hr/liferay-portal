{
  if (className.equals(BlogsEntry.class.getName())) {
    BlogsEntry blogsEntry=_blogsEntryLocalService.getEntry(classPK);
    BlogsStatsUser blogsStatsUser=_blogsStatsUserLocalService.getStatsUser(blogsEntry.getGroupId(),blogsEntry.getUserId());
    int ratingsTotalEntries=blogsStatsUser.getRatingsTotalEntries();
    double ratingsTotalScore=blogsStatsUser.getRatingsTotalScore();
    RatingsEntry ratingsEntry=RatingsEntryLocalServiceUtil.fetchEntry(userId,className,classPK);
    if (ratingsEntry == null) {
      ratingsTotalEntries++;
      ratingsTotalScore+=score;
    }
 else {
      ratingsTotalScore=ratingsTotalScore - ratingsEntry.getScore() + score;
    }
    double ratingsAverageScore=ratingsTotalScore / ratingsTotalEntries;
    _blogsStatsUserLocalService.updateStatsUser(blogsEntry.getGroupId(),blogsEntry.getUserId(),ratingsTotalEntries,ratingsTotalScore,ratingsAverageScore);
  }
  return super.updateEntry(userId,className,classPK,score,serviceContext);
}
