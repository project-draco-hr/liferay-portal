{
  ThemeDisplay themeDisplay=(ThemeDisplay)renderRequest.getAttribute(WebKeys.THEME_DISPLAY);
  boolean localPublishing=ParamUtil.getBoolean(renderRequest,"localPublishing");
  ExportImportConfiguration exportImportConfiguration=null;
  long sourceGroupId=ParamUtil.getLong(renderRequest,"sourceGroupId");
  boolean privateLayout=ParamUtil.getBoolean(renderRequest,"privateLayout");
  if (localPublishing) {
    long targetGroupId=ParamUtil.getLong(renderRequest,"targetGroupId");
    exportImportConfiguration=ExportImportConfigurationFactory.buildDefaultLocalPublishingExportImportConfiguration(themeDisplay.getUser(),sourceGroupId,targetGroupId,privateLayout);
    renderRequest.setAttribute("exportImportConfigurationId",exportImportConfiguration.getExportImportConfigurationId());
  }
 else {
    String remoteAddress=ParamUtil.getString(renderRequest,"remoteAddress");
    int remotePort=ParamUtil.getInteger(renderRequest,"remotePort");
    String remotePathContext=ParamUtil.getString(renderRequest,"remotePathContext");
    boolean secureConnection=ParamUtil.getBoolean(renderRequest,"secureConnection");
    long remoteGroupId=ParamUtil.getLong(renderRequest,"remoteGroupId");
    exportImportConfiguration=ExportImportConfigurationFactory.buildDefaultRemotePublishingExportImportConfiguration(themeDisplay.getUser(),sourceGroupId,privateLayout,remoteAddress,remotePort,remotePathContext,secureConnection,remoteGroupId);
    renderRequest.setAttribute("exportImportConfigurationId",exportImportConfiguration.getExportImportConfigurationId());
  }
}
