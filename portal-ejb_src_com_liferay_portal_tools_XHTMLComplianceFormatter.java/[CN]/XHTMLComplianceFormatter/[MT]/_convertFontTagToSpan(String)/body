{
  String newLine="";
  if (line.startsWith("<font")) {
    int endIndex=_getTagEndIndex(line,0);
    String fontTag=line.substring(0,endIndex + 1);
    String spanTag="<span";
    String classAttribute=_getAttribute("class",fontTag,endIndex);
    if (classAttribute != null) {
      spanTag+=" " + classAttribute;
    }
    spanTag+=" " + _getStyleAttributes(fontTag);
    newLine=spanTag + ">";
    if (endIndex + 1 < line.length()) {
      newLine+=_convertFontTagToSpan(line.substring(endIndex + 1,line.length()));
    }
  }
 else {
    int endIndex=line.indexOf("<font");
    if (endIndex == -1) {
      endIndex=line.length();
    }
    newLine=line.substring(0,endIndex);
    if (endIndex < line.length()) {
      newLine+=_convertFontTagToSpan(line.substring(endIndex,line.length()));
    }
  }
  return newLine;
}
