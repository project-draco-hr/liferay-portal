{
  if (configurationURL == null) {
    throw new NullPointerException("Configuration path is null");
  }
  Configuration ehcacheConfiguration=ConfigurationFactory.parseConfiguration(configurationURL);
  ehcacheConfiguration.setName(portalCacheManagerName);
  handleCacheManagerPeerFactoryConfigurations(ehcacheConfiguration.getCacheManagerPeerProviderFactoryConfiguration());
  handleCacheManagerPeerFactoryConfigurations(ehcacheConfiguration.getCacheManagerPeerListenerFactoryConfigurations());
  Set<Properties> cacheManagerListenerPropertiesSet=getCacheManagerListenerPropertiesSet(ehcacheConfiguration);
  PortalCacheConfiguration defaultPortalCacheConfiguration=getPortalCacheConfiguration(ehcacheConfiguration.getDefaultCacheConfiguration(),usingDefault);
  Set<PortalCacheConfiguration> portalCacheConfigurations=new HashSet<>();
  Map<String,CacheConfiguration> cacheConfigurations=ehcacheConfiguration.getCacheConfigurations();
  for (  Map.Entry<String,CacheConfiguration> entry : cacheConfigurations.entrySet()) {
    portalCacheConfigurations.add(getPortalCacheConfiguration(entry.getValue(),usingDefault));
  }
  PortalCacheManagerConfiguration portalCacheManagerConfiguration=new PortalCacheManagerConfiguration(cacheManagerListenerPropertiesSet,defaultPortalCacheConfiguration,portalCacheConfigurations);
  return new ObjectValuePair<>(ehcacheConfiguration,portalCacheManagerConfiguration);
}
