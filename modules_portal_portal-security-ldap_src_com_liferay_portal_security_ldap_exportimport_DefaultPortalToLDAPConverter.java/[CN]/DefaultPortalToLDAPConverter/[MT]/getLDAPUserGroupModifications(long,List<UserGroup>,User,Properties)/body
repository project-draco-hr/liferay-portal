{
  Modifications modifications=Modifications.getInstance();
  String groupMappingAttributeName=userMappings.getProperty(UserConverterKeys.GROUP);
  if (Validator.isNull(groupMappingAttributeName)) {
    return modifications;
  }
  Properties groupMappings=LDAPSettingsUtil.getGroupMappings(ldapServerId,user.getCompanyId());
  String userDN=getUserDNName(ldapServerId,user,userMappings);
  for (  UserGroup userGroup : userGroups) {
    String groupDN=getGroupDNName(ldapServerId,userGroup,groupMappings);
    if (PortalLDAPUtil.isUserGroupMember(ldapServerId,user.getCompanyId(),groupDN,userDN)) {
      continue;
    }
    modifications.addItem(DirContext.ADD_ATTRIBUTE,groupMappingAttributeName,groupDN);
  }
  return modifications;
}
