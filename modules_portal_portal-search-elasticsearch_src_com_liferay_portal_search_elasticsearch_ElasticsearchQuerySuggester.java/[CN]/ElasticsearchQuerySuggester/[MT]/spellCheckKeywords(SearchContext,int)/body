{
  StopWatch stopWatch=new StopWatch();
  stopWatch.start();
  SuggestBuilder.SuggestionBuilder<TermSuggestionBuilder> suggestionBuilder=SuggestBuilder.termSuggestion(_REQUEST_TYPE_SPELL_CHECK);
  Suggest.Suggestion<?> suggestion=getSuggestion(searchContext,suggestionBuilder,DocumentTypes.SPELL_CHECK,Field.SPELL_CHECK_WORD,_REQUEST_TYPE_SPELL_CHECK,max);
  if (suggestion == null) {
    return Collections.emptyMap();
  }
  Map<String,List<String>> suggestionsMap=new HashMap<>();
  for (  Object entry : suggestion.getEntries()) {
    Suggest.Suggestion.Entry<? extends Suggest.Suggestion.Entry.Option> suggestionEntry=(Suggest.Suggestion.Entry<? extends Suggest.Suggestion.Entry.Option>)entry;
    String text=String.valueOf(suggestionEntry.getText());
    List<String> suggestionsList=suggestionsMap.get(text);
    if (suggestionsList == null) {
      suggestionsList=new ArrayList<>();
      suggestionsMap.put(text,suggestionsList);
    }
    for (    Suggest.Suggestion.Entry.Option option : suggestionEntry.getOptions()) {
      String optionText=String.valueOf(option.getText());
      suggestionsList.add(optionText);
    }
  }
  if (_log.isInfoEnabled()) {
    stopWatch.stop();
    _log.info("Spell checked keywords in " + stopWatch.getTime() + "ms");
  }
  return suggestionsMap;
}
