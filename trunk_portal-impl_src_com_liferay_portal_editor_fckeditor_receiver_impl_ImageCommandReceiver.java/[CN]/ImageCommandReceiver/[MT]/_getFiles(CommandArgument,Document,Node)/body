{
  Element filesElement=document.createElement("Files");
  rootNode.appendChild(filesElement);
  if (Validator.isNull(commandArgument.getCurrentGroupName())) {
    return;
  }
  Group group=commandArgument.getCurrentGroup();
  IGFolder igFolder=_getFolder(group.getGroupId(),commandArgument.getCurrentFolder());
  List<IGImage> images=IGImageServiceUtil.getImages(igFolder.getGroupId(),igFolder.getFolderId());
  for (  IGImage image : images) {
    long largeImageId=image.getLargeImageId();
    Image portalImage=ImageLocalServiceUtil.getImageOrDefault(largeImageId);
    Element fileElement=document.createElement("File");
    filesElement.appendChild(fileElement);
    fileElement.setAttribute("name",image.getNameWithExtension());
    fileElement.setAttribute("desc",image.getNameWithExtension());
    fileElement.setAttribute("size",getSize(portalImage.getSize()));
    StringBundler url=new StringBundler(7);
    ThemeDisplay themeDisplay=commandArgument.getThemeDisplay();
    url.append(themeDisplay.getPathImage());
    url.append("/image_gallery?uuid=");
    url.append(image.getUuid());
    url.append("&groupId=");
    url.append(igFolder.getGroupId());
    url.append("&t=");
    url.append(ImageServletTokenUtil.getToken(largeImageId));
    fileElement.setAttribute("url",url.toString());
  }
}
