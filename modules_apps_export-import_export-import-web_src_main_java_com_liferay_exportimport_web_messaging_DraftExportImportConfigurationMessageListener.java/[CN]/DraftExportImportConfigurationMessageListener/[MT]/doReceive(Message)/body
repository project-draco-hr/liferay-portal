{
  if (ExportImportWebConfigurationValues.DRAFT_EXPORT_IMPORT_CONFIGURATION_CLEAN_UP_COUNT == -1) {
    return;
  }
  DynamicQuery dynamicQuery=_exportImportConfigurationLocalService.dynamicQuery();
  Property typeProperty=PropertyFactoryUtil.forName("type");
  dynamicQuery.add(typeProperty.ne(ExportImportConfigurationConstants.TYPE_SCHEDULED_PUBLISH_LAYOUT_LOCAL));
  dynamicQuery.add(typeProperty.ne(ExportImportConfigurationConstants.TYPE_SCHEDULED_PUBLISH_LAYOUT_REMOTE));
  Property statusProperty=PropertyFactoryUtil.forName("status");
  dynamicQuery.add(statusProperty.eq(WorkflowConstants.STATUS_DRAFT));
  Order order=OrderFactoryUtil.asc("createDate");
  dynamicQuery.addOrder(order);
  dynamicQuery.setLimit(QueryUtil.ALL_POS,ExportImportWebConfigurationValues.DRAFT_EXPORT_IMPORT_CONFIGURATION_CLEAN_UP_COUNT);
  List<ExportImportConfiguration> exportImportConfigurations=_exportImportConfigurationLocalService.dynamicQuery(dynamicQuery);
  for (  ExportImportConfiguration exportImportConfiguration : exportImportConfigurations) {
    List<BackgroundTask> backgroundTasks=getParentBackgroundTasks(exportImportConfiguration);
    if (ListUtil.isEmpty(backgroundTasks)) {
      _exportImportConfigurationLocalService.deleteExportImportConfiguration(exportImportConfiguration);
      continue;
    }
    for (    BackgroundTask backgroundTask : backgroundTasks) {
      if (isLiveGroup(backgroundTask.getGroupId())) {
        continue;
      }
      _backgroundTaskLocalService.deleteBackgroundTask(backgroundTask.getBackgroundTaskId());
    }
  }
}
