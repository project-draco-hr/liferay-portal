{
  ExportActionableDynamicQuery exportActionableDynamicQuery=JournalArticleLocalServiceUtil.getExportActionableDynamicQuery(portletDataContext);
  final ActionableDynamicQuery.AddCriteriaMethod addCriteriaMethod=exportActionableDynamicQuery.getAddCriteriaMethod();
  exportActionableDynamicQuery.setAddCriteriaMethod(new ActionableDynamicQuery.AddCriteriaMethod(){
    @Override public void addCriteria(    DynamicQuery dynamicQuery){
      addCriteriaMethod.addCriteria(dynamicQuery);
      if (portletDataContext.getBooleanParameter(NAMESPACE,"version-history")) {
        return;
      }
      Property versionProperty=PropertyFactoryUtil.forName("version");
      DynamicQuery articleVersionDynamicQuery=DynamicQueryFactoryUtil.forClass(JournalArticle.class,"articleVersion",PortalClassLoaderUtil.getClassLoader());
      articleVersionDynamicQuery.setProjection(ProjectionFactoryUtil.alias(ProjectionFactoryUtil.max("articleVersion.version"),"articleVersion.version"));
      articleVersionDynamicQuery.add(RestrictionsFactoryUtil.eqProperty("this.resourcePrimKey","articleVersion.resourcePrimKey"));
      dynamicQuery.add(versionProperty.eq(articleVersionDynamicQuery));
    }
  }
);
  return exportActionableDynamicQuery;
}
