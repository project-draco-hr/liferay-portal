{
  ActionableDynamicQuery actionableDynamicQuery=JournalArticleLocalServiceUtil.getExportActionableDynamicQuery(portletDataContext);
  actionableDynamicQuery.setPerformActionMethod(new ActionableDynamicQuery.PerformActionMethod(){
    @Override public void performAction(    Object object) throws PortalException {
      JournalArticle article=(JournalArticle)object;
      boolean latestVersion=false;
      try {
        latestVersion=JournalArticleLocalServiceUtil.isLatestVersion(article.getGroupId(),article.getArticleId(),article.getVersion(),WorkflowConstants.STATUS_APPROVED);
      }
 catch (      Exception e) {
      }
      if (portletDataContext.getBooleanParameter(NAMESPACE,"version-history") || latestVersion) {
        StagedModelDataHandlerUtil.exportStagedModel(portletDataContext,article);
      }
    }
  }
);
  return actionableDynamicQuery;
}
