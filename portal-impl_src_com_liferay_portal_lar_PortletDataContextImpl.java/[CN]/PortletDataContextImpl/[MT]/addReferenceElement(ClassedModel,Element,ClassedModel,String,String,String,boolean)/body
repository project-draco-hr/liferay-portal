{
  Element referenceElement=doAddReferenceElement(referrerClassedModel,element,classedModel,className,binPath,referenceType,false);
  String referenceKey=getReferenceKey(classedModel);
  if (missing) {
    if (_references.contains(referenceKey)) {
      return referenceElement;
    }
    _missingReferences.add(referenceKey);
    referenceElement.addAttribute("missing",Boolean.TRUE.toString());
    doAddReferenceElement(referrerClassedModel,null,classedModel,className,binPath,referenceType,true);
  }
 else {
    _references.add(referenceKey);
    if (_missingReferences.contains(referenceKey)) {
      _missingReferences.remove(referenceKey);
      Element missingReferenceElement=getMissingReferenceElement(classedModel);
      _missingReferencesElement.remove(missingReferenceElement);
      referenceElement.addAttribute("missing",Boolean.FALSE.toString());
    }
  }
  return referenceElement;
}
