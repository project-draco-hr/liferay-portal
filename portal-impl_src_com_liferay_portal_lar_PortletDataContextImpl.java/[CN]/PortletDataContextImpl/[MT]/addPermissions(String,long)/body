{
  if (!MapUtil.getBoolean(_parameterMap,PortletDataHandlerKeys.PERMISSIONS)) {
    return;
  }
  List<String> actionIds=ResourceActionsUtil.getModelResourceActions(resourceName);
  Map<Long,Set<String>> roleIdsToActionIds=getActionIds(resourceName,resourcePK,actionIds);
  List<KeyValuePair> permissions=new ArrayList<KeyValuePair>();
  for (  Map.Entry<Long,Set<String>> entry : roleIdsToActionIds.entrySet()) {
    long roleId=entry.getKey();
    Set<String> availableActionIds=entry.getValue();
    Role role=RoleLocalServiceUtil.getRole(roleId);
    String roleName=role.getName();
    if (role.isTeam()) {
      roleName=PermissionExporter.ROLE_TEAM_PREFIX + roleName;
    }
    KeyValuePair permission=new KeyValuePair(roleName,StringUtil.merge(availableActionIds));
    permissions.add(permission);
  }
  _permissionsMap.put(getPrimaryKeyString(resourceName,resourcePK),permissions);
}
