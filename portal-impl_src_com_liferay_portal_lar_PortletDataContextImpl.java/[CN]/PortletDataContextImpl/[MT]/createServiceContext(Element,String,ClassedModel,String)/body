{
  Class<?> clazz=classedModel.getModelClass();
  long classPK=getClassPK(classedModel);
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setCompanyId(getCompanyId());
  serviceContext.setScopeGroupId(getScopeGroupId());
  if (classedModel instanceof AuditedModel) {
    AuditedModel auditedModel=(AuditedModel)classedModel;
    serviceContext.setCreateDate(auditedModel.getCreateDate());
    serviceContext.setModifiedDate(auditedModel.getModifiedDate());
  }
  serviceContext.setAddCommunityPermissions(true);
  serviceContext.setAddGuestPermissions(true);
  if (isResourceMain(classedModel)) {
    if (getBooleanParameter(namespace,"categories")) {
      long[] assetCategoryIds=getAssetCategoryIds(clazz,classPK);
      serviceContext.setAssetCategoryIds(assetCategoryIds);
    }
    if (getBooleanParameter(namespace,"tags")) {
      String[] assetTagNames=getAssetTagNames(clazz,classPK);
      serviceContext.setAssetTagNames(assetTagNames);
    }
  }
  return serviceContext;
}
