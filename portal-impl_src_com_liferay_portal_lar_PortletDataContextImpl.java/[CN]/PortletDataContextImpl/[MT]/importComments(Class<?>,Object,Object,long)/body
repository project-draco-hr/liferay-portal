{
  Map<Long,Long> messagePKs=new HashMap<Long,Long>();
  Map<Long,Long> threadPKs=new HashMap<Long,Long>();
  List<MBMessage> messages=(List<MBMessage>)_commentsMap.get(getPrimaryKeyString(classObj,primaryKey));
  if (messages == null) {
    return;
  }
  for (  MBMessage message : messages) {
    long userId=getUserId(message.getUserUuid());
    long parentMessageId=MapUtil.getLong(messagePKs,message.getParentMessageId(),message.getParentMessageId());
    long threadId=MapUtil.getLong(threadPKs,message.getThreadId(),message.getThreadId());
    MBMessage newMessage=MBMessageLocalServiceUtil.addDiscussionMessage(userId,message.getUserName(),groupId,classObj.getName(),((Long)newPrimaryKey).longValue(),threadId,parentMessageId,message.getSubject(),message.getBody());
    messagePKs.put(message.getMessageId(),newMessage.getMessageId());
    threadPKs.put(message.getThreadId(),newMessage.getThreadId());
  }
}
