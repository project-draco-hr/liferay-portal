{
  boolean importComments=MapUtil.getBoolean(_parameterMap,PortletDataHandlerKeys.IMPORT_COMMENTS);
  if ((importComments) || (classObj == Layout.class)) {
    Map messagePKs=CollectionFactory.getHashMap();
    Map threadPKs=CollectionFactory.getHashMap();
    List messages=(List)_commentsMap.get(getPrimaryKeyString(classObj,primaryKey));
    if (messages != null) {
      Iterator itr=messages.iterator();
      while (itr.hasNext()) {
        MBMessage message=(MBMessage)itr.next();
        long userId=getUserId(message.getUserUuid());
        long parentMessageId=MapUtil.getLong(messagePKs,message.getParentMessageId(),message.getParentMessageId());
        long threadId=MapUtil.getLong(threadPKs,message.getThreadId(),message.getThreadId());
        MBMessage newMessage=MBMessageLocalServiceUtil.addDiscussionMessage(userId,groupId,classObj.getName(),((Long)newPrimaryKey).longValue(),threadId,parentMessageId,message.getSubject(),message.getBody());
        messagePKs.put(message.getPrimaryKeyObj(),newMessage.getPrimaryKeyObj());
        threadPKs.put(new Long(message.getThreadId()),new Long(newMessage.getThreadId()));
      }
    }
  }
}
