{
  String[] itemIdsArray=StringUtil.split(itemIds);
  for (int i=0; i < itemIdsArray.length; i++) {
    long itemId=ShoppingUtil.getItemId(itemIdsArray[i]);
    ShoppingItem item=null;
    try {
      item=shoppingItemPersistence.findByPrimaryKey(itemId);
      ShoppingCategory category=item.getCategory();
      if (category.getGroupId() != groupId) {
        item=null;
      }
    }
 catch (    Exception e) {
    }
    if (item == null) {
      itemIds=StringUtil.removeFromList(itemIds,itemIdsArray[i]);
    }
  }
  return itemIds;
}
