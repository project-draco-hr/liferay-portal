{
  Portlet portlet=PortletLocalServiceUtil.getPortletById(group.getCompanyId(),getPortletId());
  if (portlet == null) {
    return;
  }
  TemplateHandler templateHandler=portlet.getTemplateHandlerInstance();
  if (templateHandler == null) {
    return;
  }
  String className=templateHandler.getClassName();
  DDMTemplate ddmTemplate=DDMTemplateTestUtil.addTemplate(group.getGroupId(),PortalUtil.getClassNameId(className),0);
  Map<String,String[]> preferenceMap=new HashMap<String,String[]>();
  String displayStyle=PortletDisplayTemplate.DISPLAY_STYLE_PREFIX + ddmTemplate.getUuid();
  preferenceMap.put("displayStyle",new String[]{displayStyle});
  preferenceMap.put("displayStyleGroupId",new String[]{String.valueOf(ddmTemplate.getGroupId())});
  PortletPreferences portletPreferences=getImportedPortletPreferences(preferenceMap);
  String importedDisplayStyle=portletPreferences.getValue("displayStyle",StringPool.BLANK);
  Assert.assertEquals(displayStyle,importedDisplayStyle);
  long importedDisplayStyleGroupId=GetterUtil.getLong(portletPreferences.getValue("displayStyleGroupId",null));
  Assert.assertEquals(importedGroup.getGroupId(),importedDisplayStyleGroupId);
}
