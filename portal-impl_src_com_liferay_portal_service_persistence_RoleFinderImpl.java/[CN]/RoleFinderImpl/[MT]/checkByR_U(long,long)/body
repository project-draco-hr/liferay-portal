{
  try {
    long companyId=CompanyThreadLocal.getCompanyId();
    long defaultUserId=UserLocalServiceUtil.getDefaultUserId(companyId);
    Role guestRole=RoleLocalServiceUtil.getRole(companyId,RoleConstants.GUEST);
    if (defaultUserId == userId) {
      if (roleId == guestRole.getRoleId()) {
        return true;
      }
 else {
        return false;
      }
    }
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
  if (UserUtil.containsRole(userId,roleId)) {
    return true;
  }
  Session session=null;
  try {
    session=openSession();
    SQLQuery q=session.createSQLQuery(getCountByR_U_SQL());
    QueryPos qPos=QueryPos.getInstance(q);
    for (int i=0; i < 5; i++) {
      qPos.add(roleId);
      qPos.add(userId);
    }
    int size=q.list().size();
    if (size > 0) {
      return true;
    }
 else {
      return false;
    }
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
 finally {
    closeSession(session);
  }
}
