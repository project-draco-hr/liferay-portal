{
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long groupId=ParamUtil.getLong(portletRequest,"groupId");
  if (type == ExportImportConfigurationConstants.TYPE_EXPORT_LAYOUT) {
    groupId=ParamUtil.getLong(portletRequest,"liveGroupId");
  }
  String name=ParamUtil.getString(portletRequest,"name");
  String description=ParamUtil.getString(portletRequest,"description");
  Map<String,Serializable> settingsMap=ExportImportConfigurationSettingsMapFactory.buildSettingsMap(portletRequest,groupId,type);
  Map<String,String[]> parameterMap=(Map<String,String[]>)settingsMap.get("parameterMap");
  if ((parameterMap != null) && (type == ExportImportConfigurationConstants.TYPE_PUBLISH_LAYOUT_LOCAL)) {
    parameterMap.put(PortletDataHandlerKeys.PERFORM_DIRECT_BINARY_IMPORT,new String[]{Boolean.TRUE.toString()});
  }
  return ExportImportConfigurationLocalServiceUtil.addExportImportConfiguration(themeDisplay.getUserId(),groupId,name,description,type,settingsMap,new ServiceContext());
}
