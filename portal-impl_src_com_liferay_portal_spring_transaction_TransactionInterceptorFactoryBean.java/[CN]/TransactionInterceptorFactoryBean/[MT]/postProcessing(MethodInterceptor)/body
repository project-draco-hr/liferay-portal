{
  DynamicDataSourceTargetSource dynamicDataSourceTargetSource=(DynamicDataSourceTargetSource)InfrastructureUtil.getDynamicDataSourceTargetSource();
  if (dynamicDataSourceTargetSource == null) {
    return methodInterceptor;
  }
  DynamicDataSourceAdvice dynamicDataSourceAdvice=new DynamicDataSourceAdvice();
  dynamicDataSourceAdvice.setDynamicDataSourceTargetSource(dynamicDataSourceTargetSource);
  dynamicDataSourceAdvice.setNextMethodInterceptor(methodInterceptor);
  TransactionInterceptor transactionInterceptor=(TransactionInterceptor)methodInterceptor;
  dynamicDataSourceAdvice.setTransactionAttributeSource(transactionInterceptor.transactionAttributeSource);
  return dynamicDataSourceAdvice;
}
