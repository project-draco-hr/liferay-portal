{
  Object value=map.get(key);
  if (value == null) {
    return defaultValue;
  }
  if (value instanceof String) {
    return GetterUtil.getString((String)value,defaultValue);
  }
  if (value instanceof String[]) {
    String[] array=(String[])value;
    if (array.length == 0) {
      return defaultValue;
    }
    return GetterUtil.getString(array[0],defaultValue);
  }
  return GetterUtil.getString(String.valueOf(value),defaultValue);
}
