{
  long userId=portletDataContext.getUserId(userGroup.getUserUuid());
  ServiceContext serviceContext=portletDataContext.createServiceContext(userGroup,UserGroupsAdminPortletDataHandler.NAMESPACE);
  UserGroup existingUserGroup=UserGroupLocalServiceUtil.fetchUserGroupByUuidAndCompanyId(userGroup.getUuid(),portletDataContext.getCompanyId());
  if (existingUserGroup == null) {
    existingUserGroup=UserGroupLocalServiceUtil.fetchUserGroup(portletDataContext.getCompanyId(),userGroup.getName());
  }
  UserGroup importedUserGroup=null;
  if (existingUserGroup == null) {
    serviceContext.setUuid(userGroup.getUuid());
    importedUserGroup=UserGroupLocalServiceUtil.addUserGroup(userId,portletDataContext.getCompanyId(),userGroup.getName(),userGroup.getDescription(),serviceContext);
  }
 else {
    importedUserGroup=UserGroupLocalServiceUtil.updateUserGroup(portletDataContext.getCompanyId(),existingUserGroup.getUserGroupId(),userGroup.getName(),userGroup.getDescription(),serviceContext);
  }
  portletDataContext.importClassedModel(userGroup,importedUserGroup,UserGroupsAdminPortletDataHandler.NAMESPACE);
  importSite(userId,portletDataContext,userGroup,existingUserGroup);
}
