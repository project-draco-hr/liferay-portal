{
  PermissionChecker permissionChecker=getPermissionChecker();
  ServiceContext serviceContext=new ServiceContext();
  List<SocialActivityInterpreter> activityInterpreters=socialActivityInterpreterLocalService.getActivityInterpreters(StringPool.BLANK);
  List<SocialActivity> filteredActivities=new ArrayList<SocialActivity>();
  for (  SocialActivity activity : activities) {
    for (int i=0; i < activityInterpreters.size(); i++) {
      SocialActivityInterpreterImpl activityInterpreter=(SocialActivityInterpreterImpl)activityInterpreters.get(i);
      if (activityInterpreter.hasClassName(activity.getClassName())) {
        try {
          if (activityInterpreter.hasPermission(permissionChecker,activity,ActionKeys.VIEW,serviceContext)) {
            filteredActivities.add(activity);
            break;
          }
        }
 catch (        Exception e) {
        }
      }
    }
    if ((end != QueryUtil.ALL_POS) && (filteredActivities.size() > end)) {
      break;
    }
  }
  if ((end != QueryUtil.ALL_POS) && (start != QueryUtil.ALL_POS)) {
    if (end > filteredActivities.size()) {
      end=filteredActivities.size();
    }
    if (start > filteredActivities.size()) {
      start=filteredActivities.size();
    }
    filteredActivities=filteredActivities.subList(start,end);
  }
  return filteredActivities;
}
