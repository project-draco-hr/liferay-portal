{
  String className=getClassName(req);
  long classPK=getClassPK(req);
  double score=ParamUtil.getDouble(req,"score");
  if (score == 0) {
    RatingsEntryServiceUtil.deleteEntry(className,classPK);
  }
 else {
    RatingsEntryServiceUtil.updateEntry(className,classPK,score);
  }
  RatingsStats stats=RatingsStatsLocalServiceUtil.getStats(className,classPK);
  JSONObject jsonObj=new JSONObject();
  jsonObj.put("totalEntries",stats.getTotalEntries());
  jsonObj.put("totalScore",stats.getTotalScore());
  jsonObj.put("averageScore",stats.getAverageScore());
  return jsonObj.toString();
}
