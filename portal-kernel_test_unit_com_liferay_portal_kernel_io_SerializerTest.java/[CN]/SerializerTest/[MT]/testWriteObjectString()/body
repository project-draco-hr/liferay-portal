{
  String asciiString="abcdefghijklmn";
  Serializer serializer=new Serializer();
  serializer.writeObject(asciiString);
  ByteBuffer byteBuffer=serializer.toByteBuffer();
  Assert.assertEquals(6 + asciiString.length(),byteBuffer.limit());
  Assert.assertEquals(SerializationConstants.TC_STRING,byteBuffer.get());
  Assert.assertEquals(1,byteBuffer.get());
  Assert.assertEquals(asciiString.length(),byteBuffer.getInt());
  for (int i=0; i < asciiString.length(); i++) {
    Assert.assertEquals(asciiString.charAt(i),byteBuffer.get());
  }
  String nonAsciiString="???ASCII Code????????????";
  serializer=new Serializer();
  serializer.writeObject(nonAsciiString);
  byteBuffer=serializer.toByteBuffer();
  Assert.assertEquals(6 + nonAsciiString.length() * 2,byteBuffer.limit());
  Assert.assertEquals(SerializationConstants.TC_STRING,byteBuffer.get());
  Assert.assertEquals(0,byteBuffer.get());
  Assert.assertEquals(nonAsciiString.length(),byteBuffer.getInt());
  for (int i=0; i < nonAsciiString.length(); i++) {
    Assert.assertEquals(nonAsciiString.charAt(i),byteBuffer.getChar());
  }
}
