{
  MBThread thread=MBThreadLocalServiceUtil.getThread(classPK);
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  PortletURL portletURL=PortletURLFactoryUtil.create(portletRequest,PortletKeys.MESSAGE_BOARDS_ADMIN,PortalUtil.getControlPanelPlid(themeDisplay.getCompanyId()),PortletRequest.RENDER_PHASE);
  portletURL.setParameter("struts_action","/message_boards_admin/view");
  if (thread.getCategoryId() != MBCategoryConstants.DEFAULT_PARENT_CATEGORY_ID) {
    portletURL.setParameter("mbCategoryId",String.valueOf(thread.getCategoryId()));
  }
  return portletURL.toString();
}
