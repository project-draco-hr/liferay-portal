{
  try {
    if (!isProcessActionRequest(actionRequest)) {
      return;
    }
    if (!callActionMethod(actionRequest,actionResponse)) {
      return;
    }
    if (!SessionErrors.isEmpty(actionRequest)) {
      return;
    }
    boolean emptySessionMessages=isEmptySessionMessages(actionRequest);
    if (emptySessionMessages) {
      addSuccessMessage(actionRequest,actionResponse);
    }
    if (!SessionMessages.contains(actionRequest,PortalUtil.getPortletId(actionRequest) + SessionMessages.KEY_SUFFIX_FORCE_SEND_REDIRECT)) {
      if (emptySessionMessages || isAlwaysSendRedirect()) {
        sendRedirect(actionRequest,actionResponse);
      }
    }
  }
 catch (  PortletException pe) {
    Throwable cause=pe.getCause();
    if (isSessionErrorException(cause)) {
      SessionErrors.add(actionRequest,cause.getClass(),cause);
    }
 else {
      throw pe;
    }
  }
}
