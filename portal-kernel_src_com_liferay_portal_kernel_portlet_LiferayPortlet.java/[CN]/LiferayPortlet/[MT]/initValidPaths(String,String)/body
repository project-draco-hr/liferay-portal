{
  if (rootPath.equals(StringPool.SLASH)) {
    String contextName=getPortletContext().getPortletContextName();
    PortletApp portletApp=PortletLocalServiceUtil.getPortletApp(contextName);
    if (!portletApp.isWARFile()) {
      _log.error("Portlet " + getPortletName() + " has incorrect "+ "root path and can access all portal JSPs. "+ "Portal disabled access to the JSPs");
      validPaths=new HashSet<>();
      return;
    }
  }
  String[] validPathsInitParameter=StringUtil.split(getInitParameter("valid-paths"));
  validPaths=getPaths(rootPath,fileExtension);
  validPaths.addAll(getPaths(_PATH_META_INF_RESOURCES + rootPath,fileExtension));
  validPaths.addAll(Arrays.asList(validPathsInitParameter));
}
