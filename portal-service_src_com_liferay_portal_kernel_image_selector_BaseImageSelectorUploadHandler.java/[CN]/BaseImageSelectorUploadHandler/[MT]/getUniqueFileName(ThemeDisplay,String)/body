{
  FileEntry fileEntry=_fetchTempFileEntry(themeDisplay,fileName);
  if (fileEntry == null) {
    return fileName;
  }
  int suffix=1;
  for (int i=0; i < _MAX_UNIQUE_FILE_NAME_TRIALS; i++) {
    String curFileName=FileUtil.updateFileName(fileName,String.valueOf(suffix));
    fileEntry=_fetchTempFileEntry(themeDisplay,curFileName);
    if (fileEntry == null) {
      return curFileName;
    }
    suffix++;
  }
  throw new PortalException("Cannot find a unique file name for " + fileName);
}
