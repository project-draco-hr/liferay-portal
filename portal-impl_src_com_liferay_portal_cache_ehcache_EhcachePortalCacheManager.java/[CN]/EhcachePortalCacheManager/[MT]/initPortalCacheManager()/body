{
  String configurationPath=PropsUtil.get(_configPropertyKey);
  if (Validator.isNull(configurationPath)) {
    configurationPath=_DEFAULT_CLUSTERED_EHCACHE_CONFIG_FILE;
  }
  _usingDefault=configurationPath.equals(_DEFAULT_CLUSTERED_EHCACHE_CONFIG_FILE);
  _configurationPair=EhcacheConfigurationHelperUtil.getConfiguration(configurationPath,clusterAware,_usingDefault);
  _cacheManager=new CacheManager(_configurationPair.getKey());
  _cacheManager.setName(name);
  FailSafeTimer failSafeTimer=_cacheManager.getTimer();
  failSafeTimer.cancel();
  try {
    Field cacheManagerTimerField=ReflectionUtil.getDeclaredField(CacheManager.class,"cacheManagerTimer");
    cacheManagerTimerField.set(_cacheManager,null);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  CacheManagerEventListenerRegistry cacheManagerEventListenerRegistry=_cacheManager.getCacheManagerEventListenerRegistry();
  cacheManagerEventListenerRegistry.registerListener(new PortalCacheManagerEventListener(aggregatedCacheManagerListener));
  Registry registry=RegistryUtil.getRegistry();
  _serviceTracker=registry.trackServices(MBeanServer.class,new MBeanServerServiceTrackerCustomizer());
  _serviceTracker.open();
}
