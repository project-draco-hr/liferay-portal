{
  String configFile=PropsUtil.get(_configPropertyKey);
  boolean usingDefault=false;
  if (Validator.isNull(configFile)) {
    configFile=_DEFAULT_CLUSTERED_EHCACHE_CONFIG_FILE;
    usingDefault=true;
  }
  Configuration configuration=EhcacheConfigurationUtil.getConfiguration(configFile,_clusterAware,usingDefault);
  _cacheManager=new CacheManager(configuration);
  FailSafeTimer failSafeTimer=_cacheManager.getTimer();
  failSafeTimer.cancel();
  try {
    Field cacheManagerTimerField=ReflectionUtil.getDeclaredField(CacheManager.class,"cacheManagerTimer");
    cacheManagerTimerField.set(_cacheManager,null);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  if (PropsValues.EHCACHE_PORTAL_CACHE_MANAGER_JMX_ENABLED) {
    _managementService=new ManagementService(_cacheManager,_mBeanServer,_registerCacheManager,_registerCaches,_registerCacheConfigurations,_registerCacheStatistics);
    _managementService.init();
  }
}
