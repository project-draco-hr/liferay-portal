{
  PortalCache<K,V> portalCache=_ehcachePortalCaches.get(name);
  if (portalCache == null) {
synchronized (_cacheManager) {
      portalCache=_ehcachePortalCaches.get(name);
      if (portalCache == null) {
        portalCache=addCache(name,null);
      }
    }
  }
  if (PropsValues.TRANSACTIONAL_CACHE_ENABLED && (name.startsWith(EntityCacheImpl.CACHE_NAME) || name.startsWith(FinderCacheImpl.CACHE_NAME))) {
    portalCache=new TransactionalPortalCache<K,V>(portalCache);
  }
  if (PropsValues.EHCACHE_BLOCKING_CACHE_ALLOWED && blocking) {
    portalCache=new BlockingPortalCache<K,V>(portalCache);
  }
  return portalCache;
}
