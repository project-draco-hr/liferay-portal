{
  long leftPrimaryKey=1;
  List<Right> rights=_tableMappingImpl.getRightBaseModels(leftPrimaryKey,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  Assert.assertSame(Collections.emptyList(),rights);
  PortalCache<Long,long[]> leftToRightPortalCache=_tableMappingImpl.leftToRightPortalCache;
  leftToRightPortalCache.remove(leftPrimaryKey);
  long rightPrimaryKey1=2;
  _mappingStore.put(leftPrimaryKey,new long[]{rightPrimaryKey1});
  rights=_tableMappingImpl.getRightBaseModels(leftPrimaryKey,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  Assert.assertEquals(1,rights.size());
  Right right1=rights.get(0);
  Assert.assertEquals(rightPrimaryKey1,right1.getPrimaryKeyObj());
  leftToRightPortalCache.remove(leftPrimaryKey);
  long rightPrimaryKey2=3;
  _mappingStore.put(leftPrimaryKey,new long[]{rightPrimaryKey2,rightPrimaryKey1});
  rights=_tableMappingImpl.getRightBaseModels(leftPrimaryKey,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  Assert.assertEquals(2,rights.size());
  right1=rights.get(0);
  Right right2=rights.get(1);
  Assert.assertEquals(rightPrimaryKey1,right1.getPrimaryKeyObj());
  Assert.assertEquals(rightPrimaryKey2,right2.getPrimaryKeyObj());
  leftToRightPortalCache.remove(leftPrimaryKey);
  _mappingStore.put(leftPrimaryKey,new long[]{rightPrimaryKey2,rightPrimaryKey1});
  rights=_tableMappingImpl.getRightBaseModels(leftPrimaryKey,QueryUtil.ALL_POS,QueryUtil.ALL_POS,new OrderByComparator(){
    @Override public int compare(    Object obj1,    Object obj2){
      Right right1=(Right)obj1;
      Right right2=(Right)obj2;
      Long rightPrimaryKey1=(Long)right1.getPrimaryKeyObj();
      Long rightPrimaryKey2=(Long)right2.getPrimaryKeyObj();
      return rightPrimaryKey2.compareTo(rightPrimaryKey1);
    }
  }
);
  Assert.assertEquals(2,rights.size());
  right1=rights.get(0);
  right2=rights.get(1);
  Assert.assertEquals(rightPrimaryKey2,right1.getPrimaryKeyObj());
  Assert.assertEquals(rightPrimaryKey1,right2.getPrimaryKeyObj());
  leftToRightPortalCache.remove(leftPrimaryKey);
  long rightPrimaryKey3=4;
  _mappingStore.put(leftPrimaryKey,new long[]{rightPrimaryKey3,rightPrimaryKey2,rightPrimaryKey1});
  rights=_tableMappingImpl.getRightBaseModels(leftPrimaryKey,1,2,null);
  Assert.assertEquals(1,rights.size());
  Right right=rights.get(0);
  Assert.assertEquals(rightPrimaryKey2,right.getPrimaryKeyObj());
  leftToRightPortalCache.remove(leftPrimaryKey);
  _rightBasePersistence.setNoSuchModelException(true);
  try {
    _tableMappingImpl.getRightBaseModels(leftPrimaryKey,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  }
 catch (  SystemException se) {
    Throwable cause=se.getCause();
    Assert.assertSame(NoSuchModelException.class,cause.getClass());
    Assert.assertEquals(String.valueOf(rightPrimaryKey1),cause.getMessage());
  }
 finally {
    _rightBasePersistence.setNoSuchModelException(false);
  }
}
