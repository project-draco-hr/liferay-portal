{
  PrintStream originalErrorStream=System.err;
  PrintStream originalOutputStream=System.out;
  originalErrorStream.flush();
  originalOutputStream.flush();
  ByteArrayOutputStream newErrorStream=new ByteArrayOutputStream();
  ByteArrayOutputStream newOutputStream=new ByteArrayOutputStream();
  System.setErr(new PrintStream(newErrorStream,true));
  System.setOut(new PrintStream(newOutputStream,true));
  try (bnd bnd=new bnd()){
    String[] args={"diff","--ignore",_BUNDLES_DIFF_IGNORES,bundleFile1.getAbsolutePath(),bundleFile2.getAbsolutePath()};
    bnd.start(args);
  }
  finally {
    System.setErr(originalErrorStream);
    System.setOut(originalOutputStream);
  }
  String output=newErrorStream.toString();
  if (Validator.isNull(output)) {
    output=newOutputStream.toString();
  }
  Assert.assertEquals("Bundle " + bundleFile1 + " and "+ bundleFile2+ " do not match","",output);
}
