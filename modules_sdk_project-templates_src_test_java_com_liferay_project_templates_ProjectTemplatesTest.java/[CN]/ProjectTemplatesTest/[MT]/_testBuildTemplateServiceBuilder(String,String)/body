{
  File gradleProjectDir=_buildTemplateWithGradle("service-builder",name,"--package-name",packageName);
  String apiProjectName=name + "-api";
  String serviceProjectName=name + "-service";
  _testContains(gradleProjectDir,"settings.gradle","include \"" + apiProjectName + "\", \""+ serviceProjectName+ "\"");
  _testContains(gradleProjectDir,apiProjectName + "/bnd.bnd","Export-Package:\\",packageName + ".exception,\\",packageName + ".model,\\",packageName + ".service,\\",packageName + ".service.persistence");
  _testContains(gradleProjectDir,serviceProjectName + "/bnd.bnd","Liferay-Service: true");
  _testContains(gradleProjectDir,serviceProjectName + "/build.gradle","compileOnly project(\":" + apiProjectName + "\")");
  _executeGradle(gradleProjectDir,":" + serviceProjectName + _GRADLE_TASK_PATH_BUILD_SERVICE);
  _executeGradle(gradleProjectDir,":" + apiProjectName + _GRADLE_TASK_PATH_BUILD,":" + serviceProjectName + _GRADLE_TASK_PATH_BUILD);
  File gradleApiBundleFile=_testExists(gradleProjectDir,apiProjectName + "/build/libs/" + packageName+ ".api-1.0.0.jar");
  File gradleServiceBundleFile=_testExists(gradleProjectDir,serviceProjectName + "/build/libs/" + packageName+ ".service-1.0.0.jar");
  File mavenProjectDir=_buildTemplateWithMaven("service-builder",name,"-Dpackage=" + packageName);
  _executeMaven(new File(mavenProjectDir,serviceProjectName),_MAVEN_GOAL_BUILD_SERVICE);
  File gradleServicePropertiesFile=new File(gradleProjectDir,serviceProjectName + "/src/main/resources/service.properties");
  File mavenServicePropertiesFile=new File(mavenProjectDir,serviceProjectName + "/src/main/resources/service.properties");
  Files.copy(gradleServicePropertiesFile.toPath(),mavenServicePropertiesFile.toPath(),StandardCopyOption.REPLACE_EXISTING);
  _executeMaven(mavenProjectDir,_MAVEN_GOAL_PACKAGE);
  File mavenApiBundleFile=_testExists(mavenProjectDir,apiProjectName + "/target/" + name+ "-api-1.0.0.jar");
  File mavenServiceBundleFile=_testExists(mavenProjectDir,serviceProjectName + "/target/" + name+ "-service-1.0.0.jar");
  _testBundlesDiff(gradleApiBundleFile,mavenApiBundleFile);
  _testBundlesDiff(gradleServiceBundleFile,mavenServiceBundleFile);
}
