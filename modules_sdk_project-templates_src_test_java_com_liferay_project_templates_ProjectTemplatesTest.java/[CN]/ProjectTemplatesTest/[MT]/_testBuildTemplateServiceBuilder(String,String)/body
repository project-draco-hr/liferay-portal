{
  File projectDir=_buildTemplateWithGradle("servicebuilder",name,"--package-name",packageName);
  String apiProjectName=name + "-api";
  String serviceProjectName=name + "-service";
  _testContains(projectDir,"settings.gradle","include \"" + apiProjectName + "\", \""+ serviceProjectName+ "\"");
  _testContains(projectDir,apiProjectName + "/bnd.bnd","Export-Package:\\",packageName + ".exception,\\",packageName + ".model,\\",packageName + ".service,\\",packageName + ".service.persistence");
  _testContains(projectDir,serviceProjectName + "/bnd.bnd","Liferay-Service: true");
  _testContains(projectDir,serviceProjectName + "/build.gradle","compileOnly project(\":" + apiProjectName + "\")");
  String[] tasks=new String[]{":" + serviceProjectName + ":buildService"};
  _executeGradle(projectDir,tasks);
  tasks=new String[]{":" + apiProjectName + ":build",":" + serviceProjectName + ":build"};
  _executeGradle(projectDir,tasks);
  _testExists(projectDir,apiProjectName + "/build/libs/" + packageName+ ".api-1.0.0.jar");
  _testExists(projectDir,serviceProjectName + "/build/libs/" + packageName+ ".service-1.0.0.jar");
  File gradleBundleApiFile=new File(projectDir,apiProjectName + "/build/libs/" + packageName+ ".api-1.0.0.jar");
  File gradleBundleServiceFile=new File(projectDir,serviceProjectName + "/build/libs/" + packageName+ ".service-1.0.0.jar");
  File mavenProjectDir=_buildTemplateWithMaven("servicebuilder",name,"-Dpackage=" + packageName);
  _testContains(projectDir,"settings.gradle","include \"" + apiProjectName + "\", \""+ serviceProjectName+ "\"");
  _testContains(projectDir,apiProjectName + "/bnd.bnd","Export-Package:\\",packageName + ".exception,\\",packageName + ".model,\\",packageName + ".service,\\",packageName + ".service.persistence");
  _testContains(projectDir,serviceProjectName + "/bnd.bnd","Liferay-Service: true");
  _testContains(projectDir,serviceProjectName + "/build.gradle","compileOnly project(\":" + apiProjectName + "\")");
  _executeMaven(new File(mavenProjectDir,serviceProjectName),new String[]{"-U","liferay:build-service"});
  _executeMaven(mavenProjectDir,_MAVEN_BUILD_ARGS);
  _testExists(mavenProjectDir,apiProjectName + "/target/" + name+ "-api-1.0.0.jar");
  _testExists(mavenProjectDir,serviceProjectName + "/target/" + name+ "-service-1.0.0.jar");
  File mavenBundleApiFile=new File(mavenProjectDir,apiProjectName + "/target/" + name+ "-api-1.0.0.jar");
  File mavenBundleServiceFile=new File(mavenProjectDir,serviceProjectName + "/target/" + name+ "-service-1.0.0.jar");
  _executeBndDiff(gradleBundleApiFile,mavenBundleApiFile);
  _executeBndDiff(gradleBundleServiceFile,mavenBundleServiceFile);
}
