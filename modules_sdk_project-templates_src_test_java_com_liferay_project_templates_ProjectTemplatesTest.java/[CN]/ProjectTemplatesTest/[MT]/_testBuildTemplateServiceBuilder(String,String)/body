{
  File gradleProjectDir=_buildTemplateWithGradle("servicebuilder",name,"--package-name",packageName);
  String apiProjectName=name + "-api";
  String serviceProjectName=name + "-service";
  _testContains(gradleProjectDir,"settings.gradle","include \"" + apiProjectName + "\", \""+ serviceProjectName+ "\"");
  _testContains(gradleProjectDir,apiProjectName + "/bnd.bnd","Export-Package:\\",packageName + ".exception,\\",packageName + ".model,\\",packageName + ".service,\\",packageName + ".service.persistence");
  _testContains(gradleProjectDir,serviceProjectName + "/bnd.bnd","Liferay-Service: true");
  _testContains(gradleProjectDir,serviceProjectName + "/build.gradle","compileOnly project(\":" + apiProjectName + "\")");
  String[] tasks=new String[]{":" + serviceProjectName + ":buildService"};
  _executeGradle(gradleProjectDir,tasks);
  tasks=new String[]{":" + apiProjectName + ":build",":" + serviceProjectName + ":build"};
  _executeGradle(gradleProjectDir,tasks);
  File gradleBundleApiFile=_testExists(gradleProjectDir,apiProjectName + "/build/libs/" + packageName+ ".api-1.0.0.jar");
  File gradleBundleServiceFile=_testExists(gradleProjectDir,serviceProjectName + "/build/libs/" + packageName+ ".service-1.0.0.jar");
  File mavenProjectDir=_buildTemplateWithMaven("servicebuilder",name,"-Dpackage=" + packageName);
  _testContains(gradleProjectDir,"settings.gradle","include \"" + apiProjectName + "\", \""+ serviceProjectName+ "\"");
  _testContains(gradleProjectDir,apiProjectName + "/bnd.bnd","Export-Package:\\",packageName + ".exception,\\",packageName + ".model,\\",packageName + ".service,\\",packageName + ".service.persistence");
  _testContains(gradleProjectDir,serviceProjectName + "/bnd.bnd","Liferay-Service: true");
  _testContains(gradleProjectDir,serviceProjectName + "/build.gradle","compileOnly project(\":" + apiProjectName + "\")");
  _executeMaven(new File(mavenProjectDir,serviceProjectName),new String[]{"-U","liferay:build-service"});
  File gradleServiceProps=new File(gradleProjectDir,serviceProjectName + "/src/main/resources/service.properties");
  File mavenServiceProps=new File(mavenProjectDir,serviceProjectName + "/src/main/resources/service.properties");
  Files.copy(gradleServiceProps.toPath(),mavenServiceProps.toPath(),StandardCopyOption.REPLACE_EXISTING);
  _executeMaven(mavenProjectDir,_MAVEN_BUILD_ARGS);
  File mavenBundleApiFile=_testExists(mavenProjectDir,apiProjectName + "/target/" + name+ "-api-1.0.0.jar");
  File mavenBundleServiceFile=_testExists(mavenProjectDir,serviceProjectName + "/target/" + name+ "-service-1.0.0.jar");
  _executeBndDiff(gradleBundleApiFile,mavenBundleApiFile);
  _executeBndDiff(gradleBundleServiceFile,mavenBundleServiceFile);
}
