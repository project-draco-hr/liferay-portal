{
  boolean mirrors=false;
  boolean proxies=false;
  if (Validator.isNotNull(_repositoryUrl)) {
    mirrors=true;
  }
  if (Validator.isNotNull(_httpProxyHost) && Validator.isNotNull(_httpProxyPort)) {
    proxies=true;
  }
  if (!mirrors && !proxies) {
    _mavenSettingsXmlFile=null;
    return;
  }
  String mavenSettingsXml=FileTestUtil.read("com/liferay/project/templates/dependencies" + "/maven_settings_xml.tmpl");
  if (mirrors) {
    mavenSettingsXml=mavenSettingsXml.replace("[$REPOSITORY_URL$]",_repositoryUrl);
  }
 else {
    mavenSettingsXml=mavenSettingsXml.replaceFirst("<mirrors>[\\s\\S]+<\\/mirrors>","");
  }
  if (proxies) {
    mavenSettingsXml=mavenSettingsXml.replace("[$HTTP_PROXY_HOST$]",_httpProxyHost);
    mavenSettingsXml=mavenSettingsXml.replace("[$HTTP_PROXY_PORT$]",_httpProxyPort);
  }
 else {
    mavenSettingsXml=mavenSettingsXml.replaceFirst("<proxies>[\\s\\S]+<\\/proxies>","");
  }
  _mavenSettingsXmlFile=testCaseTemporaryFolder.newFile("settings.xml");
  Files.write(_mavenSettingsXmlFile.toPath(),mavenSettingsXml.getBytes(StandardCharsets.UTF_8));
}
