{
  User user=userPersistence.findByPrimaryKey(userId);
  long classNameId=PortalUtil.getClassNameId(className);
  Date now=new Date();
  long workflowInstanceLinkId=counterLocalService.increment();
  WorkflowInstanceLink workflowInstanceLink=workflowInstanceLinkPersistence.create(workflowInstanceLinkId);
  workflowInstanceLink.setCreateDate(now);
  workflowInstanceLink.setModifiedDate(now);
  workflowInstanceLink.setUserId(userId);
  workflowInstanceLink.setUserName(user.getFullName());
  workflowInstanceLink.setGroupId(groupId);
  workflowInstanceLink.setCompanyId(companyId);
  workflowInstanceLink.setClassNameId(classNameId);
  workflowInstanceLink.setClassPK(classPK);
  workflowInstanceLink.setWorkflowInstanceId(workflowInstanceId);
  workflowInstanceLinkPersistence.update(workflowInstanceLink,false);
  return workflowInstanceLink;
}
