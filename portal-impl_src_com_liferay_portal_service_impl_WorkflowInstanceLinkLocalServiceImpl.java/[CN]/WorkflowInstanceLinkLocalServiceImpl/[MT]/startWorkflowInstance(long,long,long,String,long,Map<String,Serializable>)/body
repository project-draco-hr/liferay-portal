{
  try {
    WorkflowDefinitionLink workflowDefinitionLink=workflowDefinitionLinkLocalService.getWorkflowDefinitionLink(companyId,groupId,className);
    String workflowDefinitionName=workflowDefinitionLink.getWorkflowDefinitionName();
    int workflowDefinitionVersion=workflowDefinitionLink.getWorkflowDefinitionVersion();
    if (workflowContext != null) {
      workflowContext=new HashMap<String,Serializable>(workflowContext);
    }
 else {
      workflowContext=new HashMap<String,Serializable>();
    }
    workflowContext.put(WorkflowConstants.COMPANY_ID,companyId);
    workflowContext.put(WorkflowConstants.GROUP_ID,groupId);
    workflowContext.put(WorkflowConstants.ENTRY_CLASS_NAME,className);
    workflowContext.put(WorkflowConstants.ENTRY_CLASS_PK,classPK);
    WorkflowHandler workflowHandler=WorkflowHandlerRegistryUtil.getWorkflowHandler(className);
    workflowContext.put(WorkflowConstants.ENTRY_TYPE,workflowHandler.getType());
    WorkflowInstance workflowInstance=WorkflowInstanceManagerUtil.startWorkflowInstance(companyId,userId,workflowDefinitionName,workflowDefinitionVersion,null,workflowContext);
    addWorkflowInstanceLink(userId,companyId,groupId,className,classPK,workflowInstance.getWorkflowInstanceId());
  }
 catch (  NoSuchWorkflowDefinitionLinkException nswdle) {
    return;
  }
}
