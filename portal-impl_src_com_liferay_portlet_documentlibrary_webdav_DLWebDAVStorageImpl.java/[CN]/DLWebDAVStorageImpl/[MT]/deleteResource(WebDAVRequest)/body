{
  try {
    Resource resource=getResource(webDavRequest);
    if (resource == null) {
      return HttpServletResponse.SC_NOT_FOUND;
    }
    Object model=resource.getModel();
    if (model instanceof DLFolder) {
      DLFolder folder=(DLFolder)model;
      DLAppServiceUtil.deleteFolder(folder.getFolderId());
    }
 else {
      DLFileEntry fileEntry=(DLFileEntry)model;
      if (isLocked(fileEntry,webDavRequest.getLockUuid())) {
        return WebDAVUtil.SC_LOCKED;
      }
      DLAppServiceUtil.deleteFileEntry(fileEntry.getGroupId(),fileEntry.getFolderId(),fileEntry.getName());
    }
    return HttpServletResponse.SC_NO_CONTENT;
  }
 catch (  PrincipalException pe) {
    return HttpServletResponse.SC_FORBIDDEN;
  }
catch (  Exception e) {
    throw new WebDAVException(e);
  }
}
