{
  DLFileVersion fileVersion=DLFileVersionLocalServiceUtil.getLatestFileVersion(fileEntry.getGroupId(),fileEntry.getFolderId(),fileEntry.getName());
  if (fileVersion.getStatus() != StatusConstants.DRAFT) {
    return;
  }
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setAddCommunityPermissions(isAddCommunityPermissions(fileEntry.getGroupId()));
  serviceContext.setAddGuestPermissions(true);
  serviceContext.setStatus(StatusConstants.APPROVED);
  String[] assetTagNames=AssetTagLocalServiceUtil.getTagNames(DLFileEntry.class.getName(),fileEntry.getFileEntryId());
  serviceContext.setAssetTagNames(assetTagNames);
  DLFileEntryLocalServiceUtil.updateWorkflowStatus(fileEntry.getUserId(),fileEntry.getFileEntryId(),serviceContext);
}
