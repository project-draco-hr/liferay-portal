{
  DLFileVersion fileVersion=DLFileVersionLocalServiceUtil.getLatestFileVersion(fileEntry.getGroupId(),fileEntry.getFolderId(),fileEntry.getName());
  if (fileVersion.getStatus() != WorkflowConstants.STATUS_DRAFT) {
    return;
  }
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setAddCommunityPermissions(isAddCommunityPermissions(fileEntry.getGroupId()));
  serviceContext.setAddGuestPermissions(true);
  String[] assetTagNames=AssetTagLocalServiceUtil.getTagNames(DLFileEntry.class.getName(),fileEntry.getFileEntryId());
  serviceContext.setAssetTagNames(assetTagNames);
  DLFileEntryLocalServiceUtil.updateStatus(fileEntry.getUserId(),fileEntry.getFileEntryId(),WorkflowConstants.STATUS_APPROVED,serviceContext);
}
