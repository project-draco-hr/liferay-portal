{
  if (n < 0) {
    return 0;
  }
  long number=n;
  if ((index + number) > capability) {
    number=capability - index;
  }
  index+=number;
  return number;
}
