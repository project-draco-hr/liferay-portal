{
  replaceJarBuilderFactory(project);
  BundleExtension bundleExtension=GradleUtil.getExtension(project,BundleExtension.class);
  bundleExtension.setFailOnError(true);
  Map<String,String> bundleInstructions=getBundleInstructions(bundleExtension);
  Properties bundleProperties=null;
  try {
    bundleProperties=FileUtil.readProperties(project,"bnd.bnd");
  }
 catch (  Exception e) {
    throw new GradleException("Unable to read bundle properties",e);
  }
  Enumeration<Object> keys=bundleProperties.keys();
  while (keys.hasMoreElements()) {
    String key=(String)keys.nextElement();
    String value=bundleProperties.getProperty(key);
    bundleInstructions.put(key,value);
  }
}
